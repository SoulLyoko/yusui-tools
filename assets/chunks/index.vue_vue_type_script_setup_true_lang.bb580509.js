var xT=Object.defineProperty;var ST=(e,i,o)=>i in e?xT(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o;var ti=(e,i,o)=>(ST(e,typeof i!="symbol"?i+"":i,o),o);import{g as Xi,I as TT}from"./data.4cb21f02.js";import{d as AT,l as PT}from"../flow-design_flow-modeler_index.md.a7cf72ad.js";import{n as t_,h as om,r as NT,d as jT,G as _a,i as Rc,C as bf,D as wf,I as xf,m as MT,u as oi,a6 as _f,B as RT,f as BE,w as Up,k as DT,j as kT}from"./framework.b266b145.js";import{u as GE}from"./theme.5db20171.js";import{i as im,u as UE}from"./uniqueId.8e3f83bc.js";import{aE as Lp,aj as Ef,d3 as am}from"../composables_use-crud_index.md.b68a9fc1.js";import{u as CT}from"../app.4528da56.js";const zE={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}};function IT({lf:e,graphData:i,elementData:o,formData:s,formLoading:n,formOption:c,formOptions:f,editorVisible:h,formOptionFormat:v,formDataFormat:b}){var O,x,S,N,j,R,D;async function g({data:z,isForce:Z}={data:void 0,isForce:!1}){var se,oe,pe,K,U,Y;const fe=(se=e.value)==null?void 0:se.graphModel.nodes.find(W=>W.type==="process");!z&&(fe!=null&&fe.id)&&(z=(oe=e.value)==null?void 0:oe.getNodeDataById(fe.id)),!((z==null?void 0:z.id)===((pe=o.value)==null?void 0:pe.id)&&!Z)&&(z.type!=="process"&&((K=e.value)==null||K.selectElementById(z.id)),n.value=!0,await t_(),o.value=z,c.value=await v({menuBtn:!1,span:24,labelPosition:"left",group:((U=f.value)==null?void 0:U[z.type])??AT}),s.value=await b({...z.properties,id:z.id,name:((Y=z.text)==null?void 0:Y.value)||""}),await t_(),n.value=!1)}(O=e.value)==null||O.on("element:click",g),(x=e.value)==null||x.on("blank:click",g),(S=e.value)==null||S.on("node:add",g),(N=e.value)==null||N.on("node:dnd-add",g),(j=e.value)==null||j.on("node:delete",()=>g()),(R=e.value)==null||R.on("history:change",()=>{var z;i.value=(z=e.value)==null?void 0:z.getGraphData()}),(D=e.value)==null||D.on("custom:edit-click",()=>{h.value=!0})}var Gg={exports:{}};(function(e,i){(function(o,s){e.exports=s()})(window,function(){return function(o){var s={};function n(c){if(s[c])return s[c].exports;var f=s[c]={i:c,l:!1,exports:{}};return o[c].call(f.exports,f,f.exports,n),f.l=!0,f.exports}return n.m=o,n.c=s,n.d=function(c,f,h){n.o(c,f)||Object.defineProperty(c,f,{enumerable:!0,get:h})},n.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},n.t=function(c,f){if(1&f&&(c=n(c)),8&f||4&f&&typeof c=="object"&&c&&c.__esModule)return c;var h=Object.create(null);if(n.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:c}),2&f&&typeof c!="string")for(var v in c)n.d(h,v,function(b){return c[b]}.bind(null,v));return h},n.n=function(c){var f=c&&c.__esModule?function(){return c.default}:function(){return c};return n.d(f,"a",f),f},n.o=function(c,f){return Object.prototype.hasOwnProperty.call(c,f)},n.p="",n(n.s=215)}([function(o,s,n){n.d(s,"a",function(){return se}),n.d(s,"b",function(){return fe}),n.d(s,"c",function(){return xt}),n.d(s,"d",function(){return tr}),n.d(s,"e",function(){return D}),n.d(s,"f",function(){return Z}),n.d(s,"g",function(){return D}),n.d(s,"h",function(){return bt}),n.d(s,"i",function(){return f}),n.d(s,"j",function(){return Bt}),n.d(s,"k",function(){return L});var c,f,h,v,b,g,O,x={},S=[],N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function j(Oe,re){for(var be in re)Oe[be]=re[be];return Oe}function R(Oe){var re=Oe.parentNode;re&&re.removeChild(Oe)}function D(Oe,re,be){var qe,yt,et,Dt={};for(et in re)et=="key"?qe=re[et]:et=="ref"?yt=re[et]:Dt[et]=re[et];if(arguments.length>2&&(Dt.children=arguments.length>3?c.call(arguments,2):be),typeof Oe=="function"&&Oe.defaultProps!=null)for(et in Oe.defaultProps)Dt[et]===void 0&&(Dt[et]=Oe.defaultProps[et]);return z(Oe,Dt,qe,yt,null)}function z(Oe,re,be,qe,yt){var et={type:Oe,props:re,key:be,ref:qe,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:yt??++h};return yt==null&&f.vnode!=null&&f.vnode(et),et}function Z(){return{current:null}}function fe(Oe){return Oe.children}function se(Oe,re){this.props=Oe,this.context=re}function oe(Oe,re){if(re==null)return Oe.__?oe(Oe.__,Oe.__.__k.indexOf(Oe)+1):null;for(var be;re<Oe.__k.length;re++)if((be=Oe.__k[re])!=null&&be.__e!=null)return be.__e;return typeof Oe.type=="function"?oe(Oe):null}function pe(Oe){var re,be;if((Oe=Oe.__)!=null&&Oe.__c!=null){for(Oe.__e=Oe.__c.base=null,re=0;re<Oe.__k.length;re++)if((be=Oe.__k[re])!=null&&be.__e!=null){Oe.__e=Oe.__c.base=be.__e;break}return pe(Oe)}}function K(Oe){(!Oe.__d&&(Oe.__d=!0)&&v.push(Oe)&&!U.__r++||g!==f.debounceRendering)&&((g=f.debounceRendering)||b)(U)}function U(){for(var Oe;U.__r=v.length;)Oe=v.sort(function(re,be){return re.__v.__b-be.__v.__b}),v=[],Oe.some(function(re){var be,qe,yt,et,Dt,zt;re.__d&&(Dt=(et=(be=re).__v).__e,(zt=be.__P)&&(qe=[],(yt=j({},et)).__v=et.__v+1,_e(zt,et,yt,be.__n,zt.ownerSVGElement!==void 0,et.__h!=null?[Dt]:null,qe,Dt??oe(et),et.__h),ie(qe,et),et.__e!=Dt&&pe(et)))})}function Y(Oe,re,be,qe,yt,et,Dt,zt,Zt,Gt){var ze,Yt,xe,Ht,yr,B,pr,kr=qe&&qe.__k||S,$r=kr.length;for(be.__k=[],ze=0;ze<re.length;ze++)if((Ht=be.__k[ze]=(Ht=re[ze])==null||typeof Ht=="boolean"?null:typeof Ht=="string"||typeof Ht=="number"||typeof Ht=="bigint"?z(null,Ht,null,null,Ht):Array.isArray(Ht)?z(fe,{children:Ht},null,null,null):Ht.__b>0?z(Ht.type,Ht.props,Ht.key,null,Ht.__v):Ht)!=null){if(Ht.__=be,Ht.__b=be.__b+1,(xe=kr[ze])===null||xe&&Ht.key==xe.key&&Ht.type===xe.type)kr[ze]=void 0;else for(Yt=0;Yt<$r;Yt++){if((xe=kr[Yt])&&Ht.key==xe.key&&Ht.type===xe.type){kr[Yt]=void 0;break}xe=null}_e(Oe,Ht,xe=xe||x,yt,et,Dt,zt,Zt,Gt),yr=Ht.__e,(Yt=Ht.ref)&&xe.ref!=Yt&&(pr||(pr=[]),xe.ref&&pr.push(xe.ref,null,Ht),pr.push(Yt,Ht.__c||yr,Ht)),yr!=null?(B==null&&(B=yr),typeof Ht.type=="function"&&Ht.__k===xe.__k?Ht.__d=Zt=W(Ht,Zt,Oe):Zt=he(Oe,Ht,xe,kr,yr,Zt),typeof be.type=="function"&&(be.__d=Zt)):Zt&&xe.__e==Zt&&Zt.parentNode!=Oe&&(Zt=oe(xe))}for(be.__e=B,ze=$r;ze--;)kr[ze]!=null&&(typeof be.type=="function"&&kr[ze].__e!=null&&kr[ze].__e==be.__d&&(be.__d=oe(qe,ze+1)),Qe(kr[ze],kr[ze]));if(pr)for(ze=0;ze<pr.length;ze++)Be(pr[ze],pr[++ze],pr[++ze])}function W(Oe,re,be){for(var qe,yt=Oe.__k,et=0;yt&&et<yt.length;et++)(qe=yt[et])&&(qe.__=Oe,re=typeof qe.type=="function"?W(qe,re,be):he(be,qe,qe,yt,qe.__e,re));return re}function L(Oe,re){return re=re||[],Oe==null||typeof Oe=="boolean"||(Array.isArray(Oe)?Oe.some(function(be){L(be,re)}):re.push(Oe)),re}function he(Oe,re,be,qe,yt,et){var Dt,zt,Zt;if(re.__d!==void 0)Dt=re.__d,re.__d=void 0;else if(be==null||yt!=et||yt.parentNode==null)e:if(et==null||et.parentNode!==Oe)Oe.appendChild(yt),Dt=null;else{for(zt=et,Zt=0;(zt=zt.nextSibling)&&Zt<qe.length;Zt+=2)if(zt==yt)break e;Oe.insertBefore(yt,et),Dt=et}return Dt!==void 0?Dt:yt.nextSibling}function Ce(Oe,re,be){re[0]==="-"?Oe.setProperty(re,be):Oe[re]=be==null?"":typeof be!="number"||N.test(re)?be:be+"px"}function ee(Oe,re,be,qe,yt){var et;e:if(re==="style")if(typeof be=="string")Oe.style.cssText=be;else{if(typeof qe=="string"&&(Oe.style.cssText=qe=""),qe)for(re in qe)be&&re in be||Ce(Oe.style,re,"");if(be)for(re in be)qe&&be[re]===qe[re]||Ce(Oe.style,re,be[re])}else if(re[0]==="o"&&re[1]==="n")et=re!==(re=re.replace(/Capture$/,"")),re=re.toLowerCase()in Oe?re.toLowerCase().slice(2):re.slice(2),Oe.l||(Oe.l={}),Oe.l[re+et]=be,be?qe||Oe.addEventListener(re,et?ye:ce,et):Oe.removeEventListener(re,et?ye:ce,et);else if(re!=="dangerouslySetInnerHTML"){if(yt)re=re.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(re!=="href"&&re!=="list"&&re!=="form"&&re!=="tabIndex"&&re!=="download"&&re in Oe)try{Oe[re]=be??"";break e}catch{}typeof be=="function"||(be!=null&&(be!==!1||re[0]==="a"&&re[1]==="r")?Oe.setAttribute(re,be):Oe.removeAttribute(re))}}function ce(Oe){this.l[Oe.type+!1](f.event?f.event(Oe):Oe)}function ye(Oe){this.l[Oe.type+!0](f.event?f.event(Oe):Oe)}function _e(Oe,re,be,qe,yt,et,Dt,zt,Zt){var Gt,ze,Yt,xe,Ht,yr,B,pr,kr,$r,Zr,sr=re.type;if(re.constructor!==void 0)return null;be.__h!=null&&(Zt=be.__h,zt=re.__e=be.__e,re.__h=null,et=[zt]),(Gt=f.__b)&&Gt(re);try{e:if(typeof sr=="function"){if(pr=re.props,kr=(Gt=sr.contextType)&&qe[Gt.__c],$r=Gt?kr?kr.props.value:Gt.__:qe,be.__c?B=(ze=re.__c=be.__c).__=ze.__E:("prototype"in sr&&sr.prototype.render?re.__c=ze=new sr(pr,$r):(re.__c=ze=new se(pr,$r),ze.constructor=sr,ze.render=mt),kr&&kr.sub(ze),ze.props=pr,ze.state||(ze.state={}),ze.context=$r,ze.__n=qe,Yt=ze.__d=!0,ze.__h=[]),ze.__s==null&&(ze.__s=ze.state),sr.getDerivedStateFromProps!=null&&(ze.__s==ze.state&&(ze.__s=j({},ze.__s)),j(ze.__s,sr.getDerivedStateFromProps(pr,ze.__s))),xe=ze.props,Ht=ze.state,Yt)sr.getDerivedStateFromProps==null&&ze.componentWillMount!=null&&ze.componentWillMount(),ze.componentDidMount!=null&&ze.__h.push(ze.componentDidMount);else{if(sr.getDerivedStateFromProps==null&&pr!==xe&&ze.componentWillReceiveProps!=null&&ze.componentWillReceiveProps(pr,$r),!ze.__e&&ze.shouldComponentUpdate!=null&&ze.shouldComponentUpdate(pr,ze.__s,$r)===!1||re.__v===be.__v){ze.props=pr,ze.state=ze.__s,re.__v!==be.__v&&(ze.__d=!1),ze.__v=re,re.__e=be.__e,re.__k=be.__k,re.__k.forEach(function(sn){sn&&(sn.__=re)}),ze.__h.length&&Dt.push(ze);break e}ze.componentWillUpdate!=null&&ze.componentWillUpdate(pr,ze.__s,$r),ze.componentDidUpdate!=null&&ze.__h.push(function(){ze.componentDidUpdate(xe,Ht,yr)})}ze.context=$r,ze.props=pr,ze.state=ze.__s,(Gt=f.__r)&&Gt(re),ze.__d=!1,ze.__v=re,ze.__P=Oe,Gt=ze.render(ze.props,ze.state,ze.context),ze.state=ze.__s,ze.getChildContext!=null&&(qe=j(j({},qe),ze.getChildContext())),Yt||ze.getSnapshotBeforeUpdate==null||(yr=ze.getSnapshotBeforeUpdate(xe,Ht)),Zr=Gt!=null&&Gt.type===fe&&Gt.key==null?Gt.props.children:Gt,Y(Oe,Array.isArray(Zr)?Zr:[Zr],re,be,qe,yt,et,Dt,zt,Zt),ze.base=re.__e,re.__h=null,ze.__h.length&&Dt.push(ze),B&&(ze.__E=ze.__=null),ze.__e=!1}else et==null&&re.__v===be.__v?(re.__k=be.__k,re.__e=be.__e):re.__e=ge(be.__e,re,be,qe,yt,et,Dt,Zt);(Gt=f.diffed)&&Gt(re)}catch(sn){re.__v=null,(Zt||et!=null)&&(re.__e=zt,re.__h=!!Zt,et[et.indexOf(zt)]=null),f.__e(sn,re,be)}}function ie(Oe,re){f.__c&&f.__c(re,Oe),Oe.some(function(be){try{Oe=be.__h,be.__h=[],Oe.some(function(qe){qe.call(be)})}catch(qe){f.__e(qe,be.__v)}})}function ge(Oe,re,be,qe,yt,et,Dt,zt){var Zt,Gt,ze,Yt=be.props,xe=re.props,Ht=re.type,yr=0;if(Ht==="svg"&&(yt=!0),et!=null){for(;yr<et.length;yr++)if((Zt=et[yr])&&"setAttribute"in Zt==!!Ht&&(Ht?Zt.localName===Ht:Zt.nodeType===3)){Oe=Zt,et[yr]=null;break}}if(Oe==null){if(Ht===null)return document.createTextNode(xe);Oe=yt?document.createElementNS("http://www.w3.org/2000/svg",Ht):document.createElement(Ht,xe.is&&xe),et=null,zt=!1}if(Ht===null)Yt===xe||zt&&Oe.data===xe||(Oe.data=xe);else{if(et=et&&c.call(Oe.childNodes),Gt=(Yt=be.props||x).dangerouslySetInnerHTML,ze=xe.dangerouslySetInnerHTML,!zt){if(et!=null)for(Yt={},yr=0;yr<Oe.attributes.length;yr++)Yt[Oe.attributes[yr].name]=Oe.attributes[yr].value;(ze||Gt)&&(ze&&(Gt&&ze.__html==Gt.__html||ze.__html===Oe.innerHTML)||(Oe.innerHTML=ze&&ze.__html||""))}if(function(B,pr,kr,$r,Zr){var sr;for(sr in kr)sr==="children"||sr==="key"||sr in pr||ee(B,sr,null,kr[sr],$r);for(sr in pr)Zr&&typeof pr[sr]!="function"||sr==="children"||sr==="key"||sr==="value"||sr==="checked"||kr[sr]===pr[sr]||ee(B,sr,pr[sr],kr[sr],$r)}(Oe,xe,Yt,yt,zt),ze)re.__k=[];else if(yr=re.props.children,Y(Oe,Array.isArray(yr)?yr:[yr],re,be,qe,yt&&Ht!=="foreignObject",et,Dt,et?et[0]:be.__k&&oe(be,0),zt),et!=null)for(yr=et.length;yr--;)et[yr]!=null&&R(et[yr]);zt||("value"in xe&&(yr=xe.value)!==void 0&&(yr!==Yt.value||yr!==Oe.value||Ht==="progress"&&!yr)&&ee(Oe,"value",yr,Yt.value,!1),"checked"in xe&&(yr=xe.checked)!==void 0&&yr!==Oe.checked&&ee(Oe,"checked",yr,Yt.checked,!1))}return Oe}function Be(Oe,re,be){try{typeof Oe=="function"?Oe(re):Oe.current=re}catch(qe){f.__e(qe,be)}}function Qe(Oe,re,be){var qe,yt;if(f.unmount&&f.unmount(Oe),(qe=Oe.ref)&&(qe.current&&qe.current!==Oe.__e||Be(qe,null,re)),(qe=Oe.__c)!=null){if(qe.componentWillUnmount)try{qe.componentWillUnmount()}catch(et){f.__e(et,re)}qe.base=qe.__P=null}if(qe=Oe.__k)for(yt=0;yt<qe.length;yt++)qe[yt]&&Qe(qe[yt],re,typeof Oe.type!="function");be||Oe.__e==null||R(Oe.__e),Oe.__e=Oe.__d=void 0}function mt(Oe,re,be){return this.constructor(Oe,be)}function Bt(Oe,re,be){var qe,yt,et;f.__&&f.__(Oe,re),yt=(qe=typeof be=="function")?null:be&&be.__k||re.__k,et=[],_e(re,Oe=(!qe&&be||re).__k=D(fe,null,[Oe]),yt||x,x,re.ownerSVGElement!==void 0,!qe&&be?[be]:yt?null:re.firstChild?c.call(re.childNodes):null,et,!qe&&be?be:yt?yt.__e:re.firstChild,qe),ie(et,Oe)}function bt(Oe,re){Bt(Oe,re,bt)}function xt(Oe,re,be){var qe,yt,et,Dt=j({},Oe.props);for(et in re)et=="key"?qe=re[et]:et=="ref"?yt=re[et]:Dt[et]=re[et];return arguments.length>2&&(Dt.children=arguments.length>3?c.call(arguments,2):be),z(Oe.type,Dt,qe||Oe.key,yt||Oe.ref,null)}function tr(Oe,re){var be={__c:re="__cC"+O++,__:Oe,Consumer:function(qe,yt){return qe.children(yt)},Provider:function(qe){var yt,et;return this.getChildContext||(yt=[],(et={})[re]=this,this.getChildContext=function(){return et},this.shouldComponentUpdate=function(Dt){this.props.value!==Dt.value&&yt.some(K)},this.sub=function(Dt){yt.push(Dt);var zt=Dt.componentWillUnmount;Dt.componentWillUnmount=function(){yt.splice(yt.indexOf(Dt),1),zt&&zt.call(Dt)}}),qe.children}};return be.Provider.__=be.Consumer.contextType=be}c=S.slice,f={__e:function(Oe,re){for(var be,qe,yt;re=re.__;)if((be=re.__c)&&!be.__)try{if((qe=be.constructor)&&qe.getDerivedStateFromError!=null&&(be.setState(qe.getDerivedStateFromError(Oe)),yt=be.__d),be.componentDidCatch!=null&&(be.componentDidCatch(Oe),yt=be.__d),yt)return be.__E=be}catch(et){Oe=et}throw Oe}},h=0,se.prototype.setState=function(Oe,re){var be;be=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=j({},this.state),typeof Oe=="function"&&(Oe=Oe(j({},be),this.props)),Oe&&j(be,Oe),Oe!=null&&this.__v&&(re&&this.__h.push(re),K(this))},se.prototype.forceUpdate=function(Oe){this.__v&&(this.__e=!0,Oe&&this.__h.push(Oe),K(this))},se.prototype.render=fe,v=[],b=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U.__r=0,O=0},function(o,s,n){(function(c,f){n.d(s,"a",function(){return K}),n.d(s,"b",function(){return xu}),n.d(s,"c",function(){return ko}),n.d(s,"d",function(){return dr}),n.d(s,"e",function(){return Ot}),n.d(s,"f",function(){return Nt}),n.d(s,"g",function(){return or}),n.d(s,"h",function(){return io}),n.d(s,"i",function(){return Zr}),n.d(s,"j",function(){return Xt}),n.d(s,"k",function(){return Ho}),n.d(s,"l",function(){return gu}),n.d(s,"m",function(){return B}),n.d(s,"n",function(){return Oi}),n.d(s,"o",function(){return W}),n.d(s,"p",function(){return Ts}),n.d(s,"q",function(){return po}),n.d(s,"r",function(){return Ta}),n.d(s,"s",function(){return oo}),n.d(s,"t",function(){return Yi}),n.d(s,"u",function(){return Sa}),n.d(s,"v",function(){return Jc}),n.d(s,"w",function(){return Ss}),n.d(s,"x",function(){return An}),n.d(s,"y",function(){return Ao}),n.d(s,"z",function(){return _n}),n.d(s,"A",function(){return Nn}),n.d(s,"B",function(){return ho}),n.d(s,"C",function(){return Gt}),n.d(s,"D",function(){return Ou}),n.d(s,"E",function(){return Ei}),n.d(s,"F",function(){return _i}),n.d(s,"G",function(){return qc}),n.d(s,"H",function(){return bs}),n.d(s,"I",function(){return el}),n.d(s,"J",function(){return vo}),n.d(s,"K",function(){return Ne}),n.d(s,"L",function(){return Gn}),n.d(s,"M",function(){return As});var h=[];Object.freeze(h);var v={};function b(){return++qt.mobxGuid}function g(_){throw O(!1,_),"X"}function O(_,E){if(!_)throw new Error("[mobx] "+(E||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(v);function x(_){var E=!1;return function(){if(!E)return E=!0,_.apply(this,arguments)}}var S=function(){};function N(_){return _!==null&&typeof _=="object"}function j(_){if(_===null||typeof _!="object")return!1;var E=Object.getPrototypeOf(_);return E===Object.prototype||E===null}function R(_,E,P){Object.defineProperty(_,E,{enumerable:!1,writable:!0,configurable:!0,value:P})}function D(_,E){var P="isMobX"+_;return E.prototype[P]=!0,function(I){return N(I)&&I[P]===!0}}function z(_){return _ instanceof Map}function Z(_){return _ instanceof Set}function fe(_){var E=new Set;for(var P in _)E.add(P);return Object.getOwnPropertySymbols(_).forEach(function(I){Object.getOwnPropertyDescriptor(_,I).enumerable&&E.add(I)}),Array.from(E)}function se(_){return _&&_.toString?_.toString():new String(_).toString()}function oe(_){return _===null?null:typeof _=="object"?""+_:_}var pe=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:Object.getOwnPropertyNames,K=Symbol("mobx administration"),U=function(){function _(E){E===void 0&&(E="Atom@"+b()),this.name=E,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Yt.NOT_TRACKING}return _.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},_.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},_.prototype.reportObserved=function(){return gs(this)},_.prototype.reportChanged=function(){lo(),function(E){E.lowestObserverState!==Yt.STALE&&(E.lowestObserverState=Yt.STALE,E.observers.forEach(function(P){P.dependenciesState===Yt.UP_TO_DATE&&(P.isTracing!==xe.NONE&&zo(P,E),P.onBecomeStale()),P.dependenciesState=Yt.STALE}))}(this),fo()},_.prototype.toString=function(){return this.name},_}(),Y=D("Atom",U);function W(_,E,P){E===void 0&&(E=S),P===void 0&&(P=S);var I,q=new U(_);return E!==S&&Os("onBecomeObserved",q,E,I),P!==S&&Ei(q,P),q}var L={identity:function(_,E){return _===E},structural:function(_,E){return Tu(_,E)},default:function(_,E){return Object.is(_,E)},shallow:function(_,E){return Tu(_,E,1)}},he=function(_,E){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,I){P.__proto__=I}||function(P,I){for(var q in I)I.hasOwnProperty(q)&&(P[q]=I[q])},he(_,E)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Ce=function(){return Ce=Object.assign||function(_){for(var E,P=1,I=arguments.length;P<I;P++)for(var q in E=arguments[P])Object.prototype.hasOwnProperty.call(E,q)&&(_[q]=E[q]);return _},Ce.apply(this,arguments)};function ee(_){var E=typeof Symbol=="function"&&_[Symbol.iterator],P=0;return E?E.call(_):{next:function(){return _&&P>=_.length&&(_=void 0),{value:_&&_[P++],done:!_}}}}function ce(_,E){var P=typeof Symbol=="function"&&_[Symbol.iterator];if(!P)return _;var I,q,Ae=P.call(_),Xe=[];try{for(;(E===void 0||E-- >0)&&!(I=Ae.next()).done;)Xe.push(I.value)}catch(gt){q={error:gt}}finally{try{I&&!I.done&&(P=Ae.return)&&P.call(Ae)}finally{if(q)throw q.error}}return Xe}function ye(){for(var _=[],E=0;E<arguments.length;E++)_=_.concat(ce(arguments[E]));return _}var _e=Symbol("mobx did run lazy initializers"),ie=Symbol("mobx pending decorators"),ge={},Be={};function Qe(_,E){var P=E?ge:Be;return P[_]||(P[_]={configurable:!0,enumerable:E,get:function(){return mt(this),this[_]},set:function(I){mt(this),this[_]=I}})}function mt(_){var E,P;if(_[_e]!==!0){var I=_[ie];if(I){R(_,_e,!0);var q=ye(Object.getOwnPropertySymbols(I),Object.keys(I));try{for(var Ae=ee(q),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var gt=I[Xe.value];gt.propertyCreator(_,gt.prop,gt.descriptor,gt.decoratorTarget,gt.decoratorArguments)}}catch(Vt){E={error:Vt}}finally{try{Xe&&!Xe.done&&(P=Ae.return)&&P.call(Ae)}finally{if(E)throw E.error}}}}}function Bt(_,E){return function(){var P,I=function(q,Ae,Xe,gt){if(gt===!0)return E(q,Ae,Xe,q,P),null;if(!Object.prototype.hasOwnProperty.call(q,ie)){var Vt=q[ie];R(q,ie,Ce({},Vt))}return q[ie][Ae]={prop:Ae,propertyCreator:E,descriptor:Xe,decoratorTarget:q,decoratorArguments:P},Qe(Ae,_)};return bt(arguments)?(P=h,I.apply(null,arguments)):(P=Array.prototype.slice.call(arguments),I)}}function bt(_){return(_.length===2||_.length===3)&&(typeof _[1]=="string"||typeof _[1]=="symbol")||_.length===4&&_[3]===!0}function xt(_,E,P){return An(_)?_:Array.isArray(_)?Gt.array(_,{name:P}):j(_)?Gt.object(_,void 0,{name:P}):z(_)?Gt.map(_,{name:P}):Z(_)?Gt.set(_,{name:P}):_}function tr(_){return _}function Oe(_){O(_);var E=Bt(!0,function(I,q,Ae,Xe,gt){var Vt=Ae?Ae.initializer?Ae.initializer.call(I):Ae.value:void 0;Zi(I).addObservableProp(q,Vt,_)}),P=(c!==void 0&&c.env,E);return P.enhancer=_,P}var re={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function be(_){return _==null?re:typeof _=="string"?{name:_,deep:!0,proxy:!0}:_}Object.freeze(re);var qe=Oe(xt),yt=Oe(function(_,E,P){return _==null||Nn(_)||Ao(_)||_n(_)||Pn(_)?_:Array.isArray(_)?Gt.array(_,{name:P,deep:!1}):j(_)?Gt.object(_,void 0,{name:P,deep:!1}):z(_)?Gt.map(_,{name:P,deep:!1}):Z(_)?Gt.set(_,{name:P,deep:!1}):g(!1)}),et=Oe(tr),Dt=Oe(function(_,E,P){return Tu(_,E)?E:_});function zt(_){return _.defaultDecorator?_.defaultDecorator.enhancer:_.deep===!1?tr:xt}var Zt={box:function(_,E){arguments.length>2&&ze("box");var P=be(E);return new Cr(_,zt(P),P.name,!0,P.equals)},array:function(_,E){arguments.length>2&&ze("array");var P=be(E);return Ki(_,zt(P),P.name)},map:function(_,E){arguments.length>2&&ze("map");var P=be(E);return new xu(_,zt(P),P.name)},set:function(_,E){arguments.length>2&&ze("set");var P=be(E);return new Na(_,zt(P),P.name)},object:function(_,E,P){typeof arguments[1]=="string"&&ze("object");var I=be(P);if(I.proxy===!1)return po({},_,E,I);var q=mu(I),Ae=po({},void 0,void 0,I),Xe=rl(Ae);return ws(Xe,_,E,q),Xe},ref:et,shallow:yt,deep:qe,struct:Dt},Gt=function(_,E,P){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return qe.apply(null,arguments);if(An(_))return _;var I=j(_)?Gt.object(_,E,P):Array.isArray(_)?Gt.array(_,E):z(_)?Gt.map(_,E):Z(_)?Gt.set(_,E):_;if(I!==_)return I;g(!1)};function ze(_){g("Expected one or two arguments to observable."+_+". Did you accidentally try to use observable."+_+" as decorator?")}Object.keys(Zt).forEach(function(_){return Gt[_]=Zt[_]});var Yt,xe,Ht=Bt(!1,function(_,E,P,I,q){var Ae=P.get,Xe=P.set,gt=q[0]||{};Zi(_).addComputedProp(_,E,Ce({get:Ae,set:Xe,context:_},gt))}),yr=Ht({equals:L.structural}),B=function(_,E,P){if(typeof E=="string"||_!==null&&typeof _=="object"&&arguments.length===1)return Ht.apply(null,arguments);var I=typeof E=="object"?E:{};return I.get=_,I.set=typeof E=="function"?E:I.set,I.name=I.name||_.name||"",new Go(I)};B.struct=yr,function(_){_[_.NOT_TRACKING=-1]="NOT_TRACKING",_[_.UP_TO_DATE=0]="UP_TO_DATE",_[_.POSSIBLY_STALE=1]="POSSIBLY_STALE",_[_.STALE=2]="STALE"}(Yt||(Yt={})),function(_){_[_.NONE=0]="NONE",_[_.LOG=1]="LOG",_[_.BREAK=2]="BREAK"}(xe||(xe={}));var pr=function(_){this.cause=_};function kr(_){return _ instanceof pr}function $r(_){switch(_.dependenciesState){case Yt.UP_TO_DATE:return!1;case Yt.NOT_TRACKING:case Yt.STALE:return!0;case Yt.POSSIBLY_STALE:for(var E=Nt(!0),P=de(),I=_.observing,q=I.length,Ae=0;Ae<q;Ae++){var Xe=I[Ae];if(Uo(Xe)){if(qt.disableErrorBoundaries)Xe.get();else try{Xe.get()}catch{return Fe(P),Ot(E),!0}if(_.dependenciesState===Yt.STALE)return Fe(P),Ot(E),!0}}return Kt(_),Fe(P),Ot(E),!1}}function Zr(){return qt.trackingDerivation!==null}function sr(_){var E=_.observers.size>0;qt.computationDepth>0&&E&&g(!1),qt.allowStateChanges||!E&&qt.enforceActions!=="strict"||g(!1)}function sn(_,E,P){var I=Nt(!0);Kt(_),_.newObserving=new Array(_.observing.length+100),_.unboundDepsCount=0,_.runId=++qt.runId;var q,Ae=qt.trackingDerivation;if(qt.trackingDerivation=_,qt.disableErrorBoundaries===!0)q=E.call(P);else try{q=E.call(P)}catch(Xe){q=new pr(Xe)}return qt.trackingDerivation=Ae,function(Xe){for(var gt=Xe.observing,Vt=Xe.observing=Xe.newObserving,Ar=Yt.UP_TO_DATE,cr=0,Gr=Xe.unboundDepsCount,Or=0;Or<Gr;Or++)(Ur=Vt[Or]).diffValue===0&&(Ur.diffValue=1,cr!==Or&&(Vt[cr]=Ur),cr++),Ur.dependenciesState>Ar&&(Ar=Ur.dependenciesState);for(Vt.length=cr,Xe.newObserving=null,Gr=gt.length;Gr--;)(Ur=gt[Gr]).diffValue===0&&tn(Ur,Xe),Ur.diffValue=0;for(;cr--;){var Ur;(Ur=Vt[cr]).diffValue===1&&(Ur.diffValue=0,vs(Ur,Xe))}Ar!==Yt.UP_TO_DATE&&(Xe.dependenciesState=Ar,Xe.onBecomeStale())}(_),Ot(I),q}function Q(_){var E=_.observing;_.observing=[];for(var P=E.length;P--;)tn(E[P],_);_.dependenciesState=Yt.NOT_TRACKING}function Ne(_){var E=de();try{return _()}finally{Fe(E)}}function de(){var _=qt.trackingDerivation;return qt.trackingDerivation=null,_}function Fe(_){qt.trackingDerivation=_}function Nt(_){var E=qt.allowStateReads;return qt.allowStateReads=_,E}function Ot(_){qt.allowStateReads=_}function Kt(_){if(_.dependenciesState!==Yt.UP_TO_DATE){_.dependenciesState=Yt.UP_TO_DATE;for(var E=_.observing,P=E.length;P--;)E[P].lowestObserverState=Yt.UP_TO_DATE}}var Tr=0,On=1,In=Object.getOwnPropertyDescriptor(function(){},"name");In&&In.configurable;function dn(_,E,P){var I=function(){return bn(_,E,P||this,arguments)};return I.isMobxAction=!0,I}function bn(_,E,P,I){var q=Xt();try{return E.apply(P,I)}catch(Ae){throw q.error=Ae,Ae}finally{or(q)}}function Xt(_,E,P){var I=0,q=de();lo();var Ae={prevDerivation:q,prevAllowStateChanges:gr(!0),prevAllowStateReads:Nt(!0),notifySpy:!1,startTime:I,actionId:On++,parentActionId:Tr};return Tr=Ae.actionId,Ae}function or(_){Tr!==_.actionId&&g("invalid action stack. did you forget to finish an action?"),Tr=_.parentActionId,_.error!==void 0&&(qt.suppressReactionErrors=!0),Xr(_.prevAllowStateChanges),Ot(_.prevAllowStateReads),fo(),Fe(_.prevDerivation),_.notifySpy,qt.suppressReactionErrors=!1}function dr(_,E){var P,I=gr(_);try{P=E()}finally{Xr(I)}return P}function gr(_){var E=qt.allowStateChanges;return qt.allowStateChanges=_,E}function Xr(_){qt.allowStateChanges=_}var Cr=function(_){function E(P,I,q,Ae,Xe){q===void 0&&(q="ObservableValue@"+b()),Xe===void 0&&(Xe=L.default);var gt=_.call(this,q)||this;return gt.enhancer=I,gt.name=q,gt.equals=Xe,gt.hasUnreportedChange=!1,gt.value=I(P,void 0,q),gt}return function(P,I){function q(){this.constructor=P}he(P,I),P.prototype=I===null?Object.create(I):(q.prototype=I.prototype,new q)}(E,_),E.prototype.dehanceValue=function(P){return this.dehancer!==void 0?this.dehancer(P):P},E.prototype.set=function(P){this.value,(P=this.prepareNewValue(P))!==qt.UNCHANGED&&this.setNewValue(P)},E.prototype.prepareNewValue=function(P){if(sr(this),$n(this)){var I=Rr(this,{object:this,type:"update",newValue:P});if(!I)return qt.UNCHANGED;P=I.newValue}return P=this.enhancer(P,this.value,this.name),this.equals(this.value,P)?qt.UNCHANGED:P},E.prototype.setNewValue=function(P){var I=this.value;this.value=P,this.reportChanged(),no(this)&&Ln(this,{type:"update",object:this,newValue:P,oldValue:I})},E.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},E.prototype.intercept=function(P){return To(this,P)},E.prototype.observe=function(P,I){return I&&P({object:this,type:"update",newValue:this.value,oldValue:void 0}),Vo(this,P)},E.prototype.toJSON=function(){return this.get()},E.prototype.toString=function(){return this.name+"["+this.value+"]"},E.prototype.valueOf=function(){return oe(this.get())},E.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},E}(U),ai=D("ObservableValue",Cr),Go=function(){function _(E){this.dependenciesState=Yt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Yt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+b(),this.value=new pr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=xe.NONE,O(E.get,"missing option for computed: get"),this.derivation=E.get,this.name=E.name||"ComputedValue@"+b(),E.set&&(this.setter=dn(this.name+"-setter",E.set)),this.equals=E.equals||(E.compareStructural||E.struct?L.structural:L.default),this.scope=E.context,this.requiresReaction=!!E.requiresReaction,this.keepAlive=!!E.keepAlive}return _.prototype.onBecomeStale=function(){(function(E){E.lowestObserverState===Yt.UP_TO_DATE&&(E.lowestObserverState=Yt.POSSIBLY_STALE,E.observers.forEach(function(P){P.dependenciesState===Yt.UP_TO_DATE&&(P.dependenciesState=Yt.POSSIBLY_STALE,P.isTracing!==xe.NONE&&zo(P,E),P.onBecomeStale())}))})(this)},_.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},_.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},_.prototype.get=function(){this.isComputing&&g("Cycle detected in computation "+this.name+": "+this.derivation),qt.inBatch!==0||this.observers.size!==0||this.keepAlive?(gs(this),$r(this)&&this.trackAndCompute()&&function(P){P.lowestObserverState!==Yt.STALE&&(P.lowestObserverState=Yt.STALE,P.observers.forEach(function(I){I.dependenciesState===Yt.POSSIBLY_STALE?I.dependenciesState=Yt.STALE:I.dependenciesState===Yt.UP_TO_DATE&&(P.lowestObserverState=Yt.UP_TO_DATE)}))}(this)):$r(this)&&(this.warnAboutUntrackedRead(),lo(),this.value=this.computeValue(!1),fo());var E=this.value;if(kr(E))throw E.cause;return E},_.prototype.peek=function(){var E=this.computeValue(!1);if(kr(E))throw E.cause;return E},_.prototype.set=function(E){if(this.setter){O(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,E)}finally{this.isRunningSetter=!1}}else O(!1,!1)},_.prototype.trackAndCompute=function(){var E=this.value,P=this.dependenciesState===Yt.NOT_TRACKING,I=this.computeValue(!0),q=P||kr(E)||kr(I)||!this.equals(E,I);return q&&(this.value=I),q},_.prototype.computeValue=function(E){var P;if(this.isComputing=!0,qt.computationDepth++,E)P=sn(this,this.derivation,this.scope);else if(qt.disableErrorBoundaries===!0)P=this.derivation.call(this.scope);else try{P=this.derivation.call(this.scope)}catch(I){P=new pr(I)}return qt.computationDepth--,this.isComputing=!1,P},_.prototype.suspend=function(){this.keepAlive||(Q(this),this.value=void 0)},_.prototype.observe=function(E,P){var I=this,q=!0,Ae=void 0;return gu(function(){var Xe=I.get();if(!q||P){var gt=de();E({type:"update",object:I,newValue:Xe,oldValue:Ae}),Fe(gt)}q=!1,Ae=Xe})},_.prototype.warnAboutUntrackedRead=function(){},_.prototype.toJSON=function(){return this.get()},_.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},_.prototype.valueOf=function(){return oe(this.get())},_.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},_}(),Uo=D("ComputedValue",Go),Wi=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Wc={};function hu(){return typeof window<"u"?window:f!==void 0?f:typeof self<"u"?self:Wc}var xo=!0,hs=!1,qt=function(){var _=hu();return _.__mobxInstanceCount>0&&!_.__mobxGlobals&&(xo=!1),_.__mobxGlobals&&_.__mobxGlobals.version!==new Wi().version&&(xo=!1),xo?_.__mobxGlobals?(_.__mobxInstanceCount+=1,_.__mobxGlobals.UNCHANGED||(_.__mobxGlobals.UNCHANGED={}),_.__mobxGlobals):(_.__mobxInstanceCount=1,_.__mobxGlobals=new Wi):(setTimeout(function(){hs||g("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Wi)}();function vs(_,E){_.observers.add(E),_.lowestObserverState>E.dependenciesState&&(_.lowestObserverState=E.dependenciesState)}function tn(_,E){_.observers.delete(E),_.observers.size===0&&ys(_)}function ys(_){_.isPendingUnobservation===!1&&(_.isPendingUnobservation=!0,qt.pendingUnobservations.push(_))}function lo(){qt.inBatch++}function fo(){if(--qt.inBatch==0){ms();for(var _=qt.pendingUnobservations,E=0;E<_.length;E++){var P=_[E];P.isPendingUnobservation=!1,P.observers.size===0&&(P.isBeingObserved&&(P.isBeingObserved=!1,P.onBecomeUnobserved()),P instanceof Go&&P.suspend())}qt.pendingUnobservations=[]}}function gs(_){var E=qt.trackingDerivation;return E!==null?(E.runId!==_.lastAccessedBy&&(_.lastAccessedBy=E.runId,E.newObserving[E.unboundDepsCount++]=_,_.isBeingObserved||(_.isBeingObserved=!0,_.onBecomeObserved())),!0):(_.observers.size===0&&qt.inBatch>0&&ys(_),!1)}function zo(_,E){if(_.isTracing===xe.BREAK){var P=[];bi(Yi(_),P,1),new Function(`debugger;
/*
Tracing '`+_.name+`'

You are entering this break point because derivation '`+_.name+"' is being traced and '"+E.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(_ instanceof Go?_.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+P.join(`
`)+`
*/
    `)()}}function bi(_,E,P){E.length>=1e3?E.push("(and many more)"):(E.push(""+new Array(P).join("	")+_.name),_.dependencies&&_.dependencies.forEach(function(I){return bi(I,E,P+1)}))}var ko=function(){function _(E,P,I,q){E===void 0&&(E="Reaction@"+b()),q===void 0&&(q=!1),this.name=E,this.onInvalidate=P,this.errorHandler=I,this.requiresObservable=q,this.observing=[],this.newObserving=[],this.dependenciesState=Yt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+b(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=xe.NONE}return _.prototype.onBecomeStale=function(){this.schedule()},_.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,qt.pendingReactions.push(this),ms())},_.prototype.isScheduled=function(){return this._isScheduled},_.prototype.runReaction=function(){if(!this.isDisposed){if(lo(),this._isScheduled=!1,$r(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(E){this.reportExceptionInDerivation(E)}}fo()}},_.prototype.track=function(E){if(!this.isDisposed){lo(),this._isRunning=!0;var P=sn(this,E,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Q(this),kr(P)&&this.reportExceptionInDerivation(P.cause),fo()}},_.prototype.reportExceptionInDerivation=function(E){var P=this;if(this.errorHandler)this.errorHandler(E,this);else{if(qt.disableErrorBoundaries)throw E;qt.suppressReactionErrors,qt.globalReactionErrorHandlers.forEach(function(I){return I(E,P)})}},_.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(lo(),Q(this),fo()))},_.prototype.getDisposer=function(){var E=this.dispose.bind(this);return E[K]=this,E},_.prototype.toString=function(){return"Reaction["+this.name+"]"},_.prototype.trace=function(E){E===void 0&&(E=!1),function(){for(var P=[],I=0;I<arguments.length;I++)P[I]=arguments[I];var q=!1;typeof P[P.length-1]=="boolean"&&(q=P.pop());var Ae=So(P);if(!Ae)return g(!1);Ae.isTracing,xe.NONE,Ae.isTracing=q?xe.BREAK:xe.LOG}(this,E)},_}(),vu=function(_){return _()};function ms(){qt.inBatch>0||qt.isRunningReactions||vu(Yc)}function Yc(){qt.isRunningReactions=!0;for(var _=qt.pendingReactions,E=0;_.length>0;){++E==100&&_.splice(0);for(var P=_.splice(0),I=0,q=P.length;I<q;I++)P[I].runReaction()}qt.isRunningReactions=!1}var xa=D("Reaction",ko);function $c(_){var E=vu;vu=function(P){return _(function(){return E(P)})}}function bs(_){return function(){}}function Kc(){g(!1)}function ui(_){return function(E,P,I){if(I){if(I.value)return{value:dn(_,I.value),enumerable:!1,configurable:!0,writable:!0};var q=I.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return dn(_,q.call(this))}}}return _s(_).apply(this,arguments)}}function _s(_){return function(E,P,I){Object.defineProperty(E,P,{configurable:!0,enumerable:!1,get:function(){},set:function(q){R(this,P,Ho(_,q))}})}}var Ho=function(_,E,P,I){return arguments.length===1&&typeof _=="function"?dn(_.name||"<unnamed action>",_):arguments.length===2&&typeof E=="function"?dn(_,E):arguments.length===1&&typeof _=="string"?ui(_):I!==!0?ui(E).apply(null,arguments):void R(_,E,dn(_.name||E,P.value,this))};function qc(_,E){return bn(typeof _=="string"?_:_.name||"<unnamed action>",typeof _=="function"?_:E,this,void 0)}function Sa(_){return typeof _=="function"&&_.isMobxAction===!0}function yu(_,E,P){R(_,E,dn(E,P.bind(_)))}function gu(_,E){E===void 0&&(E=v);var P,I=E&&E.name||_.name||"Autorun@"+b();if(!E.scheduler&&!E.delay)P=new ko(I,function(){this.track(Xe)},E.onError,E.requiresObservable);else{var q=Es(E),Ae=!1;P=new ko(I,function(){Ae||(Ae=!0,q(function(){Ae=!1,P.isDisposed||P.track(Xe)}))},E.onError,E.requiresObservable)}function Xe(){_(P)}return P.schedule(),P.getDisposer()}Ho.bound=function(_,E,P,I){return I===!0?(yu(_,E,P.value),null):P?{configurable:!0,enumerable:!1,get:function(){return yu(this,E,P.value||P.initializer.call(this)),this[E]},set:Kc}:{enumerable:!1,configurable:!0,set:function(q){yu(this,E,q)},get:function(){}}};var Zc=function(_){return _()};function Es(_){return _.scheduler?_.scheduler:_.delay?function(E){return setTimeout(E,_.delay)}:Zc}function _i(_,E,P){P===void 0&&(P=v);var I,q,Ae,Xe=P.name||"Reaction@"+b(),gt=Ho(Xe,P.onError?(I=P.onError,q=E,function(){try{return q.apply(this,arguments)}catch(rn){I.call(this,rn)}}):E),Vt=!P.scheduler&&!P.delay,Ar=Es(P),cr=!0,Gr=!1,Or=P.compareStructural?L.structural:P.equals||L.default,Ur=new ko(Xe,function(){cr||Vt?ao():Gr||(Gr=!0,Ar(ao))},P.onError,P.requiresObservable);function ao(){if(Gr=!1,!Ur.isDisposed){var rn=!1;Ur.track(function(){var qn=_(Ur);rn=cr||!Or(Ae,qn),Ae=qn}),cr&&P.fireImmediately&&gt(Ae,Ur),cr||rn!==!0||gt(Ae,Ur),cr&&(cr=!1)}}return Ur.schedule(),Ur.getDisposer()}function Ei(_,E,P){return Os("onBecomeUnobserved",_,E,P)}function Os(_,E,P,I){var q=typeof I=="function"?oo(E,P):oo(E),Ae=typeof I=="function"?I:P,Xe=_+"Listeners";return q[Xe]?q[Xe].add(Ae):q[Xe]=new Set([Ae]),typeof q[_]!="function"?g(!1):function(){var gt=q[Xe];gt&&(gt.delete(Ae),gt.size===0&&delete q[Xe])}}function Oi(_){var E=_.enforceActions,P=_.computedRequiresReaction,I=_.computedConfigurable,q=_.disableErrorBoundaries,Ae=_.reactionScheduler,Xe=_.reactionRequiresObservable,gt=_.observableRequiresReaction;if(_.isolateGlobalState===!0&&((qt.pendingReactions.length||qt.inBatch||qt.isRunningReactions)&&g("isolateGlobalState should be called before MobX is running any reactions"),hs=!0,xo&&(--hu().__mobxInstanceCount==0&&(hu().__mobxGlobals=void 0),qt=new Wi)),E!==void 0){var Vt=void 0;switch(E){case!0:case"observed":Vt=!0;break;case!1:case"never":Vt=!1;break;case"strict":case"always":Vt="strict";break;default:g("Invalid value for 'enforceActions': '"+E+"', expected 'never', 'always' or 'observed'")}qt.enforceActions=Vt,qt.allowStateChanges=Vt!==!0&&Vt!=="strict"}P!==void 0&&(qt.computedRequiresReaction=!!P),Xe!==void 0&&(qt.reactionRequiresObservable=!!Xe),gt!==void 0&&(qt.observableRequiresReaction=!!gt,qt.allowStateReads=!qt.observableRequiresReaction),I!==void 0&&(qt.computedConfigurable=!!I),q!==void 0&&(qt.disableErrorBoundaries=!!q),Ae&&$c(Ae)}function po(_,E,P,I){var q=mu(I=be(I));return mt(_),Zi(_,I.name,q.enhancer),E&&ws(_,E,P,q),_}function mu(_){return _.defaultDecorator||(_.deep===!1?et:qe)}function ws(_,E,P,I){var q,Ae;lo();try{var Xe=pe(E);try{for(var gt=ee(Xe),Vt=gt.next();!Vt.done;Vt=gt.next()){var Ar=Vt.value,cr=Object.getOwnPropertyDescriptor(E,Ar),Gr=(P&&Ar in P?P[Ar]:cr.get?Ht:I)(_,Ar,cr,!0);Gr&&Object.defineProperty(_,Ar,Gr)}}catch(Or){q={error:Or}}finally{try{Vt&&!Vt.done&&(Ae=gt.return)&&Ae.call(gt)}finally{if(q)throw q.error}}}finally{fo()}}function Yi(_,E){return wi(oo(_,E))}function wi(_){var E,P,I={name:_.name};return _.observing&&_.observing.length>0&&(I.dependencies=(E=_.observing,P=[],E.forEach(function(q){P.indexOf(q)===-1&&P.push(q)}),P).map(wi)),I}var bu=0;function _u(){this.message="FLOW_CANCELLED"}function Ta(_){arguments.length!==1&&g("Flow expects 1 argument and cannot be used as decorator");var E=_.name||"<unnamed flow>";return function(){var P,I=this,q=arguments,Ae=++bu,Xe=Ho(E+" - runid: "+Ae+" - init",_).apply(I,q),gt=void 0,Vt=new Promise(function(Ar,cr){var Gr=0;function Or(rn){var qn;gt=void 0;try{qn=Ho(E+" - runid: "+Ae+" - yield "+Gr++,Xe.next).call(Xe,rn)}catch(Qi){return cr(Qi)}ao(qn)}function Ur(rn){var qn;gt=void 0;try{qn=Ho(E+" - runid: "+Ae+" - yield "+Gr++,Xe.throw).call(Xe,rn)}catch(Qi){return cr(Qi)}ao(qn)}function ao(rn){if(!rn||typeof rn.then!="function")return rn.done?Ar(rn.value):(gt=Promise.resolve(rn.value)).then(Or,Ur);rn.then(ao,cr)}P=cr,Or(void 0)});return Vt.cancel=Ho(E+" - runid: "+Ae+" - cancel",function(){try{gt&&$i(gt);var Ar=Xe.return(void 0),cr=Promise.resolve(Ar.value);cr.then(S,S),$i(cr),P(new _u)}catch(Gr){P(Gr)}}),Vt}}function $i(_){typeof _.cancel=="function"&&_.cancel()}function xs(_,E){if(_==null)return!1;if(E!==void 0){if(Nn(_)===!1||!_[K].values.has(E))return!1;var P=oo(_,E);return Uo(P)}return Uo(_)}function Jc(_){return arguments.length>1?g(!1):xs(_)}function Ss(_,E){return typeof E!="string"?g(!1):xs(_,E)}function Yn(_,E){return _!=null&&(E!==void 0?!!Nn(_)&&_[K].values.has(E):Nn(_)||!!_[K]||Y(_)||xa(_)||Uo(_))}function An(_){return arguments.length!==1&&g(!1),Yn(_)}function ho(_){return Nn(_)?_[K].getKeys():_n(_)||Pn(_)?Array.from(_.keys()):Ao(_)?_.map(function(E,P){return P}):g(!1)}function Gn(_){return Nn(_)?ho(_).map(function(E){return _[E]}):_n(_)?ho(_).map(function(E){return _.get(E)}):Pn(_)?Array.from(_.values()):Ao(_)?_.slice():g(!1)}function Ts(_){return Nn(_)?ho(_).map(function(E){return[E,_[E]]}):_n(_)?ho(_).map(function(E){return[E,_.get(E)]}):Pn(_)?Array.from(_.entries()):Ao(_)?_.map(function(E,P){return[P,E]}):g(!1)}function Eu(_,E,P){if(arguments.length!==2||Pn(_))if(Nn(_)){var I=_[K],q=I.values.get(E);q?I.write(E,P):I.addObservableProp(E,P,I.defaultEnhancer)}else if(_n(_))_.set(E,P);else if(Pn(_))_.add(E);else{if(!Ao(_))return g(!1);typeof E!="number"&&(E=parseInt(E,10)),O(E>=0,"Not a valid index: '"+E+"'"),lo(),E>=_.length&&(_.length=E+1),_[E]=P,fo()}else{lo();var Ae=E;try{for(var Xe in Ae)Eu(_,Xe,Ae[Xe])}finally{fo()}}}function Ou(_,E,P,I){return typeof P=="function"?function(q,Ae,Xe,gt){return io(q,Ae).observe(Xe,gt)}(_,E,P,I):function(q,Ae,Xe){return io(q).observe(Ae,Xe)}(_,E,P)}_u.prototype=Object.create(Error.prototype);var Qc={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function si(_,E,P,I){return I.detectCycles&&_.set(E,P),P}function ro(_,E,P){if(!E.recurseEverything&&!An(_)||typeof _!="object")return _;if(_===null)return null;if(_ instanceof Date)return _;if(ai(_))return ro(_.get(),E,P);if(An(_)&&ho(_),E.detectCycles===!0&&_!==null&&P.has(_))return P.get(_);if(Ao(_)||Array.isArray(_)){var I=si(P,_,[],E),q=_.map(function(Or){return ro(Or,E,P)});I.length=q.length;for(var Ae=0,Xe=q.length;Ae<Xe;Ae++)I[Ae]=q[Ae];return I}if(Pn(_)||Object.getPrototypeOf(_)===Set.prototype){if(E.exportMapsAsObjects===!1){var gt=si(P,_,new Set,E);return _.forEach(function(Or){gt.add(ro(Or,E,P))}),gt}var Vt=si(P,_,[],E);return _.forEach(function(Or){Vt.push(ro(Or,E,P))}),Vt}if(_n(_)||Object.getPrototypeOf(_)===Map.prototype){if(E.exportMapsAsObjects===!1){var Ar=si(P,_,new Map,E);return _.forEach(function(Or,Ur){Ar.set(Ur,ro(Or,E,P))}),Ar}var cr=si(P,_,{},E);return _.forEach(function(Or,Ur){cr[Ur]=ro(Or,E,P)}),cr}var Gr=si(P,_,{},E);return fe(_).forEach(function(Or){Gr[Or]=ro(_[Or],E,P)}),Gr}function el(_,E){var P;return typeof E=="boolean"&&(E={detectCycles:E}),E||(E=Qc),E.detectCycles=E.detectCycles===void 0?E.recurseEverything===!0:E.detectCycles===!0,E.detectCycles&&(P=new Map),ro(_,E,P)}function So(_){switch(_.length){case 0:return qt.trackingDerivation;case 1:return oo(_[0]);case 2:return oo(_[0],_[1])}}function vo(_,E){E===void 0&&(E=void 0),lo();try{return _.apply(E)}finally{fo()}}function As(_,E,P){return arguments.length===1||E&&typeof E=="object"?tl(_,E):Ps(_,E,P||{})}function Ps(_,E,P){var I;typeof P.timeout=="number"&&(I=setTimeout(function(){if(!Ae[K].isDisposed){Ae();var Xe=new Error("WHEN_TIMEOUT");if(!P.onError)throw Xe;P.onError(Xe)}},P.timeout)),P.name=P.name||"When@"+b();var q=dn(P.name+"-effect",E),Ae=gu(function(Xe){_()&&(Xe.dispose(),I&&clearTimeout(I),q())},P);return Ae}function tl(_,E){var P,I=new Promise(function(q,Ae){var Xe=Ps(_,q,Ce(Ce({},E),{onError:Ae}));P=function(){Xe(),Ae("WHEN_CANCELLED")}});return I.cancel=P,I}function Aa(_){return _[K]}function Xo(_){return typeof _=="string"||typeof _=="number"||typeof _=="symbol"}var yo={has:function(_,E){if(E===K||E==="constructor"||E===_e)return!0;var P=Aa(_);return Xo(E)?P.has(E):E in _},get:function(_,E){if(E===K||E==="constructor"||E===_e)return _[E];var P=Aa(_),I=P.values.get(E);if(I instanceof U){var q=I.get();return q===void 0&&P.has(E),q}return Xo(E)&&P.has(E),_[E]},set:function(_,E,P){return!!Xo(E)&&(Eu(_,E,P),!0)},deleteProperty:function(_,E){return!!Xo(E)&&(Aa(_).remove(E),!0)},ownKeys:function(_){return Aa(_).keysAtom.reportObserved(),Reflect.ownKeys(_)},preventExtensions:function(_){return g("Dynamic observable objects cannot be frozen"),!1}};function rl(_){var E=new Proxy(_,yo);return _[K].proxy=E,E}function $n(_){return _.interceptors!==void 0&&_.interceptors.length>0}function To(_,E){var P=_.interceptors||(_.interceptors=[]);return P.push(E),x(function(){var I=P.indexOf(E);I!==-1&&P.splice(I,1)})}function Rr(_,E){var P=de();try{for(var I=ye(_.interceptors||[]),q=0,Ae=I.length;q<Ae&&(O(!(E=I[q](E))||E.type,"Intercept handlers should return nothing or a change object"),E);q++);return E}finally{Fe(P)}}function no(_){return _.changeListeners!==void 0&&_.changeListeners.length>0}function Vo(_,E){var P=_.changeListeners||(_.changeListeners=[]);return P.push(E),x(function(){var I=P.indexOf(E);I!==-1&&P.splice(I,1)})}function Ln(_,E){var P=de(),I=_.changeListeners;if(I){for(var q=0,Ae=(I=I.slice()).length;q<Ae;q++)I[q](E);Fe(P)}}var Pa={get:function(_,E){return E===K?_[K]:E==="length"?_[K].getArrayLength():typeof E=="number"?Kn.get.call(_,E):typeof E!="string"||isNaN(E)?Kn.hasOwnProperty(E)?Kn[E]:_[E]:Kn.get.call(_,parseInt(E))},set:function(_,E,P){return E==="length"&&_[K].setArrayLength(P),typeof E=="number"&&Kn.set.call(_,E,P),typeof E=="symbol"||isNaN(E)?_[E]=P:Kn.set.call(_,parseInt(E),P),!0},preventExtensions:function(_){return g("Observable arrays cannot be frozen"),!1}};function Ki(_,E,P,I){P===void 0&&(P="ObservableArray@"+b()),I===void 0&&(I=!1);var q,Ae,Xe,gt=new Co(P,E,I);q=gt.values,Ae=K,Xe=gt,Object.defineProperty(q,Ae,{enumerable:!1,writable:!1,configurable:!0,value:Xe});var Vt=new Proxy(gt.values,Pa);if(gt.proxy=Vt,_&&_.length){var Ar=gr(!0);gt.spliceWithArray(0,0,_),Xr(Ar)}return Vt}var Co=function(){function _(E,P,I){this.owned=I,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new U(E||"ObservableArray@"+b()),this.enhancer=function(q,Ae){return P(q,Ae,E+"[..]")}}return _.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.dehanceValues=function(E){return this.dehancer!==void 0&&E.length>0?E.map(this.dehancer):E},_.prototype.intercept=function(E){return To(this,E)},_.prototype.observe=function(E,P){return P===void 0&&(P=!1),P&&E({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Vo(this,E)},_.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},_.prototype.setArrayLength=function(E){if(typeof E!="number"||E<0)throw new Error("[mobx.array] Out of range: "+E);var P=this.values.length;if(E!==P)if(E>P){for(var I=new Array(E-P),q=0;q<E-P;q++)I[q]=void 0;this.spliceWithArray(P,0,I)}else this.spliceWithArray(E,P-E)},_.prototype.updateArrayLength=function(E,P){if(E!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=P},_.prototype.spliceWithArray=function(E,P,I){var q=this;sr(this.atom);var Ae=this.values.length;if(E===void 0?E=0:E>Ae?E=Ae:E<0&&(E=Math.max(0,Ae+E)),P=arguments.length===1?Ae-E:P==null?0:Math.max(0,Math.min(P,Ae-E)),I===void 0&&(I=h),$n(this)){var Xe=Rr(this,{object:this.proxy,type:"splice",index:E,removedCount:P,added:I});if(!Xe)return h;P=Xe.removedCount,I=Xe.added}I=I.length===0?I:I.map(function(Vt){return q.enhancer(Vt,void 0)});var gt=this.spliceItemsIntoValues(E,P,I);return P===0&&I.length===0||this.notifyArraySplice(E,I,gt),this.dehanceValues(gt)},_.prototype.spliceItemsIntoValues=function(E,P,I){var q;if(I.length<1e4)return(q=this.values).splice.apply(q,ye([E,P],I));var Ae=this.values.slice(E,E+P);return this.values=this.values.slice(0,E).concat(I,this.values.slice(E+P)),Ae},_.prototype.notifyArrayChildUpdate=function(E,P,I){var q=!this.owned&&!1,Ae=no(this),Xe=Ae||q?{object:this.proxy,type:"update",index:E,newValue:P,oldValue:I}:null;this.atom.reportChanged(),Ae&&Ln(this,Xe)},_.prototype.notifyArraySplice=function(E,P,I){var q=!this.owned&&!1,Ae=no(this),Xe=Ae||q?{object:this.proxy,type:"splice",index:E,removed:I,added:P,removedCount:I.length,addedCount:P.length}:null;this.atom.reportChanged(),Ae&&Ln(this,Xe)},_}(),Kn={intercept:function(_){return this[K].intercept(_)},observe:function(_,E){return E===void 0&&(E=!1),this[K].observe(_,E)},clear:function(){return this.splice(0)},replace:function(_){var E=this[K];return E.spliceWithArray(0,E.values.length,_)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(_,E){for(var P=[],I=2;I<arguments.length;I++)P[I-2]=arguments[I];var q=this[K];switch(arguments.length){case 0:return[];case 1:return q.spliceWithArray(_);case 2:return q.spliceWithArray(_,E)}return q.spliceWithArray(_,E,P)},spliceWithArray:function(_,E,P){return this[K].spliceWithArray(_,E,P)},push:function(){for(var _=[],E=0;E<arguments.length;E++)_[E]=arguments[E];var P=this[K];return P.spliceWithArray(P.values.length,0,_),P.values.length},pop:function(){return this.splice(Math.max(this[K].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var _=[],E=0;E<arguments.length;E++)_[E]=arguments[E];var P=this[K];return P.spliceWithArray(0,0,_),P.values.length},reverse:function(){var _=this.slice();return _.reverse.apply(_,arguments)},sort:function(_){var E=this.slice();return E.sort.apply(E,arguments)},remove:function(_){var E=this[K],P=E.dehanceValues(E.values).indexOf(_);return P>-1&&(this.splice(P,1),!0)},get:function(_){var E=this[K];if(E&&_<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[_])},set:function(_,E){var P=this[K],I=P.values;if(_<I.length){sr(P.atom);var q=I[_];if($n(P)){var Ae=Rr(P,{type:"update",object:P.proxy,index:_,newValue:E});if(!Ae)return;E=Ae.newValue}(E=P.enhancer(E,q))!==q&&(I[_]=E,P.notifyArrayChildUpdate(_,E,q))}else{if(_!==I.length)throw new Error("[mobx.array] Index out of bounds, "+_+" is larger than "+I.length);P.spliceWithArray(_,0,[E])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(_){typeof Array.prototype[_]=="function"&&(Kn[_]=function(){var E=this[K];E.atom.reportObserved();var P=E.dehanceValues(E.values);return P[_].apply(P,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(_){typeof Array.prototype[_]=="function"&&(Kn[_]=function(E,P){var I=this,q=this[K];return q.atom.reportObserved(),q.dehanceValues(q.values)[_](function(Ae,Xe){return E.call(P,Ae,Xe,I)},P)})}),["reduce","reduceRight"].forEach(function(_){Kn[_]=function(){var E=this,P=this[K];P.atom.reportObserved();var I=arguments[0];return arguments[0]=function(q,Ae,Xe){return Ae=P.dehanceValue(Ae),I(q,Ae,Xe,E)},P.values[_].apply(P.values,arguments)}});var wu,qi=D("ObservableArrayAdministration",Co);function Ao(_){return N(_)&&qi(_[K])}var Ns,nl={},xu=function(){function _(E,P,I){if(P===void 0&&(P=xt),I===void 0&&(I="ObservableMap@"+b()),this.enhancer=P,this.name=I,this[wu]=nl,this._keysAtom=W(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(E)}return _.prototype._has=function(E){return this._data.has(E)},_.prototype.has=function(E){var P=this;if(!qt.trackingDerivation)return this._has(E);var I=this._hasMap.get(E);if(!I){var q=I=new Cr(this._has(E),tr,this.name+"."+se(E)+"?",!1);this._hasMap.set(E,q),Ei(q,function(){return P._hasMap.delete(E)})}return I.get()},_.prototype.set=function(E,P){var I=this._has(E);if($n(this)){var q=Rr(this,{type:I?"update":"add",object:this,newValue:P,name:E});if(!q)return this;P=q.newValue}return I?this._updateValue(E,P):this._addValue(E,P),this},_.prototype.delete=function(E){var P=this;if(sr(this._keysAtom),$n(this)&&!(q=Rr(this,{type:"delete",object:this,name:E})))return!1;if(this._has(E)){var I=no(this),q=I?{type:"delete",object:this,oldValue:this._data.get(E).value,name:E}:null;return vo(function(){P._keysAtom.reportChanged(),P._updateHasMapEntry(E,!1),P._data.get(E).setNewValue(void 0),P._data.delete(E)}),I&&Ln(this,q),!0}return!1},_.prototype._updateHasMapEntry=function(E,P){var I=this._hasMap.get(E);I&&I.setNewValue(P)},_.prototype._updateValue=function(E,P){var I=this._data.get(E);if((P=I.prepareNewValue(P))!==qt.UNCHANGED){var q=no(this),Ae=q?{type:"update",object:this,oldValue:I.value,name:E,newValue:P}:null;I.setNewValue(P),q&&Ln(this,Ae)}},_.prototype._addValue=function(E,P){var I=this;sr(this._keysAtom),vo(function(){var Xe=new Cr(P,I.enhancer,I.name+"."+se(E),!1);I._data.set(E,Xe),P=Xe.value,I._updateHasMapEntry(E,!0),I._keysAtom.reportChanged()});var q=no(this),Ae=q?{type:"add",object:this,name:E,newValue:P}:null;q&&Ln(this,Ae)},_.prototype.get=function(E){return this.has(E)?this.dehanceValue(this._data.get(E).get()):this.dehanceValue(void 0)},_.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},_.prototype.values=function(){var E=this,P=this.keys();return Ma({next:function(){var I=P.next(),q=I.done,Ae=I.value;return{done:q,value:q?void 0:E.get(Ae)}}})},_.prototype.entries=function(){var E=this,P=this.keys();return Ma({next:function(){var I=P.next(),q=I.done,Ae=I.value;return{done:q,value:q?void 0:[Ae,E.get(Ae)]}}})},_.prototype[wu=K,Symbol.iterator]=function(){return this.entries()},_.prototype.forEach=function(E,P){var I,q;try{for(var Ae=ee(this),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var gt=ce(Xe.value,2),Vt=gt[0],Ar=gt[1];E.call(P,Ar,Vt,this)}}catch(cr){I={error:cr}}finally{try{Xe&&!Xe.done&&(q=Ae.return)&&q.call(Ae)}finally{if(I)throw I.error}}},_.prototype.merge=function(E){var P=this;return _n(E)&&(E=E.toJS()),vo(function(){var I=gr(!0);try{j(E)?fe(E).forEach(function(q){return P.set(q,E[q])}):Array.isArray(E)?E.forEach(function(q){var Ae=ce(q,2),Xe=Ae[0],gt=Ae[1];return P.set(Xe,gt)}):z(E)?(E.constructor!==Map&&g("Cannot initialize from classes that inherit from Map: "+E.constructor.name),E.forEach(function(q,Ae){return P.set(Ae,q)})):E!=null&&g("Cannot initialize map from "+E)}finally{Xr(I)}}),this},_.prototype.clear=function(){var E=this;vo(function(){Ne(function(){var P,I;try{for(var q=ee(E.keys()),Ae=q.next();!Ae.done;Ae=q.next()){var Xe=Ae.value;E.delete(Xe)}}catch(gt){P={error:gt}}finally{try{Ae&&!Ae.done&&(I=q.return)&&I.call(q)}finally{if(P)throw P.error}}})})},_.prototype.replace=function(E){var P=this;return vo(function(){var I,q,Ae,Xe,gt=function(wn){if(z(wn)||_n(wn))return wn;if(Array.isArray(wn))return new Map(wn);if(j(wn)){var Da=new Map;for(var li in wn)Da.set(li,wn[li]);return Da}return g("Cannot convert to map from '"+wn+"'")}(E),Vt=new Map,Ar=!1;try{for(var cr=ee(P._data.keys()),Gr=cr.next();!Gr.done;Gr=cr.next()){var Or=Gr.value;if(!gt.has(Or))if(P.delete(Or))Ar=!0;else{var Ur=P._data.get(Or);Vt.set(Or,Ur)}}}catch(wn){I={error:wn}}finally{try{Gr&&!Gr.done&&(q=cr.return)&&q.call(cr)}finally{if(I)throw I.error}}try{for(var ao=ee(gt.entries()),rn=ao.next();!rn.done;rn=ao.next()){var qn=ce(rn.value,2),Qi=(Or=qn[0],Ur=qn[1],P._data.has(Or));if(P.set(Or,Ur),P._data.has(Or)){var ol=P._data.get(Or);Vt.set(Or,ol),Qi||(Ar=!0)}}}catch(wn){Ae={error:wn}}finally{try{rn&&!rn.done&&(Xe=ao.return)&&Xe.call(ao)}finally{if(Ae)throw Ae.error}}if(!Ar)if(P._data.size!==Vt.size)P._keysAtom.reportChanged();else for(var Ra=P._data.keys(),ea=Vt.keys(),Si=Ra.next(),ta=ea.next();!Si.done;){if(Si.value!==ta.value){P._keysAtom.reportChanged();break}Si=Ra.next(),ta=ea.next()}P._data=Vt}),this},Object.defineProperty(_.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),_.prototype.toPOJO=function(){var E,P,I={};try{for(var q=ee(this),Ae=q.next();!Ae.done;Ae=q.next()){var Xe=ce(Ae.value,2),gt=Xe[0],Vt=Xe[1];I[typeof gt=="symbol"?gt:se(gt)]=Vt}}catch(Ar){E={error:Ar}}finally{try{Ae&&!Ae.done&&(P=q.return)&&P.call(q)}finally{if(E)throw E.error}}return I},_.prototype.toJS=function(){return new Map(this)},_.prototype.toJSON=function(){return this.toPOJO()},_.prototype.toString=function(){var E=this;return this.name+"[{ "+Array.from(this.keys()).map(function(P){return se(P)+": "+E.get(P)}).join(", ")+" }]"},_.prototype.observe=function(E,P){return Vo(this,E)},_.prototype.intercept=function(E){return To(this,E)},_}(),_n=D("ObservableMap",xu),xi={},Na=function(){function _(E,P,I){if(P===void 0&&(P=xt),I===void 0&&(I="ObservableSet@"+b()),this.name=I,this[Ns]=xi,this._data=new Set,this._atom=W(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(q,Ae){return P(q,Ae,I)},E&&this.replace(E)}return _.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.clear=function(){var E=this;vo(function(){Ne(function(){var P,I;try{for(var q=ee(E._data.values()),Ae=q.next();!Ae.done;Ae=q.next()){var Xe=Ae.value;E.delete(Xe)}}catch(gt){P={error:gt}}finally{try{Ae&&!Ae.done&&(I=q.return)&&I.call(q)}finally{if(P)throw P.error}}})})},_.prototype.forEach=function(E,P){var I,q;try{for(var Ae=ee(this),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var gt=Xe.value;E.call(P,gt,gt,this)}}catch(Vt){I={error:Vt}}finally{try{Xe&&!Xe.done&&(q=Ae.return)&&q.call(Ae)}finally{if(I)throw I.error}}},Object.defineProperty(_.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),_.prototype.add=function(E){var P=this;if(sr(this._atom),$n(this)&&!(q=Rr(this,{type:"add",object:this,newValue:E})))return this;if(!this.has(E)){vo(function(){P._data.add(P.enhancer(E,void 0)),P._atom.reportChanged()});var I=no(this),q=I?{type:"add",object:this,newValue:E}:null;I&&Ln(this,q)}return this},_.prototype.delete=function(E){var P=this;if($n(this)&&!(q=Rr(this,{type:"delete",object:this,oldValue:E})))return!1;if(this.has(E)){var I=no(this),q=I?{type:"delete",object:this,oldValue:E}:null;return vo(function(){P._atom.reportChanged(),P._data.delete(E)}),I&&Ln(this,q),!0}return!1},_.prototype.has=function(E){return this._atom.reportObserved(),this._data.has(this.dehanceValue(E))},_.prototype.entries=function(){var E=0,P=Array.from(this.keys()),I=Array.from(this.values());return Ma({next:function(){var q=E;return E+=1,q<I.length?{value:[P[q],I[q]],done:!1}:{done:!0}}})},_.prototype.keys=function(){return this.values()},_.prototype.values=function(){this._atom.reportObserved();var E=this,P=0,I=Array.from(this._data.values());return Ma({next:function(){return P<I.length?{value:E.dehanceValue(I[P++]),done:!1}:{done:!0}}})},_.prototype.replace=function(E){var P=this;return Pn(E)&&(E=E.toJS()),vo(function(){var I=gr(!0);try{Array.isArray(E)||Z(E)?(P.clear(),E.forEach(function(q){return P.add(q)})):E!=null&&g("Cannot initialize set from "+E)}finally{Xr(I)}}),this},_.prototype.observe=function(E,P){return Vo(this,E)},_.prototype.intercept=function(E){return To(this,E)},_.prototype.toJS=function(){return new Set(this)},_.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},_.prototype[Ns=K,Symbol.iterator]=function(){return this.values()},_}(),Pn=D("ObservableSet",Na),js=function(){function _(E,P,I,q){P===void 0&&(P=new Map),this.target=E,this.values=P,this.name=I,this.defaultEnhancer=q,this.keysAtom=new U(I+".keys")}return _.prototype.read=function(E){return this.values.get(E).get()},_.prototype.write=function(E,P){var I=this.target,q=this.values.get(E);if(q instanceof Go)q.set(P);else{if($n(this)){if(!(Xe=Rr(this,{type:"update",object:this.proxy||I,name:E,newValue:P})))return;P=Xe.newValue}if((P=q.prepareNewValue(P))!==qt.UNCHANGED){var Ae=no(this),Xe=Ae?{type:"update",object:this.proxy||I,oldValue:q.value,name:E,newValue:P}:null;q.setNewValue(P),Ae&&Ln(this,Xe)}}},_.prototype.has=function(E){var P=this.pendingKeys||(this.pendingKeys=new Map),I=P.get(E);if(I)return I.get();var q=!!this.values.get(E);return I=new Cr(q,tr,this.name+"."+se(E)+"?",!1),P.set(E,I),I.get()},_.prototype.addObservableProp=function(E,P,I){I===void 0&&(I=this.defaultEnhancer);var q=this.target;if($n(this)){var Ae=Rr(this,{object:this.proxy||q,name:E,type:"add",newValue:P});if(!Ae)return;P=Ae.newValue}var Xe=new Cr(P,I,this.name+"."+se(E),!1);this.values.set(E,Xe),P=Xe.value,Object.defineProperty(q,E,function(gt){return Wo[gt]||(Wo[gt]={configurable:!0,enumerable:!0,get:function(){return this[K].read(gt)},set:function(Vt){this[K].write(gt,Vt)}})}(E)),this.notifyPropertyAddition(E,P)},_.prototype.addComputedProp=function(E,P,I){var q,Ae,Xe,gt=this.target;I.name=I.name||this.name+"."+se(P),this.values.set(P,new Go(I)),(E===gt||(q=E,Ae=P,!(Xe=Object.getOwnPropertyDescriptor(q,Ae))||Xe.configurable!==!1&&Xe.writable!==!1))&&Object.defineProperty(E,P,function(Vt){return ja[Vt]||(ja[Vt]={configurable:qt.computedConfigurable,enumerable:!1,get:function(){return Io(this).read(Vt)},set:function(Ar){Io(this).write(Vt,Ar)}})}(P))},_.prototype.remove=function(E){if(this.values.has(E)){var P=this.target;if($n(this)&&!(Vt=Rr(this,{object:this.proxy||P,name:E,type:"remove"})))return;try{lo();var I=no(this),q=!1,Ae=this.values.get(E),Xe=Ae&&Ae.get();if(Ae&&Ae.set(void 0),this.keysAtom.reportChanged(),this.values.delete(E),this.pendingKeys){var gt=this.pendingKeys.get(E);gt&&gt.set(!1)}delete this.target[E];var Vt=I?{type:"remove",object:this.proxy||P,oldValue:Xe,name:E}:null;I&&Ln(this,Vt)}finally{fo()}}},_.prototype.illegalAccess=function(E,P){},_.prototype.observe=function(E,P){return Vo(this,E)},_.prototype.intercept=function(E){return To(this,E)},_.prototype.notifyPropertyAddition=function(E,P){var I=no(this),q=I?{type:"add",object:this.proxy||this.target,name:E,newValue:P}:null;if(I&&Ln(this,q),this.pendingKeys){var Ae=this.pendingKeys.get(E);Ae&&Ae.set(!0)}this.keysAtom.reportChanged()},_.prototype.getKeys=function(){var E,P;this.keysAtom.reportObserved();var I=[];try{for(var q=ee(this.values),Ae=q.next();!Ae.done;Ae=q.next()){var Xe=ce(Ae.value,2),gt=Xe[0];Xe[1]instanceof Cr&&I.push(gt)}}catch(Vt){E={error:Vt}}finally{try{Ae&&!Ae.done&&(P=q.return)&&P.call(q)}finally{if(E)throw E.error}}return I},_}();function Zi(_,E,P){if(E===void 0&&(E=""),P===void 0&&(P=xt),Object.prototype.hasOwnProperty.call(_,K))return _[K];j(_)||(E=(_.constructor.name||"ObservableObject")+"@"+b()),E||(E="ObservableObject@"+b());var I=new js(_,new Map,se(E),P);return R(_,K,I),I}var Wo=Object.create(null),ja=Object.create(null);function Io(_){var E=_[K];return E||(mt(_),_[K])}var Su=D("ObservableObjectAdministration",js);function Nn(_){return!!N(_)&&(mt(_),Su(_[K]))}function oo(_,E){if(typeof _=="object"&&_!==null){if(Ao(_))return E!==void 0&&g(!1),_[K].atom;if(Pn(_))return _[K];if(_n(_)){var P=_;return E===void 0?P._keysAtom:((I=P._data.get(E)||P._hasMap.get(E))||g(!1),I)}var I;if(mt(_),E&&!_[K]&&_[E],Nn(_))return E?((I=_[K].values.get(E))||g(!1),I):g(!1);if(Y(_)||Uo(_)||xa(_))return _}else if(typeof _=="function"&&xa(_[K]))return _[K];return g(!1)}function io(_,E){return _||g("Expecting some object"),E!==void 0?io(oo(_,E)):Y(_)||Uo(_)||xa(_)||_n(_)||Pn(_)?_:(mt(_),_[K]?_[K]:void g(!1))}var Ji=Object.prototype.toString;function Tu(_,E,P){return P===void 0&&(P=-1),Au(_,E,P)}function Au(_,E,P,I,q){if(_===E)return _!==0||1/_==1/E;if(_==null||E==null)return!1;if(_!=_)return E!=E;var Ae=typeof _;if(Ae!=="function"&&Ae!=="object"&&typeof E!="object")return!1;var Xe=Ji.call(_);if(Xe!==Ji.call(E))return!1;switch(Xe){case"[object RegExp]":case"[object String]":return""+_==""+E;case"[object Number]":return+_!=+_?+E!=+E:+_==0?1/+_==1/E:+_==+E;case"[object Date]":case"[object Boolean]":return+_==+E;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(_)===Symbol.valueOf.call(E);case"[object Map]":case"[object Set]":P>=0&&P++}_=Ms(_),E=Ms(E);var gt=Xe==="[object Array]";if(!gt){if(typeof _!="object"||typeof E!="object")return!1;var Vt=_.constructor,Ar=E.constructor;if(Vt!==Ar&&!(typeof Vt=="function"&&Vt instanceof Vt&&typeof Ar=="function"&&Ar instanceof Ar)&&"constructor"in _&&"constructor"in E)return!1}if(P===0)return!1;P<0&&(P=-1),q=q||[];for(var cr=(I=I||[]).length;cr--;)if(I[cr]===_)return q[cr]===E;if(I.push(_),q.push(E),gt){if((cr=_.length)!==E.length)return!1;for(;cr--;)if(!Au(_[cr],E[cr],P-1,I,q))return!1}else{var Gr=Object.keys(_),Or=void 0;if(cr=Gr.length,Object.keys(E).length!==cr)return!1;for(;cr--;)if(!Rs(E,Or=Gr[cr])||!Au(_[Or],E[Or],P-1,I,q))return!1}return I.pop(),q.pop(),!0}function Ms(_){return Ao(_)?_.slice():z(_)||_n(_)||Z(_)||Pn(_)?Array.from(_.entries()):_}function Rs(_,E){return Object.prototype.hasOwnProperty.call(_,E)}function Ma(_){return _[Symbol.iterator]=ci,_}function ci(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:bs,extras:{getDebugName:function(_,E){return(E!==void 0?oo(_,E):Nn(_)||_n(_)||Pn(_)?io(_):oo(_)).name}},$mobx:K})}).call(this,n(155),n(82))},function(o,s,n){var c=n(116),f=n(44),h=n(179);c||f(Object.prototype,"toString",h,{unsafe:!0})},function(o,s,n){var c=n(40),f=n(83),h=n(70),v=n(56),b=n(111),g="Array Iterator",O=v.set,x=v.getterFor(g);o.exports=b(Array,"Array",function(S,N){O(this,{type:g,target:c(S),index:0,kind:N})},function(){var S=x(this),N=S.target,j=S.kind,R=S.index++;return!N||R>=N.length?(S.target=void 0,{value:void 0,done:!0}):j=="keys"?{value:R,done:!1}:j=="values"?{value:N[R],done:!1}:{value:[R,N[R]],done:!1}},"values"),h.Arguments=h.Array,f("keys"),f("values"),f("entries")},function(o,s,n){var c=n(7),f=n(147),h=n(148),v=n(3),b=n(57),g=n(27),O=g("iterator"),x=g("toStringTag"),S=v.values,N=function(R,D){if(R){if(R[O]!==S)try{b(R,O,S)}catch{R[O]=S}if(R[x]||b(R,x,D),f[D]){for(var z in v)if(R[z]!==v[z])try{b(R,z,v[z])}catch{R[z]=v[z]}}}};for(var j in f)N(c[j]&&c[j].prototype,j);N(h,"DOMTokenList")},function(o,s,n){var c=n(17),f=n(7),h=n(46),v=n(76),b=n(35),g=n(15),O=n(64),x=n(36),S=n(109),N=n(19),j=n(34),R=n(99),D=n(28),z=n(33),Z=n(58),fe=n(88),se=n(32),oe=n(38),pe=n(40),K=n(87),U=n(41),Y=n(71),W=n(54),L=n(66),he=n(72),Ce=n(139),ee=n(112),ce=n(51),ye=n(37),_e=n(93),ie=n(101),ge=n(44),Be=n(84),Qe=n(91),mt=n(69),Bt=n(85),bt=n(27),xt=n(149),tr=n(150),Oe=n(73),re=n(56),be=n(74).forEach,qe=Qe("hidden"),yt="Symbol",et=bt("toPrimitive"),Dt=re.set,zt=re.getterFor(yt),Zt=Object.prototype,Gt=f.Symbol,ze=Gt&&Gt.prototype,Yt=f.TypeError,xe=f.QObject,Ht=h("JSON","stringify"),yr=ce.f,B=ye.f,pr=Ce.f,kr=_e.f,$r=g([].push),Zr=Be("symbols"),sr=Be("op-symbols"),sn=Be("string-to-symbol-registry"),Q=Be("symbol-to-string-registry"),Ne=Be("wks"),de=!xe||!xe.prototype||!xe.prototype.findChild,Fe=x&&N(function(){return W(B({},"a",{get:function(){return B(this,"a",{value:7}).a}})).a!=7})?function(Xt,or,dr){var gr=yr(Zt,or);gr&&delete Zt[or],B(Xt,or,dr),gr&&Xt!==Zt&&B(Zt,or,gr)}:B,Nt=function(Xt,or){var dr=Zr[Xt]=W(ze);return Dt(dr,{type:yt,tag:Xt,description:or}),x||(dr.description=or),dr},Ot=function(Xt,or,dr){Xt===Zt&&Ot(sr,or,dr),se(Xt);var gr=K(or);return se(dr),j(Zr,gr)?(dr.enumerable?(j(Xt,qe)&&Xt[qe][gr]&&(Xt[qe][gr]=!1),dr=W(dr,{enumerable:Y(0,!1)})):(j(Xt,qe)||B(Xt,qe,Y(1,{})),Xt[qe][gr]=!0),Fe(Xt,gr,dr)):B(Xt,gr,dr)},Kt=function(Xt,or){se(Xt);var dr=pe(or),gr=L(dr).concat(dn(dr));return be(gr,function(Xr){x&&!b(Tr,dr,Xr)||Ot(Xt,Xr,dr[Xr])}),Xt},Tr=function(Xt){var or=K(Xt),dr=b(kr,this,or);return!(this===Zt&&j(Zr,or)&&!j(sr,or))&&(!(dr||!j(this,or)||!j(Zr,or)||j(this,qe)&&this[qe][or])||dr)},On=function(Xt,or){var dr=pe(Xt),gr=K(or);if(dr!==Zt||!j(Zr,gr)||j(sr,gr)){var Xr=yr(dr,gr);return!Xr||!j(Zr,gr)||j(dr,qe)&&dr[qe][gr]||(Xr.enumerable=!0),Xr}},In=function(Xt){var or=pr(pe(Xt)),dr=[];return be(or,function(gr){j(Zr,gr)||j(mt,gr)||$r(dr,gr)}),dr},dn=function(Xt){var or=Xt===Zt,dr=pr(or?sr:pe(Xt)),gr=[];return be(dr,function(Xr){!j(Zr,Xr)||or&&!j(Zt,Xr)||$r(gr,Zr[Xr])}),gr};if(S||(Gt=function(){if(Z(ze,this))throw Yt("Symbol is not a constructor");var Xt=arguments.length&&arguments[0]!==void 0?U(arguments[0]):void 0,or=Bt(Xt),dr=function(gr){this===Zt&&b(dr,sr,gr),j(this,qe)&&j(this[qe],or)&&(this[qe][or]=!1),Fe(this,or,Y(1,gr))};return x&&de&&Fe(Zt,or,{configurable:!0,set:dr}),Nt(or,Xt)},ge(ze=Gt.prototype,"toString",function(){return zt(this).tag}),ge(Gt,"withoutSetter",function(Xt){return Nt(Bt(Xt),Xt)}),_e.f=Tr,ye.f=Ot,ce.f=On,he.f=Ce.f=In,ee.f=dn,xt.f=function(Xt){return Nt(bt(Xt),Xt)},x&&(B(ze,"description",{configurable:!0,get:function(){return zt(this).description}}),O||ge(Zt,"propertyIsEnumerable",Tr,{unsafe:!0}))),c({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:Gt}),be(L(Ne),function(Xt){tr(Xt)}),c({target:yt,stat:!0,forced:!S},{for:function(Xt){var or=U(Xt);if(j(sn,or))return sn[or];var dr=Gt(or);return sn[or]=dr,Q[dr]=or,dr},keyFor:function(Xt){if(!fe(Xt))throw Yt(Xt+" is not a symbol");if(j(Q,Xt))return Q[Xt]},useSetter:function(){de=!0},useSimple:function(){de=!1}}),c({target:"Object",stat:!0,forced:!S,sham:!x},{create:function(Xt,or){return or===void 0?W(Xt):Kt(W(Xt),or)},defineProperty:Ot,defineProperties:Kt,getOwnPropertyDescriptor:On}),c({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:In,getOwnPropertySymbols:dn}),c({target:"Object",stat:!0,forced:N(function(){ee.f(1)})},{getOwnPropertySymbols:function(Xt){return ee.f(oe(Xt))}}),Ht&&c({target:"JSON",stat:!0,forced:!S||N(function(){var Xt=Gt();return Ht([Xt])!="[null]"||Ht({a:Xt})!="{}"||Ht(Object(Xt))!="{}"})},{stringify:function(Xt,or,dr){var gr=ie(arguments),Xr=or;if((z(or)||Xt!==void 0)&&!fe(Xt))return R(or)||(or=function(Cr,ai){if(D(Xr)&&(ai=b(Xr,this,Cr,ai)),!fe(ai))return ai}),gr[1]=or,v(Ht,null,gr)}}),!ze[et]){var bn=ze.valueOf;ge(ze,et,function(Xt){return b(bn,this)})}Oe(Gt,yt),mt[qe]=!0},function(o,s,n){var c=n(146).charAt,f=n(41),h=n(56),v=n(111),b="String Iterator",g=h.set,O=h.getterFor(b);v(String,"String",function(x){g(this,{type:b,string:f(x),index:0})},function(){var x,S=O(this),N=S.string,j=S.index;return j>=N.length?{value:void 0,done:!0}:(x=c(N,j),S.index+=x.length,{value:x,done:!1})})},function(o,s,n){(function(c){var f=function(h){return h&&h.Math==Math&&h};o.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof c=="object"&&c)||function(){return this}()||Function("return this")()}).call(this,n(82))},function(o,s,n){var c=n(17),f=n(36),h=n(7),v=n(15),b=n(34),g=n(28),O=n(58),x=n(41),S=n(37).f,N=n(134),j=h.Symbol,R=j&&j.prototype;if(f&&g(j)&&(!("description"in R)||j().description!==void 0)){var D={},z=function(){var U=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),Y=O(R,this)?new j(U):U===void 0?j():j(U);return U===""&&(D[Y]=!0),Y};N(z,j),z.prototype=R,R.constructor=z;var Z=String(j("test"))=="Symbol(test)",fe=v(R.toString),se=v(R.valueOf),oe=/^Symbol\((.*)\)[^)]+$/,pe=v("".replace),K=v("".slice);S(R,"description",{configurable:!0,get:function(){var U=se(this),Y=fe(U);if(b(D,U))return"";var W=Z?K(Y,7,-1):pe(Y,oe,"$1");return W===""?void 0:W}}),c({global:!0,forced:!0},{Symbol:z})}},function(o,s,n){n(150)("iterator")},function(o,s,n){n.d(s,"a",function(){return v.a}),n.d(s,"c",function(){return v.e}),n.d(s,"h",function(){return oe}),n.d(s,"i",function(){return Z}),n.d(s,"j",function(){return D}),n.d(s,"b",function(){return ce}),n.d(s,"e",function(){return ge}),n.d(s,"f",function(){return ye}),n.d(s,"g",function(){return Zr});var c,f,h,v=n(0),b=0,g=[],O=v.i.__b,x=v.i.__r,S=v.i.diffed,N=v.i.__c,j=v.i.unmount;function R(Q,Ne){v.i.__h&&v.i.__h(f,Q,b||Ne),b=0;var de=f.__H||(f.__H={__:[],__h:[]});return Q>=de.__.length&&de.__.push({}),de.__[Q]}function D(Q){return b=1,z(he,Q)}function z(Q,Ne,de){var Fe=R(c++,2);return Fe.t=Q,Fe.__c||(Fe.__=[de?de(Ne):he(void 0,Ne),function(Nt){var Ot=Fe.t(Fe.__[0],Nt);Fe.__[0]!==Ot&&(Fe.__=[Ot,Fe.__[1]],Fe.__c.setState({}))}],Fe.__c=f),Fe.__}function Z(Q,Ne){var de=R(c++,3);!v.i.__s&&L(de.__H,Ne)&&(de.__=Q,de.__H=Ne,f.__H.__h.push(de))}function fe(Q,Ne){var de=R(c++,4);!v.i.__s&&L(de.__H,Ne)&&(de.__=Q,de.__H=Ne,f.__h.push(de))}function se(Q,Ne){var de=R(c++,7);return L(de.__H,Ne)&&(de.__=Q(),de.__H=Ne,de.__h=Q),de.__}function oe(Q,Ne){return b=8,se(function(){return Q},Ne)}function pe(){var Q;for(g.sort(function(Ne,de){return Ne.__v.__b-de.__v.__b});Q=g.pop();)if(Q.__P)try{Q.__H.__h.forEach(Y),Q.__H.__h.forEach(W),Q.__H.__h=[]}catch(Ne){Q.__H.__h=[],v.i.__e(Ne,Q.__v)}}v.i.__b=function(Q){f=null,O&&O(Q)},v.i.__r=function(Q){x&&x(Q),c=0;var Ne=(f=Q.__c).__H;Ne&&(Ne.__h.forEach(Y),Ne.__h.forEach(W),Ne.__h=[])},v.i.diffed=function(Q){S&&S(Q);var Ne=Q.__c;Ne&&Ne.__H&&Ne.__H.__h.length&&(g.push(Ne)!==1&&h===v.i.requestAnimationFrame||((h=v.i.requestAnimationFrame)||U)(pe)),f=null},v.i.__c=function(Q,Ne){Ne.some(function(de){try{de.__h.forEach(Y),de.__h=de.__h.filter(function(Fe){return!Fe.__||W(Fe)})}catch(Fe){Ne.some(function(Nt){Nt.__h&&(Nt.__h=[])}),Ne=[],v.i.__e(Fe,de.__v)}}),N&&N(Q,Ne)},v.i.unmount=function(Q){j&&j(Q);var Ne,de=Q.__c;de&&de.__H&&(de.__H.__.forEach(function(Fe){try{Y(Fe)}catch(Nt){Ne=Nt}}),Ne&&v.i.__e(Ne,de.__v))};var K=typeof requestAnimationFrame=="function";function U(Q){var Ne,de=function(){clearTimeout(Fe),K&&cancelAnimationFrame(Ne),setTimeout(Q)},Fe=setTimeout(de,100);K&&(Ne=requestAnimationFrame(de))}function Y(Q){var Ne=f,de=Q.__c;typeof de=="function"&&(Q.__c=void 0,de()),f=Ne}function W(Q){var Ne=f;Q.__c=Q.__(),f=Ne}function L(Q,Ne){return!Q||Q.length!==Ne.length||Ne.some(function(de,Fe){return de!==Q[Fe]})}function he(Q,Ne){return typeof Ne=="function"?Ne(Q):Ne}function Ce(Q,Ne){for(var de in Ne)Q[de]=Ne[de];return Q}function ee(Q,Ne){for(var de in Q)if(de!=="__source"&&!(de in Ne))return!0;for(var Fe in Ne)if(Fe!=="__source"&&Q[Fe]!==Ne[Fe])return!0;return!1}function ce(Q){this.props=Q}function ye(Q,Ne){function de(Nt){var Ot=this.props.ref,Kt=Ot==Nt.ref;return!Kt&&Ot&&(Ot.call?Ot(null):Ot.current=null),Ne?!Ne(this.props,Nt)||!Kt:ee(this.props,Nt)}function Fe(Nt){return this.shouldComponentUpdate=de,Object(v.e)(Q,Nt)}return Fe.displayName="Memo("+(Q.displayName||Q.name)+")",Fe.prototype.isReactComponent=!0,Fe.__f=!0,Fe}(ce.prototype=new v.a).isPureReactComponent=!0,ce.prototype.shouldComponentUpdate=function(Q,Ne){return ee(this.props,Q)||ee(this.state,Ne)};var _e=v.i.__b;v.i.__b=function(Q){Q.type&&Q.type.__f&&Q.ref&&(Q.props.ref=Q.ref,Q.ref=null),_e&&_e(Q)};var ie=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ge(Q){function Ne(de,Fe){var Nt=Ce({},de);return delete Nt.ref,Q(Nt,!(Fe=de.ref||Fe)||typeof Fe=="object"&&!("current"in Fe)?null:Fe)}return Ne.$$typeof=ie,Ne.render=Ne,Ne.prototype.isReactComponent=Ne.__f=!0,Ne.displayName="ForwardRef("+(Q.displayName||Q.name)+")",Ne}var Be=function(Q,Ne){return Q==null?null:Object(v.k)(Object(v.k)(Q).map(Ne))},Qe={map:Be,forEach:Be,count:function(Q){return Q?Object(v.k)(Q).length:0},only:function(Q){var Ne=Object(v.k)(Q);if(Ne.length!==1)throw"Children.only";return Ne[0]},toArray:v.k},mt=v.i.__e;v.i.__e=function(Q,Ne,de){if(Q.then){for(var Fe,Nt=Ne;Nt=Nt.__;)if((Fe=Nt.__c)&&Fe.__c)return Ne.__e==null&&(Ne.__e=de.__e,Ne.__k=de.__k),Fe.__c(Q,Ne)}mt(Q,Ne,de)};var Bt=v.i.unmount;function bt(Q,Ne,de){return Q&&(Q.__c&&Q.__c.__H&&(Q.__c.__H.__.forEach(function(Fe){typeof Fe.__c=="function"&&Fe.__c()}),Q.__c.__H=null),(Q=Ce({},Q)).__c!=null&&(Q.__c.__P===de&&(Q.__c.__P=Ne),Q.__c=null),Q.__k=Q.__k&&Q.__k.map(function(Fe){return bt(Fe,Ne,de)})),Q}function xt(Q,Ne,de){return Q&&(Q.__v=null,Q.__k=Q.__k&&Q.__k.map(function(Fe){return xt(Fe,Ne,de)}),Q.__c&&Q.__c.__P===Ne&&(Q.__e&&de.insertBefore(Q.__e,Q.__d),Q.__c.__e=!0,Q.__c.__P=de)),Q}function tr(){this.__u=0,this.t=null,this.__b=null}function Oe(Q){var Ne=Q.__.__c;return Ne&&Ne.__e&&Ne.__e(Q)}function re(){this.u=null,this.o=null}v.i.unmount=function(Q){var Ne=Q.__c;Ne&&Ne.__R&&Ne.__R(),Ne&&Q.__h===!0&&(Q.type=null),Bt&&Bt(Q)},(tr.prototype=new v.a).__c=function(Q,Ne){var de=Ne.__c,Fe=this;Fe.t==null&&(Fe.t=[]),Fe.t.push(de);var Nt=Oe(Fe.__v),Ot=!1,Kt=function(){Ot||(Ot=!0,de.__R=null,Nt?Nt(Tr):Tr())};de.__R=Kt;var Tr=function(){if(!--Fe.__u){if(Fe.state.__e){var In=Fe.state.__e;Fe.__v.__k[0]=xt(In,In.__c.__P,In.__c.__O)}var dn;for(Fe.setState({__e:Fe.__b=null});dn=Fe.t.pop();)dn.forceUpdate()}},On=Ne.__h===!0;Fe.__u++||On||Fe.setState({__e:Fe.__b=Fe.__v.__k[0]}),Q.then(Kt,Kt)},tr.prototype.componentWillUnmount=function(){this.t=[]},tr.prototype.render=function(Q,Ne){if(this.__b){if(this.__v.__k){var de=document.createElement("div"),Fe=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,de,Fe.__O=Fe.__P)}this.__b=null}var Nt=Ne.__e&&Object(v.e)(v.b,null,Q.fallback);return Nt&&(Nt.__h=null),[Object(v.e)(v.b,null,Ne.__e?null:Q.children),Nt]};var be=function(Q,Ne,de){if(++de[1]===de[0]&&Q.o.delete(Ne),Q.props.revealOrder&&(Q.props.revealOrder[0]!=="t"||!Q.o.size))for(de=Q.u;de;){for(;de.length>3;)de.pop()();if(de[1]<de[0])break;Q.u=de=de[2]}};function qe(Q){return this.getChildContext=function(){return Q.context},Q.children}function yt(Q){var Ne=this,de=Q.i;Ne.componentWillUnmount=function(){Object(v.j)(null,Ne.l),Ne.l=null,Ne.i=null},Ne.i&&Ne.i!==de&&Ne.componentWillUnmount(),Q.__v?(Ne.l||(Ne.i=de,Ne.l={nodeType:1,parentNode:de,childNodes:[],appendChild:function(Fe){this.childNodes.push(Fe),Ne.i.appendChild(Fe)},insertBefore:function(Fe,Nt){this.childNodes.push(Fe),Ne.i.appendChild(Fe)},removeChild:function(Fe){this.childNodes.splice(this.childNodes.indexOf(Fe)>>>1,1),Ne.i.removeChild(Fe)}}),Object(v.j)(Object(v.e)(qe,{context:Ne.context},Q.__v),Ne.l)):Ne.l&&Ne.componentWillUnmount()}(re.prototype=new v.a).__e=function(Q){var Ne=this,de=Oe(Ne.__v),Fe=Ne.o.get(Q);return Fe[0]++,function(Nt){var Ot=function(){Ne.props.revealOrder?(Fe.push(Nt),be(Ne,Q,Fe)):Nt()};de?de(Ot):Ot()}},re.prototype.render=function(Q){this.u=null,this.o=new Map;var Ne=Object(v.k)(Q.children);Q.revealOrder&&Q.revealOrder[0]==="b"&&Ne.reverse();for(var de=Ne.length;de--;)this.o.set(Ne[de],this.u=[1,0,this.u]);return Q.children},re.prototype.componentDidUpdate=re.prototype.componentDidMount=function(){var Q=this;this.o.forEach(function(Ne,de){be(Q,de,Ne)})};var et=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Dt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zt=typeof document<"u",Zt=function(Q){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Q)};v.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Q){Object.defineProperty(v.a.prototype,Q,{configurable:!0,get:function(){return this["UNSAFE_"+Q]},set:function(Ne){Object.defineProperty(this,Q,{configurable:!0,writable:!0,value:Ne})}})});var Gt=v.i.event;function ze(){}function Yt(){return this.cancelBubble}function xe(){return this.defaultPrevented}v.i.event=function(Q){return Gt&&(Q=Gt(Q)),Q.persist=ze,Q.isPropagationStopped=Yt,Q.isDefaultPrevented=xe,Q.nativeEvent=Q};var Ht,yr={configurable:!0,get:function(){return this.class}},B=v.i.vnode;v.i.vnode=function(Q){var Ne=Q.type,de=Q.props,Fe=de;if(typeof Ne=="string"){var Nt=Ne.indexOf("-")===-1;for(var Ot in Fe={},de){var Kt=de[Ot];zt&&Ot==="children"&&Ne==="noscript"||Ot==="value"&&"defaultValue"in de&&Kt==null||(Ot==="defaultValue"&&"value"in de&&de.value==null?Ot="value":Ot==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(Ot)?Ot="ondblclick":/^onchange(textarea|input)/i.test(Ot+Ne)&&!Zt(de.type)?Ot="oninput":/^onfocus$/i.test(Ot)?Ot="onfocusin":/^onblur$/i.test(Ot)?Ot="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Ot)?Ot=Ot.toLowerCase():Nt&&Dt.test(Ot)?Ot=Ot.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),Fe[Ot]=Kt)}Ne=="select"&&Fe.multiple&&Array.isArray(Fe.value)&&(Fe.value=Object(v.k)(de.children).forEach(function(Tr){Tr.props.selected=Fe.value.indexOf(Tr.props.value)!=-1})),Ne=="select"&&Fe.defaultValue!=null&&(Fe.value=Object(v.k)(de.children).forEach(function(Tr){Tr.props.selected=Fe.multiple?Fe.defaultValue.indexOf(Tr.props.value)!=-1:Fe.defaultValue==Tr.props.value})),Q.props=Fe,de.class!=de.className&&(yr.enumerable="className"in de,de.className!=null&&(Fe.class=de.className),Object.defineProperty(Fe,"className",yr))}Q.$$typeof=et,B&&B(Q)};var pr=v.i.__r;v.i.__r=function(Q){pr&&pr(Q),Ht=Q.__c};var kr={ReactCurrentDispatcher:{current:{readContext:function(Q){return Ht.__n[Q.__c].props.value}}}};function $r(Q){return!!Q&&Q.$$typeof===et}var Zr=function(Q,Ne){return Q(Ne)},sr=v.b,sn={useState:D,useReducer:z,useEffect:Z,useLayoutEffect:fe,useRef:function(Q){return b=5,se(function(){return{current:Q}},[])},useImperativeHandle:function(Q,Ne,de){b=6,fe(function(){typeof Q=="function"?Q(Ne()):Q&&(Q.current=Ne())},de==null?de:de.concat(Q))},useMemo:se,useCallback:oe,useContext:function(Q){var Ne=f.context[Q.__c],de=R(c++,9);return de.c=Q,Ne?(de.__==null&&(de.__=!0,Ne.sub(f)),Ne.props.value):Q.__},useDebugValue:function(Q,Ne){v.i.useDebugValue&&v.i.useDebugValue(Ne?Ne(Q):Q)},version:"17.0.2",Children:Qe,render:function(Q,Ne,de){return Ne.__k==null&&(Ne.textContent=""),Object(v.j)(Q,Ne),typeof de=="function"&&de(),Q?Q.__c:null},hydrate:function(Q,Ne,de){return Object(v.h)(Q,Ne),typeof de=="function"&&de(),Q?Q.__c:null},unmountComponentAtNode:function(Q){return!!Q.__k&&(Object(v.j)(null,Q),!0)},createPortal:function(Q,Ne){return Object(v.e)(yt,{__v:Q,i:Ne})},createElement:v.e,createContext:v.d,createFactory:function(Q){return v.e.bind(null,Q)},cloneElement:function(Q){return $r(Q)?v.c.apply(null,arguments):Q},createRef:v.f,Fragment:v.b,isValidElement:$r,findDOMNode:function(Q){return Q&&(Q.base||Q.nodeType===1&&Q)||null},Component:v.a,PureComponent:ce,memo:ye,forwardRef:ge,flushSync:function(Q,Ne){return Q(Ne)},unstable_batchedUpdates:Zr,StrictMode:sr,Suspense:tr,SuspenseList:re,lazy:function(Q){var Ne,de,Fe;function Nt(Ot){if(Ne||(Ne=Q()).then(function(Kt){de=Kt.default||Kt},function(Kt){Fe=Kt}),Fe)throw Fe;if(!de)throw Ne;return Object(v.e)(de,Ot)}return Nt.displayName="Lazy",Nt.__f=!0,Nt},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:kr};s.d=sn},function(o,s,n){var c=n(7),f=n(147),h=n(148),v=n(180),b=n(57),g=function(x){if(x&&x.forEach!==v)try{b(x,"forEach",v)}catch{x.forEach=v}};for(var O in f)f[O]&&g(c[O]&&c[O].prototype);g(h)},function(o,s,n){n(17)({target:"Object",stat:!0},{setPrototypeOf:n(97)})},function(o,s,n){var c=n(17),f=n(19),h=n(38),v=n(96),b=n(137);c({target:"Object",stat:!0,forced:f(function(){v(1)}),sham:!b},{getPrototypeOf:function(g){return v(h(g))}})},function(o,s,n){var c=n(17),f=n(46),h=n(76),v=n(200),b=n(157),g=n(32),O=n(33),x=n(54),S=n(19),N=f("Reflect","construct"),j=Object.prototype,R=[].push,D=S(function(){function fe(){}return!(N(function(){},[],fe)instanceof fe)}),z=!S(function(){N(function(){})}),Z=D||z;c({target:"Reflect",stat:!0,forced:Z,sham:Z},{construct:function(fe,se){b(fe),g(se);var oe=arguments.length<3?fe:b(arguments[2]);if(z&&!D)return N(fe,se,oe);if(fe==oe){switch(se.length){case 0:return new fe;case 1:return new fe(se[0]);case 2:return new fe(se[0],se[1]);case 3:return new fe(se[0],se[1],se[2]);case 4:return new fe(se[0],se[1],se[2],se[3])}var pe=[null];return h(R,pe,se),new(h(v,fe,pe))}var K=oe.prototype,U=x(O(K)?K:j),Y=h(fe,U,se);return O(Y)?Y:U}})},function(o,s){var n=Function.prototype,c=n.bind,f=n.call,h=c&&c.bind(f);o.exports=c?function(v){return v&&h(f,v)}:function(v){return v&&function(){return f.apply(v,arguments)}}},function(o,s,n){var c=n(17),f=n(7),h=n(99),v=n(100),b=n(33),g=n(67),O=n(43),x=n(40),S=n(61),N=n(27),j=n(75),R=n(101),D=j("slice"),z=N("species"),Z=f.Array,fe=Math.max;c({target:"Array",proto:!0,forced:!D},{slice:function(se,oe){var pe,K,U,Y=x(this),W=O(Y),L=g(se,W),he=g(oe===void 0?W:oe,W);if(h(Y)&&(pe=Y.constructor,(v(pe)&&(pe===Z||h(pe.prototype))||b(pe)&&(pe=pe[z])===null)&&(pe=void 0),pe===Z||pe===void 0))return R(Y,L,he);for(K=new(pe===void 0?Z:pe)(fe(he-L,0)),U=0;L<he;L++,U++)L in Y&&S(K,U,Y[L]);return K.length=U,K}})},function(o,s,n){var c=n(7),f=n(51).f,h=n(57),v=n(44),b=n(108),g=n(134),O=n(95);o.exports=function(x,S){var N,j,R,D,z,Z=x.target,fe=x.global,se=x.stat;if(N=fe?c:se?c[Z]||b(Z,{}):(c[Z]||{}).prototype)for(j in S){if(D=S[j],R=x.noTargetGet?(z=f(N,j))&&z.value:N[j],!O(fe?j:Z+(se?".":"#")+j,x.forced)&&R!==void 0){if(typeof D==typeof R)continue;g(D,R)}(x.sham||R&&R.sham)&&h(D,"sham",!0),v(N,j,D,x)}}},function(o,s,n){var c=n(17),f=n(102);c({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},function(o,s){o.exports=function(n){try{return!!n()}catch{return!0}}},function(o,s,n){var c=n(17),f=n(38),h=n(66);c({target:"Object",stat:!0,forced:n(19)(function(){h(1)})},{keys:function(v){return h(f(v))}})},function(o,s,n){var c=n(17),f=n(19),h=n(40),v=n(51).f,b=n(36),g=f(function(){v(1)});c({target:"Object",stat:!0,forced:!b||g,sham:!b},{getOwnPropertyDescriptor:function(O,x){return v(h(O),x)}})},function(o,s,n){var c=n(36),f=n(94).EXISTS,h=n(15),v=n(37).f,b=Function.prototype,g=h(b.toString),O=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=h(O.exec);c&&!f&&v(b,"name",{configurable:!0,get:function(){try{return x(O,g(this))[1]}catch{return""}}})},function(o,s,n){var c=n(17),f=n(74).filter;c({target:"Array",proto:!0,forced:!n(75)("filter")},{filter:function(h){return f(this,h,arguments.length>1?arguments[1]:void 0)}})},function(o,s,n){var c=n(17),f=n(183);c({target:"Array",stat:!0,forced:!n(118)(function(h){Array.from(h)})},{from:f})},function(o,s,n){var c=n(17),f=n(36),h=n(135),v=n(40),b=n(51),g=n(61);c({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(O){for(var x,S,N=v(O),j=b.f,R=h(N),D={},z=0;R.length>z;)(S=j(N,x=R[z++]))!==void 0&&g(D,x,S);return D}})},,function(o,s,n){var c=n(7),f=n(84),h=n(34),v=n(85),b=n(109),g=n(128),O=f("wks"),x=c.Symbol,S=x&&x.for,N=g?x:x&&x.withoutSetter||v;o.exports=function(j){if(!h(O,j)||!b&&typeof O[j]!="string"){var R="Symbol."+j;b&&h(x,j)?O[j]=x[j]:O[j]=g&&S?S(R):N(R)}return O[j]}},function(o,s){o.exports=function(n){return typeof n=="function"}},function(o,s,n){var c=n(17),f=n(7),h=n(19),v=n(99),b=n(33),g=n(38),O=n(43),x=n(61),S=n(119),N=n(75),j=n(27),R=n(65),D=j("isConcatSpreadable"),z=9007199254740991,Z="Maximum allowed index exceeded",fe=f.TypeError,se=R>=51||!h(function(){var K=[];return K[D]=!1,K.concat()[0]!==K}),oe=N("concat"),pe=function(K){if(!b(K))return!1;var U=K[D];return U!==void 0?!!U:v(K)};c({target:"Array",proto:!0,forced:!se||!oe},{concat:function(K){var U,Y,W,L,he,Ce=g(this),ee=S(Ce,0),ce=0;for(U=-1,W=arguments.length;U<W;U++)if(pe(he=U===-1?Ce:arguments[U])){if(ce+(L=O(he))>z)throw fe(Z);for(Y=0;Y<L;Y++,ce++)Y in he&&x(ee,ce,he[Y])}else{if(ce>=z)throw fe(Z);x(ee,ce++,he)}return ee.length=ce,ee}})},function(o,s,n){var c=n(17),f=n(199);c({target:"Object",stat:!0,forced:Object.assign!==f},{assign:f})},function(o,s,n){var c=n(105),f=typeof self=="object"&&self&&self.Object===Object&&self,h=c.a||f||Function("return this")();s.a=h},function(o,s,n){var c=n(7),f=n(33),h=c.String,v=c.TypeError;o.exports=function(b){if(f(b))return b;throw v(h(b)+" is not an object")}},function(o,s,n){var c=n(28);o.exports=function(f){return typeof f=="object"?f!==null:c(f)}},function(o,s,n){var c=n(15),f=n(38),h=c({}.hasOwnProperty);o.exports=Object.hasOwn||function(v,b){return h(f(v),b)}},function(o,s){var n=Function.prototype.call;o.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},function(o,s,n){var c=n(19);o.exports=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(o,s,n){var c=n(7),f=n(36),h=n(129),v=n(32),b=n(87),g=c.TypeError,O=Object.defineProperty;s.f=f?O:function(x,S,N){if(v(x),S=b(S),v(N),h)try{return O(x,S,N)}catch{}if("get"in N||"set"in N)throw g("Accessors not supported");return"value"in N&&(x[S]=N.value),x}},function(o,s,n){var c=n(7),f=n(45),h=c.Object;o.exports=function(v){return h(f(v))}},function(o,s,n){var c=n(17),f=n(74).map;c({target:"Array",proto:!0,forced:!n(75)("map")},{map:function(h){return f(this,h,arguments.length>1?arguments[1]:void 0)}})},function(o,s,n){var c=n(81),f=n(45);o.exports=function(h){return c(f(h))}},function(o,s,n){var c=n(7),f=n(98),h=c.String;o.exports=function(v){if(f(v)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return h(v)}},function(o,s,n){(function(c){n.d(s,"d",function(){return v}),n.d(s,"c",function(){return b}),n.d(s,"b",function(){return g}),n.d(s,"a",function(){return x});var f=n(10),h=function(S,N){var j=typeof Symbol=="function"&&S[Symbol.iterator];if(!j)return S;var R,D,z=j.call(S),Z=[];try{for(;(N===void 0||N-- >0)&&!(R=z.next()).done;)Z.push(R.value)}catch(fe){D={error:fe}}finally{try{R&&!R.done&&(j=z.return)&&j.call(z)}finally{if(D)throw D.error}}return Z};function v(){var S=h(Object(f.j)(0),2)[1];return Object(f.h)(function(){S(function(N){return N+1})},[])}function b(S){if(!S||typeof S!="object")return!1;var N=Object.getPrototypeOf(S);return!N||N===Object.prototype}function g(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var O={};function x(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:O}}).call(this,n(82))},function(o,s,n){var c=n(90);o.exports=function(f){return c(f.length)}},function(o,s,n){var c=n(7),f=n(28),h=n(34),v=n(57),b=n(108),g=n(92),O=n(56),x=n(94).CONFIGURABLE,S=O.get,N=O.enforce,j=String(String).split("String");(o.exports=function(R,D,z,Z){var fe,se=!!Z&&!!Z.unsafe,oe=!!Z&&!!Z.enumerable,pe=!!Z&&!!Z.noTargetGet,K=Z&&Z.name!==void 0?Z.name:D;f(z)&&(String(K).slice(0,7)==="Symbol("&&(K="["+String(K).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!h(z,"name")||x&&z.name!==K)&&v(z,"name",K),(fe=N(z)).source||(fe.source=j.join(typeof K=="string"?K:""))),R!==c?(se?!pe&&R[D]&&(oe=!0):delete R[D],oe?R[D]=z:v(R,D,z)):oe?R[D]=z:b(D,z)})(Function.prototype,"toString",function(){return f(this)&&S(this).source||g(this)})},function(o,s,n){var c=n(7).TypeError;o.exports=function(f){if(f==null)throw c("Can't call method on "+f);return f}},function(o,s,n){var c=n(7),f=n(28),h=function(v){return f(v)?v:void 0};o.exports=function(v,b){return arguments.length<2?h(c[v]):c[v]&&c[v][b]}},function(o,s,n){var c=n(17),f=n(35),h=n(33),v=n(32),b=n(201),g=n(51),O=n(96);c({target:"Reflect",stat:!0},{get:function x(S,N){var j,R,D=arguments.length<3?S:arguments[2];return v(S)===D?S[N]:(j=g.f(S,N))?b(j)?j.value:j.get===void 0?void 0:f(j.get,D):h(R=O(S))?x(R,N,D):void 0}})},function(o,s,n){(function(c){var f=n(31),h=n(166),v=i&&!i.nodeType&&i,b=v&&typeof c=="object"&&c&&!c.nodeType&&c,g=b&&b.exports===v?f.a.Buffer:void 0,O=(g?g.isBuffer:void 0)||h.a;s.a=O}).call(this,n(121)(o))},function(o,s,n){(function(c){var f=n(105),h=i&&!i.nodeType&&i,v=h&&typeof c=="object"&&c&&!c.nodeType&&c,b=v&&v.exports===h&&f.a.process,g=function(){try{var O=v&&v.require&&v.require("util").types;return O||b&&b.binding&&b.binding("util")}catch{}}();s.a=g}).call(this,n(121)(o))},function(o,s,n){var c=n(15),f=c({}.toString),h=c("".slice);o.exports=function(v){return h(f(v),8,-1)}},function(o,s,n){var c=n(36),f=n(35),h=n(93),v=n(71),b=n(40),g=n(87),O=n(34),x=n(129),S=Object.getOwnPropertyDescriptor;s.f=c?S:function(N,j){if(N=b(N),j=g(j),x)try{return S(N,j)}catch{}if(O(N,j))return v(!f(h.f,N,j),N[j])}},function(o,s,n){var c=n(17),f=n(213).entries;c({target:"Object",stat:!0},{entries:function(h){return f(h)}})},function(o,s,n){var c=n(46);o.exports=c("navigator","userAgent")||""},function(o,s,n){var c,f=n(32),h=n(169),v=n(110),b=n(69),g=n(133),O=n(86),x=n(91),S=x("IE_PROTO"),N=function(){},j=function(z){return"<script>"+z+"<\/script>"},R=function(z){z.write(j("")),z.close();var Z=z.parentWindow.Object;return z=null,Z},D=function(){try{c=new ActiveXObject("htmlfile")}catch{}var z,Z;D=typeof document<"u"?document.domain&&c?R(c):((Z=O("iframe")).style.display="none",g.appendChild(Z),Z.src="javascript:",(z=Z.contentWindow.document).open(),z.write(j("document.F=Object")),z.close(),z.F):R(c);for(var fe=v.length;fe--;)delete D.prototype[v[fe]];return D()};b[S]=!0,o.exports=Object.create||function(z,Z){var fe;return z!==null?(N.prototype=f(z),fe=new N,N.prototype=null,fe[S]=z):fe=D(),Z===void 0?fe:h(fe,Z)}},function(o,s,n){var c=n(7),f=n(28),h=n(89),v=c.TypeError;o.exports=function(b){if(f(b))return b;throw v(h(b)+" is not a function")}},function(o,s,n){var c,f,h,v=n(171),b=n(7),g=n(15),O=n(33),x=n(57),S=n(34),N=n(107),j=n(91),R=n(69),D="Object already initialized",z=b.TypeError,Z=b.WeakMap;if(v||N.state){var fe=N.state||(N.state=new Z),se=g(fe.get),oe=g(fe.has),pe=g(fe.set);c=function(U,Y){if(oe(fe,U))throw new z(D);return Y.facade=U,pe(fe,U,Y),Y},f=function(U){return se(fe,U)||{}},h=function(U){return oe(fe,U)}}else{var K=j("state");R[K]=!0,c=function(U,Y){if(S(U,K))throw new z(D);return Y.facade=U,x(U,K,Y),Y},f=function(U){return S(U,K)?U[K]:{}},h=function(U){return S(U,K)}}o.exports={set:c,get:f,has:h,enforce:function(U){return h(U)?f(U):c(U,{})},getterFor:function(U){return function(Y){var W;if(!O(Y)||(W=f(Y)).type!==U)throw z("Incompatible receiver, "+U+" required");return W}}}},function(o,s,n){var c=n(36),f=n(37),h=n(71);o.exports=c?function(v,b,g){return f.f(v,b,h(1,g))}:function(v,b,g){return v[b]=g,v}},function(o,s,n){var c=n(15);o.exports=c({}.isPrototypeOf)},function(o,s,n){var c=n(55);o.exports=function(f,h){var v=f[h];return v==null?void 0:c(v)}},function(o,s,n){n(174)("Map",function(c){return function(){return c(this,arguments.length?arguments[0]:void 0)}},n(178))},function(o,s,n){var c=n(87),f=n(37),h=n(71);o.exports=function(v,b,g){var O=c(b);O in v?f.f(v,O,h(0,g)):v[O]=g}},function(o,s,n){var c=n(15),f=n(55),h=c(c.bind);o.exports=function(v,b){return f(v),b===void 0?v:h?h(v,b):function(){return v.apply(b,arguments)}}},function(o,s,n){var c=n(17),f=n(15),h=n(81),v=n(40),b=n(120),g=f([].join),O=h!=Object,x=b("join",",");c({target:"Array",proto:!0,forced:O||!x},{join:function(S){return g(v(this),S===void 0?",":S)}})},function(o,s){o.exports=!1},function(o,s,n){var c,f,h=n(7),v=n(53),b=h.process,g=h.Deno,O=b&&b.versions||g&&g.version,x=O&&O.v8;x&&(f=(c=x.split("."))[0]>0&&c[0]<4?1:+(c[0]+c[1])),!f&&v&&(!(c=v.match(/Edge\/(\d+)/))||c[1]>=74)&&(c=v.match(/Chrome\/(\d+)/))&&(f=+c[1]),o.exports=f},function(o,s,n){var c=n(131),f=n(110);o.exports=Object.keys||function(h){return c(h,f)}},function(o,s,n){var c=n(68),f=Math.max,h=Math.min;o.exports=function(v,b){var g=c(v);return g<0?f(g+b,0):h(g,b)}},function(o,s){var n=Math.ceil,c=Math.floor;o.exports=function(f){var h=+f;return h!=h||h===0?0:(h>0?c:n)(h)}},function(o,s){o.exports={}},function(o,s){o.exports={}},function(o,s){o.exports=function(n,c){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:c}}},function(o,s,n){var c=n(131),f=n(110).concat("length","prototype");s.f=Object.getOwnPropertyNames||function(h){return c(h,f)}},function(o,s,n){var c=n(37).f,f=n(34),h=n(27)("toStringTag");o.exports=function(v,b,g){v&&!f(v=g?v:v.prototype,h)&&c(v,h,{configurable:!0,value:b})}},function(o,s,n){var c=n(62),f=n(15),h=n(81),v=n(38),b=n(43),g=n(119),O=f([].push),x=function(S){var N=S==1,j=S==2,R=S==3,D=S==4,z=S==6,Z=S==7,fe=S==5||z;return function(se,oe,pe,K){for(var U,Y,W=v(se),L=h(W),he=c(oe,pe),Ce=b(L),ee=0,ce=K||g,ye=N?ce(se,Ce):j||Z?ce(se,0):void 0;Ce>ee;ee++)if((fe||ee in L)&&(Y=he(U=L[ee],ee,W),S))if(N)ye[ee]=Y;else if(Y)switch(S){case 3:return!0;case 5:return U;case 6:return ee;case 2:O(ye,U)}else switch(S){case 4:return!1;case 7:O(ye,U)}return z?-1:R||D?D:ye}};o.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(o,s,n){var c=n(19),f=n(27),h=n(65),v=f("species");o.exports=function(b){return h>=51||!c(function(){var g=[];return(g.constructor={})[v]=function(){return{foo:1}},g[b](Boolean).foo!==1})}},function(o,s){var n=Function.prototype,c=n.apply,f=n.bind,h=n.call;o.exports=typeof Reflect=="object"&&Reflect.apply||(f?h.bind(c):function(){return h.apply(c,arguments)})},function(o,s,n){var c=n(76),f=n(35),h=n(15),v=n(122),b=n(154),g=n(32),O=n(45),x=n(156),S=n(123),N=n(90),j=n(41),R=n(59),D=n(113),z=n(124),Z=n(102),fe=n(151),se=n(19),oe=fe.UNSUPPORTED_Y,pe=4294967295,K=Math.min,U=[].push,Y=h(/./.exec),W=h(U),L=h("".slice),he=!se(function(){var Ce=/(?:)/,ee=Ce.exec;Ce.exec=function(){return ee.apply(this,arguments)};var ce="ab".split(Ce);return ce.length!==2||ce[0]!=="a"||ce[1]!=="b"});v("split",function(Ce,ee,ce){var ye;return ye="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(_e,ie){var ge=j(O(this)),Be=ie===void 0?pe:ie>>>0;if(Be===0)return[];if(_e===void 0)return[ge];if(!b(_e))return f(ee,ge,_e,Be);for(var Qe,mt,Bt,bt=[],xt=(_e.ignoreCase?"i":"")+(_e.multiline?"m":"")+(_e.unicode?"u":"")+(_e.sticky?"y":""),tr=0,Oe=new RegExp(_e.source,xt+"g");(Qe=f(Z,Oe,ge))&&!((mt=Oe.lastIndex)>tr&&(W(bt,L(ge,tr,Qe.index)),Qe.length>1&&Qe.index<ge.length&&c(U,bt,D(Qe,1)),Bt=Qe[0].length,tr=mt,bt.length>=Be));)Oe.lastIndex===Qe.index&&Oe.lastIndex++;return tr===ge.length?!Bt&&Y(Oe,"")||W(bt,""):W(bt,L(ge,tr)),bt.length>Be?D(bt,0,Be):bt}:"0".split(void 0,0).length?function(_e,ie){return _e===void 0&&ie===0?[]:f(ee,this,_e,ie)}:ee,[function(_e,ie){var ge=O(this),Be=_e==null?void 0:R(_e,Ce);return Be?f(Be,_e,ge,ie):f(ye,j(ge),_e,ie)},function(_e,ie){var ge=g(this),Be=j(_e),Qe=ce(ye,ge,Be,ie,ye!==ee);if(Qe.done)return Qe.value;var mt=x(ge,RegExp),Bt=ge.unicode,bt=(ge.ignoreCase?"i":"")+(ge.multiline?"m":"")+(ge.unicode?"u":"")+(oe?"g":"y"),xt=new mt(oe?"^(?:"+ge.source+")":ge,bt),tr=ie===void 0?pe:ie>>>0;if(tr===0)return[];if(Be.length===0)return z(xt,Be)===null?[Be]:[];for(var Oe=0,re=0,be=[];re<Be.length;){xt.lastIndex=oe?0:re;var qe,yt=z(xt,oe?L(Be,re):Be);if(yt===null||(qe=K(N(xt.lastIndex+(oe?re:0)),Be.length))===Oe)re=S(Be,re,Bt);else{if(W(be,L(Be,Oe,re)),be.length===tr)return be;for(var et=1;et<=yt.length-1;et++)if(W(be,yt[et]),be.length===tr)return be;re=Oe=qe}}return W(be,L(Be,Oe)),be}]},!he,oe)},function(o,s,n){var c=n(36),f=n(7),h=n(15),v=n(95),b=n(44),g=n(34),O=n(143),x=n(58),S=n(88),N=n(130),j=n(19),R=n(72).f,D=n(51).f,z=n(37).f,Z=n(197),fe=n(159).trim,se="Number",oe=f.Number,pe=oe.prototype,K=f.TypeError,U=h("".slice),Y=h("".charCodeAt),W=function(ye){var _e=N(ye,"number");return typeof _e=="bigint"?_e:L(_e)},L=function(ye){var _e,ie,ge,Be,Qe,mt,Bt,bt,xt=N(ye,"number");if(S(xt))throw K("Cannot convert a Symbol value to a number");if(typeof xt=="string"&&xt.length>2){if(xt=fe(xt),(_e=Y(xt,0))===43||_e===45){if((ie=Y(xt,2))===88||ie===120)return NaN}else if(_e===48){switch(Y(xt,1)){case 66:case 98:ge=2,Be=49;break;case 79:case 111:ge=8,Be=55;break;default:return+xt}for(mt=(Qe=U(xt,2)).length,Bt=0;Bt<mt;Bt++)if((bt=Y(Qe,Bt))<48||bt>Be)return NaN;return parseInt(Qe,ge)}}return+xt};if(v(se,!oe(" 0o1")||!oe("0b1")||oe("+0x1"))){for(var he,Ce=function(ye){var _e=arguments.length<1?0:oe(W(ye)),ie=this;return x(pe,ie)&&j(function(){Z(ie)})?O(Object(_e),ie,Ce):_e},ee=c?R(oe):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ce=0;ee.length>ce;ce++)g(oe,he=ee[ce])&&!g(Ce,he)&&z(Ce,he,D(oe,he));Ce.prototype=pe,pe.constructor=Ce,b(f,se,Ce)}},function(o,s,n){n(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(o,s,n){var c=n(17),f=n(214),h=n(83);c({target:"Array",proto:!0},{fill:f}),h("fill")},function(o,s,n){var c=n(7),f=n(15),h=n(19),v=n(50),b=c.Object,g=f("".split);o.exports=h(function(){return!b("z").propertyIsEnumerable(0)})?function(O){return v(O)=="String"?g(O,""):b(O)}:b},function(o,s){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}o.exports=n},function(o,s,n){var c=n(27),f=n(54),h=n(37),v=c("unscopables"),b=Array.prototype;b[v]==null&&h.f(b,v,{configurable:!0,value:f(null)}),o.exports=function(g){b[v][g]=!0}},function(o,s,n){var c=n(64),f=n(107);(o.exports=function(h,v){return f[h]||(f[h]=v!==void 0?v:{})})("versions",[]).push({version:"3.19.3",mode:c?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(o,s,n){var c=n(15),f=0,h=Math.random(),v=c(1 .toString);o.exports=function(b){return"Symbol("+(b===void 0?"":b)+")_"+v(++f+h,36)}},function(o,s,n){var c=n(7),f=n(33),h=c.document,v=f(h)&&f(h.createElement);o.exports=function(b){return v?h.createElement(b):{}}},function(o,s,n){var c=n(130),f=n(88);o.exports=function(h){var v=c(h,"string");return f(v)?v:v+""}},function(o,s,n){var c=n(7),f=n(46),h=n(28),v=n(58),b=n(128),g=c.Object;o.exports=b?function(O){return typeof O=="symbol"}:function(O){var x=f("Symbol");return h(x)&&v(x.prototype,g(O))}},function(o,s,n){var c=n(7).String;o.exports=function(f){try{return c(f)}catch{return"Object"}}},function(o,s,n){var c=n(68),f=Math.min;o.exports=function(h){return h>0?f(c(h),9007199254740991):0}},function(o,s,n){var c=n(84),f=n(85),h=c("keys");o.exports=function(v){return h[v]||(h[v]=f(v))}},function(o,s,n){var c=n(15),f=n(28),h=n(107),v=c(Function.toString);f(h.inspectSource)||(h.inspectSource=function(b){return v(b)}),o.exports=h.inspectSource},function(o,s,n){var c={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,h=f&&!c.call({1:2},1);s.f=h?function(v){var b=f(this,v);return!!b&&b.enumerable}:c},function(o,s,n){var c=n(36),f=n(34),h=Function.prototype,v=c&&Object.getOwnPropertyDescriptor,b=f(h,"name"),g=b&&function(){}.name==="something",O=b&&(!c||c&&v(h,"name").configurable);o.exports={EXISTS:b,PROPER:g,CONFIGURABLE:O}},function(o,s,n){var c=n(19),f=n(28),h=/#|\.prototype\./,v=function(S,N){var j=g[b(S)];return j==x||j!=O&&(f(N)?c(N):!!N)},b=v.normalize=function(S){return String(S).replace(h,".").toLowerCase()},g=v.data={},O=v.NATIVE="N",x=v.POLYFILL="P";o.exports=v},function(o,s,n){var c=n(7),f=n(34),h=n(28),v=n(38),b=n(91),g=n(137),O=b("IE_PROTO"),x=c.Object,S=x.prototype;o.exports=g?x.getPrototypeOf:function(N){var j=v(N);if(f(j,O))return j[O];var R=j.constructor;return h(R)&&j instanceof R?R.prototype:j instanceof x?S:null}},function(o,s,n){var c=n(15),f=n(32),h=n(173);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var v,b=!1,g={};try{(v=c(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(g,[]),b=g instanceof Array}catch{}return function(O,x){return f(O),h(x),b?v(O,x):O.__proto__=x,O}}():void 0)},function(o,s,n){var c=n(7),f=n(116),h=n(28),v=n(50),b=n(27)("toStringTag"),g=c.Object,O=v(function(){return arguments}())=="Arguments";o.exports=f?v:function(x){var S,N,j;return x===void 0?"Undefined":x===null?"Null":typeof(N=function(R,D){try{return R[D]}catch{}}(S=g(x),b))=="string"?N:O?v(S):(j=v(S))=="Object"&&h(S.callee)?"Arguments":j}},function(o,s,n){var c=n(50);o.exports=Array.isArray||function(f){return c(f)=="Array"}},function(o,s,n){var c=n(15),f=n(19),h=n(28),v=n(98),b=n(46),g=n(92),O=function(){},x=[],S=b("Reflect","construct"),N=/^\s*(?:class|function)\b/,j=c(N.exec),R=!N.exec(O),D=function(z){if(!h(z))return!1;try{return S(O,x,z),!0}catch{return!1}};o.exports=!S||f(function(){var z;return D(D.call)||!D(Object)||!D(function(){z=!0})||z})?function(z){if(!h(z))return!1;switch(v(z)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return R||!!j(N,g(z))}:D},function(o,s,n){var c=n(15);o.exports=c([].slice)},function(o,s,n){var c,f,h=n(35),v=n(15),b=n(41),g=n(185),O=n(151),x=n(84),S=n(54),N=n(56).get,j=n(186),R=n(187),D=x("native-string-replace",String.prototype.replace),z=RegExp.prototype.exec,Z=z,fe=v("".charAt),se=v("".indexOf),oe=v("".replace),pe=v("".slice),K=(f=/b*/g,h(z,c=/a/,"a"),h(z,f,"a"),c.lastIndex!==0||f.lastIndex!==0),U=O.BROKEN_CARET,Y=/()??/.exec("")[1]!==void 0;(K||Y||U||j||R)&&(Z=function(W){var L,he,Ce,ee,ce,ye,_e,ie=this,ge=N(ie),Be=b(W),Qe=ge.raw;if(Qe)return Qe.lastIndex=ie.lastIndex,L=h(Z,Qe,Be),ie.lastIndex=Qe.lastIndex,L;var mt=ge.groups,Bt=U&&ie.sticky,bt=h(g,ie),xt=ie.source,tr=0,Oe=Be;if(Bt&&(bt=oe(bt,"y",""),se(bt,"g")===-1&&(bt+="g"),Oe=pe(Be,ie.lastIndex),ie.lastIndex>0&&(!ie.multiline||ie.multiline&&fe(Be,ie.lastIndex-1)!==`
`)&&(xt="(?: "+xt+")",Oe=" "+Oe,tr++),he=new RegExp("^(?:"+xt+")",bt)),Y&&(he=new RegExp("^"+xt+"$(?!\\s)",bt)),K&&(Ce=ie.lastIndex),ee=h(z,Bt?he:ie,Oe),Bt?ee?(ee.input=pe(ee.input,tr),ee[0]=pe(ee[0],tr),ee.index=ie.lastIndex,ie.lastIndex+=ee[0].length):ie.lastIndex=0:K&&ee&&(ie.lastIndex=ie.global?ee.index+ee[0].length:Ce),Y&&ee&&ee.length>1&&h(D,ee[0],he,function(){for(ce=1;ce<arguments.length-2;ce++)arguments[ce]===void 0&&(ee[ce]=void 0)}),ee&&mt)for(ee.groups=ye=S(null),ce=0;ce<mt.length;ce++)ye[(_e=mt[ce])[0]]=ee[_e[1]];return ee}),o.exports=Z},function(o,s,n){var c=n(17),f=n(7),h=n(67),v=n(68),b=n(43),g=n(38),O=n(119),x=n(61),S=n(75)("splice"),N=f.TypeError,j=Math.max,R=Math.min,D=9007199254740991,z="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!S},{splice:function(Z,fe){var se,oe,pe,K,U,Y,W=g(this),L=b(W),he=h(Z,L),Ce=arguments.length;if(Ce===0?se=oe=0:Ce===1?(se=0,oe=L-he):(se=Ce-2,oe=R(j(v(fe),0),L-he)),L+se-oe>D)throw N(z);for(pe=O(W,oe),K=0;K<oe;K++)(U=he+K)in W&&x(pe,K,W[U]);if(pe.length=oe,se<oe){for(K=he;K<L-oe;K++)Y=K+se,(U=K+oe)in W?W[Y]=W[U]:delete W[Y];for(K=L;K>L-oe+se;K--)delete W[K-1]}else if(se>oe)for(K=L-oe;K>he;K--)Y=K+se-1,(U=K+oe-1)in W?W[Y]=W[U]:delete W[Y];for(K=0;K<se;K++)W[K+he]=arguments[K+2];return W.length=L-oe+se,pe}})},function(o,s,n){var c=n(17),f=n(202);c({target:"String",proto:!0,forced:n(203)("anchor")},{anchor:function(h){return f(this,"a","name",h)}})},function(o,s,n){(function(c){var f=typeof c=="object"&&c&&c.Object===Object&&c;s.a=f}).call(this,n(82))},function(o,s,n){(function(c){var f=n(31),h=i&&!i.nodeType&&i,v=h&&typeof c=="object"&&c&&!c.nodeType&&c,b=v&&v.exports===h?f.a.Buffer:void 0,g=b?b.allocUnsafe:void 0;s.a=function(O,x){if(x)return O.slice();var S=O.length,N=g?g(S):new O.constructor(S);return O.copy(N),N}}).call(this,n(121)(o))},function(o,s,n){var c=n(7),f=n(108),h="__core-js_shared__",v=c[h]||f(h,{});o.exports=v},function(o,s,n){var c=n(7),f=Object.defineProperty;o.exports=function(h,v){try{f(c,h,{value:v,configurable:!0,writable:!0})}catch{c[h]=v}return v}},function(o,s,n){var c=n(65),f=n(19);o.exports=!!Object.getOwnPropertySymbols&&!f(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&c&&c<41})},function(o,s){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(o,s,n){var c=n(17),f=n(35),h=n(64),v=n(94),b=n(28),g=n(172),O=n(96),x=n(97),S=n(73),N=n(57),j=n(44),R=n(27),D=n(70),z=n(136),Z=v.PROPER,fe=v.CONFIGURABLE,se=z.IteratorPrototype,oe=z.BUGGY_SAFARI_ITERATORS,pe=R("iterator"),K="keys",U="values",Y="entries",W=function(){return this};o.exports=function(L,he,Ce,ee,ce,ye,_e){g(Ce,he,ee);var ie,ge,Be,Qe=function(re){if(re===ce&&tr)return tr;if(!oe&&re in bt)return bt[re];switch(re){case K:case U:case Y:return function(){return new Ce(this,re)}}return function(){return new Ce(this)}},mt=he+" Iterator",Bt=!1,bt=L.prototype,xt=bt[pe]||bt["@@iterator"]||ce&&bt[ce],tr=!oe&&xt||Qe(ce),Oe=he=="Array"&&bt.entries||xt;if(Oe&&(ie=O(Oe.call(new L)))!==Object.prototype&&ie.next&&(h||O(ie)===se||(x?x(ie,se):b(ie[pe])||j(ie,pe,W)),S(ie,mt,!0,!0),h&&(D[mt]=W)),Z&&ce==U&&xt&&xt.name!==U&&(!h&&fe?N(bt,"name",U):(Bt=!0,tr=function(){return f(xt,this)})),ce)if(ge={values:Qe(U),keys:ye?tr:Qe(K),entries:Qe(Y)},_e)for(Be in ge)(oe||Bt||!(Be in bt))&&j(bt,Be,ge[Be]);else c({target:he,proto:!0,forced:oe||Bt},ge);return h&&!_e||bt[pe]===tr||j(bt,pe,tr,{name:ce}),D[he]=tr,ge}},function(o,s){s.f=Object.getOwnPropertySymbols},function(o,s,n){var c=n(7),f=n(67),h=n(43),v=n(61),b=c.Array,g=Math.max;o.exports=function(O,x,S){for(var N=h(O),j=f(x,N),R=f(S===void 0?N:S,N),D=b(g(R-j,0)),z=0;j<R;j++,z++)v(D,z,O[j]);return D.length=z,D}},function(o,s,n){var c=n(7),f=n(62),h=n(35),v=n(32),b=n(89),g=n(140),O=n(43),x=n(58),S=n(141),N=n(115),j=n(142),R=c.TypeError,D=function(Z,fe){this.stopped=Z,this.result=fe},z=D.prototype;o.exports=function(Z,fe,se){var oe,pe,K,U,Y,W,L,he=se&&se.that,Ce=!(!se||!se.AS_ENTRIES),ee=!(!se||!se.IS_ITERATOR),ce=!(!se||!se.INTERRUPTED),ye=f(fe,he),_e=function(ge){return oe&&j(oe,"normal",ge),new D(!0,ge)},ie=function(ge){return Ce?(v(ge),ce?ye(ge[0],ge[1],_e):ye(ge[0],ge[1])):ce?ye(ge,_e):ye(ge)};if(ee)oe=Z;else{if(!(pe=N(Z)))throw R(b(Z)+" is not iterable");if(g(pe)){for(K=0,U=O(Z);U>K;K++)if((Y=ie(Z[K]))&&x(z,Y))return Y;return new D(!1)}oe=S(Z,pe)}for(W=oe.next;!(L=h(W,oe)).done;){try{Y=ie(L.value)}catch(ge){j(oe,"throw",ge)}if(typeof Y=="object"&&Y&&x(z,Y))return Y}return new D(!1)}},function(o,s,n){var c=n(98),f=n(59),h=n(70),v=n(27)("iterator");o.exports=function(b){if(b!=null)return f(b,v)||f(b,"@@iterator")||h[c(b)]}},function(o,s,n){var c={};c[n(27)("toStringTag")]="z",o.exports=String(c)==="[object z]"},function(o,s,n){var c=n(7),f=n(58),h=c.TypeError;o.exports=function(v,b){if(f(b,v))return v;throw h("Incorrect invocation")}},function(o,s,n){var c=n(27)("iterator"),f=!1;try{var h=0,v={next:function(){return{done:!!h++}},return:function(){f=!0}};v[c]=function(){return this},Array.from(v,function(){throw 2})}catch{}o.exports=function(b,g){if(!g&&!f)return!1;var O=!1;try{var x={};x[c]=function(){return{next:function(){return{done:O=!0}}}},b(x)}catch{}return O}},function(o,s,n){var c=n(181);o.exports=function(f,h){return new(c(f))(h===0?0:h)}},function(o,s,n){var c=n(19);o.exports=function(f,h){var v=[][f];return!!v&&c(function(){v.call(null,h||function(){throw 1},1)})}},function(o,s){o.exports=function(n){if(!n.webpackPolyfill){var c=Object.create(n);c.children||(c.children=[]),Object.defineProperty(c,"loaded",{enumerable:!0,get:function(){return c.l}}),Object.defineProperty(c,"id",{enumerable:!0,get:function(){return c.i}}),Object.defineProperty(c,"exports",{enumerable:!0}),c.webpackPolyfill=1}return c}},function(o,s,n){n(18);var c=n(15),f=n(44),h=n(102),v=n(19),b=n(27),g=n(57),O=b("species"),x=RegExp.prototype;o.exports=function(S,N,j,R){var D=b(S),z=!v(function(){var oe={};return oe[D]=function(){return 7},""[S](oe)!=7}),Z=z&&!v(function(){var oe=!1,pe=/a/;return S==="split"&&((pe={}).constructor={},pe.constructor[O]=function(){return pe},pe.flags="",pe[D]=/./[D]),pe.exec=function(){return oe=!0,null},pe[D](""),!oe});if(!z||!Z||j){var fe=c(/./[D]),se=N(D,""[S],function(oe,pe,K,U,Y){var W=c(oe),L=pe.exec;return L===h||L===x.exec?z&&!Y?{done:!0,value:fe(pe,K,U)}:{done:!0,value:W(K,pe,U)}:{done:!1}});f(String.prototype,S,se[0]),f(x,D,se[1])}R&&g(x[D],"sham",!0)}},function(o,s,n){var c=n(146).charAt;o.exports=function(f,h,v){return h+(v?c(f,h).length:1)}},function(o,s,n){var c=n(7),f=n(35),h=n(32),v=n(28),b=n(50),g=n(102),O=c.TypeError;o.exports=function(x,S){var N=x.exec;if(v(N)){var j=f(N,x,S);return j!==null&&h(j),j}if(b(x)==="RegExp")return f(g,x,S);throw O("RegExp#exec called on incompatible receiver")}},function(o,s,n){var c=n(76),f=n(35),h=n(15),v=n(122),b=n(19),g=n(32),O=n(28),x=n(68),S=n(90),N=n(41),j=n(45),R=n(123),D=n(59),z=n(198),Z=n(124),fe=n(27)("replace"),se=Math.max,oe=Math.min,pe=h([].concat),K=h([].push),U=h("".indexOf),Y=h("".slice),W="a".replace(/./,"$0")==="$0",L=!!/./[fe]&&/./[fe]("a","$0")==="";v("replace",function(he,Ce,ee){var ce=L?"$":"$0";return[function(ye,_e){var ie=j(this),ge=ye==null?void 0:D(ye,fe);return ge?f(ge,ye,ie,_e):f(Ce,N(ie),ye,_e)},function(ye,_e){var ie=g(this),ge=N(ye);if(typeof _e=="string"&&U(_e,ce)===-1&&U(_e,"$<")===-1){var Be=ee(Ce,ie,ge,_e);if(Be.done)return Be.value}var Qe=O(_e);Qe||(_e=N(_e));var mt=ie.global;if(mt){var Bt=ie.unicode;ie.lastIndex=0}for(var bt=[];;){var xt=Z(ie,ge);if(xt===null||(K(bt,xt),!mt))break;N(xt[0])===""&&(ie.lastIndex=R(ge,S(ie.lastIndex),Bt))}for(var tr,Oe="",re=0,be=0;be<bt.length;be++){for(var qe=N((xt=bt[be])[0]),yt=se(oe(x(xt.index),ge.length),0),et=[],Dt=1;Dt<xt.length;Dt++)K(et,(tr=xt[Dt])===void 0?tr:String(tr));var zt=xt.groups;if(Qe){var Zt=pe([qe],et,yt,ge);zt!==void 0&&K(Zt,zt);var Gt=N(c(_e,void 0,Zt))}else Gt=z(qe,ge,yt,et,zt,_e);yt>=re&&(Oe+=Y(ge,re,yt)+Gt,re=yt+qe.length)}return Oe+Y(ge,re)}]},!!b(function(){var he=/./;return he.exec=function(){var Ce=[];return Ce.groups={a:"7"},Ce},"".replace(he,"$<a>")!=="7"})||!W||L)},function(o,s,n){var c=n(50),f=n(7);o.exports=c(f.process)=="process"},function(o,s,n){n(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(o,s,n){var c=n(109);o.exports=c&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(o,s,n){var c=n(36),f=n(19),h=n(86);o.exports=!c&&!f(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},function(o,s,n){var c=n(7),f=n(35),h=n(33),v=n(88),b=n(59),g=n(170),O=n(27),x=c.TypeError,S=O("toPrimitive");o.exports=function(N,j){if(!h(N)||v(N))return N;var R,D=b(N,S);if(D){if(j===void 0&&(j="default"),R=f(D,N,j),!h(R)||v(R))return R;throw x("Can't convert object to primitive value")}return j===void 0&&(j="number"),g(N,j)}},function(o,s,n){var c=n(15),f=n(34),h=n(40),v=n(132).indexOf,b=n(69),g=c([].push);o.exports=function(O,x){var S,N=h(O),j=0,R=[];for(S in N)!f(b,S)&&f(N,S)&&g(R,S);for(;x.length>j;)f(N,S=x[j++])&&(~v(R,S)||g(R,S));return R}},function(o,s,n){var c=n(40),f=n(67),h=n(43),v=function(b){return function(g,O,x){var S,N=c(g),j=h(N),R=f(x,j);if(b&&O!=O){for(;j>R;)if((S=N[R++])!=S)return!0}else for(;j>R;R++)if((b||R in N)&&N[R]===O)return b||R||0;return!b&&-1}};o.exports={includes:v(!0),indexOf:v(!1)}},function(o,s,n){var c=n(46);o.exports=c("document","documentElement")},function(o,s,n){var c=n(34),f=n(135),h=n(51),v=n(37);o.exports=function(b,g){for(var O=f(g),x=v.f,S=h.f,N=0;N<O.length;N++){var j=O[N];c(b,j)||x(b,j,S(g,j))}}},function(o,s,n){var c=n(46),f=n(15),h=n(72),v=n(112),b=n(32),g=f([].concat);o.exports=c("Reflect","ownKeys")||function(O){var x=h.f(b(O)),S=v.f;return S?g(x,S(O)):x}},function(o,s,n){var c,f,h,v=n(19),b=n(28),g=n(54),O=n(96),x=n(44),S=n(27),N=n(64),j=S("iterator"),R=!1;[].keys&&("next"in(h=[].keys())?(f=O(O(h)))!==Object.prototype&&(c=f):R=!0),c==null||v(function(){var D={};return c[j].call(D)!==D})?c={}:N&&(c=g(c)),b(c[j])||x(c,j,function(){return this}),o.exports={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:R}},function(o,s,n){var c=n(19);o.exports=!c(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},function(o,s,n){var c=n(17),f=n(15),h=n(69),v=n(33),b=n(34),g=n(37).f,O=n(72),x=n(139),S=n(175),N=n(85),j=n(177),R=!1,D=N("meta"),z=0,Z=function(se){g(se,D,{value:{objectID:"O"+z++,weakData:{}}})},fe=o.exports={enable:function(){fe.enable=function(){},R=!0;var se=O.f,oe=f([].splice),pe={};pe[D]=1,se(pe).length&&(O.f=function(K){for(var U=se(K),Y=0,W=U.length;Y<W;Y++)if(U[Y]===D){oe(U,Y,1);break}return U},c({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},fastKey:function(se,oe){if(!v(se))return typeof se=="symbol"?se:(typeof se=="string"?"S":"P")+se;if(!b(se,D)){if(!S(se))return"F";if(!oe)return"E";Z(se)}return se[D].objectID},getWeakData:function(se,oe){if(!b(se,D)){if(!S(se))return!0;if(!oe)return!1;Z(se)}return se[D].weakData},onFreeze:function(se){return j&&R&&S(se)&&!b(se,D)&&Z(se),se}};h[D]=!0},function(o,s,n){var c=n(50),f=n(40),h=n(72).f,v=n(113),b=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];o.exports.f=function(g){return b&&c(g)=="Window"?function(O){try{return h(O)}catch{return v(b)}}(g):h(f(g))}},function(o,s,n){var c=n(27),f=n(70),h=c("iterator"),v=Array.prototype;o.exports=function(b){return b!==void 0&&(f.Array===b||v[h]===b)}},function(o,s,n){var c=n(7),f=n(35),h=n(55),v=n(32),b=n(89),g=n(115),O=c.TypeError;o.exports=function(x,S){var N=arguments.length<2?g(x):S;if(h(N))return v(f(N,x));throw O(b(x)+" is not iterable")}},function(o,s,n){var c=n(35),f=n(32),h=n(59);o.exports=function(v,b,g){var O,x;f(v);try{if(!(O=h(v,"return"))){if(b==="throw")throw g;return g}O=c(O,v)}catch(S){x=!0,O=S}if(b==="throw")throw g;if(x)throw O;return f(O),g}},function(o,s,n){var c=n(28),f=n(33),h=n(97);o.exports=function(v,b,g){var O,x;return h&&c(O=b.constructor)&&O!==g&&f(x=O.prototype)&&x!==g.prototype&&h(v,x),v}},function(o,s,n){var c=n(44);o.exports=function(f,h,v){for(var b in h)c(f,b,h[b],v);return f}},function(o,s,n){var c=n(46),f=n(37),h=n(27),v=n(36),b=h("species");o.exports=function(g){var O=c(g),x=f.f;v&&O&&!O[b]&&x(O,b,{configurable:!0,get:function(){return this}})}},function(o,s,n){var c=n(15),f=n(68),h=n(41),v=n(45),b=c("".charAt),g=c("".charCodeAt),O=c("".slice),x=function(S){return function(N,j){var R,D,z=h(v(N)),Z=f(j),fe=z.length;return Z<0||Z>=fe?S?"":void 0:(R=g(z,Z))<55296||R>56319||Z+1===fe||(D=g(z,Z+1))<56320||D>57343?S?b(z,Z):R:S?O(z,Z,Z+2):D-56320+(R-55296<<10)+65536}};o.exports={codeAt:x(!1),charAt:x(!0)}},function(o,s){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(o,s,n){var c=n(86)("span").classList,f=c&&c.constructor&&c.constructor.prototype;o.exports=f===Object.prototype?void 0:f},function(o,s,n){var c=n(27);s.f=c},function(o,s,n){var c=n(182),f=n(34),h=n(149),v=n(37).f;o.exports=function(b){var g=c.Symbol||(c.Symbol={});f(g,b)||v(g,b,{value:h.f(b)})}},function(o,s,n){var c=n(19),f=n(7).RegExp,h=c(function(){var g=f("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),v=h||c(function(){return!f("a","y").sticky}),b=h||c(function(){var g=f("^r","gy");return g.lastIndex=2,g.exec("str")!=null});o.exports={BROKEN_CARET:b,MISSED_STICKY:v,UNSUPPORTED_Y:h}},function(o,s,n){var c=n(17),f=n(132).includes,h=n(83);c({target:"Array",proto:!0},{includes:function(v){return f(this,v,arguments.length>1?arguments[1]:void 0)}}),h("includes")},function(o,s,n){var c=n(17),f=n(15),h=n(194),v=n(45),b=n(41),g=n(195),O=f("".indexOf);c({target:"String",proto:!0,forced:!g("includes")},{includes:function(x){return!!~O(b(v(this)),b(h(x)),arguments.length>1?arguments[1]:void 0)}})},function(o,s,n){var c=n(33),f=n(50),h=n(27)("match");o.exports=function(v){var b;return c(v)&&((b=v[h])!==void 0?!!b:f(v)=="RegExp")}},function(o,s){var n,c,f=o.exports={};function h(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}function b(z){if(n===setTimeout)return setTimeout(z,0);if((n===h||!n)&&setTimeout)return n=setTimeout,setTimeout(z,0);try{return n(z,0)}catch{try{return n.call(null,z,0)}catch{return n.call(this,z,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:h}catch{n=h}try{c=typeof clearTimeout=="function"?clearTimeout:v}catch{c=v}})();var g,O=[],x=!1,S=-1;function N(){x&&g&&(x=!1,g.length?O=g.concat(O):S=-1,O.length&&j())}function j(){if(!x){var z=b(N);x=!0;for(var Z=O.length;Z;){for(g=O,O=[];++S<Z;)g&&g[S].run();S=-1,Z=O.length}g=null,x=!1,function(fe){if(c===clearTimeout)return clearTimeout(fe);if((c===v||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(fe);try{c(fe)}catch{try{return c.call(null,fe)}catch{return c.call(this,fe)}}}(z)}}function R(z,Z){this.fun=z,this.array=Z}function D(){}f.nextTick=function(z){var Z=new Array(arguments.length-1);if(arguments.length>1)for(var fe=1;fe<arguments.length;fe++)Z[fe-1]=arguments[fe];O.push(new R(z,Z)),O.length!==1||x||b(j)},R.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=D,f.addListener=D,f.once=D,f.off=D,f.removeListener=D,f.removeAllListeners=D,f.emit=D,f.prependListener=D,f.prependOnceListener=D,f.listeners=function(z){return[]},f.binding=function(z){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(z){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(o,s,n){var c=n(32),f=n(157),h=n(27)("species");o.exports=function(v,b){var g,O=c(v).constructor;return O===void 0||(g=c(O)[h])==null?b:f(g)}},function(o,s,n){var c=n(7),f=n(100),h=n(89),v=c.TypeError;o.exports=function(b){if(f(b))return b;throw v(h(b)+" is not a constructor")}},function(o,s,n){var c=n(17),f=n(159).trim;c({target:"String",proto:!0,forced:n(196)("trim")},{trim:function(){return f(this)}})},function(o,s,n){var c=n(15),f=n(45),h=n(41),v=n(160),b=c("".replace),g="["+v+"]",O=RegExp("^"+g+g+"*"),x=RegExp(g+g+"*$"),S=function(N){return function(j){var R=h(f(j));return 1&N&&(R=b(R,O,"")),2&N&&(R=b(R,x,"")),R}};o.exports={start:S(1),end:S(2),trim:S(3)}},function(o,s){o.exports=`	
\v\f\r \u2028\u2029\uFEFF`},function(o,s,n){var c=n(35),f=n(122),h=n(32),v=n(90),b=n(41),g=n(45),O=n(59),x=n(123),S=n(124);f("match",function(N,j,R){return[function(D){var z=g(this),Z=D==null?void 0:O(D,N);return Z?c(Z,D,z):new RegExp(D)[N](b(z))},function(D){var z=h(this),Z=b(D),fe=R(j,z,Z);if(fe.done)return fe.value;if(!z.global)return S(z,Z);var se=z.unicode;z.lastIndex=0;for(var oe,pe=[],K=0;(oe=S(z,Z))!==null;){var U=b(oe[0]);pe[K]=U,U===""&&(z.lastIndex=x(Z,v(z.lastIndex),se)),K++}return K===0?null:pe}]})},function(o,s,n){var c=n(17),f=Math.hypot,h=Math.abs,v=Math.sqrt;c({target:"Math",stat:!0,forced:!!f&&f(1/0,NaN)!==1/0},{hypot:function(b,g){for(var O,x,S=0,N=0,j=arguments.length,R=0;N<j;)R<(O=h(arguments[N++]))?(S=S*(x=R/O)*x+1,R=O):S+=O>0?(x=O/R)*x:O;return R===1/0?1/0:R*v(S)}})},function(o,s,n){var c,f,h,v,b=n(7),g=n(76),O=n(62),x=n(28),S=n(34),N=n(19),j=n(133),R=n(101),D=n(86),z=n(164),Z=n(126),fe=b.setImmediate,se=b.clearImmediate,oe=b.process,pe=b.Dispatch,K=b.Function,U=b.MessageChannel,Y=b.String,W=0,L={},he="onreadystatechange";try{c=b.location}catch{}var Ce=function(_e){if(S(L,_e)){var ie=L[_e];delete L[_e],ie()}},ee=function(_e){return function(){Ce(_e)}},ce=function(_e){Ce(_e.data)},ye=function(_e){b.postMessage(Y(_e),c.protocol+"//"+c.host)};fe&&se||(fe=function(_e){var ie=R(arguments,1);return L[++W]=function(){g(x(_e)?_e:K(_e),void 0,ie)},f(W),W},se=function(_e){delete L[_e]},Z?f=function(_e){oe.nextTick(ee(_e))}:pe&&pe.now?f=function(_e){pe.now(ee(_e))}:U&&!z?(v=(h=new U).port2,h.port1.onmessage=ce,f=O(v.postMessage,v)):b.addEventListener&&x(b.postMessage)&&!b.importScripts&&c&&c.protocol!=="file:"&&!N(ye)?(f=ye,b.addEventListener("message",ce,!1)):f=he in D("script")?function(_e){j.appendChild(D("script")).onreadystatechange=function(){j.removeChild(this),Ce(_e)}}:function(_e){setTimeout(ee(_e),0)}),o.exports={set:fe,clear:se}},function(o,s,n){var c=n(53);o.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(c)},function(o,s,n){var c=n(55),f=function(h){var v,b;this.promise=new h(function(g,O){if(v!==void 0||b!==void 0)throw TypeError("Bad Promise constructor");v=g,b=O}),this.resolve=c(v),this.reject=c(b)};o.exports.f=function(h){return new f(h)}},function(o,s,n){s.a=function(){return!1}},function(o,s,n){(function(c){n.d(s,"a",function(){return oe});var f=n(1);function h(U){throw new Error("[mobx-utils] "+U)}function v(U,Y){Y===void 0&&(Y="Illegal state"),U||h(Y)}var b=function(U){return U&&U!==Object.prototype&&Object.getOwnPropertyNames(U).concat(b(Object.getPrototypeOf(U))||[])},g=function(U){return function(Y){var W=b(Y);return W.filter(function(L,he){return W.indexOf(L)===he})}(U).filter(function(Y){return Y!=="constructor"&&!~Y.indexOf("__")})},O="pending",x="fulfilled",S="rejected";function N(U){switch(this.state){case O:return U.pending&&U.pending(this.value);case S:return U.rejected&&U.rejected(this.value);case x:return U.fulfilled?U.fulfilled(this.value):this.value}}function j(U,Y){if(v(arguments.length<=2,"fromPromise expects up to two arguments"),v(typeof U=="function"||typeof U=="object"&&U&&typeof U.then=="function","Please pass a promise or function to fromPromise"),U.isPromiseBasedObservable===!0)return U;typeof U=="function"&&(U=new Promise(U));var W=U;U.then(Object(f.k)("observableFromPromise-resolve",function(he){W.value=he,W.state=x}),Object(f.k)("observableFromPromise-reject",function(he){W.value=he,W.state=S})),W.isPromiseBasedObservable=!0,W.case=N;var L=Y&&Y.state===x?Y.value:void 0;return Object(f.q)(W,{value:L,state:O},{},{deep:!1}),W}(function(U){U.reject=Object(f.k)("fromPromise.reject",function(Y){var W=U(Promise.reject(Y));return W.state=S,W.value=Y,W}),U.resolve=Object(f.k)("fromPromise.resolve",function(Y){Y===void 0&&(Y=void 0);var W=U(Promise.resolve(Y));return W.state=x,W.value=Y,W})})(j||(j={}));var R=function(U,Y,W,L){var he,Ce=arguments.length,ee=Ce<3?Y:L===null?L=Object.getOwnPropertyDescriptor(Y,W):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(U,Y,W,L);else for(var ce=U.length-1;ce>=0;ce--)(he=U[ce])&&(ee=(Ce<3?he(ee):Ce>3?he(Y,W,ee):he(Y,W))||ee);return Ce>3&&ee&&Object.defineProperty(Y,W,ee),ee};(function(){function U(Y,W){var L=this;Object(f.G)(function(){L.current=W,L.subscription=Y.subscribe(L)})}U.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},U.prototype.next=function(Y){this.current=Y},U.prototype.complete=function(){this.dispose()},U.prototype.error=function(Y){this.current=Y,this.dispose()},R([f.C.ref],U.prototype,"current",void 0),R([f.k.bound],U.prototype,"next",null),R([f.k.bound],U.prototype,"complete",null),R([f.k.bound],U.prototype,"error",null)})();var D=function(){return D=Object.assign||function(U){for(var Y,W=1,L=arguments.length;W<L;W++)for(var he in Y=arguments[W])Object.prototype.hasOwnProperty.call(Y,he)&&(U[he]=Y[he]);return U},D.apply(this,arguments)},z=function(U,Y,W,L){var he,Ce=arguments.length,ee=Ce<3?Y:L===null?L=Object.getOwnPropertyDescriptor(Y,W):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(U,Y,W,L);else for(var ce=U.length-1;ce>=0;ce--)(he=U[ce])&&(ee=(Ce<3?he(ee):Ce>3?he(Y,W,ee):he(Y,W))||ee);return Ce>3&&ee&&Object.defineProperty(Y,W,ee),ee},Z=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function U(Y){var W=this;this.model=Y,this.localValues=f.C.map({}),this.localComputedValues=f.C.map({}),this.isPropertyDirty=function(L){return W.localValues.has(L)},v(Object(f.A)(Y),"createViewModel expects an observable object"),g(Y).forEach(function(L){if(L!==f.a&&L!=="__mobxDidRunLazyInitializers"){if(v(Z.indexOf(L)===-1,"The propertyname "+L+" is reserved and cannot be used with viewModels"),Object(f.w)(Y,L)){var he=Object(f.h)(Y,L).derivation;W.localComputedValues.set(L,Object(f.m)(he.bind(W)))}var Ce=Object.getOwnPropertyDescriptor(Y,L),ee=Ce?{enumerable:Ce.enumerable}:{};Object.defineProperty(W,L,D(D({},ee),{configurable:!0,get:function(){return Object(f.w)(Y,L)?W.localComputedValues.get(L).get():W.isPropertyDirty(L)?W.localValues.get(L):W.model[L]},set:Object(f.k)(function(ce){ce!==W.model[L]?W.localValues.set(L,ce):W.localValues.delete(L)})}))}})}Object.defineProperty(U.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),U.prototype.submit=function(){var Y=this;Object(f.B)(this.localValues).forEach(function(W){var L=Y.localValues.get(W),he=Y.model[W];Object(f.y)(he)?he.replace(L):Object(f.z)(he)?(he.clear(),he.merge(L)):Object(f.v)(L)||(Y.model[W]=L)}),this.localValues.clear()},U.prototype.reset=function(){this.localValues.clear()},U.prototype.resetProperty=function(Y){this.localValues.delete(Y)},z([f.m],U.prototype,"isDirty",null),z([f.m],U.prototype,"changedValues",null),z([f.k.bound],U.prototype,"submit",null),z([f.k.bound],U.prototype,"reset",null),z([f.k.bound],U.prototype,"resetProperty",null)})();function fe(U){if(!U)return"ROOT";for(var Y=[];U.parent;)Y.push(U.path),U=U.parent;return Y.reverse().join("/")}function se(U){return Object(f.A)(U)||Object(f.y)(U)||Object(f.z)(U)}function oe(U,Y){var W=new WeakMap;function L(ee){var ce=W.get(ee.object);(function(ye,_e){switch(ye.type){case"add":he(ye.newValue,_e,ye.name);break;case"update":Ce(ye.oldValue),he(ye.newValue,_e,ye.name||""+ye.index);break;case"remove":case"delete":Ce(ye.oldValue);break;case"splice":ye.removed.map(Ce),ye.added.forEach(function(Be,Qe){return he(Be,_e,""+(ye.index+Qe))});for(var ie=ye.index+ye.addedCount;ie<ye.object.length;ie++)if(se(ye.object[ie])){var ge=W.get(ye.object[ie]);ge&&(ge.path=""+ie)}}})(ee,ce),Y(ee,fe(ce),U)}function he(ee,ce,ye){if(se(ee)){var _e=W.get(ee);if(_e){if(_e.parent!==ce||_e.path!==ye)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+fe(ce)+"/"+ye+"', but it already exists at '"+fe(_e.parent)+"/"+_e.path+"'")}else{var ie={parent:ce,path:ye,dispose:Object(f.D)(ee,L)};W.set(ee,ie),Object(f.p)(ee).forEach(function(ge){var Be=ge[0];return he(ge[1],ie,Be)})}}}function Ce(ee){if(se(ee)){var ce=W.get(ee);if(!ce)return;W.delete(ee),ce.dispose(),Object(f.L)(ee).forEach(Ce)}}return he(U,void 0,""),function(){Ce(U)}}var pe,K=(pe=function(U,Y){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,L){W.__proto__=L}||function(W,L){for(var he in L)L.hasOwnProperty(he)&&(W[he]=L[he])},pe(U,Y)},function(U,Y){function W(){this.constructor=U}pe(U,Y),U.prototype=Y===null?Object.create(Y):(W.prototype=Y.prototype,new W)});(function(U){function Y(W,L,he){var Ce=he===void 0?{}:he,ee=Ce.name,ce=ee===void 0?"ogm"+(1e3*Math.random()|0):ee,ye=Ce.keyToName,_e=ye===void 0?function(Be){return""+Be}:ye,ie=U.call(this)||this;ie._keyToName=_e,ie._groupBy=L,ie._ogmInfoKey=Symbol("ogmInfo"+ce),ie._base=W;for(var ge=0;ge<W.length;ge++)ie._addItem(W[ge]);return ie._disposeBaseObserver=Object(f.D)(ie._base,function(Be){if(Be.type==="splice")Object(f.J)(function(){for(var Qe=0,mt=Be.removed;Qe<mt.length;Qe++){var Bt=mt[Qe];ie._removeItem(Bt)}for(var bt=0,xt=Be.added;bt<xt.length;bt++){var tr=xt[bt];ie._addItem(tr)}});else{if(Be.type!=="update")throw new Error("illegal state");Object(f.J)(function(){ie._removeItem(Be.oldValue),ie._addItem(Be.newValue)})}}),ie}K(Y,U),Y.prototype.clear=function(){throw new Error("not supported")},Y.prototype.delete=function(W){throw new Error("not supported")},Y.prototype.set=function(W,L){throw new Error("not supported")},Y.prototype.dispose=function(){this._disposeBaseObserver();for(var W=0;W<this._base.length;W++){var L=this._base[W];L[this._ogmInfoKey].reaction(),delete L[this._ogmInfoKey]}},Y.prototype._getGroupArr=function(W){var L=U.prototype.get.call(this,W);return L===void 0&&(L=Object(f.C)([],{name:"GroupArray["+this._keyToName(W)+"]",deep:!1}),U.prototype.set.call(this,W,L)),L},Y.prototype._removeFromGroupArr=function(W,L){var he=U.prototype.get.call(this,W);he.length===1?U.prototype.delete.call(this,W):(L===he.length-1||(he[L]=he[he.length-1],he[L][this._ogmInfoKey].groupArrIndex=L),he.length--)},Y.prototype._addItem=function(W){var L=this,he=this._groupBy(W),Ce=this._getGroupArr(he),ee={groupByValue:he,groupArrIndex:Ce.length,reaction:Object(f.F)(function(){return L._groupBy(W)},function(ce,ye){var _e=W[L._ogmInfoKey];L._removeFromGroupArr(_e.groupByValue,_e.groupArrIndex);var ie=L._getGroupArr(ce),ge=ie.length;ie.push(W),_e.groupByValue=ce,_e.groupArrIndex=ge})};Object.defineProperty(W,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ee}),Ce.push(W)},Y.prototype._removeItem=function(W){var L=W[this._ogmInfoKey];this._removeFromGroupArr(L.groupByValue,L.groupArrIndex),L.reaction(),delete W[this._ogmInfoKey]}})(f.b),function(){function U(Y,W){this.base=Y,this.args=W,this.closestIdx=0,this.isDisposed=!1;for(var L=this.closest=this.root=Y,he=0;he<this.args.length-1&&(L=L.get(W[he]));he++)this.closest=L;this.closestIdx=he}return U.prototype.exists=function(){this.assertNotDisposed();var Y=this.args.length;return this.closestIdx>=Y-1&&this.closest.has(this.args[Y-1])},U.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},U.prototype.set=function(Y){this.assertNotDisposed();for(var W=this.args.length,L=this.closest,he=this.closestIdx;he<W-1;he++){var Ce=new Map;L.set(this.args[he],Ce),L=Ce}this.closestIdx=W-1,this.closest=L,L.set(this.args[W-1],Y)},U.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var Y=this.args.length;this.closest.delete(this.args[Y-1]);for(var W=this.root,L=[W],he=0;he<Y-1;he++)W=W.get(this.args[he]),L.push(W);for(he=L.length-1;he>0;he--)L[he].size===0&&L[he-1].delete(this.args[he-1]);this.isDisposed=!0},U.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},U}(),Promise.resolve(),typeof queueMicrotask<"u"||c!==void 0&&c.nextTick}).call(this,n(155))},function(o,s,n){var c;(function(f,h,v){if(f){for(var b,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},O={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},N=1;N<20;++N)g[111+N]="f"+N;for(N=0;N<=9;++N)g[N+96]=N.toString();se.prototype.bind=function(oe,pe,K){var U=this;return oe=oe instanceof Array?oe:[oe],U._bindMultiple.call(U,oe,pe,K),U},se.prototype.unbind=function(oe,pe){return this.bind.call(this,oe,function(){},pe)},se.prototype.trigger=function(oe,pe){var K=this;return K._directMap[oe+":"+pe]&&K._directMap[oe+":"+pe]({},oe),K},se.prototype.reset=function(){var oe=this;return oe._callbacks={},oe._directMap={},oe},se.prototype.stopCallback=function(oe,pe){if((" "+pe.className+" ").indexOf(" mousetrap ")>-1||fe(pe,this.target))return!1;if("composedPath"in oe&&typeof oe.composedPath=="function"){var K=oe.composedPath()[0];K!==oe.target&&(pe=K)}return pe.tagName=="INPUT"||pe.tagName=="SELECT"||pe.tagName=="TEXTAREA"||pe.isContentEditable},se.prototype.handleKey=function(){var oe=this;return oe._handleKey.apply(oe,arguments)},se.addKeycodes=function(oe){for(var pe in oe)oe.hasOwnProperty(pe)&&(g[pe]=oe[pe]);b=null},se.init=function(){var oe=se(h);for(var pe in oe)pe.charAt(0)!=="_"&&(se[pe]=function(K){return function(){return oe[K].apply(oe,arguments)}}(pe))},se.init(),f.Mousetrap=se,o.exports&&(o.exports=se),(c=function(){return se}.call(s,n,s,o))===void 0||(o.exports=c)}function j(oe,pe,K){oe.addEventListener?oe.addEventListener(pe,K,!1):oe.attachEvent("on"+pe,K)}function R(oe){if(oe.type=="keypress"){var pe=String.fromCharCode(oe.which);return oe.shiftKey||(pe=pe.toLowerCase()),pe}return g[oe.which]?g[oe.which]:O[oe.which]?O[oe.which]:String.fromCharCode(oe.which).toLowerCase()}function D(oe){return oe=="shift"||oe=="ctrl"||oe=="alt"||oe=="meta"}function z(oe,pe,K){return K||(K=function(){if(!b)for(var U in b={},g)U>95&&U<112||g.hasOwnProperty(U)&&(b[g[U]]=U);return b}()[oe]?"keydown":"keypress"),K=="keypress"&&pe.length&&(K="keydown"),K}function Z(oe,pe){var K,U,Y,W=[];for(K=function(L){return L==="+"?["+"]:(L=L.replace(/\+{2}/g,"+plus")).split("+")}(oe),Y=0;Y<K.length;++Y)U=K[Y],S[U]&&(U=S[U]),pe&&pe!="keypress"&&x[U]&&(U=x[U],W.push("shift")),D(U)&&W.push(U);return{key:U,modifiers:W,action:pe=z(U,W,pe)}}function fe(oe,pe){return oe!==null&&oe!==h&&(oe===pe||fe(oe.parentNode,pe))}function se(oe){var pe=this;if(oe=oe||h,!(pe instanceof se))return new se(oe);pe.target=oe,pe._callbacks={},pe._directMap={};var K,U={},Y=!1,W=!1,L=!1;function he(ie){ie=ie||{};var ge,Be=!1;for(ge in U)ie[ge]?Be=!0:U[ge]=0;Be||(L=!1)}function Ce(ie,ge,Be,Qe,mt,Bt){var bt,xt,tr,Oe,re=[],be=Be.type;if(!pe._callbacks[ie])return[];for(be=="keyup"&&D(ie)&&(ge=[ie]),bt=0;bt<pe._callbacks[ie].length;++bt)if(xt=pe._callbacks[ie][bt],(Qe||!xt.seq||U[xt.seq]==xt.level)&&be==xt.action&&(be=="keypress"&&!Be.metaKey&&!Be.ctrlKey||(tr=ge,Oe=xt.modifiers,tr.sort().join(",")===Oe.sort().join(",")))){var qe=!Qe&&xt.combo==mt,yt=Qe&&xt.seq==Qe&&xt.level==Bt;(qe||yt)&&pe._callbacks[ie].splice(bt,1),re.push(xt)}return re}function ee(ie,ge,Be,Qe){pe.stopCallback(ge,ge.target||ge.srcElement,Be,Qe)||ie(ge,Be)===!1&&(function(mt){mt.preventDefault?mt.preventDefault():mt.returnValue=!1}(ge),function(mt){mt.stopPropagation?mt.stopPropagation():mt.cancelBubble=!0}(ge))}function ce(ie){typeof ie.which!="number"&&(ie.which=ie.keyCode);var ge=R(ie);ge&&(ie.type!="keyup"||Y!==ge?pe.handleKey(ge,function(Be){var Qe=[];return Be.shiftKey&&Qe.push("shift"),Be.altKey&&Qe.push("alt"),Be.ctrlKey&&Qe.push("ctrl"),Be.metaKey&&Qe.push("meta"),Qe}(ie),ie):Y=!1)}function ye(ie,ge,Be,Qe){function mt(tr){return function(){L=tr,++U[ie],clearTimeout(K),K=setTimeout(he,1e3)}}function Bt(tr){ee(Be,tr,ie),Qe!=="keyup"&&(Y=R(tr)),setTimeout(he,10)}U[ie]=0;for(var bt=0;bt<ge.length;++bt){var xt=bt+1===ge.length?Bt:mt(Qe||Z(ge[bt+1]).action);_e(ge[bt],xt,Qe,ie,bt)}}function _e(ie,ge,Be,Qe,mt){pe._directMap[ie+":"+Be]=ge;var Bt,bt=(ie=ie.replace(/\s+/g," ")).split(" ");bt.length>1?ye(ie,bt,ge,Be):(Bt=Z(ie,Be),pe._callbacks[Bt.key]=pe._callbacks[Bt.key]||[],Ce(Bt.key,Bt.modifiers,{type:Bt.action},Qe,ie,mt),pe._callbacks[Bt.key][Qe?"unshift":"push"]({callback:ge,modifiers:Bt.modifiers,action:Bt.action,seq:Qe,level:mt,combo:ie}))}pe._handleKey=function(ie,ge,Be){var Qe,mt=Ce(ie,ge,Be),Bt={},bt=0,xt=!1;for(Qe=0;Qe<mt.length;++Qe)mt[Qe].seq&&(bt=Math.max(bt,mt[Qe].level));for(Qe=0;Qe<mt.length;++Qe)if(mt[Qe].seq){if(mt[Qe].level!=bt)continue;xt=!0,Bt[mt[Qe].seq]=1,ee(mt[Qe].callback,Be,mt[Qe].combo,mt[Qe].seq)}else xt||ee(mt[Qe].callback,Be,mt[Qe].combo);var tr=Be.type=="keypress"&&W;Be.type!=L||D(ie)||tr||he(Bt),W=xt&&Be.type=="keydown"},pe._bindMultiple=function(ie,ge,Be){for(var Qe=0;Qe<ie.length;++Qe)_e(ie[Qe],ge,Be)},j(oe,"keypress",ce),j(oe,"keydown",ce),j(oe,"keyup",ce)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(o,s,n){var c=n(36),f=n(37),h=n(32),v=n(40),b=n(66);o.exports=c?Object.defineProperties:function(g,O){h(g);for(var x,S=v(O),N=b(O),j=N.length,R=0;j>R;)f.f(g,x=N[R++],S[x]);return g}},function(o,s,n){var c=n(7),f=n(35),h=n(28),v=n(33),b=c.TypeError;o.exports=function(g,O){var x,S;if(O==="string"&&h(x=g.toString)&&!v(S=f(x,g))||h(x=g.valueOf)&&!v(S=f(x,g))||O!=="string"&&h(x=g.toString)&&!v(S=f(x,g)))return S;throw b("Can't convert object to primitive value")}},function(o,s,n){var c=n(7),f=n(28),h=n(92),v=c.WeakMap;o.exports=f(v)&&/native code/.test(h(v))},function(o,s,n){var c=n(136).IteratorPrototype,f=n(54),h=n(71),v=n(73),b=n(70),g=function(){return this};o.exports=function(O,x,S,N){var j=x+" Iterator";return O.prototype=f(c,{next:h(+!N,S)}),v(O,j,!1,!0),b[j]=g,O}},function(o,s,n){var c=n(7),f=n(28),h=c.String,v=c.TypeError;o.exports=function(b){if(typeof b=="object"||f(b))return b;throw v("Can't set "+h(b)+" as a prototype")}},function(o,s,n){var c=n(17),f=n(7),h=n(15),v=n(95),b=n(44),g=n(138),O=n(114),x=n(117),S=n(28),N=n(33),j=n(19),R=n(118),D=n(73),z=n(143);o.exports=function(Z,fe,se){var oe=Z.indexOf("Map")!==-1,pe=Z.indexOf("Weak")!==-1,K=oe?"set":"add",U=f[Z],Y=U&&U.prototype,W=U,L={},he=function(ie){var ge=h(Y[ie]);b(Y,ie,ie=="add"?function(Be){return ge(this,Be===0?0:Be),this}:ie=="delete"?function(Be){return!(pe&&!N(Be))&&ge(this,Be===0?0:Be)}:ie=="get"?function(Be){return pe&&!N(Be)?void 0:ge(this,Be===0?0:Be)}:ie=="has"?function(Be){return!(pe&&!N(Be))&&ge(this,Be===0?0:Be)}:function(Be,Qe){return ge(this,Be===0?0:Be,Qe),this})};if(v(Z,!S(U)||!(pe||Y.forEach&&!j(function(){new U().entries().next()}))))W=se.getConstructor(fe,Z,oe,K),g.enable();else if(v(Z,!0)){var Ce=new W,ee=Ce[K](pe?{}:-0,1)!=Ce,ce=j(function(){Ce.has(1)}),ye=R(function(ie){new U(ie)}),_e=!pe&&j(function(){for(var ie=new U,ge=5;ge--;)ie[K](ge,ge);return!ie.has(-0)});ye||((W=fe(function(ie,ge){x(ie,Y);var Be=z(new U,ie,W);return ge!=null&&O(ge,Be[K],{that:Be,AS_ENTRIES:oe}),Be})).prototype=Y,Y.constructor=W),(ce||_e)&&(he("delete"),he("has"),oe&&he("get")),(_e||ee)&&he(K),pe&&Y.clear&&delete Y.clear}return L[Z]=W,c({global:!0,forced:W!=U},L),D(W,Z),pe||se.setStrong(W,Z,oe),W}},function(o,s,n){var c=n(19),f=n(33),h=n(50),v=n(176),b=Object.isExtensible,g=c(function(){});o.exports=g||v?function(O){return!!f(O)&&(!v||h(O)!="ArrayBuffer")&&(!b||b(O))}:b},function(o,s,n){var c=n(19);o.exports=c(function(){if(typeof ArrayBuffer=="function"){var f=new ArrayBuffer(8);Object.isExtensible(f)&&Object.defineProperty(f,"a",{value:8})}})},function(o,s,n){var c=n(19);o.exports=!c(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(o,s,n){var c=n(37).f,f=n(54),h=n(144),v=n(62),b=n(117),g=n(114),O=n(111),x=n(145),S=n(36),N=n(138).fastKey,j=n(56),R=j.set,D=j.getterFor;o.exports={getConstructor:function(z,Z,fe,se){var oe=z(function(W,L){b(W,pe),R(W,{type:Z,index:f(null),first:void 0,last:void 0,size:0}),S||(W.size=0),L!=null&&g(L,W[se],{that:W,AS_ENTRIES:fe})}),pe=oe.prototype,K=D(Z),U=function(W,L,he){var Ce,ee,ce=K(W),ye=Y(W,L);return ye?ye.value=he:(ce.last=ye={index:ee=N(L,!0),key:L,value:he,previous:Ce=ce.last,next:void 0,removed:!1},ce.first||(ce.first=ye),Ce&&(Ce.next=ye),S?ce.size++:W.size++,ee!=="F"&&(ce.index[ee]=ye)),W},Y=function(W,L){var he,Ce=K(W),ee=N(L);if(ee!=="F")return Ce.index[ee];for(he=Ce.first;he;he=he.next)if(he.key==L)return he};return h(pe,{clear:function(){for(var W=K(this),L=W.index,he=W.first;he;)he.removed=!0,he.previous&&(he.previous=he.previous.next=void 0),delete L[he.index],he=he.next;W.first=W.last=void 0,S?W.size=0:this.size=0},delete:function(W){var L=this,he=K(L),Ce=Y(L,W);if(Ce){var ee=Ce.next,ce=Ce.previous;delete he.index[Ce.index],Ce.removed=!0,ce&&(ce.next=ee),ee&&(ee.previous=ce),he.first==Ce&&(he.first=ee),he.last==Ce&&(he.last=ce),S?he.size--:L.size--}return!!Ce},forEach:function(W){for(var L,he=K(this),Ce=v(W,arguments.length>1?arguments[1]:void 0);L=L?L.next:he.first;)for(Ce(L.value,L.key,this);L&&L.removed;)L=L.previous},has:function(W){return!!Y(this,W)}}),h(pe,fe?{get:function(W){var L=Y(this,W);return L&&L.value},set:function(W,L){return U(this,W===0?0:W,L)}}:{add:function(W){return U(this,W=W===0?0:W,W)}}),S&&c(pe,"size",{get:function(){return K(this).size}}),oe},setStrong:function(z,Z,fe){var se=Z+" Iterator",oe=D(Z),pe=D(se);O(z,Z,function(K,U){R(this,{type:se,target:K,state:oe(K),kind:U,last:void 0})},function(){for(var K=pe(this),U=K.kind,Y=K.last;Y&&Y.removed;)Y=Y.previous;return K.target&&(K.last=Y=Y?Y.next:K.state.first)?U=="keys"?{value:Y.key,done:!1}:U=="values"?{value:Y.value,done:!1}:{value:[Y.key,Y.value],done:!1}:(K.target=void 0,{value:void 0,done:!0})},fe?"entries":"values",!fe,!0),x(Z)}}},function(o,s,n){var c=n(116),f=n(98);o.exports=c?{}.toString:function(){return"[object "+f(this)+"]"}},function(o,s,n){var c=n(74).forEach,f=n(120)("forEach");o.exports=f?[].forEach:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}},function(o,s,n){var c=n(7),f=n(99),h=n(100),v=n(33),b=n(27)("species"),g=c.Array;o.exports=function(O){var x;return f(O)&&(x=O.constructor,(h(x)&&(x===g||f(x.prototype))||v(x)&&(x=x[b])===null)&&(x=void 0)),x===void 0?g:x}},function(o,s,n){var c=n(7);o.exports=c},function(o,s,n){var c=n(7),f=n(62),h=n(35),v=n(38),b=n(184),g=n(140),O=n(100),x=n(43),S=n(61),N=n(141),j=n(115),R=c.Array;o.exports=function(D){var z=v(D),Z=O(this),fe=arguments.length,se=fe>1?arguments[1]:void 0,oe=se!==void 0;oe&&(se=f(se,fe>2?arguments[2]:void 0));var pe,K,U,Y,W,L,he=j(z),Ce=0;if(!he||this==R&&g(he))for(pe=x(z),K=Z?new this(pe):R(pe);pe>Ce;Ce++)L=oe?se(z[Ce],Ce):z[Ce],S(K,Ce,L);else for(W=(Y=N(z,he)).next,K=Z?new this:[];!(U=h(W,Y)).done;Ce++)L=oe?b(Y,se,[U.value,Ce],!0):U.value,S(K,Ce,L);return K.length=Ce,K}},function(o,s,n){var c=n(32),f=n(142);o.exports=function(h,v,b,g){try{return g?v(c(b)[0],b[1]):v(b)}catch(O){f(h,"throw",O)}}},function(o,s,n){var c=n(32);o.exports=function(){var f=c(this),h="";return f.global&&(h+="g"),f.ignoreCase&&(h+="i"),f.multiline&&(h+="m"),f.dotAll&&(h+="s"),f.unicode&&(h+="u"),f.sticky&&(h+="y"),h}},function(o,s,n){var c=n(19),f=n(7).RegExp;o.exports=c(function(){var h=f(".","s");return!(h.dotAll&&h.exec(`
`)&&h.flags==="s")})},function(o,s,n){var c=n(19),f=n(7).RegExp;o.exports=c(function(){var h=f("(?<a>b)","g");return h.exec("b").groups.a!=="b"||"b".replace(h,"$<a>c")!=="bc"})},function(o,s,n){var c=n(17),f=n(15),h=n(55),v=n(38),b=n(43),g=n(41),O=n(19),x=n(189),S=n(120),N=n(190),j=n(191),R=n(65),D=n(192),z=[],Z=f(z.sort),fe=f(z.push),se=O(function(){z.sort(void 0)}),oe=O(function(){z.sort(null)}),pe=S("sort"),K=!O(function(){if(R)return R<70;if(!(N&&N>3)){if(j)return!0;if(D)return D<603;var U,Y,W,L,he="";for(U=65;U<76;U++){switch(Y=String.fromCharCode(U),U){case 66:case 69:case 70:case 72:W=3;break;case 68:case 71:W=4;break;default:W=2}for(L=0;L<47;L++)z.push({k:Y+L,v:W})}for(z.sort(function(Ce,ee){return ee.v-Ce.v}),L=0;L<z.length;L++)Y=z[L].k.charAt(0),he.charAt(he.length-1)!==Y&&(he+=Y);return he!=="DGBEFHACIJK"}});c({target:"Array",proto:!0,forced:se||!oe||!pe||!K},{sort:function(U){U!==void 0&&h(U);var Y=v(this);if(K)return U===void 0?Z(Y):Z(Y,U);var W,L,he=[],Ce=b(Y);for(L=0;L<Ce;L++)L in Y&&fe(he,Y[L]);for(x(he,function(ee){return function(ce,ye){return ye===void 0?-1:ce===void 0?1:ee!==void 0?+ee(ce,ye)||0:g(ce)>g(ye)?1:-1}}(U)),W=he.length,L=0;L<W;)Y[L]=he[L++];for(;L<Ce;)delete Y[L++];return Y}})},function(o,s,n){var c=n(113),f=Math.floor,h=function(g,O){var x=g.length,S=f(x/2);return x<8?v(g,O):b(g,h(c(g,0,S),O),h(c(g,S),O),O)},v=function(g,O){for(var x,S,N=g.length,j=1;j<N;){for(S=j,x=g[j];S&&O(g[S-1],x)>0;)g[S]=g[--S];S!==j++&&(g[S]=x)}return g},b=function(g,O,x,S){for(var N=O.length,j=x.length,R=0,D=0;R<N||D<j;)g[R+D]=R<N&&D<j?S(O[R],x[D])<=0?O[R++]:x[D++]:R<N?O[R++]:x[D++];return g};o.exports=h},function(o,s,n){var c=n(53).match(/firefox\/(\d+)/i);o.exports=!!c&&+c[1]},function(o,s,n){var c=n(53);o.exports=/MSIE|Trident/.test(c)},function(o,s,n){var c=n(53).match(/AppleWebKit\/(\d+)\./);o.exports=!!c&&+c[1]},function(o,s,n){var c=n(17),f=n(74).find,h=n(83),v="find",b=!0;v in[]&&Array(1).find(function(){b=!1}),c({target:"Array",proto:!0,forced:b},{find:function(g){return f(this,g,arguments.length>1?arguments[1]:void 0)}}),h(v)},function(o,s,n){var c=n(7),f=n(154),h=c.TypeError;o.exports=function(v){if(f(v))throw h("The method doesn't accept regular expressions");return v}},function(o,s,n){var c=n(27)("match");o.exports=function(f){var h=/./;try{"/./"[f](h)}catch{try{return h[c]=!1,"/./"[f](h)}catch{}}return!1}},function(o,s,n){var c=n(94).PROPER,f=n(19),h=n(160);o.exports=function(v){return f(function(){return!!h[v]()||""[v]()!==""||c&&h[v].name!==v})}},function(o,s,n){var c=n(15);o.exports=c(1 .valueOf)},function(o,s,n){var c=n(15),f=n(38),h=Math.floor,v=c("".charAt),b=c("".replace),g=c("".slice),O=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;o.exports=function(S,N,j,R,D,z){var Z=j+S.length,fe=R.length,se=x;return D!==void 0&&(D=f(D),se=O),b(z,se,function(oe,pe){var K;switch(v(pe,0)){case"$":return"$";case"&":return S;case"`":return g(N,0,j);case"'":return g(N,Z);case"<":K=D[g(pe,1,-1)];break;default:var U=+pe;if(U===0)return oe;if(U>fe){var Y=h(U/10);return Y===0?oe:Y<=fe?R[Y-1]===void 0?v(pe,1):R[Y-1]+v(pe,1):oe}K=R[U-1]}return K===void 0?"":K})}},function(o,s,n){var c=n(36),f=n(15),h=n(35),v=n(19),b=n(66),g=n(112),O=n(93),x=n(38),S=n(81),N=Object.assign,j=Object.defineProperty,R=f([].concat);o.exports=!N||v(function(){if(c&&N({b:1},N(j({},"a",{enumerable:!0,get:function(){j(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},z={},Z=Symbol(),fe="abcdefghijklmnopqrst";return D[Z]=7,fe.split("").forEach(function(se){z[se]=se}),N({},D)[Z]!=7||b(N({},z)).join("")!=fe})?function(D,z){for(var Z=x(D),fe=arguments.length,se=1,oe=g.f,pe=O.f;fe>se;)for(var K,U=S(arguments[se++]),Y=oe?R(b(U),oe(U)):b(U),W=Y.length,L=0;W>L;)K=Y[L++],c&&!h(pe,U,K)||(Z[K]=U[K]);return Z}:N},function(o,s,n){var c=n(7),f=n(15),h=n(55),v=n(33),b=n(34),g=n(101),O=c.Function,x=f([].concat),S=f([].join),N={},j=function(R,D,z){if(!b(N,D)){for(var Z=[],fe=0;fe<D;fe++)Z[fe]="a["+fe+"]";N[D]=O("C,a","return new C("+S(Z,",")+")")}return N[D](R,z)};o.exports=O.bind||function(R){var D=h(this),z=D.prototype,Z=g(arguments,1),fe=function(){var se=x(Z,g(arguments));return this instanceof fe?j(D,se.length,se):D.apply(R,se)};return v(z)&&(fe.prototype=z),fe}},function(o,s,n){var c=n(34);o.exports=function(f){return f!==void 0&&(c(f,"value")||c(f,"writable"))}},function(o,s,n){var c=n(15),f=n(45),h=n(41),v=/"/g,b=c("".replace);o.exports=function(g,O,x,S){var N=h(f(g)),j="<"+O;return x!==""&&(j+=" "+x+'="'+b(h(S),v,"&quot;")+'"'),j+">"+N+"</"+O+">"}},function(o,s,n){var c=n(19);o.exports=function(f){return c(function(){var h=""[f]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},function(o,s,n){var c,f,h,v,b=n(17),g=n(64),O=n(7),x=n(46),S=n(35),N=n(205),j=n(44),R=n(144),D=n(97),z=n(73),Z=n(145),fe=n(55),se=n(28),oe=n(33),pe=n(117),K=n(92),U=n(114),Y=n(118),W=n(156),L=n(163).set,he=n(206),Ce=n(209),ee=n(210),ce=n(165),ye=n(211),_e=n(56),ie=n(95),ge=n(27),Be=n(212),Qe=n(126),mt=n(65),Bt=ge("species"),bt="Promise",xt=_e.getterFor(bt),tr=_e.set,Oe=_e.getterFor(bt),re=N&&N.prototype,be=N,qe=re,yt=O.TypeError,et=O.document,Dt=O.process,zt=ce.f,Zt=zt,Gt=!!(et&&et.createEvent&&O.dispatchEvent),ze=se(O.PromiseRejectionEvent),Yt="unhandledrejection",xe=!1,Ht=ie(bt,function(){var de=K(be),Fe=de!==String(be);if(!Fe&&mt===66||g&&!qe.finally)return!0;if(mt>=51&&/native code/.test(de))return!1;var Nt=new be(function(Kt){Kt(1)}),Ot=function(Kt){Kt(function(){},function(){})};return(Nt.constructor={})[Bt]=Ot,!(xe=Nt.then(function(){})instanceof Ot)||!Fe&&Be&&!ze}),yr=Ht||!Y(function(de){be.all(de).catch(function(){})}),B=function(de){var Fe;return!(!oe(de)||!se(Fe=de.then))&&Fe},pr=function(de,Fe){if(!de.notified){de.notified=!0;var Nt=de.reactions;he(function(){for(var Ot=de.value,Kt=de.state==1,Tr=0;Nt.length>Tr;){var On,In,dn,bn=Nt[Tr++],Xt=Kt?bn.ok:bn.fail,or=bn.resolve,dr=bn.reject,gr=bn.domain;try{Xt?(Kt||(de.rejection===2&&sr(de),de.rejection=1),Xt===!0?On=Ot:(gr&&gr.enter(),On=Xt(Ot),gr&&(gr.exit(),dn=!0)),On===bn.promise?dr(yt("Promise-chain cycle")):(In=B(On))?S(In,On,or,dr):or(On)):dr(Ot)}catch(Xr){gr&&!dn&&gr.exit(),dr(Xr)}}de.reactions=[],de.notified=!1,Fe&&!de.rejection&&$r(de)})}},kr=function(de,Fe,Nt){var Ot,Kt;Gt?((Ot=et.createEvent("Event")).promise=Fe,Ot.reason=Nt,Ot.initEvent(de,!1,!0),O.dispatchEvent(Ot)):Ot={promise:Fe,reason:Nt},!ze&&(Kt=O["on"+de])?Kt(Ot):de===Yt&&ee("Unhandled promise rejection",Nt)},$r=function(de){S(L,O,function(){var Fe,Nt=de.facade,Ot=de.value;if(Zr(de)&&(Fe=ye(function(){Qe?Dt.emit("unhandledRejection",Ot,Nt):kr(Yt,Nt,Ot)}),de.rejection=Qe||Zr(de)?2:1,Fe.error))throw Fe.value})},Zr=function(de){return de.rejection!==1&&!de.parent},sr=function(de){S(L,O,function(){var Fe=de.facade;Qe?Dt.emit("rejectionHandled",Fe):kr("rejectionhandled",Fe,de.value)})},sn=function(de,Fe,Nt){return function(Ot){de(Fe,Ot,Nt)}},Q=function(de,Fe,Nt){de.done||(de.done=!0,Nt&&(de=Nt),de.value=Fe,de.state=2,pr(de,!0))},Ne=function(de,Fe,Nt){if(!de.done){de.done=!0,Nt&&(de=Nt);try{if(de.facade===Fe)throw yt("Promise can't be resolved itself");var Ot=B(Fe);Ot?he(function(){var Kt={done:!1};try{S(Ot,Fe,sn(Ne,Kt,de),sn(Q,Kt,de))}catch(Tr){Q(Kt,Tr,de)}}):(de.value=Fe,de.state=1,pr(de,!1))}catch(Kt){Q({done:!1},Kt,de)}}};if(Ht&&(qe=(be=function(de){pe(this,qe),fe(de),S(c,this);var Fe=xt(this);try{de(sn(Ne,Fe),sn(Q,Fe))}catch(Nt){Q(Fe,Nt)}}).prototype,(c=function(de){tr(this,{type:bt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=R(qe,{then:function(de,Fe){var Nt=Oe(this),Ot=Nt.reactions,Kt=zt(W(this,be));return Kt.ok=!se(de)||de,Kt.fail=se(Fe)&&Fe,Kt.domain=Qe?Dt.domain:void 0,Nt.parent=!0,Ot[Ot.length]=Kt,Nt.state!=0&&pr(Nt,!1),Kt.promise},catch:function(de){return this.then(void 0,de)}}),f=function(){var de=new c,Fe=xt(de);this.promise=de,this.resolve=sn(Ne,Fe),this.reject=sn(Q,Fe)},ce.f=zt=function(de){return de===be||de===h?new f(de):Zt(de)},!g&&se(N)&&re!==Object.prototype)){v=re.then,xe||(j(re,"then",function(de,Fe){var Nt=this;return new be(function(Ot,Kt){S(v,Nt,Ot,Kt)}).then(de,Fe)},{unsafe:!0}),j(re,"catch",qe.catch,{unsafe:!0}));try{delete re.constructor}catch{}D&&D(re,qe)}b({global:!0,wrap:!0,forced:Ht},{Promise:be}),z(be,bt,!1,!0),Z(bt),h=x(bt),b({target:bt,stat:!0,forced:Ht},{reject:function(de){var Fe=zt(this);return S(Fe.reject,void 0,de),Fe.promise}}),b({target:bt,stat:!0,forced:g||Ht},{resolve:function(de){return Ce(g&&this===h?be:this,de)}}),b({target:bt,stat:!0,forced:yr},{all:function(de){var Fe=this,Nt=zt(Fe),Ot=Nt.resolve,Kt=Nt.reject,Tr=ye(function(){var On=fe(Fe.resolve),In=[],dn=0,bn=1;U(de,function(Xt){var or=dn++,dr=!1;bn++,S(On,Fe,Xt).then(function(gr){dr||(dr=!0,In[or]=gr,--bn||Ot(In))},Kt)}),--bn||Ot(In)});return Tr.error&&Kt(Tr.value),Nt.promise},race:function(de){var Fe=this,Nt=zt(Fe),Ot=Nt.reject,Kt=ye(function(){var Tr=fe(Fe.resolve);U(de,function(On){S(Tr,Fe,On).then(Nt.resolve,Ot)})});return Kt.error&&Ot(Kt.value),Nt.promise}})},function(o,s,n){var c=n(7);o.exports=c.Promise},function(o,s,n){var c,f,h,v,b,g,O,x,S=n(7),N=n(62),j=n(51).f,R=n(163).set,D=n(164),z=n(207),Z=n(208),fe=n(126),se=S.MutationObserver||S.WebKitMutationObserver,oe=S.document,pe=S.process,K=S.Promise,U=j(S,"queueMicrotask"),Y=U&&U.value;Y||(c=function(){var W,L;for(fe&&(W=pe.domain)&&W.exit();f;){L=f.fn,f=f.next;try{L()}catch(he){throw f?v():h=void 0,he}}h=void 0,W&&W.enter()},D||fe||Z||!se||!oe?!z&&K&&K.resolve?((O=K.resolve(void 0)).constructor=K,x=N(O.then,O),v=function(){x(c)}):fe?v=function(){pe.nextTick(c)}:(R=N(R,S),v=function(){R(c)}):(b=!0,g=oe.createTextNode(""),new se(c).observe(g,{characterData:!0}),v=function(){g.data=b=!b})),o.exports=Y||function(W){var L={fn:W,next:void 0};h&&(h.next=L),f||(f=L,v()),h=L}},function(o,s,n){var c=n(53),f=n(7);o.exports=/ipad|iphone|ipod/i.test(c)&&f.Pebble!==void 0},function(o,s,n){var c=n(53);o.exports=/web0s(?!.*chrome)/i.test(c)},function(o,s,n){var c=n(32),f=n(33),h=n(165);o.exports=function(v,b){if(c(v),f(b)&&b.constructor===v)return b;var g=h.f(v);return(0,g.resolve)(b),g.promise}},function(o,s,n){var c=n(7);o.exports=function(f,h){var v=c.console;v&&v.error&&(arguments.length==1?v.error(f):v.error(f,h))}},function(o,s){o.exports=function(n){try{return{error:!1,value:n()}}catch(c){return{error:!0,value:c}}}},function(o,s){o.exports=typeof window=="object"},function(o,s,n){var c=n(36),f=n(15),h=n(66),v=n(40),b=f(n(93).f),g=f([].push),O=function(x){return function(S){for(var N,j=v(S),R=h(j),D=R.length,z=0,Z=[];D>z;)N=R[z++],c&&!b(j,N)||g(Z,x?[N,j[N]]:j[N]);return Z}};o.exports={entries:O(!0),values:O(!1)}},function(o,s,n){var c=n(38),f=n(67),h=n(43);o.exports=function(v){for(var b=c(this),g=h(b),O=arguments.length,x=f(O>1?arguments[1]:void 0,g),S=O>2?arguments[2]:void 0,N=S===void 0?g:f(S,g);N>x;)b[x++]=v;return b}},function(o,s,n){n.r(s),n.d(s,"observer",function(){return yi}),n.d(s,"LogicFlow",function(){return xg}),n.d(s,"h",function(){return xe.g}),n.d(s,"LogicFlowUtil",function(){return c}),n.d(s,"BaseNode",function(){return da}),n.d(s,"RectNode",function(){return gy}),n.d(s,"CircleNode",function(){return Ey}),n.d(s,"PolygonNode",function(){return Ty}),n.d(s,"DiamondNode",function(){return jy}),n.d(s,"EllipseNode",function(){return Cy}),n.d(s,"TextNode",function(){return Fy}),n.d(s,"HtmlNode",function(){return zy}),n.d(s,"BaseEdge",function(){return uf}),n.d(s,"LineEdge",function(){return rg}),n.d(s,"PolylineEdge",function(){return ug}),n.d(s,"BezierEdge",function(){return fg}),n.d(s,"Arrow",function(){return WS}),n.d(s,"BaseEdgeModel",function(){return Vu}),n.d(s,"BezierEdgeModel",function(){return Tv}),n.d(s,"LineEdgeModel",function(){return $o}),n.d(s,"PolylineEdgeModel",function(){return Vn}),n.d(s,"BaseNodeModel",function(){return fa}),n.d(s,"CircleNodeModel",function(){return Rv}),n.d(s,"DiamondNodeModel",function(){return Lv}),n.d(s,"EllipseNodeModel",function(){return Uv}),n.d(s,"PolygonNodeModel",function(){return Yv}),n.d(s,"RectNodeModel",function(){return Zv}),n.d(s,"TextNodeModel",function(){return ty}),n.d(s,"HtmlNodeModel",function(){return oy}),n.d(s,"EditConfigModel",function(){return _l}),n.d(s,"GraphModel",function(){return jt}),n.d(s,"SnaplineModel",function(){return s0}),n.d(s,"Keyboard",function(){return $0}),n.d(s,"get",function(){return Jm}),n.d(s,"defaults",function(){return eb}),n.d(s,"ElementState",function(){return zr}),n.d(s,"ModelType",function(){return Pr}),n.d(s,"ElementType",function(){return xn}),n.d(s,"EventType",function(){return ir}),n.d(s,"formateAnchorConnectValidateData",function(){return Hu});var c={};n.r(c),n.d(c,"createUuid",function(){return di}),n.d(c,"refreshGraphId",function(){return Td}),n.d(c,"createDrag",function(){return nr}),n.d(c,"StepDrag",function(){return Yr});var f=n(1),h=n(10);if(!h.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!f.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var v=n(42),b=Object(v.b)("observerBatching");function g(t){t()}var O=!1;function x(){return O}function S(t){return Object(f.t)(t)}var N,j=1e4,R=new Set;function D(){N===void 0&&(N=setTimeout(z,1e4))}function z(){N=void 0;var t=Date.now();R.forEach(function(r){var a=r.current;a&&t>=a.cleanAt&&(a.reaction.dispose(),r.current=null,R.delete(r))}),R.size>0&&D()}var Z=!1,fe=[],se={};function oe(t){return"observer"+t}function pe(t,r,a){r===void 0&&(r="observed"),a===void 0&&(a=se),x();var u,d=function(w){return function(){Z?fe.push(w):w()}}((a.useForceUpdate||v.d)()),l=h.d.useRef(null);if(!l.current){var p=new f.c(oe(r),function(){y.mounted?d():(p.dispose(),l.current=null)}),y=function(w){return{cleanAt:Date.now()+j,reaction:w}}(p);l.current=y,u=l,R.add(u),D()}var m=l.current.reaction;return h.d.useDebugValue(m,S),h.d.useEffect(function(){var w;return w=l,R.delete(w),l.current?l.current.mounted=!0:(l.current={reaction:new f.c(oe(r),function(){d()}),cleanAt:1/0},d()),function(){l.current.reaction.dispose(),l.current=null}},[]),function(w){Z=!0,fe=[];try{var T=w();Z=!1;var M=fe.length>0?fe:void 0;return h.d.useLayoutEffect(function(){M&&M.forEach(function(C){return C()})},[M]),T}finally{Z=!1}}(function(){var w,T;if(m.track(function(){try{w=t()}catch(M){T=M}}),T)throw T;return w})}var K=function(){return K=Object.assign||function(t){for(var r,a=1,u=arguments.length;a<u;a++)for(var d in r=arguments[a])Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d]);return t},K.apply(this,arguments)};function U(t,r){var a,u,d,l=K({forwardRef:!1},r),p=t.displayName||t.name,y=function(m,w){return pe(function(){return t(m,w)},p)};return y.displayName=p,a=l.forwardRef?Object(h.f)(Object(h.e)(y)):Object(h.f)(y),u=t,d=a,Object.keys(u).forEach(function(m){Y[m]||Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(u,m))}),a.displayName=p,a}var Y={$$typeof:!0,render:!0,compare:!0,type:!0};function W(t){var r=t.children,a=t.render,u=r||a;return typeof u!="function"?null:pe(u)}function L(t,r,a,u,d){var l=r==="children"?"render":"children",p=typeof t[r]=="function",y=typeof t[l]=="function";return p&&y?new Error("MobX Observer: Do not use children and render in the same time in`"+a):p||y?null:new Error("Invalid prop `"+d+"` of type `"+typeof t[r]+"` supplied to `"+a+"`, expected `function`.")}W.propTypes={children:L,render:L},W.displayName="Observer";var he;(he=h.g)||(he=g),Object(f.n)({reactionScheduler:he}),Object(v.a)()[b]=!0;var Ce=0,ee={};function ce(t){return ee[t]||(ee[t]=function(r){if(typeof Symbol=="function")return Symbol(r);var a="__$mobx-react "+r+" ("+Ce+")";return Ce++,a}(t)),ee[t]}function ye(t,r){if(_e(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),u=Object.keys(r);if(a.length!==u.length)return!1;for(var d=0;d<a.length;d++)if(!Object.hasOwnProperty.call(r,a[d])||!_e(t[a[d]],r[a[d]]))return!1;return!0}function _e(t,r){return t===r?t!==0||1/t==1/r:t!=t&&r!=r}function ie(t,r,a){Object.hasOwnProperty.call(t,r)?t[r]=a:Object.defineProperty(t,r,{enumerable:!1,configurable:!0,writable:!0,value:a})}var ge=ce("patchMixins"),Be=ce("patchedDefinition");function Qe(t,r){for(var a=this,u=arguments.length,d=new Array(u>2?u-2:0),l=2;l<u;l++)d[l-2]=arguments[l];r.locks++;try{var p;return t!=null&&(p=t.apply(this,d)),p}finally{r.locks--,r.locks===0&&r.methods.forEach(function(y){y.apply(a,d)})}}function mt(t,r){return function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];Qe.call.apply(Qe,[this,t,r].concat(u))}}function Bt(t,r,a){var u=function(y,m){var w=y[ge]=y[ge]||{},T=w[m]=w[m]||{};return T.locks=T.locks||0,T.methods=T.methods||[],T}(t,r);u.methods.indexOf(a)<0&&u.methods.push(a);var d=Object.getOwnPropertyDescriptor(t,r);if(!d||!d[Be]){var l=t[r],p=bt(t,r,d?d.enumerable:void 0,u,l);Object.defineProperty(t,r,p)}}function bt(t,r,a,u,d){var l,p=mt(d,u);return(l={})[Be]=!0,l.get=function(){return p},l.set=function(y){if(this===t)p=mt(y,u);else{var m=bt(this,r,a,u,y);Object.defineProperty(this,r,m)}},l.configurable=!0,l.enumerable=a,l}var xt=f.a||"$mobx",tr=ce("isMobXReactObserver"),Oe=ce("isUnmounted"),re=ce("skipRender"),be=ce("isForcingUpdate");function qe(t){var r=t.prototype;if(t[tr]?yt(r):t[tr]=!0,r.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==h.b)if(r.shouldComponentUpdate){if(r.shouldComponentUpdate!==Dt)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else r.shouldComponentUpdate=Dt;zt(r,"props"),zt(r,"state");var a=r.render;return r.render=function(){return et.call(this,a)},Bt(r,"componentWillUnmount",function(){var u;(u=this.render[xt])===null||u===void 0||u.dispose(),this[Oe]=!0,!this.render[xt]&&yt(this)}),t}function yt(t){return t.displayName||t.name||t.constructor&&(t.constructor.displayName||t.constructor.name)||"<component>"}function et(t){var r=this;ie(this,re,!1),ie(this,be,!1);var a=yt(this),u=t.bind(this),d=!1,l=new f.c(a+".render()",function(){if(!d&&(d=!0,r[Oe]!==!0)){var y=!0;try{ie(r,be,!0),r[re]||h.a.prototype.forceUpdate.call(r),y=!1}finally{ie(r,be,!1),y&&l.dispose()}}});function p(){d=!1;var y=void 0,m=void 0;if(l.track(function(){try{m=Object(f.d)(!1,u)}catch(w){y=w}}),y)throw y;return m}return l.reactComponent=this,p[xt]=l,this.render=p,p.call(this)}function Dt(t,r){return this.state!==r||!ye(this.props,t)}function zt(t,r){var a=ce("reactProp_"+r+"_valueHolder"),u=ce("reactProp_"+r+"_atomHolder");function d(){return this[u]||ie(this,u,Object(f.o)("reactive "+r)),this[u]}Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function(){var l=!1;return f.f&&f.e&&(l=Object(f.f)(!0)),d.call(this).reportObserved(),f.f&&f.e&&Object(f.e)(l),this[a]},set:function(l){this[be]||ye(this[a],l)?ie(this,a,l):(ie(this,a,l),ie(this,re,!0),d.call(this).reportChanged(),ie(this,re,!1))}})}var Zt=typeof Symbol=="function"&&Symbol.for,Gt=Zt?Symbol.for("react.forward_ref"):typeof h.e=="function"&&Object(h.e)(function(t){return null}).$$typeof,ze=Zt?Symbol.for("react.memo"):typeof h.f=="function"&&Object(h.f)(function(t){return null}).$$typeof;function Yt(t){if(t.isMobxInjector,ze&&t.$$typeof===ze)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Gt&&t.$$typeof===Gt){var r=t.render;if(typeof r!="function")throw new Error("render property of ForwardRef was not a function");return Object(h.e)(function(){var a=arguments;return Object(h.c)(W,null,function(){return r.apply(void 0,a)})})}return typeof t!="function"||t.prototype&&t.prototype.render||t.isReactClass||Object.prototype.isPrototypeOf.call(h.a,t)?qe(t):U(t)}if(!h.a)throw new Error("mobx-react requires React to be available");if(!f.C)throw new Error("mobx-react requires mobx to be available");var xe=n(0);n(3),n(60),n(2),n(6),n(4),n(11),n(39),n(22),n(20),n(5),n(23),n(21),n(25),n(8),n(9),n(16),n(24),n(18),n(29),n(188),n(193),n(103),n(152),n(153);var Ht=function(t,r){for(var a=-1,u=t==null?0:t.length,d=Array(u);++a<u;)d[a]=r(t[a],a,t);return d},yr=function(){this.__data__=[],this.size=0},B=function(t,r){return t===r||t!=t&&r!=r},pr=function(t,r){for(var a=t.length;a--;)if(B(t[a][0],r))return a;return-1},kr=Array.prototype.splice,$r=function(t){var r=this.__data__,a=pr(r,t);return!(a<0)&&(a==r.length-1?r.pop():kr.call(r,a,1),--this.size,!0)},Zr=function(t){var r=this.__data__,a=pr(r,t);return a<0?void 0:r[a][1]},sr=function(t){return pr(this.__data__,t)>-1},sn=function(t,r){var a=this.__data__,u=pr(a,t);return u<0?(++this.size,a.push([t,r])):a[u][1]=r,this};function Q(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var u=t[r];this.set(u[0],u[1])}}Q.prototype.clear=yr,Q.prototype.delete=$r,Q.prototype.get=Zr,Q.prototype.has=sr,Q.prototype.set=sn;var Ne=Q,de=function(){this.__data__=new Ne,this.size=0},Fe=function(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a},Nt=function(t){return this.__data__.get(t)},Ot=function(t){return this.__data__.has(t)},Kt=n(31),Tr=Kt.a.Symbol,On=Object.prototype,In=On.hasOwnProperty,dn=On.toString,bn=Tr?Tr.toStringTag:void 0,Xt=function(t){var r=In.call(t,bn),a=t[bn];try{t[bn]=void 0;var u=!0}catch{}var d=dn.call(t);return u&&(r?t[bn]=a:delete t[bn]),d},or=Object.prototype.toString,dr=function(t){return or.call(t)},gr=Tr?Tr.toStringTag:void 0,Xr=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":gr&&gr in Object(t)?Xt(t):dr(t)},Cr=function(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")},ai,Go=function(t){if(!Cr(t))return!1;var r=Xr(t);return r=="[object Function]"||r=="[object GeneratorFunction]"||r=="[object AsyncFunction]"||r=="[object Proxy]"},Uo=Kt.a["__core-js_shared__"],Wi=(ai=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||""))?"Symbol(src)_1."+ai:"",Wc=function(t){return!!Wi&&Wi in t},hu=Function.prototype.toString,xo=function(t){if(t!=null){try{return hu.call(t)}catch{}try{return t+""}catch{}}return""},hs=/^\[object .+?Constructor\]$/,qt=Function.prototype,vs=Object.prototype,tn=qt.toString,ys=vs.hasOwnProperty,lo=RegExp("^"+tn.call(ys).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fo=function(t){return!(!Cr(t)||Wc(t))&&(Go(t)?lo:hs).test(xo(t))},gs=function(t,r){return t==null?void 0:t[r]},zo=function(t,r){var a=gs(t,r);return fo(a)?a:void 0},bi=zo(Kt.a,"Map"),ko=zo(Object,"create"),vu=function(){this.__data__=ko?ko(null):{},this.size=0},ms=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},Yc=Object.prototype.hasOwnProperty,xa=function(t){var r=this.__data__;if(ko){var a=r[t];return a==="__lodash_hash_undefined__"?void 0:a}return Yc.call(r,t)?r[t]:void 0},$c=Object.prototype.hasOwnProperty,bs=function(t){var r=this.__data__;return ko?r[t]!==void 0:$c.call(r,t)},Kc=function(t,r){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=ko&&r===void 0?"__lodash_hash_undefined__":r,this};function ui(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var u=t[r];this.set(u[0],u[1])}}ui.prototype.clear=vu,ui.prototype.delete=ms,ui.prototype.get=xa,ui.prototype.has=bs,ui.prototype.set=Kc;var _s=ui,Ho=function(){this.size=0,this.__data__={hash:new _s,map:new(bi||Ne),string:new _s}},qc=function(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null},Sa=function(t,r){var a=t.__data__;return qc(r)?a[typeof r=="string"?"string":"hash"]:a.map},yu=function(t){var r=Sa(this,t).delete(t);return this.size-=r?1:0,r},gu=function(t){return Sa(this,t).get(t)},Zc=function(t){return Sa(this,t).has(t)},Es=function(t,r){var a=Sa(this,t),u=a.size;return a.set(t,r),this.size+=a.size==u?0:1,this};function _i(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var u=t[r];this.set(u[0],u[1])}}_i.prototype.clear=Ho,_i.prototype.delete=yu,_i.prototype.get=gu,_i.prototype.has=Zc,_i.prototype.set=Es;var Ei=_i,Os=function(t,r){var a=this.__data__;if(a instanceof Ne){var u=a.__data__;if(!bi||u.length<199)return u.push([t,r]),this.size=++a.size,this;a=this.__data__=new Ei(u)}return a.set(t,r),this.size=a.size,this};function Oi(t){var r=this.__data__=new Ne(t);this.size=r.size}Oi.prototype.clear=de,Oi.prototype.delete=Fe,Oi.prototype.get=Nt,Oi.prototype.has=Ot,Oi.prototype.set=Os;var po=Oi,mu=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ws=function(t){return this.__data__.has(t)};function Yi(t){var r=-1,a=t==null?0:t.length;for(this.__data__=new Ei;++r<a;)this.add(t[r])}Yi.prototype.add=Yi.prototype.push=mu,Yi.prototype.has=ws;var wi=Yi,bu=function(t,r){for(var a=-1,u=t==null?0:t.length;++a<u;)if(r(t[a],a,t))return!0;return!1},_u=function(t,r){return t.has(r)},Ta=function(t,r,a,u,d,l){var p=1&a,y=t.length,m=r.length;if(y!=m&&!(p&&m>y))return!1;var w=l.get(t),T=l.get(r);if(w&&T)return w==r&&T==t;var M=-1,C=!0,$=2&a?new wi:void 0;for(l.set(t,r),l.set(r,t);++M<y;){var ae=t[M],ve=r[M];if(u)var je=p?u(ve,ae,M,r,t,l):u(ae,ve,M,t,r,l);if(je!==void 0){if(je)continue;C=!1;break}if($){if(!bu(r,function(Re,Ye){if(!_u($,Ye)&&(ae===Re||d(ae,Re,a,u,l)))return $.push(Ye)})){C=!1;break}}else if(ae!==ve&&!d(ae,ve,a,u,l)){C=!1;break}}return l.delete(t),l.delete(r),C},$i=Kt.a.Uint8Array,xs=function(t){var r=-1,a=Array(t.size);return t.forEach(function(u,d){a[++r]=[d,u]}),a},Jc=function(t){var r=-1,a=Array(t.size);return t.forEach(function(u){a[++r]=u}),a},Ss=Tr?Tr.prototype:void 0,Yn=Ss?Ss.valueOf:void 0,An=function(t,r,a,u,d,l,p){switch(a){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!l(new $i(t),new $i(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return B(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var y=xs;case"[object Set]":var m=1&u;if(y||(y=Jc),t.size!=r.size&&!m)return!1;var w=p.get(t);if(w)return w==r;u|=2,p.set(t,r);var T=Ta(y(t),y(r),u,d,l,p);return p.delete(t),T;case"[object Symbol]":if(Yn)return Yn.call(t)==Yn.call(r)}return!1},ho=function(t,r){for(var a=-1,u=r.length,d=t.length;++a<u;)t[d+a]=r[a];return t},Gn=Array.isArray,Ts=function(t,r,a){var u=r(t);return Gn(t)?u:ho(u,a(t))},Eu=function(t,r){for(var a=-1,u=t==null?0:t.length,d=0,l=[];++a<u;){var p=t[a];r(p,a,t)&&(l[d++]=p)}return l},Ou=function(){return[]},Qc=Object.prototype.propertyIsEnumerable,si=Object.getOwnPropertySymbols,ro=si?function(t){return t==null?[]:(t=Object(t),Eu(si(t),function(r){return Qc.call(t,r)}))}:Ou,el=function(t,r){for(var a=-1,u=Array(t);++a<t;)u[a]=r(a);return u},So=function(t){return t!=null&&typeof t=="object"},vo=function(t){return So(t)&&Xr(t)=="[object Arguments]"},As=Object.prototype,Ps=As.hasOwnProperty,tl=As.propertyIsEnumerable,Aa=vo(function(){return arguments}())?vo:function(t){return So(t)&&Ps.call(t,"callee")&&!tl.call(t,"callee")},Xo=Aa,yo=n(48),rl=/^(?:0|[1-9]\d*)$/,$n=function(t,r){var a=typeof t;return!!(r=r??9007199254740991)&&(a=="number"||a!="symbol"&&rl.test(t))&&t>-1&&t%1==0&&t<r},To=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Rr={};Rr["[object Float32Array]"]=Rr["[object Float64Array]"]=Rr["[object Int8Array]"]=Rr["[object Int16Array]"]=Rr["[object Int32Array]"]=Rr["[object Uint8Array]"]=Rr["[object Uint8ClampedArray]"]=Rr["[object Uint16Array]"]=Rr["[object Uint32Array]"]=!0,Rr["[object Arguments]"]=Rr["[object Array]"]=Rr["[object ArrayBuffer]"]=Rr["[object Boolean]"]=Rr["[object DataView]"]=Rr["[object Date]"]=Rr["[object Error]"]=Rr["[object Function]"]=Rr["[object Map]"]=Rr["[object Number]"]=Rr["[object Object]"]=Rr["[object RegExp]"]=Rr["[object Set]"]=Rr["[object String]"]=Rr["[object WeakMap]"]=!1;var no=function(t){return So(t)&&To(t.length)&&!!Rr[Xr(t)]},Vo=function(t){return function(r){return t(r)}},Ln=n(49),Pa=Ln.a&&Ln.a.isTypedArray,Ki=Pa?Vo(Pa):no,Co=Object.prototype.hasOwnProperty,Kn=function(t,r){var a=Gn(t),u=!a&&Xo(t),d=!a&&!u&&Object(yo.a)(t),l=!a&&!u&&!d&&Ki(t),p=a||u||d||l,y=p?el(t.length,String):[],m=y.length;for(var w in t)!r&&!Co.call(t,w)||p&&(w=="length"||d&&(w=="offset"||w=="parent")||l&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||$n(w,m))||y.push(w);return y},wu=Object.prototype,qi=function(t){var r=t&&t.constructor;return t===(typeof r=="function"&&r.prototype||wu)},Ao=function(t,r){return function(a){return t(r(a))}},Ns=Ao(Object.keys,Object),nl=Object.prototype.hasOwnProperty,xu=function(t){if(!qi(t))return Ns(t);var r=[];for(var a in Object(t))nl.call(t,a)&&a!="constructor"&&r.push(a);return r},_n=function(t){return t!=null&&To(t.length)&&!Go(t)},xi=function(t){return _n(t)?Kn(t):xu(t)},Na=function(t){return Ts(t,xi,ro)},Pn=Object.prototype.hasOwnProperty,js=function(t,r,a,u,d,l){var p=1&a,y=Na(t),m=y.length;if(m!=Na(r).length&&!p)return!1;for(var w=m;w--;){var T=y[w];if(!(p?T in r:Pn.call(r,T)))return!1}var M=l.get(t),C=l.get(r);if(M&&C)return M==r&&C==t;var $=!0;l.set(t,r),l.set(r,t);for(var ae=p;++w<m;){var ve=t[T=y[w]],je=r[T];if(u)var Re=p?u(je,ve,T,r,t,l):u(ve,je,T,t,r,l);if(!(Re===void 0?ve===je||d(ve,je,a,u,l):Re)){$=!1;break}ae||(ae=T=="constructor")}if($&&!ae){var Ye=t.constructor,lt=r.constructor;Ye==lt||!("constructor"in t)||!("constructor"in r)||typeof Ye=="function"&&Ye instanceof Ye&&typeof lt=="function"&&lt instanceof lt||($=!1)}return l.delete(t),l.delete(r),$},Zi=zo(Kt.a,"DataView"),Wo=zo(Kt.a,"Promise"),ja=zo(Kt.a,"Set"),Io=zo(Kt.a,"WeakMap"),Su="[object Map]",Nn="[object Promise]",oo="[object Set]",io="[object WeakMap]",Ji="[object DataView]",Tu=xo(Zi),Au=xo(bi),Ms=xo(Wo),Rs=xo(ja),Ma=xo(Io),ci=Xr;(Zi&&ci(new Zi(new ArrayBuffer(1)))!=Ji||bi&&ci(new bi)!=Su||Wo&&ci(Wo.resolve())!=Nn||ja&&ci(new ja)!=oo||Io&&ci(new Io)!=io)&&(ci=function(t){var r=Xr(t),a=r=="[object Object]"?t.constructor:void 0,u=a?xo(a):"";if(u)switch(u){case Tu:return Ji;case Au:return Su;case Ms:return Nn;case Rs:return oo;case Ma:return io}return r});var _=ci,E="[object Arguments]",P="[object Array]",I="[object Object]",q=Object.prototype.hasOwnProperty,Ae=function(t,r,a,u,d,l){var p=Gn(t),y=Gn(r),m=p?P:_(t),w=y?P:_(r),T=(m=m==E?I:m)==I,M=(w=w==E?I:w)==I,C=m==w;if(C&&Object(yo.a)(t)){if(!Object(yo.a)(r))return!1;p=!0,T=!1}if(C&&!T)return l||(l=new po),p||Ki(t)?Ta(t,r,a,u,d,l):An(t,r,m,a,u,d,l);if(!(1&a)){var $=T&&q.call(t,"__wrapped__"),ae=M&&q.call(r,"__wrapped__");if($||ae){var ve=$?t.value():t,je=ae?r.value():r;return l||(l=new po),d(ve,je,a,u,l)}}return!!C&&(l||(l=new po),js(t,r,a,u,d,l))},Xe=function t(r,a,u,d,l){return r===a||(r==null||a==null||!So(r)&&!So(a)?r!=r&&a!=a:Ae(r,a,u,d,t,l))},gt=function(t,r,a,u){var d=a.length,l=d,p=!u;if(t==null)return!l;for(t=Object(t);d--;){var y=a[d];if(p&&y[2]?y[1]!==t[y[0]]:!(y[0]in t))return!1}for(;++d<l;){var m=(y=a[d])[0],w=t[m],T=y[1];if(p&&y[2]){if(w===void 0&&!(m in t))return!1}else{var M=new po;if(u)var C=u(w,T,m,t,r,M);if(!(C===void 0?Xe(T,w,3,u,M):C))return!1}}return!0},Vt=function(t){return t==t&&!Cr(t)},Ar=function(t){for(var r=xi(t),a=r.length;a--;){var u=r[a],d=t[u];r[a]=[u,d,Vt(d)]}return r},cr=function(t,r){return function(a){return a!=null&&a[t]===r&&(r!==void 0||t in Object(a))}},Gr=function(t){var r=Ar(t);return r.length==1&&r[0][2]?cr(r[0][0],r[0][1]):function(a){return a===t||gt(a,t,r)}},Or=function(t){return typeof t=="symbol"||So(t)&&Xr(t)=="[object Symbol]"},Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ao=/^\w*$/,rn=function(t,r){if(Gn(t))return!1;var a=typeof t;return!(a!="number"&&a!="symbol"&&a!="boolean"&&t!=null&&!Or(t))||ao.test(t)||!Ur.test(t)||r!=null&&t in Object(r)};function qn(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var a=function(){var u=arguments,d=r?r.apply(this,u):u[0],l=a.cache;if(l.has(d))return l.get(d);var p=t.apply(this,u);return a.cache=l.set(d,p)||l,p};return a.cache=new(qn.Cache||Ei),a}qn.Cache=Ei;var Qi=qn,ol=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ra=/\\(\\)?/g,ea=function(t){var r=Qi(t,function(u){return a.size===500&&a.clear(),u}),a=r.cache;return r}(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(ol,function(a,u,d,l){r.push(d?l.replace(Ra,"$1"):u||a)}),r}),Si=Tr?Tr.prototype:void 0,ta=Si?Si.toString:void 0,wn=function t(r){if(typeof r=="string")return r;if(Gn(r))return Ht(r,t)+"";if(Or(r))return ta?ta.call(r):"";var a=r+"";return a=="0"&&1/r==-1/0?"-0":a},Da=function(t){return t==null?"":wn(t)},li=function(t,r){return Gn(t)?t:rn(t,r)?[t]:ea(Da(t))},ra=function(t){if(typeof t=="string"||Or(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r},Pu=function(t,r){for(var a=0,u=(r=li(r,t)).length;t!=null&&a<u;)t=t[ra(r[a++])];return a&&a==u?t:void 0},il=function(t,r,a){var u=t==null?void 0:Pu(t,r);return u===void 0?a:u},Gf=function(t,r){return t!=null&&r in Object(t)},Uf=function(t,r,a){for(var u=-1,d=(r=li(r,t)).length,l=!1;++u<d;){var p=ra(r[u]);if(!(l=t!=null&&a(t,p)))break;t=t[p]}return l||++u!=d?l:!!(d=t==null?0:t.length)&&To(d)&&$n(p,d)&&(Gn(t)||Xo(t))},al=function(t,r){return t!=null&&Uf(t,r,Gf)},zf=function(t,r){return rn(t)&&Vt(r)?cr(ra(t),r):function(a){var u=il(a,t);return u===void 0&&u===r?al(a,t):Xe(r,u,3)}},Ds=function(t){return t},Hf=function(t){return function(r){return r==null?void 0:r[t]}},Xf=function(t){return function(r){return Pu(r,t)}},ka=function(t){return rn(t)?Hf(ra(t)):Xf(t)},ul=function(t){return typeof t=="function"?t:t==null?Ds:typeof t=="object"?Gn(t)?zf(t[0],t[1]):Gr(t):ka(t)},ks=function(t){return function(r,a,u){for(var d=-1,l=Object(r),p=u(r),y=p.length;y--;){var m=p[t?y:++d];if(a(l[m],m,l)===!1)break}return r}}(),Nu=function(t,r){return function(a,u){if(a==null)return a;if(!_n(a))return t(a,u);for(var d=a.length,l=r?d:-1,p=Object(a);(r?l--:++l<d)&&u(p[l],l,p)!==!1;);return a}}(function(t,r){return t&&ks(t,r,xi)}),Ph=function(t,r){var a=-1,u=_n(t)?Array(t.length):[];return Nu(t,function(d,l,p){u[++a]=r(d,l,p)}),u},Cs=function(t,r){return(Gn(t)?Ht:Ph)(t,ul(r))};Object(f.n)({isolateGlobalState:!0});var Is=function(){try{var t=zo(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ju=function(t,r,a){r=="__proto__"&&Is?Is(t,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[r]=a},Nh=Object.prototype.hasOwnProperty,Ls=function(t,r,a){var u=t[r];Nh.call(t,r)&&B(u,a)&&(a!==void 0||r in t)||ju(t,r,a)},Ca=function(t,r,a,u){var d=!a;a||(a={});for(var l=-1,p=r.length;++l<p;){var y=r[l],m=u?u(a[y],t[y],y,a,t):void 0;m===void 0&&(m=t[y]),d?ju(a,y,m):Ls(a,y,m)}return a},sl=function(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)},Vf=Math.max,Fs=function(t,r,a){return r=Vf(r===void 0?t.length-1:r,0),function(){for(var u=arguments,d=-1,l=Vf(u.length-r,0),p=Array(l);++d<l;)p[d]=u[r+d];d=-1;for(var y=Array(r+1);++d<r;)y[d]=u[d];return y[r]=a(p),sl(t,this,y)}},Wf=function(t){return function(){return t}},Yf=Is?function(t,r){return Is(t,"toString",{configurable:!0,enumerable:!1,value:Wf(r),writable:!0})}:Ds,cl=Date.now,jh=function(t){var r=0,a=0;return function(){var u=cl(),d=16-(u-a);if(a=u,d>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},Mu=jh(Yf),Mh=function(t,r){return Mu(Fs(t,r,Ds),t+"")},Rh=function(t,r,a){if(!Cr(a))return!1;var u=typeof r;return!!(u=="number"?_n(a)&&$n(r,a.length):u=="string"&&r in a)&&B(a[r],t)},$f=function(t){return Mh(function(r,a){var u=-1,d=a.length,l=d>1?a[d-1]:void 0,p=d>2?a[2]:void 0;for(l=t.length>3&&typeof l=="function"?(d--,l):void 0,p&&Rh(a[0],a[1],p)&&(l=d<3?void 0:l,d=1),r=Object(r);++u<d;){var y=a[u];y&&t(r,y,u,l)}return r})},Dh=Object.prototype.hasOwnProperty,Zn=$f(function(t,r){if(qi(r)||_n(r))Ca(r,xi(r),t);else for(var a in r)Dh.call(r,a)&&Ls(t,a,r[a])}),kh=function(t,r,a,u){if(!Cr(t))return t;for(var d=-1,l=(r=li(r,t)).length,p=l-1,y=t;y!=null&&++d<l;){var m=ra(r[d]),w=a;if(m==="__proto__"||m==="constructor"||m==="prototype")return t;if(d!=p){var T=y[m];(w=u?u(T,m,y):void 0)===void 0&&(w=Cr(T)?T:$n(r[d+1])?[]:{})}Ls(y,m,w),y=y[m]}return t},Ch=function(t,r,a){for(var u=-1,d=r.length,l={};++u<d;){var p=r[u],y=Pu(t,p);a(y,p)&&kh(l,li(p,t),y)}return l},Kf=function(t,r){return Ch(t,r,function(a,u){return al(t,u)})},Ia=Tr?Tr.isConcatSpreadable:void 0,Ih=function(t){return Gn(t)||Xo(t)||!!(Ia&&t&&t[Ia])},Bs=function t(r,a,u,d,l){var p=-1,y=r.length;for(u||(u=Ih),l||(l=[]);++p<y;){var m=r[p];a>0&&u(m)?a>1?t(m,a-1,u,d,l):ho(l,m):d||(l[l.length]=m)}return l},Po=function(t){return t!=null&&t.length?Bs(t,1):[]},Jr,ll,fl,dl,pl,hl,vl,qf,na,jn,yl,gl,Ti,ml,bl,Zf,Jf,Qf,Ru=function(t){return Mu(Fs(t,void 0,Po),t+"")}(function(t,r){return t==null?{}:Kf(t,r)});function Mn(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function ed(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function td(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Rn(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var zr,rd,Pr,xn,ir,Kr,nd={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Gs=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],_l=(ll=Rn((Jr=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),Mn(this,"isSilentMode",ll,this),Mn(this,"stopZoomGraph",fl,this),Mn(this,"stopScrollGraph",dl,this),Mn(this,"stopMoveGraph",pl,this),Mn(this,"adjustEdge",hl,this),Mn(this,"adjustEdgeMiddle",vl,this),Mn(this,"adjustEdgeStartAndEnd",qf,this),Mn(this,"adjustNodePosition",na,this),Mn(this,"hideAnchors",jn,this),Mn(this,"hoverOutline",yl,this),Mn(this,"nodeSelectedOutline",gl,this),Mn(this,"edgeSelectedOutline",Ti,this),Mn(this,"nodeTextEdit",ml,this),Mn(this,"edgeTextEdit",bl,this),Mn(this,"nodeTextDraggable",Zf,this),Mn(this,"edgeTextDraggable",Jf,this),Mn(this,"autoExpand",Qf,this),td(this,"multipleSelectKey",""),td(this,"defaultConfig",{}),Zn(this,this.getConfigDetail(u))}var r,a;return r=t,(a=[{key:"updateEditConfig",value:function(u){var d=this.getConfigDetail(u);Zn(this,d)}},{key:"getConfigDetail",value:function(u){var d=u.isSilentMode,l=u.textEdit,p={};if(d===!1&&Zn(p,this.defaultConfig),d===!0){var y=Ru(nd,Gs);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Zn(p,y)}l===!1&&Zn(p,{nodeTextEdit:!1,edgeTextEdit:!1});var m=Ru(u,Gs);return Zn(p,m)}},{key:"getConfig",value:function(){return Ru(this,Gs)}}])&&ed(r.prototype,a),t}()).prototype,"isSilentMode",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fl=Rn(Jr.prototype,"stopZoomGraph",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dl=Rn(Jr.prototype,"stopScrollGraph",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pl=Rn(Jr.prototype,"stopMoveGraph",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hl=Rn(Jr.prototype,"adjustEdge",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vl=Rn(Jr.prototype,"adjustEdgeMiddle",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qf=Rn(Jr.prototype,"adjustEdgeStartAndEnd",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),na=Rn(Jr.prototype,"adjustNodePosition",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jn=Rn(Jr.prototype,"hideAnchors",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yl=Rn(Jr.prototype,"hoverOutline",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),gl=Rn(Jr.prototype,"nodeSelectedOutline",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ti=Rn(Jr.prototype,"edgeSelectedOutline",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ml=Rn(Jr.prototype,"nodeTextEdit",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bl=Rn(Jr.prototype,"edgeTextEdit",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zf=Rn(Jr.prototype,"nodeTextDraggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jf=Rn(Jr.prototype,"edgeTextDraggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qf=Rn(Jr.prototype,"autoExpand",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rn(Jr.prototype,"updateEditConfig",[f.k],Object.getOwnPropertyDescriptor(Jr.prototype,"updateEditConfig"),Jr.prototype),Jr);n(63),function(t){t[t.DEFAULT=1]="DEFAULT",t[t.TEXT_EDIT=2]="TEXT_EDIT",t[t.SHOW_MENU=3]="SHOW_MENU",t[t.ALLOW_CONNECT=4]="ALLOW_CONNECT",t[t.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(t){t.KEY="logic-flow",t.NODE_NAME="lf-node",t.EDGE_NAME="lf-edge"}(rd||(rd={})),function(t){t.NODE="node",t.CIRCLE_NODE="circle-node",t.POLYGON_NODE="polygon-node",t.RECT_NODE="rect-node",t.TEXT_NODE="text-node",t.ELLIPSE_NODE="ellipse-node",t.DIAMOND_NODE="diamond-node",t.HTML_NODE="html-node",t.EDGE="edge",t.LINE_EDGE="line-edge",t.POLYLINE_EDGE="polyline-edge",t.BEZIER_EDGE="bezier-edge",t.GRAPH="graph"}(Pr||(Pr={})),function(t){t.NODE="node",t.EDGE="edge",t.GRAPH="graph"}(xn||(xn={})),function(t){t.ELEMENT_CLICK="element:click",t.NODE_CLICK="node:click",t.NODE_DBCLICK="node:dbclick",t.NODE_DELETE="node:delete",t.NODE_ADD="node:add",t.NODE_DND_ADD="node:dnd-add",t.NODE_DND_DRAG="node:dnd-drag",t.NODE_MOUSEDOWN="node:mousedown",t.NODE_DRAGSTART="node:dragstart",t.NODE_DRAG="node:drag",t.NODE_DROP="node:drop",t.NODE_MOUSEUP="node:mouseup",t.NODE_MOUSEMOVE="node:mousemove",t.NODE_MOUSEENTER="node:mouseenter",t.NODE_MOUSELEAVE="node:mouseleave",t.NODE_CONTEXTMENU="node:contextmenu",t.EDGE_DELETE="edge:delete",t.EDGE_ADD="edge:add",t.EDGE_CLICK="edge:click",t.EDGE_DBCLICK="edge:dbclick",t.EDGE_MOUSEENTER="edge:mouseenter",t.EDGE_MOUSELEAVE="edge:mouseleave",t.EDGE_CONTEXTMENU="edge:contextmenu",t.EDGE_ADJUST="edge:adjust",t.EDGE_EXCHANGE_NODE="edge:exchange-node",t.ANCHOR_DRAGSTART="anchor:dragstart",t.ANCHOR_DRAG="anchor:drag",t.ANCHOR_DROP="anchor:drop",t.ANCHOR_DRAGEND="anchor:dragend",t.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",t.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",t.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",t.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",t.ADJUST_POINT_DRAG="adjustPoint:drag",t.ADJUST_POINT_DROP="adjustPoint:drop",t.ADJUST_POINT_DRAGEND="adjustPoint:dragend",t.BLANK_MOUSEDOWN="blank:mousedown",t.BLANK_DRAGSTART="blank:dragstart",t.BLANK_DRAG="blank:drag",t.BLANK_DROP="blank:drop",t.BLANK_MOUSEMOVE="blank:mousemove",t.BLANK_MOUSEUP="blank:mouseup",t.BLANK_CLICK="blank:click",t.BLANK_CONTEXTMENU="blank:contextmenu",t.SELECTION_MOUSEDOWN="selection:mousedown",t.SELECTION_DRAGSTART="selection:dragstart",t.SELECTION_DRAG="selection:drag",t.SELECTION_DROP="selection:drop",t.SELECTION_MOUSEMOVE="selection:mousemove",t.SELECTION_MOUSEUP="selection:mouseup",t.SELECTION_CONTEXTMENU="selection:contextmenu",t.CONNECTION_NOT_ALLOWED="connection:not-allowed",t.HISTORY_CHANGE="history:change",t.TEXT_UPDATE="text:update",t.GRAPH_TRANSFORM="graph:transform",t.GRAPH_RENDERED="graph:rendered"}(ir||(ir={})),function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Kr||(Kr={}));var uo,pn,El,Ol,wl,xl,No,Sl,od;function jo(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Us(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Us(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Us(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function go(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function zs(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Hs(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Mo(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.INCREASE=1]="INCREASE"})(uo||(uo={}));var id=(pn=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),Hs(this,"MINI_SCALE_SIZE",.2),Hs(this,"MAX_SCALE_SIZE",16),go(this,"SCALE_X",El,this),go(this,"SKEW_Y",Ol,this),go(this,"SKEW_X",wl,this),go(this,"SCALE_Y",xl,this),go(this,"TRANSLATE_X",No,this),go(this,"TRANSLATE_Y",Sl,this),go(this,"ZOOM_SIZE",od,this),Hs(this,"eventCenter",void 0),this.eventCenter=u}var r,a;return r=t,a=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var d=jo(u,2),l=d[0],p=d[1];return[(l-this.TRANSLATE_X)/this.SCALE_X,(p-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var d=jo(u,2),l=d[0],p=d[1];return[l*this.SCALE_X+this.TRANSLATE_X,p*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,d,l){var p=jo(u,2),y=p[0],m=p[1];return[y+d/this.SCALE_X,m+l/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,d){return[u/this.SCALE_X,d/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],d=arguments.length>1?arguments[1]:void 0,l=this.SCALE_X,p=this.SCALE_Y;return u===!0?(l+=this.ZOOM_SIZE,p+=this.ZOOM_SIZE):u===!1?(l-=this.ZOOM_SIZE,p-=this.ZOOM_SIZE):typeof u=="number"&&(l=u,p=u),l<this.MINI_SCALE_SIZE||l>this.MAX_SCALE_SIZE||(d&&(this.TRANSLATE_X-=(l-this.SCALE_X)*d[0],this.TRANSLATE_Y-=(p-this.SCALE_Y)*d[1]),this.SCALE_X=l,this.SCALE_Y=p,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(ir.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,d){this.TRANSLATE_X+=u,this.TRANSLATE_Y+=d,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,d,l,p){var y=jo(this.CanvasPointToHtmlPoint([u,d]),2),m=l/2-y[0],w=p/2-y[1];this.TRANSLATE_X+=m,this.TRANSLATE_Y+=w,this.emitGraphTransform("focusOn")}}],a&&zs(r.prototype,a),t}(),El=Mo(pn.prototype,"SCALE_X",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ol=Mo(pn.prototype,"SKEW_Y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wl=Mo(pn.prototype,"SKEW_X",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xl=Mo(pn.prototype,"SCALE_Y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),No=Mo(pn.prototype,"TRANSLATE_X",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sl=Mo(pn.prototype,"TRANSLATE_Y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),od=Mo(pn.prototype,"ZOOM_SIZE",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Mo(pn.prototype,"zoom",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"zoom"),pn.prototype),Mo(pn.prototype,"resetZoom",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"resetZoom"),pn.prototype),Mo(pn.prototype,"translate",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"translate"),pn.prototype),Mo(pn.prototype,"focusOn",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"focusOn"),pn.prototype),pn),ad=function(t,r){for(var a=-1,u=t==null?0:t.length;++a<u&&r(t[a],a,t)!==!1;);return t},ud=function(t,r){return t&&Ca(r,xi(r),t)},Lh=function(t){var r=[];if(t!=null)for(var a in Object(t))r.push(a);return r},Fh=Object.prototype.hasOwnProperty,Bh=function(t){if(!Cr(t))return Lh(t);var r=qi(t),a=[];for(var u in t)(u!="constructor"||!r&&Fh.call(t,u))&&a.push(u);return a},Du=function(t){return _n(t)?Kn(t,!0):Bh(t)},Gh=function(t,r){return t&&Ca(r,Du(r),t)},sd=n(106),cd=function(t,r){var a=-1,u=t.length;for(r||(r=Array(u));++a<u;)r[a]=t[a];return r},ld=function(t,r){return Ca(t,ro(t),r)},Xs=Ao(Object.getPrototypeOf,Object),fd=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)ho(r,ro(t)),t=Xs(t);return r}:Ou,Uh=function(t,r){return Ca(t,fd(t),r)},Tl=function(t){return Ts(t,Du,fd)},Vs=Object.prototype.hasOwnProperty,zh=function(t){var r=t.length,a=new t.constructor(r);return r&&typeof t[0]=="string"&&Vs.call(t,"index")&&(a.index=t.index,a.input=t.input),a},Al=function(t){var r=new t.constructor(t.byteLength);return new $i(r).set(new $i(t)),r},Hh=function(t,r){var a=r?Al(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)},Xh=/\w*$/,Vh=function(t){var r=new t.constructor(t.source,Xh.exec(t));return r.lastIndex=t.lastIndex,r},Pl=Tr?Tr.prototype:void 0,dd=Pl?Pl.valueOf:void 0,Wh=function(t){return dd?Object(dd.call(t)):{}},pd=function(t,r){var a=r?Al(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)},Yh=function(t,r,a){var u=t.constructor;switch(r){case"[object ArrayBuffer]":return Al(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return Hh(t,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return pd(t,a);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return Vh(t);case"[object Symbol]":return Wh(t)}},hd=Object.create,La=function(){function t(){}return function(r){if(!Cr(r))return{};if(hd)return hd(r);t.prototype=r;var a=new t;return t.prototype=void 0,a}}(),vd=function(t){return typeof t.constructor!="function"||qi(t)?{}:La(Xs(t))},$h=function(t){return So(t)&&_(t)=="[object Map]"},Nl=Ln.a&&Ln.a.isMap,jl=Nl?Vo(Nl):$h,Kh=function(t){return So(t)&&_(t)=="[object Set]"},Ml=Ln.a&&Ln.a.isSet,qh=Ml?Vo(Ml):Kh,yd="[object Arguments]",gd="[object Function]",Zh="[object Object]",Qr={};Qr[yd]=Qr["[object Array]"]=Qr["[object ArrayBuffer]"]=Qr["[object DataView]"]=Qr["[object Boolean]"]=Qr["[object Date]"]=Qr["[object Float32Array]"]=Qr["[object Float64Array]"]=Qr["[object Int8Array]"]=Qr["[object Int16Array]"]=Qr["[object Int32Array]"]=Qr["[object Map]"]=Qr["[object Number]"]=Qr["[object Object]"]=Qr["[object RegExp]"]=Qr["[object Set]"]=Qr["[object String]"]=Qr["[object Symbol]"]=Qr["[object Uint8Array]"]=Qr["[object Uint8ClampedArray]"]=Qr["[object Uint16Array]"]=Qr["[object Uint32Array]"]=!0,Qr["[object Error]"]=Qr[gd]=Qr["[object WeakMap]"]=!1;var ku=function t(r,a,u,d,l,p){var y,m=1&a,w=2&a,T=4&a;if(u&&(y=l?u(r,d,l,p):u(r)),y!==void 0)return y;if(!Cr(r))return r;var M=Gn(r);if(M){if(y=zh(r),!m)return cd(r,y)}else{var C=_(r),$=C==gd||C=="[object GeneratorFunction]";if(Object(yo.a)(r))return Object(sd.a)(r,m);if(C==Zh||C==yd||$&&!l){if(y=w||$?{}:vd(r),!m)return w?Uh(r,Gh(y,r)):ld(r,ud(y,r))}else{if(!Qr[C])return l?r:{};y=Yh(r,C,m)}}p||(p=new po);var ae=p.get(r);if(ae)return ae;p.set(r,y),qh(r)?r.forEach(function(je){y.add(t(je,a,u,je,r,p))}):jl(r)&&r.forEach(function(je,Re){y.set(Re,t(je,a,u,Re,r,p))});var ve=M?void 0:(T?w?Tl:Na:w?Du:xi)(r);return ad(ve||r,function(je,Re){ve&&(je=r[Re=je]),Ls(y,Re,t(je,a,u,Re,r,p))}),y},nn=function(t){return ku(t,5)},Fa=function(t,r,a){(a!==void 0&&!B(t[r],a)||a===void 0&&!(r in t))&&ju(t,r,a)},Jh=function(t){return So(t)&&_n(t)},Ba=Function.prototype,Ga=Object.prototype,md=Ba.toString,Ua=Ga.hasOwnProperty,bd=md.call(Object),za=function(t){if(!So(t)||Xr(t)!="[object Object]")return!1;var r=Xs(t);if(r===null)return!0;var a=Ua.call(r,"constructor")&&r.constructor;return typeof a=="function"&&a instanceof a&&md.call(a)==bd},Cu=function(t,r){if((r!=="constructor"||typeof t[r]!="function")&&r!="__proto__")return t[r]},Rl=function(t){return Ca(t,Du(t))},Dl=function(t,r,a,u,d,l,p){var y=Cu(t,a),m=Cu(r,a),w=p.get(m);if(w)Fa(t,a,w);else{var T=l?l(y,m,a+"",t,r,p):void 0,M=T===void 0;if(M){var C=Gn(m),$=!C&&Object(yo.a)(m),ae=!C&&!$&&Ki(m);T=m,C||$||ae?Gn(y)?T=y:Jh(y)?T=cd(y):$?(M=!1,T=Object(sd.a)(m,!0)):ae?(M=!1,T=pd(m,!0)):T=[]:za(m)||Xo(m)?(T=y,Xo(y)?T=Rl(y):Cr(y)&&!Go(y)||(T=vd(m))):M=!1}M&&(p.set(m,T),d(T,m,u,l,p),p.delete(m)),Fa(t,a,T)}},kl=function t(r,a,u,d,l){r!==a&&ks(a,function(p,y){if(l||(l=new po),Cr(p))Dl(r,a,y,u,t,d,l);else{var m=d?d(Cu(r,y),p,y+"",r,a,l):void 0;m===void 0&&(m=p),Fa(r,y,m)}},Du)},Ws=$f(function(t,r,a){kl(t,r,a)}),Ys={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},Cl=function(t){var r=nn(Ys);return t&&(r=Ws(r,t)),r};n(77),n(158);function _d(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var Ed=function(){function t(){var u,d,l;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,t),l={},(d="_events")in(u=this)?Object.defineProperty(u,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[d]=l}var r,a;return r=t,(a=[{key:"on",value:function(u,d,l){var p=this;return u==null||u.split(",").forEach(function(y){y=y.trim(),p._events[y]||(p._events[y]=[]),p._events[y].push({callback:d,once:!!l})}),this}},{key:"once",value:function(u,d){var l=this;u==null||u.split(",").forEach(function(p){return p=p.trim(),l.on(p,d,!0)})}},{key:"emit",value:function(u,d){var l=this;u==null||u.split(",").forEach(function(p){var y=l._events[p]||[],m=l._events["*"]||[],w=function(T){for(var M=T.length,C=0;C<M;C++)if(T[C]){var $=T[C],ae=$.callback;$.once&&(T.splice(C,1),T.length===0&&delete l._events[p],M--,C--),ae.apply(l,[d])}};w(y),w(m)})}},{key:"off",value:function(u,d){var l=this;return u||(this._events={}),u.split(",").forEach(function(p){if(d){for(var y=l._events[p]||[],m=y.length,w=0;w<m;w++)y[w].callback===d&&(y.splice(w,1),m--,w--);y.length===0&&delete l._events[p]}else delete l._events[p]}),this}},{key:"getEvents",value:function(){return this._events}}])&&_d(r.prototype,a),t}();function fi(t,r){return r*Math.round(t/r)||t}function Il(t,r){return t%r}function Iu(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return $s(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return $s(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $s(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var Ks,qs=function(t,r,a){var u=Iu(t,2),d=u[0],l=u[1],p=Iu(r,2),y=p[0],m=p[1],w=Iu(a,2),T=w[0],M=w[1];return d>y&&d<T&&l>m&&l<M},Ll=function(t,r){var a=!1;switch(r.multipleSelectKey){case"meta":a=t.metaKey;break;case"alt":a=t.altKey;break;case"shift":a=t.shiftKey;break;case"ctrl":a=t.ctrlKey;break;default:a=!1}return a},Od=(n(78),n(161),n(125),n(79),n(30),n(12),n(13),n(14),n(47),new Uint8Array(16));function Fl(){if(!Ks&&!(Ks=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ks(Od)}for(var wd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,xd=function(t){return typeof t=="string"&&wd.test(t)},Dn=[],Lu=0;Lu<256;++Lu)Dn.push((Lu+256).toString(16).substr(1));var Sd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(Dn[t[r+0]]+Dn[t[r+1]]+Dn[t[r+2]]+Dn[t[r+3]]+"-"+Dn[t[r+4]]+Dn[t[r+5]]+"-"+Dn[t[r+6]]+Dn[t[r+7]]+"-"+Dn[t[r+8]]+Dn[t[r+9]]+"-"+Dn[t[r+10]]+Dn[t[r+11]]+Dn[t[r+12]]+Dn[t[r+13]]+Dn[t[r+14]]+Dn[t[r+15]]).toLowerCase();if(!xd(a))throw TypeError("Stringified UUID is invalid");return a},Fu=function(t,r,a){var u=(t=t||{}).random||(t.rng||Fl)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,r){a=a||0;for(var d=0;d<16;++d)r[a+d]=u[d];return r}return Sd(u)},di=function(){return Fu()},Td=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=t.nodes.reduce(function(u,d){return u[d.id]=r+Fu(),d.id=u[d.id],u},{});return t.edges.forEach(function(u){u.id=r+Fu(),u.sourceNodeId=a[u.sourceNodeId],u.targetNodeId=a[u.targetNodeId]}),t},oa=(n(104),n(162),function(t,r,a){var u=t.x,d=t.y;return(u-r.x)*(u-a.x)<=0&&(d-r.y)*(d-a.y)<=0});function Zs(t){return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zs(t)}function Bl(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Js(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Bl(Object(a),!0).forEach(function(u){Gl(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Bl(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Gl(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var nt,Ul,Bu,Yo,Ha,Ai,Xa,Va,Pi,Ni,ji,Gu,Uu,Wa,Qs,ec,ia,aa,Ad,Pd,zl,tc=function(t){return t.anchors},zu=function(t,r){for(var a,u=r.nodes,d=u.length-1;d>=0;d--){var l=u[d];if(ev(t,l)){var p=l.getTargetAnchor(t);if(p){var y={node:l,anchorIndex:p.index,anchor:p.anchor};a&&!Qh(l,a.node,r)||(a=y)}}}return a},Qh=function(t,r,a){return t.zIndex>r.zIndex||a.nodesMap[t.id].index>a.nodesMap[r.id].index},Jn=function(t,r,a,u){return Math.hypot(t-a,r-u)},Mi=function(t,r){var a=!1,u=mo(r);return t.x>=u.minX-0&&t.x<=u.maxX+0&&t.y>=u.minY-0&&t.y<=u.maxY+0&&(a=!0),a},ev=function(t,r){var a=!1,u=mo(r);return t.x>=u.minX-5&&t.x<=u.maxX+5&&t.y>=u.minY-5&&t.y<=u.maxY+5&&(a=!0),a},mo=function(t){var r=t.x,a=t.y,u=t.width,d=t.height;return{minX:r-u/2,minY:a-d/2,maxX:r+u/2,maxY:a+d/2,x:r,y:a,width:u,height:d,centerX:r,centerY:a}},Hl=function(t,r,a){var u,d=function(p){var y=p,m=y.x,w=y.y,T=y.width,M=y.height,C=y.radius;return[{x:m-T/2+C,y:w-M/2+C,r:C},{x:m+T/2-C,y:w-M/2+C,r:C},{x:m-T/2+C,y:w+M/2-C,r:C},{x:m+T/2-C,y:w+M/2-C,r:C}]}(a),l=Number.MAX_SAFE_INTEGER;return d.forEach(function(p){var y=Jn(t.x,t.y,p.x,p.y);y<l&&(l=y,u=p)}),Xl(t,r,u)},Xl=function(t,r,a){var u,d=a,l=d.x,p=d.y,y=d.r;if(r===Kr.HORIZONTAL){var m=l-Math.sqrt(y*y-(t.y-p)*(t.y-p)),w=l+Math.sqrt(y*y-(t.y-p)*(t.y-p));u={x:Math.abs(m-t.x)<Math.abs(w-t.x)?m:w,y:t.y}}else if(r===Kr.VERTICAL){var T=p-Math.sqrt(y*y-(t.x-l)*(t.x-l)),M=p+Math.sqrt(y*y-(t.x-l)*(t.x-l)),C=Math.abs(T-t.y)<Math.abs(M-t.y)?T:M;u={x:t.x,y:C}}return u},Nd=function(t,r){var a=r,u=!1,d=a.x-a.width/2+a.radius,l=a.x+a.width/2-a.radius,p=a.y-a.height/2+a.radius,y=a.y+a.height/2-a.radius,m=a.x,w=a.y,T=a.width,M=a.height;return t.y===w+M/2||t.y===w-M/2?u=t.x>d&&t.x<l:t.x!==m+T/2&&t.x!==m-T/2||(u=t.y>p&&t.y<y),u},jd=function(t,r,a){var u,d=a,l=d.x,p=d.y,y=d.rx,m=d.ry;if(r===Kr.HORIZONTAL){var w=l-Math.sqrt(y*y-(t.y-p)*(t.y-p)*y*y/(m*m)),T=l+Math.sqrt(y*y-(t.y-p)*(t.y-p)*y*y/(m*m));u={x:Math.abs(w-t.x)<Math.abs(T-t.x)?w:T,y:t.y}}else if(r===Kr.VERTICAL){var M=p-Math.sqrt(m*m-(t.x-l)*(t.x-l)*m*m/(y*y)),C=p+Math.sqrt(m*m-(t.x-l)*(t.x-l)*m*m/(y*y)),$=Math.abs(M-t.y)<Math.abs(C-t.y)?M:C;u={x:t.x,y:$}}return u},Md=function(t,r,a){for(var u,d=a.pointsPosition,l=Number.MAX_SAFE_INTEGER,p=[],y=0;y<d.length;y++)p.push({start:d[y],end:d[(y+1)%d.length]});return p.forEach(function(m){var w=m.start,T=m.end,M=w,C=T;w.x>T.x&&(M=T,C=w);var $={x:t.x,y:t.y};if(M.x===C.x&&r===Kr.HORIZONTAL&&($={x:M.x,y:t.y}),M.y===C.y&&r===Kr.VERTICAL&&($={x:t.x,y:M.y}),M.x!==C.x&&M.y!==C.y){var ae=(C.y-M.y)/(C.x-M.x),ve=(M.x*C.y-C.x*M.y)/(M.x-C.x);r===Kr.HORIZONTAL?$={x:(t.y-ve)/ae,y:t.y}:r===Kr.VERTICAL&&($={x:t.x,y:ae*t.x+ve})}if(oa($,w,T)){var je=Jn($.x,$.y,t.x,t.y);je<l&&(l=je,u=$)}}),u},Rd=function(t,r,a,u){var d=t.x,l=t.y;return r.x>t.x?d=t.x+a/2:r.x<t.x&&(d=t.x-a/2),r.y>t.y?l=t.y+u/2:r.y<t.y&&(l=t.y-u/2),{x:d,y:l}},Dd=function(t){var r=t.rows,a=t.style,u=t.rowsLength,d=t.className,l=document.createElement("div");l.style.fontSize=a.fontSize,l.style.width=a.width,l.className=d,l.style.lineHeight=a.lineHeight,l.style.padding=a.padding,a.fontFamily&&(l.style.fontFamily=a.fontFamily),u>1?r.forEach(function(y){var m=document.createElement("div");m.textContent=y,l.appendChild(m)}):l.textContent=r,document.body.appendChild(l);var p=l.clientHeight;return document.body.removeChild(l),p},Vl=function(t){var r=t.rows,a=t.rowsLength,u=t.fontSize,d=0;return r&&r.forEach(function(l){var p=St(l);d=p>d?p:d}),{width:Math.ceil(d/2)*u+u/4,height:a*(u+2)+u/4}},Hu=function(t){return Zs(t)!=="object"?{isAllPass:!!t,msg:t?"":""}:t},Xn=function(t){try{return nn(t)}catch{return t}},tv=1e3,Wl=999,Ya=function(){return++tv};function Xu(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Un(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Xu(Object(a),!0).forEach(function(u){Qn(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xu(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function hn(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function rc(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Qn(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ar(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Vu=(nt=function(){function t(u,d){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),Qn(this,"id",""),hn(this,"type",Ul,this),hn(this,"sourceNodeId",Bu,this),hn(this,"targetNodeId",Yo,this),hn(this,"startPoint",Ha,this),hn(this,"endPoint",Ai,this),hn(this,"text",Xa,this),hn(this,"properties",Va,this),hn(this,"points",Pi,this),hn(this,"pointsList",Ni,this),hn(this,"isSelected",ji,this),hn(this,"isHovered",Gu,this),hn(this,"isHitable",Uu,this),hn(this,"draggable",Wa,this),hn(this,"visible",Qs,this),Qn(this,"virtual",!1),hn(this,"isAnimation",ec,this),hn(this,"isShowAdjustPoint",ia,this),Qn(this,"graphModel",void 0),hn(this,"zIndex",aa,this),Qn(this,"BaseType",xn.EDGE),Qn(this,"modelType",Pr.EDGE),hn(this,"state",Ad,this),Qn(this,"additionStateData",void 0),Qn(this,"sourceAnchorId",""),Qn(this,"targetAnchorId",""),Qn(this,"menu",void 0),Qn(this,"customTextPosition",!1),hn(this,"style",Pd,this),hn(this,"arrowConfig",zl,this),this.graphModel=d,this.initEdgeData(u),this.setAttributes()}var r,a;return r=t,a=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var d=this.graphModel.idGenerator,l=d&&d(u.type),p=this.createId();u.id=p||l||di()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")");var y=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=y,Zn(this,vt(u)),this.graphModel.overlapMode===uo.INCREASE&&(this.zIndex=u.zIndex||Ya()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Un(Un({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Un({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return nn(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return nn(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),d=this.getEdgeAnimationStyle(),l=this.graphModel.theme.arrow,p=this.isAnimation?d.stroke:u.stroke;return Un(Un({},u),{},{fill:p,stroke:p},l)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return nn(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,d;return(u=this.graphModel)===null||u===void 0||(d=u.nodesMap[this.sourceNodeId])===null||d===void 0?void 0:d.model}},{key:"targetNode",get:function(){var u,d;return(u=this.graphModel)===null||u===void 0||(d=u.nodesMap[this.targetNodeId])===null||d===void 0?void 0:d.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,d){var l,p;return tc(u).forEach(function(y){var m=$t(y,d);(p===void 0||m<p)&&(p=m,l=y)}),l}},{key:"getEndAnchor",value:function(u){var d,l,p=this;return tc(u).forEach(function(y){var m=$t(y,p.startPoint);(l===void 0||m<l)&&(l=m,d=y)}),d}},{key:"getProperties",value:function(){return Object(f.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,d=u.x,l=u.y,p=u.value,y={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(f.I)(this.properties)};return p&&(y.text={x:d,y:l,value:p}),this.graphModel.overlapMode===uo.INCREASE&&(y.zIndex=this.zIndex),y}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,d){this.properties[u]=Xn(d),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Un(Un({},Object(f.I)(this.properties)),Xn(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var d=this.arrowConfig,l=d.markerEnd,p=d.markerStart;p&&p==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),l&&l==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,d){this.style=Un(Un({},this.style),{},Qn({},u,Xn(d)))}},{key:"setStyles",value:function(u){this.style=Un(Un({},this.style),Xn(u))}},{key:"updateStyles",value:function(u){this.style=Un({},Xn(u))}},{key:"formatText",value:function(u){var d=this.textPosition,l=d.x,p=d.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||l,y:u.text.y||p,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:l,y:p,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,d=u.x,l=u.y;this.text.x=d,this.text.y=l}},{key:"moveText",value:function(u,d){if(this.text){var l=this.text,p=l.x,y=l.y,m=l.value,w=l.draggable,T=l.editable;this.text={value:m,draggable:w,x:p+u,y:y+d,editable:T}}}},{key:"setText",value:function(u){u&&Zn(this.text,u)}},{key:"updateText",value:function(u){this.text=Un(Un({},Object(f.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var d=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:d.x,y:d.y}),this.targetAnchorId||(this.targetAnchorId=d.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,d){this.state=u,this.additionStateData=d}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,d){this.startPoint.x+=u,this.startPoint.y+=d}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,d){this.endPoint.x+=u,this.endPoint.y+=d}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Zn(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var d=u.startPoint,l=u.endPoint;this.updateStartPoint({x:d.x,y:d.y}),this.updateEndPoint({x:l.x,y:l.y})}}],a&&rc(r.prototype,a),t}(),Ul=ar(nt.prototype,"type",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bu=ar(nt.prototype,"sourceNodeId",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Yo=ar(nt.prototype,"targetNodeId",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ha=ar(nt.prototype,"startPoint",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=ar(nt.prototype,"endPoint",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xa=ar(nt.prototype,"text",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Va=ar(nt.prototype,"properties",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pi=ar(nt.prototype,"points",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ni=ar(nt.prototype,"pointsList",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ji=ar(nt.prototype,"isSelected",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gu=ar(nt.prototype,"isHovered",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Uu=ar(nt.prototype,"isHitable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wa=ar(nt.prototype,"draggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Qs=ar(nt.prototype,"visible",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ec=ar(nt.prototype,"isAnimation",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ia=ar(nt.prototype,"isShowAdjustPoint",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),aa=ar(nt.prototype,"zIndex",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ad=ar(nt.prototype,"state",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pd=ar(nt.prototype,"style",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),zl=ar(nt.prototype,"arrowConfig",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:""}}}),ar(nt.prototype,"sourceNode",[f.m],Object.getOwnPropertyDescriptor(nt.prototype,"sourceNode"),nt.prototype),ar(nt.prototype,"targetNode",[f.m],Object.getOwnPropertyDescriptor(nt.prototype,"targetNode"),nt.prototype),ar(nt.prototype,"textPosition",[f.m],Object.getOwnPropertyDescriptor(nt.prototype,"textPosition"),nt.prototype),ar(nt.prototype,"setProperty",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setProperty"),nt.prototype),ar(nt.prototype,"deleteProperty",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteProperty"),nt.prototype),ar(nt.prototype,"setProperties",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setProperties"),nt.prototype),ar(nt.prototype,"changeEdgeId",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeEdgeId"),nt.prototype),ar(nt.prototype,"setStyle",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setStyle"),nt.prototype),ar(nt.prototype,"setStyles",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setStyles"),nt.prototype),ar(nt.prototype,"updateStyles",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateStyles"),nt.prototype),ar(nt.prototype,"formatText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"formatText"),nt.prototype),ar(nt.prototype,"resetTextPosition",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"resetTextPosition"),nt.prototype),ar(nt.prototype,"moveText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveText"),nt.prototype),ar(nt.prototype,"setText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setText"),nt.prototype),ar(nt.prototype,"updateText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateText"),nt.prototype),ar(nt.prototype,"setAnchors",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setAnchors"),nt.prototype),ar(nt.prototype,"setSelected",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setSelected"),nt.prototype),ar(nt.prototype,"setHovered",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setHovered"),nt.prototype),ar(nt.prototype,"setHitable",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setHitable"),nt.prototype),ar(nt.prototype,"openEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"openEdgeAnimation"),nt.prototype),ar(nt.prototype,"closeEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"closeEdgeAnimation"),nt.prototype),ar(nt.prototype,"setElementState",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementState"),nt.prototype),ar(nt.prototype,"updateStartPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateStartPoint"),nt.prototype),ar(nt.prototype,"moveStartPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveStartPoint"),nt.prototype),ar(nt.prototype,"updateEndPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateEndPoint"),nt.prototype),ar(nt.prototype,"moveEndPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveEndPoint"),nt.prototype),ar(nt.prototype,"setZIndex",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setZIndex"),nt.prototype),ar(nt.prototype,"initPoints",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"initPoints"),nt.prototype),ar(nt.prototype,"updateAttributes",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateAttributes"),nt.prototype),ar(nt.prototype,"getAdjustStart",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAdjustStart"),nt.prototype),ar(nt.prototype,"getAdjustEnd",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAdjustEnd"),nt.prototype),ar(nt.prototype,"updateAfterAdjustStartAndEnd",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateAfterAdjustStartAndEnd"),nt.prototype),nt),$a=Vu;function Ka(t){return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ka(t)}function Wu(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function qa(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Wu(Object(a),!0).forEach(function(u){kd(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Wu(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Yu(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $u(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ua(){return ua=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=Ku(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},ua.apply(this,arguments)}function Ku(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Ri(t))!==null;);return t}function nc(t,r){return nc=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},nc(t,r)}function qu(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ri(t);if(r){var d=Ri(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return sa(this,a)}}function sa(t,r){if(r&&(Ka(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yl(t)}function Yl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ri(t){return Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ri(t)}function kd(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var wr,Cd,$o=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&nc(l,p)})(d,t);var r,a,u=qu(d);function d(){var l;Yu(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return kd(Yl(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.LINE_EDGE),l}return r=d,(a=[{key:"getEdgeStyle",value:function(){var l=this.graphModel.theme.line;return qa(qa({},ua(Ri(d.prototype),"getEdgeStyle",this).call(this)),nn(l))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&$u(r.prototype,a),d}($a);function oc(t){return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},oc(t)}function Id(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return $l(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return $l(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $l(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Ld(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Kl(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ld(Object(a),!0).forEach(function(u){Zo(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ld(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function rv(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function Ko(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Fd(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function qo(){return qo=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=Di(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},qo.apply(this,arguments)}function Di(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=vn(t))!==null;);return t}function ic(t,r){return ic=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ic(t,r)}function ql(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=vn(t);if(r){var d=vn(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ac(this,a)}}function ac(t,r){if(r&&(oc(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Za(t)}function Za(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vn(t){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},vn(t)}function Zo(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Ir(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Vn=(wr=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ic(l,p)})(d,t);var r,a,u=ql(d);function d(){var l;Ko(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Zo(Za(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.POLYLINE_EDGE),Zo(Za(l),"draggingPointList",void 0),rv(Za(l),"dbClickPosition",Cd,Za(l)),l}return r=d,(a=[{key:"initEdgeData",value:function(l){this.offset=30,qo(vn(d.prototype),"initEdgeData",this).call(this,l)}},{key:"getEdgeStyle",value:function(){var l=this.graphModel.theme.polyline;return Kl(Kl({},qo(vn(d.prototype),"getEdgeStyle",this).call(this)),nn(l))}},{key:"getTextPosition",value:function(){var l,p=(l=this.text)===null||l===void 0?void 0:l.value;if(this.dbClickPosition&&!p){var y=this.dbClickPosition;return{x:y.x,y:y.y}}var m=Se(this.points),w=Id(ut(m),2),T=w[0],M=w[1];return{x:(T.x+M.x)/2,y:(T.y+M.y)/2}}},{key:"getAfterAnchor",value:function(l,p,y){var m,w;return y.forEach(function(T){var M;l===Kr.HORIZONTAL?M=Math.abs(p.y-T.y):l===Kr.VERTICAL&&(M=Math.abs(p.x-T.x)),(!w||w>M)&&(w=M,m=T)}),m}},{key:"getCrossPoint",value:function(l,p,y){var m;return l===Kr.HORIZONTAL?m={x:y.x,y:p.y}:l===Kr.VERTICAL&&(m={x:p.x,y:y.y}),m}},{key:"removeCrossPoints",value:function(l,p,y){var m=y.map(function(Re){return Re});if(l===1){var w=m[l],T=m[p],M=m[l-1];if(pt(M,w,this.sourceNode)){if(_t(w,T,this.sourceNode)){var C=it(w,T,this.sourceNode);C&&(m[l]=C,m.splice(l-1,1),l--,p--)}}else this.sourceNode.anchors.forEach(function(Re){(Re.x===M.x&&Re.x===w.x||Re.y===M.y&&Re.y===w.y)&&Jn(Re.x,Re.y,w.x,w.y)<Jn(M.x,M.y,w.x,w.y)&&(m[l-1]=Re)})}if(p===y.length-2){var $=m[l],ae=m[p],ve=m[p+1];if(pt(ae,ve,this.targetNode)){if(_t($,ae,this.targetNode)){var je=it($,ae,this.targetNode);je&&(m[p]=je,m.splice(p+1,1))}}else this.targetNode.anchors.forEach(function(Re){(Re.x===ve.x&&Re.x===ae.x||Re.y===ve.y&&Re.y===ae.y)&&Jn(Re.x,Re.y,ae.x,ae.y)<Jn(ve.x,ve.y,ae.x,ae.y)&&(m[p+1]=Re)})}return m}},{key:"getDraggingPoints",value:function(l,p,y,m,w){var T=w.map(function($){return $}),M=this.getAfterAnchor(l,y,m),C=this.getCrossPoint(l,y,M);return p==="start"?(T.unshift(C),T.unshift(M)):(T.push(C),T.push(M)),T}},{key:"updateCrossPoints",value:function(l){var p=l.map(function(lt){return lt}),y=l[0],m=l[1],w=l[p.length-2],T=l[p.length-1],M=this.sourceNode,C=this.targetNode,$=M.modelType,ae=C.modelType,ve=dt(y,m),je=p[0];switch($){case Pr.RECT_NODE:M.radius!==0&&(Nd(y,M)||(je=Hl(y,ve,M)));break;case Pr.CIRCLE_NODE:je=Xl(y,ve,M);break;case Pr.ELLIPSE_NODE:je=jd(y,ve,M);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:je=Md(y,ve,M)}p[0]=je;var Re=dt(w,T),Ye=p[p.length-1];switch(ae){case Pr.RECT_NODE:C.radius!==0&&(Nd(T,C)||(Ye=Hl(T,Re,C)));break;case Pr.CIRCLE_NODE:Ye=Xl(T,Re,C);break;case Pr.ELLIPSE_NODE:Ye=jd(T,Re,C);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:Ye=Md(T,Re,C)}return p[p.length-1]=Ye,p}},{key:"getData",value:function(){var l=qo(vn(d.prototype),"getData",this).call(this),p=this.pointsList.map(function(y){return{x:y.x,y:y.y}});return Object.assign({},l,{pointsList:p})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(l){return"".concat(l.x,",").concat(l.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var l=ft({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=l,this.points=l.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ")}},{key:"updateStartPoint",value:function(l){this.startPoint=l,this.updatePoints()}},{key:"moveStartPoint",value:function(l,p){this.startPoint.x+=l,this.startPoint.y+=p,this.updatePoints()}},{key:"updateEndPoint",value:function(l){this.endPoint=l,this.updatePoints()}},{key:"moveEndPoint",value:function(l,p){this.endPoint.x+=l,this.endPoint.y+=p,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(l){return l})}},{key:"dragAppendSimple",value:function(l,p){this.isDragging=!0;var y=l.start,m=l.end,w=l.startIndex,T=l.endIndex,M=l.direction,C=this.pointsList,$=C;return M===Kr.HORIZONTAL?(C[w]={x:y.x,y:y.y+p.y},C[T]={x:m.x,y:m.y+p.y},$=this.pointsList.map(function(ae){return ae})):M===Kr.VERTICAL&&(C[w]={x:y.x+p.x,y:y.y},C[T]={x:m.x+p.x,y:m.y},$=this.pointsList.map(function(ae){return ae})),this.updatePointsAfterDrag($),this.draggingPointList=$,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},C[w]),end:Object.assign({},C[T]),startIndex:w,endIndex:T,direction:M}}},{key:"dragAppend",value:function(l,p){this.isDragging=!0;var y=l.start,m=l.end,w=l.startIndex,T=l.endIndex,M=l.direction,C=this.pointsList;if(M===Kr.HORIZONTAL){C[w]={x:y.x,y:y.y+p.y},C[T]={x:m.x,y:m.y+p.y};var $=this.pointsList.map(function(Rt){return Rt});if(w!==0&&T!==this.pointsList.length-1&&($=this.removeCrossPoints(w,T,$)),w===0){var ae={x:y.x,y:y.y+p.y};if(!Mi(ae,this.sourceNode)){var ve=this.sourceNode.anchors;$=this.getDraggingPoints(M,"start",ae,ve,$)}}if(T===this.pointsList.length-1){var je={x:m.x,y:m.y+p.y};if(!Mi(je,this.targetNode)){var Re=this.targetNode.anchors;$=this.getDraggingPoints(M,"end",je,Re,$)}}this.updatePointsAfterDrag($),this.draggingPointList=$}else if(M===Kr.VERTICAL){C[w]={x:y.x+p.x,y:y.y},C[T]={x:m.x+p.x,y:m.y};var Ye=this.pointsList.map(function(Rt){return Rt});if(w!==0&&T!==this.pointsList.length-1&&(Ye=this.removeCrossPoints(w,T,Ye)),w===0){var lt={x:y.x+p.x,y:y.y};if(!Mi(lt,this.sourceNode)){var Ct=this.sourceNode.anchors;Ye=this.getDraggingPoints(M,"start",lt,Ct,Ye)}}if(T===this.pointsList.length-1){var wt={x:m.x+p.x,y:m.y};if(!Mi(wt,this.targetNode)){var er=this.targetNode.anchors;Ye=this.getDraggingPoints(M,"end",wt,er,Ye)}}this.updatePointsAfterDrag(Ye),this.draggingPointList=Ye}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},C[w]),end:Object.assign({},C[T]),startIndex:w,endIndex:T,direction:M}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var l=at(Se(this.points));this.pointsList=l.map(function(m){return m}),this.draggingPointList=[];var p=l[0];this.startPoint=Object.assign({},p);var y=l[l.length-1];this.endPoint=Object.assign({},y)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(l){var p=this.updateCrossPoints(l);this.points=p.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var l=this.pointsList;return l[l.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(l){var p=l.startPoint,y=l.endPoint,m=l.sourceNode,w=l.targetNode,T=ft({x:p.x,y:p.y},{x:y.x,y:y.y},m,w,this.offset||0);this.pointsList=T,this.initPoints()}}])&&Fd(r.prototype,a),d}($a),Cd=Ir(wr.prototype,"dbClickPosition",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ir(wr.prototype,"initPoints",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"initPoints"),wr.prototype),Ir(wr.prototype,"updatePoints",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePoints"),wr.prototype),Ir(wr.prototype,"updateStartPoint",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateStartPoint"),wr.prototype),Ir(wr.prototype,"moveStartPoint",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveStartPoint"),wr.prototype),Ir(wr.prototype,"updateEndPoint",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateEndPoint"),wr.prototype),Ir(wr.prototype,"moveEndPoint",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveEndPoint"),wr.prototype),Ir(wr.prototype,"dragAppendStart",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendStart"),wr.prototype),Ir(wr.prototype,"dragAppendSimple",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendSimple"),wr.prototype),Ir(wr.prototype,"dragAppend",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppend"),wr.prototype),Ir(wr.prototype,"dragAppendEnd",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendEnd"),wr.prototype),Ir(wr.prototype,"updatePointsAfterDrag",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePointsAfterDrag"),wr.prototype),Ir(wr.prototype,"getAdjustStart",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustStart"),wr.prototype),Ir(wr.prototype,"getAdjustEnd",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustEnd"),wr.prototype),Ir(wr.prototype,"updateAfterAdjustStartAndEnd",[f.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateAfterAdjustStartAndEnd"),wr.prototype),wr),Ja=function(t){var r=t.start,a=t.end,u=t.offset,d=t.verticalLength,l=t.type,p={leftX:0,leftY:0,rightX:0,rightY:0},y=Math.atan((a.y-r.y)/(a.x-r.x)),m=Math.atan(u/d),w=Math.sqrt(d*d+u*u);return l==="start"?a.x>=r.x?(p.leftX=r.x+w*Math.sin(y+m),p.leftY=r.y-w*Math.cos(y+m),p.rightX=r.x-w*Math.sin(y-m),p.rightY=r.y+w*Math.cos(y-m)):(p.leftX=r.x-w*Math.sin(y+m),p.leftY=r.y+w*Math.cos(y+m),p.rightX=r.x+w*Math.sin(y-m),p.rightY=r.y-w*Math.cos(y-m)):l==="end"&&(a.x>=r.x?(p.leftX=a.x+w*Math.sin(y-m),p.leftY=a.y-w*Math.cos(y-m),p.rightX=a.x-w*Math.sin(y+m),p.rightY=a.y+w*Math.cos(y+m)):(p.leftX=a.x-w*Math.sin(y-m),p.leftY=a.y+w*Math.cos(y-m),p.rightX=a.x+w*Math.sin(y+m),p.rightY=a.y-w*Math.cos(y+m))),p},nv={x:1,y:0,z:0};function Bd(t){var r=Math.hypot(t.x,t.y);return{x:t.x/r,y:t.y/r,z:0}}function ov(t){return u=function(l,p){return l.x*p.y-l.y*p.x}(r=nv,a=t),d=Math.acos(function(l,p){var y=[l.x,l.y,l.z];return[p.x,p.y,p.z].reduce(function(m,w,T){return m+w*y[T]})}(Bd(r),Bd(a))),u>=0?d:-d;var r,a,u,d}function Gd(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Zu(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Gd(Object(a),!0).forEach(function(u){iv(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gd(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function iv(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function av(t){return function(r){if(Array.isArray(r))return sc(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Ud(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zl(t){return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zl(t)}function uc(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||Ud(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ud(t,r){if(t){if(typeof t=="string")return sc(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?sc(t,r):void 0}}function sc(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var cc=function(t){var r=[],a={};return t.forEach(function(u){var d="".concat(u.x,"-").concat(u.y);u.id=d,a[d]=u}),Object.keys(a).forEach(function(u){r.push(a[u])}),r},Ju=function(t,r){return t.width===0&&t.height===0?t:{centerX:t.centerX,centerY:t.centerY,minX:t.minX-r,minY:t.minY-r,maxX:t.maxX+r,maxY:t.maxY+r,height:t.height+2*r,width:t.width+2*r}},lc=function(t,r){var a=function(u,d){var l=Math.abs(u.x-d.centerX),p=Math.abs(u.y-d.centerY);return l/d.width>p/d.height?Kr.HORIZONTAL:Kr.VERTICAL}(r,t);return a===Kr.HORIZONTAL?{x:r.x>t.centerX?t.maxX:t.minX,y:r.y}:{x:r.x,y:r.y>t.centerY?t.maxY:t.minY}},zd=function(t,r){var a=Math.min(t.minX,r.minX),u=Math.min(t.minY,r.minY),d=Math.max(t.maxX,r.maxX),l=Math.max(t.maxY,r.maxY);return{centerX:(a+d)/2,centerY:(u+l)/2,minX:a,minY:u,maxX:d,maxY:l,height:l-u,width:d-a}},Qa=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=[],u=[];t.forEach(function(T){a.push(T.x),u.push(T.y)});var d=Math.min.apply(Math,a),l=Math.max.apply(Math,a),p=Math.min.apply(Math,u),y=Math.max.apply(Math,u),m=l-d,w=y-p;return r&&(m+=r,w+=r),{centerX:(d+l)/2,centerY:(p+y)/2,maxX:l,maxY:y,minX:d,minY:p,x:(d+l)/2,y:(p+y)/2,height:w,width:m}},fc=function(t){var r=t.minX,a=t.minY,u=t.maxX,d=t.maxY;return[{x:r,y:a},{x:u,y:a},{x:u,y:d},{x:r,y:d}]},A=function(t,r){var a=t.x,u=t.y;return a<r.minX||a>r.maxX||u<r.minY||u>r.maxY},G=function(t,r){return Math.abs(t.x-r.x)+Math.abs(t.y-r.y)},J=function(t,r,a,u,d){return G(t,r)+G(t,a)+function(l,p){var y=0;return p.forEach(function(m){m&&(l.x===m.x&&(y+=-2),l.y===m.y&&(y+=-2))}),y}(t,[r,a,u,d])},Ie=function t(r,a,u,d,l){l||(l=0),r.unshift(a[d]),u[d]&&u[d]!==d&&l<=100&&t(r,a,u,u[d],l+1)},Ve=function(t,r,a,u){var d=r.x-t.x,l=r.y-t.y,p=u.x-a.x,y=u.y-a.y,m=(-l*(t.x-a.x)+d*(t.y-a.y))/(-p*l+d*y),w=(p*(t.y-a.y)-y*(t.x-a.x))/(-p*l+d*y);return m>=0&&m<=1&&w>=0&&w<=1},ke=function(t,r,a){if(a.width===0&&a.height===0)return!1;var u=uc(fc(a),4),d=u[0],l=u[1],p=u[2],y=u[3];return Ve(t,r,d,l)||Ve(t,r,d,y)||Ve(t,r,l,p)||Ve(t,r,p,y)},Ge=function(t,r,a,u,d,l,p){var y=[],m=[r],w={},T={},M={};T[r.id]=0,M[r.id]=J(r,a,r);var C={};t.forEach(function(ve){C[ve.id]=ve});for(var $=function(){var ve,je,Re,Ye=void 0,lt=1/0;if(m.forEach(function(wt){M[wt.id]<lt&&(lt=M[wt.id],Ye=wt)}),Ye===a){var Ct=[];return Ie(Ct,C,w,a.id),{v:Ct}}je=Ye,(Re=(ve=m).indexOf(je))>-1&&ve.splice(Re,1),y.push(Ye),function(wt,er,Rt,Tt){var vr=[];return wt.forEach(function(Fr){Fr!==er&&(Fr.x!==er.x&&Fr.y!==er.y||ke(Fr,er,Rt)||ke(Fr,er,Tt)||vr.push(Fr))}),cc(vr)}(t,Ye,u,d).forEach(function(wt){if(y.indexOf(wt)===-1){m.indexOf(wt)===-1&&m.push(wt);var er=M[Ye.id]+G(Ye,wt);T[wt.id]&&er>=T[wt.id]||(w[wt.id]=Ye.id,T[wt.id]=er,M[wt.id]=T[wt.id]+J(wt,a,r,l,p))}})};m.length;){var ae=$();if(Zl(ae)==="object")return ae.v}return[r,a]},ot=function(t){return mo(t)},at=function(t){for(var r=1;r<t.length-1;){var a=t[r-1],u=t[r],d=t[r+1];a.x===u.x&&u.x===d.x||a.y===u.y&&u.y===d.y?t.splice(r,1):r++}return t},ft=function(t,r,a,u,d){var l,p,y=ot(a),m=ot(u),w=Ju(y,d),T=Ju(m,d),M=lc(w,t),C=lc(T,r);if(l=w,p=T,2*Math.abs(l.centerX-p.centerX)<l.width+p.width&&2*Math.abs(l.centerY-p.centerY)<l.height+p.height){var $=Ue(t,r,M,C);return[t,M].concat(av($),[C,r])}var ae=Qa([M,C]),ve=zd(w,ae),je=zd(T,ae),Re=[];Re=(Re=Re.concat(fc(ve))).concat(fc(je));var Ye={x:(t.x+r.x)/2,y:(t.y+r.y)/2};[ae,ve,je].forEach(function(Ct){Re=Re.concat(function(wt,er){return function(Rt,Tt){return Tt<Rt.minX||Tt>Rt.maxX?[]:[{x:Tt,y:Rt.minY},{x:Tt,y:Rt.maxY}]}(wt,er.x).concat(function(Rt,Tt){return Tt<Rt.minY||Tt>Rt.maxY?[]:[{x:Rt.minX,y:Tt},{x:Rt.maxX,y:Tt}]}(wt,er.y))}(Ct,Ye).filter(function(wt){return A(wt,w)&&A(wt,T)}))}),[{x:M.x,y:C.y},{x:C.x,y:M.y}].forEach(function(Ct){A(Ct,w)&&A(Ct,T)&&Re.push(Ct)}),Re.unshift(M),Re.push(C),Re=cc(Re);var lt=Ge(Re,M,C,y,m,t,r);return lt.unshift(t),lt.push(r),lt.length>2&&(lt=at(lt)),cc(lt)},ut=function(t){var r;if(t.length===1)r=[t[0],t[0]];else if(t.length>=2){for(var a=t[0],u=t[1],d=Jn(a.x,a.y,u.x,u.y),l=1;l<t.length-1;l++){var p=t[l],y=t[l+1],m=Jn(p.x,p.y,y.x,y.y);m>d&&(d=m,a=p,u=y)}r=[a,u]}return r},pt=function(t,r,a){var u=Mi(t,a),d=Mi(r,a);return u&&d},_t=function(t,r,a){var u=Mi(t,a),d=Mi(r,a);return!(u&&d)&&(u||d)},it=function(t,r,a){for(var u,d,l=mo(a),p=fc(l),y=0;y<p.length;y++)Ve(t,r,p[y],p[(y+1)%p.length])&&(d=[p[y],p[(y+1)%p.length]]);return d&&(u=function(m,w,T,M){var C=(w.y-m.y)*(M.x-T.x)-(m.x-w.x)*(T.y-M.y);if(C===0)return!1;var $=((w.x-m.x)*(M.x-T.x)*(T.y-m.y)+(w.y-m.y)*(M.x-T.x)*m.x-(M.y-T.y)*(w.x-m.x)*T.x)/C,ae=-((w.y-m.y)*(M.y-T.y)*(T.x-m.x)+(w.x-m.x)*(M.y-T.y)*m.y-(M.x-T.x)*(w.y-m.y)*T.y)/C;return($-m.x)*($-w.x)<=0&&(ae-m.y)*(ae-w.y)<=0&&($-T.x)*($-M.x)<=0&&(ae-T.y)*(ae-M.y)<=0&&{x:$,y:ae}}(t,r,d[0],d[1])),u},dt=function(t,r){var a;return t.x===r.x?a=Kr.VERTICAL:t.y===r.y&&(a=Kr.HORIZONTAL),a},Se=function(t){var r=t.split(" "),a=[];return r&&r.forEach(function(u){var d=uc(u.split(","),2),l=d[0],p=d[1];a.push({x:Number(l),y:Number(p)})}),a},Ue=function(t,r,a,u){var d=[];if(dt(t,a)===dt(r,u))t.y===a.y?(d.push({x:a.x,y:(a.y+u.y)/2}),d.push({x:u.x,y:(a.y+u.y)/2})):(d.push({x:(a.x+u.x)/2,y:a.y}),d.push({x:(a.x+u.x)/2,y:u.y}));else{var l={x:a.x,y:u.y},p=oa(l,t,a),y=oa(l,r,u);if(p||y)l={x:u.x,y:a.y};else{var m=st(l,t,a),w=st(l,r,u);m&&w&&(l={x:u.x,y:a.y})}d.push(l)}return d},st=function(t,r,a){return t.x===r.x&&t.x===a.x||t.y===r.y&&t.y===a.y},St=function(t){if(!t)return 0;for(var r=0,a=0;a<t.length;a++){var u=t.charCodeAt(a);t.match(/[A-Z]/)?r+=1.5:r+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return r},Ze=function(t){var r=t.start,a=t.end,u=t.sourceNode,d=t.targetNode,l=t.offset,p=mo(u),y=mo(d),m=Ju(p,l),w=Ju(y,l);return{sNext:lc(m,r),ePre:lc(w,a)}},At=function(t){var r=t.replace(/M/g,"").replace(/C/g,",").split(",");return[tt(r[0]),tt(r[1]),tt(r[2]),tt(r[3])]},tt=function(t){var r=uc(t.replace(/(^\s*)/g,"").split(" "),2);return{x:+r[0],y:+r[1]}},ht=function(t){var r=At(t),a=uc(r,4),u=function(d,l,p,y){return function(m){if(m<0||m>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:d.x*Math.pow(1-m,3)+3*l.x*m*Math.pow(1-m,2)+3*p.x*Math.pow(m,2)*(1-m)+y.x*Math.pow(m,3),y:d.y*Math.pow(1-m,3)+3*l.y*m*Math.pow(1-m,2)+3*p.y*Math.pow(m,2)*(1-m)+y.y*Math.pow(m,3)}}(.95)}(a[0],a[1],a[2],a[3]);return[u,r[3]]},rt=function(t,r){for(var a,u=t.x,d=t.y,l=Se(r),p=Number.MAX_SAFE_INTEGER,y=[],m=0;m<l.length;m++)y.push({start:l[m],end:l[(m+1)%l.length]});if(y.forEach(function(C){var $=C.start,ae=C.end;if($.x===ae.x){var ve={x:$.x,y:d};if(oa(ve,$,ae)){var je=Math.abs($.x-u);je<p&&(p=je,a=ve)}}else if($.y===ae.y){var Re={x:u,y:$.y};if(oa(Re,$,ae)){var Ye=Math.abs($.y-d);Ye<p&&(p=Ye,a=Re)}}}),!a){var w=y[0],T=w.start,M=w.end;a={x:T.x+(M.x-T.x)/2,y:T.y+(M.y-T.y)/2}}return a},vt=function(t){return Ru(t,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},$t=function(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))};n(204);var rr=function(){};function Et(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Je(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var $e=window.document;function nr(t){var r=t.onDragStart,a=r===void 0?rr:r,u=t.onDragging,d=u===void 0?rr:u,l=t.onDragEnd,p=l===void 0?rr:l,y=t.step,m=y===void 0?1:y,w=t.isStopPropagation,T=w===void 0||w,M=!1,C=!1,$=0,ae=0,ve=0,je=0;function Re(lt){if(T&&lt.stopPropagation(),C&&(M=!0,ve+=lt.clientX-$,je+=lt.clientY-ae,$=lt.clientX,ae=lt.clientY,Math.abs(ve)>m||Math.abs(je)>m)){var Ct=ve%m,wt=je%m,er=ve-Ct,Rt=je-wt;ve=Ct,je=wt,d({deltaX:er,deltaY:Rt,event:lt})}}function Ye(lt){if(T&&lt.stopPropagation(),C=!1,$e.removeEventListener("mousemove",Re,!1),$e.removeEventListener("mouseup",Ye,!1),M)return M=!1,p({event:lt})}return function(lt){if(lt.button===0)return T&&lt.stopPropagation(),C=!0,$=lt.clientX,ae=lt.clientY,$e.addEventListener("mousemove",Re,!1),$e.addEventListener("mouseup",Ye,!1),a({event:lt})}}var Te,Lt,br,ur,mr,Mr,cn,En,xr,yn,Wr,ln,gn,Yr=function(){function t(u){var d=this,l=u.onDragStart,p=l===void 0?rr:l,y=u.onDragging,m=y===void 0?rr:y,w=u.onDragEnd,T=w===void 0?rr:w,M=u.eventType,C=M===void 0?"":M,$=u.eventCenter,ae=$===void 0?null:$,ve=u.step,je=ve===void 0?1:ve,Re=u.isStopPropagation,Ye=Re===void 0||Re,lt=u.model,Ct=lt===void 0?null:lt,wt=u.data,er=wt===void 0?null:wt;(function(Rt,Tt){if(!(Rt instanceof Tt))throw new TypeError("Cannot call a class as a function")})(this,t),Je(this,"onDragStart",void 0),Je(this,"onDragging",void 0),Je(this,"onDragEnd",void 0),Je(this,"step",void 0),Je(this,"isStopPropagation",void 0),Je(this,"isDragging",!1),Je(this,"isStartDragging",!1),Je(this,"startX",0),Je(this,"startY",0),Je(this,"sumDeltaX",0),Je(this,"sumDeltaY",0),Je(this,"eventType",void 0),Je(this,"eventCenter",void 0),Je(this,"model",void 0),Je(this,"data",void 0),Je(this,"startTime",void 0),Je(this,"handleMouseDown",function(Rt){var Tt,vr;if(Rt.button===0){d.isStopPropagation&&Rt.stopPropagation(),d.isStartDragging=!0,d.startX=Rt.clientX,d.startY=Rt.clientY,$e.addEventListener("mousemove",d.handleMouseMove,!1),$e.addEventListener("mouseup",d.handleMouseUp,!1);var Fr=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();(vr=d.eventCenter)===null||vr===void 0||vr.emit(ir["".concat(d.eventType,"_MOUSEDOWN")],{e:Rt,data:d.data||Fr}),d.startTime=new Date().getTime()}}),Je(this,"handleMouseMove",function(Rt){if(d.isStopPropagation&&Rt.stopPropagation(),d.isStartDragging&&(d.sumDeltaX+=Rt.clientX-d.startX,d.sumDeltaY+=Rt.clientY-d.startY,d.startX=Rt.clientX,d.startY=Rt.clientY,d.step<=1||Math.abs(d.sumDeltaX)>d.step||Math.abs(d.sumDeltaY)>d.step)){var Tt,vr=d.sumDeltaX%d.step,Fr=d.sumDeltaY%d.step,qr=d.sumDeltaX-vr,Vr=d.sumDeltaY-Fr;d.sumDeltaX=vr,d.sumDeltaY=Fr;var en,Cn=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();d.isDragging||((en=d.eventCenter)===null||en===void 0||en.emit(ir["".concat(d.eventType,"_DRAGSTART")],{e:Rt,data:d.data||Cn}),d.onDragStart({event:Rt})),d.isDragging=!0,Promise.resolve().then(function(){var Hn,Bo;d.onDragging({deltaX:qr,deltaY:Vr,event:Rt}),(Hn=d.eventCenter)===null||Hn===void 0||Hn.emit(ir["".concat(d.eventType,"_MOUSEMOVE")],{e:Rt,data:d.data||Cn}),(Bo=d.eventCenter)===null||Bo===void 0||Bo.emit(ir["".concat(d.eventType,"_DRAG")],{e:Rt,data:d.data||Cn})})}}),Je(this,"handleMouseUp",function(Rt){d.isStartDragging=!1,d.isStopPropagation&&Rt.stopPropagation(),Promise.resolve().then(function(){var Tt,vr,Fr;$e.removeEventListener("mousemove",d.handleMouseMove,!1),$e.removeEventListener("mouseup",d.handleMouseUp,!1);var qr=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();(vr=d.eventCenter)===null||vr===void 0||vr.emit(ir["".concat(d.eventType,"_MOUSEUP")],{e:Rt,data:d.data||qr}),d.isDragging&&(d.isDragging=!1,d.onDragEnd({event:Rt}),(Fr=d.eventCenter)===null||Fr===void 0||Fr.emit(ir["".concat(d.eventType,"_DROP")],{e:Rt,data:d.data||qr}))})}),Je(this,"cancelDrag",function(){$e.removeEventListener("mousemove",d.handleMouseMove,!1),$e.removeEventListener("mouseup",d.handleMouseUp,!1),d.onDragEnd({event:null}),d.isDragging=!1}),this.onDragStart=p,this.onDragging=m,this.onDragEnd=T,this.step=je,this.isStopPropagation=Ye,this.eventType=C,this.eventCenter=ae,this.model=Ct,this.data=er}var r,a;return r=t,(a=[{key:"setStep",value:function(u){this.step=u}}])&&Et(r.prototype,a),t}(),Sn={node:!1,edge:!1},Fn={node:!0,edge:!0};function on(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function lr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?on(Object(a),!0).forEach(function(u){Wn(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):on(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function mn(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||Jt(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nr(t){return function(r){if(Array.isArray(r))return _r(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Jt(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jt(t,r){if(t){if(typeof t=="string")return _r(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_r(t,r):void 0}}function _r(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Sr(t){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sr(t)}function Br(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function Jo(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Wn(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function F(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Le,De=200,jt=(Te=function(){function t(u){(function(ae,ve){if(!(ae instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,t),Wn(this,"rootEl",void 0),Br(this,"width",Lt,this),Br(this,"height",br,this),Wn(this,"theme",void 0),Wn(this,"eventCenter",void 0),Wn(this,"modelMap",new Map),Wn(this,"topElement",void 0),Wn(this,"animation",void 0),Wn(this,"idGenerator",void 0),Wn(this,"edgeGenerator",void 0),Wn(this,"nodeMoveRules",[]),Br(this,"edgeType",ur,this),Br(this,"nodes",mr,this),Br(this,"edges",Mr,this),Br(this,"overlapMode",cn,this),Br(this,"background",En,this),Br(this,"transformModel",xr,this),Br(this,"editConfigModel",yn,this),Br(this,"gridSize",Wr,this),Br(this,"partial",ln,this),Br(this,"fakerNode",gn,this);var d,l,p,y=u.container,m=u.background,w=m===void 0?{}:m,T=u.grid,M=u.idGenerator,C=u.edgeGenerator,$=u.animation;this.background=w,Sr(T)==="object"&&(this.gridSize=T.size),this.rootEl=y,this.editConfigModel=new _l(u),this.eventCenter=new Ed,this.transformModel=new id(this.eventCenter),this.theme=Cl(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(d=$)&&typeof d!="boolean"?Ws(nn(Sn),d):nn(d===!0?Fn:Sn),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=M,this.edgeGenerator=(l=this,typeof(p=C)!="function"?function(ae,ve,je){return Object.assign({type:l.edgeType},je)}:function(ae,ve,je){var Re=p(ae,ve,je);return Re?typeof Re=="string"?Object.assign({},je,{type:Re}):Object.assign({type:Re},je):{type:l.edgeType}}),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=di()}var r,a;return r=t,a=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,d,l){return u[d.id]={index:l,model:d},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,d,l){return u[d.id]={index:l,model:d},u},{})}},{key:"modelsMap",get:function(){return[].concat(Nr(this.nodes),Nr(this.edges)).reduce(function(u,d){return u[d.id]=d,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(w){return u.push(w)}),this.edges.forEach(function(w){return u.push(w)}),u=u.sort(function(w,T){return w.zIndex-T.zIndex});for(var d=[],l=[-200,-200],p=[this.width+De,this.height+De],y=0;y<u.length;y++){var m=u[y];m.visible&&(!this.partial||m.isSelected||this.isElementInArea(m,l,p,!1,!1))&&d.push(m)}return d}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(l){return l.state===zr.TEXT_EDIT}),d=this.edges.find(function(l){return l.state===zr.TEXT_EDIT});return u||d}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(d){d.isSelected&&u.set(d.id,d)}),this.edges.forEach(function(d){d.isSelected&&u.set(d.id,d)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(d){d.isSelected&&u.push(d)}),u}},{key:"getAreaElement",value:function(u,d){var l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],m=[],w=[];this.nodes.forEach(function(C){return w.push(C)}),this.edges.forEach(function(C){return w.push(C)});for(var T=0;T<w.length;T++){var M=w[T];y&&!M.visible||!this.isElementInArea(M,u,d,l,p)||m.push(M)}return m}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var d;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(d=this.nodesMap[u])===null||d===void 0?void 0:d.model}},{key:"getPointByClient",value:function(u){var d=u.x,l=u.y,p=this.rootEl.getBoundingClientRect(),y={x:d-p.left,y:l-p.top},m=mn(this.transformModel.HtmlPointToCanvasPoint([y.x,y.y]),2);return{domOverlayPosition:y,canvasOverlayPosition:{x:m[0],y:m[1]}}}},{key:"isElementInArea",value:function(u,d,l){var p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],y=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===xn.NODE){for(var m=mo(u=u),w=m.minX,T=m.minY,M=m.maxX,C=m.maxY,$=[{x:w,y:T},{x:M,y:T},{x:M,y:C},{x:w,y:C}],ae=y,ve=0;ve<$.length;ve++){var je=$[ve],Re=je.x,Ye=je.y,lt=this.transformModel.CanvasPointToHtmlPoint([Re,Ye]),Ct=mn(lt,2);if(Re=Ct[0],Ye=Ct[1],qs([Re,Ye],d,l)!==y){ae=!y;break}}return ae}if(u.BaseType===xn.EDGE){var wt=u=u,er=wt.startPoint,Rt=wt.endPoint,Tt=this.transformModel.CanvasPointToHtmlPoint([er.x,er.y]),vr=this.transformModel.CanvasPointToHtmlPoint([Rt.x,Rt.y]),Fr=qs(Tt,d,l),qr=qs(vr,d,l);return p?Fr&&qr:Fr||qr}return!1}},{key:"graphDataToModel",value:function(u){var d=this;this.width&&this.height||this.resize(),this.nodes=Cs(u.nodes,function(l){var p=d.getModel(l.type);if(!p)throw new Error("".concat(l.type,""));var y=l.x,m=l.y;return y&&m&&(l.x=fi(y,d.gridSize),l.y=fi(m,d.gridSize),Sr(l.text)==="object"&&(l.text.x-=Il(y,d.gridSize),l.text.y-=Il(m,d.gridSize))),new p(l,d)}),this.edges=Cs(u.edges,function(l){var p=d.getModel(l.type);if(!p)throw new Error("".concat(l.type,""));return new p(l,d)})}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(l){var p=l.getData();p&&!l.virtual&&u.push(p)});var d=[];return this.nodes.forEach(function(l){var p=l.getData();p&&!l.virtual&&d.push(p)}),{nodes:d,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,d=[],l=0;l<this.nodes.length;l++){var p=this.nodes[l];if(p.isDragging){u=!0;break}d.push(p.getHistoryData())}if(u)return!1;for(var y=!1,m=[],w=0;w<this.edges.length;w++){var T=this.edges[w];if(T.isDragging){y=!0;break}m.push(T.getHistoryData())}return!y&&{nodes:d,edges:m}}},{key:"getEdgeModelById",value:function(u){var d;return(d=this.edgesMap[u])===null||d===void 0?void 0:d.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var d=[],l=0;l<this.edges.length;l++){var p=this.edges[l],y=this.edges[l].sourceNodeId===u,m=this.edges[l].targetNodeId===u;(y||m)&&d.push(p)}return d}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],d=this.selectElements,l={nodes:[],edges:[]};return d.forEach(function(p){if(p.BaseType===xn.NODE&&l.nodes.push(p.getData()),p.BaseType===xn.EDGE){var y=p.getData(),m=d.get(y.sourceNodeId)&&d.get(y.targetNodeId);(u||m)&&l.edges.push(y)}}),l}},{key:"updateAttributes",value:function(u,d){this.getElement(u).updateAttributes(d)}},{key:"changeNodeId",value:function(u,d){return d||(d=di()),this.nodesMap[d]?"":this.nodesMap[u]?(this.edges.forEach(function(l){l.sourceNodeId===u&&(l.sourceNodeId=d),l.targetNodeId===u&&(l.targetNodeId=d)}),this.nodesMap[u].model.id=d,this.nodesMap[d]=this.nodesMap[u],d):""}},{key:"changeEdgeId",value:function(u,d){return d||(d=di()),this.edgesMap[d]?"":this.edgesMap[u]?(this.edges.forEach(function(l){l.id===u&&l.changeEdgeId(d)}),d):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,d){return this.modelMap.set(u,d)}},{key:"toFront",value:function(u){var d,l,p,y=((d=this.nodesMap[u])===null||d===void 0?void 0:d.model)||((l=this.edgesMap[u])===null||l===void 0?void 0:l.model);y&&(this.overlapMode===uo.DEFAULT&&((p=this.topElement)===null||p===void 0||p.setZIndex(),y.setZIndex(9999),this.topElement=y),this.overlapMode===uo.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,d){var l,p,y,m=((l=this.nodesMap[u])===null||l===void 0?void 0:l.model)||((p=this.edgesMap[u])===null||p===void 0?void 0:p.model);m&&(typeof d=="number"&&(y=d),d==="top"&&(y=Ya()),d==="bottom"&&(y=--Wl),m.setZIndex(y))}},{key:"deleteNode",value:function(u){var d=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(ir.NODE_DELETE,{data:d})}},{key:"addNode",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir.NODE_ADD,l=Xn(u);l.id&&this.nodesMap[u.id]&&delete l.id;var p=this.getModel(l.type);if(!p)throw new Error("".concat(l.type,""));l.x=fi(l.x,this.gridSize),l.y=fi(l.y,this.gridSize);var y=new p(l,this);this.nodes.push(y);var m=y.getData();return this.eventCenter.emit(d,{data:m}),y}},{key:"cloneNode",value:function(u){var d=this.getNodeModelById(u),l=d.getData();l.x+=30,l.y+=30,delete l.id,l.text&&(l.text.x+=30,l.text.y+=30);var p=this.addNode(l);return p.setSelected(!0),d.setSelected(!1),p.getData()}},{key:"moveNode",value:function(u,d,l){var p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],y=this.nodesMap[u];if(y){var m=y.model,w=m.getMoveDistance(d,l,p),T=mn(w,2);d=T[0],l=T[1],this.moveEdge(u,d,l)}}},{key:"moveNode2Coordinate",value:function(u,d,l){var p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],y=this.nodesMap[u];if(y){var m=y.model,w=m.x,T=m.y,M=d-w,C=l-T;this.moveNode(u,M,C,p)}}},{key:"editText",value:function(u){this.setElementStateById(u,zr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var d=Xn(u),l=d.type;l||(l=this.edgeType),d.id&&this.edgesMap[d.id]&&delete d.id;var p=this.getModel(l);if(!p)throw new Error("".concat(l,""));var y=new p(lr(lr({},d),{},{type:l}),this),m=y.getData();return this.edges.push(y),this.eventCenter.emit(ir.EDGE_ADD,{data:m}),y}},{key:"moveEdge",value:function(u,d,l){for(var p=0;p<this.edges.length;p++){var y,m=this.edges[p],w=m.textPosition,T=w.x,M=w.y,C=this.edges[p].sourceNodeId===u,$=this.edges[p].targetNodeId===u;if(C&&m.moveStartPoint(d,l),$&&m.moveEndPoint(d,l),C||$)if(m.customTextPosition===!0)m.resetTextPosition();else if(m.modelType===Pr.POLYLINE_EDGE&&(y=m.text)!==null&&y!==void 0&&y.value){var ae=m.text,ve=rt(ae,m.points);m.moveText(ve.x-ae.x,ve.y-ae.y)}else{var je=m.textPosition,Re=je.x,Ye=je.y;m.moveText(Re-T,Ye-M)}}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,d){for(var l=0;l<this.edges.length;l++)if(this.edges[l].sourceNodeId===u&&this.edges[l].targetNodeId===d){var p=this.edges[l].getData();this.edges.splice(l,1),l--,this.eventCenter.emit(ir.EDGE_DELETE,{data:p})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var d=this.edgesMap[u].index,l=this.edgesMap[u].model.getData();this.edges.splice(d,1),this.eventCenter.emit(ir.EDGE_DELETE,{data:l})}}},{key:"deleteEdgeBySource",value:function(u){for(var d=0;d<this.edges.length;d++)if(this.edges[d].sourceNodeId===u){var l=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(ir.EDGE_DELETE,{data:l})}}},{key:"deleteEdgeByTarget",value:function(u){for(var d=0;d<this.edges.length;d++)if(this.edges[d].targetNodeId===u){var l=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(ir.EDGE_DELETE,{data:l})}}},{key:"setElementStateById",value:function(u,d,l){this.nodes.forEach(function(p){p.id===u?p.setElementState(d,l):p.setElementState(zr.DEFAULT)}),this.edges.forEach(function(p){p.id===u?p.setElementState(d,l):p.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(u,d){this.nodes.forEach(function(l){l.id===u&&l.updateText(d)}),this.edges.forEach(function(l){l.id===u&&l.updateText(d)})}},{key:"selectNodeById",value:function(u){var d,l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l||this.clearSelectElements();var p=(d=this.nodesMap[u])===null||d===void 0?void 0:d.model;p==null||p.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var d,l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l||this.clearSelectElements();var p=(d=this.edgesMap[u])===null||d===void 0?void 0:d.model;p==null||p.setSelected(!0)}},{key:"selectElementById",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var l=this.getElement(u);l==null||l.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(d){d==null||d.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===uo.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,d,l){for(var p=this,y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],m=u.reduce(function(Re,Ye){var lt=p.nodesMap[Ye].model.getMoveDistance(d,l,y);return Re[Ye]=lt,Re},{}),w=0;w<this.edges.length;w++){var T=this.edges[w],M=m[T.sourceNodeId],C=void 0,$=void 0;if(M){var ae=mn(M,2);C=ae[0],$=ae[1],T.moveStartPoint(C,$)}var ve=m[T.targetNodeId];if(ve){var je=mn(ve,2);C=je[0],$=je[1],T.moveEndPoint(C,$)}(M||ve)&&T.moveText(C,$)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,d){var l=this.getNodeModelById(u);if(l){var p=l.getData();p.type=d;var y=this.getModel(d);if(!y)throw new Error("".concat(d,""));var m=new y(p,this);this.nodes.splice(this.nodesMap[u].index,1,m),this.getNodeEdges(u).forEach(function(w){if(w.sourceNodeId===u){var T=Rd(m,w.startPoint,m.width,m.height);w.updateStartPoint(T)}if(w.targetNodeId===u){var M=Rd(m,w.endPoint,m.width,m.height);w.updateEndPoint(M)}})}}},{key:"changeEdgeType",value:function(u,d){var l=this.getEdgeModelById(u);if(l&&l.type!==d){var p=l.getData();p.type=d;var y=this.getModel(d);if(!y)throw new Error("".concat(d,""));delete p.pointsList;var m=new y(p,this);this.edges.splice(this.edgesMap[u].index,1,m)}}},{key:"getNodeIncomingEdge",value:function(u){var d=[];return this.edges.forEach(function(l){l.targetNodeId===u&&d.push(l)}),d}},{key:"getNodeOutgoingEdge",value:function(u){var d=[];return this.edges.forEach(function(l){l.sourceNodeId===u&&d.push(l)}),d}},{key:"getNodeIncomingNode",value:function(u){var d=this,l=[];return this.edges.forEach(function(p){p.targetNodeId===u&&l.push(d.nodesMap[p.sourceNodeId].model)}),l}},{key:"getNodeOutgoingNode",value:function(u){var d=this,l=[];return this.edges.forEach(function(p){p.sourceNodeId===u&&l.push(d.nodesMap[p.targetNodeId].model)}),l}},{key:"setTheme",value:function(u){this.theme=Cl(lr(lr({},this.theme),u))}},{key:"resize",value:function(u,d){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=d||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,d=[],l=[];u.forEach(function(M){var C=M.x,$=M.y,ae=M.width,ve=M.height,je=M.getNodeStyle().strokeWidth,Re=je===void 0?0:je;d=d.concat([C+ae/2+Re,C-ae/2-Re]),l=l.concat([$+ve/2+Re,$-ve/2-Re])});var p=Math.min.apply(Math,Nr(d)),y=Math.max.apply(Math,Nr(d)),m=Math.min.apply(Math,Nr(l)),w=y-p||0,T=Math.max.apply(Math,Nr(l))-m||0;return{virtualRectWidth:w,virtualRectHeight:T,virtualRectCenterPositionX:p+w/2,virtualRectCenterPositionY:m+T/2}}},{key:"translateCenter",value:function(){var u=this.nodes,d=this.width,l=this.height,p=this.rootEl,y=this.transformModel;if(u.length){var m=d||p.clientWidth,w=l||p.clientHeight,T=this.getVirtualRectSize(),M=T.virtualRectCenterPositionX,C=T.virtualRectCenterPositionY;y.focusOn(M,C,m,w)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,l=this.nodes,p=this.width,y=this.height,m=this.rootEl,w=this.transformModel;if(l.length){var T=p||m.clientWidth,M=y||m.clientHeight,C=this.getVirtualRectSize(),$=C.virtualRectWidth,ae=C.virtualRectHeight,ve=C.virtualRectCenterPositionX,je=C.virtualRectCenterPositionY,Re=($+d)/T,Ye=(ae+u)/M,lt=0;lt=1/Math.max(Re,Ye);var Ct=[T/2,M/2];w.zoom(lt,Ct),w.focusOn(ve,je,T,M)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],a&&Jo(r.prototype,a),t}(),Lt=F(Te.prototype,"width",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),br=F(Te.prototype,"height",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=F(Te.prototype,"edgeType",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=F(Te.prototype,"nodes",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mr=F(Te.prototype,"edges",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cn=F(Te.prototype,"overlapMode",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return uo.DEFAULT}}),En=F(Te.prototype,"background",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=F(Te.prototype,"transformModel",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yn=F(Te.prototype,"editConfigModel",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=F(Te.prototype,"gridSize",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ln=F(Te.prototype,"partial",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gn=F(Te.prototype,"fakerNode",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F(Te.prototype,"nodesMap",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"nodesMap"),Te.prototype),F(Te.prototype,"edgesMap",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"edgesMap"),Te.prototype),F(Te.prototype,"modelsMap",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"modelsMap"),Te.prototype),F(Te.prototype,"sortElements",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"sortElements"),Te.prototype),F(Te.prototype,"textEditElement",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"textEditElement"),Te.prototype),F(Te.prototype,"selectElements",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"selectElements"),Te.prototype),F(Te.prototype,"selectNodes",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"selectNodes"),Te.prototype),F(Te.prototype,"setFakerNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setFakerNode"),Te.prototype),F(Te.prototype,"removeFakerNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"removeFakerNode"),Te.prototype),F(Te.prototype,"setModel",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setModel"),Te.prototype),F(Te.prototype,"toFront",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"toFront"),Te.prototype),F(Te.prototype,"setElementZIndex",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setElementZIndex"),Te.prototype),F(Te.prototype,"deleteNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteNode"),Te.prototype),F(Te.prototype,"addNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"addNode"),Te.prototype),F(Te.prototype,"cloneNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"cloneNode"),Te.prototype),F(Te.prototype,"moveNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNode"),Te.prototype),F(Te.prototype,"moveNode2Coordinate",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNode2Coordinate"),Te.prototype),F(Te.prototype,"editText",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"editText"),Te.prototype),F(Te.prototype,"addEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"addEdge"),Te.prototype),F(Te.prototype,"moveEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveEdge"),Te.prototype),F(Te.prototype,"deleteEdgeBySourceAndTarget",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeBySourceAndTarget"),Te.prototype),F(Te.prototype,"deleteEdgeById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeById"),Te.prototype),F(Te.prototype,"deleteEdgeBySource",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeBySource"),Te.prototype),F(Te.prototype,"deleteEdgeByTarget",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeByTarget"),Te.prototype),F(Te.prototype,"setElementStateById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setElementStateById"),Te.prototype),F(Te.prototype,"updateText",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"updateText"),Te.prototype),F(Te.prototype,"selectNodeById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectNodeById"),Te.prototype),F(Te.prototype,"selectEdgeById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectEdgeById"),Te.prototype),F(Te.prototype,"selectElementById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectElementById"),Te.prototype),F(Te.prototype,"clearSelectElements",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"clearSelectElements"),Te.prototype),F(Te.prototype,"moveNodes",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNodes"),Te.prototype),F(Te.prototype,"setDefaultEdgeType",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setDefaultEdgeType"),Te.prototype),F(Te.prototype,"changeNodeType",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"changeNodeType"),Te.prototype),F(Te.prototype,"changeEdgeType",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"changeEdgeType"),Te.prototype),F(Te.prototype,"getNodeIncomingEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeIncomingEdge"),Te.prototype),F(Te.prototype,"getNodeOutgoingEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeOutgoingEdge"),Te.prototype),F(Te.prototype,"getNodeIncomingNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeIncomingNode"),Te.prototype),F(Te.prototype,"getNodeOutgoingNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeOutgoingNode"),Te.prototype),F(Te.prototype,"setTheme",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setTheme"),Te.prototype),F(Te.prototype,"resize",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"resize"),Te.prototype),F(Te.prototype,"clearData",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"clearData"),Te.prototype),F(Te.prototype,"translateCenter",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"translateCenter"),Te.prototype),F(Te.prototype,"fitView",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"fitView"),Te.prototype),F(Te.prototype,"openEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"openEdgeAnimation"),Te.prototype),F(Te.prototype,"closeEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"closeEdgeAnimation"),Te.prototype),Te),Er=jt;function V(t){return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},V(t)}function k(){return k=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},k.apply(this,arguments)}function ue(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function we(t,r){return we=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},we(t,r)}function Pe(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=me(t);if(r){var d=me(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return le(this,a)}}function le(t,r){if(r&&(V(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ne(t)}function ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function me(t){return me=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},me(t)}function X(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var te,H=yi(Le=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&we(l,p)})(d,t);var r,a,u=Pe(d);function d(l){var p;(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,d),X(ne(p=u.call(this)),"stepDrag",void 0),X(ne(p),"stepScrollX",0),X(ne(p),"stepScrollY",0),X(ne(p),"onDragging",function(T){var M=T.deltaX,C=T.deltaY;p.setState({isDragging:!0});var $=p.props.graphModel,ae=$.transformModel;$.editConfigModel.stopMoveGraph||ae.translate(M,C)}),X(ne(p),"onDragEnd",function(){p.setState({isDragging:!1})}),X(ne(p),"zoomHandler",function(T){var M=p.props,C=M.graphModel,$=C.editConfigModel,ae=C.transformModel,ve=C.gridSize,je=M.graphModel,Re=T.deltaX,Ye=T.deltaY;if($.stopScrollGraph||T.ctrlKey===!0){if(!$.stopZoomGraph){T.preventDefault();var lt=je.getPointByClient({x:T.clientX,y:T.clientY}).canvasOverlayPosition,Ct=lt.x,wt=lt.y;ae.zoom(T.deltaY<0,[Ct,wt])}}else{if(T.preventDefault(),p.stepScrollX+=Re,p.stepScrollY+=Ye,Math.abs(p.stepScrollX)>=ve){var er=p.stepScrollX%ve,Rt=p.stepScrollX-er;ae.translate(-Rt*ae.SCALE_X,0),p.stepScrollX=er}if(Math.abs(p.stepScrollY)>=ve){var Tt=p.stepScrollY%ve,vr=p.stepScrollY-Tt;ae.translate(0,-vr*ae.SCALE_Y),p.stepScrollY=Tt}}}),X(ne(p),"clickHandler",function(T){if(T.target.getAttribute("name")==="canvas-overlay"){var M=p.props.graphModel;M.selectElements.size>0&&M.clearSelectElements(),M.eventCenter.emit(ir.BLANK_CLICK,{e:T})}}),X(ne(p),"handleContextMenu",function(T){if(T.target.getAttribute("name")==="canvas-overlay"){T.preventDefault();var M=p.props.graphModel,C=M.getPointByClient({x:T.clientX,y:T.clientY});M.eventCenter.emit(ir.BLANK_CONTEXTMENU,{e:T,position:C})}}),X(ne(p),"mouseDownHandler",function(T){var M=p.props.graphModel,C=M.eventCenter,$=M.editConfigModel,ae=M.transformModel.SCALE_X,ve=M.gridSize,je=T.target,Re=!$.adjustEdge&&!$.adjustNodePosition;(je.getAttribute("name")==="canvas-overlay"||Re)&&($.stopMoveGraph?C.emit(ir.BLANK_MOUSEDOWN,{e:T}):(p.stepDrag.setStep(ve*ae),p.stepDrag.handleMouseDown(T)),p.clickHandler(T))});var y=l.graphModel,m=y.gridSize,w=y.eventCenter;return p.stepDrag=new Yr({onDragging:p.onDragging,onDragEnd:p.onDragEnd,step:m,eventType:"BLANK",isStopPropagation:!1,eventCenter:w,model:null}),p.state={isDragging:!1},p}return r=d,(a=[{key:"render",value:function(){var l=this.props.graphModel.transformModel.getTransformStyle().transform,p=this.props,y=p.children,m=p.dnd,w=this.state.isDragging;return Object(xe.g)("svg",k({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:w?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},m.eventMap()),Object(xe.g)("g",{transform:l},y))}}])&&ue(r.prototype,a),d}(xe.a))||Le;function Ee(t){return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ee(t)}function Me(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function We(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ke(t,r){return Ke=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ke(t,r)}function He(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ut(t);if(r){var d=Ut(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ct(this,a)}}function ct(t,r){if(r&&(Ee(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Ut(t){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ut(t)}var hr=yi(te=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Ke(l,p)})(d,t);var r,a,u=He(d);function d(){return Me(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var l=this.props,p=l.tool,y=l.graphModel,m=p.getTools().map(function(w){return Object(xe.g)(w,{graphModel:y,logicFlow:p.instance})});return p.components=m,m}},{key:"triggerToolRender",value:function(){var l=this.props,p=l.tool,y=l.graphModel,m=document.querySelector("#ToolOverlay_".concat(y.flowId)),w=p.getInstance();w.components.forEach(function(T){return T(w,m)}),w.components=[]}},{key:"render",value:function(){var l=this.props.graphModel;return Object(xe.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(l.flowId)},this.getTools())}}])&&We(r.prototype,a),d}(xe.a))||te;function It(t){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},It(t)}function Qt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fr(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function jr(t,r){return jr=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},jr(t,r)}function an(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=eu(t);if(r){var d=eu(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return eo(this,a)}}function eo(t,r){if(r&&(It(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function eu(t){return eu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},eu(t)}var bo,Hd=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&jr(l,p)})(d,t);var r,a,u=an(d);function d(){return Qt(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"render",value:function(){var l=this.props.background;return Object(xe.g)("div",{className:"lf-background"},Object(xe.g)("div",{style:l,className:"lf-background-area"}))}}])&&fr(r.prototype,a),d}(xe.a);function _o(t){return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_o(t)}function Xd(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Xw(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function uv(t,r){return uv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},uv(t,r)}function Vw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Vd(t);if(r){var d=Vd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Ww(this,a)}}function Ww(t,r){if(r&&(_o(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mm(t)}function Mm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vd(t){return Vd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Vd(t)}function Yw(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Rm=yi(bo=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&uv(l,p)})(d,t);var r,a,u=Vw(d);function d(){var l;Xd(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Yw(Mm(l=u.call.apply(u,[this].concat(y))),"id",di()),l}return r=d,(a=[{key:"renderDot",value:function(){var l=this.props,p=l.config,y=p.color,m=p.thickness,w=m===void 0?2:m,T=l.size,M=l.visible,C=Math.min(Math.max(2,w),T/2),$=1;return M||($=0),Object(xe.g)("rect",{width:C,height:C,rx:C/2,ry:C/2,fill:y,opacity:$})}},{key:"renderMesh",value:function(){var l=this.props,p=l.config,y=p.color,m=p.thickness,w=m===void 0?1:m,T=l.size,M=l.visible,C=Math.min(Math.max(1,w),T/2),$="M ".concat(T," 0 H0 M0 0 V0 ").concat(T),ae=1;return M||(ae=0),Object(xe.g)("path",{d:$,stroke:y,strokeWidth:C,opacity:ae})}},{key:"render",value:function(){var l=this.props,p=l.type,y=l.size,m=l.graphModel.transformModel,w=[m.SCALE_X,m.SKEW_Y,m.SKEW_X,m.SCALE_Y,m.TRANSLATE_X,m.TRANSLATE_Y].join(","),T="matrix(".concat(w,")");return Object(xe.g)("div",{className:"lf-grid"},Object(xe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(xe.g)("defs",null,Object(xe.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:T,x:"0",y:"0",width:y,height:y},p==="dot"&&this.renderDot(),p==="mesh"&&this.renderMesh())),Object(xe.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&Xw(r.prototype,a),d}(xe.a))||bo;Rm.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},n(52);function sv(t){return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sv(t)}function $w(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Dm(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Dm(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dm(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var km,dc=function(t){var r={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(t).forEach(function(a){var u=$w(a,2),d=u[0],l=u[1];(d==="style"||sv(l)!=="object")&&(r[d]=l)}),Object(xe.g)("line",r)};function cv(t){return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},cv(t)}function Cm(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Wd(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Cm(Object(a),!0).forEach(function(u){Kw(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Cm(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Kw(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function qw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Zw(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function lv(t,r){return lv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},lv(t,r)}function Jw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Yd(t);if(r){var d=Yd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Qw(this,a)}}function Qw(t,r){if(r&&(cv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Yd(t){return Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Yd(t)}var Im,e1=yi(km=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&lv(l,p)})(d,t);var r,a,u=Jw(d);function d(){return qw(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"render",value:function(){var l=this.props.snaplineModel,p=l.position,y=l.isShowHorizontal,m=l.isShowVertical,w=l.getStyle(),T=p.x,M=T===void 0?0:T,C=p.y,$=C===void 0?0:C,ae=Wd(Wd({x1:-1e5,y1:$,x2:1e5,y2:$},w),{},{stroke:y?w.stroke:"none"}),ve=Wd(Wd({x1:M,y1:-1e5,x2:M,y2:1e5},w),{},{stroke:m?w.stroke:"none"});return Object(xe.g)("g",{className:"lf-snapline"},Object(xe.g)(dc,ae),Object(xe.g)(dc,ve))}}])&&Zw(r.prototype,a),d}(xe.a))||km;function fv(t){return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fv(t)}function t1(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Lm(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Lm(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Lm(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function tu(t){var r=t.x,a=t.y,u=t.width,d=t.height,l=t.className,p=t.radius,y=r-u/2,m=a-d/2,w={};return Object.entries(t).forEach(function(T){var M=t1(T,2),C=M[0],$=M[1];fv($)!=="object"&&(w[C]=$)}),w.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",p&&(w.rx=p,w.ry=p),w.x=y,w.y=m,Object(xe.g)("rect",w)}function dv(t){return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},dv(t)}function pc(){return pc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},pc.apply(this,arguments)}function Fm(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Bm(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Fm(Object(a),!0).forEach(function(u){r1(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Fm(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function r1(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function n1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function pv(t,r){return pv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},pv(t,r)}function i1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=$d(t);if(r){var d=$d(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return a1(this,a)}}function a1(t,r){if(r&&(dv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function $d(t){return $d=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},$d(t)}tu.defaultProps={className:"",radius:""};var Gm,u1=yi(Im=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&pv(l,p)})(d,t);var r,a,u=i1(d);function d(){return n1(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getNodesOutline",value:function(){var l=this.props.graphModel,p=l.nodes,y=l.editConfigModel,m=y.hoverOutline,w=y.nodeSelectedOutline,T=[];return p.forEach(function(M){if(M.isHovered||M.isSelected){var C=M.isHovered,$=M.isSelected,ae=M.x,ve=M.y,je=M.width,Re=M.height;if(w&&$||m&&C){var Ye=M.getOutlineStyle(),lt={};if(Object.keys(Ye).forEach(function(wt){wt!=="hover"&&(lt[wt]=Ye[wt])}),C){var Ct=Ye.hover;lt=Bm(Bm({},lt),Ct)}T.push(Object(xe.g)(tu,pc({className:"lf-outline-node",x:ae,y:ve,width:je+10,height:Re+10},lt)))}}}),T}},{key:"getEdgeOutline",value:function(){for(var l=this.props.graphModel,p=l.edges,y=l.editConfigModel,m=y.edgeSelectedOutline,w=y.hoverOutline,T=[],M=0;M<p.length;M++){var C=p[M];(m&&C.isSelected||w&&C.isHovered)&&(C.modelType===Pr.LINE_EDGE?T.push(this.getLineOutline(C)):C.modelType===Pr.POLYLINE_EDGE?T.push(this.getPolylineOutline(C)):C.modelType===Pr.BEZIER_EDGE&&T.push(this.getBezierOutline(C)))}return T}},{key:"getLineOutline",value:function(l){var p=l.startPoint,y=l.endPoint,m=(p.x+y.x)/2,w=(p.y+y.y)/2,T=Math.abs(p.x-y.x)+10,M=Math.abs(p.y-y.y)+10,C=l.getOutlineStyle();return Object(xe.g)(tu,pc({className:"lf-outline-edge",x:m,y:w,width:T,height:M},C))}},{key:"getPolylineOutline",value:function(l){var p=l.points,y=Se(p),m=Qa(y,8),w=m.x,T=m.y,M=m.width,C=m.height,$=l.getOutlineStyle();return Object(xe.g)(tu,pc({className:"lf-outline",x:w,y:T,width:M,height:C},$))}},{key:"getBezierOutline",value:function(l){var p=l.path,y=At(p),m=Qa(y,8),w=m.x,T=m.y,M=m.width,C=m.height,$=l.getOutlineStyle();return Object(xe.g)(tu,pc({className:"lf-outline",x:w,y:T,width:M,height:C},$))}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&o1(r.prototype,a),d}(xe.a))||Im;function hv(t){return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hv(t)}function s1(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Um(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Um(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Um(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Jl(t){var r=t.x,a=r===void 0?0:r,u=t.y,d=u===void 0?0:u,l=t.r,p=l===void 0?4:l,y=t.className,m={cx:a,cy:d,r:p,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach(function(w){var T=s1(w,2),M=T[0],C=T[1];hv(C)!=="object"&&(m[M]=C)}),m.className=y?"lf-basic-shape ".concat(y):"lf-basic-shape",Object(xe.g)("circle",m)}function vv(t){return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vv(t)}function c1(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return zm(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return zm(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zm(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Ql(){return Ql=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Ql.apply(this,arguments)}function Hm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Xm(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Vm(t,r,a){return r&&Xm(t.prototype,r),a&&Xm(t,a),t}function Wm(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&yv(t,r)}function yv(t,r){return yv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},yv(t,r)}function Ym(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=qd(t);if(r){var d=qd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return l1(this,a)}}function l1(t,r){if(r&&(vv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kd(t)}function Kd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qd(t){return qd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},qd(t)}function gv(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var $m,Km=function(t){Wm(a,t);var r=Ym(a);function a(){var u;return Hm(this,a),gv(Kd(u=r.call(this)),"dragHandler",void 0),gv(Kd(u),"onDragging",function(d){var l=d.event,p=u.props,y=p.graphModel,m=p.bezierModel,w=p.type,T=y.getPointByClient({x:l.clientX,y:l.clientY}).canvasOverlayPosition,M=T.x,C=T.y;m.updateAdjustAnchor({x:M,y:C},w)}),gv(Kd(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new Yr({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return Vm(a,[{key:"render",value:function(){var u=this,d=this.props.position,l=d.x,p=d.y,y=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(xe.g)(Jl,Ql({className:"lf-bezier-adjust-anchor",x:l,y:p},y,{onMouseDown:function(m){u.dragHandler.handleMouseDown(m)}}))}}]),a}(xe.a),f1=yi(Gm=function(t){Wm(a,t);var r=Ym(a);function a(){return Hm(this,a),r.apply(this,arguments)}return Vm(a,[{key:"getBezierAdjust",value:function(u,d){var l=u.path,p=u.id,y=c1(At(l),4),m=y[0],w=y[1],T=y[2],M=y[3],C=u.getEdgeStyle().adjustLine,$=[];return $.push(Object(xe.g)(dc,Ql({x1:m.x,y1:m.y,x2:w.x,y2:w.y},C))),$.push(Object(xe.g)(Km,{position:w,bezierModel:u,graphModel:d,key:"".concat(p,"_ePre"),type:"sNext"})),$.push(Object(xe.g)(dc,Ql({x1:M.x,y1:M.y,x2:T.x,y2:T.y},C))),$.push(Object(xe.g)(Km,{position:T,bezierModel:u,graphModel:d,key:"".concat(p,"_sNext"),type:"ePre"})),$}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,d=u.edges,l=[],p=0;p<d.length;p++){var y=d[p];y.isSelected&&y.modelType===Pr.BEZIER_EDGE&&y.draggable&&l.push(this.getBezierAdjust(y,u))}return l}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),a}(xe.a))||Gm;function mv(t){return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mv(t)}function d1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function p1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function bv(t,r){return bv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},bv(t,r)}function h1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Zd(t);if(r){var d=Zd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return v1(this,a)}}function v1(t,r){if(r&&(mv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Zd(t)}var qm,y1=yi($m=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&bv(l,p)})(d,t);var r,a,u=h1(d);function d(){return d1(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"render",value:function(){var l=this.props.graphModel.transformModel.getTransformStyle().transform,p=this.props.children;return Object(xe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(xe.g)("g",{transform:l},p))}}])&&p1(r.prototype,a),d}(xe.a))||$m;function _v(t){return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_v(t)}function Ev(){return Ev=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Ev.apply(this,arguments)}function g1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function m1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ov(t,r){return Ov=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ov(t,r)}function b1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Jd(t);if(r){var d=Jd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return _1(this,a)}}function _1(t,r){if(r&&(_v(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Jd(t){return Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Jd(t)}var E1=yi(qm=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Ov(l,p)})(d,t);var r,a,u=b1(d);function d(){return g1(this,d),u.apply(this,arguments)}return r=d,a=[{key:"getComponent",value:function(l,p){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",m=this.props.getView,w=m(l.type);return Object(xe.g)(w,{key:l.id,model:l,graphModel:p,overlay:y})}},{key:"render",value:function(){var l=this,p=this.props,y=p.graphModel,m=p.tool,w=p.options,T=p.dnd,M=p.snaplineModel,C={};w.width&&(C.width="".concat(y.width,"px")),w.height&&(C.height="".concat(y.height,"px"));var $=w.grid,ae=y.fakerNode,ve=y.editConfigModel.adjustEdge;return Object(xe.g)("div",{className:"lf-graph","flow-id":y.flowId,style:C},Object(xe.g)(H,{graphModel:y,dnd:T},Object(xe.g)("g",{className:"lf-base"},Cs(y.sortElements,function(je){return l.getComponent(je,y)})),ae?this.getComponent(ae,y):""),Object(xe.g)(y1,{graphModel:y},Object(xe.g)(u1,{graphModel:y}),ve?Object(xe.g)(f1,{graphModel:y}):"",w.snapline!==!1?Object(xe.g)(e1,{snaplineModel:M}):""),Object(xe.g)(hr,{graphModel:y,tool:m}),w.background&&Object(xe.g)(Hd,{background:w.background}),w.grid&&Object(xe.g)(Rm,Ev({},$,{graphModel:y})))}}],a&&m1(r.prototype,a),d}(xe.a))||qm,O1=E1;function Zm(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Qd(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Zm(Object(a),!0).forEach(function(u){ca(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Zm(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function w1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ca(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var x1=function(){function t(u){var d=this;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,t),ca(this,"nodeConfig",void 0),ca(this,"lf",void 0),ca(this,"fakerNode",void 0),ca(this,"stopDrag",function(){d.nodeConfig=null,window.document.removeEventListener("mouseup",d.stopDrag)}),ca(this,"dragEnter",function(p){d.nodeConfig&&!d.fakerNode&&(d.fakerNode=d.lf.createFakerNode(Qd(Qd({},d.nodeConfig),d.clientToLocalPoint({x:p.clientX,y:p.clientY}))))}),ca(this,"onDragOver",function(p){if(p.preventDefault(),d.fakerNode){var y=d.clientToLocalPoint({x:p.clientX,y:p.clientY}),m=y.x,w=y.y;d.fakerNode.moveTo(m,w);var T=d.fakerNode.getData();d.lf.setNodeSnapLine(T),d.lf.graphModel.eventCenter.emit(ir.NODE_DND_DRAG,{data:T})}return!1}),ca(this,"onDragLeave",function(){d.fakerNode&&(d.lf.removeNodeSnapLine(),d.lf.graphModel.removeFakerNode(),d.fakerNode=null)}),ca(this,"onDrop",function(p){if(d.lf.graphModel&&p&&d.nodeConfig){var y=d.lf.addNode(Qd(Qd({},d.nodeConfig),d.clientToLocalPoint({x:p.clientX,y:p.clientY})),ir.NODE_DND_ADD);p.preventDefault(),p.stopPropagation(),d.nodeConfig=null,d.lf.removeNodeSnapLine(),d.lf.graphModel.removeFakerNode(),d.fakerNode=null,y.getData()}});var l=u.lf;this.lf=l}var r,a;return r=t,(a=[{key:"clientToLocalPoint",value:function(u){var d=u.x,l=u.y,p=il(this.lf.options,["grid","size"]),y=this.lf.graphModel.getPointByClient({x:d,y:l}).canvasOverlayPosition,m=y.x,w=y.y;return{x:fi(m,p),y:fi(w,p)}}},{key:"startDrag",value:function(u){this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&w1(r.prototype,a),t}();function Jm(t){var r=t.container,a=t.grid,u=t.width,d=t.height;if(!r)throw new Error(" container ");if(typeof u=="string"||typeof d=="string")throw new Error("widthheight");return a&&(t.grid=Zn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},a)),Zn({},eb,t)}var Hr,Qm,eb={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function wv(t){return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wv(t)}function xv(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return tb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return tb(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tb(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function rb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function ep(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?rb(Object(a),!0).forEach(function(u){nb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function S1(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function T1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function A1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ef(){return ef=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=P1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},ef.apply(this,arguments)}function P1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=ru(t))!==null;);return t}function Sv(t,r){return Sv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Sv(t,r)}function N1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=ru(t);if(r){var d=ru(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return j1(this,a)}}function j1(t,r){if(r&&(wv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tp(t)}function tp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ru(t){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ru(t)}function nb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function pi(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Tv=(Hr=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Sv(l,p)})(d,t);var r,a,u=N1(d);function d(){var l;T1(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return nb(tp(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.BEZIER_EDGE),S1(tp(l),"path",Qm,tp(l)),l}return r=d,(a=[{key:"initEdgeData",value:function(l){this.offset=100,ef(ru(d.prototype),"initEdgeData",this).call(this,l)}},{key:"getEdgeStyle",value:function(){var l=this.graphModel.theme.bezier;return ep(ep({},ef(ru(d.prototype),"getEdgeStyle",this).call(this)),nn(l))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var l=0,p=0;return this.pointsList.forEach(function(y){var m=y.x,w=y.y;l+=m,p+=w}),{x:l/this.pointsList.length,y:p/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var l=ef(ru(d.prototype),"getData",this).call(this),p=this.pointsList.map(function(y){return{x:y.x,y:y.y}});return ep(ep({},l),{},{pointsList:p})}},{key:"getControls",value:function(){var l=this.startPoint,p=this.endPoint;return Ze({start:l,end:p,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(l){var p=xv(l,4),y=p[0],m=p[1],w=p[2],T=p[3];return"M ".concat(y.x," ").concat(y.y,`
    C `).concat(m.x," ").concat(m.y,`,
    `).concat(w.x," ").concat(w.y,`,
    `).concat(T.x," ").concat(T.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var l=this.getControls(),p=l.sNext,y=l.ePre;this.updatePath(p,y)}},{key:"updatePath",value:function(l,p){l=nn(l),p=nn(p);var y={x:this.startPoint.x,y:this.startPoint.y},m={x:this.endPoint.x,y:this.endPoint.y};if(!l||!p){var w=this.getControls();l=w.sNext,p=w.ePre}this.pointsList=[y,l,p,m],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(l){this.startPoint=l,this.updatePoints()}},{key:"updateEndPoint",value:function(l){this.endPoint=l,this.updatePoints()}},{key:"moveStartPoint",value:function(l,p){this.startPoint.x+=l,this.startPoint.y+=p;var y=xv(this.pointsList,3),m=y[1],w=y[2];m.x+=l,m.y+=p,this.updatePath(m,w)}},{key:"moveEndPoint",value:function(l,p){this.endPoint.x+=l,this.endPoint.y+=p;var y=xv(this.pointsList,3),m=y[1],w=y[2];w.x+=l,w.y+=p,this.updatePath(m,w)}},{key:"updateAdjustAnchor",value:function(l,p){p==="sNext"?this.pointsList[1]=l:p==="ePre"&&(this.pointsList[2]=l),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var l=this.pointsList;return l[l.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(l){var p=l.startPoint,y=l.endPoint,m=l.sourceNode,w=l.targetNode,T=Ze({start:p,end:y,sourceNode:m,targetNode:w,offset:this.offset}),M=T.sNext,C=T.ePre;this.pointsList=[p,M,C,y],this.initPoints()}}])&&A1(r.prototype,a),d}($a),Qm=pi(Hr.prototype,"path",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),pi(Hr.prototype,"initPoints",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"initPoints"),Hr.prototype),pi(Hr.prototype,"updatePoints",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updatePoints"),Hr.prototype),pi(Hr.prototype,"updateStartPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateStartPoint"),Hr.prototype),pi(Hr.prototype,"updateEndPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateEndPoint"),Hr.prototype),pi(Hr.prototype,"moveStartPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveStartPoint"),Hr.prototype),pi(Hr.prototype,"moveEndPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveEndPoint"),Hr.prototype),pi(Hr.prototype,"updateAdjustAnchor",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAdjustAnchor"),Hr.prototype),pi(Hr.prototype,"getAdjustStart",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustStart"),Hr.prototype),pi(Hr.prototype,"getAdjustEnd",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustEnd"),Hr.prototype),pi(Hr.prototype,"updateAfterAdjustStartAndEnd",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAfterAdjustStartAndEnd"),Hr.prototype),Hr),kt,ob,ib,ab,ub,sb,cb,lb,fb,db,pb,hb,vb,yb,gb,mb,bb,_b,Eb,Ob,M1=function(t){return t==null};function Av(t){return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Av(t)}function R1(t,r){var a=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(m,w){if(m){if(typeof m=="string")return wb(m,w);var T=Object.prototype.toString.call(m).slice(8,-1);if(T==="Object"&&m.constructor&&(T=m.constructor.name),T==="Map"||T==="Set")return Array.from(m);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return wb(m,w)}}(t))||r&&t&&typeof t.length=="number"){a&&(t=a);var u=0,d=function(){};return{s:d,n:function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}},e:function(m){throw m},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,p=!0,y=!1;return{s:function(){a=a.call(t)},n:function(){var m=a.next();return p=m.done,m},e:function(m){y=!0,l=m},f:function(){try{p||a.return==null||a.return()}finally{if(y)throw l}}}}function wb(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function xb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Eo(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?xb(Object(a),!0).forEach(function(u){Ro(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function zn(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function D1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ro(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Dr(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var la,Sb,fa=(kt=function(){function t(u,d){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),Ro(this,"id",""),zn(this,"type",ob,this),zn(this,"x",ib,this),zn(this,"y",ab,this),zn(this,"text",ub,this),zn(this,"properties",sb,this),zn(this,"_width",cb,this),zn(this,"_height",lb,this),zn(this,"anchorsOffset",fb,this),zn(this,"isSelected",db,this),zn(this,"isHovered",pb,this),zn(this,"isShowAnchor",hb,this),zn(this,"isDragging",vb,this),zn(this,"isHitable",yb,this),zn(this,"draggable",gb,this),zn(this,"visible",mb,this),Ro(this,"virtual",!1),Ro(this,"graphModel",void 0),zn(this,"zIndex",bb,this),zn(this,"state",_b,this),zn(this,"autoToFront",Eb,this),zn(this,"style",Ob,this),Ro(this,"BaseType",xn.NODE),Ro(this,"modelType",Pr.NODE),Ro(this,"additionStateData",void 0),Ro(this,"targetRules",[]),Ro(this,"sourceRules",[]),Ro(this,"moveRules",[]),Ro(this,"hasSetTargetRules",!1),Ro(this,"hasSetSourceRules",!1),this.graphModel=d,this.initNodeData(u),this.setAttributes()}var r,a;return r=t,a=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var d=this.graphModel.idGenerator,l=d&&d(u.type),p=this.createId();u.id=p||l||di()}this.formatText(u),Zn(this,function(y){return Ru(y,["id","type","x","y","text","properties","virtual"])}(u)),this.graphModel.overlapMode===uo.INCREASE&&(this.zIndex=u.zIndex||Ya())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,d=u.x,l=u.y,p=u.value,y=this.properties;Object(f.x)(y)&&(y=Object(f.I)(y));var m={id:this.id,type:this.type,x:this.x,y:this.y,properties:y};return this.graphModel.overlapMode===uo.INCREASE&&(m.zIndex=this.zIndex),p&&(m.text={x:d,y:l,value:p}),m}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(f.I)(this.properties)}},{key:"getNodeStyle",value:function(){return Eo(Eo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return nn(u)}},{key:"getAnchorStyle",value:function(u){var d=this.graphModel.theme.anchor;return nn(d)}},{key:"getAnchorLineStyle",value:function(u){var d=this.graphModel.theme.anchorLine;return nn(d)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return nn(u)}},{key:"isAllowConnectedAsSource",value:function(u,d,l,p){var y=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var m,w=!0,T=0;T<y.length;T++){var M=y[T];if(!M.validate.call(this,this,u,d,l,p)){w=!1,m=M.message;break}}return{isAllPass:w,msg:m}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,d,l,p){var y=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var m,w=!0,T=0;T<y.length;T++){var M=y[T];if(!M.validate.call(this,u,this,d,l,p)){w=!1,m=M.message;break}}return{isAllPass:w,msg:m}}},{key:"isAllowMoveNode",value:function(u,d){var l,p=!0,y=!0,m=R1(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(m.s();!(l=m.n()).done;){var w=(0,l.value)(this,u,d);if(!w)return!1;if(Av(w)==="object"){var T=w;if(T.x===!1&&T.y===!1)return!1;p=p&&T.x,y=y&&T.y}}}catch(M){m.e(M)}finally{m.f()}return{x:p,y}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,d=this.id,l=this.x,p=this.y;return u&&u.length>0?u.map(function(y,m){return y.length?(y=y,{id:"".concat(d,"_").concat(m),x:l+y[0],y:p+y[1]}):Eo(Eo({},y=y),{},{x:l+y.x,y:p+y.y,id:y.id||"".concat(d,"_").concat(m)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(d,l){for(var p,y=tc(l),m=Number.MAX_SAFE_INTEGER,w=0;w<y.length;w++){var T=Jn(d.x,d.y,y[w].x,y[w].y);T<m&&(m=T,p={index:w,anchor:Js(Js({},y[w]),{},{x:y[w].x,y:y[w].y,id:y[w].id})})}return p}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(u){if(!M1(u))for(var d=0;d<this.anchors.length;d++){var l=this.anchors[d];if(l.id===u)return l}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,d){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=!1,y=!1;if(l)p=!0,y=!0;else{var m=this.isAllowMoveNode(u,d);typeof m=="boolean"?(p=m,y=m):(p=m.x,y=m.y)}if(p){var w=this.x+u;this.x=w,this.text&&this.moveText(u,0)}if(y){var T=this.y+d;this.y=T,this.text&&this.moveText(0,d)}return p||y}},{key:"getMoveDistance",value:function(u,d){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=!1,y=!1,m=0,w=0;if(l)p=!0,y=!0;else{var T=this.isAllowMoveNode(u,d);typeof T=="boolean"?(p=T,y=T):(p=T.x,y=T.y)}if(p&&u){var M=this.x+u;this.x=M,this.text&&this.moveText(u,0),m=u}if(y&&d){var C=this.y+d;this.y=C,this.text&&this.moveText(0,d),w=d}return[m,w]}},{key:"moveTo",value:function(u,d){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=u-this.x,y=d-this.y;return!(!l&&!this.isAllowMoveNode(p,y)||(this.text&&this.text&&this.moveText(p,y),this.x=u,this.y=d,0))}},{key:"moveText",value:function(u,d){var l=this.text,p=l.x,y=l.y,m=l.value,w=l.draggable,T=l.editable;this.text={value:m,editable:T,draggable:w,x:p+u,y:y+d}}},{key:"updateText",value:function(u){this.text=Eo(Eo({},Object(f.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,d){this.state=u,this.additionStateData=d}},{key:"setProperty",value:function(u,d){this.properties=Eo(Eo({},Object(f.I)(this.properties)),{},Ro({},u,Xn(d))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Eo(Eo({},Object(f.I)(this.properties)),Xn(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,d){this.style=Eo(Eo({},this.style),{},Ro({},u,Xn(d)))}},{key:"setStyles",value:function(u){this.style=Eo(Eo({},this.style),Xn(u))}},{key:"updateStyles",value:function(u){this.style=Eo({},Xn(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Zn(this,u)}}],a&&D1(r.prototype,a),t}(),ob=Dr(kt.prototype,"type",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ib=Dr(kt.prototype,"x",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ab=Dr(kt.prototype,"y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ub=Dr(kt.prototype,"text",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),sb=Dr(kt.prototype,"properties",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),cb=Dr(kt.prototype,"_width",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),lb=Dr(kt.prototype,"_height",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),fb=Dr(kt.prototype,"anchorsOffset",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),db=Dr(kt.prototype,"isSelected",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pb=Dr(kt.prototype,"isHovered",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hb=Dr(kt.prototype,"isShowAnchor",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vb=Dr(kt.prototype,"isDragging",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yb=Dr(kt.prototype,"isHitable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),gb=Dr(kt.prototype,"draggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),mb=Dr(kt.prototype,"visible",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bb=Dr(kt.prototype,"zIndex",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_b=Dr(kt.prototype,"state",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Eb=Dr(kt.prototype,"autoToFront",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ob=Dr(kt.prototype,"style",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Dr(kt.prototype,"incoming",[f.m],Object.getOwnPropertyDescriptor(kt.prototype,"incoming"),kt.prototype),Dr(kt.prototype,"outgoing",[f.m],Object.getOwnPropertyDescriptor(kt.prototype,"outgoing"),kt.prototype),Dr(kt.prototype,"addNodeMoveRules",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"addNodeMoveRules"),kt.prototype),Dr(kt.prototype,"move",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"move"),kt.prototype),Dr(kt.prototype,"getMoveDistance",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"getMoveDistance"),kt.prototype),Dr(kt.prototype,"moveTo",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveTo"),kt.prototype),Dr(kt.prototype,"moveText",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"moveText"),kt.prototype),Dr(kt.prototype,"updateText",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateText"),kt.prototype),Dr(kt.prototype,"setSelected",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setSelected"),kt.prototype),Dr(kt.prototype,"setHovered",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHovered"),kt.prototype),Dr(kt.prototype,"setIsShowAnchor",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setIsShowAnchor"),kt.prototype),Dr(kt.prototype,"setHitable",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setHitable"),kt.prototype),Dr(kt.prototype,"setElementState",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setElementState"),kt.prototype),Dr(kt.prototype,"setProperty",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperty"),kt.prototype),Dr(kt.prototype,"setProperties",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setProperties"),kt.prototype),Dr(kt.prototype,"deleteProperty",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"deleteProperty"),kt.prototype),Dr(kt.prototype,"setStyle",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyle"),kt.prototype),Dr(kt.prototype,"setStyles",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setStyles"),kt.prototype),Dr(kt.prototype,"updateStyles",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateStyles"),kt.prototype),Dr(kt.prototype,"setZIndex",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"setZIndex"),kt.prototype),Dr(kt.prototype,"updateAttributes",[f.k],Object.getOwnPropertyDescriptor(kt.prototype,"updateAttributes"),kt.prototype),kt);function Pv(t){return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pv(t)}function Tb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Ab(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Tb(Object(a),!0).forEach(function(u){Pb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Tb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function k1(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function C1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function I1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Nv(){return Nv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=L1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Nv.apply(this,arguments)}function L1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=hc(t))!==null;);return t}function jv(t,r){return jv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},jv(t,r)}function F1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=hc(t);if(r){var d=hc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return B1(this,a)}}function B1(t,r){if(r&&(Pv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rp(t)}function rp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hc(t){return hc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hc(t)}function Pb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Mv(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var so,Nb,jb,Rv=(la=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&jv(l,p)})(d,t);var r,a,u=F1(d);function d(){var l;C1(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Pb(rp(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.CIRCLE_NODE),k1(rp(l),"r",Sb,rp(l)),l}return r=d,(a=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var l=Nv(hc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.circle;return Ab(Ab({},l),nn(p))}},{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.r;return[{x:l,y:p-y,id:"".concat(this.id,"_0")},{x:l+y,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+y,id:"".concat(this.id,"_2")},{x:l-y,y:p,id:"".concat(this.id,"_3")}]}}])&&I1(r.prototype,a),d}(fa),Sb=Mv(la.prototype,"r",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Mv(la.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(la.prototype,"width"),la.prototype),Mv(la.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(la.prototype,"height"),la.prototype),la);n(127);function Dv(t){return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dv(t)}function kv(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Mb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Mb(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mb(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Rb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Db(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Rb(Object(a),!0).forEach(function(u){Cb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Rb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function kb(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function G1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function U1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Cv(){return Cv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=z1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Cv.apply(this,arguments)}function z1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=yc(t))!==null;);return t}function Iv(t,r){return Iv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Iv(t,r)}function H1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=yc(t);if(r){var d=yc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return X1(this,a)}}function X1(t,r){if(r&&(Dv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vc(t)}function vc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yc(t){return yc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yc(t)}function Cb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function gc(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var ki,Ib,Lb,Lv=(so=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Iv(l,p)})(d,t);var r,a,u=H1(d);function d(){var l;G1(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Cb(vc(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.DIAMOND_NODE),kb(vc(l),"rx",Nb,vc(l)),kb(vc(l),"ry",jb,vc(l)),l}return r=d,(a=[{key:"getNodeStyle",value:function(){var l=Cv(yc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.diamond;return Db(Db({},l),nn(p))}},{key:"points",get:function(){var l=this.x,p=this.y,y=this.rx,m=this.ry;return[[l,p-m],[l+y,p],[l,p+m],[l-y,p]]}},{key:"pointsPosition",get:function(){return this.points.map(function(l){return{x:l[0],y:l[1]}})}},{key:"width",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var m=kv(y,1)[0];m<l&&(l=m),m>p&&(p=m)}),p-l}},{key:"height",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var m=kv(y,2)[1];m<l&&(l=m),m>p&&(p=m)}),p-l}},{key:"getDefaultAnchor",value:function(){var l=this;return this.points.map(function(p,y){var m=kv(p,2);return{x:m[0],y:m[1],id:"".concat(l.id,"_").concat(y)}})}}])&&U1(r.prototype,a),d}(fa),Nb=gc(so.prototype,"rx",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),jb=gc(so.prototype,"ry",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),gc(so.prototype,"points",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"points"),so.prototype),gc(so.prototype,"pointsPosition",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"pointsPosition"),so.prototype),gc(so.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"width"),so.prototype),gc(so.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"height"),so.prototype),so);function Fv(t){return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fv(t)}function Fb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Bb(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Fb(Object(a),!0).forEach(function(u){Ub(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Fb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Gb(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function V1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function W1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Bv(){return Bv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=Y1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Bv.apply(this,arguments)}function Y1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=bc(t))!==null;);return t}function Gv(t,r){return Gv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Gv(t,r)}function $1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=bc(t);if(r){var d=bc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return K1(this,a)}}function K1(t,r){if(r&&(Fv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mc(t)}function mc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bc(t){return bc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bc(t)}function Ub(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function np(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Qo,zb,Uv=(ki=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Gv(l,p)})(d,t);var r,a,u=$1(d);function d(){var l;V1(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Ub(mc(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.ELLIPSE_NODE),Gb(mc(l),"rx",Ib,mc(l)),Gb(mc(l),"ry",Lb,mc(l)),l}return r=d,(a=[{key:"getNodeStyle",value:function(){var l=Bv(bc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.ellipse;return Bb(Bb({},l),nn(p))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.rx,m=this.ry;return[{x:l,y:p-m,id:"".concat(this.id,"_0")},{x:l+y,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+m,id:"".concat(this.id,"_2")},{x:l-y,y:p,id:"".concat(this.id,"_3")}]}}])&&W1(r.prototype,a),d}(fa),Ib=np(ki.prototype,"rx",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Lb=np(ki.prototype,"ry",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),np(ki.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(ki.prototype,"width"),ki.prototype),np(ki.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(ki.prototype,"height"),ki.prototype),ki);function zv(t){return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zv(t)}function Hv(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Hb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Hb(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hb(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Xb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Vb(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Xb(Object(a),!0).forEach(function(u){Wb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function q1(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function Z1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function J1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Xv(){return Xv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=Q1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Xv.apply(this,arguments)}function Q1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=_c(t))!==null;);return t}function Vv(t,r){return Vv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Vv(t,r)}function ex(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=_c(t);if(r){var d=_c(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return tx(this,a)}}function tx(t,r){if(r&&(zv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return op(t)}function op(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _c(t){return _c=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_c(t)}function Wb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ip(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Wv,Yb,Yv=(Qo=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Vv(l,p)})(d,t);var r,a,u=ex(d);function d(){var l;Z1(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Wb(op(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.POLYGON_NODE),q1(op(l),"points",zb,op(l)),l}return r=d,(a=[{key:"getNodeStyle",value:function(){var l=Xv(_c(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.polygon;return Vb(Vb({},l),nn(p))}},{key:"pointsPosition",get:function(){var l=this.x,p=this.y,y=this.width,m=this.height;return this.points.map(function(w){return{x:w[0]+l-y/2,y:w[1]+p-m/2}})}},{key:"width",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var m=Hv(y,1)[0];m<l&&(l=m),m>p&&(p=m)}),p-l}},{key:"height",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var m=Hv(y,2)[1];m<l&&(l=m),m>p&&(p=m)}),p-l}},{key:"getDefaultAnchor",value:function(){var l=this,p=this.x,y=this.y,m=this.width,w=this.height;return this.points.map(function(T,M){var C=Hv(T,2),$=C[0],ae=C[1];return{x:p+$-m/2,y:y+ae-w/2,id:"".concat(l.id,"_").concat(M)}})}}])&&J1(r.prototype,a),d}(fa),zb=ip(Qo.prototype,"points",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),ip(Qo.prototype,"pointsPosition",[f.m],Object.getOwnPropertyDescriptor(Qo.prototype,"pointsPosition"),Qo.prototype),ip(Qo.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(Qo.prototype,"width"),Qo.prototype),ip(Qo.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(Qo.prototype,"height"),Qo.prototype),Qo);function $v(t){return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$v(t)}function $b(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Kb(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?$b(Object(a),!0).forEach(function(u){qb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$b(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function rx(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function nx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ox(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Kv(){return Kv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=ix(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Kv.apply(this,arguments)}function ix(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Ec(t))!==null;);return t}function qv(t,r){return qv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},qv(t,r)}function ax(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ec(t);if(r){var d=Ec(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ux(this,a)}}function ux(t,r){if(r&&($v(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ap(t)}function ap(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ec(t){return Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ec(t)}function qb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var nu,Zv=(Wv=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&qv(l,p)})(d,t);var r,a,u=ax(d);function d(){var l;nx(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return qb(ap(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.RECT_NODE),rx(ap(l),"radius",Yb,ap(l)),l}return r=d,(a=[{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.width,m=this.height;return[{x:l,y:p-m/2,id:"".concat(this.id,"_0")},{x:l+y/2,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+m/2,id:"".concat(this.id,"_2")},{x:l-y/2,y:p,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var l=Kv(Ec(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.rect;return Kb(Kb({},l),nn(p))}}])&&ox(r.prototype,a),d}(fa),Yb=function(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}(Wv.prototype,"radius",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wv);function Jv(t){return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jv(t)}function Zb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Jb(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Zb(Object(a),!0).forEach(function(u){e0(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Zb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function sx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function cx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Qv(){return Qv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=lx(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Qv.apply(this,arguments)}function lx(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Oc(t))!==null;);return t}function ey(t,r){return ey=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ey(t,r)}function fx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Oc(t);if(r){var d=Oc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return dx(this,a)}}function dx(t,r){if(r&&(Jv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qb(t)}function Qb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oc(t){return Oc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Oc(t)}function e0(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function t0(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var ty=(nu=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ey(l,p)})(d,t);var r,a,u=fx(d);function d(){var l;sx(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return e0(Qb(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.TEXT_NODE),l}return r=d,(a=[{key:"getTextStyle",value:function(){var l=Qv(Oc(d.prototype),"getTextStyle",this).call(this),p=this.graphModel.theme.text;return Jb(Jb({},l),nn(p))}},{key:"width",get:function(){var l=String(this.text.value).split(/[\r\n]/g),p=this.getTextStyle().fontSize;return Vl({rows:l,fontSize:p,rowsLength:l.length}).width}},{key:"height",get:function(){var l=String(this.text.value).split(/[\r\n]/g),p=this.getTextStyle().fontSize;return Vl({rows:l,fontSize:p,rowsLength:l.length}).height}}])&&cx(r.prototype,a),d}(fa),t0(nu.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(nu.prototype,"width"),nu.prototype),t0(nu.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(nu.prototype,"height"),nu.prototype),nu);function ry(t){return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ry(t)}function px(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function hx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ny(t,r){return ny=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ny(t,r)}function vx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=up(t);if(r){var d=up(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return yx(this,a)}}function yx(t,r){if(r&&(ry(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r0(t)}function r0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},up(t)}function gx(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var hi,n0,o0,i0,oy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ny(l,p)})(d,t);var r,a,u=vx(d);function d(){var l;px(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return gx(r0(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.HTML_NODE),l}return r=d,(a=[{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.width,m=this.height;return[{x:l,y:p-m/2,id:"".concat(this.id,"_0")},{x:l+y/2,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+m/2,id:"".concat(this.id,"_2")},{x:l-y/2,y:p,id:"".concat(this.id,"_3")}]}}])&&hx(r.prototype,a),d}(fa);function a0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function iy(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function mx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function u0(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function tf(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var s0=(hi=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),u0(this,"graphModel",void 0),iy(this,"isShowHorizontal",n0,this),iy(this,"isShowVertical",o0,this),iy(this,"position",i0,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var r,a;return r=t,a=[{key:"getStyle",value:function(){return function(u){for(var d=1;d<arguments.length;d++){var l=arguments[d]!=null?arguments[d]:{};d%2?a0(Object(l),!0).forEach(function(p){u0(u,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(l)):a0(Object(l)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(l,p))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,d){for(var l=u.x,p=u.y,y=!1,m=!1,w=0;w<d.length;w++){var T=d[w];if(T.id!==u.id&&(l===T.x&&(y=!0),p===T.y&&(m=!0),y&&m))break}return{isShowVertical:y,isShowHorizontal:m,position:{x:l,y:p}}}},{key:"getHorizontalSnapline",value:function(u,d){var l,p,y=!1,m=u.id;if(m){var w=this.graphModel.fakerNode;if(w&&w.id===m)p=mo(w);else{var T=this.graphModel.getNodeModelById(m);p=mo(T)}}for(var M=0;M<d.length;M++){var C=d[M];if(C.id!==u.id){var $=mo(C);if($.minY===p.minY||$.maxY===p.minY){y=!0,l=p.minY;break}if($.minY===p.maxY||$.maxY===p.maxY){y=!0,l=p.maxY;break}}}return Zn({isShowHorizontal:y,position:{y:l}})}},{key:"getVerticalSnapline",value:function(u,d){var l,p,y=!1,m=u.id;if(m){var w=this.graphModel.fakerNode;if(w&&w.id===m)p=mo(w);else{var T=this.graphModel.getNodeModelById(m);p=mo(T)}}for(var M=0;M<d.length;M++){var C=d[M];if(C.id!==u.id){var $=mo(C);if($.minX===p.minX||$.maxX===p.minX){y=!0,l=p.minX;break}if($.minX===p.maxX||$.maxX===p.maxX){y=!0,l=p.maxX;break}}}return Zn({isShowVertical:y,position:{x:l}})}},{key:"getSnapLinePosition",value:function(u,d){var l=this.getCenterSnapLine(u,d),p=l.isShowHorizontal,y=l.isShowVertical;if(!p){var m=this.getHorizontalSnapline(u,d);m.isShowHorizontal&&(l.isShowHorizontal=m.isShowHorizontal,l.position.y=m.position.y)}if(!y){var w=this.getVerticalSnapline(u,d);w.isShowVertical&&(l.isShowVertical=w.isShowVertical,l.position.x=w.position.x)}return l}},{key:"setSnaplineInfo",value:function(u){var d=u.isShowHorizontal,l=u.isShowVertical,p=u.position;this.position=p,this.isShowHorizontal=d,this.isShowVertical=l}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var d=this.graphModel.nodes,l=this.getSnapLinePosition(u,d);this.setSnaplineInfo(l)}}],a&&mx(r.prototype,a),t}(),n0=tf(hi.prototype,"isShowHorizontal",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o0=tf(hi.prototype,"isShowVertical",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i0=tf(hi.prototype,"position",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf(hi.prototype,"clearSnapline",[f.k],Object.getOwnPropertyDescriptor(hi.prototype,"clearSnapline"),hi.prototype),tf(hi.prototype,"setNodeSnapLine",[f.k],Object.getOwnPropertyDescriptor(hi.prototype,"setNodeSnapLine"),hi.prototype),hi),rf=new Map,c0=function(t){var r=di(),a=window.requestAnimationFrame(function u(){if(t(),rf.get(r)){var d=window.requestAnimationFrame(u);rf.set(r,d)}});return rf.set(r,a),r},sp=function(t){var r=rf.get(t);r&&(window.cancelAnimationFrame(r),rf.delete(t))};function ay(t){return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ay(t)}function nf(){return nf=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},nf.apply(this,arguments)}function l0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function cp(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?l0(Object(a),!0).forEach(function(u){Ii(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function bx(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return f0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return f0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function _x(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function uy(t,r){return uy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},uy(t,r)}function Ex(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=lp(t);if(r){var d=lp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Ox(this,a)}}function Ox(t,r){if(r&&(ay(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ci(t)}function Ci(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lp(t){return lp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},lp(t)}function Ii(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var wx=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&uy(l,p)})(d,t);var r,a,u=Ex(d);function d(){var l;return function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}(this,d),Ii(Ci(l=u.call(this)),"preTargetNode",void 0),Ii(Ci(l),"sourceRuleResults",void 0),Ii(Ci(l),"targetRuleResults",void 0),Ii(Ci(l),"dragHandler",void 0),Ii(Ci(l),"t",void 0),Ii(Ci(l),"onDragStart",function(p){var y=p.event,m=l.props,w=m.anchorData,T=m.nodeModel,M=m.graphModel,C=M.overlapMode;M.selectNodeById(T.id),C!==uo.INCREASE&&T.autoToFront&&M.toFront(T.id),M.eventCenter.emit(ir.ANCHOR_DRAGSTART,{data:w,e:y,nodeModel:T}),l.setState({startX:w.x,startY:w.y,endX:w.x,endY:w.y})}),Ii(Ci(l),"onDragging",function(p){var y=p.event,m=l.props,w=m.graphModel,T=m.nodeModel,M=m.anchorData,C=w.transformModel,$=w.eventCenter,ae=w.width,ve=w.height,je=w.editConfigModel,Re=je.autoExpand,Ye=je.stopMoveGraph,lt=y.clientX,Ct=y.clientY,wt=w.getPointByClient({x:lt,y:Ct}),er=wt.domOverlayPosition,Rt=er.x,Tt=er.y,vr=wt.canvasOverlayPosition,Fr=vr.x,qr=vr.y;l.t&&sp(l.t);var Vr=[];Rt<10?Vr=[10,0]:Rt+10>ae?Vr=[-10,0]:Tt<10?Vr=[0,10]:Tt+10>ve&&(Vr=[0,-10]),l.setState({endX:Fr,endY:qr,dragging:!0}),l.moveAnchorEnd(Fr,qr),Vr.length>0&&!Ye&&Re&&(l.t=c0(function(){var en=bx(Vr,2),Cn=en[0],Hn=en[1];C.translate(Cn,Hn);var Bo=l.state,Bi=Bo.endX,ei=Bo.endY;l.setState({endX:Bi-Cn,endY:ei-Hn}),l.moveAnchorEnd(Bi-Cn,ei-Hn)})),$.emit(ir.ANCHOR_DRAG,{data:M,e:y,nodeModel:T})}),Ii(Ci(l),"onDragEnd",function(p){var y=p.event;l.t&&sp(l.t),l.checkEnd(y),l.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),l.sourceRuleResults.clear(),l.targetRuleResults.clear();var m=l.props,w=m.graphModel,T=m.nodeModel,M=m.anchorData;w.eventCenter.emit(ir.ANCHOR_DRAGEND,{data:M,e:y,nodeModel:T})}),Ii(Ci(l),"checkEnd",function(p){var y=l.props,m=y.graphModel,w=y.nodeModel,T=y.anchorData,M=T.x,C=T.y,$=T.id,ae=(m.edgeType,l.state),ve=ae.endX,je=ae.endY,Re=ae.dragging,Ye=zu({x:ve,y:je},m);if(l.preTargetNode&&l.preTargetNode.state!==zr.DEFAULT&&l.preTargetNode.setElementState(zr.DEFAULT),Re&&Ye&&Ye.node){var lt=Ye.node,Ct=Ye.anchor.id,wt="".concat(w.id,"_").concat(lt.id,"_").concat(Ct,"_").concat($),er=l.sourceRuleResults.get(wt)||{},Rt=er.isAllPass,Tt=er.msg,vr=l.targetRuleResults.get(wt)||{},Fr=vr.isAllPass,qr=vr.msg;if(Rt&&Fr){lt.setElementState(zr.DEFAULT);var Vr=m.edgeGenerator(w.getData(),m.getNodeModelById(Ye.node.id).getData()),en=m.addEdge(cp(cp({},Vr),{},{sourceNodeId:w.id,sourceAnchorId:$,startPoint:{x:M,y:C},targetNodeId:Ye.node.id,targetAnchorId:Ye.anchor.id,endPoint:{x:Ye.anchor.x,y:Ye.anchor.y}})),Cn=l.props.anchorData;m.eventCenter.emit(ir.ANCHOR_DROP,{data:Cn,e:p,nodeModel:w,edgeModel:en})}else{var Hn=lt.getData();m.eventCenter.emit(ir.CONNECTION_NOT_ALLOWED,{data:Hn,msg:qr||Tt})}}}),l.sourceRuleResults=new Map,l.targetRuleResults=new Map,l.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},l.dragHandler=new Yr({onDragStart:l.onDragStart,onDragging:l.onDragging,onDragEnd:l.onDragEnd}),l}return r=d,(a=[{key:"getAnchorShape",value:function(){var l=this.props,p=l.anchorData,y=l.style,m=l.node.getAnchorShape(p);if(m)return m;var w=p.x,T=p.y,M=cp(cp({},y),y.hover);return Object(xe.g)("g",null,Object(xe.g)(Jl,nf({className:"lf-node-anchor-hover"},M,{x:w,y:T})),Object(xe.g)(Jl,nf({className:"lf-node-anchor"},y,{x:w,y:T})))}},{key:"moveAnchorEnd",value:function(l,p){var y=this.props,m=y.graphModel,w=y.nodeModel,T=y.anchorData,M=zu({x:l,y:p},m);if(M){var C=M.node,$=M.anchor.id;if(this.preTargetNode&&this.preTargetNode!==M.node&&this.preTargetNode.setElementState(zr.DEFAULT),T.id===$)return;this.preTargetNode=C;var ae="".concat(w.id,"_").concat(C.id,"_").concat($,"_").concat(T.id);if(!this.targetRuleResults.has(ae)){var ve=M.anchor,je=w.isAllowConnectedAsSource(C,T,ve),Re=C.isAllowConnectedAsTarget(w,T,ve);this.sourceRuleResults.set(ae,Hu(je)),this.targetRuleResults.set(ae,Hu(Re))}var Ye=this.sourceRuleResults.get(ae).isAllPass,lt=this.targetRuleResults.get(ae).isAllPass;Ye&&lt?C.setElementState(zr.ALLOW_CONNECT):C.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var l=this.state,p=l.startX,y=l.startY,m=l.endX,w=l.endY;return Jn(p,y,m,w)>10}},{key:"render",value:function(){var l=this,p=this.state,y=p.startX,m=p.startY,w=p.endX,T=p.endY,M=this.props,C=M.anchorData.edgeAddable,$=M.edgeStyle;return Object(xe.g)("g",{className:"lf-anchor"},Object(xe.g)("g",{onMouseDown:function(ae){C!==!1&&l.dragHandler.handleMouseDown(ae)}},this.getAnchorShape()),this.isShowLine()&&Object(xe.g)(dc,nf({x1:y,y1:m,x2:w,y2:T},$,{"pointer-events":"none"})))}}])&&_x(r.prototype,a),d}(xe.a);n(80);function d0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function xx(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?d0(Object(a),!0).forEach(function(u){Sx(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Sx(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function sy(t){return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sy(t)}function Tx(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return p0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return p0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function h0(t){var r=t.x,a=r===void 0?0:r,u=t.y,d=u===void 0?0:u,l=t.value,p=t.fontSize,y=t.fill,m=y===void 0?"currentColor":y,w=t.overflowMode,T=w===void 0?"default":w,M=t.textWidth,C=M===void 0?"":M,$=t.model,ae={textAnchor:"middle","dominant-baseline":"middle",x:a,y:d,fill:m};if(Object.entries(t).forEach(function(Ct){var wt=Tx(Ct,2),er=wt[0],Rt=wt[1];sy(Rt)!=="object"&&(ae[er]=Rt)}),l){var ve=String(l).split(/[\r\n]/g),je=ve.length;if(T!=="default"){var Re=$.BaseType,Ye=$.modelType;if(Re===xn.NODE&&Ye!==Pr.TEXT_NODE||Re===xn.EDGE&&C)return function(Ct){var wt=Ct.value,er=Ct.fontSize,Rt=Ct.model,Tt=Ct.fontFamily,vr=Tt===void 0?"":Tt,Fr=Ct.lineHeight,qr=Ct.wrapPadding,Vr=qr===void 0?"0, 0":qr,en=Ct.overflowMode,Cn=Ct.x,Hn=Ct.y,Bo=Rt.width,Bi=Rt.textHeight,ei=Ct.textWidth||Bo,Sc=String(wt).split(/[\r\n]/g),Dp=Sc.length,kp=Dd({rows:Sc,style:{fontSize:"".concat(er,"px"),width:"".concat(ei,"px"),fontFamily:vr,lineHeight:Fr,padding:Vr},rowsLength:Dp,className:"lf-get-text-height"}),rs=Rt.height>kp?Rt.height:kp;Bi&&(rs=Bi);var au=en==="ellipsis";return au&&(rs=er+2),Object(xe.g)("g",null,Object(xe.g)("foreignObject",{width:ei,height:rs,x:Cn-ei/2,y:Hn-rs/2},Object(xe.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:rs,width:ei,padding:Vr}},Object(xe.g)("div",{className:au?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:au?Sc.join(""):"",style:xx({},Ct)},Sc.map(function(uu){return Object(xe.g)("div",{className:"lf-node-text--auto-wrap-inner"},uu)})))))}(t)}if(je>1){var lt=ve.map(function(Ct,wt){var er=(wt-(je-1)/2)*(p+2);return Object(xe.g)("tspan",{className:"lf-text-tspan",x:a,y:d+er},Ct)});return Object(xe.g)("text",ae,lt)}return Object(xe.g)("text",ae,l)}}function cy(t){return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},cy(t)}function ly(){return ly=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},ly.apply(this,arguments)}function Ax(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return v0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return v0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Px(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function fy(t,r){return fy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},fy(t,r)}function Nx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=fp(t);if(r){var d=fp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return jx(this,a)}}function jx(t,r){if(r&&(cy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ou(t)}function ou(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fp(t)}function Qu(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var y0=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&fy(l,p)})(d,t);var r,a,u=Nx(d);function d(l){var p;(function(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")})(this,d),Qu(ou(p=u.call(this)),"dragHandler",void 0),Qu(ou(p),"sumDeltaX",0),Qu(ou(p),"sumDeltaY",0),Qu(ou(p),"stepDrag",void 0),Qu(ou(p),"onDragging",function(w){var T=w.deltaX,M=w.deltaY,C=p.props,$=C.model,ae=Ax(C.graphModel.transformModel.fixDeltaXY(T,M),2),ve=ae[0],je=ae[1];$.moveText(ve,je)}),Qu(ou(p),"dblClickHandler",function(){p.props.editable&&p.props.model.setElementState(zr.TEXT_EDIT)}),Qu(ou(p),"mouseDownHandle",function(w){var T=p.props,M=T.draggable,C=T.graphModel.editConfigModel.nodeTextDraggable;(M||C)&&p.stepDrag.handleMouseDown(w)});var y=l.model,m=l.draggable;return p.stepDrag=new Yr({onDragging:p.onDragging,step:1,model:y,isStopPropagation:m}),p}return r=d,(a=[{key:"getShape",value:function(){var l=this.props,p=l.model,y=l.graphModel,m=p.text,w=y.editConfigModel,T=m.value,M=m.x,C=m.y,$=m.editable,ae=m.draggable,ve={x:M,y:C,className:"",value:T};$?ve.className="lf-element-text":ae||w.nodeTextDraggable?ve.className="lf-text-draggable":ve.className="lf-text-disabled";var je=p.getTextStyle();return Object(xe.g)(h0,ly({},ve,je,{model:p}))}},{key:"render",value:function(){if(this.props.model.text)return Object(xe.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&Px(r.prototype,a),d}(xe.a),Mx=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function dy(t){return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},dy(t)}function dp(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return g0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return g0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function m0(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function py(t,r){return py=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},py(t,r)}function Rx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=pp(t);if(r){var d=pp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Dx(this,a)}}function Dx(t,r){if(r&&(dy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return co(t)}function co(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pp(t){return pp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pp(t)}function Oo(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var da=function(t){(function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&py(p,y)})(l,t);var r,a,u,d=Rx(l);function l(p){var y;(function(C,$){if(!(C instanceof $))throw new TypeError("Cannot call a class as a function")})(this,l),Oo(co(y=d.call(this)),"t",void 0),Oo(co(y),"moveOffset",void 0),Oo(co(y),"stepDrag",void 0),Oo(co(y),"contextMenuTime",void 0),Oo(co(y),"startTime",void 0),Oo(co(y),"clickTimer",void 0),Oo(co(y),"onDragStart",function(C){var $=C.event,ae=$.clientX,ve=$.clientY,je=y.props,Re=je.model,Ye=je.graphModel.getPointByClient({x:ae,y:ve}).canvasOverlayPosition,lt=Ye.x,Ct=Ye.y;y.moveOffset={x:Re.x-lt,y:Re.y-Ct}}),Oo(co(y),"onDragging",function(C){var $=C.event,ae=y.props,ve=ae.model,je=ae.graphModel,Re=je.editConfigModel,Ye=Re.stopMoveGraph,lt=Re.autoExpand,Ct=je.transformModel,wt=je.selectNodes,er=je.width,Rt=je.height,Tt=je.gridSize;ve.isDragging=!0;var vr=$.clientX,Fr=$.clientY,qr=je.getPointByClient({x:vr,y:Fr}).canvasOverlayPosition,Vr=qr.x,en=qr.y,Cn=dp(Ct.CanvasPointToHtmlPoint([Vr,en]),2),Hn=Cn[0],Bo=Cn[1];if(Vr+=y.moveOffset.x,en+=y.moveOffset.y,Vr=fi(Vr,Tt),en=fi(en,Tt),er&&Rt){if(!lt||Ye||!(Hn<0||Bo<0||Hn>er||Bo>Rt)){var Bi=dp(Ct.CanvasPointToHtmlPoint([Vr-ve.width/2,en-ve.height/2]),2),ei=Bi[0],Sc=Bi[1],Dp=dp(Ct.CanvasPointToHtmlPoint([Vr+ve.width/2,en+ve.height/2]),2),kp=Dp[0],rs=Dp[1],au=Math.max(Tt,20),uu=[];ei<0?uu=[au,0]:kp>je.width?uu=[-au,0]:Sc<0?uu=[0,au]:rs>je.height&&(uu=[0,-au]),y.t&&sp(y.t);var Cp=wt.map(function(Ip){return Ip.id});Cp.indexOf(ve.id)===-1&&(Cp=[ve.id]),uu.length>0&&!Ye&&lt?y.t=c0(function(){var Ip=dp(uu,2),Q0=Ip[0],e_=Ip[1];Ct.translate(Q0,e_);var OT=-Q0/Ct.SCALE_X,wT=-e_/Ct.SCALE_X;je.moveNodes(Cp,OT,wT)}):je.moveNodes(Cp,Vr-ve.x,en-ve.y)}}else je.moveNode2Coordinate(ve.id,Vr,en)}),Oo(co(y),"onDragEnd",function(){y.t&&sp(y.t),y.props.model.isDragging=!1}),Oo(co(y),"handleClick",function(C){if(y.startTime&&!(new Date().getTime()-y.startTime>200)){var $=y.props,ae=$.model,ve=$.graphModel,je={data:ae.getData(),e:C,position:ve.getPointByClient({x:C.clientX,y:C.clientY}),isSelected:!1,isMultiple:!1},Re=C.button===2,Ye=C.detail===2;if(!Re){var lt=ve.editConfigModel,Ct=Ll(C,lt);je.isMultiple=Ct,ae.isSelected&&!Ye&&Ct?(je.isSelected=!1,ae.setSelected(!1)):(ve.selectNodeById(ae.id,Ct),je.isSelected=!0,y.toFront()),Ye?(lt.nodeTextEdit&&ae.text.editable&&(ae.setSelected(!1),ve.setElementStateById(ae.id,zr.TEXT_EDIT)),ve.eventCenter.emit(ir.NODE_DBCLICK,je)):(ve.eventCenter.emit(ir.ELEMENT_CLICK,je),ve.eventCenter.emit(ir.NODE_CLICK,je))}}}),Oo(co(y),"handleContextMenu",function(C){C.preventDefault();var $=y.props,ae=$.model,ve=$.graphModel,je=ae.getData(),Re=ve.getPointByClient({x:C.clientX,y:C.clientY});ve.setElementStateById(ae.id,zr.SHOW_MENU,Re.domOverlayPosition),ae.isSelected||ve.selectNodeById(ae.id),ve.eventCenter.emit(ir.NODE_CONTEXTMENU,{data:je,e:C,position:Re}),y.toFront()}),Oo(co(y),"handleMouseDown",function(C){var $=y.props,ae=$.model,ve=$.graphModel;y.startTime=new Date().getTime(),ve.editConfigModel.adjustNodePosition&&ae.draggable&&y.stepDrag&&y.stepDrag.handleMouseDown(C)}),Oo(co(y),"setHoverON",function(C){var $=y.props,ae=$.model,ve=$.graphModel;if(!ae.isHovered){var je=ae.getData();ae.setHovered(!0),ve.eventCenter.emit(ir.NODE_MOUSEENTER,{data:je,e:C})}}),Oo(co(y),"setHoverOFF",function(C){var $=y.props,ae=$.model,ve=$.graphModel,je=ae.getData();ae.isHovered&&(ae.setHovered(!1),ve.eventCenter.emit(ir.NODE_MOUSELEAVE,{data:je,e:C}))}),Oo(co(y),"onMouseOut",function(C){Mx&&y.setHoverOFF(C)});var m=p.graphModel,w=m.gridSize,T=m.eventCenter,M=p.model;return y.stepDrag=new Yr({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:w,eventType:"NODE",isStopPropagation:!1,eventCenter:T,model:M}),y}return r=l,u=[{key:"getModel",value:function(p){return p}}],(a=[{key:"getAnchorShape",value:function(p){return null}},{key:"getAnchors",value:function(){var p=this,y=this.props,m=y.model,w=y.graphModel,T=m.isSelected,M=m.isHitable,C=m.isDragging,$=m.isShowAnchor;return M&&(T||$)&&!C?Cs(m.anchors,function(ae,ve){var je=m.getAnchorLineStyle(ae),Re=m.getAnchorStyle(ae);return Object(xe.g)(wx,{anchorData:ae,node:p,style:Re,edgeStyle:je,anchorIndex:ve,nodeModel:m,graphModel:w,setHoverOFF:p.setHoverOFF})}):[]}},{key:"getText",value:function(){var p=this.props,y=p.model,m=p.graphModel;if(y.state===zr.TEXT_EDIT)return"";if(y.text){var w=m.editConfigModel,T=!1;return(y.text.draggable||w.nodeTextDraggable)&&(T=!0),Object(xe.g)(y0,{editable:w.nodeTextEdit&&y.text.editable,model:y,graphModel:m,draggable:T})}}},{key:"getStateClassName",value:function(){var p=this.props.model,y=p.state,m=p.isDragging,w=p.isSelected,T="lf-node";switch(y){case zr.ALLOW_CONNECT:T+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:T+=" lf-node-not-allow";break;default:T+=" lf-node-default"}return m&&(T+=" lf-isDragging"),w&&(T+=" lf-node-selected"),T}},{key:"toFront",value:function(){var p=this.props,y=p.model,m=p.graphModel;m.overlapMode!==uo.INCREASE&&y.autoToFront&&m.toFront(y.id)}},{key:"render",value:function(){var p,y=this.props,m=y.model,w=y.graphModel,T=w.editConfigModel,M=T.hideAnchors,C=T.adjustNodePosition,$=w.gridSize,ae=w.transformModel.SCALE_X,ve=m.isHitable,je=m.draggable,Re=Object(xe.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),M?null:this.getAnchors());return ve?(C&&je&&this.stepDrag.setStep($*ae),p=Object(xe.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Re)):p=Object(xe.g)("g",{className:this.getStateClassName()},Re),p}}])&&m0(r.prototype,a),u&&m0(r,u),l}(xe.a);function hy(t){return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hy(t)}function vy(){return vy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},vy.apply(this,arguments)}function kx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Cx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function yy(t,r){return yy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},yy(t,r)}function Ix(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=hp(t);if(r){var d=hp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Lx(this,a)}}function Lx(t,r){if(r&&(hy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function hp(t){return hp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hp(t)}var gy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&yy(l,p)})(d,t);var r,a,u=Ix(d);function d(){return kx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.getNodeStyle();return Object(xe.g)(tu,vy({},p,{x:l.x,y:l.y,width:l.width,height:l.height,radius:l.radius}))}}])&&Cx(r.prototype,a),d}(da);function my(t){return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},my(t)}function by(){return by=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},by.apply(this,arguments)}function Fx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Bx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _y(t,r){return _y=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},_y(t,r)}function Gx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=vp(t);if(r){var d=vp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Ux(this,a)}}function Ux(t,r){if(r&&(my(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function vp(t){return vp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},vp(t)}var Ey=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&_y(l,p)})(d,t);var r,a,u=Gx(d);function d(){return Fx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.x,y=l.y,m=l.r,w=l.getNodeStyle();return Object(xe.g)(Jl,by({},w,{x:p,y,r:m}))}}])&&Bx(r.prototype,a),d}(da);function Oy(t){return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oy(t)}function zx(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return b0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return b0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function _0(t){var r=t.points,a=t.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(t).forEach(function(d){var l=zx(d,2),p=l[0],y=l[1];Oy(y)!=="object"&&(u[p]=y)}),u.className=a?"lf-basic-shape ".concat(a):"lf-basic-shape",u.points=r.map(function(d){return d.join(",")}).join(" "),Object(xe.g)("polygon",u)}function wy(t){return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wy(t)}function xy(){return xy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},xy.apply(this,arguments)}function Hx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Xx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Sy(t,r){return Sy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Sy(t,r)}function Vx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=yp(t);if(r){var d=yp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Wx(this,a)}}function Wx(t,r){if(r&&(wy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yp(t)}var Ty=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Sy(l,p)})(d,t);var r,a,u=Vx(d);function d(){return Hx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.x,y=l.y,m=l.width,w=l.height,T=l.points,M=l.getNodeStyle(),C={transform:"matrix(1 0 0 1 ".concat(p-m/2," ").concat(y-w/2,")")};return Object(xe.g)("g",C,Object(xe.g)(_0,xy({},M,{points:T,x:p,y})))}}])&&Xx(r.prototype,a),d}(da);function Ay(t){return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ay(t)}function Py(){return Py=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Py.apply(this,arguments)}function Yx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $x(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ny(t,r){return Ny=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ny(t,r)}function Kx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=gp(t);if(r){var d=gp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return qx(this,a)}}function qx(t,r){if(r&&(Ay(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function gp(t){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gp(t)}var jy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Ny(l,p)})(d,t);var r,a,u=Kx(d);function d(){return Yx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.getNodeStyle();return Object(xe.g)("g",null,Object(xe.g)(_0,Py({},p,{points:l.points,x:l.x,y:l.y})))}}])&&$x(r.prototype,a),d}(da);function My(t){return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},My(t)}function Zx(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return E0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return E0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Jx(t){var r=t.x,a=r===void 0?0:r,u=t.y,d=u===void 0?0:u,l=t.rx,p=l===void 0?4:l,y=t.ry,m=y===void 0?4:y,w=t.className,T={cx:a,cy:d,rx:p,ry:m,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach(function(M){var C=Zx(M,2),$=C[0],ae=C[1];My(ae)!=="object"&&(T[$]=ae)}),T.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object(xe.g)("ellipse",T)}function Ry(t){return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ry(t)}function Dy(){return Dy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Dy.apply(this,arguments)}function Qx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function eS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ky(t,r){return ky=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ky(t,r)}function tS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=mp(t);if(r){var d=mp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return rS(this,a)}}function rS(t,r){if(r&&(Ry(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function mp(t){return mp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},mp(t)}var Cy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ky(l,p)})(d,t);var r,a,u=tS(d);function d(){return Qx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.getNodeStyle();return Object(xe.g)(Jx,Dy({},p,{x:l.x,y:l.y,rx:l.rx,ry:l.ry}))}}])&&eS(r.prototype,a),d}(da);function Iy(t){return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Iy(t)}function O0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function w0(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?O0(Object(a),!0).forEach(function(u){nS(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function nS(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function oS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function iS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ly(t,r){return Ly=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ly(t,r)}function aS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=bp(t);if(r){var d=bp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return uS(this,a)}}function uS(t,r){if(r&&(Iy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function bp(t){return bp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bp(t)}var Fy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Ly(l,p)})(d,t);var r,a,u=aS(d);function d(){return oS(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getBackground",value:function(){var l=this.props.model,p=l.getTextStyle(),y=l.width,m=l.height,w=l.x,T=l.y,M=w0(w0({},p.background),{},{x:w,y:T-1,width:y,height:m});return Object(xe.g)(tu,M)}},{key:"getShape",value:function(){return Object(xe.g)("g",null,this.getBackground())}}])&&iS(r.prototype,a),d}(da);function By(t){return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},By(t)}function Gy(){return Gy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Gy.apply(this,arguments)}function sS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function cS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Uy(t,r){return Uy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Uy(t,r)}function lS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=_p(t);if(r){var d=_p(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return fS(this,a)}}function fS(t,r){if(r&&(By(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return of(t)}function of(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_p(t)}function Ep(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var zy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Uy(l,p)})(d,t);var r,a,u=lS(d);function d(){var l;sS(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Ep(of(l=u.call.apply(u,[this].concat(y))),"ref",void 0),Ep(of(l),"currentProperties",void 0),Ep(of(l),"preProperties",void 0),Ep(of(l),"setRef",function(w){l.ref=w}),l}return r=d,(a=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(l){l.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var l=this.props.model,p=l.x,y=l.y,m=l.height,w=l.width,T=l.getNodeStyle();return this.currentProperties=JSON.stringify(l.properties),Object(xe.g)("foreignObject",Gy({},T,{x:p-w/2,y:y-m/2,width:w,height:m,ref:this.setRef}))}}])&&cS(r.prototype,a),d}(da);function Hy(t){return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hy(t)}function Xy(){return Xy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Xy.apply(this,arguments)}function x0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function es(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?x0(Object(a),!0).forEach(function(u){Yy(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function dS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Vy(t,r){return Vy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Vy(t,r)}function pS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Op(t);if(r){var d=Op(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return hS(this,a)}}function hS(t,r){if(r&&(Hy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wy(t)}function Wy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Op(t)}function Yy(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Li,vS=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Vy(l,p)})(d,t);var r,a,u=pS(d);function d(l){var p;return function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}(this,d),Yy(Wy(p=u.call(this,l)),"setHoverON",function(){p.setState({isHovered:!0})}),Yy(Wy(p),"setHoverOFF",function(){p.setState({isHovered:!1})}),p.state={isHovered:!1},p}return r=d,(a=[{key:"getBackground",value:function(){var l=this.props.model,p=l.getTextStyle(),y=l.text,m=p.background||{};if(this.state.isHovered&&p.hover&&p.hover.background&&(m=es(es({},m),p.hover.background)),y&&y.value&&m.fill!=="transparent"){var w,T=p.fontSize,M=p.overflowMode,C=p.lineHeight,$=p.wrapPadding,ae=p.textWidth,ve=y.value,je=y.x,Re=y.y,Ye=String(ve).split(/[\r\n]/g),lt=Ye.length;if(M==="autoWrap"&&ae){var Ct=Dd({rows:Ye,style:{fontSize:"".concat(T,"px"),width:"".concat(ae,"px"),lineHeight:C,padding:$},rowsLength:lt,className:"lf-get-text-height"});w=es(es({},m),{},{x:je-1,y:Re-1,width:ae,height:Ct})}else{Ye&&Ye.forEach(function(vr){St(vr)});var wt=Vl({rows:Ye,fontSize:T,rowsLength:lt}),er=wt.width,Rt=wt.height;if(typeof m.wrapPadding=="string"){var Tt=m.wrapPadding.split(",").filter(function(vr){return vr.trim()}).map(function(vr){return parseFloat(vr.trim())});Tt.length>0&&Tt.length<=4&&(Tt.length===1?Tt=[Tt[0],Tt[0],Tt[0],Tt[0]]:Tt.length===2?Tt=[Tt[0],Tt[1],Tt[0],Tt[1]]:Tt.length===3&&(Tt=[Tt[0],Tt[1],Tt[2],Tt[1]]),er+=Tt[1]+Tt[3],Rt+=Tt[0]+Tt[2],je+=(Tt[1]-Tt[3])/2,Re+=(Tt[2]-Tt[0])/2)}w=es(es({},m),{},{x:je-1,y:Re-1,width:er,height:Rt})}return Object(xe.g)(tu,w)}}},{key:"getShape",value:function(){var l=this.props.model,p=l.text,y=p.value,m=p.x,w=p.y;if(y){var T=es({x:m,y:w,className:"lf-element-text",value:y},l.getTextStyle());return Object(xe.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(xe.g)(h0,Xy({},T,{model:l})))}}}])&&dS(r.prototype,a),d}(y0);function $y(t){return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$y(t)}function S0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function pa(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?S0(Object(a),!0).forEach(function(u){Fo(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function yS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return T0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return T0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function T0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function gS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ky(t,r){return Ky=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ky(t,r)}function mS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=wp(t);if(r){var d=wp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return bS(this,a)}}function bS(t,r){if(r&&($y(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lo(t)}function Lo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},wp(t)}function Fo(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Li||(Li={}));var A0=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Ky(l,p)})(d,t);var r,a,u=mS(d);function d(l){var p;(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,d),Fo(Lo(p=u.call(this)),"stepDragData",void 0),Fo(Lo(p),"stepDrag",void 0),Fo(Lo(p),"oldEdge",void 0),Fo(Lo(p),"preTargetNode",void 0),Fo(Lo(p),"targetRuleResults",void 0),Fo(Lo(p),"sourceRuleResults",void 0),Fo(Lo(p),"handleMouseDown",function(T){p.stepDrag&&p.stepDrag.handleMouseDown(T)}),Fo(Lo(p),"onDragStart",function(){var T=p.props,M=T.x,C=T.y,$=T.edgeModel,ae=$.startPoint,ve=$.endPoint,je=$.pointsList;p.oldEdge={startPoint:ae,endPoint:ve,pointsList:je},p.setState({endX:M,endY:C,dragging:!0})}),Fo(Lo(p),"onDragging",function(T){var M=T.deltaX,C=T.deltaY,$=p.state,ae=$.endX,ve=$.endY,je=p.props,Re=je.graphModel,Ye=je.type,lt=Re.transformModel,Ct=Re.editConfigModel,wt=yS(lt.moveCanvasPointByHtml([ae,ve],M,C),2),er=wt[0],Rt=wt[1];p.setState({endX:er,endY:Rt,dragging:!0});var Tt=p.props.edgeModel,vr=zu({x:ae,y:ve},Re);if(vr&&vr.node&&p.isAllowAdjust(vr).pass){var Fr,qr=Tt.startPoint,Vr=Tt.endPoint,en=Tt.sourceNode,Cn=Tt.targetNode;Ye===Li.SOURCE?Fr={startPoint:{x:vr.anchor.x,y:vr.anchor.y},endPoint:{x:Vr.x,y:Vr.y},sourceNode:vr.node,targetNode:Cn}:Ye===Li.TARGET&&(Fr={startPoint:{x:qr.x,y:qr.y},endPoint:{x:vr.anchor.x,y:vr.anchor.y},sourceNode:en,targetNode:vr.node}),Tt.updateAfterAdjustStartAndEnd(Fr)}else Ye===Li.SOURCE?Tt.updateStartPoint({x:er,y:Rt}):Ye===Li.TARGET&&Tt.updateEndPoint({x:er,y:Rt});Tt.text.value&&Ct.adjustEdge&&Tt.setText(Object.assign({},Tt.text,Tt.textPosition))}),Fo(Lo(p),"onDragEnd",function(T){var M=T.event;try{var C;p.setState({dragging:!1});var $=p.props,ae=$.graphModel,ve=$.edgeModel,je=$.type,Re=p.state,Ye=Re.endX,lt=Re.endY,Ct=Re.dragging,wt=zu({x:Ye,y:lt},ae);if(!Ct)return;var er,Rt=!1;if(wt&&wt.node){var Tt=p.isAllowAdjust(wt),vr=Tt.pass,Fr=Tt.msg,qr=Tt.newTargetNode;if(vr){var Vr,en=ve.getData();er=pa(pa({},en),{},{sourceAnchorId:"",targetAnchorId:"",text:(en==null||(Vr=en.text)===null||Vr===void 0?void 0:Vr.value)||""}),je===Li.SOURCE?(er=pa(pa({},ae.edgeGenerator(ae.getNodeModelById(wt.node.id).getData(),ae.getNodeModelById(ve.targetNodeId).getData(),er)),{},{sourceNodeId:wt.node.id,sourceAnchorId:wt.anchor.id,startPoint:{x:wt.anchor.x,y:wt.anchor.y},targetNodeId:ve.targetNodeId,endPoint:pa({},ve.endPoint)}),ve.sourceNodeId===wt.node.id&&ve.sourceAnchorId===wt.anchor.id&&(Rt=!0)):je===Li.TARGET&&(er=pa(pa({},ae.edgeGenerator(ae.getNodeModelById(ve.sourceNodeId).getData(),ae.getNodeModelById(wt.node.id).getData(),er)),{},{sourceNodeId:ve.sourceNodeId,startPoint:pa({},ve.startPoint),targetNodeId:wt.node.id,targetAnchorId:wt.anchor.id,endPoint:{x:wt.anchor.x,y:wt.anchor.y}}),ve.targetNodeId===wt.node.id&&ve.targetAnchorId===wt.anchor.id&&(Rt=!0))}else{Rt=!0;var Cn=qr.getData();ae.eventCenter.emit(ir.CONNECTION_NOT_ALLOWED,{data:Cn,msg:Fr})}}else Rt=!0;if(Rt)p.recoveryEdge();else{ae.deleteEdgeById(ve.id);var Hn=ae.addEdge(pa({},er));ae.eventCenter.emit(ir.EDGE_EXCHANGE_NODE,{data:{newEdge:Hn.getData(),oldEdge:ve.getData()}})}(C=p.preTargetNode)===null||C===void 0||C.setElementState(zr.DEFAULT)}finally{p.props.graphModel.eventCenter.emit(ir.ADJUST_POINT_DRAGEND,{e:M,data:p.stepDragData})}}),Fo(Lo(p),"recoveryEdge",function(){var T=p.props.edgeModel,M=p.oldEdge,C=M.startPoint,$=M.endPoint,ae=M.pointsList;T.updateStartPoint(C),T.updateEndPoint($),T.modelType!==Pr.LINE_EDGE&&(T.pointsList=ae,T.initPoints())}),Fo(Lo(p),"getAdjustPointStyle",function(){var T=p.props,M=T.graphModel.theme;return T.edgeModel,M.edgeAdjust}),p.state={dragging:!1,endX:0,endY:0},p.targetRuleResults=new Map,p.sourceRuleResults=new Map;var y=l.type,m=l.edgeModel,w=l.graphModel.eventCenter;return p.stepDragData={type:y,edgeData:m.getData()},p.stepDrag=new Yr({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:w,data:p.stepDragData}),p}return r=d,(a=[{key:"isAllowAdjust",value:function(l){var p=this.props,y=p.edgeModel,m=y.id,w=y.sourceNode,T=y.targetNode,M=y.sourceAnchorId,C=y.targetAnchorId,$=p.type,ae=null,ve=null,je=null,Re=null;if($===Li.SOURCE?(ae=l.node,ve=T,je=l.anchor,Re=T.getAnchorInfo(C)):(ae=w,ve=l.node,Re=l.anchor,je=w.getAnchorInfo(M)),this.preTargetNode&&this.preTargetNode!==l.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=l.node,Re.id===je.id)return{pass:!1,msg:"",newTargetNode:ve};var Ye="".concat(ae.id,"_").concat(ve.id,"_").concat(je.id,"_").concat(Re.id);if(!this.targetRuleResults.has(Ye)){var lt=ae.isAllowConnectedAsSource(ve,je,Re,m),Ct=ve.isAllowConnectedAsTarget(ae,je,Re,m);this.sourceRuleResults.set(Ye,Hu(lt)),this.targetRuleResults.set(Ye,Hu(Ct))}var wt=this.sourceRuleResults.get(Ye),er=wt.isAllPass,Rt=wt.msg,Tt=this.targetRuleResults.get(Ye),vr=Tt.isAllPass,Fr=Tt.msg,qr=er&&vr?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return $===Li.SOURCE?ae.setElementState(qr):ve.setElementState(qr),{pass:er&&vr,msg:Fr||Rt,newTargetNode:ve}}},{key:"render",value:function(){var l=this.props,p=l.x,y=l.y,m=l.getAdjustPointShape,w=l.edgeModel,T=this.state.dragging;return Object(xe.g)("g",{pointerEvents:T?"none":"",onMouseDown:this.handleMouseDown},T?"":m(p,y,w))}}])&&gS(r.prototype,a),d}(xe.a);function qy(t){return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qy(t)}function af(){return af=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},af.apply(this,arguments)}function _S(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return P0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return P0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function ES(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function OS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Zy(t,r){return Zy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Zy(t,r)}function wS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=xp(t);if(r){var d=xp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return xS(this,a)}}function xS(t,r){if(r&&(qy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vi(t)}function vi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xp(t){return xp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},xp(t)}function Fi(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var uf=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Zy(l,p)})(d,t);var r,a,u=wS(d);function d(){var l;ES(this,d);for(var p=arguments.length,y=new Array(p),m=0;m<p;m++)y[m]=arguments[m];return Fi(vi(l=u.call.apply(u,[this].concat(y))),"startTime",void 0),Fi(vi(l),"contextMenuTime",void 0),Fi(vi(l),"clickTimer",void 0),Fi(vi(l),"textRef",Object(xe.f)()),Fi(vi(l),"handleHover",function(w,T){var M=l.props,C=M.model,$=M.graphModel.eventCenter;C.setHovered(w);var ae=w?ir.EDGE_MOUSEENTER:ir.EDGE_MOUSELEAVE,ve=C.getData();$.emit(ae,{data:ve,e:T})}),Fi(vi(l),"setHoverON",function(w){l.props.model.isHovered||(l.textRef&&l.textRef.current.setHoverON(),l.handleHover(!0,w))}),Fi(vi(l),"setHoverOFF",function(w){l.props.model.isHovered&&(l.textRef&&l.textRef.current.setHoverOFF(),l.handleHover(!1,w))}),Fi(vi(l),"handleContextMenu",function(w){w.preventDefault(),l.contextMenuTime=new Date().getTime(),l.clickTimer&&clearTimeout(l.clickTimer);var T=l.props,M=T.model,C=T.graphModel,$=C.getPointByClient({x:w.clientX,y:w.clientY});C.setElementStateById(M.id,zr.SHOW_MENU,$.domOverlayPosition),l.toFront(),M.isSelected||C.selectEdgeById(M.id);var ae=M==null?void 0:M.getData();C.eventCenter.emit(ir.EDGE_CONTEXTMENU,{data:ae,e:w,position:$})}),Fi(vi(l),"handleMouseDown",function(w){w.stopPropagation(),l.startTime=new Date().getTime()}),Fi(vi(l),"handleMouseUp",function(w){if(l.startTime&&!(new Date().getTime()-l.startTime>200||w.button===2)){var T=w.detail===2,M=l.props,C=M.model,$=M.graphModel,ae=C==null?void 0:C.getData(),ve=$.getPointByClient({x:w.clientX,y:w.clientY});if(T){var je=$.editConfigModel,Re=$.textEditElement;if(Re&&Re.id===C.id&&$.setElementStateById(C.id,zr.DEFAULT),je.edgeTextEdit&&C.text.editable&&$.setElementStateById(C.id,zr.TEXT_EDIT),C.modelType===Pr.POLYLINE_EDGE){var Ye=C,lt=$.getPointByClient({x:w.x,y:w.y}).canvasOverlayPosition,Ct=lt.x,wt=lt.y,er=rt({x:Ct,y:wt},Ye.points);Ye.dbClickPosition=er}$.eventCenter.emit(ir.EDGE_DBCLICK,{data:ae,e:w,position:ve})}else $.eventCenter.emit(ir.ELEMENT_CLICK,{data:ae,e:w,position:ve}),$.eventCenter.emit(ir.EDGE_CLICK,{data:ae,e:w,position:ve});var Rt=$.editConfigModel;$.selectEdgeById(C.id,Ll(w,Rt)),l.toFront()}}),l}return r=d,(a=[{key:"getShape",value:function(){return Object(xe.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var l=this.props,p=l.model,y=l.graphModel;if(p.state===zr.TEXT_EDIT)return null;var m=!1,w=y.editConfigModel;return(p.text.draggable||w.edgeTextDraggable)&&(m=!0),Object(xe.g)(vS,{ref:this.textRef,editable:w.edgeTextEdit&&p.text.editable,model:p,graphModel:y,draggable:m})}},{key:"getArrowInfo",value:function(){var l=this.props.model,p=l.startPoint,y=l.endPoint,m=l.isSelected;return{start:p,end:y,hover:this.state.hover,isSelected:m}}},{key:"getLastTwoPoints",value:function(){var l=this.props.model;return[l.startPoint,l.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var l=this.props.model,p=l.id,y=l.getArrowStyle(),m=y.refY,w=m===void 0?0:m,T=y.refX,M=T===void 0?2:T,C=_S(this.getLastTwoPoints(),2),$=C[0],ae=C[1],ve="auto";return $!==null&&ae!==null&&(ve=ov({x:ae.x-$.x,y:ae.y-$.y,z:0})*(180/Math.PI)),Object(xe.g)("g",null,Object(xe.g)("defs",null,Object(xe.g)("marker",{id:"marker-start-".concat(p),refX:-M,refY:w,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(xe.g)("marker",{id:"marker-end-".concat(p),refX:M,refY:w,overflow:"visible",orient:ve,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var l=this.props.model.getArrowStyle(),p=l.stroke,y=l.strokeWidth,m=l.offset,w=l.verticalLength;return Object(xe.g)("path",{stroke:p,fill:p,strokeWidth:y,d:"M 0 0 L ".concat(m," -").concat(w," L ").concat(m," ").concat(w," Z")})}},{key:"getEndArrow",value:function(){var l=this.props.model.getArrowStyle(),p=l.stroke,y=l.strokeWidth,m=l.offset,w=l.verticalLength;return Object(xe.g)("path",{stroke:p,fill:p,strokeWidth:y,transform:"rotate(180)",d:"M 0 0 L ".concat(m," -").concat(w," L ").concat(m," ").concat(w," Z")})}},{key:"getAdjustPointShape",value:function(l,p,y){var m=y.getAdjustPointStyle();return Object(xe.g)(Jl,af({className:"lf-edge-adjust-point"},m,{x:l,y:p}))}},{key:"getAdjustPoints",value:function(){var l=this.props,p=l.model,y=l.graphModel,m=p.getAdjustStart(),w=p.getAdjustEnd();return Object(xe.g)("g",null,Object(xe.g)(A0,af({type:"SOURCE"},m,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:p,graphModel:y})),Object(xe.g)(A0,af({type:"TARGET"},w,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:p,graphModel:y})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(xe.g)("g",null)}},{key:"getAppend",value:function(){return Object(xe.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var l=this.props,p=l.graphModel,y=l.model;p.overlapMode!==uo.INCREASE&&p.toFront(y.id)}},{key:"render",value:function(){var l=this.props,p=l.model,y=p.isSelected,m=p.isHitable,w=p.isShowAdjustPoint;return l.graphModel.animation,Object(xe.g)("g",null,Object(xe.g)("g",{className:["lf-edge",!m&&"pointer-none",y&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),w&&y?this.getAdjustPoints():"")}}])&&OS(r.prototype,a),d}(xe.a);function Jy(t){return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jy(t)}function SS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return N0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return N0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var sf=function(t){var r={d:""};return Object.entries(t).forEach(function(a){var u=SS(a,2),d=u[0],l=u[1],p=Jy(l);d!=="style"&&p==="object"||(r[d]=l)}),Object(xe.g)("path",r)};function Qy(t){return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qy(t)}function eg(){return eg=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},eg.apply(this,arguments)}function TS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function AS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function tg(t,r){return tg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},tg(t,r)}function PS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Sp(t);if(r){var d=Sp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return NS(this,a)}}function NS(t,r){if(r&&(Qy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Sp(t)}var rg=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&tg(l,p)})(d,t);var r,a,u=PS(d);function d(){return TS(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getEdge",value:function(){var l=this.props.model,p=l.startPoint,y=l.endPoint,m=l.isAnimation,w=l.arrowConfig,T=l.getEdgeStyle(),M=l.getEdgeAnimationStyle(),C=M.strokeDasharray,$=M.stroke,ae=M.strokeDashoffset,ve=M.animationName,je=M.animationDuration,Re=M.animationIterationCount,Ye=M.animationTimingFunction,lt=M.animationDirection;return Object(xe.g)(dc,eg({},T,{x1:p.x,y1:p.y,x2:y.x,y2:y.y},w,m?{strokeDasharray:C,stroke:$,style:{strokeDashoffset:ae,animationName:ve,animationDuration:je,animationIterationCount:Re,animationTimingFunction:Ye,animationDirection:lt}}:{}))}},{key:"getAppendWidth",value:function(){var l=this.props.model,p=function(C){var $,ae=C.start,ve=C.end;if(ae.x===ve.x&&ae.y===ve.y)$="";else{var je={start:ae,end:ve,offset:10,verticalLength:5},Re=Ja(Zu(Zu({},je),{},{type:"start"})),Ye=Ja(Zu(Zu({},je),{},{type:"end"}));$="M".concat(Re.leftX," ").concat(Re.leftY,` 
    L`).concat(Re.rightX," ").concat(Re.rightY,` 
    L`).concat(Ye.rightX," ").concat(Ye.rightY,`
    L`).concat(Ye.leftX," ").concat(Ye.leftY," z")}return{d:$,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:l.startPoint,end:l.endPoint}),y=p.d,m=p.strokeWidth,w=p.fill,T=p.strokeDasharray,M=p.stroke;return Object(xe.g)(sf,{d:y,fill:w,strokeWidth:m,stroke:M,strokeDasharray:T})}}])&&AS(r.prototype,a),d}(uf);function ng(t){return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ng(t)}function jS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return j0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return j0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function j0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var MS=function(t){var r={points:"",fill:"none"};return Object.entries(t).forEach(function(a){var u=jS(a,2),d=u[0],l=u[1];(d==="style"||ng(l)!=="object")&&(r[d]=l)}),Object(xe.g)("polyline",r)};function og(t){return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},og(t)}function M0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Tp(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?M0(Object(a),!0).forEach(function(u){va(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function ig(){return ig=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},ig.apply(this,arguments)}function RS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return R0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return R0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function DS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ag(t,r){return ag=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ag(t,r)}function kS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ap(t);if(r){var d=Ap(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return CS(this,a)}}function CS(t,r){if(r&&(og(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ha(t)}function ha(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ap(t){return Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ap(t)}function va(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var ug=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ag(l,p)})(d,t);var r,a,u=kS(d);function d(){var l;return function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}(this,d),va(ha(l=u.call(this)),"drag",void 0),va(ha(l),"isDragging",void 0),va(ha(l),"isShowAdjustPointTemp",void 0),va(ha(l),"appendInfo",void 0),va(ha(l),"onDragStart",function(){var p=l.props.model;p.dragAppendStart(),l.isShowAdjustPointTemp=p.isShowAdjustPoint,p.isShowAdjustPoint=!1}),va(ha(l),"onDragging",function(p){var y=p.deltaX,m=p.deltaY,w=l.props,T=w.model,M=w.graphModel;l.isDragging=!0;var C=M.transformModel,$=M.editConfigModel,ae=RS(C.fixDeltaXY(y,m),2),ve=ae[0],je=ae[1],Re=T,Ye=$.adjustEdgeMiddle;l.appendInfo=Ye?Re.dragAppendSimple(l.appendInfo,{x:ve,y:je}):Re.dragAppend(l.appendInfo,{x:ve,y:je})}),va(ha(l),"onDragEnd",function(){var p=l.props,y=p.model,m=p.graphModel.eventCenter,w=y;w.dragAppendEnd(),l.isDragging=!1,w.isShowAdjustPoint=l.isShowAdjustPointTemp,l.appendInfo=void 0,m.emit(ir.EDGE_ADJUST,{data:w.getData()})}),va(ha(l),"beforeDragStart",function(p,y){y.dragAble&&l.drag.handleMouseDown(p),l.appendInfo=y}),l.drag=new Yr({onDragStart:l.onDragStart,onDragging:l.onDragging,onDragEnd:l.onDragEnd,isStopPropagation:!1}),l}return r=d,(a=[{key:"getEdge",value:function(){var l=this.props.model,p=l.points,y=l.isAnimation,m=l.arrowConfig,w=l.getEdgeStyle(),T=l.getEdgeAnimationStyle(),M=T.strokeDasharray,C=T.stroke,$=T.strokeDashoffset,ae=T.animationName,ve=T.animationDuration,je=T.animationIterationCount,Re=T.animationTimingFunction,Ye=T.animationDirection;return Object(xe.g)(MS,ig({points:p},w,m,y?{strokeDasharray:M,stroke:C,style:{strokeDashoffset:$,animationName:ae,animationDuration:ve,animationIterationCount:je,animationTimingFunction:Re,animationDirection:Ye}}:{}))}},{key:"getArrowInfo",value:function(){var l=this.props.model,p=l.points,y=l.isSelected,m={start:null,end:null,hover:this.state.hover,isSelected:y},w=Se(p);return w.length>=2&&(m.start=w[w.length-2],m.end=w[w.length-1]),m}},{key:"getLastTwoPoints",value:function(){var l=this.props.model.points,p=Se(l);return p.length>=2?[p[p.length-2],p[p.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(l){var p,y=l.start,m=l.end;if(y.x===m.x&&y.y===m.y)p="";else{var w={start:y,end:m,offset:10,verticalLength:5},T=Ja(Tp(Tp({},w),{},{type:"start"})),M=Ja(Tp(Tp({},w),{},{type:"end"}));p="M".concat(T.leftX," ").concat(T.leftY,` 
      L`).concat(T.rightX," ").concat(T.rightY,` 
      L`).concat(M.rightX," ").concat(M.rightY,`
      L`).concat(M.leftX," ").concat(M.leftY," z")}return{d:p,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(l){var p=this.getAppendAttributes(l),y=p.d,m=p.strokeWidth,w=p.fill,T=p.strokeDasharray,M=p.stroke;return Object(xe.g)(sf,{d:y,fill:w,strokeWidth:m,stroke:M,strokeDasharray:T})}},{key:"getAppendWidth",value:function(){for(var l=this,p=this.props,y=p.model,m=p.graphModel,w=y.pointsList,T=y.draggable,M=[],C=w.length,$=function(ve){var je="lf-polyline-append",Re={start:{x:w[ve].x,y:w[ve].y},end:{x:w[ve+1].x,y:w[ve+1].y},startIndex:ve,endIndex:ve+1,direction:"",dragAble:!0},Ye=Object(xe.g)("g",{className:je},l.getAppendShape(Re)),lt=m.editConfigModel,Ct=lt.adjustEdge,wt=lt.adjustEdgeMiddle;if(Ct&&T){var er=Re.startIndex,Rt=Re.endIndex,Tt=wt&&(er===0||Rt===C-1);Re.dragAble=!Tt,Re.start.x===Re.end.x?(Re.dragAble&&(je+="-ew-resize"),Re.direction=Kr.VERTICAL):Re.start.y===Re.end.y&&(Re.dragAble&&(je+="-ns-resize"),Re.direction=Kr.HORIZONTAL),Ye=Object(xe.g)("g",{className:l.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(vr){return l.beforeDragStart(vr,Re)}},Object(xe.g)("g",{className:je},l.getAppendShape(Re)))}M.push(Ye)},ae=0;ae<C-1;ae++)$(ae);return Object(xe.g)("g",null,M)}}])&&DS(r.prototype,a),d}(uf);function sg(t){return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sg(t)}function IS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return D0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return D0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function D0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function cg(){return cg=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},cg.apply(this,arguments)}function LS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function FS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function lg(t,r){return lg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},lg(t,r)}function BS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Pp(t);if(r){var d=Pp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return GS(this,a)}}function GS(t,r){if(r&&(sg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Pp(t){return Pp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Pp(t)}var fg=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&lg(l,p)})(d,t);var r,a,u=BS(d);function d(){return LS(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getEdge",value:function(){var l=this.props.model,p=l.getEdgeStyle(),y=l.path,m=l.isAnimation,w=l.arrowConfig,T=l.getEdgeAnimationStyle(),M=T.strokeDasharray,C=T.stroke,$=T.strokeDashoffset,ae=T.animationName,ve=T.animationDuration,je=T.animationIterationCount,Re=T.animationTimingFunction,Ye=T.animationDirection;return Object(xe.g)(sf,cg({d:y},p,w,m?{strokeDasharray:M,stroke:C,style:{strokeDashoffset:$,animationName:ae,animationDuration:ve,animationIterationCount:je,animationTimingFunction:Re,animationDirection:Ye}}:{}))}},{key:"getAppendWidth",value:function(){var l=this.props.model.path;return Object(xe.g)(sf,{d:l,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var l=this.props.model,p=this.state.hover,y=l,m=y.path,w=y.isSelected,T=IS(ht(m),2);return{start:T[0],end:T[1],hover:p,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var l=this.props.model.path;return ht(l)}}])&&FS(r.prototype,a),d}(uf);function dg(t){return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},dg(t)}function k0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function US(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function zS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function HS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function pg(t,r){return pg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},pg(t,r)}function XS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Np(t);if(r){var d=Np(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return VS(this,a)}}function VS(t,r){if(r&&(dg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Np(t){return Np=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Np(t)}var WS=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&pg(l,p)})(d,t);var r,a,u=XS(d);function d(){return zS(this,d),u.apply(this,arguments)}return r=d,a=[{key:"getArrowAttributes",value:function(){var l=this.props,p=l.arrowInfo,y=l.style,m=p.start,w=p.end,T={start:m,end:w,offset:y.offset,verticalLength:y.verticalLength,type:"end"},M=Ja(T),C=M.leftX,$=M.leftY,ae=M.rightX,ve=M.rightY;return function(je){for(var Re=1;Re<arguments.length;Re++){var Ye=arguments[Re]!=null?arguments[Re]:{};Re%2?k0(Object(Ye),!0).forEach(function(lt){US(je,lt,Ye[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(Ye)):k0(Object(Ye)).forEach(function(lt){Object.defineProperty(je,lt,Object.getOwnPropertyDescriptor(Ye,lt))})}return je}({d:"M".concat(C," ").concat($," L").concat(w.x," ").concat(w.y," L").concat(ae," ").concat(ve," z")},y)}},{key:"getShape",value:function(){var l=this.getArrowAttributes(),p=l.d,y=l.strokeWidth,m=l.stroke,w=l.fill;return Object(xe.g)(sf,{d:p,fill:w,strokeWidth:y,stroke:m})}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-arrow"},this.getShape())}}],a&&HS(r.prototype,a),d}(xe.a),C0=function(t,r){return Xe(t,r)},YS=function(t){var r=t==null?0:t.length;return r?t[r-1]:void 0},hg=function(){return Kt.a.Date.now()},$S=/\s/,KS=function(t){for(var r=t.length;r--&&$S.test(t.charAt(r)););return r},qS=/^\s+/,ZS=function(t){return t&&t.slice(0,KS(t)+1).replace(qS,"")},JS=/^[-+]0x[0-9a-f]+$/i,QS=/^0b[01]+$/i,eT=/^0o[0-7]+$/i,tT=parseInt,I0=function(t){if(typeof t=="number")return t;if(Or(t))return NaN;if(Cr(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=Cr(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=ZS(t);var a=QS.test(t);return a||eT.test(t)?tT(t.slice(2),a?2:8):JS.test(t)?NaN:+t},rT=Math.max,nT=Math.min,oT=function(t,r,a){var u,d,l,p,y,m,w=0,T=!1,M=!1,C=!0;if(typeof t!="function")throw new TypeError("Expected a function");function $(lt){var Ct=u,wt=d;return u=d=void 0,w=lt,p=t.apply(wt,Ct)}function ae(lt){return w=lt,y=setTimeout(je,r),T?$(lt):p}function ve(lt){var Ct=lt-m;return m===void 0||Ct>=r||Ct<0||M&&lt-w>=l}function je(){var lt=hg();if(ve(lt))return Re(lt);y=setTimeout(je,function(Ct){var wt=r-(Ct-m);return M?nT(wt,l-(Ct-w)):wt}(lt))}function Re(lt){return y=void 0,C&&u?$(lt):(u=d=void 0,p)}function Ye(){var lt=hg(),Ct=ve(lt);if(u=arguments,d=this,m=lt,Ct){if(y===void 0)return ae(m);if(M)return clearTimeout(y),y=setTimeout(je,r),$(m)}return y===void 0&&(y=setTimeout(je,r)),p}return r=I0(r)||0,Cr(a)&&(T=!!a.leading,l=(M="maxWait"in a)?rT(I0(a.maxWait)||0,r):l,C="trailing"in a?!!a.trailing:C),Ye.cancel=function(){y!==void 0&&clearTimeout(y),w=0,u=m=d=y=void 0},Ye.flush=function(){return y===void 0?p:Re(hg())},Ye},iT=n(167);function aT(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function iu(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var L0,F0,B0,uT=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),iu(this,"undos",[]),iu(this,"redos",[]),iu(this,"callbacks",[]),iu(this,"stopWatch",null),iu(this,"curData",null),iu(this,"maxSize",50),iu(this,"waitTime",100),iu(this,"eventCenter",void 0),this.eventCenter=u}var r,a;return r=t,(a=[{key:"add",value:function(u){C0(YS(this.undos),u)||(this.undos.push(u),C0(this.curData,u)||(this.redos=[]),this.eventCenter.emit(ir.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var d=this.undos.pop();return this.curData=nn(d),d}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=nn(u),u}}},{key:"watch",value:function(u){var d=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(iT.a)(u,oT(function(){var l=u.modelToHistoryData();l&&d.add(l)},this.waitTime))}}])&&aT(r.prototype,a),t}();function vg(t){return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vg(t)}function sT(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return G0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return G0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function G0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function U0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function wc(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?U0(Object(a),!0).forEach(function(u){ts(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function z0(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function yg(t,r){return yg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},yg(t,r)}function cT(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=jp(t);if(r){var d=jp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return lT(this,a)}}function lT(t,r){if(r&&(vg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xc(t)}function xc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},jp(t)}function ts(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var H0,X0,V0,gg=yi((B0=F0=function(t){(function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&yg(p,y)})(l,t);var r,a,u,d=cT(l);function l(){var p;return function(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}(this,l),ts(xc(p=d.call(this)),"ref",Object(xe.f)()),ts(xc(p),"__prevText",{type:"",text:"",id:""}),ts(xc(p),"keyupHandler",function(y){var m=p.props.graphModel.textEditElement;y.key==="Enter"&&y.altKey&&m.setElementState(0)}),ts(xc(p),"inputHandler",function(y){var m=y.target.innerText,w=p.props.graphModel.textEditElement;p.__prevText={type:w.type,text:m.replace(/(\r\n)+$|(\n)+$/,""),id:w.id}}),ts(xc(p),"keydownHandler",function(y){y.stopPropagation()}),p.state={style:{left:0,top:0}},p}return r=l,u=[{key:"getDerivedStateFromProps",value:function(p){var y,m=p.graphModel,w=m.transformModel,T=m.theme,M=m.textEditElement;if(M){var C;if((C=M.text)===null||C===void 0||!C.value)if(M.BaseType===xn.EDGE){var $=(M=M).text,ae=M.textPosition,ve=ae.x,je=ae.y;$.x=ve,$.y=je,M.setText($)}else M=M;var Re={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(M.BaseType===xn.EDGE){var Ye=T.edgeText,lt=Ye.overflowMode,Ct=Ye.lineHeight,wt=Ye.wrapPadding,er=Ye.textWidth;er&&lt==="autoWrap"&&(y=wc(wc({},Re),{},{width:er,minWidth:er,lineHeight:Ct,padding:wt}))}else if(M.BaseType===xn.NODE){var Rt=T.nodeText,Tt=Rt.overflowMode,vr=Rt.lineHeight,Fr=Rt.wrapPadding,qr=Rt.textWidth,Vr=M,en=Vr.width,Cn=Vr.modelType;(Cn!==Pr.TEXT_NODE&&Tt==="autoWrap"||Cn===Pr.TEXT_NODE&&qr)&&(y=wc(wc({},Re),{},{width:qr||en,minWidth:qr||en,lineHeight:vr,padding:Fr}))}var Hn=M.text,Bo=Hn.x,Bi=Hn.y,ei=sT(w.CanvasPointToHtmlPoint([Bo,Bi]),2);return{style:wc({left:ei[0],top:ei[1]},y)}}}}],(a=[{key:"componentDidUpdate",value:function(){var p=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var y=this.__prevText,m=y.text,w=y.id;p.updateText(w,m),p.eventCenter.emit(ir.TEXT_UPDATE,wc({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(p){if(window.getSelection!==void 0&&document.createRange!==void 0){var y=document.createRange();y.selectNodeContents(p),y.collapse(!1);var m=window.getSelection();m.removeAllRanges(),m.addRange(y)}}},{key:"render",value:function(){var p,y=this.props.graphModel.textEditElement,m=this.state.style;return y?Object(xe.g)("div",{contentEditable:!0,className:"lf-text-input",style:m,ref:this.ref,key:y.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(p=y.text)===null||p===void 0?void 0:p.value):null}}])&&z0(r.prototype,a),u&&z0(r,u),l}(xe.a),ts(F0,"toolName","textEdit"),L0=B0))||L0,fT=function(t){return t.modelType===Pr.LINE_EDGE?function(r){var a=r.startPoint,u=r.endPoint,d=(a.x+u.x)/2,l=(a.y+u.y)/2,p=Math.abs(a.x-u.x)+10,y=Math.abs(a.y-u.y)+10;return{x:d-p/2,y:l-y/2,x1:d+p/2,y1:l+y/2}}(t):t.modelType===Pr.POLYLINE_EDGE?function(r){var a=r.points,u=Se(a),d=Qa(u,8),l=d.x,p=d.y,y=d.width,m=d.height;return{x:l-y/2,y:p-m/2,x1:l+y/2,y1:p+m/2}}(t):t.modelType===Pr.BEZIER_EDGE?function(r){var a=r.path,u=At(a),d=Qa(u,8),l=d.x,p=d.y,y=d.width,m=d.height;return{x:l-y/2,y:p-m/2,x1:l+y/2,y1:p+m/2}}(t):void 0};function mg(t){return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mg(t)}function W0(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],m=!0,w=!1;try{for(d=d.call(a);!(m=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);m=!0);}catch(T){w=!0,p=T}finally{try{m||d.return==null||d.return()}finally{if(w)throw p}}return y}}(t,r)||Y0(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dT(t){return function(r){if(Array.isArray(r))return bg(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Y0(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y0(t,r){if(t){if(typeof t=="string")return bg(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?bg(t,r):void 0}}function bg(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function pT(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _g(t,r){return _g=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},_g(t,r)}function hT(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Mp(t);if(r){var d=Mp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return vT(this,a)}}function vT(t,r){if(r&&(mg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cf(t)}function cf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mp(t){return Mp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Mp(t)}function lf(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Eg=yi((V0=X0=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&_g(l,p)})(d,t);var r,a,u=hT(d);function d(l){var p;(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,d),lf(cf(p=u.call(this)),"stepDrag",void 0),lf(cf(p),"handleMouseDown",function(T){p.stepDrag.handleMouseDown(T)}),lf(cf(p),"onDragging",function(T){var M=T.deltaX,C=T.deltaY,$=p.props.graphModel,ae=$.getSelectElements(!0);$.moveNodes(ae.nodes.map(function(ve){return ve.id}),M,C)}),lf(cf(p),"handleContextMenu",function(T){T.preventDefault();var M=p.props,C=M.graphModel,$=M.graphModel,ae=$.eventCenter,ve=$.selectElements,je=C.getPointByClient({x:T.clientX,y:T.clientY}),Re={nodes:[],edges:[]};dT(ve.values()).forEach(function(Ye){Ye.BaseType===xn.NODE&&Re.nodes.push(Ye.getData()),Ye.BaseType===xn.EDGE&&Re.edges.push(Ye.getData())}),ae.emit(ir.SELECTION_CONTEXTMENU,{data:Re,e:T,position:je})});var y=l.graphModel,m=y.gridSize,w=y.eventCenter;return p.stepDrag=new Yr({onDragging:p.onDragging,step:m,eventType:"SELECTION",eventCenter:w}),p}return r=d,(a=[{key:"render",value:function(){var l=this.props.graphModel,p=l.selectElements,y=l.transformModel;if(!(p.size<=1)){var m=Number.MAX_SAFE_INTEGER,w=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,M=Number.MIN_SAFE_INTEGER;p.forEach(function(ve){var je={x:0,y:0,x1:0,y1:0};ve.BaseType===xn.NODE&&(je=function(Re){var Ye=Re.x,lt=Re.y,Ct=Re.width,wt=Re.height;return{x:Ye-Ct/2,y:lt-wt/2,x1:Ye+Ct/2,y1:lt+wt/2}}(ve)),ve.BaseType===xn.EDGE&&(je=fT(ve)),m=Math.min(m,je.x),w=Math.min(w,je.y),T=Math.max(T,je.x1),M=Math.max(M,je.y1)});var C=W0(y.CanvasPointToHtmlPoint([m,w]),2);m=C[0],w=C[1];var $=W0(y.CanvasPointToHtmlPoint([T,M]),2);T=$[0],M=$[1];var ae={left:"".concat(m-10,"px"),top:"".concat(w-10,"px"),width:"".concat(T-m+20,"px"),height:"".concat(M-w+20,"px")};return Object(xe.g)("div",{className:"lf-multiple-select",style:ae,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&pT(r.prototype,a),d}(xe.a),lf(X0,"toolName","multipleSelect"),H0=V0))||H0;function yT(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Rp(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var gT=function(){function t(u){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),Rp(this,"tools",void 0),Rp(this,"components",void 0),Rp(this,"toolMap",new Map),Rp(this,"instance",void 0),this.instance=u,this.isDisabledTool(gg.toolName)||this.registerTool(gg.toolName,gg),this.isDisabledTool(Eg.toolName)||this.registerTool(Eg.toolName,Eg);var d=u.graphModel;d.eventCenter.on("".concat(ir.GRAPH_TRANSFORM,",").concat(ir.NODE_CLICK,",").concat(ir.BLANK_CLICK," "),function(){var l=d.textEditElement,p=d.editConfigModel,y=p.edgeTextEdit,m=p.nodeTextEdit;(y||m)&&l&&d.textEditElement.setElementState(zr.DEFAULT)})}var r,a;return r=t,(a=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,d){this.toolMap.set(u,d)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&yT(r.prototype,a),t}(),mT=n(168),bT=n.n(mT);function _T(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Og(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var $0=function(){function t(u){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),Og(this,"mousetrap",void 0),Og(this,"options",void 0),Og(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var d=u.lf;this.target=d.container,this.mousetrap=new bT.a(this.target),u.keyboard.enabled&&this.enable(!0)}var r,a;return r=t,(a=[{key:"initShortcuts",value:function(){var u=this,d=this.options.keyboard.shortcuts;if(d)if(Gn(d))d.forEach(function(m){var w=m.keys,T=m.callback,M=m.action;return u.on(w,T,M)});else{var l=d.keys,p=d.callback,y=d.action;this.on(l,p,y)}}},{key:"on",value:function(u,d,l){this.mousetrap.bind(this.getKeys(u),d,l)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,d){this.mousetrap.unbind(this.getKeys(u),d)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var d=this;return(Array.isArray(u)?u:[u]).map(function(l){return d.formatKey(l)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&_T(r.prototype,a),t}(),ET=$0,ya=null;function K0(t,r){return t.x+=r,t.y+=r,t.text&&(t.text.x+=r,t.text.y+=r),t}function q0(t,r){return t.startPoint&&(t.startPoint.x+=r,t.startPoint.y+=r),t.endPoint&&(t.endPoint.x+=r,t.endPoint.y+=r),t.pointsList&&t.pointsList.length>0&&t.pointsList.forEach(function(a){a.x+=r,a.y+=r}),t.text&&(t.text.x+=r,t.text.y+=r),t}function wg(t){return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wg(t)}function Z0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function ff(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Z0(Object(a),!0).forEach(function(u){kn(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function J0(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function kn(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var xg=function(){function t(d){var l,p,y=this;(function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")})(this,t),kn(this,"container",void 0),kn(this,"width",void 0),kn(this,"height",void 0),kn(this,"graphModel",void 0),kn(this,"history",void 0),kn(this,"viewMap",new Map),kn(this,"tool",void 0),kn(this,"keyboard",void 0),kn(this,"dnd",void 0),kn(this,"options",void 0),kn(this,"snaplineModel",void 0),kn(this,"components",[]),kn(this,"plugins",void 0),kn(this,"extension",{}),kn(this,"adapterIn",void 0),kn(this,"adapterOut",void 0),kn(this,"getView",function(m){return y.viewMap.get(m)}),d=Jm(d),this.options=d,this.container=this.initContainer(d.container),this.plugins=d.plugins,this.graphModel=new Er(ff({},d)),this.tool=new gT(this),this.history=new uT(this.graphModel.eventCenter),this.dnd=new x1({lf:this}),this.keyboard=new ET({lf:this,keyboard:d.keyboard}),d.snapline!==!1&&(this.snaplineModel=new s0(this.graphModel),l=this.graphModel.eventCenter,p=this.snaplineModel,l.on("node:mousemove",function(m){var w=m.data;p.setNodeSnapLine(w)}),l.on("node:mouseup",function(){p.clearSnapline()})),function(m,w){var T=m.keyboard,M=T.options.keyboard;T.on(["cmd + c","ctrl + c"],function(){if(!M.enabled||w.textEditElement)return!0;var C=m.options.guards,$=w.getSelectElements(!1);return C&&C.beforeClone&&!C.beforeClone($)||$.nodes.length===0&&$.edges.length===0?(ya=null,!0):((ya=$).nodes.forEach(function(ae){return K0(ae,40)}),ya.edges.forEach(function(ae){return q0(ae,40)}),!1)}),T.on(["cmd + v","ctrl + v"],function(){if(!M.enabled||w.textEditElement)return!0;if(ya&&(ya.nodes||ya.edges)){m.clearSelectElements();var C=m.addElements(ya);if(!C)return!0;C.nodes.forEach(function($){return m.selectElementById($.id,!0)}),C.edges.forEach(function($){return m.selectElementById($.id,!0)}),ya.nodes.forEach(function($){return K0($,40)}),ya.edges.forEach(function($){return q0($,40)})}return!1}),T.on(["cmd + z","ctrl + z"],function(){return!M.enabled||!!w.textEditElement||(m.undo(),!1)}),T.on(["cmd + y","ctrl + y"],function(){return!M.enabled||!!w.textEditElement||(m.redo(),!1)}),T.on(["backspace"],function(){if(!M.enabled||w.textEditElement)return!0;var C=w.getSelectElements(!0);return m.clearSelectElements(),C.edges.forEach(function($){return m.deleteEdge($.id)}),C.nodes.forEach(function($){return m.deleteNode($.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(d.disabledPlugins)}var r,a,u;return r=t,a=[{key:"register",value:function(d,l){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof d=="string"){var y={BaseEdge:uf,BaseEdgeModel:Vu,BaseNode:da,BaseNodeModel:fa,RectNode:gy,RectNodeModel:Zv,CircleNode:Ey,CircleNodeModel:Rv,PolygonNode:Ty,PolygonNodeModel:Yv,TextNode:Fy,TextNodeModel:ty,LineEdge:rg,LineEdgeModel:$o,DiamondNode:jy,DiamondNodeModel:Lv,PolylineEdge:ug,PolylineEdgeModel:Vn,BezierEdge:fg,BezierEdgeModel:Tv,EllipseNode:Cy,EllipseNodeModel:Uv,HtmlNode:zy,HtmlNodeModel:oy,h:xe.g,type:d};this.viewMap.forEach(function(C){var $=C.extendKey;$&&(y[$]=C)}),this.graphModel.modelMap.forEach(function(C){var $=C.extendKey;$&&(y[$]=C)});var m=l(y),w=m.view,T=m.model,M=w;p&&!M.isObervered&&(M.isObervered=!0,M=Yt(M)),this.setView(d,M),this.graphModel.setModel(d,T)}else this.registerElement(d)}},{key:"registerElement",value:function(d){var l=d.view;d.isObserverView===!1||l.isObervered||(l.isObervered=!0,l=Yt(l)),this.setView(d.type,l),this.graphModel.setModel(d.type,d.model)}},{key:"batchRegister",value:function(){var d=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.forEach(function(p){d.registerElement(p)})}},{key:"defaultRegister",value:function(){this.registerElement({view:gy,model:Zv,type:"rect"}),this.registerElement({type:"circle",view:Ey,model:Rv}),this.registerElement({type:"polygon",view:Ty,model:Yv}),this.registerElement({type:"line",view:rg,model:$o}),this.registerElement({type:"polyline",view:ug,model:Vn}),this.registerElement({type:"bezier",view:fg,model:Tv}),this.registerElement({type:"text",view:Fy,model:ty}),this.registerElement({type:"ellipse",view:Cy,model:Uv}),this.registerElement({type:"diamond",view:jy,model:Lv}),this.registerElement({type:"html",view:zy,model:oy})}},{key:"selectElementById",value:function(d){var l=arguments.length>1&&arguments[1]!==void 0&&arguments[1],p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(d,l),!l&&p&&this.graphModel.toFront(d)}},{key:"focusOn",value:function(d){var l=this.graphModel.transformModel,p=d.coordinate,y=d.id;if(!p){var m=this.getNodeModelById(y);m&&(p=m.getData());var w=this.getEdgeModelById(y);w&&(p=w.textPosition)}var T=p,M=T.x,C=T.y;l.focusOn(M,C,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(d){this.graphModel.setTheme(d)}},{key:"resize",value:function(d,l){this.graphModel.resize(d,l),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(d){this.graphModel.setDefaultEdgeType(d)}},{key:"updateText",value:function(d,l){this.graphModel.updateText(d,l)}},{key:"deleteElement",value:function(d){var l,p,y,m=this.getModelById(d);return!!m&&(p=(y=(kn(l={},xn.NODE,this.deleteNode),kn(l,xn.EDGE,this.deleteEdge),l)[m.BaseType])===null||y===void 0?void 0:y.call(this,d))!==null&&p!==void 0&&p}},{key:"getModelById",value:function(d){return this.graphModel.getElement(d)}},{key:"getDataById",value:function(d){var l;return(l=this.graphModel.getElement(d))===null||l===void 0?void 0:l.getData()}},{key:"changeNodeType",value:function(d,l){this.graphModel.changeNodeType(d,l)}},{key:"changeEdgeType",value:function(d,l){this.graphModel.changeEdgeType(d,l)}},{key:"getNodeEdges",value:function(d){return this.graphModel.getNodeEdges(d)}},{key:"addNode",value:function(d){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir.NODE_ADD;return this.graphModel.addNode(d,l)}},{key:"deleteNode",value:function(d){var l=this.graphModel.getNodeModelById(d);if(!l)return!1;var p=l.getData(),y=this.options.guards,m=!y||!y.beforeDelete||y.beforeDelete(p);return m&&this.graphModel.deleteNode(d),m}},{key:"cloneNode",value:function(d){var l=this.graphModel.getNodeModelById(d).getData(),p=this.options.guards;if(!p||!p.beforeClone||p.beforeClone(l))return this.graphModel.cloneNode(d)}},{key:"changeNodeId",value:function(d,l){return this.graphModel.changeNodeId(d,l)}},{key:"getNodeModelById",value:function(d){return this.graphModel.getNodeModelById(d)}},{key:"getNodeDataById",value:function(d){var l;return(l=this.graphModel.getNodeModelById(d))===null||l===void 0?void 0:l.getData()}},{key:"addEdge",value:function(d){return this.graphModel.addEdge(d)}},{key:"deleteEdge",value:function(d){var l=this.options.guards,p=this.graphModel.edgesMap[d];if(!p)return!1;var y=p.model.getData(),m=!l||!l.beforeDelete||l.beforeDelete(y);return m&&this.graphModel.deleteEdgeById(d),m}},{key:"deleteEdgeByNodeId",value:function(d){var l=d.sourceNodeId,p=d.targetNodeId;l&&p?this.graphModel.deleteEdgeBySourceAndTarget(l,p):l?this.graphModel.deleteEdgeBySource(l):p&&this.graphModel.deleteEdgeByTarget(p)}},{key:"changeEdgeId",value:function(d,l){return this.graphModel.changeEdgeId(d,l)}},{key:"getEdgeModelById",value:function(d){var l;return(l=this.graphModel.edgesMap[d])===null||l===void 0?void 0:l.model}},{key:"getEdgeModels",value:function(d){var l=this.graphModel.edges,p=d.sourceNodeId,y=d.targetNodeId;if(p&&y){var m=[];return l.forEach(function(M){M.sourceNodeId===p&&M.targetNodeId===y&&m.push(M)}),m}if(p){var w=[];return l.forEach(function(M){M.sourceNodeId===p&&w.push(M)}),w}if(y){var T=[];return l.forEach(function(M){M.targetNodeId===y&&T.push(M)}),T}return[]}},{key:"getEdgeDataById",value:function(d){var l;return(l=this.getEdgeModelById(d))===null||l===void 0?void 0:l.getData()}},{key:"getNodeIncomingEdge",value:function(d){return this.graphModel.getNodeIncomingEdge(d)}},{key:"getNodeOutgoingEdge",value:function(d){return this.graphModel.getNodeOutgoingEdge(d)}},{key:"getNodeIncomingNode",value:function(d){return this.graphModel.getNodeIncomingNode(d)}},{key:"getNodeOutgoingNode",value:function(d){return this.graphModel.getNodeOutgoingNode(d)}},{key:"editText",value:function(d){this.graphModel.editText(d)}},{key:"setProperties",value:function(d,l){var p;(p=this.graphModel.getElement(d))===null||p===void 0||p.setProperties(Xn(l))}},{key:"deleteProperty",value:function(d,l){var p;(p=this.graphModel.getElement(d))===null||p===void 0||p.deleteProperty(l)}},{key:"getProperties",value:function(d){var l;return(l=this.graphModel.getElement(d))===null||l===void 0?void 0:l.getProperties()}},{key:"toFront",value:function(d){this.graphModel.toFront(d)}},{key:"setElementZIndex",value:function(d,l){return this.graphModel.setElementZIndex(d,l)}},{key:"addElements",value:function(d){for(var l=this,p=d.nodes,y=d.edges,m={},w={nodes:[],edges:[]},T=0;T<p.length;T++){var M=p[T],C=M.id,$=this.addNode(M);if(!$)return;C&&(m[C]=$.id),w.nodes.push($)}return y.forEach(function(ae){var ve=ae.sourceNodeId,je=ae.targetNodeId;m[ve]&&(ve=m[ve]),m[je]&&(je=m[je]);var Re=l.graphModel.addEdge(ff(ff({},ae),{},{sourceNodeId:ve,targetNodeId:je}));w.edges.push(Re)}),w}},{key:"getAreaElement",value:function(d,l){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],m=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(d,l,p,y,m).map(function(w){return w.getData()})}},{key:"getSelectElements",value:function(){var d=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(d)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var d=this.graphModel.modelToGraphData();return this.adapterOut?this.adapterOut(d):d}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(d){this.graphModel.editConfigModel.updateEditConfig(d)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(d,l){return this.graphModel.getPointByClient({x:d,y:l})}},{key:"undo",value:function(){if(this.history.undoAble()){var d=Xn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(d)}}},{key:"redo",value:function(){if(this.history.redoAble()){var d=Xn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(d)}}},{key:"zoom",value:function(d,l){return this.graphModel.transformModel.zoom(d,l)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(d){this.graphModel.transformModel.setZoomMiniSize(d)}},{key:"setZoomMaxSize",value:function(d){this.graphModel.transformModel.setZoomMaxSize(d)}},{key:"getTransform",value:function(){var d=this.graphModel.transformModel;return{SCALE_X:d.SCALE_X,SCALE_Y:d.SCALE_Y,TRANSLATE_X:d.TRANSLATE_X,TRANSLATE_Y:d.TRANSLATE_Y}}},{key:"translate",value:function(d,l){this.graphModel.transformModel.translate(d,l)}},{key:"resetTranslate",value:function(){var d=this.graphModel.transformModel,l=d.TRANSLATE_X,p=d.TRANSLATE_Y;this.translate(-l,-p)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(d,l){l===void 0&&(l=d),this.graphModel.fitView(d,l)}},{key:"openEdgeAnimation",value:function(d){this.graphModel.openEdgeAnimation(d)}},{key:"closeEdgeAnimation",value:function(d){this.graphModel.closeEdgeAnimation(d)}},{key:"on",value:function(d,l){this.graphModel.eventCenter.on(d,l)}},{key:"off",value:function(d,l){this.graphModel.eventCenter.off(d,l)}},{key:"once",value:function(d,l){this.graphModel.eventCenter.once(d,l)}},{key:"emit",value:function(d,l){this.graphModel.eventCenter.emit(d,l)}},{key:"initContainer",value:function(d){var l=document.createElement("div");return l.style.position="relative",l.style.width="100%",l.style.height="100%",d.innerHTML="",d.appendChild(l),l}},{key:"installPlugins",value:function(){var d,l=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=(d=this.plugins)!==null&&d!==void 0?d:t.extensions;y.forEach(function(m){var w=m.pluginName||m.name;p.indexOf(w)===-1&&l.installPlugin(m)})}},{key:"installPlugin",value:function(d){if(wg(d)==="object"){var l=d.install,p=d.render;return l&&l.call(d,this,t),p&&this.components.push(p.bind(d)),void(this.extension[d.pluginName]=d)}var y=d,m=new y({lf:this,LogicFlow:t,options:this.options.pluginsOptions});m.render&&this.components.push(m.render.bind(m)),this.extension[y.pluginName]=m}},{key:"updateAttributes",value:function(d,l){this.graphModel.updateAttributes(d,l)}},{key:"createFakerNode",value:function(d){var l=this.graphModel.modelMap.get(d.type);if(l){var p=new l(ff(ff({},d),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(p),p}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(d){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(d)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(d,l){this.viewMap.set(d,l)}},{key:"renderRawData",value:function(d){this.graphModel.graphDataToModel(Xn(d)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(xe.j)(Object(xe.g)(O1,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ir.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(d=this.adapterIn(d)),this.renderRawData(d)}}],u=[{key:"use",value:function(d){var l=d.pluginName;l||(l=d.name);var p=this.extensions.get(l);p&&p.destroy&&p.destroy(),this.extensions.set(l,d)}}],a&&J0(r.prototype,a),u&&J0(r,u),t}();function yi(t){return Yt(t)}kn(xg,"extensions",new Map),s.default=xg}])})})(Gg,Gg.exports);var Wt=Gg.exports,HE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),LT=function(e){HE(i,e);function i(o,s){var n=this;return o.id||(o.id="Event_"+Xi()),o.text||(o.text=""),o.text&&typeof o.text=="string"&&(o.text={value:o.text,x:o.x,y:o.y+40}),n=e.call(this,o,s)||this,n}return i.prototype.setAttributes=function(){this.r=18},i.prototype.getConnectedTargetRules=function(){var o=e.prototype.getConnectedTargetRules.call(this),s={message:"",validate:function(){return!1}};return o.push(s),o},i.extendKey="StartEventModel",i}(Wt.CircleNodeModel),FT=function(e){HE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.extendKey="StartEventNode",i}(Wt.CircleNode),XE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),$p=globalThis&&globalThis.__assign||function(){return $p=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},$p.apply(this,arguments)},BT=function(e){XE(i,e);function i(o,s){var n=this;return o.id||(o.id="Event_"+Xi()),o.text||(o.text=""),o.text&&typeof o.text=="string"&&(o.text={value:o.text,x:o.x,y:o.y+40}),n=e.call(this,o,s)||this,n}return i.prototype.setAttributes=function(){this.r=18},i.prototype.getConnectedSourceRules=function(){var o=e.prototype.getConnectedSourceRules.call(this),s={message:"",validate:function(){return!1}};return o.push(s),o},i.extendKey="EndEventModel",i}(Wt.CircleNodeModel),GT=function(e){XE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},i.prototype.getShape=function(){var o=this.props.model,s=o.getNodeStyle(),n=o.x,c=o.y,f=o.r,h=e.prototype.getShape.call(this);return Wt.h("g",{},h,Wt.h("circle",$p($p({},s),{cx:n,cy:c,r:f-5})))},i.extendKey="EndEventView",i}(Wt.CircleNode),VE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Sf=globalThis&&globalThis.__assign||function(){return Sf=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Sf.apply(this,arguments)},UT=function(e){VE(i,e);function i(o,s){var n=this;return o.id||(o.id="Gateway_"+Xi()),o.text||(o.text=""),o.text&&typeof o.text=="string"&&(o.text={value:o.text,x:o.x,y:o.y+40}),n=e.call(this,o,s)||this,n.points=[[25,0],[50,25],[25,50],[0,25]],n}return i.extendKey="ExclusiveGatewayModel",i}(Wt.PolygonNodeModel),zT=function(e){VE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.points,v=o.getNodeStyle();return Wt.h("g",{transform:"matrix(1 0 0 1 "+(s-c/2)+" "+(n-f/2)+")"},Wt.h("polygon",Sf(Sf({},v),{x:s,y:n,points:h})),Wt.h("path",Sf({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},v)))},i.extendKey="ExclusiveGatewayNode",i}(Wt.PolygonNode),WE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Kp=globalThis&&globalThis.__assign||function(){return Kp=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Kp.apply(this,arguments)},HT=function(e){WE(i,e);function i(o,s){var n=this;return o.id||(o.id="Activity_"+Xi()),n=e.call(this,o,s)||this,n}return i.extendKey="UserTaskModel",i}(Wt.RectNodeModel),XT=function(e){WE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getLabelShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.getNodeStyle();return Wt.h("svg",{x:s-c/2+5,y:n-f/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Wt.h("path",{fill:h.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},i.prototype.getShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.radius,v=o.getNodeStyle();return Wt.h("g",{},[Wt.h("rect",Kp(Kp({},v),{x:s-c/2,y:n-f/2,rx:h,ry:h,width:c,height:f})),this.getLabelShape()])},i.extendKey="UserTaskNode",i}(Wt.RectNode),YE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Ug=globalThis&&globalThis.__assign||function(){return Ug=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ug.apply(this,arguments)},VT=function(e){YE(i,e);function i(o,s){var n=this;return o.id||(o.id="Activity_"+Xi()),n=e.call(this,o,s)||this,n}return i.extendKey="ServiceTaskModel",i}(Wt.RectNodeModel),WT=function(e){YE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getLabelShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.getNodeStyle();return Wt.h("svg",{x:s-c/2+5,y:n-f/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Wt.h("path",{fill:h.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},i.prototype.getShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.radius,v=o.getNodeStyle();return Wt.h("g",{},[Wt.h("rect",Ug({x:s-c/2,y:n-f/2,rx:h,ry:h,width:c,height:f},v)),this.getLabelShape()])},i.extendKey="ServiceTaskNode",i}(Wt.RectNode),$E=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),KE=function(e){$E(i,e);function i(o,s){var n=this;return o.id||(o.id="Flow_"+Xi()),n=e.call(this,o,s)||this,n}return i.extendKey="SequenceFlowModel",i}(Wt.PolylineEdgeModel),qE=function(e){$E(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.extendKey="SequenceFlowEdge",i}(Wt.PolylineEdge),r_={width:40,height:40},n_={width:40,height:40},o_={width:40,height:40},i_={width:100,height:80},a_={width:100,height:80},YT=new TT([32,32,1]);function u_(){return YT.next()}function ZE(e){return Object.prototype.toString.call(e)}function $T(e){return"  ".repeat(e)}function qp(e){var i=e;return ZE(e)==="[object Object]"?(i={},Object.keys(e).forEach(function(o){var s=o;o.charAt(0)==="-"&&(s=o.substring(1)),i[s]=qp(e[o])})):Array.isArray(e)&&(i=[],e.forEach(function(o,s){i[s]=qp(o)})),i}function KT(e){var i=e;try{typeof i!="string"&&(i=JSON.parse(e))}catch{i=JSON.stringify(qp(e)).replace(/"/g,"'")}return i}var Tc=`	
`;function zp(e,i,o){var s=$T(o),n="";if(i==="#text")return Tc+s+e;if(i==="#cdata-section")return Tc+s+"<![CDATA["+e+"]]>";if(i==="#comment")return Tc+s+"<!--"+e+"-->";if((""+i).charAt(0)==="-")return" "+i.substring(1)+'="'+KT(e)+'"';if(Array.isArray(e))e.forEach(function(v){n+=zp(v,i,o+1)});else if(ZE(e)==="[object Object]"){var c=Object.keys(e),f="",h="";n+=(o===0?"":Tc+s)+"<"+i,c.forEach(function(v){v.charAt(0)==="-"?f+=zp(e[v],v,o+1):h+=zp(e[v],v,o+1)}),n+=f+(h!==""?">"+h+(Tc+s)+"</"+i+">":" />")}else n+=Tc+s+("<$"+i+">"+e.toString()+"</"+i+">");return n}function qT(e){var i=`<LogicFlow>	
`;for(var o in e)i+=zp(e[o],o,0);return i+`	
</LogicFlow>`}var wo=function(){};wo.ObjTree=function(){return this};wo.ObjTree.VERSION="0.23";wo.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;wo.ObjTree.prototype.attr_prefix="-";wo.ObjTree.prototype.parseXML=function(e){var i;if(window.DOMParser){var o=new DOMParser,s=o.parseFromString(e,"application/xml");if(!s)return;i=s.documentElement}else window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLDOM"),o.async=!1,o.loadXML(e),i=o.documentElement);if(i)return this.parseDOM(i)};wo.ObjTree.prototype.parseHTTP=function(e,i,o){var s={};for(var n in i)s[n]=i[n];if(s.method||(typeof s.postBody>"u"&&typeof s.postbody>"u"&&typeof s.parameters>"u"?s.method="get":s.method="post"),o){s.asynchronous=!0;var c=this,f=o,h=s.onComplete;s.onComplete=function(g){var O;g&&g.responseXML&&g.responseXML.documentElement&&(O=c.parseDOM(g.responseXML.documentElement)),f(O,g),h&&h(g)}}else s.asynchronous=!1;var v;if(typeof HTTP<"u"&&HTTP.Request){s.uri=e;var b=new HTTP.Request(s);b&&(v=b.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var b=new Ajax.Request(e,s);b&&(v=b.transport)}if(o)return v;if(v&&v.responseXML&&v.responseXML.documentElement)return this.parseDOM(v.responseXML.documentElement)};wo.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var i=0;i<this.force_array.length;i++)this.__force_array[this.force_array[i]]=1;var o=this.parseElement(e);if(this.__force_array[e.nodeName]&&(o=[o]),e.nodeType!=11){var s={};s[e.nodeName]=o,o=s}return o.LogicFlow}};wo.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var i=e.nodeValue.match(/[^\x00-\x20]/);return i==null?void 0:e.nodeValue}var o=null,s={};if(e.attributes&&e.attributes.length){o={};for(var n=0;n<e.attributes.length;n++){var c=e.attributes[n].nodeName;if(typeof c=="string"){var f=e.attributes[n].nodeValue;try{f=JSON.parse(e.attributes[n].nodeValue.replace(/'/g,'"'))}catch{f=e.attributes[n].nodeValue}f&&(c=this.attr_prefix+c,typeof s[c]>"u"&&(s[c]=0),s[c]++,this.addNode(o,c,s[c],f))}}}if(e.childNodes&&e.childNodes.length){var h=!0;o&&(h=!1);for(var n=0;n<e.childNodes.length&&h;n++){var v=e.childNodes[n].nodeType;v==3||v==4||v==8||(h=!1)}if(h){o||(o="");for(var n=0;n<e.childNodes.length;n++)o+=e.childNodes[n].nodeValue}else{o||(o={});for(var n=0;n<e.childNodes.length;n++){var c=e.childNodes[n].nodeName;if(typeof c=="string"){var f=this.parseElement(e.childNodes[n]);f&&(typeof s[c]>"u"&&(s[c]=0),s[c]++,this.addNode(o,c,s[c],f))}}}}else o===null&&(o={});return o}};wo.ObjTree.prototype.addNode=function(e,i,o,s){this.__force_array[i]?(o==1&&(e[i]=[]),e[i][e[i].length]=s):o==1?e[i]=s:o==2?e[i]=[e[i],s]:e[i][e[i].length]=s};wo.ObjTree.prototype.writeXML=function(e){var i=this.hash_to_xml(null,e);return this.xmlDecl+i};wo.ObjTree.prototype.hash_to_xml=function(e,i){var o=[],s=[];for(var n in i)if(i.hasOwnProperty(n)){var c=i[n];n.charAt(0)!=this.attr_prefix?typeof c>"u"||c==null?o[o.length]="<"+n+" />":typeof c=="object"&&c.constructor==Array?o[o.length]=this.array_to_xml(n,c):typeof c=="object"?o[o.length]=this.hash_to_xml(n,c):o[o.length]=this.scalar_to_xml(n,c):s[s.length]=" "+n.substring(1)+'="'+this.xml_escape(c)+'"'}var f=s.join(""),h=o.join("");return typeof e>"u"||e==null||(o.length>0?h.match(/\n/)?h="<"+e+f+`>
`+h+"</"+e+`>
`:h="<"+e+f+">"+h+"</"+e+`>
`:h="<"+e+f+` />
`),h};wo.ObjTree.prototype.array_to_xml=function(e,i){for(var o=[],s=0;s<i.length;s++){var n=i[s];typeof n>"u"||n==null?o[o.length]="<"+e+" />":typeof n=="object"&&n.constructor==Array?o[o.length]=this.array_to_xml(e,n):typeof n=="object"?o[o.length]=this.hash_to_xml(e,n):o[o.length]=this.scalar_to_xml(e,n)}return o.join("")};wo.ObjTree.prototype.scalar_to_xml=function(e,i){return e=="#text"?this.xml_escape(i):"<"+e+">"+this.xml_escape(i)+"</"+e+`>
`};wo.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var ZT=function(e){return new wo.ObjTree().parseXML(e)},JT=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),zg=globalThis&&globalThis.__assign||function(){return zg=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},zg.apply(this,arguments)},fh=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},Hi;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(Hi||(Hi={}));var JE=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],s_=["properties","startPoint","endPoint","pointsList"];function c_(e){var i=e?s_.concat(e):s_;return function(o){function s(n){var c={};return typeof n=="string"?n:Array.isArray(n)?n.map(function(f){return s(f)}):(Object.entries(n).forEach(function(f){var h=fh(f,2),v=h[0],b=h[1];typeof b!="object"?v.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(v)?c[v]=b:c["-"+v]=b:i.includes(v)?c["-"+v]=s(b):c[v]=s(b)}),c)}return s(o)}}function Zp(e){var i={};return Object.entries(e).forEach(function(o){var s=fh(o,2),n=s[0],c=s[1];n.indexOf("-")===0?i[n.substring(1)]=qp(c):typeof c=="string"?i[n]=c:Object.prototype.toString.call(c)==="[object Object]"?i[n]=Zp(c):Array.isArray(c)?i[n]=c.map(function(f){return Zp(f)}):i[n]=c}),i}function QT(e,i){var o=new Map;i.nodes.forEach(function(n){var c,f={"-id":n.id};if(!((c=n.text)===null||c===void 0)&&c.value&&(f["-name"]=n.text.value),n.properties){var h=c_()(n.properties);Object.assign(f,h)}o.set(n.id,f),e[n.type]?Array.isArray(e[n.type])?e[n.type].push(f):e[n.type]=[e[n.type],f]:e[n.type]=f});var s=i.edges.map(function(n){var c,f,h=o.get(n.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(n.id):h["bpmn:incoming"]=[h["bpmn:incoming"],n.id]:h["bpmn:incoming"]=n.id;var v={"-id":n.id,"-sourceRef":n.sourceNodeId,"-targetRef":n.targetNodeId};if(!((c=n.text)===null||c===void 0)&&c.value&&(v["-name"]=(f=n.text)===null||f===void 0?void 0:f.value),n.properties){var b=c_()(n.properties);Object.assign(v,b)}return v});i.edges.forEach(function(n){var c=o.get(n.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(n.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],n.id]:c["bpmn:outgoing"]=n.id}),e[Hi.FLOW]=s}function eA(e,i){e["bpmndi:BPMNEdge"]=i.edges.map(function(o){var s,n=o.id,c=o.pointsList.map(function(h){var v=h.x,b=h.y;return{"-x":v,"-y":b}}),f={"-id":n+"_di","-bpmnElement":n,"di:waypoint":c};return!((s=o.text)===null||s===void 0)&&s.value&&(f["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":o.text.x-o.text.value.length*10/2,"-y":o.text.y-7,"-width":o.text.value.length*10,"-height":14}}),f}),e["bpmndi:BPMNShape"]=i.nodes.map(function(o){var s,n=o.id,c=100,f=80,h=o.x,v=o.y,b=fu.shapeConfigMap.get(o.type);b&&(c=b.width,f=b.height),h-=c/2,v-=f/2;var g={"-id":n+"_di","-bpmnElement":n,"dc:Bounds":{"-x":h,"-y":v,"-width":c,"-height":f}};return!((s=o.text)===null||s===void 0)&&s.value&&(g["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":o.text.x-o.text.value.length*10/2,"-y":o.text.y-7,"-width":o.text.value.length*10,"-height":14}}),g})}function tA(e){var i=[],o=[],s=e["bpmn:definitions"];if(s){var n=s["bpmn:process"];Object.keys(n).forEach(function(c){if(c.indexOf("bpmn:")===0){var f=n[c];if(c===Hi.FLOW){var h=s["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=nA(f,h)}else{var v=s["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];i=i.concat(rA(f,v,c))}}})}return{nodes:i,edges:o}}function rA(e,i,o){var s=[];if(Array.isArray(e))e.forEach(function(f){var h;Array.isArray(i)?h=i.find(function(b){return b["-bpmnElement"]===f["-id"]}):h=i;var v=l_(h,o,f);s.push(v)});else{var n=void 0;Array.isArray(i)?n=i.find(function(f){return f["-bpmnElement"]===e["-id"]}):n=i;var c=l_(n,o,e);s.push(c)}return s}function l_(e,i,o){var s=Number(e["dc:Bounds"]["-x"]),n=Number(e["dc:Bounds"]["-y"]),c=o["-name"],f=fu.shapeConfigMap.get(i);f&&(s+=f.width/2,n+=f.height/2);var h;Object.entries(o).forEach(function(O){var x=fh(O,2),S=x[0],N=x[1];JE.indexOf(S)===-1&&(h||(h={}),h[S]=N)}),h&&(h=Zp(h));var v;if(c&&(v={x:s,y:n,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var b=e["bpmndi:BPMNLabel"]["dc:Bounds"];v.x=Number(b["-x"])+Number(b["-width"])/2,v.y=Number(b["-y"])+Number(b["-height"])/2}var g={id:e["-bpmnElement"],type:i,x:s,y:n,properties:h};return v&&(g.text=v),g}function nA(e,i){var o=[];if(Array.isArray(e))e.forEach(function(n){var c;Array.isArray(i)?c=i.find(function(f){return f["-bpmnElement"]===n["-id"]}):c=i,o.push(f_(c,n))});else{var s=void 0;Array.isArray(i)?s=i.find(function(n){return n["-bpmnElement"]===e["-id"]}):s=i,o.push(f_(s,e))}return o}function f_(e,i){var o,s=i["-name"];if(s){var n=e["bpmndi:BPMNLabel"]["dc:Bounds"],c=0;s.split(`
`).forEach(function(v){c<v.length&&(c=v.length)}),o={value:s,x:Number(n["-x"])+c*10/2,y:Number(n["-y"])+7}}var f;Object.entries(i).forEach(function(v){var b=fh(v,2),g=b[0],O=b[1];JE.indexOf(g)===-1&&(f||(f={}),f[g]=O)}),f&&(f=Zp(f));var h={id:i["-id"],type:Hi.FLOW,pointsList:e["di:waypoint"].map(function(v){return{x:Number(v["-x"]),y:Number(v["-y"])}}),sourceNodeId:i["-sourceRef"],targetNodeId:i["-targetRef"],properties:f};return o&&(h.text=o),h}var fu=function(){function e(i){var o=this,s=i.lf;this.adapterOut=function(n){var c=zg({},o.processAttributes);QT(c,n);var f={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};eA(f,n);var h=o.definitionAttributes;h["bpmn:process"]=c,h["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":f};var v={"bpmn:definitions":h};return v},this.adapterIn=function(n){if(n)return tA(n)},s.adapterIn=function(n){return o.adapterIn(n)},s.adapterOut=function(n){return o.adapterOut(n)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+u_()},this.definitionAttributes={"-id":"Definitions_"+u_(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(i,o){e.shapeConfigMap.set(i,o)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();fu.shapeConfigMap.set(Hi.START,{width:r_.width,height:r_.height});fu.shapeConfigMap.set(Hi.END,{width:n_.width,height:n_.height});fu.shapeConfigMap.set(Hi.GATEWAY,{width:o_.width,height:o_.height});fu.shapeConfigMap.set(Hi.SYSTEM,{width:i_.width,height:i_.height});fu.shapeConfigMap.set(Hi.USER,{width:a_.width,height:a_.height});(function(e){JT(i,e);function i(o){var s=e.call(this,o)||this;s.adapterXmlIn=function(c){var f=ZT(c);return s.adapterIn(f)},s.adapterXmlOut=function(c){var f=s.adapterOut(c);return qT(f)};var n=o.lf;return n.adapterIn=s.adapterXmlIn,n.adapterOut=s.adapterXmlOut,s}return i.pluginName="bpmnXmlAdapter",i})(fu);var d_=globalThis&&globalThis.__assign||function(){return d_=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},d_.apply(this,arguments)};globalThis&&globalThis.__read;var Gc;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Gc||(Gc={}));var oA=function(e,i,o,s){s===void 0&&(s=0);var n=aA(e,i,o);return n<=s};function p_(e){return e*e}function Sg(e,i){return p_(e.x-i.x)+p_(e.y-i.y)}var iA=function(e,i,o){var s=Sg(i,o);if(s===0)return Sg(e,i);var n=((e.x-i.x)*(o.x-i.x)+(e.y-i.y)*(o.y-i.y))/s;return n=Math.max(0,Math.min(1,n)),Sg(e,{x:i.x+n*(o.x-i.x),y:i.y+n*(o.y-i.y)})},aA=function(e,i,o){return Math.sqrt(iA(e,i,o))},uA=function(e){var i=e.x,o=e.y,s=e.width,n=e.height,c={minX:i-s/2,minY:o-n/2,maxX:i+s/2,maxY:o+n/2,x:i,y:o,width:s,height:n,centerX:i,centerY:o};return c},sA=function(e,i){var o;return e.x===i.x?o=Gc.VERTICAL:e.y===i.y&&(o=Gc.HORIZONTAL),o},cA=function(e,i,o){var s=uA(e),n=sA(i,o),c=Math.max(i.x,o.x),f=Math.min(i.x,o.x),h=Math.max(i.y,o.y),v=Math.min(i.y,o.y),b=e.x,g=e.y,O=e.width,x=e.height;if(n===Gc.HORIZONTAL){if(c>=s.maxX&&f<=s.minX)return{startCrossPoint:{x:i.x>o.x?b+O/2:b-O/2,y:i.y},endCrossPoint:{x:i.x>o.x?b-O/2:b+O/2,y:i.y}}}else if(n===Gc.VERTICAL&&h>=s.maxY&&v<=s.minY)return{startCrossPoint:{x:i.x,y:i.y>o.y?g+x/2:g-x/2},endCrossPoint:{x:i.x,y:i.y>o.y?g-x/2:g+x/2}}},lA=function(e,i,o){o===void 0&&(o=0);for(var s=e.x,n=e.y,c=i.pointsList,f=0;f<c.length-1;f++)if(oA({x:s,y:n},c[f],c[f+1],o)){var h=cA(e,c[f],c[f+1]);if(h)return{crossIndex:f+1,crossPoints:h}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},fA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},h_=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(fA(arguments[i]));return e},dA=function(){function e(i){var o=i.lf;this._lf=o,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return e.prototype.eventHandler=function(){var i=this;this.dndAdd&&this._lf.on("node:dnd-add",function(o){var s=o.data;i.insetNode(s)}),this.dropAdd&&this._lf.on("node:drop",function(o){for(var s=o.data,n=i._lf.graphModel.edges,c=s.id,f=!0,h=0;h<n.length;h++)if(n[h].sourceNodeId===c||n[h].targetNodeId===c){f=!1;break}f&&i.insetNode(s)})},e.prototype.checkRuleBeforeInsetNode=function(i,o,s,n,c){var f=this._lf.getNodeModelById(i),h=this._lf.getNodeModelById(o),v=f.getAnchorInfo(s),b=h.getAnchorInfo(n),g=f.isAllowConnectedAsSource(c,v,b),O=h.isAllowConnectedAsTarget(c,v,b),x=Wt.formateAnchorConnectValidateData(g),S=x.isAllPass,N=x.msg,j=Wt.formateAnchorConnectValidateData(O),R=j.isAllPass,D=j.msg;return{isPass:S&&R,sourceMsg:N,targetMsg:D}},e.prototype.insetNode=function(i){for(var o=this._lf.graphModel.edges,s=this._lf.getNodeModelById(i.id),n=0;n<o.length;n++){var c=lA(s,o[n],this.deviation),f=c.crossIndex,h=c.crossPoints;if(f>=0){var v=o[n],b=v.sourceNodeId,g=v.targetNodeId,O=v.id,x=v.type,S=v.pointsList,N=v.sourceAnchorId,j=v.targetAnchorId,R=this.checkRuleBeforeInsetNode(b,g,N,j,i);if(R.isPass){var D=Lp(S[0]),z=Lp(h.startCrossPoint);this._lf.addEdge({type:x,sourceNodeId:b,targetNodeId:i.id,startPoint:D,endPoint:z,pointsList:h_(S.slice(0,f),[h.startCrossPoint])}),this._lf.addEdge({type:x,sourceNodeId:i.id,targetNodeId:g,startPoint:Lp(h.endCrossPoint),endPoint:Lp(S[S.length-1]),pointsList:h_([h.endCrossPoint],S.slice(f))}),this._lf.deleteEdge(O);break}else{this._lf.graphModel.eventCenter.emit(Wt.EventType.CONNECTION_NOT_ALLOWED,{data:i,msg:R.targetMsg||R.sourceMsg});break}}}},e.pluginName="insertNodeInPolyline",e}(),pA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},hA=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(pA(arguments[i]));return e},vA=function(){function e(i){var o=this,s=i.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"",text:"",onClick:function(){o.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"",text:"",onClick:function(){o.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"",text:"",onClick:function(){o.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"",text:"",onClick:function(){o.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"",text:"",onClick:function(){o.lf.redo()}}],this.lf=s}return e.prototype.render=function(i,o){this.destroy();var s=this.getControlTool();this.toolEl=s,o.appendChild(s),this.domContainer=o},e.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},e.prototype.addItem=function(i){this.controlItems.push(i)},e.prototype.removeItem=function(i){var o=this.controlItems.findIndex(function(s){return s.key===i});return this.controlItems.splice(o,1)[0]},e.prototype.getControlTool=function(){var i=this,o="lf-control-item",s="lf-control-item disabled",n=document.createElement("div"),c=[];return n.className="lf-control",this.controlItems.forEach(function(f){var h=document.createElement("div"),v=document.createElement("i"),b=document.createElement("span");switch(h.className=s,f.onClick&&(h.onclick=f.onClick.bind(null,i.lf)),f.onMouseEnter&&(h.onmouseenter=f.onMouseEnter.bind(null,i.lf)),f.onMouseLeave&&(h.onmouseleave=f.onMouseLeave.bind(null,i.lf)),v.className=f.iconClass,b.className="lf-control-text",b.title=f.title,b.innerText=f.text,h.append(v,b),f.text){case"":i.lf.on("history:change",function(g){var O=g.data.undoAble;h.className=O?o:s});break;case"":i.lf.on("history:change",function(g){var O=g.data.redoAble;h.className=O?o:s});break;default:h.className=o;break}c.push(h)}),n.append.apply(n,hA(c)),n},e.pluginName="control",e}(),yA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},gA=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(yA(arguments[i]));return e},df="lf:defaultNodeMenu",pf="lf:defaultEdgeMenu",hf="lf:defaultGraphMenu",v_="lf:defaultSelectionMenu",mA=function(){function e(i){var o=this,s=i.lf;this.__menuDOM=document.createElement("ul"),this.lf=s,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(n){o.setMenuConfig(n)},this.lf.addMenuConfig=function(n){o.addMenuConfig(n)},this.lf.setMenuByType=function(n){o.setMenuByType(n)}}return e.prototype.init=function(){var i=this,o=[{text:"",callback:function(c){i.lf.deleteNode(c.id)}},{text:"",callback:function(c){i.lf.graphModel.editText(c.id)}},{text:"",callback:function(c){i.lf.cloneNode(c.id)}}];this.menuTypeMap.set(df,o);var s=[{text:"",callback:function(c){i.lf.deleteEdge(c.id)}},{text:"",callback:function(c){i.lf.graphModel.editText(c.id)}}];this.menuTypeMap.set(pf,s),this.menuTypeMap.set(hf,[]);var n=[{text:"",callback:function(c){i.lf.clearSelectElements(),c.edges.forEach(function(f){return i.lf.deleteEdge(f.id)}),c.nodes.forEach(function(f){return i.lf.deleteNode(f.id)})}}];this.menuTypeMap.set(v_,n)},e.prototype.render=function(i,o){var s=this;this.__container=o,this.__currentData=null,this.__menuDOM.className="lf-menu",o.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(n){n.stopPropagation();for(var c=n.target;Array.from(c.classList).indexOf("lf-menu-item")===-1&&Array.from(c.classList).indexOf("lf-menu")===-1;)c=c.parentElement;Array.from(c.classList).indexOf("lf-menu-item")>-1?(c.onclickCallback(s.__currentData),s.__menuDOM.style.display="none",s.__currentData=null):console.warn("")},!0),this.lf.on("node:contextmenu",function(n){var c=n.data,f=n.position,h=f.domOverlayPosition,v=h.x,b=h.y,g=c.id,O=s.lf.graphModel.getNodeModelById(g),x=[],S=s.menuTypeMap.get(O.type);O&&O.menu&&Array.isArray(O.menu)?x=O.menu:S?x=S:x=s.menuTypeMap.get(df),s.__currentData=c,s.showMenu(v,b,x)}),this.lf.on("edge:contextmenu",function(n){var c=n.data,f=n.position,h=f.domOverlayPosition,v=h.x,b=h.y,g=c.id,O=s.lf.graphModel.getEdgeModelById(g),x=[],S=s.menuTypeMap.get(O.type);O&&O.menu&&Array.isArray(O.menu)?x=O.menu:S?x=S:x=s.menuTypeMap.get(pf),s.__currentData=c,s.showMenu(v,b,x)}),this.lf.on("blank:contextmenu",function(n){var c=n.position,f=s.menuTypeMap.get(hf),h=c.domOverlayPosition,v=h.x,b=h.y;s.showMenu(v,b,f)}),this.lf.on("selection:contextmenu",function(n){var c=n.data,f=n.position,h=s.menuTypeMap.get(v_),v=f.domOverlayPosition,b=v.x,g=v.y;s.__currentData=c,s.showMenu(b,g,h)}),this.lf.on("node:mousedown",function(){s.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){s.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){s.__menuDOM.style.display="none"})},e.prototype.destroy=function(){var i;(i=this===null||this===void 0?void 0:this.__container)===null||i===void 0||i.removeChild(this.__menuDOM),this.__menuDOM=null},e.prototype.showMenu=function(i,o,s){if(!(!s||!s.length)){var n=this.__menuDOM;n.innerHTML="",n.append.apply(n,gA(this.__getMenuDom(s))),n.children.length&&(n.style.display="block",n.style.top=o+"px",n.style.left=i+"px")}},e.prototype.setMenuByType=function(i){!i.type||!i.menu||this.menuTypeMap.set(i.type,i.menu)},e.prototype.__getMenuDom=function(i){var o=[];return i&&i.length>0&&i.forEach(function(s){var n=document.createElement("li");if(s.className?n.className="lf-menu-item "+s.className:n.className="lf-menu-item",s.icon===!0){var c=document.createElement("span");c.className="lf-menu-item-icon",n.appendChild(c)}var f=document.createElement("span");f.className="lf-menu-item-text",s.text&&(f.innerText=s.text),n.appendChild(f),n.onclickCallback=s.callback,o.push(n)}),o},e.prototype.setMenuConfig=function(i){i&&(i.nodeMenu!==void 0&&this.menuTypeMap.set(df,i.nodeMenu?i.nodeMenu:[]),i.edgeMenu!==void 0&&this.menuTypeMap.set(pf,i.edgeMenu?i.edgeMenu:[]),i.graphMenu!==void 0&&this.menuTypeMap.set(hf,i.graphMenu?i.graphMenu:[]))},e.prototype.addMenuConfig=function(i){if(i){if(Array.isArray(i.nodeMenu)){var o=this.menuTypeMap.get(df);this.menuTypeMap.set(df,o.concat(i.nodeMenu))}if(Array.isArray(i.edgeMenu)){var o=this.menuTypeMap.get(pf);this.menuTypeMap.set(pf,o.concat(i.edgeMenu))}if(Array.isArray(i.graphMenu)){var o=this.menuTypeMap.get(hf);this.menuTypeMap.set(hf,o.concat(i.graphMenu))}}},e.prototype.changeMenuItem=function(i,o){if(i==="add")this.addMenuConfig(o);else if(i==="reset")this.setMenuConfig(o);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},e.pluginName="menu",e}();globalThis&&globalThis.__read;var bA=function(){function e(i){var o=this,s=i.lf;this.lf=s,this.lf.setPatternItems=function(n){o.setPatternItems(n)}}return e.prototype.render=function(i,o){var s=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=o;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(n){s.panelEl.appendChild(s.createDndItem(n))}),o.appendChild(this.panelEl),this.domContainer=o},e.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},e.prototype.setPatternItems=function(i){this.shapeList=i,this.domContainer&&this.render(this.lf,this.domContainer)},e.prototype.createDndItem=function(i){var o=this,s=document.createElement("div");s.className=i.className?"lf-dnd-item "+i.className:"lf-dnd-item";var n=document.createElement("div");if(n.className="lf-dnd-shape",i.icon&&(n.style.backgroundImage="url("+i.icon+")"),s.appendChild(n),i.label){var c=document.createElement("div");c.innerText=i.label,c.className="lf-dnd-text",s.appendChild(c)}return s.onmousedown=function(){i.type&&o.lf.dnd.startDrag({type:i.type,properties:i.properties,text:i.text}),i.callback&&i.callback(o.lf,o.domContainer)},s.ondblclick=function(f){o.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:f,data:i})},s.onclick=function(f){o.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:f,data:i})},s.oncontextmenu=function(f){o.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:f,data:i})},s},e.pluginName="dndPanel",e}(),_A=function(){function e(i){var o=this,s=i.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(c){var f=o.lf.getPointByClient(c.clientX,c.clientY).domOverlayPosition,h=f.x,v=f.y;o.endPoint={x:h,y:v};var b=o.startPoint,g=b.x,O=b.y,x=o.wrapper.style,S=g,N=O,j=h-g,R=v-O;h<g&&(S=h,j=g-h),v<O&&(N=v,R=O-v),x.left=S+"px",x.top=N+"px",x.width=j+"px",x.height=R+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",o.__draw),document.removeEventListener("mouseup",o.__drawOff),o.wrapper.oncontextmenu=null,o.__domContainer.removeChild(o.wrapper);var c=o.startPoint,f=c.x,h=c.y,v=o.endPoint,b=v.x,g=v.y;if(!(Math.abs(b-f)<10&&Math.abs(g-h)<10)){var O=[Math.min(f,b),Math.min(h,g)],x=[Math.max(f,b),Math.max(h,g)],S=o.lf.graphModel.getAreaElement(O,x,o.isWholeEdge,o.isWholeNode,!0),N=o.lf.graphModel.group;S.forEach(function(j){(!N||!N.getNodeGroup(j.id))&&o.lf.selectElementById(j.id,!0)}),o.lf.emit("selection:selected",S)}},this.lf=s;var n=s.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=n,s.openSelectionSelect=function(){o.openSelectionSelect()},s.closeSelectionSelect=function(){o.closeSelectionSelect()}}return e.prototype.render=function(i,o){var s=this;this.__domContainer=o,i.on("blank:mousedown",function(n){var c=n.e,f=i.getEditConfig();if(!(!f.stopMoveGraph||s.__disabled)){var h=c.button===2;if(!h){var v=i.getPointByClient(c.clientX,c.clientY).domOverlayPosition,b=v.x,g=v.y;s.startPoint={x:b,y:g},s.endPoint={x:b,y:g};var O=document.createElement("div");O.className="lf-selection-select",O.oncontextmenu=function(S){S.preventDefault()},O.style.top=s.startPoint.y+"px",O.style.left=s.startPoint.x+"px",o.appendChild(O),s.wrapper=O,document.addEventListener("mousemove",s.__draw),document.addEventListener("mouseup",s.__drawOff)}}})},e.prototype.setSelectionSense=function(i,o){i===void 0&&(i=!0),o===void 0&&(o=!0),this.isWholeEdge=i,this.isWholeNode=o},e.prototype.openSelectionSelect=function(){var i=this.lf.getEditConfig().stopMoveGraph;i||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},e.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},e.prototype.open=function(){this.__disabled=!1},e.prototype.close=function(){this.__disabled=!0},e.pluginName="selectionSelect",e}(),EA=globalThis&&globalThis.__values||function(e){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&e[i],s=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},OA=function(){function e(i){var o=this,s=i.lf,n=i.LogicFlow,c=i.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(f,h){o.setView(),o.isShow||o.createMiniMap(f,h),o.isShow=!0},this.hide=function(){o.isShow&&o.removeMiniMap(),o.isShow=!1},this.reset=function(){o.lf.resetTranslate(),o.lf.resetZoom(),o.hide(),o.show()},this.startDrag=function(f){document.addEventListener("mousemove",o.drag),document.addEventListener("mouseup",o.drop),o.startPosition={x:f.x,y:f.y}},this.moveViewport=function(f,h){var v=o.viewport.style;o.viewPortTop=f,o.viewPortLeft=h,v.top=o.viewPortTop+"px",v.left=o.viewPortLeft+"px"},this.drag=function(f){o.dragging=!0;var h=o.viewPortTop+f.y-o.startPosition.y,v=o.viewPortLeft+f.x-o.startPosition.x;o.moveViewport(h,v),o.startPosition={x:f.x,y:f.y};var b=(o.viewPortLeft+o.viewPortWidth/2)/o.viewPortScale,g=(o.viewPortTop+o.viewPortHeight/2)/o.viewPortScale;o.lf.focusOn({coordinate:{x:b+o.resetDataX,y:g+o.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",o.drag),document.removeEventListener("mouseup",o.drop);var f=o.viewPortTop,h=o.viewPortLeft;o.viewPortLeft>o.width&&(h=o.width-o.viewPortWidth),o.viewPortTop>o.height&&(f=o.height-o.viewPortHeight),o.viewPortLeft<-o.width&&(h=0),o.viewPortTop<-o.height&&(f=0),o.moveViewport(f,h)},this.mapClick=function(f){if(o.dragging)o.dragging=!1;else{var h=f.layerX,v=f.layerY,b=h,g=v,O=o.lf.getGraphRawData(),x=o.getBounds(O),S=x.left,N=x.top,j=S+b/o.viewPortScale,R=N+g/o.viewPortScale;o.lf.focusOn({coordinate:{x:j,y:R}})}},this.lf=s,c&&c.MiniMap&&this.setOption(c),this.miniMapWidth=s.graphModel.width,this.miniMapHeight=s.graphModel.width*this.height/this.width,this.LogicFlow=n,this.initMiniMap()}return e.prototype.render=function(i,o){var s=this;this.container=o,this.lf.on("history:change",function(){s.isShow&&s.setView()}),this.lf.on("graph:transform",CT(function(){s.isShow&&!s.dragging&&s.setView()},300))},e.prototype.init=function(i){this.disabledPlugins=this.disabledPlugins.concat(i.disabledPlugins||[])},e.prototype.setOption=function(i){var o=i.MiniMap,s=o.width,n=s===void 0?150:s,c=o.height,f=c===void 0?220:c,h=o.isShowHeader,v=h===void 0?!0:h,b=o.isShowCloseIcon,g=b===void 0?!0:b,O=o.leftPosition,x=O===void 0?0:O,S=o.topPosition,N=S===void 0?0:S,j=o.rightPosition,R=o.bottomPosition;this.width=n,this.height=f,this.isShowHeader=v,this.isShowCloseIcon=g,this.viewPortWidth=n,this.leftPosition=x,this.topPosition=N,this.rightPosition=j,this.bottomPosition=R},e.prototype.initMiniMap=function(){var i=document.createElement("div");i.className="lf-mini-map-graph",i.style.width=this.width+4+"px",i.style.height=this.height+"px",this.lfMap=new this.LogicFlow({width:this.lf.graphModel.width,height:this.lf.graphModel.width*this.height/this.width,container:i,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(o){return o},this.lfMap.adapterOut=function(o){return o},this.miniMapWrap=i,this.createViewPort(),i.addEventListener("click",this.mapClick)},e.prototype.createMiniMap=function(i,o){var s=document.createElement("div");s.appendChild(this.miniMapWrap),typeof i<"u"||typeof o<"u"?(s.style.left=(i||0)+"px",s.style.top=(o||0)+"px"):(typeof this.rightPosition<"u"?s.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(s.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?s.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(s.style.top=this.topPosition+"px")),s.style.position="absolute",s.className="lf-mini-map",this.isShowCloseIcon||s.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||s.classList.add("lf-mini-map-no-header"),this.container.appendChild(s),this.miniMapWrap.appendChild(this.viewport);var n=document.createElement("div");n.className="lf-mini-map-header",n.innerText=e.headerTitle,s.appendChild(n);var c=document.createElement("span");c.className="lf-mini-map-close",c.addEventListener("click",this.hide),s.appendChild(c),this.miniMapContainer=s},e.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},e.prototype.getBounds=function(i){var o=0,s=this.miniMapWidth,n=0,c=this.miniMapHeight,f=i.nodes;return f&&f.length>0&&f.forEach(function(h){var v=h.x,b=h.y,g=h.width,O=g===void 0?200:g,x=h.height,S=x===void 0?200:x,N=v-O/2,j=v+O/2,R=b-S/2,D=b+S/2;o=N<o?N:o,s=j>s?j:s,n=R<n?R:n,c=D>c?D:c}),{left:o,top:n,bottom:c,right:s}},e.prototype.resetData=function(i){var o=i.nodes,s=i.edges,n=0,c=0;return o&&o.length>0&&(o.forEach(function(f){var h=f.x,v=f.y,b=f.width,g=b===void 0?200:b,O=f.height,x=O===void 0?200:O,S=h-g/2,N=v-x/2;n=S<n?S:n,c=N<c?N:c}),(n<0||c<0)&&(this.resetDataX=n,this.resetDataY=c,o.forEach(function(f){f.x=f.x-n,f.y=f.y-c,f.text&&(f.text.x=f.text.x-n,f.text.y=f.text.y-c)}),s.forEach(function(f){f.startPoint&&(f.startPoint.x=f.startPoint.x-n,f.startPoint.y=f.startPoint.y-c),f.endPoint&&(f.endPoint.x=f.endPoint.x-n,f.endPoint.y=f.endPoint.y-c),f.text&&(f.text.x=f.text.x-n,f.text.y=f.text.y-c),f.pointsList&&f.pointsList.forEach(function(h){h.x=h.x-n,h.y=h.y-c})}))),i},e.prototype.setView=function(){var i,o,s=this.lf.getGraphRawData(),n=this.resetData(s),c=this.lf.viewMap,f=this.lf.graphModel.modelMap,h=this.lfMap.viewMap;try{for(var v=EA(c.keys()),b=v.next();!b.done;b=v.next()){var g=b.value;h.has(g)||(this.lfMap.setView(g,c.get(g)),this.lfMap.graphModel.modelMap.set(g,f.get(g)))}}catch(fe){i={error:fe}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}this.lfMap.render(n);var O=this.getBounds(n),x=O.left,S=O.top,N=O.right,j=O.bottom,R=this.width/(N-x),D=this.height/(j-S),z=this.miniMapWrap.firstChild.style,Z=Math.min(R,D);z.transform="matrix("+Z+", 0, 0, "+Z+", 0, 0)",z.transformOrigin="left top",z.height=j-Math.min(S,0)+"px",z.width=N-Math.min(x,0)+"px",this.viewPortScale=Z,this.setViewPort(Z,{left:x,top:S,right:N,bottom:j})},e.prototype.setViewPort=function(i,o){var s=o.left,n=o.right;o.top,o.bottom;var c=this.viewport.style;c.width=this.viewPortWidth+"px",c.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var f=this.lf.getTransform(),h=f.TRANSLATE_X,v=f.TRANSLATE_Y,b=f.SCALE_X,g=f.SCALE_Y,O=n-s,x=this.width/(O/this.lf.graphModel.width),S=this.width*(x/this.width),N=this.lf.graphModel.width/this.lf.graphModel.height,j=S/N,R=this.lf.getGraphRawData(),D=this.getBounds(R),z=D.left,Z=D.top,fe=z,se=Z;fe+=h/b,se+=v/g,this.viewPortTop=se>0?0:-se*i,this.viewPortLeft=fe>0?0:-fe*i,this.viewPortWidth=S,this.viewPortHeight=j,c.top=this.viewPortTop+"px",c.left=this.viewPortLeft+"px",c.width=S/b+"px",c.height=j/g+"px"},e.prototype.createViewPort=function(){var i=document.createElement("div");i.className="lf-minimap-viewport",i.addEventListener("mousedown",this.startDrag),this.viewport=i},e.pluginName="miniMap",e.width=150,e.height=220,e.viewPortWidth=150,e.viewPortHeight=75,e.isShowHeader=!0,e.isShowCloseIcon=!0,e.leftPosition=0,e.topPosition=0,e.rightPosition=null,e.bottomPosition=null,e.headerTitle="",e}();function wA(e){if(e.length<=1)return!1;for(var i=0,o=e.length-1;i!==o&&i+1!==o&&o-1!==i;)i++,o--;return i===o?[--i,o]:[i,o]}var QE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Dc=globalThis&&globalThis.__assign||function(){return Dc=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Dc.apply(this,arguments)},ga=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c};(function(e){QE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.pointFilter=function(o){for(var s=o,n=1;n<s.length-1;){var c=ga(s[n-1],2),f=c[0],h=c[1],v=ga(s[n],2),b=v[0],g=v[1],O=ga(s[n+1],2),x=O[0],S=O[1];f===b&&b===x||h===g&&g===S?s.splice(n,1):n++}return s},i.prototype.getEdge=function(){var o=this.props.model,s=o.points,n=o.isAnimation,c=o.arrowConfig,f=o.radius,h=f===void 0?5:f,v=o.getEdgeStyle(),b=o.getEdgeAnimationStyle(),g=this.pointFilter(s.split(" ").map(function(bt){return bt.split(",").map(function(xt){return Number(xt)})})),O=wA(g);if(O){var x=ga(O,2),S=x[0],N=x[1],j=g[S],R=g[N],D=j.some(function(bt,xt){return bt===R[xt]});if(!D){var z=(R[1]-j[1])/2,Z=[R[0],R[1]-z],fe=[j[0],j[1]+z];g.splice(S+1,0,fe,Z)}}for(var se=ga(g[0],2),oe=se[0],pe=se[1],K="M"+oe+" "+pe,U=1;U<g.length-1;U++){var Y=ga(g[U-1],2),W=Y[0],L=Y[1],he=ga(g[U],2),Ce=he[0],ee=he[1],ce=ga(g[U+1],2),ye=ce[0],_e=ce[1];if(Ce===W&&ee!==L){var ie=ee>L?ee-h:ee+h;K=K+" L "+Ce+" "+ie}if(ee===L&&Ce!==W){var ge=Ce>W?Ce-h:Ce+h;K=K+" L "+ge+" "+ee}if(K=K+" Q "+Ce+" "+ee,Ce===ye&&ee!==_e){var ie=ee>_e?ee-h:ee+h;K=K+" "+Ce+" "+ie}if(ee===_e&&Ce!==ye){var ge=Ce>ye?Ce-h:Ce+h;K=K+" "+ge+" "+ee}}var Be=ga(g[g.length-1],2),Qe=Be[0],mt=Be[1];K=K+" L "+Qe+" "+mt;var Bt=Dc(Dc(Dc({d:K,style:n?b:{}},v),c),{fill:"none"});return Wt.h("path",Dc({d:K},Bt))},i})(Wt.PolylineEdge);(function(e){QE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i})(Wt.PolylineEdgeModel);var um,Bn,eO,is,y_,tO,Hg,rO={},nO=[],xA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function cu(e,i){for(var o in i)e[o]=i[o];return e}function oO(e){var i=e.parentNode;i&&i.removeChild(e)}function Tf(e,i,o){var s,n,c,f={};for(c in i)c=="key"?s=i[c]:c=="ref"?n=i[c]:f[c]=i[c];if(arguments.length>2&&(f.children=arguments.length>3?um.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(c in e.defaultProps)f[c]===void 0&&(f[c]=e.defaultProps[c]);return Hp(e,f,s,n,null)}function Hp(e,i,o,s,n){var c={type:e,props:i,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++eO};return n==null&&Bn.vnode!=null&&Bn.vnode(c),c}function sm(e){return e.children}function Cc(e,i){this.props=e,this.context=i}function Pf(e,i){if(i==null)return e.__?Pf(e.__,e.__.__k.indexOf(e)+1):null;for(var o;i<e.__k.length;i++)if((o=e.__k[i])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Pf(e):null}function iO(e){var i,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,i=0;i<e.__k.length;i++)if((o=e.__k[i])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return iO(e)}}function g_(e){(!e.__d&&(e.__d=!0)&&is.push(e)&&!Jp.__r++||y_!==Bn.debounceRendering)&&((y_=Bn.debounceRendering)||tO)(Jp)}function Jp(){var e,i,o,s,n,c,f,h;for(is.sort(Hg);e=is.shift();)e.__d&&(i=is.length,s=void 0,n=void 0,f=(c=(o=e).__v).__e,(h=o.__P)&&(s=[],(n=cu({},c)).__v=c.__v+1,lO(h,c,n,o.__n,h.ownerSVGElement!==void 0,c.__h!=null?[f]:null,s,f??Pf(c),c.__h),TA(s,c),c.__e!=f&&iO(c)),is.length>i&&is.sort(Hg));Jp.__r=0}function aO(e,i,o,s,n,c,f,h,v,b){var g,O,x,S,N,j,R,D=s&&s.__k||nO,z=D.length;for(o.__k=[],g=0;g<i.length;g++)if((S=o.__k[g]=(S=i[g])==null||typeof S=="boolean"||typeof S=="function"?null:typeof S=="string"||typeof S=="number"||typeof S=="bigint"?Hp(null,S,null,null,S):Array.isArray(S)?Hp(sm,{children:S},null,null,null):S.__b>0?Hp(S.type,S.props,S.key,S.ref?S.ref:null,S.__v):S)!=null){if(S.__=o,S.__b=o.__b+1,(x=D[g])===null||x&&S.key==x.key&&S.type===x.type)D[g]=void 0;else for(O=0;O<z;O++){if((x=D[O])&&S.key==x.key&&S.type===x.type){D[O]=void 0;break}x=null}lO(e,S,x=x||rO,n,c,f,h,v,b),N=S.__e,(O=S.ref)&&x.ref!=O&&(R||(R=[]),x.ref&&R.push(x.ref,null,S),R.push(O,S.__c||N,S)),N!=null?(j==null&&(j=N),typeof S.type=="function"&&S.__k===x.__k?S.__d=v=uO(S,v,e):v=sO(e,S,x,D,N,v),typeof o.type=="function"&&(o.__d=v)):v&&x.__e==v&&v.parentNode!=e&&(v=Pf(x))}for(o.__e=j,g=z;g--;)D[g]!=null&&(typeof o.type=="function"&&D[g].__e!=null&&D[g].__e==o.__d&&(o.__d=cO(s).nextSibling),dO(D[g],D[g]));if(R)for(g=0;g<R.length;g++)fO(R[g],R[++g],R[++g])}function uO(e,i,o){for(var s,n=e.__k,c=0;n&&c<n.length;c++)(s=n[c])&&(s.__=e,i=typeof s.type=="function"?uO(s,i,o):sO(o,s,s,n,s.__e,i));return i}function sO(e,i,o,s,n,c){var f,h,v;if(i.__d!==void 0)f=i.__d,i.__d=void 0;else if(o==null||n!=c||n.parentNode==null)e:if(c==null||c.parentNode!==e)e.appendChild(n),f=null;else{for(h=c,v=0;(h=h.nextSibling)&&v<s.length;v+=1)if(h==n)break e;e.insertBefore(n,c),f=c}return f!==void 0?f:n.nextSibling}function cO(e){var i,o,s;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(i=e.__k.length-1;i>=0;i--)if((o=e.__k[i])&&(s=cO(o)))return s}return null}function SA(e,i,o,s,n){var c;for(c in o)c==="children"||c==="key"||c in i||Qp(e,c,null,o[c],s);for(c in i)n&&typeof i[c]!="function"||c==="children"||c==="key"||c==="value"||c==="checked"||o[c]===i[c]||Qp(e,c,i[c],o[c],s)}function m_(e,i,o){i[0]==="-"?e.setProperty(i,o??""):e[i]=o==null?"":typeof o!="number"||xA.test(i)?o:o+"px"}function Qp(e,i,o,s,n){var c;e:if(i==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(i in s)o&&i in o||m_(e.style,i,"");if(o)for(i in o)s&&o[i]===s[i]||m_(e.style,i,o[i])}else if(i[0]==="o"&&i[1]==="n")c=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in e?i.toLowerCase().slice(2):i.slice(2),e.l||(e.l={}),e.l[i+c]=o,o?s||e.addEventListener(i,c?__:b_,c):e.removeEventListener(i,c?__:b_,c);else if(i!=="dangerouslySetInnerHTML"){if(n)i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!=="width"&&i!=="height"&&i!=="href"&&i!=="list"&&i!=="form"&&i!=="tabIndex"&&i!=="download"&&i in e)try{e[i]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&i[4]!=="-"?e.removeAttribute(i):e.setAttribute(i,o))}}function b_(e){return this.l[e.type+!1](Bn.event?Bn.event(e):e)}function __(e){return this.l[e.type+!0](Bn.event?Bn.event(e):e)}function lO(e,i,o,s,n,c,f,h,v){var b,g,O,x,S,N,j,R,D,z,Z,fe,se,oe,pe,K=i.type;if(i.constructor!==void 0)return null;o.__h!=null&&(v=o.__h,h=i.__e=o.__e,i.__h=null,c=[h]),(b=Bn.__b)&&b(i);try{e:if(typeof K=="function"){if(R=i.props,D=(b=K.contextType)&&s[b.__c],z=b?D?D.props.value:b.__:s,o.__c?j=(g=i.__c=o.__c).__=g.__E:("prototype"in K&&K.prototype.render?i.__c=g=new K(R,z):(i.__c=g=new Cc(R,z),g.constructor=K,g.render=PA),D&&D.sub(g),g.props=R,g.state||(g.state={}),g.context=z,g.__n=s,O=g.__d=!0,g.__h=[],g._sb=[]),g.__s==null&&(g.__s=g.state),K.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=cu({},g.__s)),cu(g.__s,K.getDerivedStateFromProps(R,g.__s))),x=g.props,S=g.state,g.__v=i,O)K.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(K.getDerivedStateFromProps==null&&R!==x&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(R,z),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(R,g.__s,z)===!1||i.__v===o.__v){for(i.__v!==o.__v&&(g.props=R,g.state=g.__s,g.__d=!1),g.__e=!1,i.__e=o.__e,i.__k=o.__k,i.__k.forEach(function(U){U&&(U.__=i)}),Z=0;Z<g._sb.length;Z++)g.__h.push(g._sb[Z]);g._sb=[],g.__h.length&&f.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(R,g.__s,z),g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(x,S,N)})}if(g.context=z,g.props=R,g.__P=e,fe=Bn.__r,se=0,"prototype"in K&&K.prototype.render){for(g.state=g.__s,g.__d=!1,fe&&fe(i),b=g.render(g.props,g.state,g.context),oe=0;oe<g._sb.length;oe++)g.__h.push(g._sb[oe]);g._sb=[]}else do g.__d=!1,fe&&fe(i),b=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++se<25);g.state=g.__s,g.getChildContext!=null&&(s=cu(cu({},s),g.getChildContext())),O||g.getSnapshotBeforeUpdate==null||(N=g.getSnapshotBeforeUpdate(x,S)),pe=b!=null&&b.type===sm&&b.key==null?b.props.children:b,aO(e,Array.isArray(pe)?pe:[pe],i,o,s,n,c,f,h,v),g.base=i.__e,i.__h=null,g.__h.length&&f.push(g),j&&(g.__E=g.__=null),g.__e=!1}else c==null&&i.__v===o.__v?(i.__k=o.__k,i.__e=o.__e):i.__e=AA(o.__e,i,o,s,n,c,f,v);(b=Bn.diffed)&&b(i)}catch(U){i.__v=null,(v||c!=null)&&(i.__e=h,i.__h=!!v,c[c.indexOf(h)]=null),Bn.__e(U,i,o)}}function TA(e,i){Bn.__c&&Bn.__c(i,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){Bn.__e(s,o.__v)}})}function AA(e,i,o,s,n,c,f,h){var v,b,g,O=o.props,x=i.props,S=i.type,N=0;if(S==="svg"&&(n=!0),c!=null){for(;N<c.length;N++)if((v=c[N])&&"setAttribute"in v==!!S&&(S?v.localName===S:v.nodeType===3)){e=v,c[N]=null;break}}if(e==null){if(S===null)return document.createTextNode(x);e=n?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,x.is&&x),c=null,h=!1}if(S===null)O===x||h&&e.data===x||(e.data=x);else{if(c=c&&um.call(e.childNodes),b=(O=o.props||rO).dangerouslySetInnerHTML,g=x.dangerouslySetInnerHTML,!h){if(c!=null)for(O={},N=0;N<e.attributes.length;N++)O[e.attributes[N].name]=e.attributes[N].value;(g||b)&&(g&&(b&&g.__html==b.__html||g.__html===e.innerHTML)||(e.innerHTML=g&&g.__html||""))}if(SA(e,x,O,n,h),g)i.__k=[];else if(N=i.props.children,aO(e,Array.isArray(N)?N:[N],i,o,s,n&&S!=="foreignObject",c,f,c?c[0]:o.__k&&Pf(o,0),h),c!=null)for(N=c.length;N--;)c[N]!=null&&oO(c[N]);h||("value"in x&&(N=x.value)!==void 0&&(N!==e.value||S==="progress"&&!N||S==="option"&&N!==O.value)&&Qp(e,"value",N,O.value,!1),"checked"in x&&(N=x.checked)!==void 0&&N!==e.checked&&Qp(e,"checked",N,O.checked,!1))}return e}function fO(e,i,o){try{typeof e=="function"?e(i):e.current=i}catch(s){Bn.__e(s,o)}}function dO(e,i,o){var s,n;if(Bn.unmount&&Bn.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||fO(s,null,i)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(c){Bn.__e(c,i)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(n=0;n<s.length;n++)s[n]&&dO(s[n],i,o||typeof e.type!="function");o||e.__e==null||oO(e.__e),e.__=e.__e=e.__d=void 0}function PA(e,i,o){return this.constructor(e,o)}um=nO.slice,Bn={__e:function(e,i,o,s){for(var n,c,f;i=i.__;)if((n=i.__c)&&!n.__)try{if((c=n.constructor)&&c.getDerivedStateFromError!=null&&(n.setState(c.getDerivedStateFromError(e)),f=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e,s||{}),f=n.__d),f)return n.__E=n}catch(h){e=h}throw e}},eO=0,Cc.prototype.setState=function(e,i){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=cu({},this.state),typeof e=="function"&&(e=e(cu({},o),this.props)),e&&cu(o,e),e!=null&&this.__v&&(i&&this._sb.push(i),g_(this))},Cc.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g_(this))},Cc.prototype.render=sm,is=[],tO=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Hg=function(e,i){return e.__v.__b-i.__v.__b},Jp.__r=0;var Af=globalThis&&globalThis.__assign||function(){return Af=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Af.apply(this,arguments)};function cm(e){var i=e.x,o=e.y,s=e.width,n=e.height,c=e.radius,f=e.className,h=i-s/2,v=o-n/2,b=Af(Af({width:10,height:10,cx:0,cy:0,rx:c||0,ry:c||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+f},e),{x:h,y:v});return Wt.h("rect",Af({},b))}cm.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var kc;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(kc||(kc={}));function Xp(e){var i=e.x,o=e.y,s=e.width,n=e.height;return{minX:i-s/2,minY:o-n/2,maxX:i+s/2,maxY:o+n/2}}function E_(e){var i=Xp(e),o=e.radius,s=i.minX,n=i.minY,c=i.maxX,f=i.maxY;return[{x:s+o,y:n+o},{x:c-o,y:n+o},{x:c-o,y:f-o},{x:s+o,y:f-o}]}function O_(e){var i=e.point,o=e.beforeNode,s=e.afterNode,n=i.x,c=i.y,f={x:n,y:c},h=o.radius,v=Xp(o),b=Xp(s);if(n===v.minX){f.x=b.minX;var g=(c-o.y)/(o.height/2-h);g?f.y=s.y+(s.height/2-h)*g:f.y=s.y}else if(n===v.maxX){f.x=b.maxX;var g=(c-o.y)/(o.height/2-h);g?f.y=s.y+(s.height/2-h)*g:f.y=s.y}else if(c===v.minY){f.y=b.minY;var g=(n-o.x)/(o.width/2-h);g?f.x=s.x+(s.width/2-h)*g:f.x=s.x}else if(c===v.maxY){f.y=b.maxY;var g=(n-o.x)/(o.width/2-h);g?f.x=s.x+(s.width/2-h)*g:f.x=s.x}else{var O=E_(o),x=E_(s),S=Xp(o),N=S.minX,j=S.minY,R=S.maxX,D=S.maxY,z=-1;if(n-N<h&&c-j<h?z=0:R-n<h&&c-j<h?z=1:R-n<h&&D-c<h?z=2:n-N<h&&j-c<h&&(z=3),z>-1){var Z=Math.atan2(c-O[z].y,n-O[z].x);f.x=x[z].x+h*Math.cos(Z),f.y=x[z].y+h*Math.sin(Z)}}return f}function w_(e){var i=e.point,o=e.beforeNode,s=e.afterNode,n=s.rx,c=s.ry,f=i,h=(i.y-o.y)/(i.x-o.x),v=n,b=c,g,O;return h>=1/0?(g=0,O=b):h<=-1/0?(g=0,O=-b):i.x-o.x>0?(g=v*b/Math.sqrt(b*b+v*v*h*h),O=v*b*h/Math.sqrt(b*b+v*v*h*h)):(g=-(v*b)/Math.sqrt(b*b+v*v*h*h),O=-(v*b*h)/Math.sqrt(b*b+v*v*h*h)),f={x:g+s.x,y:O+s.y},f}function x_(e){var i=e.point,o=e.beforeNode,s=e.afterNode,n=i,c,f,h=i.x-o.x,v=i.y-o.y,b=o.rx,g=o.ry,O=Math.sqrt((b-Math.abs(h))*(b-Math.abs(h))+v*v)/Math.sqrt(b*b+g*g),x=s.rx,S=s.ry,N=Math.sqrt((x*x+S*S)*O*O*(x*x/(x*x+S*S))),j=N*(S/x);return h>=0?c=x-N:c=N-x,v>0?f=j:f=-j,n={x:c+s.x,y:f+s.y},n}var NA=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),as=globalThis&&globalThis.__assign||function(){return as=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},as.apply(this,arguments)},jA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},MA=Wt.LogicFlowUtil.StepDrag,RA=function(e){NA(i,e);function i(o){var s=e.call(this)||this;return s.updatePosition=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.x,b=h.y;s.nodeModel.x=v+c/2,s.nodeModel.y=b+f/2,s.nodeModel.moveText(c/2,f/2)},s.getResize=function(n){var c=n.index,f=n.deltaX,h=n.deltaY,v=n.width,b=n.height,g=n.PCTResizeInfo,O=n.pct,x=O===void 0?1:O,S={width:v,height:b,deltaX:f,deltaY:h};if(g){var N=4,j=0,R=0;switch(c){case 0:R=(f*-1-h)/N;break;case 1:R=(f-h)/N;break;case 2:R=(f+h)/N;break;case 3:R=(f*-1+h)/N;break}R!==0&&(j=Math.round(R/g.ResizeBasis.basisHeight*1e5)/1e3),g.ResizePCT.widthPCT=Math.max(Math.min(g.ResizePCT.widthPCT+j,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit),g.ResizePCT.hightPCT=Math.max(Math.min(g.ResizePCT.hightPCT+j,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit);var D=Math.round(g.ResizePCT.widthPCT*g.ResizeBasis.basisWidth/100),z=Math.round(g.ResizePCT.hightPCT*g.ResizeBasis.basisHeight/100);switch(c){case 0:f=v-D,h=b-z;break;case 1:f=D-v,h=b-z;break;case 2:f=D-v,h=z-b;break;case 3:f=v-D,h=z-b;break}return S.width=D,S.height=z,S.deltaX=f/x,S.deltaY=h/x,S}switch(c){case 0:S.width=v-f*x,S.height=b-h*x;break;case 1:S.width=v+f*x,S.height=b-h*x;break;case 2:S.width=v+f*x,S.height=b+h*x;break;case 3:S.width=v-f*x,S.height=b+h*x;break}return S},s.updateRect=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.id,b=h.x,g=h.y,O=h.width,x=h.height,S=h.radius,N=h.PCTResizeInfo,j=s.index,R=s.getResize({index:j,deltaX:c,deltaY:f,width:O,height:x,PCTResizeInfo:N,pct:1}),D=s.nodeModel,z=D.minWidth,Z=D.minHeight,fe=D.maxWidth,se=D.maxHeight;if(R.width<z||R.width>fe||R.height<Z||R.height>se){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:R.deltaX,deltaY:R.deltaY}),s.nodeModel.width=R.width,s.nodeModel.height=R.height,s.nodeModel.setProperties({nodeSize:{width:R.width,height:R.height}});var oe=s.getNodeEdges(v),pe={x:b,y:g,width:O,height:x,radius:S},K={x:s.nodeModel.x,y:s.nodeModel.y,width:s.nodeModel.width,height:s.nodeModel.height,radius:S},U={point:"",beforeNode:pe,afterNode:K},Y;oe.sourceEdges.forEach(function(W){U.point=W.startPoint,Y=O_(U),W.updateStartPoint(Y)}),oe.targetEdges.forEach(function(W){U.point=W.endPoint,Y=O_(U),W.updateEndPoint(Y)}),s.eventEmit({beforeNode:pe,afterNode:K})},s.updateEllipse=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.id,b=h.rx,g=h.ry,O=h.x,x=h.y,S=h.PCTResizeInfo,N=s.index,j=b,R=g,D=s.getResize({index:N,deltaX:c,deltaY:f,width:j,height:R,PCTResizeInfo:S,pct:1/2}),z=s.nodeModel,Z=z.minWidth,fe=z.minHeight,se=z.maxWidth,oe=z.maxHeight;if(D.width<Z/2||D.width>se/2||D.height<fe/2||D.height>oe/2){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),s.nodeModel.rx=D.width,s.nodeModel.ry=D.height,s.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var pe=s.getNodeEdges(v),K={x:O,y:x},U={rx:D.width,ry:D.height,x:s.nodeModel.x,y:s.nodeModel.y},Y={point:{},beforeNode:K,afterNode:U},W;pe.sourceEdges.forEach(function(L){Y.point=L.startPoint,W=w_(Y),L.updateStartPoint(W)}),pe.targetEdges.forEach(function(L){Y.point=L.endPoint,W=w_(Y),L.updateEndPoint(W)}),s.eventEmit({beforeNode:as(as({},K),{rx:b,ry:g}),afterNode:U})},s.updateDiamond=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.id,b=h.rx,g=h.ry,O=h.x,x=h.y,S=h.PCTResizeInfo,N=s.index,j=b,R=g,D=s.getResize({index:N,deltaX:c,deltaY:f,width:j,height:R,PCTResizeInfo:S,pct:1/2}),z=s.nodeModel,Z=z.minWidth,fe=z.minHeight,se=z.maxWidth,oe=z.maxHeight;if(D.width<Z/2||D.width>se/2||D.height<fe/2||D.height>oe/2){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),s.nodeModel.rx=D.width,s.nodeModel.ry=D.height,s.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var pe={x:O,y:x,rx:b,ry:g},K={rx:D.width,ry:D.height,x:s.nodeModel.x,y:s.nodeModel.y},U={point:{},beforeNode:pe,afterNode:K},Y,W=s.getNodeEdges(v);W.sourceEdges.forEach(function(L){U.point=L.startPoint,Y=x_(U),L.updateStartPoint(Y)}),W.targetEdges.forEach(function(L){U.point=L.endPoint,Y=x_(U),L.updateEndPoint(Y)}),s.eventEmit({beforeNode:pe,afterNode:K})},s.eventEmit=function(n){var c=n.beforeNode,f=n.afterNode,h=s.nodeModel,v=h.id,b=h.modelType,g=h.type,O=as({id:v,modelType:b,type:g},c),x=as({id:v,modelType:b,type:g},f);s.graphModel.eventCenter.emit("node:resize",{oldNodeSize:O,newNodeSize:x})},s.onDragging=function(n){var c,f=n.deltaX,h=n.deltaY,v=s.graphModel.transformModel,b=s.nodeModel.modelType;c=jA(v.fixDeltaXY(f,h),2),f=c[0],h=c[1],b===kc.RECT_NODE||b===kc.HTML_NODE?s.updateRect({deltaX:f,deltaY:h}):b===kc.ELLIPSE_NODE?s.updateEllipse({deltaX:f,deltaY:h}):b===kc.DIAMOND_NODE&&s.updateDiamond({deltaX:f,deltaY:h})},s.onDragEnd=function(){var n=s.graphModel.gridSize,c=n===void 0?1:n,f=c*Math.round(s.nodeModel.x/c),h=c*Math.round(s.nodeModel.y/c);s.nodeModel.moveTo(f,h)},s.index=o.index,s.nodeModel=o.model,s.graphModel=o.graphModel,s.state={},s.dragHandler=new MA({onDragging:s.onDragging,onDragEnd:s.onDragEnd,step:1}),s}return i.prototype.getNodeEdges=function(o){for(var s=this.graphModel,n=s.edges,c=[],f=[],h=0;h<n.length;h++){var v=n[h];v.sourceNodeId===o?c.push(v):n[h].targetNodeId===o&&f.push(v)}return{sourceEdges:c,targetEdges:f}},i.prototype.render=function(){var o=this.props,s=o.x,n=o.y,c=o.index,f=o.model,h=f.getControlPointStyle();return Tf("g",{className:"lf-resize-control-"+c},Tf(cm,as({className:"lf-node-control"},{x:s,y:n},h,{onMouseDown:this.dragHandler.handleMouseDown})))},i}(Cc),DA=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),eh=globalThis&&globalThis.__assign||function(){return eh=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},eh.apply(this,arguments)},dh=function(e){DA(i,e);function i(){var o=e.call(this)||this;return o.state={},o}return i.prototype.getResizeControl=function(){var o=this.props,s=o.model,n=o.graphModel,c=s.x,f=s.y,h=s.width,v=s.height,b={minX:c-h/2,minY:f-v/2,maxX:c+h/2,maxY:f+v/2},g=b.minX,O=b.minY,x=b.maxX,S=b.maxY,N=[{x:g,y:O},{x,y:O},{x,y:S},{x:g,y:S}];return N.map(function(j,R){return Tf(RA,eh({index:R},j,{model:s,graphModel:n}))})},i.prototype.getGroupSolid=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.getResizeOutlineStyle();return Tf(cm,eh({fill:"none"},h,{x:s,y:n,width:c,height:f}))},i.prototype.render=function(){return Tf("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},i}(Cc),pO=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),kA=function(e){pO(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.width=c.width,n.height=c.height),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.resize=function(o,s){console.log(o,s)},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.width,basisHeight:this.height},c={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i}(Wt.RectNodeModel),CA=function(e){pO(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(dh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},i.prototype.getShape=function(){var o=this.props,s=o.model.isSelected,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s&&!n?this.getControlGroup():"")},i}(Wt.RectNode),ph={type:"rect",view:CA,model:kA},hO=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();(function(e){hO(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.rx=c.rx,n.ry=c.ry),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},c={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i})(Wt.EllipseNodeModel);(function(e){hO(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(dh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},i.prototype.getShape=function(){var o=this.props,s=o.model,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s.isSelected&&!n?this.getControlGroup():"")},i})(Wt.EllipseNode);var Xg=globalThis&&globalThis.__assign||function(){return Xg=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Xg.apply(this,arguments)};function IA(e){var i=e.fillOpacity,o=i===void 0?1:i,s=e.strokeWidth,n=s===void 0?1:s,c=e.strokeOpacity,f=c===void 0?1:c,h=e.fill,v=h===void 0?"transparent":h,b=e.stroke,g=b===void 0?"#000":b,O=e.points,x=e.className,S=x===void 0?"lf-basic-shape":x,N={fill:v,fillOpacity:o,strokeWidth:n,stroke:g,strokeOpacity:f,points:"",className:S};return N.points=O.map(function(j){return j.join(",")}).join(" "),Wt.h("polygon",Xg({},N))}var vO=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Vg=globalThis&&globalThis.__assign||function(){return Vg=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Vg.apply(this,arguments)};(function(e){vO(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.rx=c.rx,n.ry=c.ry),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},c={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i})(Wt.DiamondNodeModel);(function(e){vO(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(dh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){var o=this.props.model,s=o.points,n=o.getNodeStyle();return Wt.h("g",null,Wt.h(IA,Vg({},n,{points:s})))},i.prototype.getShape=function(){var o=this.props,s=o.model.isSelected,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s&&!n?this.getControlGroup():"")},i})(Wt.DiamondNode);var yO=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();(function(e){yO(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.width=c.width,n.height=c.height),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.width,basisHeight:this.height},c={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i})(Wt.HtmlNodeModel);(function(e){yO(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(dh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},i.prototype.getShape=function(){var o=this.props,s=o.model.isSelected,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s&&!n?this.getControlGroup():"")},i})(Wt.HtmlNode);var gO=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),th=globalThis&&globalThis.__assign||function(){return th=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},th.apply(this,arguments)},LA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},FA=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(LA(arguments[i]));return e},S_=500,T_=300,BA=-1e4,GA=function(e){gO(i,e);function i(){var o=e!==null&&e.apply(this,arguments)||this;return o.isGroup=!0,o.unfoldedWidth=S_,o.unfoldedHight=T_,o}return i.prototype.initNodeData=function(o){var s=this;e.prototype.initNodeData.call(this,o);var n=[];Array.isArray(o.children)&&(n=o.children),this.children=new Set(n),this.width=S_,this.height=T_,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=BA,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){s.isFolded&&s.foldGroup(s.isFolded)})},i.prototype.getResizeOutlineStyle=function(){var o=e.prototype.getResizeOutlineStyle.call(this);return o.stroke="none",o},i.prototype.foldGroup=function(o){var s=this;this.setProperty("isFolded",o),this.isFolded=o,o?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var n=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(c){var f=s.graphModel.getElement(c);f.isGroup&&!f.isFolded&&f.foldGroup(o),f.visible=!o,n=n.concat(f.incoming.edges.concat(f.outgoing.edges))}),this.foldEdge(o,n)},i.prototype.getAnchorStyle=function(o){var s=e.prototype.getAnchorStyle.call(this,o);return s.stroke="transparent",s.fill="transparent",s.hover.fill="transparent",s.hover.stroke="transparent",s},i.prototype.foldEdge=function(o,s){var n=this;s.forEach(function(c,f){var h=c.id,v=c.sourceNodeId,b=c.targetNodeId,g=c.startPoint,O=c.endPoint,x=c.type,S=c.text,N=c.getProperties(),j={id:h+"__"+f,sourceNodeId:v,targetNodeId:b,startPoint:g,endPoint:O,type:x,properties:N,text:S==null?void 0:S.value};c.virtual&&n.graphModel.deleteEdgeById(c.id);var R=n.graphModel.group.getNodeGroup(b);R||(R=n.graphModel.getNodeModelById(b));var D=n.graphModel.group.getNodeGroup(v);D||(D=n.graphModel.getNodeModelById(v)),o&&c.visible!==!1&&(n.children.has(v)||n.id===v?(j.startPoint=void 0,j.sourceNodeId=n.id):(j.endPoint=void 0,j.targetNodeId=n.id),(R.id!==n.id||D.id!==n.id)&&n.createVirtualEdge(j),c.visible=!1),!o&&c.visible===!1&&(R&&R.isGroup&&R.isFolded?(j.targetNodeId=R.id,j.endPoint=void 0,n.createVirtualEdge(j)):D&&D.isGroup&&D.isFolded?(j.sourceNodeId=D.id,j.startPoint=void 0,n.createVirtualEdge(j)):c.visible=!0)})},i.prototype.createVirtualEdge=function(o){o.pointsList=void 0;var s=this.graphModel.addEdge(o);s.virtual=!0,s.text.editable=!1,s.isFoldedEdge=!0},i.prototype.isInRange=function(o){var s=o.x1,n=o.y1,c=o.x2,f=o.y2;return s>=this.x-this.width/2&&c<=this.x+this.width/2&&n>=this.y-this.height/2&&f<=this.y+this.height/2},i.prototype.isAllowMoveTo=function(o){var s=o.x1,n=o.y1,c=o.x2,f=o.y2;return{x:s>=this.x-this.width/2&&c<=this.x+this.width/2,y:n>=this.y-this.height/2&&f<=this.y+this.height/2}},i.prototype.setAllowAppendChild=function(o){this.setProperty("groupAddable",o)},i.prototype.addChild=function(o){this.children.add(o)},i.prototype.removeChild=function(o){this.children.delete(o)},i.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},i.prototype.getData=function(){var o=this,s=e.prototype.getData.call(this);s.children=[],this.children.forEach(function(c){var f=o.graphModel.getNodeModelById(c);f&&!f.virtual&&s.children.push(c)});var n=s.properties;return delete n.groupAddable,delete n.isFolded,s},i.prototype.getHistoryData=function(){var o=e.prototype.getData.call(this);o.children=FA(this.children),o.isGroup=!0;var s=o.properties;return delete s.groupAddable,s.isFolded&&(o.x=o.x+this.unfoldedWidth/2-this.foldedWidth/2,o.y=o.y+this.unfoldedHight/2-this.foldedHeight/2),o},i.prototype.isAllowAppendIn=function(o){return!0},i.prototype.toBack=function(){this.zIndex--},i}(ph.model),UA=function(e){gO(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props.model,s=o.resizable,n=o.properties;return s&&!n.isFolded?e.prototype.getControlGroup.call(this):null},i.prototype.getAddableShape=function(){var o=this.props.model,s=o.width,n=o.height,c=o.x,f=o.y,h=o.radius,v=o.properties;if(!v.groupAddable)return null;var b=this.props.model.getNodeStyle().strokeWidth,g=this.props.model.getAddableOutlineStyle(),O=s+b+8,x=n+b+8;return Wt.h("rect",th(th({},g),{width:O,height:x,x:c-O/2,y:f-x/2,rx:h,ry:h}))},i.prototype.getFoldIcon=function(){var o=this.props.model,s=o.x-o.width/2+5,n=o.y-o.height/2+5;if(!o.foldable)return null;var c=Wt.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:o.properties.isFolded?"M "+(s+3)+","+(n+6)+" "+(s+11)+","+(n+6)+" M"+(s+7)+","+(n+2)+" "+(s+7)+","+(n+10):"M "+(s+3)+","+(n+6)+" "+(s+11)+","+(n+6)+" "});return Wt.h("g",{},[Wt.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:o.x-o.width/2+5,y:o.y-o.height/2+5,onClick:function(){o.foldGroup(!o.properties.isFolded)}}),c])},i.prototype.getResizeShape=function(){return Wt.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},i}(ph.view);const lm={type:"group",view:UA,model:GA};var zA=-1e3,A_=-1e4,HA=function(){function e(i){var o=this,s=i.lf;this.topGroupZIndex=A_,this.nodeGroupMap=new Map,this.graphRendered=function(n){n&&n.nodes&&n.nodes.forEach(function(c){c.children&&c.children.forEach(function(f){o.nodeGroupMap.set(f,c.id)})})},this.appendNodeToGroup=function(n){var c=n.data,f=o.nodeGroupMap.get(c.id);if(f){var h=o.lf.getNodeModelById(f);h.removeChild(c.id),o.nodeGroupMap.delete(c.id),h.setAllowAppendChild(!1)}var v=o.lf.getNodeModelById(c.id),b=v.getBounds(),g=o.getGroup(b,c);if(g){var O=g.isAllowAppendIn(c);if(!O){o.lf.emit("group:not-allowed",{group:g.getData(),node:c});return}g.addChild(c.id),o.nodeGroupMap.set(c.id,g.id),g.setAllowAppendChild(!1),v.isGroup&&(c.children.forEach(function(x){o.nodeGroupMap.set(x,c.id)}),o.nodeSelected({data:c,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(n){var c=n.data;c.children&&c.children.forEach(function(v){o.nodeGroupMap.delete(v),o.lf.deleteNode(v)});var f=o.nodeGroupMap.get(c.id);if(f){var h=o.lf.getNodeModelById(f);h.removeChild(c.id),o.nodeGroupMap.delete(c.id)}},this.setActiveGroup=function(n){var c=n.data,f=o.lf.getNodeModelById(c.id),h=f.getBounds(),v=o.getGroup(h,c);if(o.activeGroup&&o.activeGroup.setAllowAppendChild(!1),!(!v||f.isGroup&&v.id===c.id)){var b=v.isAllowAppendIn(c);b&&(o.activeGroup=v,o.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(n){var c=n.data,f=n.isMultiple,h=n.isSelected,v=o.lf.getNodeModelById(c.id);if(o.toFrontGroup(v),o.topGroupZIndex>zA){o.topGroupZIndex=A_;for(var b=o.lf.graphModel.nodes.filter(function(j){return j.isGroup}).sort(function(j,R){return j.zIndex-R.zIndex}),g=0,O=0;O<b.length;O++){var x=b[O];x.zIndex!==g&&(o.topGroupZIndex++,g=x.zIndex),x.setZIndex(o.topGroupZIndex)}}if(f&&h)if(v.isGroup)v.children.forEach(function(j){var R=o.lf.graphModel.getElement(j);R.setSelected(!1)});else{var S=o.nodeGroupMap.get(c.id);if(S){var N=o.lf.getNodeModelById(S);N.isSelected&&v.setSelected(!1)}}},this.toFrontGroup=function(n){!n||!n.isGroup||(o.topGroupZIndex++,n.setZIndex(o.topGroupZIndex),n.children&&n.children.forEach(function(c){var f=o.lf.getNodeModelById(c);o.toFrontGroup(f)}))},s.register(lm),this.lf=s,s.graphModel.addNodeMoveRules(function(n,c,f){if(n.isGroup){var h=o.getNodeAllChild(n);return s.graphModel.moveNodes(h,c,f,!0),!0}var v=s.getNodeModelById(o.nodeGroupMap.get(n.id));if(v&&v.isRestrict){var b=n.getBounds(),g=b.x1,O=b.y1,x=b.x2,S=b.y2,N=v.isAllowMoveTo({x1:g+c,y1:O+f,x2:x+c,y2:S+f});return N}return!0}),s.graphModel.group=this,s.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),s.on("node:delete",this.deleteGroupChild),s.on("node:dnd-drag,node:drag",this.setActiveGroup),s.on("node:click",this.nodeSelected),s.on("graph:rendered",this.graphRendered)}return e.prototype.getNodeAllChild=function(i){var o=this,s=[];return i.children&&i.children.forEach(function(n){s.push(n);var c=o.lf.getNodeModelById(n);c.isGroup&&(s=s.concat(o.getNodeAllChild(c)))}),s},e.prototype.getGroup=function(i,o){var s=this.lf.graphModel.nodes,n=s.filter(function(h){return h.isGroup&&h.isInRange(i)&&h.id!==o.id});if(n.length!==0){if(n.length===1)return n[0];for(var c=n[n.length-1],f=n.length-2;f>=0;f--)n[f].zIndex>c.zIndex&&(c=n[f]);return c}},e.prototype.getNodeGroup=function(i){var o=this.nodeGroupMap.get(i);if(o)return this.lf.getNodeModelById(o)},e.pluginName="group",e}(),XA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c};globalThis&&globalThis.__spread;var P_=globalThis&&globalThis.__assign||function(){return P_=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},P_.apply(this,arguments)},N_=globalThis&&globalThis.__assign||function(){return N_=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},N_.apply(this,arguments)},VA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c};globalThis&&globalThis.__spread;class WA extends Wt.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class YA extends Wt.HtmlNode{}class $A extends LT{}class KA extends FT{}class qA extends BT{}class ZA extends GT{getShape(){const i=this.props.model,o=i.getNodeStyle(),{x:s,y:n,r:c}=i;return Wt.h("circle",{...o,cx:s,cy:n,r:c,strokeWidth:5})}}class JA extends UT{constructor(i,o){const{id:s,text:n,x:c,y:f}=i;i.id=s||`Gateway_${Xi()}`,i.text=n||{value:n||"",x:c,y:f+40},super(i,o),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class QA extends zT{getShape(){const{model:i}=this.props,{x:o,y:s,width:n,height:c,points:f}=i,h=i.getNodeStyle();return Wt.h("g",{transform:`matrix(1 0 0 1 ${o-n/2} ${s-c/2})`},Wt.h("polygon",{...h,x:o,y:s,points:f}),Wt.h("line",{...h,x1:15,y1:15,x2:35,y2:35}),Wt.h("line",{...h,x1:35,y1:15,x2:15,y2:35}))}}class eP extends Wt.PolygonNodeModel{constructor(i,o){const{id:s,text:n,x:c,y:f}=i;i.id=s||`Gateway_${Xi()}`,i.text=n||{value:n||"",x:c,y:f+40},super(i,o),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class tP extends Wt.PolygonNode{getShape(){const{model:i}=this.props,{x:o,y:s,width:n,height:c,points:f}=i,h=i.getNodeStyle();return Wt.h("g",{transform:`matrix(1 0 0 1 ${o-n/2} ${s-c/2})`},Wt.h("polygon",{...h,x:o,y:s,points:f}),Wt.h("line",{...h,x1:10,y1:25,x2:40,y2:25}),Wt.h("line",{...h,x1:25,y1:10,x2:25,y2:40}))}}class rP extends HT{}class nP extends XT{}class oP extends VT{isAllowConnectedAsSource(){return!1}}class iP extends WT{}class aP extends KE{getTextPosition(){const{x:i,y:o}=this.text;return i&&o?{x:i,y:o}:this.dbClickPosition||{x:0,y:0}}}class uP extends qE{}const sP=ph.model,cP=ph.view;class lP extends sP{createId(){return`Note_${Xi()}`}initNodeData(i){super.initNodeData(i),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const i=super.getNodeStyle();return i.strokeDasharray="3 3",i.fill="transparent",i}}class fP extends cP{}class dP extends KE{getEdgeStyle(){const i=super.getEdgeStyle();return i.strokeDasharray="3 3",i}getTextPosition(){const{x:i,y:o}=this.text;return i&&o?{x:i,y:o}:this.dbClickPosition||{x:0,y:0}}}class pP extends qE{}const hP=lm.model;class vP extends hP{createId(){return`Group_${Xi()}`}initNodeData(i){super.initNodeData(i),this.resizable=!0,this.foldable=!0}addChild(i){var o,s;super.addChild(i),(s=(o=this.graphModel.nodesMap[i])==null?void 0:o.model)==null||s.setProperty("groupKey",this.id)}removeChild(i){var o,s;super.removeChild(i),(s=(o=this.graphModel.nodesMap[i])==null?void 0:o.model)==null||s.deleteProperty("groupKey")}}class yP extends lm.view{}class mO extends HA{constructor({lf:i}){super({lf:i}),i.register({type:"group",model:vP,view:yP}),i.off("node:delete",this.deleteGroupChild),i.on("node:delete",({data:o})=>{o.children&&o.children.forEach(s=>{this.nodeGroupMap.delete(s),this.lf.deleteNode(s)})})}}const gP=[{type:"process",model:WA,view:YA},{type:"startEvent",model:$A,view:KA},{type:"endEvent",model:qA,view:ZA},{type:"exclusiveGateway",model:JA,view:QA},{type:"parallelGateway",model:eP,view:tP},{type:"userTask",model:rP,view:nP},{type:"serviceTask",model:oP,view:iP},{type:"sequenceFlow",model:aP,view:uP},{type:"note",model:lP,view:fP},{type:"noteFlow",model:dP,view:pP}];class fm{constructor({lf:i}){i.batchRegister(gP),i.setDefaultEdgeType("sequenceFlow")}}ti(fm,"pluginName","bpmnExtend");class mP extends vA{constructor({lf:i}){super({lf:i}),this.addItem({key:"clear",iconClass:"lf-control-clear",title:"",text:"",onClick:()=>i.clearData()}),this.addItem({key:"edit",iconClass:"lf-control-edit",title:"",text:"",onClick:()=>i.emit("custom:edit-click",{})}),this.addItem({key:"mini-map",iconClass:"lf-control-mini-map",title:"",text:"",onClick:()=>{const{isShow:o,show:s,hide:n}=i.extension.miniMap??{};o?n():s()}})}}class bP{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(i){return this.init(i),this.execute(!0)}init(i){this.nodes=i.nodes||[],this.edges=i.edges||[],this.combos=i.combos||[],this.comboEdges=i.comboEdges||[],this.hiddenNodes=i.hiddenNodes||[],this.hiddenEdges=i.hiddenEdges||[],this.hiddenCombos=i.hiddenCombos||[],this.vedges=i.vedges||[]}execute(i){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(i){i&&Object.assign(this,i)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const _P=e=>typeof e=="string",j_=Array.isArray,rh=e=>typeof e=="number",bO=e=>e!==null&&typeof e=="object",nh=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const i=[];return e.forEach(o=>{i.push(o)}),i.map(o=>nh(o))}if(typeof e=="object"&&Object.keys(e).length){const i=Object.assign({},e);return Object.keys(i).forEach(o=>{i[o]=nh(i[o])}),i}return e},Ac=(e,i)=>{const o=e[i];return bO(o)?o.cell:o},M_=(e,i,o)=>{let s;return o?s=o:rh(e)?s=()=>e:s=()=>i,s},EP=(e,i)=>{if(e!=="next"&&e!=="prev")return i},R_=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let OP=class{constructor(){const i={};i.prev=i,i.next=i.prev,this.shortcut=i}dequeue(){const i=this.shortcut,o=i.prev;if(o&&o!==i)return R_(o),o}enqueue(i){const o=this.shortcut;i.prev&&i.next&&R_(i),i.next=o.next,o.next.prev=i,o.next=i,i.prev=o}toString(){const i=[],o=this.shortcut;let s=o.prev;for(;s!==o;)i.push(JSON.stringify(s,EP)),s=s==null?void 0:s.prev;return`[${i.join(", ")}]`}};var Ic;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(Ic||(Ic={}));function D_(e,i){var o=e.get(i)||0;e.set(i,o+1)}function k_(e,i){var o=e.get(i);o!==void 0&&(o=o-1,o>0?e.set(i,o):e.delete(i))}function _O(e,i,o,s){var n=String(i),c=String(o);if(!e&&n>c){var f=n;n=c,c=f}return n+Ic.EDGE_KEY_DELIM+c+Ic.EDGE_KEY_DELIM+(s===void 0?Ic.DEFAULT_EDGE_NAME:s)}function C_(e,i,o,s){var n=String(i),c=String(o),f={v:i,w:o};if(!e&&n>c){var h=f.v;f.v=f.w,f.w=h}return s!==void 0&&(f.name=s),f}function Tg(e,i){return _O(e,i.v,i.w,i.name)}function I_(e){return typeof e=="function"}var wP=function(i){return i.nodes().map(function(o){var s=i.node(o),n=i.parent(o),c={id:o,value:s,parent:n};return c.value===void 0&&delete c.value,c.parent===void 0&&delete c.parent,c})},xP=function(i){return i.edges().map(function(o){var s=i.edge(o),n={v:o.v,w:o.w,value:s,name:o.name};return n.name===void 0&&delete n.name,n.value===void 0&&delete n.value,n})},SP=function(i){var o={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:wP(i),edges:xP(i),value:i.graph()};return o.value===void 0&&delete o.value,o},TP=function(i){var o=new Hc(i.options);return i.value!==void 0&&o.setGraph(i.value),i.nodes.forEach(function(s){o.setNode(s.id,s.value),s.parent&&o.setParent(s.id,s.parent)}),i.edges.forEach(function(s){o.setEdge(s.v,s.w,s.value,s.name)}),o};function L_(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);i&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),o.push.apply(o,s)}return o}function F_(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?L_(Object(o),!0).forEach(function(s){AP(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):L_(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}function AP(e,i,o){return i in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function PP(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function B_(e,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function NP(e,i,o){return i&&B_(e.prototype,i),o&&B_(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}var jP={compound:!1,multigraph:!1,directed:!0},Hc=function(){function e(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};PP(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Ic.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return i.directed},this.isMultigraph=function(){return i.multigraph},this.isCompound=function(){return i.compound},this.setGraph=function(n){return i.label=n,i},this.graph=function(){return i.label},this.setDefaultNodeLabel=function(n){return I_(n)?i.defaultNodeLabelFn=n:i.defaultNodeLabelFn=function(){return n},i},this.nodeCount=function(){return i.nodeCountNum},this.node=function(n){return i.nodesLabelMap.get(n)},this.nodes=function(){return Array.from(i.nodesLabelMap.keys())},this.sources=function(){return i.nodes().filter(function(n){var c;return!(!((c=i.inEdgesMap.get(n))===null||c===void 0)&&c.size)})},this.sinks=function(){return i.nodes().filter(function(n){var c;return!(!((c=i.outEdgesMap.get(n))===null||c===void 0)&&c.size)})},this.setNodes=function(n,c){return n.map(function(f){return i.setNode(f,c)}),i},this.hasNode=function(n){return i.nodesLabelMap.has(n)},this.checkCompound=function(){if(!i.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(n){if(i.isCompound()){var c,f=(c=i.parentMap)===null||c===void 0?void 0:c.get(n);if(f!==i.GRAPH_NODE)return f}},this.removeFromParentsChildList=function(n){var c=i.parentMap.get(n);i.childrenMap.get(c).delete(n)},this.setParent=function(n,c){var f,h;i.checkCompound();for(var v=c===void 0?i.GRAPH_NODE:c,b=i.parent(v);b;){if(n===b)throw new Error("Setting "+c+" as parent of "+n+" would create a cycle");b=i.parent(b)}c&&i.setNode(c),i.setNode(n),i.removeFromParentsChildList(n),(f=i.parentMap)===null||f===void 0||f.set(n,v);var g=i.childrenMap.get(v);return g.set(n,!0),(h=i.childrenMap)===null||h===void 0||h.set(v,g),i},this.children=function(n){var c=n===void 0?i.GRAPH_NODE:n;if(i.isCompound()){var f,h=(f=i.childrenMap)===null||f===void 0?void 0:f.get(c);return h?Array.from(h.keys()):void 0}if(c===i.GRAPH_NODE)return i.nodes();if(n&&i.hasNode(n))return[]},this.predecessors=function(n){var c=i.predecessorsMap.get(n);return c?Array.from(c.keys()):void 0},this.successors=function(n){var c=i.successorsMap.get(n);return c?Array.from(c.keys()):void 0},this.neighbors=function(n){var c;if(i.hasNode(n))return Array.from(new Set((c=i.predecessors(n))===null||c===void 0?void 0:c.concat(i.successors(n))))},this.isLeaf=function(n){var c;if(i.isDirected()){var f;return!(!((f=i.successors(n))===null||f===void 0)&&f.length)}return!(!((c=i.neighbors(n))===null||c===void 0)&&c.length)},this.filterNodes=function(n){var c=i.directed,f=i.multigraph,h=i.compound,v=new e({directed:c,multigraph:f,compound:h});if(v.setGraph(i.graph()),i.nodes().forEach(function(g){n(g)&&v.setNode(g,i.node(g))}),i.edges().forEach(function(g){v.hasNode(g.v)&&v.hasNode(g.w)&&v.setEdgeObj(g,i.edge(g))}),h){var b=function(O){for(var x=i.parent(O);x!==void 0&&!v.hasNode(x);)x=i.parent(x);return x};v.nodes().forEach(function(g){v.setParent(g,b(g))})}return v},this.setDefaultEdgeLabel=function(n){return I_(n)?i.defaultEdgeLabelFn=n:i.defaultEdgeLabelFn=function(){return n},i},this.edgeCount=function(){return i.edgeCountNum},this.setEdgeObj=function(n,c){return i.setEdge(n.v,n.w,c,n.name)},this.setPath=function(n,c){return n.reduce(function(f,h){return i.setEdge(f,h,c),h}),i},this.edgeFromArgs=function(n,c,f){return i.edge({v:n,w:c,name:f})},this.edge=function(n){return i.edgesLabelsMap.get(Tg(i.isDirected(),n))},this.hasEdge=function(n,c,f){return i.edgesLabelsMap.has(Tg(i.isDirected(),{v:n,w:c,name:f}))},this.removeEdgeObj=function(n){var c=n.v,f=n.w,h=n.name;return i.removeEdge(c,f,h)},this.edges=function(){return Array.from(i.edgesMap.values())},this.inEdges=function(n,c){var f=i.inEdgesMap.get(n);if(f)return Array.from(f.values()).filter(function(h){return!c||h.v===c})},this.outEdges=function(n,c){var f=i.outEdgesMap.get(n);if(f)return Array.from(f.values()).filter(function(h){return!c||h.w===c})},this.nodeEdges=function(n,c){var f;if(i.hasNode(n))return(f=i.inEdges(n,c))===null||f===void 0?void 0:f.concat(i.outEdges(n,c))},this.toJSON=function(){return SP(i)},this.nodeInDegree=function(n){var c=i.inEdgesMap.get(n);return c?c.size:0},this.nodeOutDegree=function(n){var c=i.outEdgesMap.get(n);return c?c.size:0},this.nodeDegree=function(n){return i.nodeInDegree(n)+i.nodeOutDegree(n)},this.source=function(n){return n.v},this.target=function(n){return n.w};var s=F_(F_({},jP),o);this.compound=s.compound,this.directed=s.directed,this.multigraph=s.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return NP(e,[{key:"setNode",value:function(o,s){var n=this.nodesLabelMap,c=this.defaultNodeLabelFn,f=this.isCompound,h=this.parentMap,v=this.childrenMap,b=this.inEdgesMap,g=this.outEdgesMap,O=this.predecessorsMap,x=this.successorsMap;if(n.has(o))return s!==void 0&&n.set(o,s),this;if(n.set(o,s||c(o)),f()){var S;h==null||h.set(o,this.GRAPH_NODE),v==null||v.set(o,new Map),v!=null&&v.has(this.GRAPH_NODE)||v==null||v.set(this.GRAPH_NODE,new Map),v==null||(S=v.get(this.GRAPH_NODE))===null||S===void 0||S.set(o,!0)}return[b,g,O,x].forEach(function(N){return N.set(o,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(o){var s=this;if(this.hasNode(o)){var n=function(R){s.removeEdge(R.v,R.w,R.name)},c=this.inEdgesMap,f=this.outEdgesMap,h=this.predecessorsMap,v=this.successorsMap,b=this.nodesLabelMap;if(this.isCompound()){var g,O,x;this.removeFromParentsChildList(o),(g=this.parentMap)===null||g===void 0||g.delete(o),(O=this.children(o))===null||O===void 0||O.forEach(function(j){return s.setParent(j)}),(x=this.childrenMap)===null||x===void 0||x.delete(o)}var S=c.get(o),N=f.get(o);Array.from(S.values()).forEach(function(j){return n(j)}),Array.from(N.values()).forEach(function(j){return n(j)}),b.delete(o),c.delete(o),f.delete(o),h.delete(o),v.delete(o),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(o,s,n,c){var f,h,v=C_(this.isDirected(),o,s,c),b=Tg(this.isDirected(),v),g=v.v,O=v.w;if(this.edgesLabelsMap.has(b))return this.edgesLabelsMap.set(b,n),this;if(c!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(g),this.setNode(O),this.edgesLabelsMap.set(b,n||this.defaultEdgeLabelFn(g,O,c)),Object.freeze(v),this.edgesMap.set(b,v);var x=this.predecessorsMap.get(O),S=this.successorsMap.get(g);return D_(x,g),D_(S,O),(f=this.inEdgesMap.get(O))===null||f===void 0||f.set(b,v),(h=this.outEdgesMap.get(g))===null||h===void 0||h.set(b,v),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(o,s,n){var c=_O(this.isDirected(),o,s,n),f=this.edgesMap.get(c);if(f){var h=C_(this.isDirected(),o,s,n),v=h.v,b=h.w;this.edgesLabelsMap.delete(c),this.edgesMap.delete(c);var g=this.predecessorsMap.get(b),O=this.successorsMap.get(v);k_(g,v),k_(O,b),this.inEdgesMap.get(b).delete(c),this.outEdgesMap.get(v).delete(c),this.edgeCountNum-=1}return this}}]),e}();Hc.fromJSON=TP;function G_(e,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function MP(e,i,o){return i&&G_(e.prototype,i),o&&G_(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function RP(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var EO=MP(function e(){var i=this;RP(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return i.arr.length},this.keys=function(){return i.arr.map(function(o){return o.key})},this.has=function(o){return i.keyIndice.has(o)},this.priority=function(o){var s=i.keyIndice.get(o);if(s!==void 0)return i.arr[s].priority},this.swap=function(o,s){var n=i.arr,c=i.keyIndice,f=[n[o],n[s]],h=f[0],v=f[1];n[o]=v,n[s]=h,c.set(h.key,s),c.set(v.key,o)},this.innerDecrease=function(o){for(var s=i.arr,n=s[o].priority,c,f=o;f!==0;){var h;if(c=f>>1,((h=s[c])===null||h===void 0?void 0:h.priority)<n)break;i.swap(f,c),f=c}},this.heapify=function(o){var s=i.arr,n=o<<1,c=n+1,f=o;n<s.length&&(f=s[n].priority<s[f].priority?n:f,c<s.length&&(f=s[c].priority<s[f].priority?c:f),f!==o&&(i.swap(o,f),i.heapify(f)))},this.min=function(){if(i.size()===0)throw new Error("Queue underflow");return i.arr[0].key},this.add=function(o,s){var n=i.keyIndice,c=i.arr;if(!n.has(o)){var f=c.length;return n.set(o,f),c.push({key:o,priority:s}),i.innerDecrease(f),!0}return!1},this.removeMin=function(){i.swap(0,i.arr.length-1);var o=i.arr.pop();return i.keyIndice.delete(o.key),i.heapify(0),o.key},this.decrease=function(o,s){if(!i.has(o))throw new Error("There's no key named ".concat(o));var n=i.keyIndice.get(o);if(s>i.arr[n].priority)throw new Error("New priority is greater than current priority.Key: ".concat(o," Old: + ").concat(i.arr[n].priority," New: ").concat(s));i.arr[n].priority=s,i.innerDecrease(n)}}),DP=function(i,o){var s=new Hc,n=new Map,c=new EO,f;function h(g){var O=g.v===f?g.w:g.v,x=c.priority(O);if(x!==void 0){var S=o(g);S<x&&(n.set(O,f),c.decrease(O,S))}}if(i.nodeCount()===0)return s;i.nodes().forEach(function(g){c.add(g,Number.POSITIVE_INFINITY),s.setNode(g)}),c.decrease(i.nodes()[0],0);for(var v=!1;c.size()>0;){var b;if(f=c.removeMin(),n.has(f))s.setEdge(f,n.get(f));else{if(v)throw new Error("Input graph is not connected: "+i.graph());v=!0}(b=i.nodeEdges(f))===null||b===void 0||b.forEach(h)}return s},kP=function(i){var o=new Set,s=[],n=i.nodes();return n.forEach(function(c){for(var f=[],h=[c];h.length>0;){var v=h.pop();if(!o.has(v)){var b,g;o.add(v),f.push(v),(b=i.successors(v))===null||b===void 0||b.forEach(function(O){return h.push(O)}),(g=i.predecessors(v))===null||g===void 0||g.forEach(function(O){return h.push(O)})}}f.length&&s.push(f)}),s},CP=function e(i,o,s,n,c,f){n.includes(o)||(n.push(o),s||f.push(o),c(o).forEach(function(h){return e(i,h,s,n,c,f)}),s&&f.push(o))},dm=function(i,o,s){var n=Array.isArray(o)?o:[o],c=function(b){return i.isDirected()?i.successors(b):i.neighbors(b)},f=[],h=[];return n.forEach(function(v){if(i.hasNode(v))CP(i,v,s==="post",h,c,f);else throw new Error("Graph does not have node: "+v)}),f};function IP(e,i){return GP(e)||BP(e,i)||FP(e,i)||LP()}function LP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FP(e,i){if(e){if(typeof e=="string")return U_(e,i);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return U_(e,i)}}function U_(e,i){(i==null||i>e.length)&&(i=e.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=e[o];return s}function BP(e,i){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var s=[],n=!0,c=!1,f,h;try{for(o=o.call(e);!(n=(f=o.next()).done)&&(s.push(f.value),!(i&&s.length===i));n=!0);}catch(v){c=!0,h=v}finally{try{!n&&o.return!=null&&o.return()}finally{if(c)throw h}}return s}}function GP(e){if(Array.isArray(e))return e}var UP=function(){return 1},OO=function(i,o,s,n){return zP(i,o,s||UP,n||function(c){return i.outEdges(c)})},zP=function(i,o,s,n){var c=new Map,f=new EO,h,v,b=function(x){var S=x.v!==h?x.v:x.w,N=c.get(S),j=s(x),R=v.distance+j;if(j<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+j);R<N.distance&&(N.distance=R,N.predecessor=h,f.decrease(S,R))};for(i.nodes().forEach(function(O){var x=O===o?0:Number.POSITIVE_INFINITY;c.set(O,{distance:x}),f.add(O,x)});f.size()>0&&(h=f.removeMin(),v=c.get(h),!(v&&v.distance===Number.POSITIVE_INFINITY));)n(h).forEach(b);var g={};return Array.from(c.entries()).forEach(function(O){var x=IP(O,2),S=x[0],N=x[1];return g[String(S)]=N,g}),g},HP=function(i,o,s){var n={};return i.nodes().forEach(function(c){return n[String(c)]=OO(i,c,o,s),n}),n},wO=function(i){var o=0,s=[],n=new Map,c=[];function f(h){var v,b={onStack:!0,lowlink:o,index:o};if(n.set(h,b),o+=1,s.push(h),(v=i.successors(h))===null||v===void 0||v.forEach(function(S){var N;if(n.has(S)){if(!((N=n.get(S))===null||N===void 0)&&N.onStack){var R=n.get(S);b.lowlink=Math.min(b.lowlink,R.index)}}else{f(S);var j=n.get(S);b.lowlink=Math.min(b.lowlink,j.lowlink)}}),b.lowlink===b.index){var g=[],O;do{O=s.pop();var x=n.get(O);x.onStack=!1,g.push(O)}while(h!==O);c.push(g)}}return i.nodes().forEach(function(h){n.has(h)||f(h)}),c},XP=function(i){return wO(i).filter(function(o){return o.length>1||o.length===1&&i.hasEdge(o[0],o[0])})};function Wg(e){return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Wg(e)}function z_(e,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function VP(e,i,o){return i&&z_(e.prototype,i),o&&z_(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function WP(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function YP(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&Nf(e,i)}function $P(e){var i=xO();return function(){var s=jf(e),n;if(i){var c=jf(this).constructor;n=Reflect.construct(s,arguments,c)}else n=s.apply(this,arguments);return KP(this,n)}}function KP(e,i){if(i&&(Wg(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qP(e)}function qP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yg(e){var i=typeof Map=="function"?new Map:void 0;return Yg=function(s){if(s===null||!ZP(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i<"u"){if(i.has(s))return i.get(s);i.set(s,n)}function n(){return Vp(s,arguments,jf(this).constructor)}return n.prototype=Object.create(s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Nf(n,s)},Yg(e)}function Vp(e,i,o){return xO()?Vp=Reflect.construct:Vp=function(n,c,f){var h=[null];h.push.apply(h,c);var v=Function.bind.apply(n,h),b=new v;return f&&Nf(b,f.prototype),b},Vp.apply(null,arguments)}function xO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ZP(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Nf(e,i){return Nf=Object.setPrototypeOf||function(s,n){return s.__proto__=n,s},Nf(e,i)}function jf(e){return jf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jf(e)}var $g=function(e){YP(o,e);var i=$P(o);function o(){return WP(this,o),i.apply(this,arguments)}return VP(o)}(Yg(Error));function SO(e){var i=new Set,o=new Set,s=[];function n(c){if(o.has(c))throw new $g;if(!i.has(c)){var f;o.add(c),i.add(c),(f=e.predecessors(c))===null||f===void 0||f.forEach(n),o.delete(c),s.push(c)}}if(e.sinks().forEach(n),i.size!==e.nodeCount())throw new $g;return s}var JP=function(i){try{SO(i)}catch(o){if(o instanceof $g)return!1;throw o}return!0},QP=function(i,o){return dm(i,o,"post")},eN=function(i,o){return dm(i,o,"pre")},tN=function(){return 1};function rN(e,i,o){return nN(e,i||tN,o||function(s){return e.outEdges(s)})}function nN(e,i,o){var s={},n=e.nodes();return n.forEach(function(c){var f=String(c);s[f]={},s[f][f]={distance:0},n.forEach(function(h){c!==h&&(s[f][String(h)]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(h){var v=h.v===c?h.w:h.v,b=i(h);s[f][String(v)]={distance:b,predecessor:c}})}),n.forEach(function(c){var f=String(c),h=s[f];n.forEach(function(v){var b=String(v),g=s[b];n.forEach(function(O){var x=String(O),S=g[f],N=h[x],j=g[x],R=S.distance+N.distance;R<j.distance&&(j.distance=R,j.predecessor=N.predecessor)})})}),s}const oN=Object.freeze(Object.defineProperty({__proto__:null,components:kP,dfs:dm,dijkstra:OO,dijkstraAll:HP,findCycles:XP,floydWarshall:rN,isAcyclic:JP,postorder:QP,preorder:eN,prim:DP,tarjan:wO,topsort:SO},Symbol.toStringTag,{value:"Module"}));class iN extends OP{}class aN extends Hc{}const uN=()=>1,sN=(e,i)=>{var o;if(e.nodeCount()<=1)return[];const s=lN(e,i||uN);return(o=cN(s.graph,s.buckets,s.zeroIdx).map(c=>e.outEdges(c.v,c.w)))===null||o===void 0?void 0:o.flat()},cN=(e,i,o)=>{let s=[];const n=i[i.length-1],c=i[0];let f;for(;e.nodeCount();){for(;f=c.dequeue();)Ag(e,i,o,f);for(;f=n.dequeue();)Ag(e,i,o,f);if(e.nodeCount()){for(let h=i.length-2;h>0;--h)if(f=i[h].dequeue(),f){s=s.concat(Ag(e,i,o,f,!0));break}}}return s},Ag=(e,i,o,s,n)=>{var c,f;const h=[];return(c=e.inEdges(s.v))===null||c===void 0||c.forEach(v=>{const b=e.edge(v),g=e.node(v.v);n&&h.push({v:v.v,w:v.w,in:0,out:0}),g.out===void 0&&(g.out=0),g.out-=b,Kg(i,o,g)}),(f=e.outEdges(s.v))===null||f===void 0||f.forEach(v=>{const b=e.edge(v),g=v.w,O=e.node(g);O.in===void 0&&(O.in=0),O.in-=b,Kg(i,o,O)}),e.removeNode(s.v),n?h:void 0},lN=(e,i)=>{const o=new aN;let s=0,n=0;e.nodes().forEach(v=>{o.setNode(v,{v,in:0,out:0})}),e.edges().forEach(v=>{const b=o.edge(v)||0,g=(i==null?void 0:i(v))||1,O=b+g;o.setEdge(v.v,v.w,O),n=Math.max(n,o.node(v.v).out+=g),s=Math.max(s,o.node(v.w).in+=g)});const c=[],f=n+s+3;for(let v=0;v<f;v++)c.push(new iN);const h=s+1;return o.nodes().forEach(v=>{Kg(c,h,o.node(v))}),{buckets:c,zeroIdx:h,graph:o}},Kg=(e,i,o)=>{o.out?o.in?e[o.out-o.in+i].enqueue(o):e[e.length-1].enqueue(o):e[0].enqueue(o)},fN=e=>{const i=s=>n=>{var c;return((c=s.edge(n))===null||c===void 0?void 0:c.weight)||1},o=e.graph().acyclicer==="greedy"?sN(e,i(e)):dN(e);o==null||o.forEach(s=>{const n=e.edge(s);e.removeEdgeObj(s),n.forwardName=s.name,n.reversed=!0,e.setEdge(s.w,s.v,n,`rev-${Math.random()}`)})},dN=e=>{const i=[],o={},s={},n=c=>{var f;s[c]||(s[c]=!0,o[c]=!0,(f=e.outEdges(c))===null||f===void 0||f.forEach(h=>{o[h.w]?i.push(h):n(h.w)}),delete o[c])};return e.nodes().forEach(n),i},pN=e=>{e.edges().forEach(i=>{const o=e.edge(i);if(o.reversed){e.removeEdgeObj(i);const s=o.forwardName;delete o.reversed,delete o.forwardName,e.setEdge(i.w,i.v,o,s)}})},H_={run:fN,undo:pN};class Ea extends Hc{}const hN=(e,i)=>Number(e)-Number(i),Xc=(e,i,o,s)=>{let n;do n=`${s}${Math.random()}`;while(e.hasNode(n));return o.dummy=i,e.setNode(n,o),n},vN=e=>{const i=new Ea().setGraph(e.graph());return e.nodes().forEach(o=>{i.setNode(o,e.node(o))}),e.edges().forEach(o=>{const s=i.edgeFromArgs(o.v,o.w)||{weight:0,minlen:1},n=e.edge(o);i.setEdge(o.v,o.w,{weight:s.weight+n.weight,minlen:Math.max(s.minlen,n.minlen)})}),i},TO=e=>{const i=new Ea({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(o=>{var s;!((s=e.children(o))===null||s===void 0)&&s.length||i.setNode(o,e.node(o))}),e.edges().forEach(o=>{i.setEdgeObj(o,e.edge(o))}),i},yN=(e,i)=>e==null?void 0:e.reduce((o,s,n)=>(o[s]=i[n],o),{}),X_=(e,i)=>{const o=Number(e.x),s=Number(e.y),n=Number(i.x)-o,c=Number(i.y)-s;let f=Number(e.width)/2,h=Number(e.height)/2;if(!n&&!c)return{x:0,y:0};let v,b;return Math.abs(c)*f>Math.abs(n)*h?(c<0&&(h=-h),v=h*n/c,b=h):(n<0&&(f=-f),v=f,b=f*c/n),{x:o+v,y:s+b}},Mf=e=>{const i=[],o=AO(e)+1;for(let s=0;s<o;s++)i.push([]);e.nodes().forEach(s=>{const n=e.node(s);if(!n)return;const c=n.rank;c!==void 0&&i[c]&&i[c].push(s)});for(let s=0;s<o;s++)i[s]=i[s].sort((n,c)=>{var f,h;return hN((f=e.node(n))===null||f===void 0?void 0:f.order,(h=e.node(c))===null||h===void 0?void 0:h.order)});return i},gN=e=>{const i=e.nodes().filter(s=>{var n;return((n=e.node(s))===null||n===void 0?void 0:n.rank)!==void 0}).map(s=>e.node(s).rank),o=Math.min(...i);e.nodes().forEach(s=>{const n=e.node(s);n.hasOwnProperty("rank")&&o!==1/0&&(n.rank-=o)})},mN=e=>{const i=e.nodes(),o=i.filter(h=>{var v;return((v=e.node(h))===null||v===void 0?void 0:v.rank)!==void 0}).map(h=>e.node(h).rank),s=Math.min(...o),n=[];i.forEach(h=>{var v;const b=(((v=e.node(h))===null||v===void 0?void 0:v.rank)||0)-s;n[b]||(n[b]=[]),n[b].push(h)});let c=0;const f=e.graph().nodeRankFactor||0;for(let h=0;h<n.length;h++){const v=n[h];v===void 0?h%f!==0&&(c-=1):c&&(v==null||v.forEach(b=>{const g=e.node(b);g&&(g.rank=g.rank||0,g.rank+=c)}))}},V_=(e,i,o,s)=>{const n={width:0,height:0};return rh(o)&&rh(s)&&(n.rank=o,n.order=s),Xc(e,"border",n,i)},AO=e=>{let i;return e.nodes().forEach(o=>{var s;const n=(s=e.node(o))===null||s===void 0?void 0:s.rank;n!==void 0&&(i===void 0||n>i)&&(i=n)}),i||(i=0),i},bN=(e,i)=>{const o={lhs:[],rhs:[]};return e==null||e.forEach(s=>{i(s)?o.lhs.push(s):o.rhs.push(s)}),o},PO=(e,i)=>{const o=Date.now();try{return i()}finally{console.log(`${e} time: ${Date.now()-o}ms`)}},NO=(e,i)=>i(),pm=(e,i)=>e.reduce((o,s)=>{const n=i(o),c=i(s);return n>c?s:o}),_N=e=>{e.graph().dummyChains=[],e.edges().forEach(i=>EN(e,i))},EN=(e,i)=>{let o=i.v,s=e.node(o).rank;const n=i.w,c=e.node(n).rank,f=i.name,h=e.edge(i),v=h.labelRank;if(c===s+1)return;e.removeEdgeObj(i);const b=e.graph();let g,O,x;for(x=0,++s;s<c;++x,++s)h.points=[],O={edgeLabel:h,width:0,height:0,edgeObj:i,rank:s},g=Xc(e,"edge",O,"_d"),s===v&&(O.width=h.width,O.height=h.height,O.dummy="edge-label",O.labelpos=h.labelpos),e.setEdge(o,g,{weight:h.weight},f),x===0&&(b.dummyChains||(b.dummyChains=[]),b.dummyChains.push(g)),o=g;e.setEdge(o,n,{weight:h.weight},f)},ON=e=>{var i;(i=e.graph().dummyChains)===null||i===void 0||i.forEach(o=>{let s=e.node(o);const n=s.edgeLabel;let c;s.edgeObj&&e.setEdgeObj(s.edgeObj,n);let f=o;for(;s.dummy;)c=e.successors(f)[0],e.removeNode(f),n.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(n.x=s.x,n.y=s.y,n.width=s.width,n.height=s.height),f=c,s=e.node(f)})},W_={run:_N,undo:ON},jO=e=>{var i;const o={},s=n=>{var c;const f=e.node(n);if(!f)return 0;if(o[n])return f.rank;o[n]=!0;let h;return(c=e.outEdges(n))===null||c===void 0||c.forEach(v=>{const b=s(v.w),g=e.edge(v).minlen,O=b-g;O&&(h===void 0||O<h)&&(h=O)}),h||(h=0),f.rank=h,h};(i=e.sources())===null||i===void 0||i.forEach(n=>s(n))},wN=e=>{var i;const o={};let s;const n=h=>{var v;const b=e.node(h);if(!b)return 0;if(o[h])return b.rank;o[h]=!0;let g;return(v=e.outEdges(h))===null||v===void 0||v.forEach(O=>{const x=n(O.w),S=e.edge(O).minlen,N=x-S;N&&(g===void 0||N<g)&&(g=N)}),g||(g=0),(s===void 0||g<s)&&(s=g),b.rank=g,g};(i=e.sources())===null||i===void 0||i.forEach(h=>{e.node(h)&&n(h)}),s===void 0&&(s=0);const c={},f=(h,v)=>{var b;const g=e.node(h),O=isNaN(g.layer)?v:g.layer;(g.rank===void 0||g.rank<O)&&(g.rank=O),!c[h]&&(c[h]=!0,(b=e.outEdges(h))===null||b===void 0||b.map(x=>{f(x.w,O+e.edge(x).minlen)}))};e.nodes().forEach(h=>{const v=e.node(h);v&&(isNaN(v.layer)?v.rank-=s:f(h,v.layer))})},lu=(e,i)=>e.node(i.w).rank-e.node(i.v).rank-e.edge(i).minlen,xN=e=>{const i=new Ea({directed:!1}),o=e.nodes()[0],s=e.nodeCount();i.setNode(o,{});let n,c;for(;SN(i,e)<s;)n=MO(i,e),c=i.hasNode(n.v)?lu(e,n):-lu(e,n),RO(i,e,c);return i},SN=(e,i)=>{const o=s=>{i.nodeEdges(s).forEach(n=>{const c=n.v,f=s===c?n.w:c;!e.hasNode(f)&&!lu(i,n)&&(e.setNode(f,{}),e.setEdge(s,f,{}),o(f))})};return e.nodes().forEach(o),e.nodeCount()},TN=e=>{const i=new Ea({directed:!1}),o=e.nodes()[0],s=e.nodes().filter(f=>!!e.node(f)).length;i.setNode(o,{});let n,c;for(;AN(i,e)<s;)n=MO(i,e),c=i.hasNode(n.v)?lu(e,n):-lu(e,n),RO(i,e,c);return i},AN=(e,i)=>{const o=s=>{var n;(n=i.nodeEdges(s))===null||n===void 0||n.forEach(c=>{const f=c.v,h=s===f?c.w:f;!e.hasNode(h)&&(i.node(h).layer!==void 0||!lu(i,c))&&(e.setNode(h,{}),e.setEdge(s,h,{}),o(h))})};return e.nodes().forEach(o),e.nodeCount()},MO=(e,i)=>pm(i.edges(),o=>e.hasNode(o.v)!==e.hasNode(o.w)?lu(i,o):1/0),RO=(e,i,o)=>{e.nodes().forEach(s=>{i.node(s).rank||(i.node(s).rank=0),i.node(s).rank+=o})},{preorder:PN,postorder:NN}=oN,jN=e=>{const i=vN(e);jO(i);const o=xN(i);kO(o),DO(o,i);let s,n;for(;s=DN(o);)n=kN(o,i,s),CN(o,i,s,n)},DO=(e,i)=>{let o=NN(e,e.nodes());o=o==null?void 0:o.slice(0,(o==null?void 0:o.length)-1),o==null||o.forEach(s=>{MN(e,i,s)})},MN=(e,i,o)=>{const n=e.node(o).parent;e.edgeFromArgs(o,n).cutvalue=RN(e,i,o)},RN=(e,i,o)=>{var s;const c=e.node(o).parent;let f=!0,h=i.edgeFromArgs(o,c),v=0;return h||(f=!1,h=i.edgeFromArgs(c,o)),v=h.weight,(s=i.nodeEdges(o))===null||s===void 0||s.forEach(b=>{const g=b.v===o,O=g?b.w:b.v;if(O!==c){const x=g===f,S=i.edge(b).weight;if(v+=x?S:-S,LN(e,o,O)){const N=e.edgeFromArgs(o,O).cutvalue;v+=x?-N:N}}}),v},kO=(e,i=e.nodes()[0])=>{CO(e,{},1,i)},CO=(e,i,o,s,n)=>{var c;const f=o;let h=o;const v=e.node(s);return i[s]=!0,(c=e.neighbors(s))===null||c===void 0||c.forEach(b=>{i[b]||(h=CO(e,i,h,b,s))}),v.low=f,v.lim=h++,n?v.parent=n:delete v.parent,h},DN=e=>e.edges().find(i=>e.edge(i).cutvalue<0),kN=(e,i,o)=>{let s=o.v,n=o.w;i.hasEdge(s,n)||(s=o.w,n=o.v);const c=e.node(s),f=e.node(n);let h=c,v=!1;c.lim>f.lim&&(h=f,v=!0);const b=i.edges().filter(g=>v===Y_(e,e.node(g.v),h)&&v!==Y_(e,e.node(g.w),h));return pm(b,g=>lu(i,g))},CN=(e,i,o,s)=>{const n=o.v,c=o.w;e.removeEdge(n,c),e.setEdge(s.v,s.w,{}),kO(e),DO(e,i),IN(e,i)},IN=(e,i)=>{const o=e.nodes().find(n=>{var c;return!(!((c=i.node(n))===null||c===void 0)&&c.parent)});let s=PN(e,o);s=s==null?void 0:s.slice(1),s==null||s.forEach(n=>{const c=e.node(n).parent;let f=i.edgeFromArgs(n,c),h=!1;f||(f=i.edgeFromArgs(c,n),h=!0),i.node(n).rank=i.node(c).rank+(h?f.minlen:-f.minlen)})},LN=(e,i,o)=>e.hasEdge(i,o),Y_=(e,i,o)=>o.low<=i.lim&&i.lim<=o.lim,FN=e=>{switch(e.graph().ranker){case"network-simplex":GN(e);break;case"tight-tree":$_(e);break;case"longest-path":BN(e);break;default:$_(e)}},BN=jO,$_=e=>{wN(e),TN(e)},GN=e=>{jN(e)},UN=e=>{var i;const o={};let s=0;const n=c=>{var f;const h=s;(f=e.children(c))===null||f===void 0||f.forEach(n),o[c]={low:h,lim:s++}};return(i=e.children())===null||i===void 0||i.forEach(n),o},zN=(e,i,o,s)=>{const n=[],c=[],f=Math.min(i[o].low,i[s].low),h=Math.max(i[o].lim,i[s].lim);let v,b;v=o;do v=e.parent(v),n.push(v);while(v&&(i[v].low>f||h>i[v].lim));for(b=v,v=s;v&&v!==b;)c.push(v),v=e.parent(v);return{lca:b,path:n.concat(c.reverse())}},HN=e=>{var i;const o=UN(e);(i=e.graph().dummyChains)===null||i===void 0||i.forEach(s=>{var n,c;let f=s,h=e.node(f);const v=h.edgeObj;if(!v)return;const b=zN(e,o,v.v,v.w),g=b.path,O=b.lca;let x=0,S=g[x],N=!0;for(;f!==v.w;){if(h=e.node(f),N){for(;S!==O&&((n=e.node(S))===null||n===void 0?void 0:n.maxRank)<h.rank;)x++,S=g[x];S===O&&(N=!1)}if(!N){for(;x<g.length-1&&((c=e.node(g[x+1]))===null||c===void 0?void 0:c.minRank)<=h.rank;)x++;S=g[x]}e.setParent(f,S),f=e.successors(f)[0]}})},XN=e=>{var i;const o=Xc(e,"root",{},"_root"),s=VN(e);let n=Math.max(...Object.values(s));Math.abs(n)===1/0&&(n=1);const c=n-1,f=2*c+1;e.graph().nestingRoot=o,e.edges().forEach(v=>{e.edge(v).minlen*=f});const h=WN(e)+1;(i=e.children())===null||i===void 0||i.forEach(v=>{IO(e,o,f,h,c,s,v)}),e.graph().nodeRankFactor=f},IO=(e,i,o,s,n,c,f)=>{const h=e.children(f);if(!(h!=null&&h.length)){f!==i&&e.setEdge(i,f,{weight:0,minlen:o});return}const v=V_(e,"_bt"),b=V_(e,"_bb"),g=e.node(f);e.setParent(v,f),g.borderTop=v,e.setParent(b,f),g.borderBottom=b,h==null||h.forEach(O=>{IO(e,i,o,s,n,c,O);const x=e.node(O),S=x.borderTop?x.borderTop:O,N=x.borderBottom?x.borderBottom:O,j=x.borderTop?s:2*s,R=S!==N?1:n-c[f]+1;e.setEdge(v,S,{minlen:R,weight:j,nestingEdge:!0}),e.setEdge(N,b,{minlen:R,weight:j,nestingEdge:!0})}),e.parent(f)||e.setEdge(i,v,{weight:0,minlen:n+c[f]})},VN=e=>{var i;const o={},s=(n,c)=>{const f=e.children(n);f==null||f.forEach(h=>s(h,c+1)),o[n]=c};return(i=e.children())===null||i===void 0||i.forEach(n=>s(n,1)),o},WN=e=>{let i=0;return e.edges().forEach(o=>{i+=e.edge(o).weight}),i},YN=e=>{const i=e.graph();i.nestingRoot&&e.removeNode(i.nestingRoot),delete i.nestingRoot,e.edges().forEach(o=>{e.edge(o).nestingEdge&&e.removeEdgeObj(o)})},K_={run:XN,cleanup:YN},$N=e=>{var i;const o=s=>{const n=e.children(s),c=e.node(s);if(n!=null&&n.length&&n.forEach(f=>o(f)),c.hasOwnProperty("minRank")){c.borderLeft=[],c.borderRight=[];for(let f=c.minRank,h=c.maxRank+1;f<h;f+=1)q_(e,"borderLeft","_bl",s,c,f),q_(e,"borderRight","_br",s,c,f)}};(i=e.children())===null||i===void 0||i.forEach(s=>o(s))},q_=(e,i,o,s,n,c)=>{const f={rank:c,borderType:i,width:0,height:0},h=n[i][c-1],v=Xc(e,"border",f,o);n[i][c]=v,e.setParent(v,s),h&&e.setEdge(h,v,{weight:1})},KN=e=>{var i;const o=(i=e.graph().rankdir)===null||i===void 0?void 0:i.toLowerCase();(o==="lr"||o==="rl")&&LO(e)},qN=e=>{var i;const o=(i=e.graph().rankdir)===null||i===void 0?void 0:i.toLowerCase();(o==="bt"||o==="rl")&&ZN(e),(o==="lr"||o==="rl")&&(JN(e),LO(e))},LO=e=>{e.nodes().forEach(i=>{Z_(e.node(i))}),e.edges().forEach(i=>{Z_(e.edge(i))})},Z_=e=>{const i=e.width;e.width=e.height,e.height=i},ZN=e=>{e.nodes().forEach(i=>{Pg(e.node(i))}),e.edges().forEach(i=>{var o;const s=e.edge(i);(o=s.points)===null||o===void 0||o.forEach(n=>Pg(n)),s.hasOwnProperty("y")&&Pg(s)})},Pg=e=>{e!=null&&e.y&&(e.y=-e.y)},JN=e=>{e.nodes().forEach(i=>{Ng(e.node(i))}),e.edges().forEach(i=>{var o;const s=e.edge(i);(o=s.points)===null||o===void 0||o.forEach(n=>Ng(n)),s.hasOwnProperty("x")&&Ng(s)})},Ng=e=>{const i=e.x;e.x=e.y,e.y=i},J_={adjust:KN,undo:qN},Q_=e=>{const i={},o=e.nodes().filter(g=>{var O;return!(!((O=e.children(g))===null||O===void 0)&&O.length)}),s=o.map(g=>e.node(g).rank),n=Math.max(...s),c=[];for(let g=0;g<n+1;g++)c.push([]);const f=g=>{var O;if(i.hasOwnProperty(g))return;i[g]=!0;const x=e.node(g);isNaN(x.rank)||c[x.rank].push(g),(O=e.successors(g))===null||O===void 0||O.forEach(S=>f(S))},h=o.sort((g,O)=>e.node(g).rank-e.node(O).rank),b=h.filter(g=>e.node(g).fixorder!==void 0).sort((g,O)=>e.node(g).fixorder-e.node(O).fixorder);return b==null||b.forEach(g=>{isNaN(e.node(g).rank)||c[e.node(g).rank].push(g),i[g]=!0}),h==null||h.forEach(f),c},QN=(e,i,o)=>{const s=yN(o,o.map((g,O)=>O)),c=i.map(g=>{var O;const x=(O=e.outEdges(g))===null||O===void 0?void 0:O.map(S=>({pos:s[S.w]||0,weight:e.edge(S).weight}));return x==null?void 0:x.sort((S,N)=>S.pos-N.pos)}).flat().filter(g=>g!==void 0);let f=1;for(;f<o.length;)f<<=1;const h=2*f-1;f-=1;const v=Array(h).fill(0,0,h);let b=0;return c==null||c.forEach(g=>{if(g){let O=g.pos+f;v[O]+=g.weight;let x=0;for(;O>0;)O%2&&(x+=v[O+1]),O=O-1>>1,v[O]+=g.weight;b+=g.weight*x}}),b},eE=(e,i)=>{let o=0;for(let s=1;s<(i==null?void 0:i.length);s+=1)o+=QN(e,i[s-1],i[s]);return o},ej=(e,i,o)=>{const s=tj(e),n=new Ea({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(c=>e.node(c));return e.nodes().forEach(c=>{var f;const h=e.node(c),v=e.parent(c);(h.rank===i||h.minRank<=i&&i<=h.maxRank)&&(n.setNode(c),n.setParent(c,v||s),(f=e[o](c))===null||f===void 0||f.forEach(b=>{const g=b.v===c?b.w:b.v,O=n.edgeFromArgs(g,c),x=O!==void 0?O.weight:0;n.setEdge(g,c,{weight:e.edge(b).weight+x})}),h.hasOwnProperty("minRank")&&n.setNode(c,{borderLeft:h.borderLeft[i],borderRight:h.borderRight[i]}))}),n},tj=e=>{let i;for(;e.hasNode(i=`_root${Math.random()}`););return i},rj=(e,i,o)=>{const s={};let n;o==null||o.forEach(c=>{let f=e.parent(c),h,v;for(;f;){if(h=e.parent(f),h?(v=s[h],s[h]=f):(v=n,n=f),v&&v!==f){i.setEdge(v,f);return}f=h}})},nj=(e,i)=>i.map(o=>{const s=e.inEdges(o);if(!(s!=null&&s.length))return{v:o};{const n={sum:0,weight:0};return s==null||s.forEach(c=>{const f=e.edge(c),h=e.node(c.v);n.sum+=f.weight*h.order,n.weight+=f.weight}),{v:o,barycenter:n.sum/n.weight,weight:n.weight}}}),oj=(e,i)=>{var o,s,n;const c={};e==null||e.forEach((h,v)=>{c[h.v]={i:v,indegree:0,in:[],out:[],vs:[h.v]};const b=c[h.v];h.barycenter!==void 0&&(b.barycenter=h.barycenter,b.weight=h.weight)}),(o=i.edges())===null||o===void 0||o.forEach(h=>{const v=c[h.v],b=c[h.w];v!==void 0&&b!==void 0&&(b.indegree++,v.out.push(c[h.w]))});const f=(n=(s=Object.values(c)).filter)===null||n===void 0?void 0:n.call(s,h=>!h.indegree);return ij(f)},ij=e=>{var i,o;const s=[],n=v=>b=>{b.merged||(b.barycenter===void 0||v.barycenter===void 0||b.barycenter>=v.barycenter)&&aj(v,b)},c=v=>b=>{b.in.push(v),--b.indegree===0&&e.push(b)};for(;e!=null&&e.length;){const v=e.pop();s.push(v),(i=v.in.reverse())===null||i===void 0||i.forEach(b=>n(v)(b)),(o=v.out)===null||o===void 0||o.forEach(b=>c(v)(b))}const f=s.filter(v=>!v.merged),h=["vs","i","barycenter","weight"];return f.map(v=>{const b={};return h==null||h.forEach(g=>{v[g]!==void 0&&(b[g]=v[g])}),b})},aj=(e,i)=>{var o;let s=0,n=0;e.weight&&(s+=e.barycenter*e.weight,n+=e.weight),i.weight&&(s+=i.barycenter*i.weight,n+=i.weight),e.vs=(o=i.vs)===null||o===void 0?void 0:o.concat(e.vs),e.barycenter=s/n,e.weight=n,e.i=Math.min(i.i,e.i),i.merged=!0},uj=(e,i,o,s)=>{const n=bN(e,x=>{const S=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return s?!S&&x.hasOwnProperty("barycenter"):S||x.hasOwnProperty("barycenter")}),c=n.lhs,f=n.rhs.sort((x,S)=>-x.i- -S.i),h=[];let v=0,b=0,g=0;c==null||c.sort(sj(!!i,!!o)),g=tE(h,f,g),c==null||c.forEach(x=>{var S;g+=(S=x.vs)===null||S===void 0?void 0:S.length,h.push(x.vs),v+=x.barycenter*x.weight,b+=x.weight,g=tE(h,f,g)});const O={vs:h.flat()};return b&&(O.barycenter=v/b,O.weight=b),O},tE=(e,i,o)=>{let s=o,n;for(;i.length&&(n=i[i.length-1]).i<=s;)i.pop(),e==null||e.push(n.vs),s++;return s},sj=(e,i)=>(o,s)=>{if(o.fixorder!==void 0&&s.fixorder!==void 0)return o.fixorder-s.fixorder;if(o.barycenter<s.barycenter)return-1;if(o.barycenter>s.barycenter)return 1;if(i&&o.order!==void 0&&s.order!==void 0){if(o.order<s.order)return-1;if(o.order>s.order)return 1}return e?s.i-o.i:o.i-s.i},FO=(e,i,o,s,n,c)=>{var f,h,v,b;let g=e.children(i);const O=e.node(i),x=O?O.borderLeft:void 0,S=O?O.borderRight:void 0,N={};x&&(g=g==null?void 0:g.filter(z=>z!==x&&z!==S));const j=nj(e,g||[]);j==null||j.forEach(z=>{var Z;if(!((Z=e.children(z.v))===null||Z===void 0)&&Z.length){const fe=FO(e,z.v,o,s,c);N[z.v]=fe,fe.hasOwnProperty("barycenter")&&lj(z,fe)}});const R=oj(j,o);cj(R,N),(f=R.filter(z=>z.vs.length>0))===null||f===void 0||f.forEach(z=>{const Z=e.node(z.vs[0]);Z&&(z.fixorder=Z.fixorder,z.order=Z.order)});const D=uj(R,s,n,c);if(x&&(D.vs=[x,D.vs,S].flat(),!((h=e.predecessors(x))===null||h===void 0)&&h.length)){const z=e.node(((v=e.predecessors(x))===null||v===void 0?void 0:v[0])||""),Z=e.node(((b=e.predecessors(S))===null||b===void 0?void 0:b[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+z.order+Z.order)/(D.weight+2),D.weight+=2}return D},cj=(e,i)=>{e==null||e.forEach(o=>{var s;const n=(s=o.vs)===null||s===void 0?void 0:s.map(c=>i[c]?i[c].vs:c);o.vs=n.flat()})},lj=(e,i)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+i.barycenter*i.weight)/(e.weight+i.weight),e.weight+=i.weight):(e.barycenter=i.barycenter,e.weight=i.weight)},fj=(e,i)=>{const o=AO(e),s=[],n=[];for(let g=1;g<o+1;g++)s.push(g);for(let g=o-1;g>-1;g--)n.push(g);const c=rE(e,s,"inEdges"),f=rE(e,n,"outEdges");let h=Q_(e);jg(e,h);let v=Number.POSITIVE_INFINITY,b;for(let g=0,O=0;O<4;++g,++O){nE(g%2?c:f,g%4>=2,!1,i),h=Mf(e);const x=eE(e,h);x<v&&(O=0,b=nh(h),v=x)}h=Q_(e),jg(e,h);for(let g=0,O=0;O<4;++g,++O){nE(g%2?c:f,g%4>=2,!0,i),h=Mf(e);const x=eE(e,h);x<v&&(O=0,b=nh(h),v=x)}jg(e,b)},rE=(e,i,o)=>i.map(s=>ej(e,s,o)),nE=(e,i,o,s)=>{const n=new Ea;e==null||e.forEach(c=>{var f;const h=c.graph().root,v=FO(c,h,n,i,o,s);for(let b=0;b<((f=v.vs)===null||f===void 0?void 0:f.length);b++){const g=c.node(v.vs[b]);g&&(g.order=b)}rj(c,n,v.vs)})},jg=(e,i)=>{i==null||i.forEach(o=>{o==null||o.forEach((s,n)=>{e.node(s).order=n})})};class dj extends Hc{}const pj=(e,i)=>{const o={},s=(n,c)=>{let f=0,h=0;const v=n.length,b=c==null?void 0:c[(c==null?void 0:c.length)-1];return c==null||c.forEach((g,O)=>{var x;const S=vj(e,g),N=S?e.node(S).order:v;(S||g===b)&&((x=c.slice(h,O+1))===null||x===void 0||x.forEach(j=>{var R;(R=e.predecessors(j))===null||R===void 0||R.forEach(D=>{var z;const Z=e.node(D),fe=Z.order;(fe<f||N<fe)&&!(Z.dummy&&(!((z=e.node(j))===null||z===void 0)&&z.dummy))&&BO(o,D,j)})}),h=O+1,f=N)}),c};return i!=null&&i.length&&i.reduce(s),o},hj=(e,i)=>{const o={};function s(h,v,b,g,O){var x,S;let N;for(let j=v;j<b;j++)N=h[j],!((x=e.node(N))===null||x===void 0)&&x.dummy&&((S=e.predecessors(N))===null||S===void 0||S.forEach(R=>{const D=e.node(R);D.dummy&&(D.order<g||D.order>O)&&BO(o,R,N)}))}function n(h){return JSON.stringify(h.slice(1))}function c(h,v){const b=n(h);v.get(b)||(s(...h),v.set(b,!0))}const f=(h,v)=>{let b=-1,g,O=0;const x=new Map;return v==null||v.forEach((S,N)=>{var j;if(((j=e.node(S))===null||j===void 0?void 0:j.dummy)==="border"){const R=e.predecessors(S)||[];R.length&&(g=e.node(R[0]).order,c([v,O,N,b,g],x),O=N,b=g)}c([v,O,v.length,g,h.length],x)}),v};return i!=null&&i.length&&i.reduce(f),o},vj=(e,i)=>{var o,s;if(!((o=e.node(i))===null||o===void 0)&&o.dummy)return(s=e.predecessors(i))===null||s===void 0?void 0:s.find(n=>e.node(n).dummy)},BO=(e,i,o)=>{let s=i,n=o;if(s>n){const f=s;s=n,n=f}let c=e[s];c||(e[s]=c={}),c[n]=!0},yj=(e,i,o)=>{let s=i,n=o;if(s>n){const c=i;s=n,n=c}return!!e[s]},gj=(e,i,o,s)=>{const n={},c={},f={};return i==null||i.forEach(h=>{h==null||h.forEach((v,b)=>{n[v]=v,c[v]=v,f[v]=b})}),i==null||i.forEach(h=>{let v=-1;h==null||h.forEach(b=>{let g=s(b);if(g.length){g=g.sort((x,S)=>f[x]-f[S]);const O=(g.length-1)/2;for(let x=Math.floor(O),S=Math.ceil(O);x<=S;++x){const N=g[x];c[b]===b&&v<f[N]&&!yj(o,b,N)&&(c[N]=b,c[b]=n[b]=n[N],v=f[N])}}})}),{root:n,align:c}},mj=(e,i,o,s,n)=>{var c;const f={},h=bj(e,i,o,n),v=n?"borderLeft":"borderRight",b=(x,S)=>{let N=h.nodes(),j=N.pop();const R={};for(;j;)R[j]?x(j):(R[j]=!0,N.push(j),N=N.concat(S(j))),j=N.pop()},g=x=>{f[x]=(h.inEdges(x)||[]).reduce((S,N)=>Math.max(S,(f[N.v]||0)+h.edge(N)),0)},O=x=>{const S=(h.outEdges(x)||[]).reduce((j,R)=>Math.min(j,(f[R.w]||0)-h.edge(R)),Number.POSITIVE_INFINITY),N=e.node(x);S!==Number.POSITIVE_INFINITY&&N.borderType!==v&&(f[x]=Math.max(f[x],S))};return b(g,h.predecessors.bind(h)),b(O,h.successors.bind(h)),(c=Object.values(s))===null||c===void 0||c.forEach(x=>{f[x]=f[o[x]]}),f},bj=(e,i,o,s)=>{const n=new dj,c=e.graph(),f=wj(c.nodesep,c.edgesep,s);return i==null||i.forEach(h=>{let v;h==null||h.forEach(b=>{const g=o[b];if(n.setNode(g),v){const O=o[v],x=n.edgeFromArgs(O,g);n.setEdge(O,g,Math.max(f(e,b,v),x||0))}v=b})}),n},_j=(e,i)=>pm(Object.values(i),o=>{var s;let n=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;return(s=Object.keys(o))===null||s===void 0||s.forEach(f=>{const h=o[f],v=xj(e,f)/2;n=Math.max(h+v,n),c=Math.min(h-v,c)}),n-c});function Ej(e,i){const o=Object.values(i),s=Math.min(...o),n=Math.max(...o);["u","d"].forEach(c=>{["l","r"].forEach(f=>{const h=c+f,v=e[h];let b;if(v===i)return;const g=Object.values(v);b=f==="l"?s-Math.min(...g):n-Math.max(...g),b&&(e[h]={},Object.keys(v).forEach(O=>{e[h][O]=v[O]+b}))})})}const Oj=(e,i)=>{const o={};return Object.keys(e.ul).forEach(s=>{if(i)o[s]=e[i.toLowerCase()][s];else{const n=Object.values(e).map(c=>c[s]);o[s]=(n[0]+n[1])/2}}),o},wj=(e,i,o)=>(s,n,c)=>{const f=s.node(n),h=s.node(c);let v=0,b;if(v+=f.width/2,f.hasOwnProperty("labelpos"))switch((f.labelpos||"").toLowerCase()){case"l":b=-f.width/2;break;case"r":b=f.width/2;break}if(b&&(v+=o?b:-b),b=0,v+=(f.dummy?i:e)/2,v+=(h.dummy?i:e)/2,v+=h.width/2,h.labelpos)switch((h.labelpos||"").toLowerCase()){case"l":b=h.width/2;break;case"r":b=-h.width/2;break}return b&&(v+=o?b:-b),b=0,v},xj=(e,i)=>e.node(i).width||0,Sj=e=>{const i=Mf(e),o=e.graph().ranksep;let s=0;i==null||i.forEach(n=>{const c=n.map(h=>e.node(h).height),f=Math.max(...c,0);n==null||n.forEach(h=>{e.node(h).y=s+f/2}),s+=f+o})},Tj=e=>{const i=Mf(e),o=Object.assign(pj(e,i),hj(e,i)),s={};let n=[];["u","d"].forEach(f=>{n=f==="u"?i:Object.values(i).reverse(),["l","r"].forEach(h=>{h==="r"&&(n=n.map(O=>Object.values(O).reverse()));const v=(f==="u"?e.predecessors:e.successors).bind(e),b=gj(e,n,o,v),g=mj(e,n,b.root,b.align,h==="r");h==="r"&&Object.keys(g).forEach(O=>g[O]=-g[O]),s[f+h]=g})});const c=_j(e,s);return c&&Ej(s,c),Oj(s,e.graph().align)},Aj=e=>{var i;const o=TO(e);Sj(o);const s=Tj(o);(i=Object.keys(s))===null||i===void 0||i.forEach(n=>{o.node(n).x=s[n]})},Pj=(e,i)=>{const s=e.nodes().filter(f=>{var h;return!(!((h=e.children(f))===null||h===void 0)&&h.length)}).map(f=>e.node(f).rank),n=Math.max(...s),c=[];for(let f=0;f<n+1;f++)c[f]=[];i==null||i.forEach(f=>{const h=e.node(f);!h||h!=null&&h.dummy||isNaN(h.rank)||(h.fixorder=c[h.rank].length,c[h.rank].push(f))})},Nj=(e,i)=>{const o=i&&i.debugTiming?PO:NO;o("layout",()=>{i&&!i.keepNodeOrder&&i.prevGraph&&o("  inheritOrder",()=>{Mj(e,i.prevGraph)});const s=o("  buildLayoutGraph",()=>Bj(e));i&&i.edgeLabelSpace===!1||o("  makeSpaceForEdgeLabels",()=>{Gj(s)});try{o("  runLayout",()=>{jj(s,o,i)})}catch(n){if(n.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,n);return}throw n}o("  updateInputGraph",()=>{Rj(e,s)})})},jj=(e,i,o)=>{i("    removeSelfEdges",()=>{Kj(e)}),i("    acyclic",()=>{H_.run(e)}),i("    nestingGraph.run",()=>{K_.run(e)}),i("    rank",()=>{FN(TO(e))}),i("    injectEdgeLabelProxies",()=>{Uj(e)}),i("    removeEmptyRanks",()=>{mN(e)}),i("    nestingGraph.cleanup",()=>{K_.cleanup(e)}),i("    normalizeRanks",()=>{gN(e)}),i("    assignRankMinMax",()=>{zj(e)}),i("    removeEdgeLabelProxies",()=>{Hj(e)}),i("    normalize.run",()=>{W_.run(e)}),i("    parentDummyChains",()=>{HN(e)}),i("    addBorderSegments",()=>{$N(e)}),o&&o.keepNodeOrder&&i("    initDataOrder",()=>{Pj(e,o.nodeOrder)}),i("    order",()=>{fj(e,o==null?void 0:o.keepNodeOrder)}),i("    insertSelfEdges",()=>{qj(e)}),i("    adjustCoordinateSystem",()=>{J_.adjust(e)}),i("    position",()=>{Aj(e)}),i("    positionSelfEdges",()=>{Zj(e)}),i("    removeBorderNodes",()=>{$j(e)}),i("    normalize.undo",()=>{W_.undo(e)}),i("    fixupEdgeLabelCoords",()=>{Wj(e)}),i("    undoCoordinateSystem",()=>{J_.undo(e)}),i("    translateGraph",()=>{Xj(e)}),i("    assignNodeIntersects",()=>{Vj(e)}),i("    reversePoints",()=>{Yj(e)}),i("    acyclic.undo",()=>{H_.undo(e)})},Mj=(e,i)=>{e.nodes().forEach(o=>{const s=e.node(o),n=i.node(o);n!==void 0?(s.fixorder=n._order,delete n._order):delete s.fixorder})},Rj=(e,i)=>{e.nodes().forEach(o=>{var s;const n=e.node(o);if(n){const c=i.node(o);n.x=c.x,n.y=c.y,n._order=c.order,n._rank=c.rank,!((s=i.children(o))===null||s===void 0)&&s.length&&(n.width=c.width,n.height=c.height)}}),e.edges().forEach(o=>{const s=e.edge(o),n=i.edge(o);s.points=n?n.points:[],n&&n.hasOwnProperty("x")&&(s.x=n.x,s.y=n.y)}),e.graph().width=i.graph().width,e.graph().height=i.graph().height},Dj=["nodesep","edgesep","ranksep","marginx","marginy"],kj={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Mg=["acyclicer","ranker","rankdir","align"],Cj=["width","height","layer","fixorder"],Ij={width:0,height:0},Lj=["minlen","weight","width","height","labeloffset"],Fj={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Rg=["labelpos"],Bj=e=>{const i=new Ea({multigraph:!0,compound:!0}),o=kg(e.graph()),s={};return Mg==null||Mg.forEach(n=>{o[n]!==void 0&&(s[n]=o[n])}),i.setGraph(Object.assign({},kj,Dg(o,Dj),s)),e.nodes().forEach(n=>{const c=kg(e.node(n)),f=Object.assign(Object.assign({},Ij),c),h=Dg(f,Cj);i.setNode(n,h),i.setParent(n,e.parent(n))}),e.edges().forEach(n=>{const c=kg(e.edge(n)),f={};Rg==null||Rg.forEach(h=>{c[h]!==void 0&&(f[h]=c[h])}),i.setEdgeObj(n,Object.assign({},Fj,Dg(c,Lj),f))}),i},Gj=e=>{const i=e.graph();i.ranksep||(i.ranksep=0),i.ranksep/=2,e.nodes().forEach(o=>{const s=e.node(o);isNaN(s.layer)||s.layer||(s.layer=0)}),e.edges().forEach(o=>{var s;const n=e.edge(o);n.minlen*=2,((s=n.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(i.rankdir==="TB"||i.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})},Uj=e=>{e.edges().forEach(i=>{const o=e.edge(i);if(o.width&&o.height){const s=e.node(i.v),n=e.node(i.w),c={e:i,rank:(n.rank-s.rank)/2+s.rank};Xc(e,"edge-proxy",c,"_ep")}})},zj=e=>{let i=0;e.nodes().forEach(o=>{var s,n;const c=e.node(o);c.borderTop&&(c.minRank=(s=e.node(c.borderTop))===null||s===void 0?void 0:s.rank,c.maxRank=(n=e.node(c.borderBottom))===null||n===void 0?void 0:n.rank,i=Math.max(i,c.maxRank||-1/0))}),e.graph().maxRank=i},Hj=e=>{e.nodes().forEach(i=>{const o=e.node(i);o.dummy==="edge-proxy"&&(e.edge(o.e).labelRank=o.rank,e.removeNode(i))})},Xj=e=>{let i,o=0,s,n=0;const c=e.graph(),f=c.marginx||0,h=c.marginy||0,v=b=>{if(!b)return;const g=b.x,O=b.y,x=b.width,S=b.height;!isNaN(g)&&!isNaN(x)&&(i===void 0&&(i=g-x/2),i=Math.min(i,g-x/2),o=Math.max(o,g+x/2)),!isNaN(O)&&!isNaN(S)&&(s===void 0&&(s=O-S/2),s=Math.min(s,O-S/2),n=Math.max(n,O+S/2))};e.nodes().forEach(b=>{v(e.node(b))}),e.edges().forEach(b=>{const g=e.edge(b);g!=null&&g.hasOwnProperty("x")&&v(g)}),i-=f,s-=h,e.nodes().forEach(b=>{const g=e.node(b);g&&(g.x-=i,g.y-=s)}),e.edges().forEach(b=>{var g;const O=e.edge(b);(g=O.points)===null||g===void 0||g.forEach(x=>{x.x-=i,x.y-=s}),O.hasOwnProperty("x")&&(O.x-=i),O.hasOwnProperty("y")&&(O.y-=s)}),c.width=o-i+f,c.height=n-s+h},Vj=e=>{e.edges().forEach(i=>{const o=e.edge(i),s=e.node(i.v),n=e.node(i.w);let c,f;o.points?(c=o.points[0],f=o.points[o.points.length-1]):(o.points=[],c=n,f=s),o.points.unshift(X_(s,c)),o.points.push(X_(n,f))})},Wj=e=>{e.edges().forEach(i=>{const o=e.edge(i);if(o!=null&&o.hasOwnProperty("x"))switch((o.labelpos==="l"||o.labelpos==="r")&&(o.width-=o.labeloffset),o.labelpos){case"l":o.x-=o.width/2+o.labeloffset;break;case"r":o.x+=o.width/2+o.labeloffset;break}})},Yj=e=>{e.edges().forEach(i=>{var o;const s=e.edge(i);s.reversed&&((o=s.points)===null||o===void 0||o.reverse())})},$j=e=>{e.nodes().forEach(i=>{var o,s,n;if(!((o=e.children(i))===null||o===void 0)&&o.length){const c=e.node(i),f=e.node(c.borderTop),h=e.node(c.borderBottom),v=e.node(c.borderLeft[((s=c.borderLeft)===null||s===void 0?void 0:s.length)-1]),b=e.node(c.borderRight[((n=c.borderRight)===null||n===void 0?void 0:n.length)-1]);c.width=Math.abs((b==null?void 0:b.x)-(v==null?void 0:v.x))||10,c.height=Math.abs((h==null?void 0:h.y)-(f==null?void 0:f.y))||10,c.x=((v==null?void 0:v.x)||0)+c.width/2,c.y=((f==null?void 0:f.y)||0)+c.height/2}}),e.nodes().forEach(i=>{var o;((o=e.node(i))===null||o===void 0?void 0:o.dummy)==="border"&&e.removeNode(i)})},Kj=e=>{e.edges().forEach(i=>{if(i.v===i.w){const o=e.node(i.v);o.selfEdges||(o.selfEdges=[]),o.selfEdges.push({e:i,label:e.edge(i)}),e.removeEdgeObj(i)}})},qj=e=>{const i=Mf(e);i==null||i.forEach(o=>{let s=0;o==null||o.forEach((n,c)=>{var f;const h=e.node(n);h.order=c+s,(f=h.selfEdges)===null||f===void 0||f.forEach(v=>{Xc(e,"selfedge",{width:v.label.width,height:v.label.height,rank:h.rank,order:c+ ++s,e:v.e,label:v.label},"_se")}),delete h.selfEdges})})},Zj=e=>{e.nodes().forEach(i=>{const o=e.node(i);if(o.dummy==="selfedge"){const s=e.node(o.e.v),n=s.x+s.width/2,c=s.y,f=o.x-n,h=s.height/2;e.setEdgeObj(o.e,o.label),e.removeNode(i),o.label.points=[{x:n+2*f/3,y:c-h},{x:n+5*f/6,y:c-h},{y:c,x:n+f},{x:n+5*f/6,y:c+h},{x:n+2*f/3,y:c+h}],o.label.x=o.x,o.label.y=o.y}})},Dg=(e,i)=>{const o={};return i==null||i.forEach(s=>{e[s]!==void 0&&(o[s]=+e[s])}),o},kg=(e={})=>{const i={};return Object.keys(e).forEach(o=>{i[o.toLowerCase()]=e[o]}),i},Jj={layout:Nj,util:{time:PO,notime:NO}};class Qj extends bP{constructor(i){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=o=>{const s=this,{nodes:n}=s,c=n.find(f=>f.id===o);return c?c.layout!==!1:!0},this.updateCfg(i)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var i,o,s,n;const c=this,{nodes:f,nodeSize:h,rankdir:v,combos:b,begin:g,radial:O,comboEdges:x=[],vedges:S=[]}=c;if(!f)return;const N=c.edges||[],j=new Ea({multigraph:!0,compound:!0});c.nodeMap={};const R={};f.forEach(L=>{c.nodeMap[L.id]=L,L.comboId&&(R[L.comboId]=R[L.comboId]||[],R[L.comboId].push(L.id))});let D=[];const z={};!((i=c.nodeOrder)===null||i===void 0)&&i.length?(c.nodeOrder.forEach(L=>{z[L]=!0,D.push(c.nodeMap[L])}),f.forEach(L=>{z[L.id]||D.push(L)})):D=f;let Z;h?j_(h)?Z=()=>h:Z=()=>[h,h]:Z=L=>L.size?j_(L.size)?L.size:bO(L.size)?[L.size.width||40,L.size.height||40]:[L.size,L.size]:[40,40];const fe=M_(c.ranksep,50,c.ranksepFunc),se=M_(c.nodesep,50,c.nodesepFunc);let oe=se,pe=fe;(v==="LR"||v==="RL")&&(oe=fe,pe=se),j.setDefaultEdgeLabel(()=>({})),j.setGraph(c);const K={};this.sortByCombo&&b&&b.forEach(L=>{if(K[L.id]=L,L.collapsed){const he=Z(L),Ce=pe(L),ee=oe(L),ce=he[0]+2*ee,ye=he[1]+2*Ce;j.setNode(L.id,{width:ce,height:ye})}L.parentId&&(K[L.parentId]||j.setNode(L.parentId,{}),j.setParent(L.id,L.parentId))}),D.filter(L=>L.layout!==!1).forEach(L=>{const he=Z(L),Ce=pe(L),ee=oe(L),ce=he[0]+2*ee,ye=he[1]+2*Ce,_e=L.layer;rh(_e)?j.setNode(L.id,{width:ce,height:ye,layer:_e}):j.setNode(L.id,{width:ce,height:ye}),this.sortByCombo&&L.comboId&&(K[L.comboId]||(K[L.comboId]={id:L.comboId},j.setNode(L.comboId,{})),j.setParent(L.id,L.comboId))}),N.forEach(L=>{const he=Ac(L,"source"),Ce=Ac(L,"target");this.layoutNode(he)&&this.layoutNode(Ce)&&j.setEdge(he,Ce,{weight:L.weight||1})}),(o=x==null?void 0:x.concat(S||[]))===null||o===void 0||o.forEach(L=>{var he,Ce;const{source:ee,target:ce}=L,ye=!((he=K[ee])===null||he===void 0)&&he.collapsed?[ee]:R[ee]||[ee],_e=!((Ce=K[ce])===null||Ce===void 0)&&Ce.collapsed?[ce]:R[ce]||[ce];ye.forEach(ie=>{_e.forEach(ge=>{j.setEdge(ie,ge,{weight:L.weight||1})})})});let U;!((s=c.preset)===null||s===void 0)&&s.nodes&&(U=new Ea({multigraph:!0,compound:!0}),c.preset.nodes.forEach(L=>{U==null||U.setNode(L.id,L)})),Jj.layout(j,{prevGraph:U,edgeLabelSpace:c.edgeLabelSpace,keepNodeOrder:!!c.nodeOrder,nodeOrder:c.nodeOrder});const Y=[0,0];if(g){let L=1/0,he=1/0;j.nodes().forEach(Ce=>{const ee=j.node(Ce);L>ee.x&&(L=ee.x),he>ee.y&&(he=ee.y)}),j.edges().forEach(Ce=>{var ee;(ee=j.edge(Ce).points)===null||ee===void 0||ee.forEach(ye=>{L>ye.x&&(L=ye.x),he>ye.y&&(he=ye.y)})}),Y[0]=g[0]-L,Y[1]=g[1]-he}const W=v==="LR"||v==="RL";if(O){const{focusNode:L,ranksep:he,getRadialPos:Ce}=this,ee=_P(L)?L:L==null?void 0:L.id,ce=ee?(n=j.node(ee))===null||n===void 0?void 0:n._rank:0,ye=[],_e=W?"y":"x",ie=W?"height":"width";let ge=1/0,Be=-1/0;j.nodes().forEach(re=>{const be=j.node(re);if(!c.nodeMap[re])return;const qe=se(c.nodeMap[re]);if(ce===0)ye[be._rank]||(ye[be._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ye[be._rank].nodes.push(re),ye[be._rank].totalWidth+=qe*2+be[ie],ye[be._rank].maxSize<Math.max(be.width,be.height)&&(ye[be._rank].maxSize=Math.max(be.width,be.height));else{const Dt=be._rank-ce;if(Dt===0)ye[Dt]||(ye[Dt]={nodes:[],totalWidth:0,maxSize:-1/0}),ye[Dt].nodes.push(re),ye[Dt].totalWidth+=qe*2+be[ie],ye[Dt].maxSize<Math.max(be.width,be.height)&&(ye[Dt].maxSize=Math.max(be.width,be.height));else{const zt=Math.abs(Dt);ye[zt]||(ye[zt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ye[zt].totalWidth+=qe*2+be[ie],ye[zt].maxSize<Math.max(be.width,be.height)&&(ye[zt].maxSize=Math.max(be.width,be.height)),Dt<0?ye[zt].left.push(re):ye[zt].right.push(re)}}const yt=be[_e]-be[ie]/2-qe,et=be[_e]+be[ie]/2+qe;yt<ge&&(ge=yt),et>Be&&(Be=et)});let Qe=he||50;const mt={},Bt=(Be-ge)/.9,bt=[(ge+Be-Bt)*.5,(ge+Be+Bt)*.5],xt=(re,be,qe=-1/0,yt=[0,1])=>{let et=qe;return re.forEach(Dt=>{const zt=j.node(Dt);mt[Dt]=be;const{x:Zt,y:Gt}=Ce(zt[_e],bt,Bt,be,yt);if(!c.nodeMap[Dt])return;c.nodeMap[Dt].x=Zt+Y[0],c.nodeMap[Dt].y=Gt+Y[1],c.nodeMap[Dt]._order=zt._order;const ze=fe(c.nodeMap[Dt]);et<ze&&(et=ze)}),et};let tr=!0;const Oe=0;ye.forEach(re=>{var be,qe,yt,et,Dt,zt,Zt;if(!(!((be=re==null?void 0:re.nodes)===null||be===void 0)&&be.length)&&!(!((qe=re==null?void 0:re.left)===null||qe===void 0)&&qe.length)&&!(!((yt=re==null?void 0:re.right)===null||yt===void 0)&&yt.length))return;if(tr&&re.nodes.length===1){const ze=re.nodes[0];if(!c.nodeMap[ze])return;c.nodeMap[ze].x=Y[0],c.nodeMap[ze].y=Y[1],mt[re.nodes[0]]=0,Qe=fe(c.nodeMap[ze]),tr=!1;return}Qe=Math.max(Qe,re.totalWidth/(2*Math.PI));let Gt=-1/0;if(ce===0||!((et=re.nodes)===null||et===void 0)&&et.length)Gt=xt(re.nodes,Qe,Gt,[0,1]);else{const ze=((Dt=re.left)===null||Dt===void 0?void 0:Dt.length)/(((zt=re.left)===null||zt===void 0?void 0:zt.length)+((Zt=re.right)===null||Zt===void 0?void 0:Zt.length));Gt=xt(re.left,Qe,Gt,[0,ze]),Gt=xt(re.right,Qe,Gt,[ze+.05,1])}Qe+=Gt,tr=!1,Oe-re.maxSize}),j.edges().forEach(re=>{var be,qe,yt;const et=j.edge(re),Dt=N.findIndex(zt=>{const Zt=Ac(zt,"source"),Gt=Ac(zt,"target");return Zt===re.v&&Gt===re.w});if(!(Dt<=-1)&&c.edgeLabelSpace&&c.controlPoints&&N[Dt].type!=="loop"){const zt=_e==="x"?"y":"x",Zt=(be=et==null?void 0:et.points)===null||be===void 0?void 0:be.slice(1,et.points.length-1),Gt=[],ze=(qe=j.node(re.v))===null||qe===void 0?void 0:qe[zt],Yt=ze-((yt=j.node(re.w))===null||yt===void 0?void 0:yt[zt]),xe=mt[re.v],Ht=xe-mt[re.w];Zt==null||Zt.forEach(yr=>{const B=(yr[zt]-ze)/Yt*Ht+xe,pr=Ce(yr[_e],bt,Bt,B);Gt.push({x:pr.x+Y[0],y:pr.y+Y[1]})}),N[Dt].controlPoints=Gt}})}else{const L=new Set,Ce=v==="BT"||v==="RL"?(_e,ie)=>ie-_e:(_e,ie)=>_e-ie;j.nodes().forEach(_e=>{const ie=j.node(_e);if(!ie)return;let ge=this.nodeMap[_e];ge||(ge=b==null?void 0:b.find(Be=>Be.id===_e)),ge&&(ge.x=ie.x+Y[0],ge.y=ie.y+Y[1],ge._order=ie._order,L.add(W?ge.x:ge.y))});const ee=Array.from(L).sort(Ce),ce=W?(_e,ie)=>_e.x!==ie.x:(_e,ie)=>_e.y!==ie.y,ye=W?(_e,ie,ge)=>{const Be=Math.max(ie.y,ge.y),Qe=Math.min(ie.y,ge.y);return _e.filter(mt=>mt.y<=Be&&mt.y>=Qe)}:(_e,ie,ge)=>{const Be=Math.max(ie.x,ge.x),Qe=Math.min(ie.x,ge.x);return _e.filter(mt=>mt.x<=Be&&mt.x>=Qe)};j.edges().forEach(_e=>{var ie;const ge=j.edge(_e),Be=N.findIndex(Qe=>{const mt=Ac(Qe,"source"),Bt=Ac(Qe,"target");return mt===_e.v&&Bt===_e.w});if(!(Be<=-1)&&c.edgeLabelSpace&&c.controlPoints&&N[Be].type!=="loop"){(ie=ge==null?void 0:ge.points)===null||ie===void 0||ie.forEach(Bt=>{Bt.x+=Y[0],Bt.y+=Y[1]});const Qe=c.nodeMap[_e.v],mt=c.nodeMap[_e.w];N[Be].controlPoints=eM(ge==null?void 0:ge.points,Qe,mt,ee,W,ce,ye)}})}return c.onLayoutEnd&&c.onLayoutEnd(),{nodes:f,edges:N}}getRadialPos(i,o,s,n,c=[0,1]){let f=(i-o[0])/s;f=f*(c[1]-c[0])+c[0];const h=f*2*Math.PI;return{x:Math.cos(h)*n,y:Math.sin(h)*n}}getType(){return"dagre"}}const eM=(e,i,o,s,n,c,f)=>{let h=(e==null?void 0:e.slice(1,e.length-1))||[];if(i&&o){let{x:v,y:b}=i,{x:g,y:O}=o;if(n&&(v=i.y,b=i.x,g=o.y,O=o.x),O!==b&&v!==g){const x=s.indexOf(b),S=s[x+1];if(S){const R=h[0],D=n?{x:(b+S)/2,y:(R==null?void 0:R.y)||g}:{x:(R==null?void 0:R.x)||g,y:(b+S)/2};(!R||c(R,D))&&h.unshift(D)}const N=s.indexOf(O),j=Math.abs(N-x);if(j===1)h=f(h,i,o),h.length||h.push(n?{x:(b+O)/2,y:v}:{x:v,y:(b+O)/2});else if(j>1){const R=s[N-1];if(R){const D=h[h.length-1],z=n?{x:(O+R)/2,y:(D==null?void 0:D.y)||g}:{x:(D==null?void 0:D.x)||v,y:(O+R)/2};(!D||c(D,z))&&h.push(z)}}}}return h};var oE,iE,aE,uE;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(oE||(oE={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(iE||(iE={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(aE||(aE={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(uE||(uE={}));var Fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hm(e,i){return e(i={exports:{}},i.exports),i.exports}var tM=function(){this.__data__=[],this.size=0},Vc=function(e,i){return e===i||e!=e&&i!=i},hh=function(e,i){for(var o=e.length;o--;)if(Vc(e[o][0],i))return o;return-1},rM=Array.prototype.splice,nM=function(e){var i=this.__data__,o=hh(i,e);return!(o<0)&&(o==i.length-1?i.pop():rM.call(i,o,1),--this.size,!0)},oM=function(e){var i=this.__data__,o=hh(i,e);return o<0?void 0:i[o][1]},iM=function(e){return hh(this.__data__,e)>-1},aM=function(e,i){var o=this.__data__,s=hh(o,e);return s<0?(++this.size,o.push([e,i])):o[s][1]=i,this};function Pc(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var s=e[i];this.set(s[0],s[1])}}Pc.prototype.clear=tM,Pc.prototype.delete=nM,Pc.prototype.get=oM,Pc.prototype.has=iM,Pc.prototype.set=aM;var vh=Pc,uM=function(){this.__data__=new vh,this.size=0},sM=function(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o},cM=function(e){return this.__data__.get(e)},lM=function(e){return this.__data__.has(e)},GO=typeof Fp=="object"&&Fp&&Fp.Object===Object&&Fp,fM=typeof self=="object"&&self&&self.Object===Object&&self,mi=GO||fM||Function("return this")(),ii=mi.Symbol,UO=Object.prototype,dM=UO.hasOwnProperty,pM=UO.toString,vf=ii?ii.toStringTag:void 0,hM=function(e){var i=dM.call(e,vf),o=e[vf];try{e[vf]=void 0;var s=!0}catch{}var n=pM.call(e);return s&&(i?e[vf]=o:delete e[vf]),n},vM=Object.prototype.toString,yM=function(e){return vM.call(e)},sE=ii?ii.toStringTag:void 0,du=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":sE&&sE in Object(e)?hM(e):yM(e)},Do=function(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")},cE,If=function(e){if(!Do(e))return!1;var i=du(e);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},Cg=mi["__core-js_shared__"],lE=(cE=/[^.]+$/.exec(Cg&&Cg.keys&&Cg.keys.IE_PROTO||""))?"Symbol(src)_1."+cE:"",gM=function(e){return!!lE&&lE in e},mM=Function.prototype.toString,ls=function(e){if(e!=null){try{return mM.call(e)}catch{}try{return e+""}catch{}}return""},bM=/^\[object .+?Constructor\]$/,_M=Function.prototype,EM=Object.prototype,OM=_M.toString,wM=EM.hasOwnProperty,xM=RegExp("^"+OM.call(wM).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),SM=function(e){return!(!Do(e)||gM(e))&&(If(e)?xM:bM).test(ls(e))},TM=function(e,i){return e==null?void 0:e[i]},fs=function(e,i){var o=TM(e,i);return SM(o)?o:void 0},Rf=fs(mi,"Map"),Df=fs(Object,"create"),AM=function(){this.__data__=Df?Df(null):{},this.size=0},PM=function(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i},NM=Object.prototype.hasOwnProperty,jM=function(e){var i=this.__data__;if(Df){var o=i[e];return o==="__lodash_hash_undefined__"?void 0:o}return NM.call(i,e)?i[e]:void 0},MM=Object.prototype.hasOwnProperty,RM=function(e){var i=this.__data__;return Df?i[e]!==void 0:MM.call(i,e)},DM=function(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Df&&i===void 0?"__lodash_hash_undefined__":i,this};function Nc(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var s=e[i];this.set(s[0],s[1])}}Nc.prototype.clear=AM,Nc.prototype.delete=PM,Nc.prototype.get=jM,Nc.prototype.has=RM,Nc.prototype.set=DM;var fE=Nc,kM=function(){this.size=0,this.__data__={hash:new fE,map:new(Rf||vh),string:new fE}},CM=function(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null},yh=function(e,i){var o=e.__data__;return CM(i)?o[typeof i=="string"?"string":"hash"]:o.map},IM=function(e){var i=yh(this,e).delete(e);return this.size-=i?1:0,i},LM=function(e){return yh(this,e).get(e)},FM=function(e){return yh(this,e).has(e)},BM=function(e,i){var o=yh(this,e),s=o.size;return o.set(e,i),this.size+=o.size==s?0:1,this};function jc(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var s=e[i];this.set(s[0],s[1])}}jc.prototype.clear=kM,jc.prototype.delete=IM,jc.prototype.get=LM,jc.prototype.has=FM,jc.prototype.set=BM;var gh=jc,GM=function(e,i){var o=this.__data__;if(o instanceof vh){var s=o.__data__;if(!Rf||s.length<199)return s.push([e,i]),this.size=++o.size,this;o=this.__data__=new gh(s)}return o.set(e,i),this.size=o.size,this};function Mc(e){var i=this.__data__=new vh(e);this.size=i.size}Mc.prototype.clear=uM,Mc.prototype.delete=sM,Mc.prototype.get=cM,Mc.prototype.has=lM,Mc.prototype.set=GM;var Lc=Mc,vm=function(e,i){for(var o=-1,s=e==null?0:e.length;++o<s&&i(e[o],o,e)!==!1;);return e},oh=function(){try{var e=fs(Object,"defineProperty");return e({},"",{}),e}catch{}}(),mh=function(e,i,o){i=="__proto__"&&oh?oh(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o},UM=Object.prototype.hasOwnProperty,bh=function(e,i,o){var s=e[i];UM.call(e,i)&&Vc(s,o)&&(o!==void 0||i in e)||mh(e,i,o)},Lf=function(e,i,o,s){var n=!o;o||(o={});for(var c=-1,f=i.length;++c<f;){var h=i[c],v=s?s(o[h],e[h],h,o,e):void 0;v===void 0&&(v=e[h]),n?mh(o,h,v):bh(o,h,v)}return o},zM=function(e,i){for(var o=-1,s=Array(e);++o<e;)s[o]=i(o);return s},gi=function(e){return e!=null&&typeof e=="object"},dE=function(e){return gi(e)&&du(e)=="[object Arguments]"},zO=Object.prototype,HM=zO.hasOwnProperty,XM=zO.propertyIsEnumerable,Uc=dE(function(){return arguments}())?dE:function(e){return gi(e)&&HM.call(e,"callee")&&!XM.call(e,"callee")},Tn=Array.isArray,VM=function(){return!1},us=hm(function(e,i){var o=i&&!i.nodeType&&i,s=o&&e&&!e.nodeType&&e,n=s&&s.exports===o?mi.Buffer:void 0,c=(n?n.isBuffer:void 0)||VM;e.exports=c}),WM=/^(?:0|[1-9]\d*)$/,_h=function(e,i){var o=typeof e;return!!(i=i??9007199254740991)&&(o=="number"||o!="symbol"&&WM.test(e))&&e>-1&&e%1==0&&e<i},ym=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},fn={};fn["[object Float32Array]"]=fn["[object Float64Array]"]=fn["[object Int8Array]"]=fn["[object Int16Array]"]=fn["[object Int32Array]"]=fn["[object Uint8Array]"]=fn["[object Uint8ClampedArray]"]=fn["[object Uint16Array]"]=fn["[object Uint32Array]"]=!0,fn["[object Arguments]"]=fn["[object Array]"]=fn["[object ArrayBuffer]"]=fn["[object Boolean]"]=fn["[object DataView]"]=fn["[object Date]"]=fn["[object Error]"]=fn["[object Function]"]=fn["[object Map]"]=fn["[object Number]"]=fn["[object Object]"]=fn["[object RegExp]"]=fn["[object Set]"]=fn["[object String]"]=fn["[object WeakMap]"]=!1;var YM=function(e){return gi(e)&&ym(e.length)&&!!fn[du(e)]},Eh=function(e){return function(i){return e(i)}},zc=hm(function(e,i){var o=i&&!i.nodeType&&i,s=o&&e&&!e.nodeType&&e,n=s&&s.exports===o&&GO.process,c=function(){try{var f=s&&s.require&&s.require("util").types;return f||n&&n.binding&&n.binding("util")}catch{}}();e.exports=c}),pE=zc&&zc.isTypedArray,Ff=pE?Eh(pE):YM,$M=Object.prototype.hasOwnProperty,HO=function(e,i){var o=Tn(e),s=!o&&Uc(e),n=!o&&!s&&us(e),c=!o&&!s&&!n&&Ff(e),f=o||s||n||c,h=f?zM(e.length,String):[],v=h.length;for(var b in e)!i&&!$M.call(e,b)||f&&(b=="length"||n&&(b=="offset"||b=="parent")||c&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||_h(b,v))||h.push(b);return h},KM=Object.prototype,Oh=function(e){var i=e&&e.constructor;return e===(typeof i=="function"&&i.prototype||KM)},XO=function(e,i){return function(o){return e(i(o))}},qM=XO(Object.keys,Object),ZM=Object.prototype.hasOwnProperty,gm=function(e){if(!Oh(e))return qM(e);var i=[];for(var o in Object(e))ZM.call(e,o)&&o!="constructor"&&i.push(o);return i},Oa=function(e){return e!=null&&ym(e.length)&&!If(e)},pu=function(e){return Oa(e)?HO(e):gm(e)},JM=function(e,i){return e&&Lf(i,pu(i),e)},QM=function(e){var i=[];if(e!=null)for(var o in Object(e))i.push(o);return i},eR=Object.prototype.hasOwnProperty,tR=function(e){if(!Do(e))return QM(e);var i=Oh(e),o=[];for(var s in e)(s!="constructor"||!i&&eR.call(e,s))&&o.push(s);return o},ds=function(e){return Oa(e)?HO(e,!0):tR(e)},rR=function(e,i){return e&&Lf(i,ds(i),e)},VO=hm(function(e,i){var o=i&&!i.nodeType&&i,s=o&&e&&!e.nodeType&&e,n=s&&s.exports===o?mi.Buffer:void 0,c=n?n.allocUnsafe:void 0;e.exports=function(f,h){if(h)return f.slice();var v=f.length,b=c?c(v):new f.constructor(v);return f.copy(b),b}}),WO=function(e,i){var o=-1,s=e.length;for(i||(i=Array(s));++o<s;)i[o]=e[o];return i},YO=function(e,i){for(var o=-1,s=e==null?0:e.length,n=0,c=[];++o<s;){var f=e[o];i(f,o,e)&&(c[n++]=f)}return c},$O=function(){return[]},nR=Object.prototype.propertyIsEnumerable,hE=Object.getOwnPropertySymbols,mm=hE?function(e){return e==null?[]:(e=Object(e),YO(hE(e),function(i){return nR.call(e,i)}))}:$O,oR=function(e,i){return Lf(e,mm(e),i)},bm=function(e,i){for(var o=-1,s=i.length,n=e.length;++o<s;)e[n+o]=i[o];return e},wh=XO(Object.getPrototypeOf,Object),KO=Object.getOwnPropertySymbols?function(e){for(var i=[];e;)bm(i,mm(e)),e=wh(e);return i}:$O,iR=function(e,i){return Lf(e,KO(e),i)},qO=function(e,i,o){var s=i(e);return Tn(e)?s:bm(s,o(e))},qg=function(e){return qO(e,pu,mm)},aR=function(e){return qO(e,ds,KO)},Zg=fs(mi,"DataView"),Jg=fs(mi,"Promise"),Fc=fs(mi,"Set"),Qg=fs(mi,"WeakMap"),uR=ls(Zg),sR=ls(Rf),cR=ls(Jg),lR=ls(Fc),fR=ls(Qg),os=du;(Zg&&os(new Zg(new ArrayBuffer(1)))!="[object DataView]"||Rf&&os(new Rf)!="[object Map]"||Jg&&os(Jg.resolve())!="[object Promise]"||Fc&&os(new Fc)!="[object Set]"||Qg&&os(new Qg)!="[object WeakMap]")&&(os=function(e){var i=du(e),o=i=="[object Object]"?e.constructor:void 0,s=o?ls(o):"";if(s)switch(s){case uR:return"[object DataView]";case sR:return"[object Map]";case cR:return"[object Promise]";case lR:return"[object Set]";case fR:return"[object WeakMap]"}return i});var ss=os,dR=Object.prototype.hasOwnProperty,pR=function(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&dR.call(e,"index")&&(o.index=e.index,o.input=e.input),o},ih=mi.Uint8Array,_m=function(e){var i=new e.constructor(e.byteLength);return new ih(i).set(new ih(e)),i},hR=function(e,i){var o=i?_m(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)},vR=/\w*$/,yR=function(e){var i=new e.constructor(e.source,vR.exec(e));return i.lastIndex=e.lastIndex,i},vE=ii?ii.prototype:void 0,yE=vE?vE.valueOf:void 0,gR=function(e){return yE?Object(yE.call(e)):{}},ZO=function(e,i){var o=i?_m(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)},mR=function(e,i,o){var s=e.constructor;switch(i){case"[object ArrayBuffer]":return _m(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return hR(e,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ZO(e,o);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return yR(e);case"[object Set]":return new s;case"[object Symbol]":return gR(e)}},gE=Object.create,JO=function(){function e(){}return function(i){if(!Do(i))return{};if(gE)return gE(i);e.prototype=i;var o=new e;return e.prototype=void 0,o}}(),QO=function(e){return typeof e.constructor!="function"||Oh(e)?{}:JO(wh(e))},bR=function(e){return gi(e)&&ss(e)=="[object Map]"},mE=zc&&zc.isMap,_R=mE?Eh(mE):bR,ER=function(e){return gi(e)&&ss(e)=="[object Set]"},bE=zc&&zc.isSet,OR=bE?Eh(bE):ER,un={};un["[object Arguments]"]=un["[object Array]"]=un["[object ArrayBuffer]"]=un["[object DataView]"]=un["[object Boolean]"]=un["[object Date]"]=un["[object Float32Array]"]=un["[object Float64Array]"]=un["[object Int8Array]"]=un["[object Int16Array]"]=un["[object Int32Array]"]=un["[object Map]"]=un["[object Number]"]=un["[object Object]"]=un["[object RegExp]"]=un["[object Set]"]=un["[object String]"]=un["[object Symbol]"]=un["[object Uint8Array]"]=un["[object Uint8ClampedArray]"]=un["[object Uint16Array]"]=un["[object Uint32Array]"]=!0,un["[object Error]"]=un["[object Function]"]=un["[object WeakMap]"]=!1;var ew=function e(i,o,s,n,c,f){var h,v=1&o,b=2&o,g=4&o;if(s&&(h=c?s(i,n,c,f):s(i)),h!==void 0)return h;if(!Do(i))return i;var O=Tn(i);if(O){if(h=pR(i),!v)return WO(i,h)}else{var x=ss(i),S=x=="[object Function]"||x=="[object GeneratorFunction]";if(us(i))return VO(i,v);if(x=="[object Object]"||x=="[object Arguments]"||S&&!c){if(h=b||S?{}:QO(i),!v)return b?iR(i,rR(h,i)):oR(i,JM(h,i))}else{if(!un[x])return c?i:{};h=mR(i,x,v)}}f||(f=new Lc);var N=f.get(i);if(N)return N;f.set(i,h),OR(i)?i.forEach(function(R){h.add(e(R,o,s,R,i,f))}):_R(i)&&i.forEach(function(R,D){h.set(D,e(R,o,s,D,i,f))});var j=O?void 0:(g?b?aR:qg:b?ds:pu)(i);return vm(j||i,function(R,D){j&&(R=i[D=R]),bh(h,D,e(R,o,s,D,i,f))}),h},wR=function(e){return ew(e,4)},Em=function(e){return function(){return e}},Om=function(e){return function(i,o,s){for(var n=-1,c=Object(i),f=s(i),h=f.length;h--;){var v=f[e?h:++n];if(o(c[v],v,c)===!1)break}return i}}(),wm=function(e,i){return e&&Om(e,i,pu)},xh=function(e,i){return function(o,s){if(o==null)return o;if(!Oa(o))return e(o,s);for(var n=o.length,c=i?n:-1,f=Object(o);(i?c--:++c<n)&&s(f[c],c,f)!==!1;);return o}}(wm),ps=function(e){return e},tw=function(e){return typeof e=="function"?e:ps},rw=function(e,i){return(Tn(e)?vm:xh)(e,tw(i))},nw=rw,xR=function(e,i){var o=[];return xh(e,function(s,n,c){i(s,n,c)&&o.push(s)}),o},SR=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},TR=function(e){return this.__data__.has(e)};function Wp(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new gh;++i<o;)this.add(e[i])}Wp.prototype.add=Wp.prototype.push=SR,Wp.prototype.has=TR;var ow=Wp,AR=function(e,i){for(var o=-1,s=e==null?0:e.length;++o<s;)if(i(e[o],o,e))return!0;return!1},iw=function(e,i){return e.has(i)},aw=function(e,i,o,s,n,c){var f=1&o,h=e.length,v=i.length;if(h!=v&&!(f&&v>h))return!1;var b=c.get(e),g=c.get(i);if(b&&g)return b==i&&g==e;var O=-1,x=!0,S=2&o?new ow:void 0;for(c.set(e,i),c.set(i,e);++O<h;){var N=e[O],j=i[O];if(s)var R=f?s(j,N,O,i,e,c):s(N,j,O,e,i,c);if(R!==void 0){if(R)continue;x=!1;break}if(S){if(!AR(i,function(D,z){if(!iw(S,z)&&(N===D||n(N,D,o,s,c)))return S.push(z)})){x=!1;break}}else if(N!==j&&!n(N,j,o,s,c)){x=!1;break}}return c.delete(e),c.delete(i),x},PR=function(e){var i=-1,o=Array(e.size);return e.forEach(function(s,n){o[++i]=[n,s]}),o},xm=function(e){var i=-1,o=Array(e.size);return e.forEach(function(s){o[++i]=s}),o},_E=ii?ii.prototype:void 0,Ig=_E?_E.valueOf:void 0,NR=function(e,i,o,s,n,c,f){switch(o){case"[object DataView]":if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=i.byteLength||!c(new ih(e),new ih(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Vc(+e,+i);case"[object Error]":return e.name==i.name&&e.message==i.message;case"[object RegExp]":case"[object String]":return e==i+"";case"[object Map]":var h=PR;case"[object Set]":var v=1&s;if(h||(h=xm),e.size!=i.size&&!v)return!1;var b=f.get(e);if(b)return b==i;s|=2,f.set(e,i);var g=aw(h(e),h(i),s,n,c,f);return f.delete(e),g;case"[object Symbol]":if(Ig)return Ig.call(e)==Ig.call(i)}return!1},jR=Object.prototype.hasOwnProperty,MR=function(e,i,o,s,n,c){var f=1&o,h=qg(e),v=h.length;if(v!=qg(i).length&&!f)return!1;for(var b=v;b--;){var g=h[b];if(!(f?g in i:jR.call(i,g)))return!1}var O=c.get(e),x=c.get(i);if(O&&x)return O==i&&x==e;var S=!0;c.set(e,i),c.set(i,e);for(var N=f;++b<v;){var j=e[g=h[b]],R=i[g];if(s)var D=f?s(R,j,g,i,e,c):s(j,R,g,e,i,c);if(!(D===void 0?j===R||n(j,R,o,s,c):D)){S=!1;break}N||(N=g=="constructor")}if(S&&!N){var z=e.constructor,Z=i.constructor;z==Z||!("constructor"in e)||!("constructor"in i)||typeof z=="function"&&z instanceof z&&typeof Z=="function"&&Z instanceof Z||(S=!1)}return c.delete(e),c.delete(i),S},EE=Object.prototype.hasOwnProperty,RR=function(e,i,o,s,n,c){var f=Tn(e),h=Tn(i),v=f?"[object Array]":ss(e),b=h?"[object Array]":ss(i),g=(v=v=="[object Arguments]"?"[object Object]":v)=="[object Object]",O=(b=b=="[object Arguments]"?"[object Object]":b)=="[object Object]",x=v==b;if(x&&us(e)){if(!us(i))return!1;f=!0,g=!1}if(x&&!g)return c||(c=new Lc),f||Ff(e)?aw(e,i,o,s,n,c):NR(e,i,v,o,s,n,c);if(!(1&o)){var S=g&&EE.call(e,"__wrapped__"),N=O&&EE.call(i,"__wrapped__");if(S||N){var j=S?e.value():e,R=N?i.value():i;return c||(c=new Lc),n(j,R,o,s,c)}}return!!x&&(c||(c=new Lc),MR(e,i,o,s,n,c))},uw=function e(i,o,s,n,c){return i===o||(i==null||o==null||!gi(i)&&!gi(o)?i!=i&&o!=o:RR(i,o,s,n,e,c))},DR=function(e,i,o,s){var n=o.length,c=n,f=!s;if(e==null)return!c;for(e=Object(e);n--;){var h=o[n];if(f&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++n<c;){var v=(h=o[n])[0],b=e[v],g=h[1];if(f&&h[2]){if(b===void 0&&!(v in e))return!1}else{var O=new Lc;if(s)var x=s(b,g,v,e,i,O);if(!(x===void 0?uw(g,b,3,s,O):x))return!1}}return!0},sw=function(e){return e==e&&!Do(e)},kR=function(e){for(var i=pu(e),o=i.length;o--;){var s=i[o],n=e[s];i[o]=[s,n,sw(n)]}return i},cw=function(e,i){return function(o){return o!=null&&o[e]===i&&(i!==void 0||e in Object(o))}},CR=function(e){var i=kR(e);return i.length==1&&i[0][2]?cw(i[0][0],i[0][1]):function(o){return o===e||DR(o,e,i)}},cs=function(e){return typeof e=="symbol"||gi(e)&&du(e)=="[object Symbol]"},IR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LR=/^\w*$/,Sm=function(e,i){if(Tn(e))return!1;var o=typeof e;return!(o!="number"&&o!="symbol"&&o!="boolean"&&e!=null&&!cs(e))||LR.test(e)||!IR.test(e)||i!=null&&e in Object(i)};function Tm(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var o=function(){var s=arguments,n=i?i.apply(this,s):s[0],c=o.cache;if(c.has(n))return c.get(n);var f=e.apply(this,s);return o.cache=c.set(n,f)||c,f};return o.cache=new(Tm.Cache||gh),o}Tm.Cache=gh;var FR=Tm,BR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GR=/\\(\\)?/g,UR=function(e){var i=FR(e,function(s){return o.size===500&&o.clear(),s}),o=i.cache;return i}(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(BR,function(o,s,n,c){i.push(n?c.replace(GR,"$1"):s||o)}),i}),Bc=function(e,i){for(var o=-1,s=e==null?0:e.length,n=Array(s);++o<s;)n[o]=i(e[o],o,e);return n},OE=ii?ii.prototype:void 0,wE=OE?OE.toString:void 0,zR=function e(i){if(typeof i=="string")return i;if(Tn(i))return Bc(i,e)+"";if(cs(i))return wE?wE.call(i):"";var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},lw=function(e){return e==null?"":zR(e)},Sh=function(e,i){return Tn(e)?e:Sm(e,i)?[e]:UR(lw(e))},Bf=function(e){if(typeof e=="string"||cs(e))return e;var i=e+"";return i=="0"&&1/e==-1/0?"-0":i},Th=function(e,i){for(var o=0,s=(i=Sh(i,e)).length;e!=null&&o<s;)e=e[Bf(i[o++])];return o&&o==s?e:void 0},HR=function(e,i,o){var s=e==null?void 0:Th(e,i);return s===void 0?o:s},XR=function(e,i){return e!=null&&i in Object(e)},fw=function(e,i,o){for(var s=-1,n=(i=Sh(i,e)).length,c=!1;++s<n;){var f=Bf(i[s]);if(!(c=e!=null&&o(e,f)))break;e=e[f]}return c||++s!=n?c:!!(n=e==null?0:e.length)&&ym(n)&&_h(f,n)&&(Tn(e)||Uc(e))},dw=function(e,i){return e!=null&&fw(e,i,XR)},VR=function(e,i){return Sm(e)&&sw(i)?cw(Bf(e),i):function(o){var s=HR(o,e);return s===void 0&&s===i?dw(o,e):uw(i,s,3)}},pw=function(e){return function(i){return i==null?void 0:i[e]}},WR=function(e){return function(i){return Th(i,e)}},YR=function(e){return Sm(e)?pw(Bf(e)):WR(e)},wa=function(e){return typeof e=="function"?e:e==null?ps:typeof e=="object"?Tn(e)?VR(e[0],e[1]):CR(e):YR(e)},hw=function(e,i){return(Tn(e)?YO:xR)(e,wa(i))},$R=Object.prototype.hasOwnProperty,KR=function(e,i){return e!=null&&$R.call(e,i)},vw=function(e,i){return e!=null&&fw(e,i,KR)},qR=Object.prototype.hasOwnProperty,ZR=function(e){if(e==null)return!0;if(Oa(e)&&(Tn(e)||typeof e=="string"||typeof e.splice=="function"||us(e)||Ff(e)||Uc(e)))return!e.length;var i=ss(e);if(i=="[object Map]"||i=="[object Set]")return!e.size;if(Oh(e))return!gm(e).length;for(var o in e)if(qR.call(e,o))return!1;return!0},yw=function(e){return e===void 0},gw=function(e,i){var o=-1,s=Oa(e)?Array(e.length):[];return xh(e,function(n,c,f){s[++o]=i(n,c,f)}),s},mw=function(e,i){return(Tn(e)?Bc:gw)(e,wa(i))},JR=function(e,i,o,s){var n=-1,c=e==null?0:e.length;for(s&&c&&(o=e[++n]);++n<c;)o=i(o,e[n],n,e);return o},QR=function(e,i,o,s,n){return n(e,function(c,f,h){o=s?(s=!1,c):i(o,c,f,h)}),o},bw=function(e,i,o){var s=Tn(e)?JR:QR,n=arguments.length<3;return s(e,wa(i),o,n,xh)},eD=function(e){return typeof e=="string"||!Tn(e)&&gi(e)&&du(e)=="[object String]"},tD=pw("length"),rD=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),nD=function(e){return rD.test(e)},oD="[\\ud800-\\udfff]",em="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",tm="\\ud83c[\\udffb-\\udfff]",_w="[^\\ud800-\\udfff]",Ew="(?:\\ud83c[\\udde6-\\uddff]){2}",Ow="[\\ud800-\\udbff][\\udc00-\\udfff]",xE="(?:"+em+"|"+tm+")?",iD="[\\ufe0e\\ufe0f]?"+xE+("(?:\\u200d(?:"+[_w,Ew,Ow].join("|")+")[\\ufe0e\\ufe0f]?"+xE+")*"),aD="(?:"+[_w+em+"?",em,Ew,Ow,oD].join("|")+")",SE=RegExp(tm+"(?="+tm+")|"+aD+iD,"g"),uD=function(e){for(var i=SE.lastIndex=0;SE.test(e);)++i;return i},sD=function(e){return nD(e)?uD(e):tD(e)},cD=function(e){if(e==null)return 0;if(Oa(e))return eD(e)?sD(e):e.length;var i=ss(e);return i=="[object Map]"||i=="[object Set]"?e.size:gm(e).length},lD=function(e,i,o){var s=Tn(e),n=s||us(e)||Ff(e);if(i=wa(i),o==null){var c=e&&e.constructor;o=n?s?new c:[]:Do(e)&&If(c)?JO(wh(e)):{}}return(n?vm:wm)(e,function(f,h,v){return i(o,f,h,v)}),o},TE=ii?ii.isConcatSpreadable:void 0,fD=function(e){return Tn(e)||Uc(e)||!!(TE&&e&&e[TE])},Am=function e(i,o,s,n,c){var f=-1,h=i.length;for(s||(s=fD),c||(c=[]);++f<h;){var v=i[f];o>0&&s(v)?o>1?e(v,o-1,s,n,c):bm(c,v):n||(c[c.length]=v)}return c},dD=function(e,i,o){switch(o.length){case 0:return e.call(i);case 1:return e.call(i,o[0]);case 2:return e.call(i,o[0],o[1]);case 3:return e.call(i,o[0],o[1],o[2])}return e.apply(i,o)},AE=Math.max,ww=function(e,i,o){return i=AE(i===void 0?e.length-1:i,0),function(){for(var s=arguments,n=-1,c=AE(s.length-i,0),f=Array(c);++n<c;)f[n]=s[i+n];n=-1;for(var h=Array(i+1);++n<i;)h[n]=s[n];return h[i]=o(f),dD(e,this,h)}},pD=oh?function(e,i){return oh(e,"toString",{configurable:!0,enumerable:!1,value:Em(i),writable:!0})}:ps,hD=Date.now,xw=function(e){var i=0,o=0;return function(){var s=hD(),n=16-(s-o);if(o=s,n>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}(pD),Ah=function(e,i){return xw(ww(e,i,ps),e+"")},Sw=function(e,i,o,s){for(var n=e.length,c=o+(s?1:-1);s?c--:++c<n;)if(i(e[c],c,e))return c;return-1},vD=function(e){return e!=e},yD=function(e,i,o){for(var s=o-1,n=e.length;++s<n;)if(e[s]===i)return s;return-1},gD=function(e,i,o){return i==i?yD(e,i,o):Sw(e,vD,o)},mD=function(e,i){return!!(e!=null&&e.length)&&gD(e,i,0)>-1},bD=function(e,i,o){for(var s=-1,n=e==null?0:e.length;++s<n;)if(o(i,e[s]))return!0;return!1},_D=function(){},ED=Fc&&1/xm(new Fc([,-0]))[1]==1/0?function(e){return new Fc(e)}:_D,OD=function(e,i,o){var s=-1,n=mD,c=e.length,f=!0,h=[],v=h;if(o)f=!1,n=bD;else if(c>=200){var b=i?null:ED(e);if(b)return xm(b);f=!1,n=iw,v=new ow}else v=i?[]:h;e:for(;++s<c;){var g=e[s],O=i?i(g):g;if(g=o||g!==0?g:0,f&&O==O){for(var x=v.length;x--;)if(v[x]===O)continue e;i&&v.push(O),h.push(g)}else n(v,O,o)||(v!==h&&v.push(O),h.push(g))}return h},Tw=function(e){return gi(e)&&Oa(e)},wD=Ah(function(e){return OD(Am(e,1,Tw,!0))}),xD=function(e,i){return Bc(i,function(o){return e[o]})},ah,Aw=function(e){return e==null?[]:xD(e,pu(e))};try{ah={clone:wR,constant:Em,each:nw,filter:hw,has:vw,isArray:Tn,isEmpty:ZR,isFunction:If,isUndefined:yw,keys:pu,map:mw,reduce:bw,size:cD,transform:lD,union:wD,values:Aw}}catch{}ah||(ah=window._);var Ft=ah,Pm=Lr;function Lr(e){this._isDirected=!Ft.has(e,"directed")||e.directed,this._isMultigraph=!!Ft.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Ft.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Ft.constant(void 0),this._defaultEdgeLabelFn=Ft.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function PE(e,i){e[i]?e[i]++:e[i]=1}function NE(e,i){--e[i]||delete e[i]}function Of(e,i,o,s){var n=""+i,c=""+o;if(!e&&n>c){var f=n;n=c,c=f}return n+""+c+""+(Ft.isUndefined(s)?"\0":s)}function SD(e,i,o,s){var n=""+i,c=""+o;if(!e&&n>c){var f=n;n=c,c=f}var h={v:n,w:c};return s&&(h.name=s),h}function Lg(e,i){return Of(e,i.v,i.w,i.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(e){return this._label=e,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(e){return Ft.isFunction(e)||(e=Ft.constant(e)),this._defaultNodeLabelFn=e,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return Ft.keys(this._nodes)},Lr.prototype.sources=function(){var e=this;return Ft.filter(this.nodes(),function(i){return Ft.isEmpty(e._in[i])})},Lr.prototype.sinks=function(){var e=this;return Ft.filter(this.nodes(),function(i){return Ft.isEmpty(e._out[i])})},Lr.prototype.setNodes=function(e,i){var o=arguments,s=this;return Ft.each(e,function(n){o.length>1?s.setNode(n,i):s.setNode(n)}),this},Lr.prototype.setNode=function(e,i){return Ft.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=i),this):(this._nodes[e]=arguments.length>1?i:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Lr.prototype.node=function(e){return this._nodes[e]},Lr.prototype.hasNode=function(e){return Ft.has(this._nodes,e)},Lr.prototype.removeNode=function(e){var i=this;if(Ft.has(this._nodes,e)){var o=function(s){i.removeEdge(i._edgeObjs[s])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Ft.each(this.children(e),function(s){i.setParent(s)}),delete this._children[e]),Ft.each(Ft.keys(this._in[e]),o),delete this._in[e],delete this._preds[e],Ft.each(Ft.keys(this._out[e]),o),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Lr.prototype.setParent=function(e,i){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Ft.isUndefined(i))i="\0";else{for(var o=i+="";!Ft.isUndefined(o);o=this.parent(o))if(o===e)throw new Error("Setting "+i+" as parent of "+e+" would create a cycle");this.setNode(i)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=i,this._children[i][e]=!0,this},Lr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Lr.prototype.parent=function(e){if(this._isCompound){var i=this._parent[e];if(i!=="\0")return i}},Lr.prototype.children=function(e){if(Ft.isUndefined(e)&&(e="\0"),this._isCompound){var i=this._children[e];if(i)return Ft.keys(i)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Lr.prototype.predecessors=function(e){var i=this._preds[e];if(i)return Ft.keys(i)},Lr.prototype.successors=function(e){var i=this._sucs[e];if(i)return Ft.keys(i)},Lr.prototype.neighbors=function(e){var i=this.predecessors(e);if(i)return Ft.union(i,this.successors(e))},Lr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Lr.prototype.filterNodes=function(e){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph());var o=this;Ft.each(this._nodes,function(c,f){e(f)&&i.setNode(f,c)}),Ft.each(this._edgeObjs,function(c){i.hasNode(c.v)&&i.hasNode(c.w)&&i.setEdge(c,o.edge(c))});var s={};function n(c){var f=o.parent(c);return f===void 0||i.hasNode(f)?(s[c]=f,f):f in s?s[f]:n(f)}return this._isCompound&&Ft.each(i.nodes(),function(c){i.setParent(c,n(c))}),i},Lr.prototype.setDefaultEdgeLabel=function(e){return Ft.isFunction(e)||(e=Ft.constant(e)),this._defaultEdgeLabelFn=e,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return Ft.values(this._edgeObjs)},Lr.prototype.setPath=function(e,i){var o=this,s=arguments;return Ft.reduce(e,function(n,c){return s.length>1?o.setEdge(n,c,i):o.setEdge(n,c),c}),this},Lr.prototype.setEdge=function(){var e,i,o,s,n=!1,c=arguments[0];typeof c=="object"&&c!==null&&"v"in c?(e=c.v,i=c.w,o=c.name,arguments.length===2&&(s=arguments[1],n=!0)):(e=c,i=arguments[1],o=arguments[3],arguments.length>2&&(s=arguments[2],n=!0)),e=""+e,i=""+i,Ft.isUndefined(o)||(o=""+o);var f=Of(this._isDirected,e,i,o);if(Ft.has(this._edgeLabels,f))return n&&(this._edgeLabels[f]=s),this;if(!Ft.isUndefined(o)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(i),this._edgeLabels[f]=n?s:this._defaultEdgeLabelFn(e,i,o);var h=SD(this._isDirected,e,i,o);return e=h.v,i=h.w,Object.freeze(h),this._edgeObjs[f]=h,PE(this._preds[i],e),PE(this._sucs[e],i),this._in[i][f]=h,this._out[e][f]=h,this._edgeCount++,this},Lr.prototype.edge=function(e,i,o){var s=arguments.length===1?Lg(this._isDirected,arguments[0]):Of(this._isDirected,e,i,o);return this._edgeLabels[s]},Lr.prototype.hasEdge=function(e,i,o){var s=arguments.length===1?Lg(this._isDirected,arguments[0]):Of(this._isDirected,e,i,o);return Ft.has(this._edgeLabels,s)},Lr.prototype.removeEdge=function(e,i,o){var s=arguments.length===1?Lg(this._isDirected,arguments[0]):Of(this._isDirected,e,i,o),n=this._edgeObjs[s];return n&&(e=n.v,i=n.w,delete this._edgeLabels[s],delete this._edgeObjs[s],NE(this._preds[i],e),NE(this._sucs[e],i),delete this._in[i][s],delete this._out[e][s],this._edgeCount--),this},Lr.prototype.inEdges=function(e,i){var o=this._in[e];if(o){var s=Ft.values(o);return i?Ft.filter(s,function(n){return n.v===i}):s}},Lr.prototype.outEdges=function(e,i){var o=this._out[e];if(o){var s=Ft.values(o);return i?Ft.filter(s,function(n){return n.w===i}):s}},Lr.prototype.nodeEdges=function(e,i){var o=this.inEdges(e,i);if(o)return o.concat(this.outEdges(e,i))};var jE={Graph:Pm,version:"2.1.8"},TD={write:function(e){var i={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:AD(e),edges:PD(e)};return Ft.isUndefined(e.graph())||(i.value=Ft.clone(e.graph())),i},read:function(e){var i=new Pm(e.options).setGraph(e.value);return Ft.each(e.nodes,function(o){i.setNode(o.v,o.value),o.parent&&i.setParent(o.v,o.parent)}),Ft.each(e.edges,function(o){i.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),i}};function AD(e){return Ft.map(e.nodes(),function(i){var o=e.node(i),s=e.parent(i),n={v:i};return Ft.isUndefined(o)||(n.value=o),Ft.isUndefined(s)||(n.parent=s),n})}function PD(e){return Ft.map(e.edges(),function(i){var o=e.edge(i),s={v:i.v,w:i.w};return Ft.isUndefined(i.name)||(s.name=i.name),Ft.isUndefined(o)||(s.value=o),s})}var ND=function(e){var i,o={},s=[];function n(c){Ft.has(o,c)||(o[c]=!0,i.push(c),Ft.each(e.successors(c),n),Ft.each(e.predecessors(c),n))}return Ft.each(e.nodes(),function(c){i=[],n(c),i.length&&s.push(i)}),s},Pw=ni;function ni(){this._arr=[],this._keyIndices={}}ni.prototype.size=function(){return this._arr.length},ni.prototype.keys=function(){return this._arr.map(function(e){return e.key})},ni.prototype.has=function(e){return Ft.has(this._keyIndices,e)},ni.prototype.priority=function(e){var i=this._keyIndices[e];if(i!==void 0)return this._arr[i].priority},ni.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ni.prototype.add=function(e,i){var o=this._keyIndices;if(e=String(e),!Ft.has(o,e)){var s=this._arr,n=s.length;return o[e]=n,s.push({key:e,priority:i}),this._decrease(n),!0}return!1},ni.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},ni.prototype.decrease=function(e,i){var o=this._keyIndices[e];if(i>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[o].priority+" New: "+i);this._arr[o].priority=i,this._decrease(o)},ni.prototype._heapify=function(e){var i=this._arr,o=2*e,s=o+1,n=e;o<i.length&&(n=i[o].priority<i[n].priority?o:n,s<i.length&&(n=i[s].priority<i[n].priority?s:n),n!==e&&(this._swap(e,n),this._heapify(n)))},ni.prototype._decrease=function(e){for(var i,o=this._arr,s=o[e].priority;e!==0&&!(o[i=e>>1].priority<s);)this._swap(e,i),e=i},ni.prototype._swap=function(e,i){var o=this._arr,s=this._keyIndices,n=o[e],c=o[i];o[e]=c,o[i]=n,s[c.key]=e,s[n.key]=i};var Nw=function(e,i,o,s){return function(n,c,f,h){var v,b,g={},O=new Pw,x=function(S){var N=S.v!==v?S.v:S.w,j=g[N],R=f(S),D=b.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+R);D<j.distance&&(j.distance=D,j.predecessor=v,O.decrease(N,D))};for(n.nodes().forEach(function(S){var N=S===c?0:Number.POSITIVE_INFINITY;g[S]={distance:N},O.add(S,N)});O.size()>0&&(v=O.removeMin(),(b=g[v]).distance!==Number.POSITIVE_INFINITY);)h(v).forEach(x);return g}(e,String(i),o||jD,s||function(n){return e.outEdges(n)})},jD=Ft.constant(1),MD=function(e,i,o){return Ft.transform(e.nodes(),function(s,n){s[n]=Nw(e,n,i,o)},{})},jw=function(e){var i=0,o=[],s={},n=[];function c(f){var h=s[f]={onStack:!0,lowlink:i,index:i++};if(o.push(f),e.successors(f).forEach(function(g){Ft.has(s,g)?s[g].onStack&&(h.lowlink=Math.min(h.lowlink,s[g].index)):(c(g),h.lowlink=Math.min(h.lowlink,s[g].lowlink))}),h.lowlink===h.index){var v,b=[];do v=o.pop(),s[v].onStack=!1,b.push(v);while(f!==v);n.push(b)}}return e.nodes().forEach(function(f){Ft.has(s,f)||c(f)}),n},RD=function(e){return Ft.filter(jw(e),function(i){return i.length>1||i.length===1&&e.hasEdge(i[0],i[0])})},DD=function(e,i,o){return function(s,n,c){var f={},h=s.nodes();return h.forEach(function(v){f[v]={},f[v][v]={distance:0},h.forEach(function(b){v!==b&&(f[v][b]={distance:Number.POSITIVE_INFINITY})}),c(v).forEach(function(b){var g=b.v===v?b.w:b.v,O=n(b);f[v][g]={distance:O,predecessor:v}})}),h.forEach(function(v){var b=f[v];h.forEach(function(g){var O=f[g];h.forEach(function(x){var S=O[v],N=b[x],j=O[x],R=S.distance+N.distance;R<j.distance&&(j.distance=R,j.predecessor=N.predecessor)})})}),f}(e,i||kD,o||function(s){return e.outEdges(s)})},kD=Ft.constant(1),Fg=Mw;function Mw(e){var i={},o={},s=[];if(Ft.each(e.sinks(),function n(c){if(Ft.has(o,c))throw new uh;Ft.has(i,c)||(o[c]=!0,i[c]=!0,Ft.each(e.predecessors(c),n),delete o[c],s.push(c))}),Ft.size(i)!==e.nodeCount())throw new uh;return s}function uh(){}Mw.CycleException=uh,uh.prototype=new Error;var ME=function(e,i,o){Ft.isArray(i)||(i=[i]);var s=(e.isDirected()?e.successors:e.neighbors).bind(e),n=[],c={};return Ft.each(i,function(f){if(!e.hasNode(f))throw new Error("Graph does not have node: "+f);Rw(e,f,o==="post",c,s,n)}),n};function Rw(e,i,o,s,n,c){Ft.has(s,i)||(s[i]=!0,o||c.push(i),Ft.each(n(i),function(f){Rw(e,f,o,s,n,c)}),o&&c.push(i))}var sh,CD={Graph:jE.Graph,json:TD,alg:{components:ND,dijkstra:Nw,dijkstraAll:MD,findCycles:RD,floydWarshall:DD,isAcyclic:function(e){try{Fg(e)}catch(i){if(i instanceof Fg.CycleException)return!1;throw i}return!0},postorder:function(e,i){return ME(e,i,"post")},preorder:function(e,i){return ME(e,i,"pre")},prim:function(e,i){var o,s=new Pm,n={},c=new Pw;function f(v){var b=v.v===o?v.w:v.v,g=c.priority(b);if(g!==void 0){var O=i(v);O<g&&(n[b]=o,c.decrease(b,O))}}if(e.nodeCount()===0)return s;Ft.each(e.nodes(),function(v){c.add(v,Number.POSITIVE_INFINITY),s.setNode(v)}),c.decrease(e.nodes()[0],0);for(var h=!1;c.size()>0;){if(o=c.removeMin(),Ft.has(n,o))s.setEdge(o,n[o]);else{if(h)throw new Error("Input graph is not connected: "+e);h=!0}e.nodeEdges(o).forEach(f)}return s},tarjan:jw,topsort:Fg},version:jE.version};try{sh=CD}catch{}sh||(sh=window.graphlib);var Vi=sh,ID=function(e){return ew(e,5)},kf=function(e,i,o){if(!Do(o))return!1;var s=typeof i;return!!(s=="number"?Oa(o)&&_h(i,o.length):s=="string"&&i in o)&&Vc(o[i],e)},Dw=Object.prototype,LD=Dw.hasOwnProperty,FD=Ah(function(e,i){e=Object(e);var o=-1,s=i.length,n=s>2?i[2]:void 0;for(n&&kf(i[0],i[1],n)&&(s=1);++o<s;)for(var c=i[o],f=ds(c),h=-1,v=f.length;++h<v;){var b=f[h],g=e[b];(g===void 0||Vc(g,Dw[b])&&!LD.call(e,b))&&(e[b]=c[b])}return e}),BD=function(e){return function(i,o,s){var n=Object(i);if(!Oa(i)){var c=wa(o);i=pu(i),o=function(h){return c(n[h],h,n)}}var f=e(i,o,s);return f>-1?n[c?i[f]:f]:void 0}},GD=/^\s+|\s+$/g,UD=/^[-+]0x[0-9a-f]+$/i,zD=/^0b[01]+$/i,HD=/^0o[0-7]+$/i,XD=parseInt,VD=function(e){if(typeof e=="number")return e;if(cs(e))return NaN;if(Do(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Do(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(GD,"");var o=zD.test(e);return o||HD.test(e)?XD(e.slice(2),o?2:8):UD.test(e)?NaN:+e},Yp=function(e){return e?(e=VD(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},WD=function(e){var i=Yp(e),o=i%1;return i==i?o?i-o:i:0},YD=Math.max,$D=BD(function(e,i,o){var s=e==null?0:e.length;if(!s)return-1;var n=o==null?0:WD(o);return n<0&&(n=YD(s+n,0)),Sw(e,wa(i),n)}),kw=function(e){return e!=null&&e.length?Am(e,1):[]},KD=function(e,i){return e==null?e:Om(e,tw(i),ds)},qD=function(e){var i=e==null?0:e.length;return i?e[i-1]:void 0},ZD=function(e,i){var o={};return i=wa(i),wm(e,function(s,n,c){mh(o,n,i(s,n,c))}),o},Nm=function(e,i,o){for(var s=-1,n=e.length;++s<n;){var c=e[s],f=i(c);if(f!=null&&(h===void 0?f==f&&!cs(f):o(f,h)))var h=f,v=c}return v},JD=function(e,i){return e>i},QD=function(e){return e&&e.length?Nm(e,ps,JD):void 0},rm=function(e,i,o){(o!==void 0&&!Vc(e[i],o)||o===void 0&&!(i in e))&&mh(e,i,o)},ek=Function.prototype,tk=Object.prototype,Cw=ek.toString,rk=tk.hasOwnProperty,nk=Cw.call(Object),ok=function(e){if(!gi(e)||du(e)!="[object Object]")return!1;var i=wh(e);if(i===null)return!0;var o=rk.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&Cw.call(o)==nk},nm=function(e,i){if((i!=="constructor"||typeof e[i]!="function")&&i!="__proto__")return e[i]},ik=function(e){return Lf(e,ds(e))},ak=function(e,i,o,s,n,c,f){var h=nm(e,o),v=nm(i,o),b=f.get(v);if(b)rm(e,o,b);else{var g=c?c(h,v,o+"",e,i,f):void 0,O=g===void 0;if(O){var x=Tn(v),S=!x&&us(v),N=!x&&!S&&Ff(v);g=v,x||S||N?Tn(h)?g=h:Tw(h)?g=WO(h):S?(O=!1,g=VO(v,!0)):N?(O=!1,g=ZO(v,!0)):g=[]:ok(v)||Uc(v)?(g=h,Uc(h)?g=ik(h):Do(h)&&!If(h)||(g=QO(v))):O=!1}O&&(f.set(v,g),n(g,v,s,c,f),f.delete(v)),rm(e,o,g)}},uk=function e(i,o,s,n,c){i!==o&&Om(o,function(f,h){if(c||(c=new Lc),Do(f))ak(i,o,h,s,e,n,c);else{var v=n?n(nm(i,h),f,h+"",i,o,c):void 0;v===void 0&&(v=f),rm(i,h,v)}},ds)},sk=function(e){return Ah(function(i,o){var s=-1,n=o.length,c=n>1?o[n-1]:void 0,f=n>2?o[2]:void 0;for(c=e.length>3&&typeof c=="function"?(n--,c):void 0,f&&kf(o[0],o[1],f)&&(c=n<3?void 0:c,n=1),i=Object(i);++s<n;){var h=o[s];h&&e(i,h,s,c)}return i})}(function(e,i,o){uk(e,i,o)}),Iw=function(e,i){return e<i},ck=function(e){return e&&e.length?Nm(e,ps,Iw):void 0},lk=function(e,i){return e&&e.length?Nm(e,wa(i),Iw):void 0},fk=function(){return mi.Date.now()},dk=function(e,i,o,s){if(!Do(e))return e;for(var n=-1,c=(i=Sh(i,e)).length,f=c-1,h=e;h!=null&&++n<c;){var v=Bf(i[n]),b=o;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(n!=f){var g=h[v];(b=s?s(g,v,h):void 0)===void 0&&(b=Do(g)?g:_h(i[n+1])?[]:{})}bh(h,v,b),h=h[v]}return e},pk=function(e,i,o){for(var s=-1,n=i.length,c={};++s<n;){var f=i[s],h=Th(e,f);o(h,f)&&dk(c,Sh(f,e),h)}return c},hk=function(e,i){return pk(e,i,function(o,s){return dw(e,s)})},vk=function(e){return xw(ww(e,void 0,kw),e+"")}(function(e,i){return e==null?{}:hk(e,i)}),yk=Math.ceil,gk=Math.max,mk=function(e,i,o,s){for(var n=-1,c=gk(yk((i-e)/(o||1)),0),f=Array(c);c--;)f[s?c:++n]=e,e+=o;return f},bk=function(e){return function(i,o,s){return s&&typeof s!="number"&&kf(i,o,s)&&(o=s=void 0),i=Yp(i),o===void 0?(o=i,i=0):o=Yp(o),s=s===void 0?i<o?1:-1:Yp(s),mk(i,o,s,e)}}(),_k=function(e,i){var o=e.length;for(e.sort(i);o--;)e[o]=e[o].value;return e},Ek=function(e,i){if(e!==i){var o=e!==void 0,s=e===null,n=e==e,c=cs(e),f=i!==void 0,h=i===null,v=i==i,b=cs(i);if(!h&&!b&&!c&&e>i||c&&f&&v&&!h&&!b||s&&f&&v||!o&&v||!n)return 1;if(!s&&!c&&!b&&e<i||b&&o&&n&&!s&&!c||h&&o&&n||!f&&n||!v)return-1}return 0},Ok=function(e,i,o){for(var s=-1,n=e.criteria,c=i.criteria,f=n.length,h=o.length;++s<f;){var v=Ek(n[s],c[s]);if(v)return s>=h?v:v*(o[s]=="desc"?-1:1)}return e.index-i.index},wk=function(e,i,o){i=i.length?Bc(i,function(c){return Tn(c)?function(f){return Th(f,c.length===1?c[0]:c)}:c}):[ps];var s=-1;i=Bc(i,Eh(wa));var n=gw(e,function(c,f,h){return{criteria:Bc(i,function(v){return v(c)}),index:++s,value:c}});return _k(n,function(c,f){return Ok(c,f,o)})},xk=Ah(function(e,i){if(e==null)return[];var o=i.length;return o>1&&kf(e,i[0],i[1])?i=[]:o>2&&kf(i[0],i[1],i[2])&&(i=[i[0]]),wk(e,Am(i,1),[])}),Sk=0,Tk=function(e){var i=++Sk;return lw(e)+i},Ak=function(e,i,o){for(var s=-1,n=e.length,c=i.length,f={};++s<n;){var h=s<c?i[s]:void 0;o(f,e[s],h)}return f},ch,Pk=function(e,i){return Ak(e||[],i||[],bh)};try{ch={cloneDeep:ID,constant:Em,defaults:FD,each:nw,filter:hw,find:$D,flatten:kw,forEach:rw,forIn:KD,has:vw,isUndefined:yw,last:qD,map:mw,mapValues:ZD,max:QD,merge:sk,min:ck,minBy:lk,now:fk,pick:vk,range:bk,reduce:bw,sortBy:xk,uniqueId:Tk,values:Aw,zipObject:Pk}}catch{}ch||(ch=window._);var Nk=ch;Vi.Graph;Nk.constant(1);Vi.Graph;Vi.Graph;Vi.alg.preorder;Vi.alg.postorder;Vi.Graph;Vi.Graph;Vi.Graph;Vi.Graph;Vi.Graph;function Cf(e){return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Cf(e)}function jk(e,i){if(Cf(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var s=o.call(e,i||"default");if(Cf(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function Mk(e){var i=jk(e,"string");return Cf(i)==="symbol"?i:String(i)}function Mt(e,i,o){return i=Mk(i),i in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}var Rk=typeof Ef=="object"&&Ef&&Ef.Object===Object&&Ef,Lw=Rk,Dk=Lw,kk=typeof self=="object"&&self&&self.Object===Object&&self,Ck=Dk||kk||Function("return this")(),Ik=Ck,Lk=Ik,Fk=Lk.Symbol,Fw=Fk,RE=Fw;RE&&RE.toStringTag;var DE=Fw;DE&&DE.toStringTag;var lh={exports:{}};lh.exports;(function(e,i){var o=Lw,s=i&&!i.nodeType&&i,n=s&&!0&&e&&!e.nodeType&&e,c=n&&n.exports===s,f=c&&o.process,h=function(){try{var v=n&&n.require&&n.require("util").types;return v||f&&f.binding&&f.binding("util")}catch{}}();e.exports=h})(lh,lh.exports);var Bk=lh.exports,kE=Bk;kE&&kE.isTypedArray;var Bw={exports:{}},Gw={exports:{}};(function(e){function i(o){return e.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,i(o)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports})(Gw);var Gk=Gw.exports;(function(e){var i=Gk.default;function o(){e.exports=o=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var s={},n=Object.prototype,c=n.hasOwnProperty,f=Object.defineProperty||function(ee,ce,ye){ee[ce]=ye.value},h=typeof Symbol=="function"?Symbol:{},v=h.iterator||"@@iterator",b=h.asyncIterator||"@@asyncIterator",g=h.toStringTag||"@@toStringTag";function O(ee,ce,ye){return Object.defineProperty(ee,ce,{value:ye,enumerable:!0,configurable:!0,writable:!0}),ee[ce]}try{O({},"")}catch{O=function(ye,_e,ie){return ye[_e]=ie}}function x(ee,ce,ye,_e){var ie=ce&&ce.prototype instanceof j?ce:j,ge=Object.create(ie.prototype),Be=new L(_e||[]);return f(ge,"_invoke",{value:K(ee,ye,Be)}),ge}function S(ee,ce,ye){try{return{type:"normal",arg:ee.call(ce,ye)}}catch(_e){return{type:"throw",arg:_e}}}s.wrap=x;var N={};function j(){}function R(){}function D(){}var z={};O(z,v,function(){return this});var Z=Object.getPrototypeOf,fe=Z&&Z(Z(he([])));fe&&fe!==n&&c.call(fe,v)&&(z=fe);var se=D.prototype=j.prototype=Object.create(z);function oe(ee){["next","throw","return"].forEach(function(ce){O(ee,ce,function(ye){return this._invoke(ce,ye)})})}function pe(ee,ce){function ye(ie,ge,Be,Qe){var mt=S(ee[ie],ee,ge);if(mt.type!=="throw"){var Bt=mt.arg,bt=Bt.value;return bt&&i(bt)=="object"&&c.call(bt,"__await")?ce.resolve(bt.__await).then(function(xt){ye("next",xt,Be,Qe)},function(xt){ye("throw",xt,Be,Qe)}):ce.resolve(bt).then(function(xt){Bt.value=xt,Be(Bt)},function(xt){return ye("throw",xt,Be,Qe)})}Qe(mt.arg)}var _e;f(this,"_invoke",{value:function(ge,Be){function Qe(){return new ce(function(mt,Bt){ye(ge,Be,mt,Bt)})}return _e=_e?_e.then(Qe,Qe):Qe()}})}function K(ee,ce,ye){var _e="suspendedStart";return function(ie,ge){if(_e==="executing")throw new Error("Generator is already running");if(_e==="completed"){if(ie==="throw")throw ge;return Ce()}for(ye.method=ie,ye.arg=ge;;){var Be=ye.delegate;if(Be){var Qe=U(Be,ye);if(Qe){if(Qe===N)continue;return Qe}}if(ye.method==="next")ye.sent=ye._sent=ye.arg;else if(ye.method==="throw"){if(_e==="suspendedStart")throw _e="completed",ye.arg;ye.dispatchException(ye.arg)}else ye.method==="return"&&ye.abrupt("return",ye.arg);_e="executing";var mt=S(ee,ce,ye);if(mt.type==="normal"){if(_e=ye.done?"completed":"suspendedYield",mt.arg===N)continue;return{value:mt.arg,done:ye.done}}mt.type==="throw"&&(_e="completed",ye.method="throw",ye.arg=mt.arg)}}}function U(ee,ce){var ye=ce.method,_e=ee.iterator[ye];if(_e===void 0)return ce.delegate=null,ye==="throw"&&ee.iterator.return&&(ce.method="return",ce.arg=void 0,U(ee,ce),ce.method==="throw")||ye!=="return"&&(ce.method="throw",ce.arg=new TypeError("The iterator does not provide a '"+ye+"' method")),N;var ie=S(_e,ee.iterator,ce.arg);if(ie.type==="throw")return ce.method="throw",ce.arg=ie.arg,ce.delegate=null,N;var ge=ie.arg;return ge?ge.done?(ce[ee.resultName]=ge.value,ce.next=ee.nextLoc,ce.method!=="return"&&(ce.method="next",ce.arg=void 0),ce.delegate=null,N):ge:(ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,N)}function Y(ee){var ce={tryLoc:ee[0]};1 in ee&&(ce.catchLoc=ee[1]),2 in ee&&(ce.finallyLoc=ee[2],ce.afterLoc=ee[3]),this.tryEntries.push(ce)}function W(ee){var ce=ee.completion||{};ce.type="normal",delete ce.arg,ee.completion=ce}function L(ee){this.tryEntries=[{tryLoc:"root"}],ee.forEach(Y,this),this.reset(!0)}function he(ee){if(ee){var ce=ee[v];if(ce)return ce.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var ye=-1,_e=function ie(){for(;++ye<ee.length;)if(c.call(ee,ye))return ie.value=ee[ye],ie.done=!1,ie;return ie.value=void 0,ie.done=!0,ie};return _e.next=_e}}return{next:Ce}}function Ce(){return{value:void 0,done:!0}}return R.prototype=D,f(se,"constructor",{value:D,configurable:!0}),f(D,"constructor",{value:R,configurable:!0}),R.displayName=O(D,g,"GeneratorFunction"),s.isGeneratorFunction=function(ee){var ce=typeof ee=="function"&&ee.constructor;return!!ce&&(ce===R||(ce.displayName||ce.name)==="GeneratorFunction")},s.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,D):(ee.__proto__=D,O(ee,g,"GeneratorFunction")),ee.prototype=Object.create(se),ee},s.awrap=function(ee){return{__await:ee}},oe(pe.prototype),O(pe.prototype,b,function(){return this}),s.AsyncIterator=pe,s.async=function(ee,ce,ye,_e,ie){ie===void 0&&(ie=Promise);var ge=new pe(x(ee,ce,ye,_e),ie);return s.isGeneratorFunction(ce)?ge:ge.next().then(function(Be){return Be.done?Be.value:ge.next()})},oe(se),O(se,g,"Generator"),O(se,v,function(){return this}),O(se,"toString",function(){return"[object Generator]"}),s.keys=function(ee){var ce=Object(ee),ye=[];for(var _e in ce)ye.push(_e);return ye.reverse(),function ie(){for(;ye.length;){var ge=ye.pop();if(ge in ce)return ie.value=ge,ie.done=!1,ie}return ie.done=!0,ie}},s.values=he,L.prototype={constructor:L,reset:function(ce){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(W),!ce)for(var ye in this)ye.charAt(0)==="t"&&c.call(this,ye)&&!isNaN(+ye.slice(1))&&(this[ye]=void 0)},stop:function(){this.done=!0;var ce=this.tryEntries[0].completion;if(ce.type==="throw")throw ce.arg;return this.rval},dispatchException:function(ce){if(this.done)throw ce;var ye=this;function _e(Bt,bt){return Be.type="throw",Be.arg=ce,ye.next=Bt,bt&&(ye.method="next",ye.arg=void 0),!!bt}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ge=this.tryEntries[ie],Be=ge.completion;if(ge.tryLoc==="root")return _e("end");if(ge.tryLoc<=this.prev){var Qe=c.call(ge,"catchLoc"),mt=c.call(ge,"finallyLoc");if(Qe&&mt){if(this.prev<ge.catchLoc)return _e(ge.catchLoc,!0);if(this.prev<ge.finallyLoc)return _e(ge.finallyLoc)}else if(Qe){if(this.prev<ge.catchLoc)return _e(ge.catchLoc,!0)}else{if(!mt)throw new Error("try statement without catch or finally");if(this.prev<ge.finallyLoc)return _e(ge.finallyLoc)}}}},abrupt:function(ce,ye){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var ie=this.tryEntries[_e];if(ie.tryLoc<=this.prev&&c.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var ge=ie;break}}ge&&(ce==="break"||ce==="continue")&&ge.tryLoc<=ye&&ye<=ge.finallyLoc&&(ge=null);var Be=ge?ge.completion:{};return Be.type=ce,Be.arg=ye,ge?(this.method="next",this.next=ge.finallyLoc,N):this.complete(Be)},complete:function(ce,ye){if(ce.type==="throw")throw ce.arg;return ce.type==="break"||ce.type==="continue"?this.next=ce.arg:ce.type==="return"?(this.rval=this.arg=ce.arg,this.method="return",this.next="end"):ce.type==="normal"&&ye&&(this.next=ye),N},finish:function(ce){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var _e=this.tryEntries[ye];if(_e.finallyLoc===ce)return this.complete(_e.completion,_e.afterLoc),W(_e),N}},catch:function(ce){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var _e=this.tryEntries[ye];if(_e.tryLoc===ce){var ie=_e.completion;if(ie.type==="throw"){var ge=ie.arg;W(_e)}return ge}}throw new Error("illegal catch attempt")},delegateYield:function(ce,ye,_e){return this.delegate={iterator:he(ce),resultName:ye,nextLoc:_e},this.method==="next"&&(this.arg=void 0),N}},s}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports})(Bw);var Uk=Bw.exports,Bg=Uk();try{regeneratorRuntime=Bg}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Bg:Function("r","regeneratorRuntime = r")(Bg)}var Pt;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Pt||(Pt={}));var CE;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(CE||(CE={}));var IE;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(IE||(IE={}));var LE;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(LE||(LE={}));var FE;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(FE||(FE={}));var zk={exports:{}};(function(e,i){(function(o,s){e.exports=s()})(Ef,function(){var o=function(A){return A instanceof Uint8Array||A instanceof Uint16Array||A instanceof Uint32Array||A instanceof Int8Array||A instanceof Int16Array||A instanceof Int32Array||A instanceof Float32Array||A instanceof Float64Array||A instanceof Uint8ClampedArray},s=function(A,G){for(var J=Object.keys(G),Ie=0;Ie<J.length;++Ie)A[J[Ie]]=G[J[Ie]];return A},n=`
`;function c(A){return typeof atob<"u"?atob(A):"base64:"+A}function f(A){var G=new Error("(regl) "+A);throw console.error(G),G}function h(A,G){A||f(G)}function v(A){return A?": "+A:""}function b(A,G,J){A in G||f("unknown parameter ("+A+")"+v(J)+". possible values: "+Object.keys(G).join())}function g(A,G){o(A)||f("invalid parameter type"+v(G)+". must be a typed array")}function O(A,G){switch(G){case"number":return typeof A=="number";case"object":return typeof A=="object";case"string":return typeof A=="string";case"boolean":return typeof A=="boolean";case"function":return typeof A=="function";case"undefined":return typeof A>"u";case"symbol":return typeof A=="symbol"}}function x(A,G,J){O(A,G)||f("invalid parameter type"+v(J)+". expected "+G+", got "+typeof A)}function S(A,G){A>=0&&(A|0)===A||f("invalid parameter type, ("+A+")"+v(G)+". must be a nonnegative integer")}function N(A,G,J){G.indexOf(A)<0&&f("invalid value"+v(J)+". must be one of: "+G)}var j=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function R(A){Object.keys(A).forEach(function(G){j.indexOf(G)<0&&f('invalid regl constructor argument "'+G+'". must be one of '+j)})}function D(A,G){for(A=A+"";A.length<G;)A=" "+A;return A}function z(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function Z(A,G){this.number=A,this.line=G,this.errors=[]}function fe(A,G,J){this.file=A,this.line=G,this.message=J}function se(){var A=new Error,G=(A.stack||A).toString(),J=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(G);if(J)return J[1];var Ie=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(G);return Ie?Ie[1]:"unknown"}function oe(){var A=new Error,G=(A.stack||A).toString(),J=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(G);if(J)return J[1];var Ie=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(G);return Ie?Ie[1]:"unknown"}function pe(A,G){var J=A.split(`
`),Ie=1,Ve=0,ke={unknown:new z,0:new z};ke.unknown.name=ke[0].name=G||se(),ke.unknown.lines.push(new Z(0,""));for(var Ge=0;Ge<J.length;++Ge){var ot=J[Ge],at=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ot);if(at)switch(at[1]){case"line":var ft=/(\d+)(\s+\d+)?/.exec(at[2]);ft&&(Ie=ft[1]|0,ft[2]&&(Ve=ft[2]|0,Ve in ke||(ke[Ve]=new z)));break;case"define":var ut=/SHADER_NAME(_B64)?\s+(.*)$/.exec(at[2]);ut&&(ke[Ve].name=ut[1]?c(ut[2]):ut[2]);break}ke[Ve].lines.push(new Z(Ie++,ot))}return Object.keys(ke).forEach(function(pt){var _t=ke[pt];_t.lines.forEach(function(it){_t.index[it.number]=it})}),ke}function K(A){var G=[];return A.split(`
`).forEach(function(J){if(!(J.length<5)){var Ie=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(J);Ie?G.push(new fe(Ie[1]|0,Ie[2]|0,Ie[3].trim())):J.length>0&&G.push(new fe("unknown",0,J))}}),G}function U(A,G){G.forEach(function(J){var Ie=A[J.file];if(Ie){var Ve=Ie.index[J.line];if(Ve){Ve.errors.push(J),Ie.hasErrors=!0;return}}A.unknown.hasErrors=!0,A.unknown.lines[0].errors.push(J)})}function Y(A,G,J,Ie,Ve){if(!A.getShaderParameter(G,A.COMPILE_STATUS)){var ke=A.getShaderInfoLog(G),Ge=Ie===A.FRAGMENT_SHADER?"fragment":"vertex";ye(J,"string",Ge+" shader source must be a string",Ve);var ot=pe(J,Ve),at=K(ke);U(ot,at),Object.keys(ot).forEach(function(ft){var ut=ot[ft];if(!ut.hasErrors)return;var pt=[""],_t=[""];function it(dt,Se){pt.push(dt),_t.push(Se||"")}it("file number "+ft+": "+ut.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ut.lines.forEach(function(dt){if(dt.errors.length>0){it(D(dt.number,4)+"|  ","background-color:yellow; font-weight:bold"),it(dt.line+n,"color:red; background-color:yellow; font-weight:bold");var Se=0;dt.errors.forEach(function(Ue){var st=Ue.message,St=/^\s*'(.*)'\s*:\s*(.*)$/.exec(st);if(St){var Ze=St[1];switch(st=St[2],Ze){case"assign":Ze="=";break}Se=Math.max(dt.line.indexOf(Ze,Se),0)}else Se=0;it(D("| ",6)),it(D("^^^",Se+3)+n,"font-weight:bold"),it(D("| ",6)),it(st+n,"font-weight:bold")}),it(D("| ",6)+n)}else it(D(dt.number,4)+"|  "),it(dt.line+n,"color:red")}),typeof document<"u"&&!window.chrome?(_t[0]=pt.join("%c"),console.log.apply(console,_t)):console.log(pt.join(""))}),h.raise("Error compiling "+Ge+" shader, "+ot[0].name)}}function W(A,G,J,Ie,Ve){if(!A.getProgramParameter(G,A.LINK_STATUS)){var ke=A.getProgramInfoLog(G),Ge=pe(J,Ve),ot=pe(Ie,Ve),at='Error linking program with vertex shader, "'+ot[0].name+'", and fragment shader "'+Ge[0].name+'"';typeof document<"u"?console.log("%c"+at+n+"%c"+ke,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(at+n+ke),h.raise(at)}}function L(A){A._commandRef=se()}function he(A,G,J,Ie){L(A);function Ve(at){return at?Ie.id(at):0}A._fragId=Ve(A.static.frag),A._vertId=Ve(A.static.vert);function ke(at,ft){Object.keys(ft).forEach(function(ut){at[Ie.id(ut)]=!0})}var Ge=A._uniformSet={};ke(Ge,G.static),ke(Ge,G.dynamic);var ot=A._attributeSet={};ke(ot,J.static),ke(ot,J.dynamic),A._hasCount="count"in A.static||"count"in A.dynamic||"elements"in A.static||"elements"in A.dynamic}function Ce(A,G){var J=oe();f(A+" in command "+(G||se())+(J==="unknown"?"":" called from "+J))}function ee(A,G,J){A||Ce(G,J||se())}function ce(A,G,J,Ie){A in G||Ce("unknown parameter ("+A+")"+v(J)+". possible values: "+Object.keys(G).join(),Ie||se())}function ye(A,G,J,Ie){O(A,G)||Ce("invalid parameter type"+v(J)+". expected "+G+", got "+typeof A,Ie||se())}function _e(A){A()}function ie(A,G,J){A.texture?N(A.texture._texture.internalformat,G,"unsupported texture format for attachment"):N(A.renderbuffer._renderbuffer.format,J,"unsupported renderbuffer format for attachment")}var ge=33071,Be=9728,Qe=9984,mt=9985,Bt=9986,bt=9987,xt=5120,tr=5121,Oe=5122,re=5123,be=5124,qe=5125,yt=5126,et=32819,Dt=32820,zt=33635,Zt=34042,Gt=36193,ze={};ze[xt]=ze[tr]=1,ze[Oe]=ze[re]=ze[Gt]=ze[zt]=ze[et]=ze[Dt]=2,ze[be]=ze[qe]=ze[yt]=ze[Zt]=4;function Yt(A,G){return A===Dt||A===et||A===zt?2:A===Zt?4:ze[A]*G}function xe(A){return!(A&A-1)&&!!A}function Ht(A,G,J){var Ie,Ve=G.width,ke=G.height,Ge=G.channels;h(Ve>0&&Ve<=J.maxTextureSize&&ke>0&&ke<=J.maxTextureSize,"invalid texture shape"),(A.wrapS!==ge||A.wrapT!==ge)&&h(xe(Ve)&&xe(ke),"incompatible wrap mode for texture, both width and height must be power of 2"),G.mipmask===1?Ve!==1&&ke!==1&&h(A.minFilter!==Qe&&A.minFilter!==Bt&&A.minFilter!==mt&&A.minFilter!==bt,"min filter requires mipmap"):(h(xe(Ve)&&xe(ke),"texture must be a square power of 2 to support mipmapping"),h(G.mipmask===(Ve<<1)-1,"missing or incomplete mipmap data")),G.type===yt&&(J.extensions.indexOf("oes_texture_float_linear")<0&&h(A.minFilter===Be&&A.magFilter===Be,"filter not supported, must enable oes_texture_float_linear"),h(!A.genMipmaps,"mipmap generation not supported with float textures"));var ot=G.images;for(Ie=0;Ie<16;++Ie)if(ot[Ie]){var at=Ve>>Ie,ft=ke>>Ie;h(G.mipmask&1<<Ie,"missing mipmap data");var ut=ot[Ie];if(h(ut.width===at&&ut.height===ft,"invalid shape for mip images"),h(ut.format===G.format&&ut.internalformat===G.internalformat&&ut.type===G.type,"incompatible type for mip image"),!ut.compressed)if(ut.data){var pt=Math.ceil(Yt(ut.type,Ge)*at/ut.unpackAlignment)*ut.unpackAlignment;h(ut.data.byteLength===pt*ft,"invalid data for image, buffer size is inconsistent with image format")}else ut.element||ut.copy}else A.genMipmaps||h((G.mipmask&1<<Ie)===0,"extra mipmap data");G.compressed&&h(!A.genMipmaps,"mipmap generation for compressed images not supported")}function yr(A,G,J,Ie){var Ve=A.width,ke=A.height,Ge=A.channels;h(Ve>0&&Ve<=Ie.maxTextureSize&&ke>0&&ke<=Ie.maxTextureSize,"invalid texture shape"),h(Ve===ke,"cube map must be square"),h(G.wrapS===ge&&G.wrapT===ge,"wrap mode not supported by cube map");for(var ot=0;ot<J.length;++ot){var at=J[ot];h(at.width===Ve&&at.height===ke,"inconsistent cube map face shape"),G.genMipmaps&&(h(!at.compressed,"can not generate mipmap for compressed textures"),h(at.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ft=at.images,ut=0;ut<16;++ut){var pt=ft[ut];if(pt){var _t=Ve>>ut,it=ke>>ut;h(at.mipmask&1<<ut,"missing mipmap data"),h(pt.width===_t&&pt.height===it,"invalid shape for mip images"),h(pt.format===A.format&&pt.internalformat===A.internalformat&&pt.type===A.type,"incompatible type for mip image"),pt.compressed||(pt.data?h(pt.data.byteLength===_t*it*Math.max(Yt(pt.type,Ge),pt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):pt.element||pt.copy)}}}}var B=s(h,{optional:_e,raise:f,commandRaise:Ce,command:ee,parameter:b,commandParameter:ce,constructor:R,type:x,commandType:ye,isTypedArray:g,nni:S,oneOf:N,shaderError:Y,linkError:W,callSite:oe,saveCommandRef:L,saveDrawInfo:he,framebufferFormat:ie,guessCommand:se,texture2D:Ht,textureCube:yr}),pr=0,kr=0,$r=5,Zr=6;function sr(A,G){this.id=pr++,this.type=A,this.data=G}function sn(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Q(A){if(A.length===0)return[];var G=A.charAt(0),J=A.charAt(A.length-1);if(A.length>1&&G===J&&(G==='"'||G==="'"))return['"'+sn(A.substr(1,A.length-2))+'"'];var Ie=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(A);if(Ie)return Q(A.substr(0,Ie.index)).concat(Q(Ie[1])).concat(Q(A.substr(Ie.index+Ie[0].length)));var Ve=A.split(".");if(Ve.length===1)return['"'+sn(A)+'"'];for(var ke=[],Ge=0;Ge<Ve.length;++Ge)ke=ke.concat(Q(Ve[Ge]));return ke}function Ne(A){return"["+Q(A).join("][")+"]"}function de(A,G){return new sr(A,Ne(G+""))}function Fe(A){return typeof A=="function"&&!A._reglType||A instanceof sr}function Nt(A,G){if(typeof A=="function")return new sr(kr,A);if(typeof A=="number"||typeof A=="boolean")return new sr($r,A);if(Array.isArray(A))return new sr(Zr,A.map((J,Ie)=>Nt(J,G+"["+Ie+"]")));if(A instanceof sr)return A;B(!1,"invalid option type in uniform "+G)}var Ot={DynamicVariable:sr,define:de,isDynamic:Fe,unbox:Nt,accessor:Ne},Kt={next:typeof requestAnimationFrame=="function"?function(A){return requestAnimationFrame(A)}:function(A){return setTimeout(A,16)},cancel:typeof cancelAnimationFrame=="function"?function(A){return cancelAnimationFrame(A)}:clearTimeout},Tr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function On(){var A={"":0},G=[""];return{id:function(J){var Ie=A[J];return Ie||(Ie=A[J]=G.length,G.push(J),Ie)},str:function(J){return G[J]}}}function In(A,G,J){var Ie=document.createElement("canvas");s(Ie.style,{border:0,margin:0,padding:0,top:0,left:0}),A.appendChild(Ie),A===document.body&&(Ie.style.position="absolute",s(A.style,{margin:0,padding:0}));function Ve(){var ot=window.innerWidth,at=window.innerHeight;if(A!==document.body){var ft=A.getBoundingClientRect();ot=ft.right-ft.left,at=ft.bottom-ft.top}Ie.width=J*ot,Ie.height=J*at,s(Ie.style,{width:ot+"px",height:at+"px"})}var ke;A!==document.body&&typeof ResizeObserver=="function"?(ke=new ResizeObserver(function(){setTimeout(Ve)}),ke.observe(A)):window.addEventListener("resize",Ve,!1);function Ge(){ke?ke.disconnect():window.removeEventListener("resize",Ve),A.removeChild(Ie)}return Ve(),{canvas:Ie,onDestroy:Ge}}function dn(A,G){function J(Ie){try{return A.getContext(Ie,G)}catch{return null}}return J("webgl")||J("experimental-webgl")||J("webgl-experimental")}function bn(A){return typeof A.nodeName=="string"&&typeof A.appendChild=="function"&&typeof A.getBoundingClientRect=="function"}function Xt(A){return typeof A.drawArrays=="function"||typeof A.drawElements=="function"}function or(A){return typeof A=="string"?A.split():(B(Array.isArray(A),"invalid extension array"),A)}function dr(A){return typeof A=="string"?(B(typeof document<"u","not supported outside of DOM"),document.querySelector(A)):A}function gr(A){var G=A||{},J,Ie,Ve,ke,Ge={},ot=[],at=[],ft=typeof window>"u"?1:window.devicePixelRatio,ut=!1,pt=function(dt){dt&&B.raise(dt)},_t=function(){};if(typeof G=="string"?(B(typeof document<"u","selector queries only supported in DOM enviroments"),J=document.querySelector(G),B(J,"invalid query string for element")):typeof G=="object"?bn(G)?J=G:Xt(G)?(ke=G,Ve=ke.canvas):(B.constructor(G),"gl"in G?ke=G.gl:"canvas"in G?Ve=dr(G.canvas):"container"in G&&(Ie=dr(G.container)),"attributes"in G&&(Ge=G.attributes,B.type(Ge,"object","invalid context attributes")),"extensions"in G&&(ot=or(G.extensions)),"optionalExtensions"in G&&(at=or(G.optionalExtensions)),"onDone"in G&&(B.type(G.onDone,"function","invalid or missing onDone callback"),pt=G.onDone),"profile"in G&&(ut=!!G.profile),"pixelRatio"in G&&(ft=+G.pixelRatio,B(ft>0,"invalid pixel ratio"))):B.raise("invalid arguments to regl"),J&&(J.nodeName.toLowerCase()==="canvas"?Ve=J:Ie=J),!ke){if(!Ve){B(typeof document<"u","must manually specify webgl context outside of DOM environments");var it=In(Ie||document.body,pt,ft);if(!it)return null;Ve=it.canvas,_t=it.onDestroy}Ge.premultipliedAlpha===void 0&&(Ge.premultipliedAlpha=!0),ke=dn(Ve,Ge)}return ke?{gl:ke,canvas:Ve,container:Ie,extensions:ot,optionalExtensions:at,pixelRatio:ft,profile:ut,onDone:pt,onDestroy:_t}:(_t(),pt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Xr(A,G){var J={};function Ie(Ge){B.type(Ge,"string","extension name must be string");var ot=Ge.toLowerCase(),at;try{at=J[ot]=A.getExtension(ot)}catch{}return!!at}for(var Ve=0;Ve<G.extensions.length;++Ve){var ke=G.extensions[Ve];if(!Ie(ke))return G.onDestroy(),G.onDone('"'+ke+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return G.optionalExtensions.forEach(Ie),{extensions:J,restore:function(){Object.keys(J).forEach(function(Ge){if(J[Ge]&&!Ie(Ge))throw new Error("(regl): error restoring extension "+Ge)})}}}function Cr(A,G){for(var J=Array(A),Ie=0;Ie<A;++Ie)J[Ie]=G(Ie);return J}var ai=5120,Go=5121,Uo=5122,Wi=5123,Wc=5124,hu=5125,xo=5126;function hs(A){for(var G=16;G<=1<<28;G*=16)if(A<=G)return G;return 0}function qt(A){var G,J;return G=(A>65535)<<4,A>>>=G,J=(A>255)<<3,A>>>=J,G|=J,J=(A>15)<<2,A>>>=J,G|=J,J=(A>3)<<1,A>>>=J,G|=J,G|A>>1}function vs(){var A=Cr(8,function(){return[]});function G(ke){var Ge=hs(ke),ot=A[qt(Ge)>>2];return ot.length>0?ot.pop():new ArrayBuffer(Ge)}function J(ke){A[qt(ke.byteLength)>>2].push(ke)}function Ie(ke,Ge){var ot=null;switch(ke){case ai:ot=new Int8Array(G(Ge),0,Ge);break;case Go:ot=new Uint8Array(G(Ge),0,Ge);break;case Uo:ot=new Int16Array(G(2*Ge),0,Ge);break;case Wi:ot=new Uint16Array(G(2*Ge),0,Ge);break;case Wc:ot=new Int32Array(G(4*Ge),0,Ge);break;case hu:ot=new Uint32Array(G(4*Ge),0,Ge);break;case xo:ot=new Float32Array(G(4*Ge),0,Ge);break;default:return null}return ot.length!==Ge?ot.subarray(0,Ge):ot}function Ve(ke){J(ke.buffer)}return{alloc:G,free:J,allocType:Ie,freeType:Ve}}var tn=vs();tn.zero=vs();var ys=3408,lo=3410,fo=3411,gs=3412,zo=3413,bi=3414,ko=3415,vu=33901,ms=33902,Yc=3379,xa=3386,$c=34921,bs=36347,Kc=36348,ui=35661,_s=35660,Ho=34930,qc=36349,Sa=34076,yu=34024,gu=7936,Zc=7937,Es=7938,_i=35724,Ei=34047,Os=36063,Oi=34852,po=3553,mu=34067,ws=34069,Yi=33984,wi=6408,bu=5126,_u=5121,Ta=36160,$i=36053,xs=36064,Jc=16384,Ss=function(A,G){var J=1;G.ext_texture_filter_anisotropic&&(J=A.getParameter(Ei));var Ie=1,Ve=1;G.webgl_draw_buffers&&(Ie=A.getParameter(Oi),Ve=A.getParameter(Os));var ke=!!G.oes_texture_float;if(ke){var Ge=A.createTexture();A.bindTexture(po,Ge),A.texImage2D(po,0,wi,1,1,0,wi,bu,null);var ot=A.createFramebuffer();if(A.bindFramebuffer(Ta,ot),A.framebufferTexture2D(Ta,xs,po,Ge,0),A.bindTexture(po,null),A.checkFramebufferStatus(Ta)!==$i)ke=!1;else{A.viewport(0,0,1,1),A.clearColor(1,0,0,1),A.clear(Jc);var at=tn.allocType(bu,4);A.readPixels(0,0,1,1,wi,bu,at),A.getError()?ke=!1:(A.deleteFramebuffer(ot),A.deleteTexture(Ge),ke=at[0]===1),tn.freeType(at)}}var ft=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ut=!0;if(!ft){var pt=A.createTexture(),_t=tn.allocType(_u,36);A.activeTexture(Yi),A.bindTexture(mu,pt),A.texImage2D(ws,0,wi,3,3,0,wi,_u,_t),tn.freeType(_t),A.bindTexture(mu,null),A.deleteTexture(pt),ut=!A.getError()}return{colorBits:[A.getParameter(lo),A.getParameter(fo),A.getParameter(gs),A.getParameter(zo)],depthBits:A.getParameter(bi),stencilBits:A.getParameter(ko),subpixelBits:A.getParameter(ys),extensions:Object.keys(G).filter(function(it){return!!G[it]}),maxAnisotropic:J,maxDrawbuffers:Ie,maxColorAttachments:Ve,pointSizeDims:A.getParameter(vu),lineWidthDims:A.getParameter(ms),maxViewportDims:A.getParameter(xa),maxCombinedTextureUnits:A.getParameter(ui),maxCubeMapSize:A.getParameter(Sa),maxRenderbufferSize:A.getParameter(yu),maxTextureUnits:A.getParameter(Ho),maxTextureSize:A.getParameter(Yc),maxAttributes:A.getParameter($c),maxVertexUniforms:A.getParameter(bs),maxVertexTextureUnits:A.getParameter(_s),maxVaryingVectors:A.getParameter(Kc),maxFragmentUniforms:A.getParameter(qc),glsl:A.getParameter(_i),renderer:A.getParameter(Zc),vendor:A.getParameter(gu),version:A.getParameter(Es),readFloat:ke,npotTextureCube:ut}};function Yn(A){return!!A&&typeof A=="object"&&Array.isArray(A.shape)&&Array.isArray(A.stride)&&typeof A.offset=="number"&&A.shape.length===A.stride.length&&(Array.isArray(A.data)||o(A.data))}var An=function(A){return Object.keys(A).map(function(G){return A[G]})},ho={shape:si,flatten:Qc};function Gn(A,G,J){for(var Ie=0;Ie<G;++Ie)J[Ie]=A[Ie]}function Ts(A,G,J,Ie){for(var Ve=0,ke=0;ke<G;++ke)for(var Ge=A[ke],ot=0;ot<J;++ot)Ie[Ve++]=Ge[ot]}function Eu(A,G,J,Ie,Ve,ke){for(var Ge=ke,ot=0;ot<G;++ot)for(var at=A[ot],ft=0;ft<J;++ft)for(var ut=at[ft],pt=0;pt<Ie;++pt)Ve[Ge++]=ut[pt]}function Ou(A,G,J,Ie,Ve){for(var ke=1,Ge=J+1;Ge<G.length;++Ge)ke*=G[Ge];var ot=G[J];if(G.length-J===4){var at=G[J+1],ft=G[J+2],ut=G[J+3];for(Ge=0;Ge<ot;++Ge)Eu(A[Ge],at,ft,ut,Ie,Ve),Ve+=ke}else for(Ge=0;Ge<ot;++Ge)Ou(A[Ge],G,J+1,Ie,Ve),Ve+=ke}function Qc(A,G,J,Ie){var Ve=1;if(G.length)for(var ke=0;ke<G.length;++ke)Ve*=G[ke];else Ve=0;var Ge=Ie||tn.allocType(J,Ve);switch(G.length){case 0:break;case 1:Gn(A,G[0],Ge);break;case 2:Ts(A,G[0],G[1],Ge);break;case 3:Eu(A,G[0],G[1],G[2],Ge,0);break;default:Ou(A,G,0,Ge,0)}return Ge}function si(A){for(var G=[],J=A;J.length;J=J[0])G.push(J.length);return G}var ro={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},el=5120,So=5122,vo=5124,As=5121,Ps=5123,tl=5125,Aa=5126,Xo=5126,yo={int8:el,int16:So,int32:vo,uint8:As,uint16:Ps,uint32:tl,float:Aa,float32:Xo},rl=35048,$n=35040,To={dynamic:rl,stream:$n,static:35044},Rr=ho.flatten,no=ho.shape,Vo=35044,Ln=35040,Pa=5121,Ki=5126,Co=[];Co[5120]=1,Co[5122]=2,Co[5124]=4,Co[5121]=1,Co[5123]=2,Co[5125]=4,Co[5126]=4;function Kn(A){return ro[Object.prototype.toString.call(A)]|0}function wu(A,G){for(var J=0;J<G.length;++J)A[J]=G[J]}function qi(A,G,J,Ie,Ve,ke,Ge){for(var ot=0,at=0;at<J;++at)for(var ft=0;ft<Ie;++ft)A[ot++]=G[Ve*at+ke*ft+Ge]}function Ao(A,G,J,Ie){var Ve=0,ke={};function Ge(Se){this.id=Ve++,this.buffer=A.createBuffer(),this.type=Se,this.usage=Vo,this.byteLength=0,this.dimension=1,this.dtype=Pa,this.persistentData=null,J.profile&&(this.stats={size:0})}Ge.prototype.bind=function(){A.bindBuffer(this.type,this.buffer)},Ge.prototype.destroy=function(){_t(this)};var ot=[];function at(Se,Ue){var st=ot.pop();return st||(st=new Ge(Se)),st.bind(),pt(st,Ue,Ln,0,1,!1),st}function ft(Se){ot.push(Se)}function ut(Se,Ue,st){Se.byteLength=Ue.byteLength,A.bufferData(Se.type,Ue,st)}function pt(Se,Ue,st,St,Ze,At){var tt;if(Se.usage=st,Array.isArray(Ue)){if(Se.dtype=St||Ki,Ue.length>0){var ht;if(Array.isArray(Ue[0])){tt=no(Ue);for(var rt=1,vt=1;vt<tt.length;++vt)rt*=tt[vt];Se.dimension=rt,ht=Rr(Ue,tt,Se.dtype),ut(Se,ht,st),At?Se.persistentData=ht:tn.freeType(ht)}else if(typeof Ue[0]=="number"){Se.dimension=Ze;var $t=tn.allocType(Se.dtype,Ue.length);wu($t,Ue),ut(Se,$t,st),At?Se.persistentData=$t:tn.freeType($t)}else o(Ue[0])?(Se.dimension=Ue[0].length,Se.dtype=St||Kn(Ue[0])||Ki,ht=Rr(Ue,[Ue.length,Ue[0].length],Se.dtype),ut(Se,ht,st),At?Se.persistentData=ht:tn.freeType(ht)):B.raise("invalid buffer data")}}else if(o(Ue))Se.dtype=St||Kn(Ue),Se.dimension=Ze,ut(Se,Ue,st),At&&(Se.persistentData=new Uint8Array(new Uint8Array(Ue.buffer)));else if(Yn(Ue)){tt=Ue.shape;var rr=Ue.stride,Et=Ue.offset,Je=0,$e=0,nr=0,Te=0;tt.length===1?(Je=tt[0],$e=1,nr=rr[0],Te=0):tt.length===2?(Je=tt[0],$e=tt[1],nr=rr[0],Te=rr[1]):B.raise("invalid shape"),Se.dtype=St||Kn(Ue.data)||Ki,Se.dimension=$e;var Lt=tn.allocType(Se.dtype,Je*$e);qi(Lt,Ue.data,Je,$e,nr,Te,Et),ut(Se,Lt,st),At?Se.persistentData=Lt:tn.freeType(Lt)}else Ue instanceof ArrayBuffer?(Se.dtype=Pa,Se.dimension=Ze,ut(Se,Ue,st),At&&(Se.persistentData=new Uint8Array(new Uint8Array(Ue)))):B.raise("invalid buffer data")}function _t(Se){G.bufferCount--,Ie(Se);var Ue=Se.buffer;B(Ue,"buffer must not be deleted already"),A.deleteBuffer(Ue),Se.buffer=null,delete ke[Se.id]}function it(Se,Ue,st,St){G.bufferCount++;var Ze=new Ge(Ue);ke[Ze.id]=Ze;function At(rt){var vt=Vo,$t=null,rr=0,Et=0,Je=1;return Array.isArray(rt)||o(rt)||Yn(rt)||rt instanceof ArrayBuffer?$t=rt:typeof rt=="number"?rr=rt|0:rt&&(B.type(rt,"object","buffer arguments must be an object, a number or an array"),"data"in rt&&(B($t===null||Array.isArray($t)||o($t)||Yn($t),"invalid data for buffer"),$t=rt.data),"usage"in rt&&(B.parameter(rt.usage,To,"invalid buffer usage"),vt=To[rt.usage]),"type"in rt&&(B.parameter(rt.type,yo,"invalid buffer type"),Et=yo[rt.type]),"dimension"in rt&&(B.type(rt.dimension,"number","invalid dimension"),Je=rt.dimension|0),"length"in rt&&(B.nni(rr,"buffer length must be a nonnegative integer"),rr=rt.length|0)),Ze.bind(),$t?pt(Ze,$t,vt,Et,Je,St):(rr&&A.bufferData(Ze.type,rr,vt),Ze.dtype=Et||Pa,Ze.usage=vt,Ze.dimension=Je,Ze.byteLength=rr),J.profile&&(Ze.stats.size=Ze.byteLength*Co[Ze.dtype]),At}function tt(rt,vt){B(vt+rt.byteLength<=Ze.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+rt.byteLength+" starting from offset "+vt+" to a buffer of size "+Ze.byteLength),A.bufferSubData(Ze.type,vt,rt)}function ht(rt,vt){var $t=(vt||0)|0,rr;if(Ze.bind(),o(rt)||rt instanceof ArrayBuffer)tt(rt,$t);else if(Array.isArray(rt)){if(rt.length>0)if(typeof rt[0]=="number"){var Et=tn.allocType(Ze.dtype,rt.length);wu(Et,rt),tt(Et,$t),tn.freeType(Et)}else if(Array.isArray(rt[0])||o(rt[0])){rr=no(rt);var Je=Rr(rt,rr,Ze.dtype);tt(Je,$t),tn.freeType(Je)}else B.raise("invalid buffer data")}else if(Yn(rt)){rr=rt.shape;var $e=rt.stride,nr=0,Te=0,Lt=0,br=0;rr.length===1?(nr=rr[0],Te=1,Lt=$e[0],br=0):rr.length===2?(nr=rr[0],Te=rr[1],Lt=$e[0],br=$e[1]):B.raise("invalid shape");var ur=Array.isArray(rt.data)?Ze.dtype:Kn(rt.data),mr=tn.allocType(ur,nr*Te);qi(mr,rt.data,nr,Te,Lt,br,rt.offset),tt(mr,$t),tn.freeType(mr)}else B.raise("invalid data for buffer subdata");return At}return st||At(Se),At._reglType="buffer",At._buffer=Ze,At.subdata=ht,J.profile&&(At.stats=Ze.stats),At.destroy=function(){_t(Ze)},At}function dt(){An(ke).forEach(function(Se){Se.buffer=A.createBuffer(),A.bindBuffer(Se.type,Se.buffer),A.bufferData(Se.type,Se.persistentData||Se.byteLength,Se.usage)})}return J.profile&&(G.getTotalBufferSize=function(){var Se=0;return Object.keys(ke).forEach(function(Ue){Se+=ke[Ue].stats.size}),Se}),{create:it,createStream:at,destroyStream:ft,clear:function(){An(ke).forEach(_t),ot.forEach(_t)},getBuffer:function(Se){return Se&&Se._buffer instanceof Ge?Se._buffer:null},restore:dt,_initBuffer:pt}}var Ns=0,nl=0,xu=1,_n=1,xi=4,Na=4,Pn={points:Ns,point:nl,lines:xu,line:_n,triangles:xi,triangle:Na,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},js=0,Zi=1,Wo=4,ja=5120,Io=5121,Su=5122,Nn=5123,oo=5124,io=5125,Ji=34963,Tu=35040,Au=35044;function Ms(A,G,J,Ie){var Ve={},ke=0,Ge={uint8:Io,uint16:Nn};G.oes_element_index_uint&&(Ge.uint32=io);function ot(dt){this.id=ke++,Ve[this.id]=this,this.buffer=dt,this.primType=Wo,this.vertCount=0,this.type=0}ot.prototype.bind=function(){this.buffer.bind()};var at=[];function ft(dt){var Se=at.pop();return Se||(Se=new ot(J.create(null,Ji,!0,!1)._buffer)),pt(Se,dt,Tu,-1,-1,0,0),Se}function ut(dt){at.push(dt)}function pt(dt,Se,Ue,st,St,Ze,At){dt.buffer.bind();var tt;if(Se){var ht=At;!At&&(!o(Se)||Yn(Se)&&!o(Se.data))&&(ht=G.oes_element_index_uint?io:Nn),J._initBuffer(dt.buffer,Se,Ue,ht,3)}else A.bufferData(Ji,Ze,Ue),dt.buffer.dtype=tt||Io,dt.buffer.usage=Ue,dt.buffer.dimension=3,dt.buffer.byteLength=Ze;if(tt=At,!At){switch(dt.buffer.dtype){case Io:case ja:tt=Io;break;case Nn:case Su:tt=Nn;break;case io:case oo:tt=io;break;default:B.raise("unsupported type for element array")}dt.buffer.dtype=tt}dt.type=tt,B(tt!==io||!!G.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var rt=St;rt<0&&(rt=dt.buffer.byteLength,tt===Nn?rt>>=1:tt===io&&(rt>>=2)),dt.vertCount=rt;var vt=st;if(st<0){vt=Wo;var $t=dt.buffer.dimension;$t===1&&(vt=js),$t===2&&(vt=Zi),$t===3&&(vt=Wo)}dt.primType=vt}function _t(dt){Ie.elementsCount--,B(dt.buffer!==null,"must not double destroy elements"),delete Ve[dt.id],dt.buffer.destroy(),dt.buffer=null}function it(dt,Se){var Ue=J.create(null,Ji,!0),st=new ot(Ue._buffer);Ie.elementsCount++;function St(Ze){if(!Ze)Ue(),st.primType=Wo,st.vertCount=0,st.type=Io;else if(typeof Ze=="number")Ue(Ze),st.primType=Wo,st.vertCount=Ze|0,st.type=Io;else{var At=null,tt=Au,ht=-1,rt=-1,vt=0,$t=0;Array.isArray(Ze)||o(Ze)||Yn(Ze)?At=Ze:(B.type(Ze,"object","invalid arguments for elements"),"data"in Ze&&(At=Ze.data,B(Array.isArray(At)||o(At)||Yn(At),"invalid data for element buffer")),"usage"in Ze&&(B.parameter(Ze.usage,To,"invalid element buffer usage"),tt=To[Ze.usage]),"primitive"in Ze&&(B.parameter(Ze.primitive,Pn,"invalid element buffer primitive"),ht=Pn[Ze.primitive]),"count"in Ze&&(B(typeof Ze.count=="number"&&Ze.count>=0,"invalid vertex count for elements"),rt=Ze.count|0),"type"in Ze&&(B.parameter(Ze.type,Ge,"invalid buffer type"),$t=Ge[Ze.type]),"length"in Ze?vt=Ze.length|0:(vt=rt,$t===Nn||$t===Su?vt*=2:($t===io||$t===oo)&&(vt*=4))),pt(st,At,tt,ht,rt,vt,$t)}return St}return St(dt),St._reglType="elements",St._elements=st,St.subdata=function(Ze,At){return Ue.subdata(Ze,At),St},St.destroy=function(){_t(st)},St}return{create:it,createStream:ft,destroyStream:ut,getElements:function(dt){return typeof dt=="function"&&dt._elements instanceof ot?dt._elements:null},clear:function(){An(Ve).forEach(_t)}}}var Rs=new Float32Array(1),Ma=new Uint32Array(Rs.buffer),ci=5123;function _(A){for(var G=tn.allocType(ci,A.length),J=0;J<A.length;++J)if(isNaN(A[J]))G[J]=65535;else if(A[J]===1/0)G[J]=31744;else if(A[J]===-1/0)G[J]=64512;else{Rs[0]=A[J];var Ie=Ma[0],Ve=Ie>>>31<<15,ke=(Ie<<1>>>24)-127,Ge=Ie>>13&(1<<10)-1;if(ke<-24)G[J]=Ve;else if(ke<-14){var ot=-14-ke;G[J]=Ve+(Ge+(1<<10)>>ot)}else ke>15?G[J]=Ve+31744:G[J]=Ve+(ke+15<<10)+Ge}return G}function E(A){return Array.isArray(A)||o(A)}var P=function(A){return!(A&A-1)&&!!A},I=34467,q=3553,Ae=34067,Xe=34069,gt=6408,Vt=6406,Ar=6407,cr=6409,Gr=6410,Or=32854,Ur=32855,ao=36194,rn=32819,qn=32820,Qi=33635,ol=34042,Ra=6402,ea=34041,Si=35904,ta=35906,wn=36193,Da=33776,li=33777,ra=33778,Pu=33779,il=35986,Gf=35987,Uf=34798,al=35840,zf=35841,Ds=35842,Hf=35843,Xf=36196,ka=5121,ul=5123,ks=5125,Nu=5126,Ph=10242,Cs=10243,Is=10497,ju=33071,Nh=33648,Ls=10240,Ca=10241,sl=9728,Vf=9729,Fs=9984,Wf=9985,Yf=9986,cl=9987,jh=33170,Mu=4352,Mh=4353,Rh=4354,$f=34046,Dh=3317,Zn=37440,kh=37441,Ch=37443,Kf=37444,Ia=33984,Ih=[Fs,Yf,Wf,cl],Bs=[0,cr,Gr,Ar,gt],Po={};Po[cr]=Po[Vt]=Po[Ra]=1,Po[ea]=Po[Gr]=2,Po[Ar]=Po[Si]=3,Po[gt]=Po[ta]=4;function Jr(A){return"[object "+A+"]"}var ll=Jr("HTMLCanvasElement"),fl=Jr("OffscreenCanvas"),dl=Jr("CanvasRenderingContext2D"),pl=Jr("ImageBitmap"),hl=Jr("HTMLImageElement"),vl=Jr("HTMLVideoElement"),qf=Object.keys(ro).concat([ll,fl,dl,pl,hl,vl]),na=[];na[ka]=1,na[Nu]=4,na[wn]=2,na[ul]=2,na[ks]=4;var jn=[];jn[Or]=2,jn[Ur]=2,jn[ao]=2,jn[ea]=4,jn[Da]=.5,jn[li]=.5,jn[ra]=1,jn[Pu]=1,jn[il]=.5,jn[Gf]=1,jn[Uf]=1,jn[al]=.5,jn[zf]=.25,jn[Ds]=.5,jn[Hf]=.25,jn[Xf]=.5;function yl(A){return Array.isArray(A)&&(A.length===0||typeof A[0]=="number")}function gl(A){if(!Array.isArray(A))return!1;var G=A.length;return!(G===0||!E(A[0]))}function Ti(A){return Object.prototype.toString.call(A)}function ml(A){return Ti(A)===ll}function bl(A){return Ti(A)===fl}function Zf(A){return Ti(A)===dl}function Jf(A){return Ti(A)===pl}function Qf(A){return Ti(A)===hl}function Ru(A){return Ti(A)===vl}function Mn(A){if(!A)return!1;var G=Ti(A);return qf.indexOf(G)>=0?!0:yl(A)||gl(A)||Yn(A)}function ed(A){return ro[Object.prototype.toString.call(A)]|0}function td(A,G){var J=G.length;switch(A.type){case ka:case ul:case ks:case Nu:var Ie=tn.allocType(A.type,J);Ie.set(G),A.data=Ie;break;case wn:A.data=_(G);break;default:B.raise("unsupported texture type, must specify a typed array")}}function Rn(A,G){return tn.allocType(A.type===wn?Nu:A.type,G)}function zr(A,G){A.type===wn?(A.data=_(G),tn.freeType(G)):A.data=G}function rd(A,G,J,Ie,Ve,ke){for(var Ge=A.width,ot=A.height,at=A.channels,ft=Ge*ot*at,ut=Rn(A,ft),pt=0,_t=0;_t<ot;++_t)for(var it=0;it<Ge;++it)for(var dt=0;dt<at;++dt)ut[pt++]=G[J*it+Ie*_t+Ve*dt+ke];zr(A,ut)}function Pr(A,G,J,Ie,Ve,ke){var Ge;if(typeof jn[A]<"u"?Ge=jn[A]:Ge=Po[A]*na[G],ke&&(Ge*=6),Ve){for(var ot=0,at=J;at>=1;)ot+=Ge*at*at,at/=2;return ot}else return Ge*J*Ie}function xn(A,G,J,Ie,Ve,ke,Ge){var ot={"don't care":Mu,"dont care":Mu,nice:Rh,fast:Mh},at={repeat:Is,clamp:ju,mirror:Nh},ft={nearest:sl,linear:Vf},ut=s({mipmap:cl,"nearest mipmap nearest":Fs,"linear mipmap nearest":Wf,"nearest mipmap linear":Yf,"linear mipmap linear":cl},ft),pt={none:0,browser:Kf},_t={uint8:ka,rgba4:rn,rgb565:Qi,"rgb5 a1":qn},it={alpha:Vt,luminance:cr,"luminance alpha":Gr,rgb:Ar,rgba:gt,rgba4:Or,"rgb5 a1":Ur,rgb565:ao},dt={};G.ext_srgb&&(it.srgb=Si,it.srgba=ta),G.oes_texture_float&&(_t.float32=_t.float=Nu),G.oes_texture_half_float&&(_t.float16=_t["half float"]=wn),G.webgl_depth_texture&&(s(it,{depth:Ra,"depth stencil":ea}),s(_t,{uint16:ul,uint32:ks,"depth stencil":ol})),G.webgl_compressed_texture_s3tc&&s(dt,{"rgb s3tc dxt1":Da,"rgba s3tc dxt1":li,"rgba s3tc dxt3":ra,"rgba s3tc dxt5":Pu}),G.webgl_compressed_texture_atc&&s(dt,{"rgb atc":il,"rgba atc explicit alpha":Gf,"rgba atc interpolated alpha":Uf}),G.webgl_compressed_texture_pvrtc&&s(dt,{"rgb pvrtc 4bppv1":al,"rgb pvrtc 2bppv1":zf,"rgba pvrtc 4bppv1":Ds,"rgba pvrtc 2bppv1":Hf}),G.webgl_compressed_texture_etc1&&(dt["rgb etc1"]=Xf);var Se=Array.prototype.slice.call(A.getParameter(I));Object.keys(dt).forEach(function(F){var Le=dt[F];Se.indexOf(Le)>=0&&(it[F]=Le)});var Ue=Object.keys(it);J.textureFormats=Ue;var st=[];Object.keys(it).forEach(function(F){var Le=it[F];st[Le]=F});var St=[];Object.keys(_t).forEach(function(F){var Le=_t[F];St[Le]=F});var Ze=[];Object.keys(ft).forEach(function(F){var Le=ft[F];Ze[Le]=F});var At=[];Object.keys(ut).forEach(function(F){var Le=ut[F];At[Le]=F});var tt=[];Object.keys(at).forEach(function(F){var Le=at[F];tt[Le]=F});var ht=Ue.reduce(function(F,Le){var De=it[Le];return De===cr||De===Vt||De===cr||De===Gr||De===Ra||De===ea||G.ext_srgb&&(De===Si||De===ta)?F[De]=De:De===Ur||Le.indexOf("rgba")>=0?F[De]=gt:F[De]=Ar,F},{});function rt(){this.internalformat=gt,this.format=gt,this.type=ka,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Kf,this.width=0,this.height=0,this.channels=0}function vt(F,Le){F.internalformat=Le.internalformat,F.format=Le.format,F.type=Le.type,F.compressed=Le.compressed,F.premultiplyAlpha=Le.premultiplyAlpha,F.flipY=Le.flipY,F.unpackAlignment=Le.unpackAlignment,F.colorSpace=Le.colorSpace,F.width=Le.width,F.height=Le.height,F.channels=Le.channels}function $t(F,Le){if(!(typeof Le!="object"||!Le)){if("premultiplyAlpha"in Le&&(B.type(Le.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),F.premultiplyAlpha=Le.premultiplyAlpha),"flipY"in Le&&(B.type(Le.flipY,"boolean","invalid texture flip"),F.flipY=Le.flipY),"alignment"in Le&&(B.oneOf(Le.alignment,[1,2,4,8],"invalid texture unpack alignment"),F.unpackAlignment=Le.alignment),"colorSpace"in Le&&(B.parameter(Le.colorSpace,pt,"invalid colorSpace"),F.colorSpace=pt[Le.colorSpace]),"type"in Le){var De=Le.type;B(G.oes_texture_float||!(De==="float"||De==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),B(G.oes_texture_half_float||!(De==="half float"||De==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),B(G.webgl_depth_texture||!(De==="uint16"||De==="uint32"||De==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),B.parameter(De,_t,"invalid texture type"),F.type=_t[De]}var jt=F.width,Er=F.height,V=F.channels,k=!1;"shape"in Le?(B(Array.isArray(Le.shape)&&Le.shape.length>=2,"shape must be an array"),jt=Le.shape[0],Er=Le.shape[1],Le.shape.length===3&&(V=Le.shape[2],B(V>0&&V<=4,"invalid number of channels"),k=!0),B(jt>=0&&jt<=J.maxTextureSize,"invalid width"),B(Er>=0&&Er<=J.maxTextureSize,"invalid height")):("radius"in Le&&(jt=Er=Le.radius,B(jt>=0&&jt<=J.maxTextureSize,"invalid radius")),"width"in Le&&(jt=Le.width,B(jt>=0&&jt<=J.maxTextureSize,"invalid width")),"height"in Le&&(Er=Le.height,B(Er>=0&&Er<=J.maxTextureSize,"invalid height")),"channels"in Le&&(V=Le.channels,B(V>0&&V<=4,"invalid number of channels"),k=!0)),F.width=jt|0,F.height=Er|0,F.channels=V|0;var ue=!1;if("format"in Le){var we=Le.format;B(G.webgl_depth_texture||!(we==="depth"||we==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),B.parameter(we,it,"invalid texture format");var Pe=F.internalformat=it[we];F.format=ht[Pe],we in _t&&("type"in Le||(F.type=_t[we])),we in dt&&(F.compressed=!0),ue=!0}!k&&ue?F.channels=Po[F.format]:k&&!ue?F.channels!==Bs[F.format]&&(F.format=F.internalformat=Bs[F.channels]):ue&&k&&B(F.channels===Po[F.format],"number of channels inconsistent with specified format")}}function rr(F){A.pixelStorei(Zn,F.flipY),A.pixelStorei(kh,F.premultiplyAlpha),A.pixelStorei(Ch,F.colorSpace),A.pixelStorei(Dh,F.unpackAlignment)}function Et(){rt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Je(F,Le){var De=null;if(Mn(Le)?De=Le:Le&&(B.type(Le,"object","invalid pixel data type"),$t(F,Le),"x"in Le&&(F.xOffset=Le.x|0),"y"in Le&&(F.yOffset=Le.y|0),Mn(Le.data)&&(De=Le.data)),B(!F.compressed||De instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Le.copy){B(!De,"can not specify copy and data field for the same texture");var jt=Ve.viewportWidth,Er=Ve.viewportHeight;F.width=F.width||jt-F.xOffset,F.height=F.height||Er-F.yOffset,F.needsCopy=!0,B(F.xOffset>=0&&F.xOffset<jt&&F.yOffset>=0&&F.yOffset<Er&&F.width>0&&F.width<=jt&&F.height>0&&F.height<=Er,"copy texture read out of bounds")}else if(!De)F.width=F.width||1,F.height=F.height||1,F.channels=F.channels||4;else if(o(De))F.channels=F.channels||4,F.data=De,!("type"in Le)&&F.type===ka&&(F.type=ed(De));else if(yl(De))F.channels=F.channels||4,td(F,De),F.alignment=1,F.needsFree=!0;else if(Yn(De)){var V=De.data;!Array.isArray(V)&&F.type===ka&&(F.type=ed(V));var k=De.shape,ue=De.stride,we,Pe,le,ne,me,X;k.length===3?(le=k[2],X=ue[2]):(B(k.length===2,"invalid ndarray pixel data, must be 2 or 3D"),le=1,X=1),we=k[0],Pe=k[1],ne=ue[0],me=ue[1],F.alignment=1,F.width=we,F.height=Pe,F.channels=le,F.format=F.internalformat=Bs[le],F.needsFree=!0,rd(F,V,ne,me,X,De.offset)}else if(ml(De)||bl(De)||Zf(De))ml(De)||bl(De)?F.element=De:F.element=De.canvas,F.width=F.element.width,F.height=F.element.height,F.channels=4;else if(Jf(De))F.element=De,F.width=De.width,F.height=De.height,F.channels=4;else if(Qf(De))F.element=De,F.width=De.naturalWidth,F.height=De.naturalHeight,F.channels=4;else if(Ru(De))F.element=De,F.width=De.videoWidth,F.height=De.videoHeight,F.channels=4;else if(gl(De)){var te=F.width||De[0].length,H=F.height||De.length,Ee=F.channels;E(De[0][0])?Ee=Ee||De[0][0].length:Ee=Ee||1;for(var Me=ho.shape(De),We=1,Ke=0;Ke<Me.length;++Ke)We*=Me[Ke];var He=Rn(F,We);ho.flatten(De,Me,"",He),zr(F,He),F.alignment=1,F.width=te,F.height=H,F.channels=Ee,F.format=F.internalformat=Bs[Ee],F.needsFree=!0}F.type===Nu?B(J.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):F.type===wn&&B(J.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function $e(F,Le,De){var jt=F.element,Er=F.data,V=F.internalformat,k=F.format,ue=F.type,we=F.width,Pe=F.height;rr(F),jt?A.texImage2D(Le,De,k,k,ue,jt):F.compressed?A.compressedTexImage2D(Le,De,V,we,Pe,0,Er):F.needsCopy?(Ie(),A.copyTexImage2D(Le,De,k,F.xOffset,F.yOffset,we,Pe,0)):A.texImage2D(Le,De,k,we,Pe,0,k,ue,Er||null)}function nr(F,Le,De,jt,Er){var V=F.element,k=F.data,ue=F.internalformat,we=F.format,Pe=F.type,le=F.width,ne=F.height;rr(F),V?A.texSubImage2D(Le,Er,De,jt,we,Pe,V):F.compressed?A.compressedTexSubImage2D(Le,Er,De,jt,ue,le,ne,k):F.needsCopy?(Ie(),A.copyTexSubImage2D(Le,Er,De,jt,F.xOffset,F.yOffset,le,ne)):A.texSubImage2D(Le,Er,De,jt,le,ne,we,Pe,k)}var Te=[];function Lt(){return Te.pop()||new Et}function br(F){F.needsFree&&tn.freeType(F.data),Et.call(F),Te.push(F)}function ur(){rt.call(this),this.genMipmaps=!1,this.mipmapHint=Mu,this.mipmask=0,this.images=Array(16)}function mr(F,Le,De){var jt=F.images[0]=Lt();F.mipmask=1,jt.width=F.width=Le,jt.height=F.height=De,jt.channels=F.channels=4}function Mr(F,Le){var De=null;if(Mn(Le))De=F.images[0]=Lt(),vt(De,F),Je(De,Le),F.mipmask=1;else if($t(F,Le),Array.isArray(Le.mipmap))for(var jt=Le.mipmap,Er=0;Er<jt.length;++Er)De=F.images[Er]=Lt(),vt(De,F),De.width>>=Er,De.height>>=Er,Je(De,jt[Er]),F.mipmask|=1<<Er;else De=F.images[0]=Lt(),vt(De,F),Je(De,Le),F.mipmask=1;vt(F,F.images[0]),F.compressed&&(F.internalformat===Da||F.internalformat===li||F.internalformat===ra||F.internalformat===Pu)&&B(F.width%4===0&&F.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function cn(F,Le){for(var De=F.images,jt=0;jt<De.length;++jt){if(!De[jt])return;$e(De[jt],Le,jt)}}var En=[];function xr(){var F=En.pop()||new ur;rt.call(F),F.mipmask=0;for(var Le=0;Le<16;++Le)F.images[Le]=null;return F}function yn(F){for(var Le=F.images,De=0;De<Le.length;++De)Le[De]&&br(Le[De]),Le[De]=null;En.push(F)}function Wr(){this.minFilter=sl,this.magFilter=sl,this.wrapS=ju,this.wrapT=ju,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Mu}function ln(F,Le){if("min"in Le){var De=Le.min;B.parameter(De,ut),F.minFilter=ut[De],Ih.indexOf(F.minFilter)>=0&&!("faces"in Le)&&(F.genMipmaps=!0)}if("mag"in Le){var jt=Le.mag;B.parameter(jt,ft),F.magFilter=ft[jt]}var Er=F.wrapS,V=F.wrapT;if("wrap"in Le){var k=Le.wrap;typeof k=="string"?(B.parameter(k,at),Er=V=at[k]):Array.isArray(k)&&(B.parameter(k[0],at),B.parameter(k[1],at),Er=at[k[0]],V=at[k[1]])}else{if("wrapS"in Le){var ue=Le.wrapS;B.parameter(ue,at),Er=at[ue]}if("wrapT"in Le){var we=Le.wrapT;B.parameter(we,at),V=at[we]}}if(F.wrapS=Er,F.wrapT=V,"anisotropic"in Le){var Pe=Le.anisotropic;B(typeof Pe=="number"&&Pe>=1&&Pe<=J.maxAnisotropic,"aniso samples must be between 1 and "),F.anisotropic=Le.anisotropic}if("mipmap"in Le){var le=!1;switch(typeof Le.mipmap){case"string":B.parameter(Le.mipmap,ot,"invalid mipmap hint"),F.mipmapHint=ot[Le.mipmap],F.genMipmaps=!0,le=!0;break;case"boolean":le=F.genMipmaps=Le.mipmap;break;case"object":B(Array.isArray(Le.mipmap),"invalid mipmap type"),F.genMipmaps=!1,le=!0;break;default:B.raise("invalid mipmap type")}le&&!("min"in Le)&&(F.minFilter=Fs)}}function gn(F,Le){A.texParameteri(Le,Ca,F.minFilter),A.texParameteri(Le,Ls,F.magFilter),A.texParameteri(Le,Ph,F.wrapS),A.texParameteri(Le,Cs,F.wrapT),G.ext_texture_filter_anisotropic&&A.texParameteri(Le,$f,F.anisotropic),F.genMipmaps&&(A.hint(jh,F.mipmapHint),A.generateMipmap(Le))}var Yr=0,Sn={},Fn=J.maxTextureUnits,on=Array(Fn).map(function(){return null});function lr(F){rt.call(this),this.mipmask=0,this.internalformat=gt,this.id=Yr++,this.refCount=1,this.target=F,this.texture=A.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wr,Ge.profile&&(this.stats={size:0})}function mn(F){A.activeTexture(Ia),A.bindTexture(F.target,F.texture)}function Nr(){var F=on[0];F?A.bindTexture(F.target,F.texture):A.bindTexture(q,null)}function Jt(F){var Le=F.texture;B(Le,"must not double destroy texture");var De=F.unit,jt=F.target;De>=0&&(A.activeTexture(Ia+De),A.bindTexture(jt,null),on[De]=null),A.deleteTexture(Le),F.texture=null,F.params=null,F.pixels=null,F.refCount=0,delete Sn[F.id],ke.textureCount--}s(lr.prototype,{bind:function(){var F=this;F.bindCount+=1;var Le=F.unit;if(Le<0){for(var De=0;De<Fn;++De){var jt=on[De];if(jt){if(jt.bindCount>0)continue;jt.unit=-1}on[De]=F,Le=De;break}Le>=Fn&&B.raise("insufficient number of texture units"),Ge.profile&&ke.maxTextureUnits<Le+1&&(ke.maxTextureUnits=Le+1),F.unit=Le,A.activeTexture(Ia+Le),A.bindTexture(F.target,F.texture)}return Le},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Jt(this)}});function _r(F,Le){var De=new lr(q);Sn[De.id]=De,ke.textureCount++;function jt(k,ue){var we=De.texInfo;Wr.call(we);var Pe=xr();return typeof k=="number"?typeof ue=="number"?mr(Pe,k|0,ue|0):mr(Pe,k|0,k|0):k?(B.type(k,"object","invalid arguments to regl.texture"),ln(we,k),Mr(Pe,k)):mr(Pe,1,1),we.genMipmaps&&(Pe.mipmask=(Pe.width<<1)-1),De.mipmask=Pe.mipmask,vt(De,Pe),B.texture2D(we,Pe,J),De.internalformat=Pe.internalformat,jt.width=Pe.width,jt.height=Pe.height,mn(De),cn(Pe,q),gn(we,q),Nr(),yn(Pe),Ge.profile&&(De.stats.size=Pr(De.internalformat,De.type,Pe.width,Pe.height,we.genMipmaps,!1)),jt.format=st[De.internalformat],jt.type=St[De.type],jt.mag=Ze[we.magFilter],jt.min=At[we.minFilter],jt.wrapS=tt[we.wrapS],jt.wrapT=tt[we.wrapT],jt}function Er(k,ue,we,Pe){B(!!k,"must specify image data");var le=ue|0,ne=we|0,me=Pe|0,X=Lt();return vt(X,De),X.width=0,X.height=0,Je(X,k),X.width=X.width||(De.width>>me)-le,X.height=X.height||(De.height>>me)-ne,B(De.type===X.type&&De.format===X.format&&De.internalformat===X.internalformat,"incompatible format for texture.subimage"),B(le>=0&&ne>=0&&le+X.width<=De.width&&ne+X.height<=De.height,"texture.subimage write out of bounds"),B(De.mipmask&1<<me,"missing mipmap data"),B(X.data||X.element||X.needsCopy,"missing image data"),mn(De),nr(X,q,le,ne,me),Nr(),br(X),jt}function V(k,ue){var we=k|0,Pe=ue|0||we;if(we===De.width&&Pe===De.height)return jt;jt.width=De.width=we,jt.height=De.height=Pe,mn(De);for(var le=0;De.mipmask>>le;++le){var ne=we>>le,me=Pe>>le;if(!ne||!me)break;A.texImage2D(q,le,De.format,ne,me,0,De.format,De.type,null)}return Nr(),Ge.profile&&(De.stats.size=Pr(De.internalformat,De.type,we,Pe,!1,!1)),jt}return jt(F,Le),jt.subimage=Er,jt.resize=V,jt._reglType="texture2d",jt._texture=De,Ge.profile&&(jt.stats=De.stats),jt.destroy=function(){De.decRef()},jt}function Sr(F,Le,De,jt,Er,V){var k=new lr(Ae);Sn[k.id]=k,ke.cubeCount++;var ue=new Array(6);function we(ne,me,X,te,H,Ee){var Me,We=k.texInfo;for(Wr.call(We),Me=0;Me<6;++Me)ue[Me]=xr();if(typeof ne=="number"||!ne){var Ke=ne|0||1;for(Me=0;Me<6;++Me)mr(ue[Me],Ke,Ke)}else if(typeof ne=="object")if(me)Mr(ue[0],ne),Mr(ue[1],me),Mr(ue[2],X),Mr(ue[3],te),Mr(ue[4],H),Mr(ue[5],Ee);else if(ln(We,ne),$t(k,ne),"faces"in ne){var He=ne.faces;for(B(Array.isArray(He)&&He.length===6,"cube faces must be a length 6 array"),Me=0;Me<6;++Me)B(typeof He[Me]=="object"&&!!He[Me],"invalid input for cube map face"),vt(ue[Me],k),Mr(ue[Me],He[Me])}else for(Me=0;Me<6;++Me)Mr(ue[Me],ne);else B.raise("invalid arguments to cube map");for(vt(k,ue[0]),J.npotTextureCube||B(P(k.width)&&P(k.height),"your browser does not support non power or two texture dimensions"),We.genMipmaps?k.mipmask=(ue[0].width<<1)-1:k.mipmask=ue[0].mipmask,B.textureCube(k,We,ue,J),k.internalformat=ue[0].internalformat,we.width=ue[0].width,we.height=ue[0].height,mn(k),Me=0;Me<6;++Me)cn(ue[Me],Xe+Me);for(gn(We,Ae),Nr(),Ge.profile&&(k.stats.size=Pr(k.internalformat,k.type,we.width,we.height,We.genMipmaps,!0)),we.format=st[k.internalformat],we.type=St[k.type],we.mag=Ze[We.magFilter],we.min=At[We.minFilter],we.wrapS=tt[We.wrapS],we.wrapT=tt[We.wrapT],Me=0;Me<6;++Me)yn(ue[Me]);return we}function Pe(ne,me,X,te,H){B(!!me,"must specify image data"),B(typeof ne=="number"&&ne===(ne|0)&&ne>=0&&ne<6,"invalid face");var Ee=X|0,Me=te|0,We=H|0,Ke=Lt();return vt(Ke,k),Ke.width=0,Ke.height=0,Je(Ke,me),Ke.width=Ke.width||(k.width>>We)-Ee,Ke.height=Ke.height||(k.height>>We)-Me,B(k.type===Ke.type&&k.format===Ke.format&&k.internalformat===Ke.internalformat,"incompatible format for texture.subimage"),B(Ee>=0&&Me>=0&&Ee+Ke.width<=k.width&&Me+Ke.height<=k.height,"texture.subimage write out of bounds"),B(k.mipmask&1<<We,"missing mipmap data"),B(Ke.data||Ke.element||Ke.needsCopy,"missing image data"),mn(k),nr(Ke,Xe+ne,Ee,Me,We),Nr(),br(Ke),we}function le(ne){var me=ne|0;if(me!==k.width){we.width=k.width=me,we.height=k.height=me,mn(k);for(var X=0;X<6;++X)for(var te=0;k.mipmask>>te;++te)A.texImage2D(Xe+X,te,k.format,me>>te,me>>te,0,k.format,k.type,null);return Nr(),Ge.profile&&(k.stats.size=Pr(k.internalformat,k.type,we.width,we.height,!1,!0)),we}}return we(F,Le,De,jt,Er,V),we.subimage=Pe,we.resize=le,we._reglType="textureCube",we._texture=k,Ge.profile&&(we.stats=k.stats),we.destroy=function(){k.decRef()},we}function Br(){for(var F=0;F<Fn;++F)A.activeTexture(Ia+F),A.bindTexture(q,null),on[F]=null;An(Sn).forEach(Jt),ke.cubeCount=0,ke.textureCount=0}Ge.profile&&(ke.getTotalTextureSize=function(){var F=0;return Object.keys(Sn).forEach(function(Le){F+=Sn[Le].stats.size}),F});function Jo(){for(var F=0;F<Fn;++F){var Le=on[F];Le&&(Le.bindCount=0,Le.unit=-1,on[F]=null)}An(Sn).forEach(function(De){De.texture=A.createTexture(),A.bindTexture(De.target,De.texture);for(var jt=0;jt<32;++jt)if(De.mipmask&1<<jt)if(De.target===q)A.texImage2D(q,jt,De.internalformat,De.width>>jt,De.height>>jt,0,De.internalformat,De.type,null);else for(var Er=0;Er<6;++Er)A.texImage2D(Xe+Er,jt,De.internalformat,De.width>>jt,De.height>>jt,0,De.internalformat,De.type,null);gn(De.texInfo,De.target)})}function Wn(){for(var F=0;F<Fn;++F){var Le=on[F];Le&&(Le.bindCount=0,Le.unit=-1,on[F]=null),A.activeTexture(Ia+F),A.bindTexture(q,null),A.bindTexture(Ae,null)}}return{create2D:_r,createCube:Sr,clear:Br,getTexture:function(F){return null},restore:Jo,refresh:Wn}}var ir=36161,Kr=32854,nd=32855,Gs=36194,_l=33189,uo=36168,pn=34041,El=35907,Ol=34836,wl=34842,xl=34843,No=[];No[Kr]=2,No[nd]=2,No[Gs]=2,No[_l]=2,No[uo]=1,No[pn]=4,No[El]=4,No[Ol]=16,No[wl]=8,No[xl]=6;function Sl(A,G,J){return No[A]*G*J}var od=function(A,G,J,Ie,Ve){var ke={rgba4:Kr,rgb565:Gs,"rgb5 a1":nd,depth:_l,stencil:uo,"depth stencil":pn};G.ext_srgb&&(ke.srgba=El),G.ext_color_buffer_half_float&&(ke.rgba16f=wl,ke.rgb16f=xl),G.webgl_color_buffer_float&&(ke.rgba32f=Ol);var Ge=[];Object.keys(ke).forEach(function(it){var dt=ke[it];Ge[dt]=it});var ot=0,at={};function ft(it){this.id=ot++,this.refCount=1,this.renderbuffer=it,this.format=Kr,this.width=0,this.height=0,Ve.profile&&(this.stats={size:0})}ft.prototype.decRef=function(){--this.refCount<=0&&ut(this)};function ut(it){var dt=it.renderbuffer;B(dt,"must not double destroy renderbuffer"),A.bindRenderbuffer(ir,null),A.deleteRenderbuffer(dt),it.renderbuffer=null,it.refCount=0,delete at[it.id],Ie.renderbufferCount--}function pt(it,dt){var Se=new ft(A.createRenderbuffer());at[Se.id]=Se,Ie.renderbufferCount++;function Ue(St,Ze){var At=0,tt=0,ht=Kr;if(typeof St=="object"&&St){var rt=St;if("shape"in rt){var vt=rt.shape;B(Array.isArray(vt)&&vt.length>=2,"invalid renderbuffer shape"),At=vt[0]|0,tt=vt[1]|0}else"radius"in rt&&(At=tt=rt.radius|0),"width"in rt&&(At=rt.width|0),"height"in rt&&(tt=rt.height|0);"format"in rt&&(B.parameter(rt.format,ke,"invalid renderbuffer format"),ht=ke[rt.format])}else typeof St=="number"?(At=St|0,typeof Ze=="number"?tt=Ze|0:tt=At):St?B.raise("invalid arguments to renderbuffer constructor"):At=tt=1;if(B(At>0&&tt>0&&At<=J.maxRenderbufferSize&&tt<=J.maxRenderbufferSize,"invalid renderbuffer size"),!(At===Se.width&&tt===Se.height&&ht===Se.format))return Ue.width=Se.width=At,Ue.height=Se.height=tt,Se.format=ht,A.bindRenderbuffer(ir,Se.renderbuffer),A.renderbufferStorage(ir,ht,At,tt),B(A.getError()===0,"invalid render buffer format"),Ve.profile&&(Se.stats.size=Sl(Se.format,Se.width,Se.height)),Ue.format=Ge[Se.format],Ue}function st(St,Ze){var At=St|0,tt=Ze|0||At;return At===Se.width&&tt===Se.height||(B(At>0&&tt>0&&At<=J.maxRenderbufferSize&&tt<=J.maxRenderbufferSize,"invalid renderbuffer size"),Ue.width=Se.width=At,Ue.height=Se.height=tt,A.bindRenderbuffer(ir,Se.renderbuffer),A.renderbufferStorage(ir,Se.format,At,tt),B(A.getError()===0,"invalid render buffer format"),Ve.profile&&(Se.stats.size=Sl(Se.format,Se.width,Se.height))),Ue}return Ue(it,dt),Ue.resize=st,Ue._reglType="renderbuffer",Ue._renderbuffer=Se,Ve.profile&&(Ue.stats=Se.stats),Ue.destroy=function(){Se.decRef()},Ue}Ve.profile&&(Ie.getTotalRenderbufferSize=function(){var it=0;return Object.keys(at).forEach(function(dt){it+=at[dt].stats.size}),it});function _t(){An(at).forEach(function(it){it.renderbuffer=A.createRenderbuffer(),A.bindRenderbuffer(ir,it.renderbuffer),A.renderbufferStorage(ir,it.format,it.width,it.height)}),A.bindRenderbuffer(ir,null)}return{create:pt,clear:function(){An(at).forEach(ut)},restore:_t}},jo=36160,Us=36161,go=3553,zs=34069,Hs=36064,Mo=36096,id=36128,ad=33306,ud=36053,Lh=36054,Fh=36055,Bh=36057,Du=36061,Gh=36193,sd=5121,cd=5126,ld=6407,Xs=6408,fd=6402,Uh=[ld,Xs],Tl=[];Tl[Xs]=4,Tl[ld]=3;var Vs=[];Vs[sd]=1,Vs[cd]=4,Vs[Gh]=2;var zh=32854,Al=32855,Hh=36194,Xh=33189,Vh=36168,Pl=34041,dd=35907,Wh=34836,pd=34842,Yh=34843,hd=[zh,Al,Hh,dd,pd,Yh,Wh],La={};La[ud]="complete",La[Lh]="incomplete attachment",La[Bh]="incomplete dimensions",La[Fh]="incomplete, missing attachment",La[Du]="unsupported";function vd(A,G,J,Ie,Ve,ke){var Ge={cur:null,next:null,dirty:!1,setFBO:null},ot=["rgba"],at=["rgba4","rgb565","rgb5 a1"];G.ext_srgb&&at.push("srgba"),G.ext_color_buffer_half_float&&at.push("rgba16f","rgb16f"),G.webgl_color_buffer_float&&at.push("rgba32f");var ft=["uint8"];G.oes_texture_half_float&&ft.push("half float","float16"),G.oes_texture_float&&ft.push("float","float32");function ut(Et,Je,$e){this.target=Et,this.texture=Je,this.renderbuffer=$e;var nr=0,Te=0;Je?(nr=Je.width,Te=Je.height):$e&&(nr=$e.width,Te=$e.height),this.width=nr,this.height=Te}function pt(Et){Et&&(Et.texture&&Et.texture._texture.decRef(),Et.renderbuffer&&Et.renderbuffer._renderbuffer.decRef())}function _t(Et,Je,$e){if(Et)if(Et.texture){var nr=Et.texture._texture,Te=Math.max(1,nr.width),Lt=Math.max(1,nr.height);B(Te===Je&&Lt===$e,"inconsistent width/height for supplied texture"),nr.refCount+=1}else{var br=Et.renderbuffer._renderbuffer;B(br.width===Je&&br.height===$e,"inconsistent width/height for renderbuffer"),br.refCount+=1}}function it(Et,Je){Je&&(Je.texture?A.framebufferTexture2D(jo,Et,Je.target,Je.texture._texture.texture,0):A.framebufferRenderbuffer(jo,Et,Us,Je.renderbuffer._renderbuffer.renderbuffer))}function dt(Et){var Je=go,$e=null,nr=null,Te=Et;typeof Et=="object"&&(Te=Et.data,"target"in Et&&(Je=Et.target|0)),B.type(Te,"function","invalid attachment data");var Lt=Te._reglType;return Lt==="texture2d"?($e=Te,B(Je===go)):Lt==="textureCube"?($e=Te,B(Je>=zs&&Je<zs+6,"invalid cube map target")):Lt==="renderbuffer"?(nr=Te,Je=Us):B.raise("invalid regl object for attachment"),new ut(Je,$e,nr)}function Se(Et,Je,$e,nr,Te){if($e){var Lt=Ie.create2D({width:Et,height:Je,format:nr,type:Te});return Lt._texture.refCount=0,new ut(go,Lt,null)}else{var br=Ve.create({width:Et,height:Je,format:nr});return br._renderbuffer.refCount=0,new ut(Us,null,br)}}function Ue(Et){return Et&&(Et.texture||Et.renderbuffer)}function st(Et,Je,$e){Et&&(Et.texture?Et.texture.resize(Je,$e):Et.renderbuffer&&Et.renderbuffer.resize(Je,$e),Et.width=Je,Et.height=$e)}var St=0,Ze={};function At(){this.id=St++,Ze[this.id]=this,this.framebuffer=A.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function tt(Et){Et.colorAttachments.forEach(pt),pt(Et.depthAttachment),pt(Et.stencilAttachment),pt(Et.depthStencilAttachment)}function ht(Et){var Je=Et.framebuffer;B(Je,"must not double destroy framebuffer"),A.deleteFramebuffer(Je),Et.framebuffer=null,ke.framebufferCount--,delete Ze[Et.id]}function rt(Et){var Je;A.bindFramebuffer(jo,Et.framebuffer);var $e=Et.colorAttachments;for(Je=0;Je<$e.length;++Je)it(Hs+Je,$e[Je]);for(Je=$e.length;Je<J.maxColorAttachments;++Je)A.framebufferTexture2D(jo,Hs+Je,go,null,0);A.framebufferTexture2D(jo,ad,go,null,0),A.framebufferTexture2D(jo,Mo,go,null,0),A.framebufferTexture2D(jo,id,go,null,0),it(Mo,Et.depthAttachment),it(id,Et.stencilAttachment),it(ad,Et.depthStencilAttachment);var nr=A.checkFramebufferStatus(jo);!A.isContextLost()&&nr!==ud&&B.raise("framebuffer configuration not supported, status = "+La[nr]),A.bindFramebuffer(jo,Ge.next?Ge.next.framebuffer:null),Ge.cur=Ge.next,A.getError()}function vt(Et,Je){var $e=new At;ke.framebufferCount++;function nr(Lt,br){var ur;B(Ge.next!==$e,"can not update framebuffer which is currently in use");var mr=0,Mr=0,cn=!0,En=!0,xr=null,yn=!0,Wr="rgba",ln="uint8",gn=1,Yr=null,Sn=null,Fn=null,on=!1;if(typeof Lt=="number")mr=Lt|0,Mr=br|0||mr;else if(!Lt)mr=Mr=1;else{B.type(Lt,"object","invalid arguments for framebuffer");var lr=Lt;if("shape"in lr){var mn=lr.shape;B(Array.isArray(mn)&&mn.length>=2,"invalid shape for framebuffer"),mr=mn[0],Mr=mn[1]}else"radius"in lr&&(mr=Mr=lr.radius),"width"in lr&&(mr=lr.width),"height"in lr&&(Mr=lr.height);("color"in lr||"colors"in lr)&&(xr=lr.color||lr.colors,Array.isArray(xr)&&B(xr.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),xr||("colorCount"in lr&&(gn=lr.colorCount|0,B(gn>0,"invalid color buffer count")),"colorTexture"in lr&&(yn=!!lr.colorTexture,Wr="rgba4"),"colorType"in lr&&(ln=lr.colorType,yn?(B(G.oes_texture_float||!(ln==="float"||ln==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),B(G.oes_texture_half_float||!(ln==="half float"||ln==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ln==="half float"||ln==="float16"?(B(G.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wr="rgba16f"):(ln==="float"||ln==="float32")&&(B(G.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wr="rgba32f"),B.oneOf(ln,ft,"invalid color type")),"colorFormat"in lr&&(Wr=lr.colorFormat,ot.indexOf(Wr)>=0?yn=!0:at.indexOf(Wr)>=0?yn=!1:yn?B.oneOf(lr.colorFormat,ot,"invalid color format for texture"):B.oneOf(lr.colorFormat,at,"invalid color format for renderbuffer"))),("depthTexture"in lr||"depthStencilTexture"in lr)&&(on=!!(lr.depthTexture||lr.depthStencilTexture),B(!on||G.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in lr&&(typeof lr.depth=="boolean"?cn=lr.depth:(Yr=lr.depth,En=!1)),"stencil"in lr&&(typeof lr.stencil=="boolean"?En=lr.stencil:(Sn=lr.stencil,cn=!1)),"depthStencil"in lr&&(typeof lr.depthStencil=="boolean"?cn=En=lr.depthStencil:(Fn=lr.depthStencil,cn=!1,En=!1))}var Nr=null,Jt=null,_r=null,Sr=null;if(Array.isArray(xr))Nr=xr.map(dt);else if(xr)Nr=[dt(xr)];else for(Nr=new Array(gn),ur=0;ur<gn;++ur)Nr[ur]=Se(mr,Mr,yn,Wr,ln);B(G.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),B(Nr.length<=J.maxColorAttachments,"too many color attachments, not supported"),mr=mr||Nr[0].width,Mr=Mr||Nr[0].height,Yr?Jt=dt(Yr):cn&&!En&&(Jt=Se(mr,Mr,on,"depth","uint32")),Sn?_r=dt(Sn):En&&!cn&&(_r=Se(mr,Mr,!1,"stencil","uint8")),Fn?Sr=dt(Fn):!Yr&&!Sn&&En&&cn&&(Sr=Se(mr,Mr,on,"depth stencil","depth stencil")),B(!!Yr+!!Sn+!!Fn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Br=null;for(ur=0;ur<Nr.length;++ur)if(_t(Nr[ur],mr,Mr),B(!Nr[ur]||Nr[ur].texture&&Uh.indexOf(Nr[ur].texture._texture.format)>=0||Nr[ur].renderbuffer&&hd.indexOf(Nr[ur].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ur+" is invalid"),Nr[ur]&&Nr[ur].texture){var Jo=Tl[Nr[ur].texture._texture.format]*Vs[Nr[ur].texture._texture.type];Br===null?Br=Jo:B(Br===Jo,"all color attachments much have the same number of bits per pixel.")}return _t(Jt,mr,Mr),B(!Jt||Jt.texture&&Jt.texture._texture.format===fd||Jt.renderbuffer&&Jt.renderbuffer._renderbuffer.format===Xh,"invalid depth attachment for framebuffer object"),_t(_r,mr,Mr),B(!_r||_r.renderbuffer&&_r.renderbuffer._renderbuffer.format===Vh,"invalid stencil attachment for framebuffer object"),_t(Sr,mr,Mr),B(!Sr||Sr.texture&&Sr.texture._texture.format===Pl||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===Pl,"invalid depth-stencil attachment for framebuffer object"),tt($e),$e.width=mr,$e.height=Mr,$e.colorAttachments=Nr,$e.depthAttachment=Jt,$e.stencilAttachment=_r,$e.depthStencilAttachment=Sr,nr.color=Nr.map(Ue),nr.depth=Ue(Jt),nr.stencil=Ue(_r),nr.depthStencil=Ue(Sr),nr.width=$e.width,nr.height=$e.height,rt($e),nr}function Te(Lt,br){B(Ge.next!==$e,"can not resize a framebuffer which is currently in use");var ur=Math.max(Lt|0,1),mr=Math.max(br|0||ur,1);if(ur===$e.width&&mr===$e.height)return nr;for(var Mr=$e.colorAttachments,cn=0;cn<Mr.length;++cn)st(Mr[cn],ur,mr);return st($e.depthAttachment,ur,mr),st($e.stencilAttachment,ur,mr),st($e.depthStencilAttachment,ur,mr),$e.width=nr.width=ur,$e.height=nr.height=mr,rt($e),nr}return nr(Et,Je),s(nr,{resize:Te,_reglType:"framebuffer",_framebuffer:$e,destroy:function(){ht($e),tt($e)},use:function(Lt){Ge.setFBO({framebuffer:nr},Lt)}})}function $t(Et){var Je=Array(6);function $e(Te){var Lt;B(Je.indexOf(Ge.next)<0,"can not update framebuffer which is currently in use");var br={color:null},ur=0,mr=null,Mr="rgba",cn="uint8",En=1;if(typeof Te=="number")ur=Te|0;else if(!Te)ur=1;else{B.type(Te,"object","invalid arguments for framebuffer");var xr=Te;if("shape"in xr){var yn=xr.shape;B(Array.isArray(yn)&&yn.length>=2,"invalid shape for framebuffer"),B(yn[0]===yn[1],"cube framebuffer must be square"),ur=yn[0]}else"radius"in xr&&(ur=xr.radius|0),"width"in xr?(ur=xr.width|0,"height"in xr&&B(xr.height===ur,"must be square")):"height"in xr&&(ur=xr.height|0);("color"in xr||"colors"in xr)&&(mr=xr.color||xr.colors,Array.isArray(mr)&&B(mr.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),mr||("colorCount"in xr&&(En=xr.colorCount|0,B(En>0,"invalid color buffer count")),"colorType"in xr&&(B.oneOf(xr.colorType,ft,"invalid color type"),cn=xr.colorType),"colorFormat"in xr&&(Mr=xr.colorFormat,B.oneOf(xr.colorFormat,ot,"invalid color format for texture"))),"depth"in xr&&(br.depth=xr.depth),"stencil"in xr&&(br.stencil=xr.stencil),"depthStencil"in xr&&(br.depthStencil=xr.depthStencil)}var Wr;if(mr)if(Array.isArray(mr))for(Wr=[],Lt=0;Lt<mr.length;++Lt)Wr[Lt]=mr[Lt];else Wr=[mr];else{Wr=Array(En);var ln={radius:ur,format:Mr,type:cn};for(Lt=0;Lt<En;++Lt)Wr[Lt]=Ie.createCube(ln)}for(br.color=Array(Wr.length),Lt=0;Lt<Wr.length;++Lt){var gn=Wr[Lt];B(typeof gn=="function"&&gn._reglType==="textureCube","invalid cube map"),ur=ur||gn.width,B(gn.width===ur&&gn.height===ur,"invalid cube map shape"),br.color[Lt]={target:zs,data:Wr[Lt]}}for(Lt=0;Lt<6;++Lt){for(var Yr=0;Yr<Wr.length;++Yr)br.color[Yr].target=zs+Lt;Lt>0&&(br.depth=Je[0].depth,br.stencil=Je[0].stencil,br.depthStencil=Je[0].depthStencil),Je[Lt]?Je[Lt](br):Je[Lt]=vt(br)}return s($e,{width:ur,height:ur,color:Wr})}function nr(Te){var Lt,br=Te|0;if(B(br>0&&br<=J.maxCubeMapSize,"invalid radius for cube fbo"),br===$e.width)return $e;var ur=$e.color;for(Lt=0;Lt<ur.length;++Lt)ur[Lt].resize(br);for(Lt=0;Lt<6;++Lt)Je[Lt].resize(br);return $e.width=$e.height=br,$e}return $e(Et),s($e,{faces:Je,resize:nr,_reglType:"framebufferCube",destroy:function(){Je.forEach(function(Te){Te.destroy()})}})}function rr(){Ge.cur=null,Ge.next=null,Ge.dirty=!0,An(Ze).forEach(function(Et){Et.framebuffer=A.createFramebuffer(),rt(Et)})}return s(Ge,{getFramebuffer:function(Et){if(typeof Et=="function"&&Et._reglType==="framebuffer"){var Je=Et._framebuffer;if(Je instanceof At)return Je}return null},create:vt,createCube:$t,clear:function(){An(Ze).forEach(ht)},restore:rr})}var $h=5126,Nl=34962;function jl(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=$h,this.offset=0,this.stride=0,this.divisor=0}function Kh(A,G,J,Ie,Ve){for(var ke=J.maxAttributes,Ge=new Array(ke),ot=0;ot<ke;++ot)Ge[ot]=new jl;var at=0,ft={},ut={Record:jl,scope:{},state:Ge,currentVAO:null,targetVAO:null,restore:_t()?Ze:function(){},createVAO:At,getVAO:dt,destroyBuffer:pt,setVAO:_t()?Se:Ue,clear:_t()?st:function(){}};function pt(tt){for(var ht=0;ht<Ge.length;++ht){var rt=Ge[ht];rt.buffer===tt&&(A.disableVertexAttribArray(ht),rt.buffer=null)}}function _t(){return G.oes_vertex_array_object}function it(){return G.angle_instanced_arrays}function dt(tt){return typeof tt=="function"&&tt._vao?tt._vao:null}function Se(tt){if(tt!==ut.currentVAO){var ht=_t();tt?ht.bindVertexArrayOES(tt.vao):ht.bindVertexArrayOES(null),ut.currentVAO=tt}}function Ue(tt){if(tt!==ut.currentVAO){if(tt)tt.bindAttrs();else for(var ht=it(),rt=0;rt<Ge.length;++rt){var vt=Ge[rt];vt.buffer?(A.enableVertexAttribArray(rt),A.vertexAttribPointer(rt,vt.size,vt.type,vt.normalized,vt.stride,vt.offfset),ht&&vt.divisor&&ht.vertexAttribDivisorANGLE(rt,vt.divisor)):(A.disableVertexAttribArray(rt),A.vertexAttrib4f(rt,vt.x,vt.y,vt.z,vt.w))}ut.currentVAO=tt}}function st(){An(ft).forEach(function(tt){tt.destroy()})}function St(){this.id=++at,this.attributes=[];var tt=_t();tt?this.vao=tt.createVertexArrayOES():this.vao=null,ft[this.id]=this,this.buffers=[]}St.prototype.bindAttrs=function(){for(var tt=it(),ht=this.attributes,rt=0;rt<ht.length;++rt){var vt=ht[rt];vt.buffer?(A.enableVertexAttribArray(rt),A.bindBuffer(Nl,vt.buffer.buffer),A.vertexAttribPointer(rt,vt.size,vt.type,vt.normalized,vt.stride,vt.offset),tt&&vt.divisor&&tt.vertexAttribDivisorANGLE(rt,vt.divisor)):(A.disableVertexAttribArray(rt),A.vertexAttrib4f(rt,vt.x,vt.y,vt.z,vt.w))}for(var $t=ht.length;$t<ke;++$t)A.disableVertexAttribArray($t)},St.prototype.refresh=function(){var tt=_t();tt&&(tt.bindVertexArrayOES(this.vao),this.bindAttrs(),ut.currentVAO=this)},St.prototype.destroy=function(){if(this.vao){var tt=_t();this===ut.currentVAO&&(ut.currentVAO=null,tt.bindVertexArrayOES(null)),tt.deleteVertexArrayOES(this.vao),this.vao=null}ft[this.id]&&(delete ft[this.id],Ie.vaoCount-=1)};function Ze(){var tt=_t();tt&&An(ft).forEach(function(ht){ht.refresh()})}function At(tt){var ht=new St;Ie.vaoCount+=1;function rt(vt){B(Array.isArray(vt),"arguments to vertex array constructor must be an array"),B(vt.length<ke,"too many attributes"),B(vt.length>0,"must specify at least one attribute");var $t={},rr=ht.attributes;rr.length=vt.length;for(var Et=0;Et<vt.length;++Et){var Je=vt[Et],$e=rr[Et]=new jl,nr=Je.data||Je;if(Array.isArray(nr)||o(nr)||Yn(nr)){var Te;ht.buffers[Et]&&(Te=ht.buffers[Et],o(nr)&&Te._buffer.byteLength>=nr.byteLength?Te.subdata(nr):(Te.destroy(),ht.buffers[Et]=null)),ht.buffers[Et]||(Te=ht.buffers[Et]=Ve.create(Je,Nl,!1,!0)),$e.buffer=Ve.getBuffer(Te),$e.size=$e.buffer.dimension|0,$e.normalized=!1,$e.type=$e.buffer.dtype,$e.offset=0,$e.stride=0,$e.divisor=0,$e.state=1,$t[Et]=1}else Ve.getBuffer(Je)?($e.buffer=Ve.getBuffer(Je),$e.size=$e.buffer.dimension|0,$e.normalized=!1,$e.type=$e.buffer.dtype,$e.offset=0,$e.stride=0,$e.divisor=0,$e.state=1):Ve.getBuffer(Je.buffer)?($e.buffer=Ve.getBuffer(Je.buffer),$e.size=(+Je.size||$e.buffer.dimension)|0,$e.normalized=!!Je.normalized||!1,"type"in Je?(B.parameter(Je.type,yo,"invalid buffer type"),$e.type=yo[Je.type]):$e.type=$e.buffer.dtype,$e.offset=(Je.offset||0)|0,$e.stride=(Je.stride||0)|0,$e.divisor=(Je.divisor||0)|0,$e.state=1,B($e.size>=1&&$e.size<=4,"size must be between 1 and 4"),B($e.offset>=0,"invalid offset"),B($e.stride>=0&&$e.stride<=255,"stride must be between 0 and 255"),B($e.divisor>=0,"divisor must be positive"),B(!$e.divisor||!!G.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Je?(B(Et>0,"first attribute must not be a constant"),$e.x=+Je.x||0,$e.y=+Je.y||0,$e.z=+Je.z||0,$e.w=+Je.w||0,$e.state=2):B(!1,"invalid attribute spec for location "+Et)}for(var Lt=0;Lt<ht.buffers.length;++Lt)!$t[Lt]&&ht.buffers[Lt]&&(ht.buffers[Lt].destroy(),ht.buffers[Lt]=null);return ht.refresh(),rt}return rt.destroy=function(){for(var vt=0;vt<ht.buffers.length;++vt)ht.buffers[vt]&&ht.buffers[vt].destroy();ht.buffers.length=0,ht.destroy()},rt._vao=ht,rt._reglType="vao",rt(tt)}return ut}var Ml=35632,qh=35633,yd=35718,gd=35721;function Zh(A,G,J,Ie){var Ve={},ke={};function Ge(Se,Ue,st,St){this.name=Se,this.id=Ue,this.location=st,this.info=St}function ot(Se,Ue){for(var st=0;st<Se.length;++st)if(Se[st].id===Ue.id){Se[st].location=Ue.location;return}Se.push(Ue)}function at(Se,Ue,st){var St=Se===Ml?Ve:ke,Ze=St[Ue];if(!Ze){var At=G.str(Ue);Ze=A.createShader(Se),A.shaderSource(Ze,At),A.compileShader(Ze),B.shaderError(A,Ze,At,Se,st),St[Ue]=Ze}return Ze}var ft={},ut=[],pt=0;function _t(Se,Ue){this.id=pt++,this.fragId=Se,this.vertId=Ue,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ie.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function it(Se,Ue,st){var St,Ze,At=at(Ml,Se.fragId),tt=at(qh,Se.vertId),ht=Se.program=A.createProgram();if(A.attachShader(ht,At),A.attachShader(ht,tt),st)for(St=0;St<st.length;++St){var rt=st[St];A.bindAttribLocation(ht,rt[0],rt[1])}A.linkProgram(ht),B.linkError(A,ht,G.str(Se.fragId),G.str(Se.vertId),Ue);var vt=A.getProgramParameter(ht,yd);Ie.profile&&(Se.stats.uniformsCount=vt);var $t=Se.uniforms;for(St=0;St<vt;++St)if(Ze=A.getActiveUniform(ht,St),Ze)if(Ze.size>1)for(var rr=0;rr<Ze.size;++rr){var Et=Ze.name.replace("[0]","["+rr+"]");ot($t,new Ge(Et,G.id(Et),A.getUniformLocation(ht,Et),Ze))}else ot($t,new Ge(Ze.name,G.id(Ze.name),A.getUniformLocation(ht,Ze.name),Ze));var Je=A.getProgramParameter(ht,gd);Ie.profile&&(Se.stats.attributesCount=Je);var $e=Se.attributes;for(St=0;St<Je;++St)Ze=A.getActiveAttrib(ht,St),Ze&&ot($e,new Ge(Ze.name,G.id(Ze.name),A.getAttribLocation(ht,Ze.name),Ze))}Ie.profile&&(J.getMaxUniformsCount=function(){var Se=0;return ut.forEach(function(Ue){Ue.stats.uniformsCount>Se&&(Se=Ue.stats.uniformsCount)}),Se},J.getMaxAttributesCount=function(){var Se=0;return ut.forEach(function(Ue){Ue.stats.attributesCount>Se&&(Se=Ue.stats.attributesCount)}),Se});function dt(){Ve={},ke={};for(var Se=0;Se<ut.length;++Se)it(ut[Se],null,ut[Se].attributes.map(function(Ue){return[Ue.location,Ue.name]}))}return{clear:function(){var Se=A.deleteShader.bind(A);An(Ve).forEach(Se),Ve={},An(ke).forEach(Se),ke={},ut.forEach(function(Ue){A.deleteProgram(Ue.program)}),ut.length=0,ft={},J.shaderCount=0},program:function(Se,Ue,st,St){B.command(Se>=0,"missing vertex shader",st),B.command(Ue>=0,"missing fragment shader",st);var Ze=ft[Ue];Ze||(Ze=ft[Ue]={});var At=Ze[Se];if(At&&(At.refCount++,!St))return At;var tt=new _t(Ue,Se);return J.shaderCount++,it(tt,st,St),At||(Ze[Se]=tt),ut.push(tt),s(tt,{destroy:function(){if(tt.refCount--,tt.refCount<=0){A.deleteProgram(tt.program);var ht=ut.indexOf(tt);ut.splice(ht,1),J.shaderCount--}Ze[tt.vertId].refCount<=0&&(A.deleteShader(ke[tt.vertId]),delete ke[tt.vertId],delete ft[tt.fragId][tt.vertId]),Object.keys(ft[tt.fragId]).length||(A.deleteShader(Ve[tt.fragId]),delete Ve[tt.fragId],delete ft[tt.fragId])}})},restore:dt,shader:at,frag:-1,vert:-1}}var Qr=6408,ku=5121,nn=3333,Fa=5126;function Jh(A,G,J,Ie,Ve,ke,Ge){function ot(ut){var pt;G.next===null?(B(Ve.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),pt=ku):(B(G.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),pt=G.next.colorAttachments[0].texture._texture.type,ke.oes_texture_float?(B(pt===ku||pt===Fa,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),pt===Fa&&B(Ge.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):B(pt===ku,"Reading from a framebuffer is only allowed for the type 'uint8'"));var _t=0,it=0,dt=Ie.framebufferWidth,Se=Ie.framebufferHeight,Ue=null;o(ut)?Ue=ut:ut&&(B.type(ut,"object","invalid arguments to regl.read()"),_t=ut.x|0,it=ut.y|0,B(_t>=0&&_t<Ie.framebufferWidth,"invalid x offset for regl.read"),B(it>=0&&it<Ie.framebufferHeight,"invalid y offset for regl.read"),dt=(ut.width||Ie.framebufferWidth-_t)|0,Se=(ut.height||Ie.framebufferHeight-it)|0,Ue=ut.data||null),Ue&&(pt===ku?B(Ue instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):pt===Fa&&B(Ue instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),B(dt>0&&dt+_t<=Ie.framebufferWidth,"invalid width for read pixels"),B(Se>0&&Se+it<=Ie.framebufferHeight,"invalid height for read pixels"),J();var st=dt*Se*4;return Ue||(pt===ku?Ue=new Uint8Array(st):pt===Fa&&(Ue=Ue||new Float32Array(st))),B.isTypedArray(Ue,"data buffer for regl.read() must be a typedarray"),B(Ue.byteLength>=st,"data buffer for regl.read() too small"),A.pixelStorei(nn,4),A.readPixels(_t,it,dt,Se,Qr,pt,Ue),Ue}function at(ut){var pt;return G.setFBO({framebuffer:ut.framebuffer},function(){pt=ot(ut)}),pt}function ft(ut){return!ut||!("framebuffer"in ut)?ot(ut):at(ut)}return ft}function Ba(A){return Array.prototype.slice.call(A)}function Ga(A){return Ba(A).join("")}function md(){var A=0,G=[],J=[];function Ie(pt){for(var _t=0;_t<J.length;++_t)if(J[_t]===pt)return G[_t];var it="g"+A++;return G.push(it),J.push(pt),it}function Ve(){var pt=[];function _t(){pt.push.apply(pt,Ba(arguments))}var it=[];function dt(){var Se="v"+A++;return it.push(Se),arguments.length>0&&(pt.push(Se,"="),pt.push.apply(pt,Ba(arguments)),pt.push(";")),Se}return s(_t,{def:dt,toString:function(){return Ga([it.length>0?"var "+it.join(",")+";":"",Ga(pt)])}})}function ke(){var pt=Ve(),_t=Ve(),it=pt.toString,dt=_t.toString;function Se(Ue,st){_t(Ue,st,"=",pt.def(Ue,st),";")}return s(function(){pt.apply(pt,Ba(arguments))},{def:pt.def,entry:pt,exit:_t,save:Se,set:function(Ue,st,St){Se(Ue,st),pt(Ue,st,"=",St,";")},toString:function(){return it()+dt()}})}function Ge(){var pt=Ga(arguments),_t=ke(),it=ke(),dt=_t.toString,Se=it.toString;return s(_t,{then:function(){return _t.apply(_t,Ba(arguments)),this},else:function(){return it.apply(it,Ba(arguments)),this},toString:function(){var Ue=Se();return Ue&&(Ue="else{"+Ue+"}"),Ga(["if(",pt,"){",dt(),"}",Ue])}})}var ot=Ve(),at={};function ft(pt,_t){var it=[];function dt(){var Ze="a"+it.length;return it.push(Ze),Ze}_t=_t||0;for(var Se=0;Se<_t;++Se)dt();var Ue=ke(),st=Ue.toString,St=at[pt]=s(Ue,{arg:dt,toString:function(){return Ga(["function(",it.join(),"){",st(),"}"])}});return St}function ut(){var pt=['"use strict";',ot,"return {"];Object.keys(at).forEach(function(dt){pt.push('"',dt,'":',at[dt].toString(),",")}),pt.push("}");var _t=Ga(pt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),it=Function.apply(null,G.concat(_t));return it.apply(null,J)}return{global:ot,link:Ie,block:Ve,proc:ft,scope:ke,cond:Ge,compile:ut}}var Ua="xyzw".split(""),bd=5121,za=1,Cu=2,Rl=0,Dl=1,kl=2,Ws=3,Ys=4,Cl=5,_d=6,Ed="dither",fi="blend.enable",Il="blend.color",Iu="blend.equation",$s="blend.func",Ks="depth.enable",qs="depth.func",Ll="depth.range",Od="depth.mask",Fl="colorMask",wd="cull.enable",xd="cull.face",Dn="frontFace",Lu="lineWidth",Sd="polygonOffset.enable",Fu="polygonOffset.offset",di="sample.alpha",Td="sample.enable",oa="sample.coverage",Zs="stencil.enable",Bl="stencil.mask",Js="stencil.func",Gl="stencil.opFront",nt="stencil.opBack",Ul="scissor.enable",Bu="scissor.box",Yo="viewport",Ha="profile",Ai="framebuffer",Xa="vert",Va="frag",Pi="elements",Ni="primitive",ji="count",Gu="offset",Uu="instances",Wa="vao",Qs="Width",ec="Height",ia=Ai+Qs,aa=Ai+ec,Ad=Yo+Qs,Pd=Yo+ec,zl="drawingBuffer",tc=zl+Qs,zu=zl+ec,Qh=[$s,Iu,Js,Gl,nt,oa,Yo,Bu,Fu],Jn=34962,Mi=34963,ev=35632,mo=35633,Hl=3553,Xl=34067,Nd=2884,jd=3042,Md=3024,Rd=2960,Dd=2929,Vl=3089,Hu=32823,Xn=32926,tv=32928,Wl=5126,Ya=35664,Xu=35665,Un=35666,hn=5124,rc=35667,Qn=35668,ar=35669,Vu=35670,$a=35671,Ka=35672,Wu=35673,qa=35674,Yu=35675,$u=35676,ua=35678,Ku=35680,nc=4,qu=1028,sa=1029,Yl=2304,Ri=2305,kd=32775,wr=32776,Cd=519,$o=7680,oc=0,Id=1,$l=32774,Ld=513,Kl=36160,rv=36064,Ko={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Fd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],qo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Di={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ic={frag:ev,vert:mo},ql={cw:Yl,ccw:Ri};function ac(A){return Array.isArray(A)||o(A)||Yn(A)}function Za(A){return A.sort(function(G,J){return G===Yo?-1:J===Yo?1:G<J?-1:1})}function vn(A,G,J,Ie){this.thisDep=A,this.contextDep=G,this.propDep=J,this.append=Ie}function Zo(A){return A&&!(A.thisDep||A.contextDep||A.propDep)}function Ir(A){return new vn(!1,!1,!1,A)}function Vn(A,G){var J=A.type;if(J===Rl){var Ie=A.data.length;return new vn(!0,Ie>=1,Ie>=2,G)}else if(J===Ys){var Ve=A.data;return new vn(Ve.thisDep,Ve.contextDep,Ve.propDep,G)}else{if(J===Cl)return new vn(!1,!1,!1,G);if(J===_d){for(var ke=!1,Ge=!1,ot=!1,at=0;at<A.data.length;++at){var ft=A.data[at];if(ft.type===Dl)ot=!0;else if(ft.type===kl)Ge=!0;else if(ft.type===Ws)ke=!0;else if(ft.type===Rl){ke=!0;var ut=ft.data;ut>=1&&(Ge=!0),ut>=2&&(ot=!0)}else ft.type===Ys&&(ke=ke||ft.data.thisDep,Ge=Ge||ft.data.contextDep,ot=ot||ft.data.propDep)}return new vn(ke,Ge,ot,G)}else return new vn(J===Ws,J===kl,J===Dl,G)}}var Ja=new vn(!1,!1,!1,function(){});function nv(A,G,J,Ie,Ve,ke,Ge,ot,at,ft,ut,pt,_t,it,dt){var Se=ft.Record,Ue={add:32774,subtract:32778,"reverse subtract":32779};J.ext_blend_minmax&&(Ue.min=kd,Ue.max=wr);var st=J.angle_instanced_arrays,St=J.webgl_draw_buffers,Ze={dirty:!0,profile:dt.profile},At={},tt=[],ht={},rt={};function vt(V){return V.replace(".","_")}function $t(V,k,ue){var we=vt(V);tt.push(V),At[we]=Ze[we]=!!ue,ht[we]=k}function rr(V,k,ue){var we=vt(V);tt.push(V),Array.isArray(ue)?(Ze[we]=ue.slice(),At[we]=ue.slice()):Ze[we]=At[we]=ue,rt[we]=k}$t(Ed,Md),$t(fi,jd),rr(Il,"blendColor",[0,0,0,0]),rr(Iu,"blendEquationSeparate",[$l,$l]),rr($s,"blendFuncSeparate",[Id,oc,Id,oc]),$t(Ks,Dd,!0),rr(qs,"depthFunc",Ld),rr(Ll,"depthRange",[0,1]),rr(Od,"depthMask",!0),rr(Fl,Fl,[!0,!0,!0,!0]),$t(wd,Nd),rr(xd,"cullFace",sa),rr(Dn,Dn,Ri),rr(Lu,Lu,1),$t(Sd,Hu),rr(Fu,"polygonOffset",[0,0]),$t(di,Xn),$t(Td,tv),rr(oa,"sampleCoverage",[1,!1]),$t(Zs,Rd),rr(Bl,"stencilMask",-1),rr(Js,"stencilFunc",[Cd,0,-1]),rr(Gl,"stencilOpSeparate",[qu,$o,$o,$o]),rr(nt,"stencilOpSeparate",[sa,$o,$o,$o]),$t(Ul,Vl),rr(Bu,"scissor",[0,0,A.drawingBufferWidth,A.drawingBufferHeight]),rr(Yo,Yo,[0,0,A.drawingBufferWidth,A.drawingBufferHeight]);var Et={gl:A,context:_t,strings:G,next:At,current:Ze,draw:pt,elements:ke,buffer:Ve,shader:ut,attributes:ft.state,vao:ft,uniforms:at,framebuffer:ot,extensions:J,timer:it,isBufferArgs:ac},Je={primTypes:Pn,compareFuncs:qo,blendFuncs:Ko,blendEquations:Ue,stencilOps:Di,glTypes:yo,orientationType:ql};B.optional(function(){Et.isArrayLike=E}),St&&(Je.backBuffer=[sa],Je.drawBuffer=Cr(Ie.maxDrawbuffers,function(V){return V===0?[0]:Cr(V,function(k){return rv+k})}));var $e=0;function nr(){var V=md(),k=V.link,ue=V.global;V.id=$e++,V.batchId="0";var we=k(Et),Pe=V.shared={props:"a0"};Object.keys(Et).forEach(function(te){Pe[te]=ue.def(we,".",te)}),B.optional(function(){V.CHECK=k(B),V.commandStr=B.guessCommand(),V.command=k(V.commandStr),V.assert=function(te,H,Ee){te("if(!(",H,"))",this.CHECK,".commandRaise(",k(Ee),",",this.command,");")},Je.invalidBlendCombinations=Fd});var le=V.next={},ne=V.current={};Object.keys(rt).forEach(function(te){Array.isArray(Ze[te])&&(le[te]=ue.def(Pe.next,".",te),ne[te]=ue.def(Pe.current,".",te))});var me=V.constants={};Object.keys(Je).forEach(function(te){me[te]=ue.def(JSON.stringify(Je[te]))}),V.invoke=function(te,H){switch(H.type){case Rl:var Ee=["this",Pe.context,Pe.props,V.batchId];return te.def(k(H.data),".call(",Ee.slice(0,Math.max(H.data.length+1,4)),")");case Dl:return te.def(Pe.props,H.data);case kl:return te.def(Pe.context,H.data);case Ws:return te.def("this",H.data);case Ys:return H.data.append(V,te),H.data.ref;case Cl:return H.data.toString();case _d:return H.data.map(function(Me){return V.invoke(te,Me)})}},V.attribCache={};var X={};return V.scopeAttrib=function(te){var H=G.id(te);if(H in X)return X[H];var Ee=ft.scope[H];Ee||(Ee=ft.scope[H]=new Se);var Me=X[H]=k(Ee);return Me},V}function Te(V){var k=V.static,ue=V.dynamic,we;if(Ha in k){var Pe=!!k[Ha];we=Ir(function(ne,me){return Pe}),we.enable=Pe}else if(Ha in ue){var le=ue[Ha];we=Vn(le,function(ne,me){return ne.invoke(me,le)})}return we}function Lt(V,k){var ue=V.static,we=V.dynamic;if(Ai in ue){var Pe=ue[Ai];return Pe?(Pe=ot.getFramebuffer(Pe),B.command(Pe,"invalid framebuffer object"),Ir(function(ne,me){var X=ne.link(Pe),te=ne.shared;me.set(te.framebuffer,".next",X);var H=te.context;return me.set(H,"."+ia,X+".width"),me.set(H,"."+aa,X+".height"),X})):Ir(function(ne,me){var X=ne.shared;me.set(X.framebuffer,".next","null");var te=X.context;return me.set(te,"."+ia,te+"."+tc),me.set(te,"."+aa,te+"."+zu),"null"})}else if(Ai in we){var le=we[Ai];return Vn(le,function(ne,me){var X=ne.invoke(me,le),te=ne.shared,H=te.framebuffer,Ee=me.def(H,".getFramebuffer(",X,")");B.optional(function(){ne.assert(me,"!"+X+"||"+Ee,"invalid framebuffer object")}),me.set(H,".next",Ee);var Me=te.context;return me.set(Me,"."+ia,Ee+"?"+Ee+".width:"+Me+"."+tc),me.set(Me,"."+aa,Ee+"?"+Ee+".height:"+Me+"."+zu),Ee})}else return null}function br(V,k,ue){var we=V.static,Pe=V.dynamic;function le(X){if(X in we){var te=we[X];B.commandType(te,"object","invalid "+X,ue.commandStr);var H=!0,Ee=te.x|0,Me=te.y|0,We,Ke;return"width"in te?(We=te.width|0,B.command(We>=0,"invalid "+X,ue.commandStr)):H=!1,"height"in te?(Ke=te.height|0,B.command(Ke>=0,"invalid "+X,ue.commandStr)):H=!1,new vn(!H&&k&&k.thisDep,!H&&k&&k.contextDep,!H&&k&&k.propDep,function(Ut,hr){var It=Ut.shared.context,Qt=We;"width"in te||(Qt=hr.def(It,".",ia,"-",Ee));var fr=Ke;return"height"in te||(fr=hr.def(It,".",aa,"-",Me)),[Ee,Me,Qt,fr]})}else if(X in Pe){var He=Pe[X],ct=Vn(He,function(Ut,hr){var It=Ut.invoke(hr,He);B.optional(function(){Ut.assert(hr,It+"&&typeof "+It+'==="object"',"invalid "+X)});var Qt=Ut.shared.context,fr=hr.def(It,".x|0"),jr=hr.def(It,".y|0"),an=hr.def('"width" in ',It,"?",It,".width|0:","(",Qt,".",ia,"-",fr,")"),eo=hr.def('"height" in ',It,"?",It,".height|0:","(",Qt,".",aa,"-",jr,")");return B.optional(function(){Ut.assert(hr,an+">=0&&"+eo+">=0","invalid "+X)}),[fr,jr,an,eo]});return k&&(ct.thisDep=ct.thisDep||k.thisDep,ct.contextDep=ct.contextDep||k.contextDep,ct.propDep=ct.propDep||k.propDep),ct}else return k?new vn(k.thisDep,k.contextDep,k.propDep,function(Ut,hr){var It=Ut.shared.context;return[0,0,hr.def(It,".",ia),hr.def(It,".",aa)]}):null}var ne=le(Yo);if(ne){var me=ne;ne=new vn(ne.thisDep,ne.contextDep,ne.propDep,function(X,te){var H=me.append(X,te),Ee=X.shared.context;return te.set(Ee,"."+Ad,H[2]),te.set(Ee,"."+Pd,H[3]),H})}return{viewport:ne,scissor_box:le(Bu)}}function ur(V,k){var ue=V.static,we=typeof ue[Va]=="string"&&typeof ue[Xa]=="string";if(we){if(Object.keys(k.dynamic).length>0)return null;var Pe=k.static,le=Object.keys(Pe);if(le.length>0&&typeof Pe[le[0]]=="number"){for(var ne=[],me=0;me<le.length;++me)B(typeof Pe[le[me]]=="number","must specify all vertex attribute locations when using vaos"),ne.push([Pe[le[me]]|0,le[me]]);return ne}}return null}function mr(V,k,ue){var we=V.static,Pe=V.dynamic;function le(H){if(H in we){var Ee=G.id(we[H]);B.optional(function(){ut.shader(ic[H],Ee,B.guessCommand())});var Me=Ir(function(){return Ee});return Me.id=Ee,Me}else if(H in Pe){var We=Pe[H];return Vn(We,function(Ke,He){var ct=Ke.invoke(He,We),Ut=He.def(Ke.shared.strings,".id(",ct,")");return B.optional(function(){He(Ke.shared.shader,".shader(",ic[H],",",Ut,",",Ke.command,");")}),Ut})}return null}var ne=le(Va),me=le(Xa),X=null,te;return Zo(ne)&&Zo(me)?(X=ut.program(me.id,ne.id,null,ue),te=Ir(function(H,Ee){return H.link(X)})):te=new vn(ne&&ne.thisDep||me&&me.thisDep,ne&&ne.contextDep||me&&me.contextDep,ne&&ne.propDep||me&&me.propDep,function(H,Ee){var Me=H.shared.shader,We;ne?We=ne.append(H,Ee):We=Ee.def(Me,".",Va);var Ke;me?Ke=me.append(H,Ee):Ke=Ee.def(Me,".",Xa);var He=Me+".program("+Ke+","+We;return B.optional(function(){He+=","+H.command}),Ee.def(He+")")}),{frag:ne,vert:me,progVar:te,program:X}}function Mr(V,k){var ue=V.static,we=V.dynamic;function Pe(){if(Pi in ue){var H=ue[Pi];ac(H)?H=ke.getElements(ke.create(H,!0)):H&&(H=ke.getElements(H),B.command(H,"invalid elements",k.commandStr));var Ee=Ir(function(We,Ke){if(H){var He=We.link(H);return We.ELEMENTS=He,He}return We.ELEMENTS=null,null});return Ee.value=H,Ee}else if(Pi in we){var Me=we[Pi];return Vn(Me,function(We,Ke){var He=We.shared,ct=He.isBufferArgs,Ut=He.elements,hr=We.invoke(Ke,Me),It=Ke.def("null"),Qt=Ke.def(ct,"(",hr,")"),fr=We.cond(Qt).then(It,"=",Ut,".createStream(",hr,");").else(It,"=",Ut,".getElements(",hr,");");return B.optional(function(){We.assert(fr.else,"!"+hr+"||"+It,"invalid elements")}),Ke.entry(fr),Ke.exit(We.cond(Qt).then(Ut,".destroyStream(",It,");")),We.ELEMENTS=It,It})}return null}var le=Pe();function ne(){if(Ni in ue){var H=ue[Ni];return B.commandParameter(H,Pn,"invalid primitve",k.commandStr),Ir(function(Me,We){return Pn[H]})}else if(Ni in we){var Ee=we[Ni];return Vn(Ee,function(Me,We){var Ke=Me.constants.primTypes,He=Me.invoke(We,Ee);return B.optional(function(){Me.assert(We,He+" in "+Ke,"invalid primitive, must be one of "+Object.keys(Pn))}),We.def(Ke,"[",He,"]")})}else if(le)return Zo(le)?le.value?Ir(function(Me,We){return We.def(Me.ELEMENTS,".primType")}):Ir(function(){return nc}):new vn(le.thisDep,le.contextDep,le.propDep,function(Me,We){var Ke=Me.ELEMENTS;return We.def(Ke,"?",Ke,".primType:",nc)});return null}function me(H,Ee){if(H in ue){var Me=ue[H]|0;return B.command(!Ee||Me>=0,"invalid "+H,k.commandStr),Ir(function(Ke,He){return Ee&&(Ke.OFFSET=Me),Me})}else if(H in we){var We=we[H];return Vn(We,function(Ke,He){var ct=Ke.invoke(He,We);return Ee&&(Ke.OFFSET=ct,B.optional(function(){Ke.assert(He,ct+">=0","invalid "+H)})),ct})}else if(Ee&&le)return Ir(function(Ke,He){return Ke.OFFSET="0",0});return null}var X=me(Gu,!0);function te(){if(ji in ue){var H=ue[ji]|0;return B.command(typeof H=="number"&&H>=0,"invalid vertex count",k.commandStr),Ir(function(){return H})}else if(ji in we){var Ee=we[ji];return Vn(Ee,function(Ke,He){var ct=Ke.invoke(He,Ee);return B.optional(function(){Ke.assert(He,"typeof "+ct+'==="number"&&'+ct+">=0&&"+ct+"===("+ct+"|0)","invalid vertex count")}),ct})}else if(le)if(Zo(le)){if(le)return X?new vn(X.thisDep,X.contextDep,X.propDep,function(Ke,He){var ct=He.def(Ke.ELEMENTS,".vertCount-",Ke.OFFSET);return B.optional(function(){Ke.assert(He,ct+">=0","invalid vertex offset/element buffer too small")}),ct}):Ir(function(Ke,He){return He.def(Ke.ELEMENTS,".vertCount")});var Me=Ir(function(){return-1});return B.optional(function(){Me.MISSING=!0}),Me}else{var We=new vn(le.thisDep||X.thisDep,le.contextDep||X.contextDep,le.propDep||X.propDep,function(Ke,He){var ct=Ke.ELEMENTS;return Ke.OFFSET?He.def(ct,"?",ct,".vertCount-",Ke.OFFSET,":-1"):He.def(ct,"?",ct,".vertCount:-1")});return B.optional(function(){We.DYNAMIC=!0}),We}return null}return{elements:le,primitive:ne(),count:te(),instances:me(Uu,!1),offset:X}}function cn(V,k){var ue=V.static,we=V.dynamic,Pe={};return tt.forEach(function(le){var ne=vt(le);function me(X,te){if(le in ue){var H=X(ue[le]);Pe[ne]=Ir(function(){return H})}else if(le in we){var Ee=we[le];Pe[ne]=Vn(Ee,function(Me,We){return te(Me,We,Me.invoke(We,Ee))})}}switch(le){case wd:case fi:case Ed:case Zs:case Ks:case Ul:case Sd:case di:case Td:case Od:return me(function(X){return B.commandType(X,"boolean",le,k.commandStr),X},function(X,te,H){return B.optional(function(){X.assert(te,"typeof "+H+'==="boolean"',"invalid flag "+le,X.commandStr)}),H});case qs:return me(function(X){return B.commandParameter(X,qo,"invalid "+le,k.commandStr),qo[X]},function(X,te,H){var Ee=X.constants.compareFuncs;return B.optional(function(){X.assert(te,H+" in "+Ee,"invalid "+le+", must be one of "+Object.keys(qo))}),te.def(Ee,"[",H,"]")});case Ll:return me(function(X){return B.command(E(X)&&X.length===2&&typeof X[0]=="number"&&typeof X[1]=="number"&&X[0]<=X[1],"depth range is 2d array",k.commandStr),X},function(X,te,H){B.optional(function(){X.assert(te,X.shared.isArrayLike+"("+H+")&&"+H+".length===2&&typeof "+H+'[0]==="number"&&typeof '+H+'[1]==="number"&&'+H+"[0]<="+H+"[1]","depth range must be a 2d array")});var Ee=te.def("+",H,"[0]"),Me=te.def("+",H,"[1]");return[Ee,Me]});case $s:return me(function(X){B.commandType(X,"object","blend.func",k.commandStr);var te="srcRGB"in X?X.srcRGB:X.src,H="srcAlpha"in X?X.srcAlpha:X.src,Ee="dstRGB"in X?X.dstRGB:X.dst,Me="dstAlpha"in X?X.dstAlpha:X.dst;return B.commandParameter(te,Ko,ne+".srcRGB",k.commandStr),B.commandParameter(H,Ko,ne+".srcAlpha",k.commandStr),B.commandParameter(Ee,Ko,ne+".dstRGB",k.commandStr),B.commandParameter(Me,Ko,ne+".dstAlpha",k.commandStr),B.command(Fd.indexOf(te+", "+Ee)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+te+", "+Ee+")",k.commandStr),[Ko[te],Ko[Ee],Ko[H],Ko[Me]]},function(X,te,H){var Ee=X.constants.blendFuncs;B.optional(function(){X.assert(te,H+"&&typeof "+H+'==="object"',"invalid blend func, must be an object")});function Me(It,Qt){var fr=te.def('"',It,Qt,'" in ',H,"?",H,".",It,Qt,":",H,".",It);return B.optional(function(){X.assert(te,fr+" in "+Ee,"invalid "+le+"."+It+Qt+", must be one of "+Object.keys(Ko))}),fr}var We=Me("src","RGB"),Ke=Me("dst","RGB");B.optional(function(){var It=X.constants.invalidBlendCombinations;X.assert(te,It+".indexOf("+We+'+", "+'+Ke+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var He=te.def(Ee,"[",We,"]"),ct=te.def(Ee,"[",Me("src","Alpha"),"]"),Ut=te.def(Ee,"[",Ke,"]"),hr=te.def(Ee,"[",Me("dst","Alpha"),"]");return[He,Ut,ct,hr]});case Iu:return me(function(X){if(typeof X=="string")return B.commandParameter(X,Ue,"invalid "+le,k.commandStr),[Ue[X],Ue[X]];if(typeof X=="object")return B.commandParameter(X.rgb,Ue,le+".rgb",k.commandStr),B.commandParameter(X.alpha,Ue,le+".alpha",k.commandStr),[Ue[X.rgb],Ue[X.alpha]];B.commandRaise("invalid blend.equation",k.commandStr)},function(X,te,H){var Ee=X.constants.blendEquations,Me=te.def(),We=te.def(),Ke=X.cond("typeof ",H,'==="string"');return B.optional(function(){function He(ct,Ut,hr){X.assert(ct,hr+" in "+Ee,"invalid "+Ut+", must be one of "+Object.keys(Ue))}He(Ke.then,le,H),X.assert(Ke.else,H+"&&typeof "+H+'==="object"',"invalid "+le),He(Ke.else,le+".rgb",H+".rgb"),He(Ke.else,le+".alpha",H+".alpha")}),Ke.then(Me,"=",We,"=",Ee,"[",H,"];"),Ke.else(Me,"=",Ee,"[",H,".rgb];",We,"=",Ee,"[",H,".alpha];"),te(Ke),[Me,We]});case Il:return me(function(X){return B.command(E(X)&&X.length===4,"blend.color must be a 4d array",k.commandStr),Cr(4,function(te){return+X[te]})},function(X,te,H){return B.optional(function(){X.assert(te,X.shared.isArrayLike+"("+H+")&&"+H+".length===4","blend.color must be a 4d array")}),Cr(4,function(Ee){return te.def("+",H,"[",Ee,"]")})});case Bl:return me(function(X){return B.commandType(X,"number",ne,k.commandStr),X|0},function(X,te,H){return B.optional(function(){X.assert(te,"typeof "+H+'==="number"',"invalid stencil.mask")}),te.def(H,"|0")});case Js:return me(function(X){B.commandType(X,"object",ne,k.commandStr);var te=X.cmp||"keep",H=X.ref||0,Ee="mask"in X?X.mask:-1;return B.commandParameter(te,qo,le+".cmp",k.commandStr),B.commandType(H,"number",le+".ref",k.commandStr),B.commandType(Ee,"number",le+".mask",k.commandStr),[qo[te],H,Ee]},function(X,te,H){var Ee=X.constants.compareFuncs;B.optional(function(){function He(){X.assert(te,Array.prototype.join.call(arguments,""),"invalid stencil.func")}He(H+"&&typeof ",H,'==="object"'),He('!("cmp" in ',H,")||(",H,".cmp in ",Ee,")")});var Me=te.def('"cmp" in ',H,"?",Ee,"[",H,".cmp]",":",$o),We=te.def(H,".ref|0"),Ke=te.def('"mask" in ',H,"?",H,".mask|0:-1");return[Me,We,Ke]});case Gl:case nt:return me(function(X){B.commandType(X,"object",ne,k.commandStr);var te=X.fail||"keep",H=X.zfail||"keep",Ee=X.zpass||"keep";return B.commandParameter(te,Di,le+".fail",k.commandStr),B.commandParameter(H,Di,le+".zfail",k.commandStr),B.commandParameter(Ee,Di,le+".zpass",k.commandStr),[le===nt?sa:qu,Di[te],Di[H],Di[Ee]]},function(X,te,H){var Ee=X.constants.stencilOps;B.optional(function(){X.assert(te,H+"&&typeof "+H+'==="object"',"invalid "+le)});function Me(We){return B.optional(function(){X.assert(te,'!("'+We+'" in '+H+")||("+H+"."+We+" in "+Ee+")","invalid "+le+"."+We+", must be one of "+Object.keys(Di))}),te.def('"',We,'" in ',H,"?",Ee,"[",H,".",We,"]:",$o)}return[le===nt?sa:qu,Me("fail"),Me("zfail"),Me("zpass")]});case Fu:return me(function(X){B.commandType(X,"object",ne,k.commandStr);var te=X.factor|0,H=X.units|0;return B.commandType(te,"number",ne+".factor",k.commandStr),B.commandType(H,"number",ne+".units",k.commandStr),[te,H]},function(X,te,H){B.optional(function(){X.assert(te,H+"&&typeof "+H+'==="object"',"invalid "+le)});var Ee=te.def(H,".factor|0"),Me=te.def(H,".units|0");return[Ee,Me]});case xd:return me(function(X){var te=0;return X==="front"?te=qu:X==="back"&&(te=sa),B.command(!!te,ne,k.commandStr),te},function(X,te,H){return B.optional(function(){X.assert(te,H+'==="front"||'+H+'==="back"',"invalid cull.face")}),te.def(H,'==="front"?',qu,":",sa)});case Lu:return me(function(X){return B.command(typeof X=="number"&&X>=Ie.lineWidthDims[0]&&X<=Ie.lineWidthDims[1],"invalid line width, must be a positive number between "+Ie.lineWidthDims[0]+" and "+Ie.lineWidthDims[1],k.commandStr),X},function(X,te,H){return B.optional(function(){X.assert(te,"typeof "+H+'==="number"&&'+H+">="+Ie.lineWidthDims[0]+"&&"+H+"<="+Ie.lineWidthDims[1],"invalid line width")}),H});case Dn:return me(function(X){return B.commandParameter(X,ql,ne,k.commandStr),ql[X]},function(X,te,H){return B.optional(function(){X.assert(te,H+'==="cw"||'+H+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),te.def(H+'==="cw"?'+Yl+":"+Ri)});case Fl:return me(function(X){return B.command(E(X)&&X.length===4,"color.mask must be length 4 array",k.commandStr),X.map(function(te){return!!te})},function(X,te,H){return B.optional(function(){X.assert(te,X.shared.isArrayLike+"("+H+")&&"+H+".length===4","invalid color.mask")}),Cr(4,function(Ee){return"!!"+H+"["+Ee+"]"})});case oa:return me(function(X){B.command(typeof X=="object"&&X,ne,k.commandStr);var te="value"in X?X.value:1,H=!!X.invert;return B.command(typeof te=="number"&&te>=0&&te<=1,"sample.coverage.value must be a number between 0 and 1",k.commandStr),[te,H]},function(X,te,H){B.optional(function(){X.assert(te,H+"&&typeof "+H+'==="object"',"invalid sample.coverage")});var Ee=te.def('"value" in ',H,"?+",H,".value:1"),Me=te.def("!!",H,".invert");return[Ee,Me]})}}),Pe}function En(V,k){var ue=V.static,we=V.dynamic,Pe={};return Object.keys(ue).forEach(function(le){var ne=ue[le],me;if(typeof ne=="number"||typeof ne=="boolean")me=Ir(function(){return ne});else if(typeof ne=="function"){var X=ne._reglType;X==="texture2d"||X==="textureCube"?me=Ir(function(te){return te.link(ne)}):X==="framebuffer"||X==="framebufferCube"?(B.command(ne.color.length>0,'missing color attachment for framebuffer sent to uniform "'+le+'"',k.commandStr),me=Ir(function(te){return te.link(ne.color[0])})):B.commandRaise('invalid data for uniform "'+le+'"',k.commandStr)}else E(ne)?me=Ir(function(te){var H=te.global.def("[",Cr(ne.length,function(Ee){return B.command(typeof ne[Ee]=="number"||typeof ne[Ee]=="boolean","invalid uniform "+le,te.commandStr),ne[Ee]}),"]");return H}):B.commandRaise('invalid or missing data for uniform "'+le+'"',k.commandStr);me.value=ne,Pe[le]=me}),Object.keys(we).forEach(function(le){var ne=we[le];Pe[le]=Vn(ne,function(me,X){return me.invoke(X,ne)})}),Pe}function xr(V,k){var ue=V.static,we=V.dynamic,Pe={};return Object.keys(ue).forEach(function(le){var ne=ue[le],me=G.id(le),X=new Se;if(ac(ne))X.state=za,X.buffer=Ve.getBuffer(Ve.create(ne,Jn,!1,!0)),X.type=0;else{var te=Ve.getBuffer(ne);if(te)X.state=za,X.buffer=te,X.type=0;else if(B.command(typeof ne=="object"&&ne,"invalid data for attribute "+le,k.commandStr),"constant"in ne){var H=ne.constant;X.buffer="null",X.state=Cu,typeof H=="number"?X.x=H:(B.command(E(H)&&H.length>0&&H.length<=4,"invalid constant for attribute "+le,k.commandStr),Ua.forEach(function(Ut,hr){hr<H.length&&(X[Ut]=H[hr])}))}else{ac(ne.buffer)?te=Ve.getBuffer(Ve.create(ne.buffer,Jn,!1,!0)):te=Ve.getBuffer(ne.buffer),B.command(!!te,'missing buffer for attribute "'+le+'"',k.commandStr);var Ee=ne.offset|0;B.command(Ee>=0,'invalid offset for attribute "'+le+'"',k.commandStr);var Me=ne.stride|0;B.command(Me>=0&&Me<256,'invalid stride for attribute "'+le+'", must be integer betweeen [0, 255]',k.commandStr);var We=ne.size|0;B.command(!("size"in ne)||We>0&&We<=4,'invalid size for attribute "'+le+'", must be 1,2,3,4',k.commandStr);var Ke=!!ne.normalized,He=0;"type"in ne&&(B.commandParameter(ne.type,yo,"invalid type for attribute "+le,k.commandStr),He=yo[ne.type]);var ct=ne.divisor|0;"divisor"in ne&&(B.command(ct===0||st,'cannot specify divisor for attribute "'+le+'", instancing not supported',k.commandStr),B.command(ct>=0,'invalid divisor for attribute "'+le+'"',k.commandStr)),B.optional(function(){var Ut=k.commandStr,hr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ne).forEach(function(It){B.command(hr.indexOf(It)>=0,'unknown parameter "'+It+'" for attribute pointer "'+le+'" (valid parameters are '+hr+")",Ut)})}),X.buffer=te,X.state=za,X.size=We,X.normalized=Ke,X.type=He||te.dtype,X.offset=Ee,X.stride=Me,X.divisor=ct}}Pe[le]=Ir(function(Ut,hr){var It=Ut.attribCache;if(me in It)return It[me];var Qt={isStream:!1};return Object.keys(X).forEach(function(fr){Qt[fr]=X[fr]}),X.buffer&&(Qt.buffer=Ut.link(X.buffer),Qt.type=Qt.type||Qt.buffer+".dtype"),It[me]=Qt,Qt})}),Object.keys(we).forEach(function(le){var ne=we[le];function me(X,te){var H=X.invoke(te,ne),Ee=X.shared,Me=X.constants,We=Ee.isBufferArgs,Ke=Ee.buffer;B.optional(function(){X.assert(te,H+"&&(typeof "+H+'==="object"||typeof '+H+'==="function")&&('+We+"("+H+")||"+Ke+".getBuffer("+H+")||"+Ke+".getBuffer("+H+".buffer)||"+We+"("+H+'.buffer)||("constant" in '+H+"&&(typeof "+H+'.constant==="number"||'+Ee.isArrayLike+"("+H+".constant))))",'invalid dynamic attribute "'+le+'"')});var He={isStream:te.def(!1)},ct=new Se;ct.state=za,Object.keys(ct).forEach(function(Qt){He[Qt]=te.def(""+ct[Qt])});var Ut=He.buffer,hr=He.type;te("if(",We,"(",H,")){",He.isStream,"=true;",Ut,"=",Ke,".createStream(",Jn,",",H,");",hr,"=",Ut,".dtype;","}else{",Ut,"=",Ke,".getBuffer(",H,");","if(",Ut,"){",hr,"=",Ut,".dtype;",'}else if("constant" in ',H,"){",He.state,"=",Cu,";","if(typeof "+H+'.constant === "number"){',He[Ua[0]],"=",H,".constant;",Ua.slice(1).map(function(Qt){return He[Qt]}).join("="),"=0;","}else{",Ua.map(function(Qt,fr){return He[Qt]+"="+H+".constant.length>"+fr+"?"+H+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",We,"(",H,".buffer)){",Ut,"=",Ke,".createStream(",Jn,",",H,".buffer);","}else{",Ut,"=",Ke,".getBuffer(",H,".buffer);","}",hr,'="type" in ',H,"?",Me.glTypes,"[",H,".type]:",Ut,".dtype;",He.normalized,"=!!",H,".normalized;");function It(Qt){te(He[Qt],"=",H,".",Qt,"|0;")}return It("size"),It("offset"),It("stride"),It("divisor"),te("}}"),te.exit("if(",He.isStream,"){",Ke,".destroyStream(",Ut,");","}"),He}Pe[le]=Vn(ne,me)}),Pe}function yn(V,k){var ue=V.static,we=V.dynamic;if(Wa in ue){var Pe=ue[Wa];return Pe!==null&&ft.getVAO(Pe)===null&&(Pe=ft.createVAO(Pe)),Ir(function(ne){return ne.link(ft.getVAO(Pe))})}else if(Wa in we){var le=we[Wa];return Vn(le,function(ne,me){var X=ne.invoke(me,le);return me.def(ne.shared.vao+".getVAO("+X+")")})}return null}function Wr(V){var k=V.static,ue=V.dynamic,we={};return Object.keys(k).forEach(function(Pe){var le=k[Pe];we[Pe]=Ir(function(ne,me){return typeof le=="number"||typeof le=="boolean"?""+le:ne.link(le)})}),Object.keys(ue).forEach(function(Pe){var le=ue[Pe];we[Pe]=Vn(le,function(ne,me){return ne.invoke(me,le)})}),we}function ln(V,k,ue,we,Pe){var le=V.static,ne=V.dynamic;B.optional(function(){var It=[Ai,Xa,Va,Pi,Ni,Gu,ji,Uu,Ha,Wa].concat(tt);function Qt(fr){Object.keys(fr).forEach(function(jr){B.command(It.indexOf(jr)>=0,'unknown parameter "'+jr+'"',Pe.commandStr)})}Qt(le),Qt(ne)});var me=ur(V,k),X=Lt(V),te=br(V,X,Pe),H=Mr(V,Pe),Ee=cn(V,Pe),Me=mr(V,Pe,me);function We(It){var Qt=te[It];Qt&&(Ee[It]=Qt)}We(Yo),We(vt(Bu));var Ke=Object.keys(Ee).length>0,He={framebuffer:X,draw:H,shader:Me,state:Ee,dirty:Ke,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(He.profile=Te(V),He.uniforms=En(ue,Pe),He.drawVAO=He.scopeVAO=yn(V),!He.drawVAO&&Me.program&&!me&&J.angle_instanced_arrays){var ct=!0,Ut=Me.program.attributes.map(function(It){var Qt=k.static[It];return ct=ct&&!!Qt,Qt});if(ct&&Ut.length>0){var hr=ft.getVAO(ft.createVAO(Ut));He.drawVAO=new vn(null,null,null,function(It,Qt){return It.link(hr)}),He.useVAO=!0}}return me?He.useVAO=!0:He.attributes=xr(k,Pe),He.context=Wr(we),He}function gn(V,k,ue){var we=V.shared,Pe=we.context,le=V.scope();Object.keys(ue).forEach(function(ne){k.save(Pe,"."+ne);var me=ue[ne],X=me.append(V,k);Array.isArray(X)?le(Pe,".",ne,"=[",X.join(),"];"):le(Pe,".",ne,"=",X,";")}),k(le)}function Yr(V,k,ue,we){var Pe=V.shared,le=Pe.gl,ne=Pe.framebuffer,me;St&&(me=k.def(Pe.extensions,".webgl_draw_buffers"));var X=V.constants,te=X.drawBuffer,H=X.backBuffer,Ee;ue?Ee=ue.append(V,k):Ee=k.def(ne,".next"),we||k("if(",Ee,"!==",ne,".cur){"),k("if(",Ee,"){",le,".bindFramebuffer(",Kl,",",Ee,".framebuffer);"),St&&k(me,".drawBuffersWEBGL(",te,"[",Ee,".colorAttachments.length]);"),k("}else{",le,".bindFramebuffer(",Kl,",null);"),St&&k(me,".drawBuffersWEBGL(",H,");"),k("}",ne,".cur=",Ee,";"),we||k("}")}function Sn(V,k,ue){var we=V.shared,Pe=we.gl,le=V.current,ne=V.next,me=we.current,X=we.next,te=V.cond(me,".dirty");tt.forEach(function(H){var Ee=vt(H);if(!(Ee in ue.state)){var Me,We;if(Ee in ne){Me=ne[Ee],We=le[Ee];var Ke=Cr(Ze[Ee].length,function(ct){return te.def(Me,"[",ct,"]")});te(V.cond(Ke.map(function(ct,Ut){return ct+"!=="+We+"["+Ut+"]"}).join("||")).then(Pe,".",rt[Ee],"(",Ke,");",Ke.map(function(ct,Ut){return We+"["+Ut+"]="+ct}).join(";"),";"))}else{Me=te.def(X,".",Ee);var He=V.cond(Me,"!==",me,".",Ee);te(He),Ee in ht?He(V.cond(Me).then(Pe,".enable(",ht[Ee],");").else(Pe,".disable(",ht[Ee],");"),me,".",Ee,"=",Me,";"):He(Pe,".",rt[Ee],"(",Me,");",me,".",Ee,"=",Me,";")}}}),Object.keys(ue.state).length===0&&te(me,".dirty=false;"),k(te)}function Fn(V,k,ue,we){var Pe=V.shared,le=V.current,ne=Pe.current,me=Pe.gl;Za(Object.keys(ue)).forEach(function(X){var te=ue[X];if(!(we&&!we(te))){var H=te.append(V,k);if(ht[X]){var Ee=ht[X];Zo(te)?H?k(me,".enable(",Ee,");"):k(me,".disable(",Ee,");"):k(V.cond(H).then(me,".enable(",Ee,");").else(me,".disable(",Ee,");")),k(ne,".",X,"=",H,";")}else if(E(H)){var Me=le[X];k(me,".",rt[X],"(",H,");",H.map(function(We,Ke){return Me+"["+Ke+"]="+We}).join(";"),";")}else k(me,".",rt[X],"(",H,");",ne,".",X,"=",H,";")}})}function on(V,k){st&&(V.instancing=k.def(V.shared.extensions,".angle_instanced_arrays"))}function lr(V,k,ue,we,Pe){var le=V.shared,ne=V.stats,me=le.current,X=le.timer,te=ue.profile;function H(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Ee,Me;function We(It){Ee=k.def(),It(Ee,"=",H(),";"),typeof Pe=="string"?It(ne,".count+=",Pe,";"):It(ne,".count++;"),it&&(we?(Me=k.def(),It(Me,"=",X,".getNumPendingQueries();")):It(X,".beginQuery(",ne,");"))}function Ke(It){It(ne,".cpuTime+=",H(),"-",Ee,";"),it&&(we?It(X,".pushScopeStats(",Me,",",X,".getNumPendingQueries(),",ne,");"):It(X,".endQuery();"))}function He(It){var Qt=k.def(me,".profile");k(me,".profile=",It,";"),k.exit(me,".profile=",Qt,";")}var ct;if(te){if(Zo(te)){te.enable?(We(k),Ke(k.exit),He("true")):He("false");return}ct=te.append(V,k),He(ct)}else ct=k.def(me,".profile");var Ut=V.block();We(Ut),k("if(",ct,"){",Ut,"}");var hr=V.block();Ke(hr),k.exit("if(",ct,"){",hr,"}")}function mn(V,k,ue,we,Pe){var le=V.shared;function ne(X){switch(X){case Ya:case rc:case $a:return 2;case Xu:case Qn:case Ka:return 3;case Un:case ar:case Wu:return 4;default:return 1}}function me(X,te,H){var Ee=le.gl,Me=k.def(X,".location"),We=k.def(le.attributes,"[",Me,"]"),Ke=H.state,He=H.buffer,ct=[H.x,H.y,H.z,H.w],Ut=["buffer","normalized","offset","stride"];function hr(){k("if(!",We,".buffer){",Ee,".enableVertexAttribArray(",Me,");}");var Qt=H.type,fr;if(H.size?fr=k.def(H.size,"||",te):fr=te,k("if(",We,".type!==",Qt,"||",We,".size!==",fr,"||",Ut.map(function(an){return We+"."+an+"!=="+H[an]}).join("||"),"){",Ee,".bindBuffer(",Jn,",",He,".buffer);",Ee,".vertexAttribPointer(",[Me,fr,Qt,H.normalized,H.stride,H.offset],");",We,".type=",Qt,";",We,".size=",fr,";",Ut.map(function(an){return We+"."+an+"="+H[an]+";"}).join(""),"}"),st){var jr=H.divisor;k("if(",We,".divisor!==",jr,"){",V.instancing,".vertexAttribDivisorANGLE(",[Me,jr],");",We,".divisor=",jr,";}")}}function It(){k("if(",We,".buffer){",Ee,".disableVertexAttribArray(",Me,");",We,".buffer=null;","}if(",Ua.map(function(Qt,fr){return We+"."+Qt+"!=="+ct[fr]}).join("||"),"){",Ee,".vertexAttrib4f(",Me,",",ct,");",Ua.map(function(Qt,fr){return We+"."+Qt+"="+ct[fr]+";"}).join(""),"}")}Ke===za?hr():Ke===Cu?It():(k("if(",Ke,"===",za,"){"),hr(),k("}else{"),It(),k("}"))}we.forEach(function(X){var te=X.name,H=ue.attributes[te],Ee;if(H){if(!Pe(H))return;Ee=H.append(V,k)}else{if(!Pe(Ja))return;var Me=V.scopeAttrib(te);B.optional(function(){V.assert(k,Me+".state","missing attribute "+te)}),Ee={},Object.keys(new Se).forEach(function(We){Ee[We]=k.def(Me,".",We)})}me(V.link(X),ne(X.info.type),Ee)})}function Nr(V,k,ue,we,Pe){for(var le=V.shared,ne=le.gl,me,X=0;X<we.length;++X){var te=we[X],H=te.name,Ee=te.info.type,Me=ue.uniforms[H],We=V.link(te),Ke=We+".location",He;if(Me){if(!Pe(Me))continue;if(Zo(Me)){var ct=Me.value;if(B.command(ct!==null&&typeof ct<"u",'missing uniform "'+H+'"',V.commandStr),Ee===ua||Ee===Ku){B.command(typeof ct=="function"&&(Ee===ua&&(ct._reglType==="texture2d"||ct._reglType==="framebuffer")||Ee===Ku&&(ct._reglType==="textureCube"||ct._reglType==="framebufferCube")),"invalid texture for uniform "+H,V.commandStr);var Ut=V.link(ct._texture||ct.color[0]._texture);k(ne,".uniform1i(",Ke,",",Ut+".bind());"),k.exit(Ut,".unbind();")}else if(Ee===qa||Ee===Yu||Ee===$u){B.optional(function(){B.command(E(ct),"invalid matrix for uniform "+H,V.commandStr),B.command(Ee===qa&&ct.length===4||Ee===Yu&&ct.length===9||Ee===$u&&ct.length===16,"invalid length for matrix uniform "+H,V.commandStr)});var hr=V.global.def("new Float32Array(["+Array.prototype.slice.call(ct)+"])"),It=2;Ee===Yu?It=3:Ee===$u&&(It=4),k(ne,".uniformMatrix",It,"fv(",Ke,",false,",hr,");")}else{switch(Ee){case Wl:B.commandType(ct,"number","uniform "+H,V.commandStr),me="1f";break;case Ya:B.command(E(ct)&&ct.length===2,"uniform "+H,V.commandStr),me="2f";break;case Xu:B.command(E(ct)&&ct.length===3,"uniform "+H,V.commandStr),me="3f";break;case Un:B.command(E(ct)&&ct.length===4,"uniform "+H,V.commandStr),me="4f";break;case Vu:B.commandType(ct,"boolean","uniform "+H,V.commandStr),me="1i";break;case hn:B.commandType(ct,"number","uniform "+H,V.commandStr),me="1i";break;case $a:B.command(E(ct)&&ct.length===2,"uniform "+H,V.commandStr),me="2i";break;case rc:B.command(E(ct)&&ct.length===2,"uniform "+H,V.commandStr),me="2i";break;case Ka:B.command(E(ct)&&ct.length===3,"uniform "+H,V.commandStr),me="3i";break;case Qn:B.command(E(ct)&&ct.length===3,"uniform "+H,V.commandStr),me="3i";break;case Wu:B.command(E(ct)&&ct.length===4,"uniform "+H,V.commandStr),me="4i";break;case ar:B.command(E(ct)&&ct.length===4,"uniform "+H,V.commandStr),me="4i";break}k(ne,".uniform",me,"(",Ke,",",E(ct)?Array.prototype.slice.call(ct):ct,");")}continue}else He=Me.append(V,k)}else{if(!Pe(Ja))continue;He=k.def(le.uniforms,"[",G.id(H),"]")}Ee===ua?(B(!Array.isArray(He),"must specify a scalar prop for textures"),k("if(",He,"&&",He,'._reglType==="framebuffer"){',He,"=",He,".color[0];","}")):Ee===Ku&&(B(!Array.isArray(He),"must specify a scalar prop for cube maps"),k("if(",He,"&&",He,'._reglType==="framebufferCube"){',He,"=",He,".color[0];","}")),B.optional(function(){function eo(_o,Xd){V.assert(k,_o,'bad data or missing for uniform "'+H+'".  '+Xd)}function eu(_o){B(!Array.isArray(He),"must not specify an array type for uniform"),eo("typeof "+He+'==="'+_o+'"',"invalid type, expected "+_o)}function bo(_o,Xd){Array.isArray(He)?B(He.length===_o,"must have length "+_o):eo(le.isArrayLike+"("+He+")&&"+He+".length==="+_o,"invalid vector, should have length "+_o,V.commandStr)}function Hd(_o){B(!Array.isArray(He),"must not specify a value type"),eo("typeof "+He+'==="function"&&'+He+'._reglType==="texture'+(_o===Hl?"2d":"Cube")+'"',"invalid texture type",V.commandStr)}switch(Ee){case hn:eu("number");break;case rc:bo(2);break;case Qn:bo(3);break;case ar:bo(4);break;case Wl:eu("number");break;case Ya:bo(2);break;case Xu:bo(3);break;case Un:bo(4);break;case Vu:eu("boolean");break;case $a:bo(2);break;case Ka:bo(3);break;case Wu:bo(4);break;case qa:bo(4);break;case Yu:bo(9);break;case $u:bo(16);break;case ua:Hd(Hl);break;case Ku:Hd(Xl);break}});var Qt=1;switch(Ee){case ua:case Ku:var fr=k.def(He,"._texture");k(ne,".uniform1i(",Ke,",",fr,".bind());"),k.exit(fr,".unbind();");continue;case hn:case Vu:me="1i";break;case rc:case $a:me="2i",Qt=2;break;case Qn:case Ka:me="3i",Qt=3;break;case ar:case Wu:me="4i",Qt=4;break;case Wl:me="1f";break;case Ya:me="2f",Qt=2;break;case Xu:me="3f",Qt=3;break;case Un:me="4f",Qt=4;break;case qa:me="Matrix2fv";break;case Yu:me="Matrix3fv";break;case $u:me="Matrix4fv";break}if(k(ne,".uniform",me,"(",Ke,","),me.charAt(0)==="M"){var jr=Math.pow(Ee-qa+2,2),an=V.global.def("new Float32Array(",jr,")");Array.isArray(He)?k("false,(",Cr(jr,function(eo){return an+"["+eo+"]="+He[eo]}),",",an,")"):k("false,(Array.isArray(",He,")||",He," instanceof Float32Array)?",He,":(",Cr(jr,function(eo){return an+"["+eo+"]="+He+"["+eo+"]"}),",",an,")")}else Qt>1?k(Cr(Qt,function(eo){return Array.isArray(He)?He[eo]:He+"["+eo+"]"})):(B(!Array.isArray(He),"uniform value must not be an array"),k(He));k(");")}}function Jt(V,k,ue,we){var Pe=V.shared,le=Pe.gl,ne=Pe.draw,me=we.draw;function X(){var fr=me.elements,jr,an=k;return fr?((fr.contextDep&&we.contextDynamic||fr.propDep)&&(an=ue),jr=fr.append(V,an)):jr=an.def(ne,".",Pi),jr&&an("if("+jr+")"+le+".bindBuffer("+Mi+","+jr+".buffer.buffer);"),jr}function te(){var fr=me.count,jr,an=k;return fr?((fr.contextDep&&we.contextDynamic||fr.propDep)&&(an=ue),jr=fr.append(V,an),B.optional(function(){fr.MISSING&&V.assert(k,"false","missing vertex count"),fr.DYNAMIC&&V.assert(an,jr+">=0","missing vertex count")})):(jr=an.def(ne,".",ji),B.optional(function(){V.assert(an,jr+">=0","missing vertex count")})),jr}var H=X();function Ee(fr){var jr=me[fr];return jr?jr.contextDep&&we.contextDynamic||jr.propDep?jr.append(V,ue):jr.append(V,k):k.def(ne,".",fr)}var Me=Ee(Ni),We=Ee(Gu),Ke=te();if(typeof Ke=="number"){if(Ke===0)return}else ue("if(",Ke,"){"),ue.exit("}");var He,ct;st&&(He=Ee(Uu),ct=V.instancing);var Ut=H+".type",hr=me.elements&&Zo(me.elements);function It(){function fr(){ue(ct,".drawElementsInstancedANGLE(",[Me,Ke,Ut,We+"<<(("+Ut+"-"+bd+")>>1)",He],");")}function jr(){ue(ct,".drawArraysInstancedANGLE(",[Me,We,Ke,He],");")}H?hr?fr():(ue("if(",H,"){"),fr(),ue("}else{"),jr(),ue("}")):jr()}function Qt(){function fr(){ue(le+".drawElements("+[Me,Ke,Ut,We+"<<(("+Ut+"-"+bd+")>>1)"]+");")}function jr(){ue(le+".drawArrays("+[Me,We,Ke]+");")}H?hr?fr():(ue("if(",H,"){"),fr(),ue("}else{"),jr(),ue("}")):jr()}st&&(typeof He!="number"||He>=0)?typeof He=="string"?(ue("if(",He,">0){"),It(),ue("}else if(",He,"<0){"),Qt(),ue("}")):It():Qt()}function _r(V,k,ue,we,Pe){var le=nr(),ne=le.proc("body",Pe);return B.optional(function(){le.commandStr=k.commandStr,le.command=le.link(k.commandStr)}),st&&(le.instancing=ne.def(le.shared.extensions,".angle_instanced_arrays")),V(le,ne,ue,we),le.compile().body}function Sr(V,k,ue,we){on(V,k),ue.useVAO?ue.drawVAO?k(V.shared.vao,".setVAO(",ue.drawVAO.append(V,k),");"):k(V.shared.vao,".setVAO(",V.shared.vao,".targetVAO);"):(k(V.shared.vao,".setVAO(null);"),mn(V,k,ue,we.attributes,function(){return!0})),Nr(V,k,ue,we.uniforms,function(){return!0}),Jt(V,k,k,ue)}function Br(V,k){var ue=V.proc("draw",1);on(V,ue),gn(V,ue,k.context),Yr(V,ue,k.framebuffer),Sn(V,ue,k),Fn(V,ue,k.state),lr(V,ue,k,!1,!0);var we=k.shader.progVar.append(V,ue);if(ue(V.shared.gl,".useProgram(",we,".program);"),k.shader.program)Sr(V,ue,k,k.shader.program);else{ue(V.shared.vao,".setVAO(null);");var Pe=V.global.def("{}"),le=ue.def(we,".id"),ne=ue.def(Pe,"[",le,"]");ue(V.cond(ne).then(ne,".call(this,a0);").else(ne,"=",Pe,"[",le,"]=",V.link(function(me){return _r(Sr,V,k,me,1)}),"(",we,");",ne,".call(this,a0);"))}Object.keys(k.state).length>0&&ue(V.shared.current,".dirty=true;")}function Jo(V,k,ue,we){V.batchId="a1",on(V,k);function Pe(){return!0}mn(V,k,ue,we.attributes,Pe),Nr(V,k,ue,we.uniforms,Pe),Jt(V,k,k,ue)}function Wn(V,k,ue,we){on(V,k);var Pe=ue.contextDep,le=k.def(),ne="a0",me="a1",X=k.def();V.shared.props=X,V.batchId=le;var te=V.scope(),H=V.scope();k(te.entry,"for(",le,"=0;",le,"<",me,";++",le,"){",X,"=",ne,"[",le,"];",H,"}",te.exit);function Ee(Ut){return Ut.contextDep&&Pe||Ut.propDep}function Me(Ut){return!Ee(Ut)}if(ue.needsContext&&gn(V,H,ue.context),ue.needsFramebuffer&&Yr(V,H,ue.framebuffer),Fn(V,H,ue.state,Ee),ue.profile&&Ee(ue.profile)&&lr(V,H,ue,!1,!0),we)ue.useVAO?ue.drawVAO?Ee(ue.drawVAO)?H(V.shared.vao,".setVAO(",ue.drawVAO.append(V,H),");"):te(V.shared.vao,".setVAO(",ue.drawVAO.append(V,te),");"):te(V.shared.vao,".setVAO(",V.shared.vao,".targetVAO);"):(te(V.shared.vao,".setVAO(null);"),mn(V,te,ue,we.attributes,Me),mn(V,H,ue,we.attributes,Ee)),Nr(V,te,ue,we.uniforms,Me),Nr(V,H,ue,we.uniforms,Ee),Jt(V,te,H,ue);else{var We=V.global.def("{}"),Ke=ue.shader.progVar.append(V,H),He=H.def(Ke,".id"),ct=H.def(We,"[",He,"]");H(V.shared.gl,".useProgram(",Ke,".program);","if(!",ct,"){",ct,"=",We,"[",He,"]=",V.link(function(Ut){return _r(Jo,V,ue,Ut,2)}),"(",Ke,");}",ct,".call(this,a0[",le,"],",le,");")}}function F(V,k){var ue=V.proc("batch",2);V.batchId="0",on(V,ue);var we=!1,Pe=!0;Object.keys(k.context).forEach(function(We){we=we||k.context[We].propDep}),we||(gn(V,ue,k.context),Pe=!1);var le=k.framebuffer,ne=!1;le?(le.propDep?we=ne=!0:le.contextDep&&we&&(ne=!0),ne||Yr(V,ue,le)):Yr(V,ue,null),k.state.viewport&&k.state.viewport.propDep&&(we=!0);function me(We){return We.contextDep&&we||We.propDep}Sn(V,ue,k),Fn(V,ue,k.state,function(We){return!me(We)}),(!k.profile||!me(k.profile))&&lr(V,ue,k,!1,"a1"),k.contextDep=we,k.needsContext=Pe,k.needsFramebuffer=ne;var X=k.shader.progVar;if(X.contextDep&&we||X.propDep)Wn(V,ue,k,null);else{var te=X.append(V,ue);if(ue(V.shared.gl,".useProgram(",te,".program);"),k.shader.program)Wn(V,ue,k,k.shader.program);else{ue(V.shared.vao,".setVAO(null);");var H=V.global.def("{}"),Ee=ue.def(te,".id"),Me=ue.def(H,"[",Ee,"]");ue(V.cond(Me).then(Me,".call(this,a0,a1);").else(Me,"=",H,"[",Ee,"]=",V.link(function(We){return _r(Wn,V,k,We,2)}),"(",te,");",Me,".call(this,a0,a1);"))}}Object.keys(k.state).length>0&&ue(V.shared.current,".dirty=true;")}function Le(V,k){var ue=V.proc("scope",3);V.batchId="a2";var we=V.shared,Pe=we.current;gn(V,ue,k.context),k.framebuffer&&k.framebuffer.append(V,ue),Za(Object.keys(k.state)).forEach(function(ne){var me=k.state[ne],X=me.append(V,ue);E(X)?X.forEach(function(te,H){ue.set(V.next[ne],"["+H+"]",te)}):ue.set(we.next,"."+ne,X)}),lr(V,ue,k,!0,!0),[Pi,Gu,ji,Uu,Ni].forEach(function(ne){var me=k.draw[ne];me&&ue.set(we.draw,"."+ne,""+me.append(V,ue))}),Object.keys(k.uniforms).forEach(function(ne){var me=k.uniforms[ne].append(V,ue);Array.isArray(me)&&(me="["+me.join()+"]"),ue.set(we.uniforms,"["+G.id(ne)+"]",me)}),Object.keys(k.attributes).forEach(function(ne){var me=k.attributes[ne].append(V,ue),X=V.scopeAttrib(ne);Object.keys(new Se).forEach(function(te){ue.set(X,"."+te,me[te])})}),k.scopeVAO&&ue.set(we.vao,".targetVAO",k.scopeVAO.append(V,ue));function le(ne){var me=k.shader[ne];me&&ue.set(we.shader,"."+ne,me.append(V,ue))}le(Xa),le(Va),Object.keys(k.state).length>0&&(ue(Pe,".dirty=true;"),ue.exit(Pe,".dirty=true;")),ue("a1(",V.shared.context,",a0,",V.batchId,");")}function De(V){if(!(typeof V!="object"||E(V))){for(var k=Object.keys(V),ue=0;ue<k.length;++ue)if(Ot.isDynamic(V[k[ue]]))return!0;return!1}}function jt(V,k,ue){var we=k.static[ue];if(!we||!De(we))return;var Pe=V.global,le=Object.keys(we),ne=!1,me=!1,X=!1,te=V.global.def("{}");le.forEach(function(Ee){var Me=we[Ee];if(Ot.isDynamic(Me)){typeof Me=="function"&&(Me=we[Ee]=Ot.unbox(Me));var We=Vn(Me,null);ne=ne||We.thisDep,X=X||We.propDep,me=me||We.contextDep}else{switch(Pe(te,".",Ee,"="),typeof Me){case"number":Pe(Me);break;case"string":Pe('"',Me,'"');break;case"object":Array.isArray(Me)&&Pe("[",Me.join(),"]");break;default:Pe(V.link(Me));break}Pe(";")}});function H(Ee,Me){le.forEach(function(We){var Ke=we[We];if(Ot.isDynamic(Ke)){var He=Ee.invoke(Me,Ke);Me(te,".",We,"=",He,";")}})}k.dynamic[ue]=new Ot.DynamicVariable(Ys,{thisDep:ne,contextDep:me,propDep:X,ref:te,append:H}),delete k.static[ue]}function Er(V,k,ue,we,Pe){var le=nr();le.stats=le.link(Pe),Object.keys(k.static).forEach(function(me){jt(le,k,me)}),Qh.forEach(function(me){jt(le,V,me)});var ne=ln(V,k,ue,we,le);return Br(le,ne),Le(le,ne),F(le,ne),s(le.compile(),{destroy:function(){ne.shader.program.destroy()}})}return{next:At,current:Ze,procs:function(){var V=nr(),k=V.proc("poll"),ue=V.proc("refresh"),we=V.block();k(we),ue(we);var Pe=V.shared,le=Pe.gl,ne=Pe.next,me=Pe.current;we(me,".dirty=false;"),Yr(V,k),Yr(V,ue,null,!0);var X;st&&(X=V.link(st)),J.oes_vertex_array_object&&ue(V.link(J.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var te=0;te<Ie.maxAttributes;++te){var H=ue.def(Pe.attributes,"[",te,"]"),Ee=V.cond(H,".buffer");Ee.then(le,".enableVertexAttribArray(",te,");",le,".bindBuffer(",Jn,",",H,".buffer.buffer);",le,".vertexAttribPointer(",te,",",H,".size,",H,".type,",H,".normalized,",H,".stride,",H,".offset);").else(le,".disableVertexAttribArray(",te,");",le,".vertexAttrib4f(",te,",",H,".x,",H,".y,",H,".z,",H,".w);",H,".buffer=null;"),ue(Ee),st&&ue(X,".vertexAttribDivisorANGLE(",te,",",H,".divisor);")}return ue(V.shared.vao,".currentVAO=null;",V.shared.vao,".setVAO(",V.shared.vao,".targetVAO);"),Object.keys(ht).forEach(function(Me){var We=ht[Me],Ke=we.def(ne,".",Me),He=V.block();He("if(",Ke,"){",le,".enable(",We,")}else{",le,".disable(",We,")}",me,".",Me,"=",Ke,";"),ue(He),k("if(",Ke,"!==",me,".",Me,"){",He,"}")}),Object.keys(rt).forEach(function(Me){var We=rt[Me],Ke=Ze[Me],He,ct,Ut=V.block();if(Ut(le,".",We,"("),E(Ke)){var hr=Ke.length;He=V.global.def(ne,".",Me),ct=V.global.def(me,".",Me),Ut(Cr(hr,function(It){return He+"["+It+"]"}),");",Cr(hr,function(It){return ct+"["+It+"]="+He+"["+It+"];"}).join("")),k("if(",Cr(hr,function(It){return He+"["+It+"]!=="+ct+"["+It+"]"}).join("||"),"){",Ut,"}")}else He=we.def(ne,".",Me),ct=we.def(me,".",Me),Ut(He,");",me,".",Me,"=",He,";"),k("if(",He,"!==",ct,"){",Ut,"}");ue(Ut)}),V.compile()}(),compile:Er}}function Bd(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ov=34918,Gd=34919,Zu=35007,iv=function(A,G){if(!G.ext_disjoint_timer_query)return null;var J=[];function Ie(){return J.pop()||G.ext_disjoint_timer_query.createQueryEXT()}function Ve(st){J.push(st)}var ke=[];function Ge(st){var St=Ie();G.ext_disjoint_timer_query.beginQueryEXT(Zu,St),ke.push(St),it(ke.length-1,ke.length,st)}function ot(){G.ext_disjoint_timer_query.endQueryEXT(Zu)}function at(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ft=[];function ut(){return ft.pop()||new at}function pt(st){ft.push(st)}var _t=[];function it(st,St,Ze){var At=ut();At.startQueryIndex=st,At.endQueryIndex=St,At.sum=0,At.stats=Ze,_t.push(At)}var dt=[],Se=[];function Ue(){var st,St,Ze=ke.length;if(Ze!==0){Se.length=Math.max(Se.length,Ze+1),dt.length=Math.max(dt.length,Ze+1),dt[0]=0,Se[0]=0;var At=0;for(st=0,St=0;St<ke.length;++St){var tt=ke[St];G.ext_disjoint_timer_query.getQueryObjectEXT(tt,Gd)?(At+=G.ext_disjoint_timer_query.getQueryObjectEXT(tt,ov),Ve(tt)):ke[st++]=tt,dt[St+1]=At,Se[St+1]=st}for(ke.length=st,st=0,St=0;St<_t.length;++St){var ht=_t[St],rt=ht.startQueryIndex,vt=ht.endQueryIndex;ht.sum+=dt[vt]-dt[rt];var $t=Se[rt],rr=Se[vt];rr===$t?(ht.stats.gpuTime+=ht.sum/1e6,pt(ht)):(ht.startQueryIndex=$t,ht.endQueryIndex=rr,_t[st++]=ht)}_t.length=st}}return{beginQuery:Ge,endQuery:ot,pushScopeStats:it,update:Ue,getNumPendingQueries:function(){return ke.length},clear:function(){J.push.apply(J,ke);for(var st=0;st<J.length;st++)G.ext_disjoint_timer_query.deleteQueryEXT(J[st]);ke.length=0,J.length=0},restore:function(){ke.length=0,J.length=0}}},av=16384,Zl=256,uc=1024,Ud=34962,sc="webglcontextlost",cc="webglcontextrestored",Ju=1,lc=2,zd=3;function Qa(A,G){for(var J=0;J<A.length;++J)if(A[J]===G)return J;return-1}function fc(A){var G=gr(A);if(!G)return null;var J=G.gl,Ie=J.getContextAttributes(),Ve=J.isContextLost(),ke=Xr(J,G);if(!ke)return null;var Ge=On(),ot=Bd(),at=ke.extensions,ft=iv(J,at),ut=Tr(),pt=J.drawingBufferWidth,_t=J.drawingBufferHeight,it={tick:0,time:0,viewportWidth:pt,viewportHeight:_t,framebufferWidth:pt,framebufferHeight:_t,drawingBufferWidth:pt,drawingBufferHeight:_t,pixelRatio:G.pixelRatio},dt={},Se={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ue=Ss(J,at),st=Ao(J,ot,G,Ze),St=Kh(J,at,Ue,ot,st);function Ze(Jt){return St.destroyBuffer(Jt)}var At=Ms(J,at,st,ot),tt=Zh(J,Ge,ot,G),ht=xn(J,at,Ue,function(){$t.procs.poll()},it,ot,G),rt=od(J,at,Ue,ot,G),vt=vd(J,at,Ue,ht,rt,ot),$t=nv(J,Ge,at,Ue,st,At,ht,vt,dt,St,tt,Se,it,ft,G),rr=Jh(J,vt,$t.procs.poll,it,Ie,at,Ue),Et=$t.next,Je=J.canvas,$e=[],nr=[],Te=[],Lt=[G.onDestroy],br=null;function ur(){if($e.length===0){ft&&ft.update(),br=null;return}br=Kt.next(ur),Fn();for(var Jt=$e.length-1;Jt>=0;--Jt){var _r=$e[Jt];_r&&_r(it,null,0)}J.flush(),ft&&ft.update()}function mr(){!br&&$e.length>0&&(br=Kt.next(ur))}function Mr(){br&&(Kt.cancel(ur),br=null)}function cn(Jt){Jt.preventDefault(),Ve=!0,Mr(),nr.forEach(function(_r){_r()})}function En(Jt){J.getError(),Ve=!1,ke.restore(),tt.restore(),st.restore(),ht.restore(),rt.restore(),vt.restore(),St.restore(),ft&&ft.restore(),$t.procs.refresh(),mr(),Te.forEach(function(_r){_r()})}Je&&(Je.addEventListener(sc,cn,!1),Je.addEventListener(cc,En,!1));function xr(){$e.length=0,Mr(),Je&&(Je.removeEventListener(sc,cn),Je.removeEventListener(cc,En)),tt.clear(),vt.clear(),rt.clear(),ht.clear(),At.clear(),st.clear(),St.clear(),ft&&ft.clear(),Lt.forEach(function(Jt){Jt()})}function yn(Jt){B(!!Jt,"invalid args to regl({...})"),B.type(Jt,"object","invalid args to regl({...})");function _r(Pe){var le=s({},Pe);delete le.uniforms,delete le.attributes,delete le.context,delete le.vao,"stencil"in le&&le.stencil.op&&(le.stencil.opBack=le.stencil.opFront=le.stencil.op,delete le.stencil.op);function ne(me){if(me in le){var X=le[me];delete le[me],Object.keys(X).forEach(function(te){le[me+"."+te]=X[te]})}}return ne("blend"),ne("depth"),ne("cull"),ne("stencil"),ne("polygonOffset"),ne("scissor"),ne("sample"),"vao"in Pe&&(le.vao=Pe.vao),le}function Sr(Pe,le){var ne={},me={};return Object.keys(Pe).forEach(function(X){var te=Pe[X];if(Ot.isDynamic(te)){me[X]=Ot.unbox(te,X);return}else if(le&&Array.isArray(te)){for(var H=0;H<te.length;++H)if(Ot.isDynamic(te[H])){me[X]=Ot.unbox(te,X);return}}ne[X]=te}),{dynamic:me,static:ne}}var Br=Sr(Jt.context||{},!0),Jo=Sr(Jt.uniforms||{},!0),Wn=Sr(Jt.attributes||{},!1),F=Sr(_r(Jt),!1),Le={gpuTime:0,cpuTime:0,count:0},De=$t.compile(F,Wn,Jo,Br,Le),jt=De.draw,Er=De.batch,V=De.scope,k=[];function ue(Pe){for(;k.length<Pe;)k.push(null);return k}function we(Pe,le){var ne;if(Ve&&B.raise("context lost"),typeof Pe=="function")return V.call(this,null,Pe,0);if(typeof le=="function")if(typeof Pe=="number")for(ne=0;ne<Pe;++ne)V.call(this,null,le,ne);else if(Array.isArray(Pe))for(ne=0;ne<Pe.length;++ne)V.call(this,Pe[ne],le,ne);else return V.call(this,Pe,le,0);else if(typeof Pe=="number"){if(Pe>0)return Er.call(this,ue(Pe|0),Pe|0)}else if(Array.isArray(Pe)){if(Pe.length)return Er.call(this,Pe,Pe.length)}else return jt.call(this,Pe)}return s(we,{stats:Le,destroy:function(){De.destroy()}})}var Wr=vt.setFBO=yn({framebuffer:Ot.define.call(null,Ju,"framebuffer")});function ln(Jt,_r){var Sr=0;$t.procs.poll();var Br=_r.color;Br&&(J.clearColor(+Br[0]||0,+Br[1]||0,+Br[2]||0,+Br[3]||0),Sr|=av),"depth"in _r&&(J.clearDepth(+_r.depth),Sr|=Zl),"stencil"in _r&&(J.clearStencil(_r.stencil|0),Sr|=uc),B(!!Sr,"called regl.clear with no buffer specified"),J.clear(Sr)}function gn(Jt){if(B(typeof Jt=="object"&&Jt,"regl.clear() takes an object as input"),"framebuffer"in Jt)if(Jt.framebuffer&&Jt.framebuffer_reglType==="framebufferCube")for(var _r=0;_r<6;++_r)Wr(s({framebuffer:Jt.framebuffer.faces[_r]},Jt),ln);else Wr(Jt,ln);else ln(null,Jt)}function Yr(Jt){B.type(Jt,"function","regl.frame() callback must be a function"),$e.push(Jt);function _r(){var Sr=Qa($e,Jt);B(Sr>=0,"cannot cancel a frame twice");function Br(){var Jo=Qa($e,Br);$e[Jo]=$e[$e.length-1],$e.length-=1,$e.length<=0&&Mr()}$e[Sr]=Br}return mr(),{cancel:_r}}function Sn(){var Jt=Et.viewport,_r=Et.scissor_box;Jt[0]=Jt[1]=_r[0]=_r[1]=0,it.viewportWidth=it.framebufferWidth=it.drawingBufferWidth=Jt[2]=_r[2]=J.drawingBufferWidth,it.viewportHeight=it.framebufferHeight=it.drawingBufferHeight=Jt[3]=_r[3]=J.drawingBufferHeight}function Fn(){it.tick+=1,it.time=lr(),Sn(),$t.procs.poll()}function on(){ht.refresh(),Sn(),$t.procs.refresh(),ft&&ft.update()}function lr(){return(Tr()-ut)/1e3}on();function mn(Jt,_r){B.type(_r,"function","listener callback must be a function");var Sr;switch(Jt){case"frame":return Yr(_r);case"lost":Sr=nr;break;case"restore":Sr=Te;break;case"destroy":Sr=Lt;break;default:B.raise("invalid event, must be one of frame,lost,restore,destroy")}return Sr.push(_r),{cancel:function(){for(var Br=0;Br<Sr.length;++Br)if(Sr[Br]===_r){Sr[Br]=Sr[Sr.length-1],Sr.pop();return}}}}var Nr=s(yn,{clear:gn,prop:Ot.define.bind(null,Ju),context:Ot.define.bind(null,lc),this:Ot.define.bind(null,zd),draw:yn({}),buffer:function(Jt){return st.create(Jt,Ud,!1,!1)},elements:function(Jt){return At.create(Jt,!1)},texture:ht.create2D,cube:ht.createCube,renderbuffer:rt.create,framebuffer:vt.create,framebufferCube:vt.createCube,vao:St.createVAO,attributes:Ie,frame:Yr,on:mn,limits:Ue,hasExtension:function(Jt){return Ue.extensions.indexOf(Jt.toLowerCase())>=0},read:rr,destroy:xr,_gl:J,_refresh:on,poll:function(){Fn(),ft&&ft.update()},now:lr,stats:ot});return G.onDone(null,Nr),Nr}return fc})})(zk);var ma,yf,ba,ri,gf,su,mf,Bp,Gi,ns,to,Ui,zi,Gp;ma={},Mt(ma,Pt.POINTS,"points"),Mt(ma,Pt.LINES,"lines"),Mt(ma,Pt.LINE_LOOP,"line loop"),Mt(ma,Pt.LINE_STRIP,"line strip"),Mt(ma,Pt.TRIANGLES,"triangles"),Mt(ma,Pt.TRIANGLE_FAN,"triangle fan"),Mt(ma,Pt.TRIANGLE_STRIP,"triangle strip");yf={},Mt(yf,Pt.STATIC_DRAW,"static"),Mt(yf,Pt.DYNAMIC_DRAW,"dynamic"),Mt(yf,Pt.STREAM_DRAW,"stream");ba={},Mt(ba,Pt.BYTE,"int8"),Mt(ba,Pt.UNSIGNED_INT,"int16"),Mt(ba,Pt.INT,"int32"),Mt(ba,Pt.UNSIGNED_BYTE,"uint8"),Mt(ba,Pt.UNSIGNED_SHORT,"uint16"),Mt(ba,Pt.UNSIGNED_INT,"uint32"),Mt(ba,Pt.FLOAT,"float");ri={},Mt(ri,Pt.ALPHA,"alpha"),Mt(ri,Pt.LUMINANCE,"luminance"),Mt(ri,Pt.LUMINANCE_ALPHA,"luminance alpha"),Mt(ri,Pt.RGB,"rgb"),Mt(ri,Pt.RGBA,"rgba"),Mt(ri,Pt.RGBA4,"rgba4"),Mt(ri,Pt.RGB5_A1,"rgb5 a1"),Mt(ri,Pt.RGB565,"rgb565"),Mt(ri,Pt.DEPTH_COMPONENT,"depth"),Mt(ri,Pt.DEPTH_STENCIL,"depth stencil");gf={},Mt(gf,Pt.DONT_CARE,"dont care"),Mt(gf,Pt.NICEST,"nice"),Mt(gf,Pt.FASTEST,"fast");su={},Mt(su,Pt.NEAREST,"nearest"),Mt(su,Pt.LINEAR,"linear"),Mt(su,Pt.LINEAR_MIPMAP_LINEAR,"mipmap"),Mt(su,Pt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Mt(su,Pt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Mt(su,Pt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");mf={},Mt(mf,Pt.REPEAT,"repeat"),Mt(mf,Pt.CLAMP_TO_EDGE,"clamp"),Mt(mf,Pt.MIRRORED_REPEAT,"mirror");Bp={},Mt(Bp,Pt.NONE,"none"),Mt(Bp,Pt.BROWSER_DEFAULT_WEBGL,"browser");Gi={},Mt(Gi,Pt.NEVER,"never"),Mt(Gi,Pt.ALWAYS,"always"),Mt(Gi,Pt.LESS,"less"),Mt(Gi,Pt.LEQUAL,"lequal"),Mt(Gi,Pt.GREATER,"greater"),Mt(Gi,Pt.GEQUAL,"gequal"),Mt(Gi,Pt.EQUAL,"equal"),Mt(Gi,Pt.NOTEQUAL,"notequal");ns={},Mt(ns,Pt.FUNC_ADD,"add"),Mt(ns,Pt.MIN_EXT,"min"),Mt(ns,Pt.MAX_EXT,"max"),Mt(ns,Pt.FUNC_SUBTRACT,"subtract"),Mt(ns,Pt.FUNC_REVERSE_SUBTRACT,"reverse subtract");to={},Mt(to,Pt.ZERO,"zero"),Mt(to,Pt.ONE,"one"),Mt(to,Pt.SRC_COLOR,"src color"),Mt(to,Pt.ONE_MINUS_SRC_COLOR,"one minus src color"),Mt(to,Pt.SRC_ALPHA,"src alpha"),Mt(to,Pt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Mt(to,Pt.DST_COLOR,"dst color"),Mt(to,Pt.ONE_MINUS_DST_COLOR,"one minus dst color"),Mt(to,Pt.DST_ALPHA,"dst alpha"),Mt(to,Pt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Mt(to,Pt.CONSTANT_COLOR,"constant color"),Mt(to,Pt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Mt(to,Pt.CONSTANT_ALPHA,"constant alpha"),Mt(to,Pt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Mt(to,Pt.SRC_ALPHA_SATURATE,"src alpha saturate");Ui={},Mt(Ui,Pt.NEVER,"never"),Mt(Ui,Pt.ALWAYS,"always"),Mt(Ui,Pt.LESS,"less"),Mt(Ui,Pt.LEQUAL,"lequal"),Mt(Ui,Pt.GREATER,"greater"),Mt(Ui,Pt.GEQUAL,"gequal"),Mt(Ui,Pt.EQUAL,"equal"),Mt(Ui,Pt.NOTEQUAL,"notequal");zi={},Mt(zi,Pt.ZERO,"zero"),Mt(zi,Pt.KEEP,"keep"),Mt(zi,Pt.REPLACE,"replace"),Mt(zi,Pt.INVERT,"invert"),Mt(zi,Pt.INCR,"increment"),Mt(zi,Pt.DECR,"decrement"),Mt(zi,Pt.INCR_WRAP,"increment wrap"),Mt(zi,Pt.DECR_WRAP,"decrement wrap");Gp={},Mt(Gp,Pt.FRONT,"front"),Mt(Gp,Pt.BACK,"back");var Hk=Function.prototype,Xk=Hk.toString;Xk.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class Uw{constructor(){ti(this,"lf");ti(this,"option")}render(i){this.lf=i}getBytesLength(i){if(!i)return 0;let o=0;for(let s=0;s<i.length;s++){const n=i.charCodeAt(s);i.match(/[A-Z]/)?o+=1.5:n>=1&&n<=126||n>=65376&&n<=65439?o+=1:o+=2}return o}layout(i={}){const{nodes:o,edges:s,gridSize:n}=this.lf.graphModel;let c=40,f=40;n>20&&(c=n*2,f=n*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:c,ranksep:f,begin:[120,120],...i};const v=new Qj(this.option).layout({nodes:o.map(g=>({id:g.id,size:{width:g.width,height:g.height},model:g})),edges:s.map(g=>({source:g.sourceNodeId,target:g.targetNodeId,model:g}))}),b={nodes:[],edges:[]};v.nodes.forEach(g=>{const{model:O}=g,x=O.getData();x.x=g.x,x.y=g.y,b.nodes.push(x)}),v.edges.forEach(g=>{const{model:O}=g,x=O.getData();if(x.pointsList=this.calcPointsList(O,b.nodes),x.pointsList){const S=x.pointsList[0],N=x.pointsList[x.pointsList.length-1];x.startPoint={x:S.x,y:S.y},x.endPoint={x:N.x,y:N.y},x.text&&x.text.value&&(x.text={x:N.x-this.getBytesLength(x.text.value)*6-10,y:N.y,value:x.text.value})}else x.startPoint=void 0,x.endPoint=void 0,x.text&&x.text.value&&(x.text=x.text.value);b.edges.push(x)}),this.lf.renderRawData(b)}pointFilter(i){const o=i;let s=1;for(;s<o.length-1;){const n=o[s-1],c=o[s],f=o[s+1];n.x===c.x&&c.x===f.x||n.y===c.y&&c.y===f.y?o.splice(s,1):s++}return o}calcPointsList(i,o){const s=[];if(this.option.rankdir==="LR"&&i.modelType==="polyline-edge"){const n=this.lf.getNodeModelById(i.sourceNodeId),c=this.lf.getNodeModelById(i.targetNodeId),f=o.find(v=>v.id===i.sourceNodeId),h=o.find(v=>v.id===i.targetNodeId);if(f.x<h.x)return s.push({x:f.x+n.width/2,y:f.y}),s.push({x:f.x+n.width/2+(i.offset||50),y:f.y}),s.push({x:f.x+n.width/2+(i.offset||50),y:h.y}),s.push({x:h.x-c.width/2,y:h.y}),this.pointFilter(s);if(f.x>h.x)return f.y>=h.y?(s.push({x:f.x,y:f.y+n.height/2}),s.push({x:f.x,y:f.y+n.height/2+(i.offset||50)}),s.push({x:h.x,y:f.y+n.height/2+(i.offset||50)}),s.push({x:h.x,y:h.y+c.height/2})):(s.push({x:f.x,y:f.y-n.height/2}),s.push({x:f.x,y:f.y-n.height/2-(i.offset||50)}),s.push({x:h.x,y:f.y-n.height/2-(i.offset||50)}),s.push({x:h.x,y:h.y-c.height/2})),this.pointFilter(s)}}}ti(Uw,"pluginName","dagre");class Vk extends mA{constructor({lf:i}){super({lf:i});const o={text:"",icon:!0,className:"lf-menu-copy",callback:Z=>i.cloneNode(Z.id)},s={text:"",icon:!0,className:"lf-menu-delete",callback:Z=>{i.deleteNode(Z.id),i.deleteEdge(Z.id)}},n={text:"",icon:!0,className:"lf-menu-edit",callback:Z=>i.graphModel.editText(Z.id)},c={text:"",icon:!0,className:"lf-menu-delete",callback:Z=>i.updateText(Z.id,"")},f={text:"",icon:!0,className:"lf-menu-select",callback(){i.openSelectionSelect(),i.once("selection:selected",i.closeSelectionSelect)}},h={text:"",icon:!0,className:"lf-menu-clear",callback(){i.clearData()}},v={text:"",icon:!0,className:"lf-menu-add",callback:Z=>{console.log(" ~ file: menu.ts:66 ~ Menu ~ constructor ~ ele:",Z),["endEvent","serviceTask","note"].includes(Z.type)?R(Z,[b]):R(Z,z.nodeMenu)}},b={text:"",icon:!0,className:"lf-menu-back",callback:Z=>{R(Z,D.nodeMenu)}},g={text:"",icon:!0,className:"lf-menu-user-task",callback:Z=>{const{x:fe,y:se}=Z,oe=i.addNode({type:"userTask",x:fe+200,y:se});i.addEdge({sourceNodeId:Z.id,targetNodeId:oe.id})}},O={text:"",icon:!0,className:"lf-menu-service-task",callback:Z=>{const{x:fe,y:se}=Z,oe=i.addNode({type:"serviceTask",x:fe+200,y:se});i.addEdge({type:"noteFlow",sourceNodeId:Z.id,targetNodeId:oe.id})}},x={text:"",icon:!0,className:"lf-menu-end-event",callback:Z=>{const{x:fe,y:se}=Z,oe=i.addNode({type:"endEvent",x:fe+150,y:se});i.addEdge({sourceNodeId:Z.id,targetNodeId:oe.id})}},S={text:"",icon:!0,className:"lf-menu-exclusive-gateway",callback:Z=>{const{x:fe,y:se}=Z,oe=i.addNode({type:"exclusiveGateway",x:fe+150,y:se});i.addEdge({sourceNodeId:Z.id,targetNodeId:oe.id})}},N={text:"",icon:!0,className:"lf-menu-parallel-gateway",callback:Z=>{const{x:fe,y:se}=Z,oe=i.addNode({type:"parallelGateway",x:fe+150,y:se});i.addEdge({sourceNodeId:Z.id,targetNodeId:oe.id})}},j={text:"",icon:!0,className:"lf-menu-note",callback:Z=>{const{x:fe,y:se}=Z,oe=i.addNode({type:"note",x:fe,y:se-150});i.addEdge({type:"noteFlow",sourceNodeId:Z.id,targetNodeId:oe.id})}},R=(Z,fe)=>{setTimeout(()=>{this.__currentData=Z;const{left:se,top:oe}=this.__menuDOM.style;this.showMenu(se,oe,fe)})},D={nodeMenu:[v,o,s,n,c],edgeMenu:[s,n,c],graphMenu:[f,h]},z={nodeMenu:[b,g,O,S,N,x,j]};this.setMenuConfig(D)}}class Wk extends bA{constructor({lf:i}){super({lf:i}),this.setPatternItems([{label:"",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){i.openSelectionSelect(),i.once("selection:selected",i.closeSelectionSelect)}},{type:"group",label:"",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"",label:"",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"",label:"",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const zw={type:"process",key:"Process",properties:{}};function Yk(e){const{id:i,type:o,x:s,y:n,properties:c,children:f,text:h}=e;return{incoming:[],outgoing:[],children:f,type:o,key:i,groupKey:c==null?void 0:c.groupKey,properties:{...c,name:im(h)?h:(h==null?void 0:h.value)??"",x:s,y:n,text:h}}}function $k(e){const{id:i,type:o,sourceNodeId:s,targetNodeId:n,startPoint:c,endPoint:f,pointsList:h,properties:v,text:b}=e;return{incoming:[s],outgoing:[n],type:o,key:i,groupKey:v==null?void 0:v.groupKey,properties:{...v,name:im(b)?b:(b==null?void 0:b.value)??"",text:b,startPoint:c,endPoint:f,pointsList:h}}}function Kk(e){const{id:i,type:o,properties:s,text:n}=e;return{type:o,key:i,properties:{...s,name:im(n)?n:(n==null?void 0:n.value)??""}}}function qk(e){const i=new Map,o={processData:zw,flowElementList:[]};return e.nodes.forEach(s=>{var n;if(s.type==="process")o.processData=Kk(s);else{const c=Yk(s);(n=o.flowElementList)==null||n.push(c),i.set(s.id,c)}}),e.edges.forEach(s=>{var h;const n=$k(s);i.get(s.sourceNodeId).outgoing.push(n.key),i.get(s.targetNodeId).incoming.push(n.key),(h=o.flowElementList)==null||h.push(n)}),o}function Zk(e){const{incoming:i,outgoing:o,properties:s,key:n,type:c}=e,{text:f,name:h,startPoint:v,endPoint:b,pointsList:g}=s??{},O={id:n,type:c,sourceNodeId:(i==null?void 0:i[0])??"",targetNodeId:(o==null?void 0:o[0])??"",text:f||h,startPoint:v,endPoint:b,pointsList:g,properties:{}},x=["startPoint","endPoint","pointsList","text"];return O.properties=am(s,x),O}function Jk(e){const{properties:i,key:o,type:s,children:n}=e,{x:c,y:f,text:h,name:v}=i??{},b={id:o,type:s??"",x:c,y:f,text:h||v,children:n,properties:{}},g=["x","y","text"];return b.properties=am(i,g),b}function Qk(e){const{properties:i,key:o,type:s}=e,{name:n}=i??{},c={id:o,type:s??"",text:n,x:0,y:0},f=["x","y","text"];return c.properties=am(i,f),c}function eC(e){const{flowElementList:i}=e,o=f=>["sequenceFlow","noteFlow"].includes(f),s=(i==null?void 0:i.filter(f=>!o(f.type)).map(Jk))??[],n=(i==null?void 0:i.filter(f=>o(f.type)).map(Zk))??[];return s.unshift(Qk(e.processData??zw)),{nodes:s,edges:n}}class jm{constructor({lf:i}){i.adapterIn=this.adapterIn,i.adapterOut=this.adapterOut}adapterOut(i){return qk(i)}adapterIn(i){return eC(i)}}ti(jm,"pluginName","turboAdapter");class Hw{constructor({lf:i}){ti(this,"lf");ti(this,"container");ti(this,"__tooltipDOM");ti(this,"__currentData");ti(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltip",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=i}render(i,o){this.container=o,o.appendChild(this.__tooltipDOM),i.on("node:mouseenter,edge:mouseenter",({data:s,e:n})=>{var b;const c=(b=this.__tooltips.find(g=>g.id===s.id))==null?void 0:b.content;if(!c)return;this.__tooltipDOM.innerHTML=c;const f=i.getPointByClient(n.x,n.y),{domOverlayPosition:{x:h,y:v}}=f;this.__tooltipDOM.style.top=`${v+10}px`,this.__tooltipDOM.style.left=`${h+10}px`,this.__tooltipDOM.style.display="block"}),i.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(i){this.__tooltips=i}}ti(Hw,"pluginName","tooltip");const tC=RT("span",null,"JSON",-1),rC=om({__name:"flow-editor",props:{modelValue:{},visible:{type:Boolean}},emits:["confirm"],setup(e,{emit:i}){const s=GE(e),{modelValue:n,visible:c}=s,f=NT("");function h(){const v=JSON.parse(f.value);n.value=v,i("confirm",v),c.value=!1}return jT(()=>{f.value=JSON.stringify(n.value,null,2)}),(v,b)=>{const g=_a("el-button"),O=_a("el-input"),x=_a("el-drawer");return Rc(),bf(x,{modelValue:oi(c),"onUpdate:modelValue":b[1]||(b[1]=S=>_f(c)?c.value=S:null)},{header:wf(()=>[tC,xf(g,{type:"primary",onClick:h},{default:wf(()=>[MT("  ")]),_:1})]),default:wf(()=>[xf(O,{modelValue:f.value,"onUpdate:modelValue":b[0]||(b[0]=S=>f.value=S),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue"])}}}),pC=om({__name:"index",props:{lf:{},initOptions:{},modelValue:{},elementData:{},formOptions:{},formData:{},formOption:{},formDefaults:{},formWidth:{},formOptionFormat:{type:Function},formDataFormat:{type:Function}},setup(e){const i=e,o=PT(i),{lf:s,graphData:n,formData:c,formOption:f,formDefaults:h,formLoading:v,editorVisible:b,onUpdateFormData:g}=o,O=UE("container");return BE(()=>{var x;s.value=new Wt.LogicFlow({container:document.querySelector(`#${O}`),grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[mP,Wk,_A,Vk,OA,dA,fm,mO,jm,Uw],edgeGenerator:(S,N)=>{if(["note","serviceTask"].includes(N.type))return"noteFlow"},...i.initOptions}),(x=s.value)==null||x.setTheme(zE),IT(o),Up(n,S=>{var D,z,Z;const N=JSON.stringify(S),j=JSON.stringify((D=s.value)==null?void 0:D.getGraphData());N!==j&&((z=s.value)==null||z.render(S),(Z=s.value)==null||Z.emit("element:click",{isForce:!0}))},{immediate:!0})}),(x,S)=>{const N=_a("el-main"),j=_a("el-empty"),R=_a("el-skeleton"),D=_a("avue-form"),z=_a("el-aside"),Z=_a("el-container");return Rc(),bf(Z,{class:"lf-container"},{default:wf(()=>[xf(N,{id:oi(O),class:"lf-main"},null,8,["id"]),xf(z,{width:x.formWidth,class:"lf-aside"},{default:wf(()=>{var fe,se;return[DT(x.$slots,"form-top"),(se=(fe=oi(f))==null?void 0:fe.group)!=null&&se.length?oi(v)?(Rc(),bf(R,{key:1})):(Rc(),bf(D,{key:2,modelValue:oi(c),"onUpdate:modelValue":[S[0]||(S[0]=oe=>_f(c)?c.value=oe:null),oi(g)],defaults:oi(h),"onUpdate:defaults":S[1]||(S[1]=oe=>_f(h)?h.value=oe:null),option:oi(f)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(Rc(),bf(j,{key:0,description:""}))]}),_:3},8,["width"]),xf(rC,{modelValue:oi(n),"onUpdate:modelValue":S[2]||(S[2]=fe=>_f(n)?n.value=fe:null),visible:oi(b),"onUpdate:visible":S[3]||(S[3]=fe=>_f(b)?b.value=fe:null),onConfirm:S[4]||(S[4]=fe=>{var se;return(se=oi(s))==null?void 0:se.render(fe)})},null,8,["modelValue","visible"])]),_:3})}}}),nC=["id"],hC=om({__name:"index",props:{lf:{},initOptions:{},modelValue:{},styles:{},tooltips:{}},setup(e){const i=e,o=GE(i,void 0,{passive:!0}),{lf:s,modelValue:n}=o,c=UE("container");return BE(()=>{var f;s.value=new Wt.LogicFlow({container:document.querySelector(`#${c}`),grid:{type:"dot",size:10},isSilentMode:!0,plugins:[fm,mO,jm,Hw],...i.initOptions}),(f=s.value)==null||f.setTheme(zE),Up(n,h=>{var v;(v=s.value)==null||v.render(h)},{immediate:!0}),Up(()=>i.styles,h=>{h==null||h.forEach(({id:v,style:b})=>{var g,O;v&&((O=(g=s.value)==null?void 0:g.graphModel)==null||O.updateAttributes(v,{style:b}))})},{immediate:!0}),Up(()=>i.tooltips,h=>{var v,b;(b=(v=s.value)==null?void 0:v.extension.tooltip)==null||b.setTooltips(h??[])},{immediate:!0})}),(f,h)=>(Rc(),kT("div",{id:oi(c),class:"lf-container"},null,8,nC))}});export{fm as B,mP as C,Uw as D,qA as E,vP as G,Vk as M,lP as N,WA as P,$A as S,jm as T,rP as U,pC as _,hC as a,YA as b,KA as c,zE as d,ZA as e,JA as f,QA as g,eP as h,tP as i,nP as j,oP as k,iP as l,aP as m,uP as n,fP as o,dP as p,pP as q,yP as r,mO as s,Wk as t,qk as u,eC as v,Hw as w};
