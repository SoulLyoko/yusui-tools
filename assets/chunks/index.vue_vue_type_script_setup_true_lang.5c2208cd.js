var iP=Object.defineProperty;var aP=(e,r,t)=>r in e?iP(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var mi=(e,r,t)=>(aP(e,typeof r!="symbol"?r+"":r,t),t);import{a as uP,o as Wi,I as sP,q as cP}from"../flow-design_demo.md.e3fc14c0.js";import{bR as lP,aj as If,d3 as Bm}from"../composables_use-crud_index.md.e2ebeaee.js";import{i as Gm,u as fP}from"./uniqueId.780904a3.js";import{n as fm,w as z_,h as ew,a as dP,e as pP,H as wa,j as Lc,D as Lf,E as Xc,l as dm,J as Gf,p as hP,u as oi,i as Ff,C as vP,f as yP,k as gP,aE as mP}from"./framework.d50ee5d6.js";import{u as bP}from"./theme.b37f6454.js";const H_={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}};function X_(e,r){return e.map(t=>{const s=r.find(m=>m.buttonKey===t.buttonKey),{name:i,buttonKey:c,display:l,approval:h}=t;return{name:i,buttonKey:c,display:l,approval:h,...s}})}function pm(e,r){return e.map(t=>{var S,N;const s=r.find(j=>j.prop===t.prop),{label:i,prop:c,display:l=!0,disabled:h=!1,detail:v=!1,readonly:m=!1,rules:g}=t,O=(g==null?void 0:g.some(j=>j.required))??!1,x={label:i,prop:c,display:l,disabled:h,detail:v,readonly:m,required:O,...s};return t.type==="dynamic"&&((N=(S=t.children)==null?void 0:S.column)!=null&&N.length)&&(x.children=pm(t.children.column,(s==null?void 0:s.children)??[])),x})}function _P({lf:e,graphData:r,elementData:t,formData:s,formLoading:i,formOption:c,formOptions:l,editorVisible:h,dataOptions:v,formRef:m,formDefaults:g}){var S,N,j,M,C,V,ce,_e,fe;async function O({data:z,isForce:ee}={data:{},isForce:!1}){var L,Y,K,I,pe,De,Q;const $=(L=e.value)==null?void 0:L.graphModel.nodes.find(se=>se.type==="process");!z&&($!=null&&$.id)&&(z=(Y=e.value)==null?void 0:Y.getNodeDataById($.id)),!((z==null?void 0:z.id)===((K=t.value)==null?void 0:K.id)&&(z==null?void 0:z.type)===((I=t.value)==null?void 0:I.type)&&!ee)&&(z.type!=="process"&&((pe=e.value)==null||pe.selectElementById(z.id)),i.value=!0,await fm(),t.value=z,c.value={menuBtn:!1,span:24,labelPosition:"left",group:((De=l.value)==null?void 0:De[z.type])??uP},s.value={...z.properties,id:z.id,name:((Q=z.text)==null?void 0:Q.value)||""},i.value=!1,await fm(),x())}async function x(){var I,pe,De,Q,se,he,be;const{formPropertyList:z,buttonList:ee,fieldsDic:$,flowButtonDisplayDic:L,flowButtonApprovalDic:Y}=v.value??{},K=te=>{var ve,Fe;return(Fe=(ve=c.value)==null?void 0:ve.group)==null?void 0:Fe.some(Ze=>{var ht;return(ht=Ze.column)==null?void 0:ht.some(Ft=>Ft.prop===te)})};K("button")&&(s.value.button=X_(ee||[],((I=s.value)==null?void 0:I.button)||[]),(Q=(De=(pe=g.value)==null?void 0:pe.button.children)==null?void 0:De.column)==null||Q.forEach(te=>{te.prop==="display"&&(te.dicData=L),te.prop==="approval"&&(te.dicData=Y)})),K("formProperty")&&(s.value.formProperty=pm(z||[],((se=s.value)==null?void 0:se.formProperty)||[])),K("priority")&&((he=m.value)==null||he.updateDic("priority",$)),K("formTitle")&&((be=m.value)==null||be.updateDic("formTitle",$))}(S=e.value)==null||S.on("element:click",O),(N=e.value)==null||N.on("blank:click",O),(j=e.value)==null||j.on("node:add",O),(M=e.value)==null||M.on("node:dnd-add",O),(C=e.value)==null||C.on("node:delete",()=>O()),(V=e.value)==null||V.on("history:change",()=>{var z;r.value=(z=e.value)==null?void 0:z.getGraphData()}),(ce=e.value)==null||ce.on("custom:edit-click",()=>{h.value=!0}),(_e=e.value)==null||_e.on("custom:reset-form-property",()=>{var z,ee;(ee=(z=r.value)==null?void 0:z.flowElementList)==null||ee.forEach($=>{var L,Y;(L=$.properties)!=null&&L.formProperty&&($.properties.formProperty=pm(((Y=v.value)==null?void 0:Y.formPropertyList)||[],[]))}),r.value={...r.value}}),(fe=e.value)==null||fe.on("custom:reset-button",()=>{var z,ee;(ee=(z=r.value)==null?void 0:z.flowElementList)==null||ee.forEach($=>{var L,Y;(L=$.properties)!=null&&L.button&&($.properties.button=X_(((Y=v.value)==null?void 0:Y.buttonList)||[],[]))}),r.value={...r.value}})}var hm={exports:{}};(function(e,r){(function(t,s){e.exports=s()})(window,function(){return function(t){var s={};function i(c){if(s[c])return s[c].exports;var l=s[c]={i:c,l:!1,exports:{}};return t[c].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=t,i.c=s,i.d=function(c,l,h){i.o(c,l)||Object.defineProperty(c,l,{enumerable:!0,get:h})},i.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},i.t=function(c,l){if(1&l&&(c=i(c)),8&l||4&l&&typeof c=="object"&&c&&c.__esModule)return c;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:c}),2&l&&typeof c!="string")for(var v in c)i.d(h,v,function(m){return c[m]}.bind(null,v));return h},i.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(l,"a",l),l},i.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},i.p="",i(i.s=215)}([function(t,s,i){i.d(s,"a",function(){return fe}),i.d(s,"b",function(){return _e}),i.d(s,"c",function(){return xt}),i.d(s,"d",function(){return tr}),i.d(s,"e",function(){return C}),i.d(s,"f",function(){return ce}),i.d(s,"g",function(){return C}),i.d(s,"h",function(){return bt}),i.d(s,"i",function(){return l}),i.d(s,"j",function(){return Ft}),i.d(s,"k",function(){return I});var c,l,h,v,m,g,O,x={},S=[],N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function j(Oe,oe){for(var me in oe)Oe[me]=oe[me];return Oe}function M(Oe){var oe=Oe.parentNode;oe&&oe.removeChild(Oe)}function C(Oe,oe,me){var qe,gt,et,Ct={};for(et in oe)et=="key"?qe=oe[et]:et=="ref"?gt=oe[et]:Ct[et]=oe[et];if(arguments.length>2&&(Ct.children=arguments.length>3?c.call(arguments,2):me),typeof Oe=="function"&&Oe.defaultProps!=null)for(et in Oe.defaultProps)Ct[et]===void 0&&(Ct[et]=Oe.defaultProps[et]);return V(Oe,Ct,qe,gt,null)}function V(Oe,oe,me,qe,gt){var et={type:Oe,props:oe,key:me,ref:qe,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:gt??++h};return gt==null&&l.vnode!=null&&l.vnode(et),et}function ce(){return{current:null}}function _e(Oe){return Oe.children}function fe(Oe,oe){this.props=Oe,this.context=oe}function z(Oe,oe){if(oe==null)return Oe.__?z(Oe.__,Oe.__.__k.indexOf(Oe)+1):null;for(var me;oe<Oe.__k.length;oe++)if((me=Oe.__k[oe])!=null&&me.__e!=null)return me.__e;return typeof Oe.type=="function"?z(Oe):null}function ee(Oe){var oe,me;if((Oe=Oe.__)!=null&&Oe.__c!=null){for(Oe.__e=Oe.__c.base=null,oe=0;oe<Oe.__k.length;oe++)if((me=Oe.__k[oe])!=null&&me.__e!=null){Oe.__e=Oe.__c.base=me.__e;break}return ee(Oe)}}function $(Oe){(!Oe.__d&&(Oe.__d=!0)&&v.push(Oe)&&!L.__r++||g!==l.debounceRendering)&&((g=l.debounceRendering)||m)(L)}function L(){for(var Oe;L.__r=v.length;)Oe=v.sort(function(oe,me){return oe.__v.__b-me.__v.__b}),v=[],Oe.some(function(oe){var me,qe,gt,et,Ct,zt;oe.__d&&(Ct=(et=(me=oe).__v).__e,(zt=me.__P)&&(qe=[],(gt=j({},et)).__v=et.__v+1,be(zt,et,gt,me.__n,zt.ownerSVGElement!==void 0,et.__h!=null?[Ct]:null,qe,Ct??z(et),et.__h),te(qe,et),et.__e!=Ct&&ee(et)))})}function Y(Oe,oe,me,qe,gt,et,Ct,zt,Zt,Gt){var ze,Wt,xe,Ht,yr,G,pr,Dr=qe&&qe.__k||S,Yr=Dr.length;for(me.__k=[],ze=0;ze<oe.length;ze++)if((Ht=me.__k[ze]=(Ht=oe[ze])==null||typeof Ht=="boolean"?null:typeof Ht=="string"||typeof Ht=="number"||typeof Ht=="bigint"?V(null,Ht,null,null,Ht):Array.isArray(Ht)?V(_e,{children:Ht},null,null,null):Ht.__b>0?V(Ht.type,Ht.props,Ht.key,null,Ht.__v):Ht)!=null){if(Ht.__=me,Ht.__b=me.__b+1,(xe=Dr[ze])===null||xe&&Ht.key==xe.key&&Ht.type===xe.type)Dr[ze]=void 0;else for(Wt=0;Wt<Yr;Wt++){if((xe=Dr[Wt])&&Ht.key==xe.key&&Ht.type===xe.type){Dr[Wt]=void 0;break}xe=null}be(Oe,Ht,xe=xe||x,gt,et,Ct,zt,Zt,Gt),yr=Ht.__e,(Wt=Ht.ref)&&xe.ref!=Wt&&(pr||(pr=[]),xe.ref&&pr.push(xe.ref,null,Ht),pr.push(Wt,Ht.__c||yr,Ht)),yr!=null?(G==null&&(G=yr),typeof Ht.type=="function"&&Ht.__k===xe.__k?Ht.__d=Zt=K(Ht,Zt,Oe):Zt=pe(Oe,Ht,xe,Dr,yr,Zt),typeof me.type=="function"&&(me.__d=Zt)):Zt&&xe.__e==Zt&&Zt.parentNode!=Oe&&(Zt=z(xe))}for(me.__e=G,ze=Yr;ze--;)Dr[ze]!=null&&(typeof me.type=="function"&&Dr[ze].__e!=null&&Dr[ze].__e==me.__d&&(me.__d=z(qe,ze+1)),Ze(Dr[ze],Dr[ze]));if(pr)for(ze=0;ze<pr.length;ze++)Fe(pr[ze],pr[++ze],pr[++ze])}function K(Oe,oe,me){for(var qe,gt=Oe.__k,et=0;gt&&et<gt.length;et++)(qe=gt[et])&&(qe.__=Oe,oe=typeof qe.type=="function"?K(qe,oe,me):pe(me,qe,qe,gt,qe.__e,oe));return oe}function I(Oe,oe){return oe=oe||[],Oe==null||typeof Oe=="boolean"||(Array.isArray(Oe)?Oe.some(function(me){I(me,oe)}):oe.push(Oe)),oe}function pe(Oe,oe,me,qe,gt,et){var Ct,zt,Zt;if(oe.__d!==void 0)Ct=oe.__d,oe.__d=void 0;else if(me==null||gt!=et||gt.parentNode==null)e:if(et==null||et.parentNode!==Oe)Oe.appendChild(gt),Ct=null;else{for(zt=et,Zt=0;(zt=zt.nextSibling)&&Zt<qe.length;Zt+=2)if(zt==gt)break e;Oe.insertBefore(gt,et),Ct=et}return Ct!==void 0?Ct:gt.nextSibling}function De(Oe,oe,me){oe[0]==="-"?Oe.setProperty(oe,me):Oe[oe]=me==null?"":typeof me!="number"||N.test(oe)?me:me+"px"}function Q(Oe,oe,me,qe,gt){var et;e:if(oe==="style")if(typeof me=="string")Oe.style.cssText=me;else{if(typeof qe=="string"&&(Oe.style.cssText=qe=""),qe)for(oe in qe)me&&oe in me||De(Oe.style,oe,"");if(me)for(oe in me)qe&&me[oe]===qe[oe]||De(Oe.style,oe,me[oe])}else if(oe[0]==="o"&&oe[1]==="n")et=oe!==(oe=oe.replace(/Capture$/,"")),oe=oe.toLowerCase()in Oe?oe.toLowerCase().slice(2):oe.slice(2),Oe.l||(Oe.l={}),Oe.l[oe+et]=me,me?qe||Oe.addEventListener(oe,et?he:se,et):Oe.removeEventListener(oe,et?he:se,et);else if(oe!=="dangerouslySetInnerHTML"){if(gt)oe=oe.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(oe!=="href"&&oe!=="list"&&oe!=="form"&&oe!=="tabIndex"&&oe!=="download"&&oe in Oe)try{Oe[oe]=me??"";break e}catch{}typeof me=="function"||(me!=null&&(me!==!1||oe[0]==="a"&&oe[1]==="r")?Oe.setAttribute(oe,me):Oe.removeAttribute(oe))}}function se(Oe){this.l[Oe.type+!1](l.event?l.event(Oe):Oe)}function he(Oe){this.l[Oe.type+!0](l.event?l.event(Oe):Oe)}function be(Oe,oe,me,qe,gt,et,Ct,zt,Zt){var Gt,ze,Wt,xe,Ht,yr,G,pr,Dr,Yr,Zr,sr=oe.type;if(oe.constructor!==void 0)return null;me.__h!=null&&(Zt=me.__h,zt=oe.__e=me.__e,oe.__h=null,et=[zt]),(Gt=l.__b)&&Gt(oe);try{e:if(typeof sr=="function"){if(pr=oe.props,Dr=(Gt=sr.contextType)&&qe[Gt.__c],Yr=Gt?Dr?Dr.props.value:Gt.__:qe,me.__c?G=(ze=oe.__c=me.__c).__=ze.__E:("prototype"in sr&&sr.prototype.render?oe.__c=ze=new sr(pr,Yr):(oe.__c=ze=new fe(pr,Yr),ze.constructor=sr,ze.render=ht),Dr&&Dr.sub(ze),ze.props=pr,ze.state||(ze.state={}),ze.context=Yr,ze.__n=qe,Wt=ze.__d=!0,ze.__h=[]),ze.__s==null&&(ze.__s=ze.state),sr.getDerivedStateFromProps!=null&&(ze.__s==ze.state&&(ze.__s=j({},ze.__s)),j(ze.__s,sr.getDerivedStateFromProps(pr,ze.__s))),xe=ze.props,Ht=ze.state,Wt)sr.getDerivedStateFromProps==null&&ze.componentWillMount!=null&&ze.componentWillMount(),ze.componentDidMount!=null&&ze.__h.push(ze.componentDidMount);else{if(sr.getDerivedStateFromProps==null&&pr!==xe&&ze.componentWillReceiveProps!=null&&ze.componentWillReceiveProps(pr,Yr),!ze.__e&&ze.shouldComponentUpdate!=null&&ze.shouldComponentUpdate(pr,ze.__s,Yr)===!1||oe.__v===me.__v){ze.props=pr,ze.state=ze.__s,oe.__v!==me.__v&&(ze.__d=!1),ze.__v=oe,oe.__e=me.__e,oe.__k=me.__k,oe.__k.forEach(function(sn){sn&&(sn.__=oe)}),ze.__h.length&&Ct.push(ze);break e}ze.componentWillUpdate!=null&&ze.componentWillUpdate(pr,ze.__s,Yr),ze.componentDidUpdate!=null&&ze.__h.push(function(){ze.componentDidUpdate(xe,Ht,yr)})}ze.context=Yr,ze.props=pr,ze.state=ze.__s,(Gt=l.__r)&&Gt(oe),ze.__d=!1,ze.__v=oe,ze.__P=Oe,Gt=ze.render(ze.props,ze.state,ze.context),ze.state=ze.__s,ze.getChildContext!=null&&(qe=j(j({},qe),ze.getChildContext())),Wt||ze.getSnapshotBeforeUpdate==null||(yr=ze.getSnapshotBeforeUpdate(xe,Ht)),Zr=Gt!=null&&Gt.type===_e&&Gt.key==null?Gt.props.children:Gt,Y(Oe,Array.isArray(Zr)?Zr:[Zr],oe,me,qe,gt,et,Ct,zt,Zt),ze.base=oe.__e,oe.__h=null,ze.__h.length&&Ct.push(ze),G&&(ze.__E=ze.__=null),ze.__e=!1}else et==null&&oe.__v===me.__v?(oe.__k=me.__k,oe.__e=me.__e):oe.__e=ve(me.__e,oe,me,qe,gt,et,Ct,Zt);(Gt=l.diffed)&&Gt(oe)}catch(sn){oe.__v=null,(Zt||et!=null)&&(oe.__e=zt,oe.__h=!!Zt,et[et.indexOf(zt)]=null),l.__e(sn,oe,me)}}function te(Oe,oe){l.__c&&l.__c(oe,Oe),Oe.some(function(me){try{Oe=me.__h,me.__h=[],Oe.some(function(qe){qe.call(me)})}catch(qe){l.__e(qe,me.__v)}})}function ve(Oe,oe,me,qe,gt,et,Ct,zt){var Zt,Gt,ze,Wt=me.props,xe=oe.props,Ht=oe.type,yr=0;if(Ht==="svg"&&(gt=!0),et!=null){for(;yr<et.length;yr++)if((Zt=et[yr])&&"setAttribute"in Zt==!!Ht&&(Ht?Zt.localName===Ht:Zt.nodeType===3)){Oe=Zt,et[yr]=null;break}}if(Oe==null){if(Ht===null)return document.createTextNode(xe);Oe=gt?document.createElementNS("http://www.w3.org/2000/svg",Ht):document.createElement(Ht,xe.is&&xe),et=null,zt=!1}if(Ht===null)Wt===xe||zt&&Oe.data===xe||(Oe.data=xe);else{if(et=et&&c.call(Oe.childNodes),Gt=(Wt=me.props||x).dangerouslySetInnerHTML,ze=xe.dangerouslySetInnerHTML,!zt){if(et!=null)for(Wt={},yr=0;yr<Oe.attributes.length;yr++)Wt[Oe.attributes[yr].name]=Oe.attributes[yr].value;(ze||Gt)&&(ze&&(Gt&&ze.__html==Gt.__html||ze.__html===Oe.innerHTML)||(Oe.innerHTML=ze&&ze.__html||""))}if(function(G,pr,Dr,Yr,Zr){var sr;for(sr in Dr)sr==="children"||sr==="key"||sr in pr||Q(G,sr,null,Dr[sr],Yr);for(sr in pr)Zr&&typeof pr[sr]!="function"||sr==="children"||sr==="key"||sr==="value"||sr==="checked"||Dr[sr]===pr[sr]||Q(G,sr,pr[sr],Dr[sr],Yr)}(Oe,xe,Wt,gt,zt),ze)oe.__k=[];else if(yr=oe.props.children,Y(Oe,Array.isArray(yr)?yr:[yr],oe,me,qe,gt&&Ht!=="foreignObject",et,Ct,et?et[0]:me.__k&&z(me,0),zt),et!=null)for(yr=et.length;yr--;)et[yr]!=null&&M(et[yr]);zt||("value"in xe&&(yr=xe.value)!==void 0&&(yr!==Wt.value||yr!==Oe.value||Ht==="progress"&&!yr)&&Q(Oe,"value",yr,Wt.value,!1),"checked"in xe&&(yr=xe.checked)!==void 0&&yr!==Oe.checked&&Q(Oe,"checked",yr,Wt.checked,!1))}return Oe}function Fe(Oe,oe,me){try{typeof Oe=="function"?Oe(oe):Oe.current=oe}catch(qe){l.__e(qe,me)}}function Ze(Oe,oe,me){var qe,gt;if(l.unmount&&l.unmount(Oe),(qe=Oe.ref)&&(qe.current&&qe.current!==Oe.__e||Fe(qe,null,oe)),(qe=Oe.__c)!=null){if(qe.componentWillUnmount)try{qe.componentWillUnmount()}catch(et){l.__e(et,oe)}qe.base=qe.__P=null}if(qe=Oe.__k)for(gt=0;gt<qe.length;gt++)qe[gt]&&Ze(qe[gt],oe,typeof Oe.type!="function");me||Oe.__e==null||M(Oe.__e),Oe.__e=Oe.__d=void 0}function ht(Oe,oe,me){return this.constructor(Oe,me)}function Ft(Oe,oe,me){var qe,gt,et;l.__&&l.__(Oe,oe),gt=(qe=typeof me=="function")?null:me&&me.__k||oe.__k,et=[],be(oe,Oe=(!qe&&me||oe).__k=C(_e,null,[Oe]),gt||x,x,oe.ownerSVGElement!==void 0,!qe&&me?[me]:gt?null:oe.firstChild?c.call(oe.childNodes):null,et,!qe&&me?me:gt?gt.__e:oe.firstChild,qe),te(et,Oe)}function bt(Oe,oe){Ft(Oe,oe,bt)}function xt(Oe,oe,me){var qe,gt,et,Ct=j({},Oe.props);for(et in oe)et=="key"?qe=oe[et]:et=="ref"?gt=oe[et]:Ct[et]=oe[et];return arguments.length>2&&(Ct.children=arguments.length>3?c.call(arguments,2):me),V(Oe.type,Ct,qe||Oe.key,gt||Oe.ref,null)}function tr(Oe,oe){var me={__c:oe="__cC"+O++,__:Oe,Consumer:function(qe,gt){return qe.children(gt)},Provider:function(qe){var gt,et;return this.getChildContext||(gt=[],(et={})[oe]=this,this.getChildContext=function(){return et},this.shouldComponentUpdate=function(Ct){this.props.value!==Ct.value&&gt.some($)},this.sub=function(Ct){gt.push(Ct);var zt=Ct.componentWillUnmount;Ct.componentWillUnmount=function(){gt.splice(gt.indexOf(Ct),1),zt&&zt.call(Ct)}}),qe.children}};return me.Provider.__=me.Consumer.contextType=me}c=S.slice,l={__e:function(Oe,oe){for(var me,qe,gt;oe=oe.__;)if((me=oe.__c)&&!me.__)try{if((qe=me.constructor)&&qe.getDerivedStateFromError!=null&&(me.setState(qe.getDerivedStateFromError(Oe)),gt=me.__d),me.componentDidCatch!=null&&(me.componentDidCatch(Oe),gt=me.__d),gt)return me.__E=me}catch(et){Oe=et}throw Oe}},h=0,fe.prototype.setState=function(Oe,oe){var me;me=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=j({},this.state),typeof Oe=="function"&&(Oe=Oe(j({},me),this.props)),Oe&&j(me,Oe),Oe!=null&&this.__v&&(oe&&this.__h.push(oe),$(this))},fe.prototype.forceUpdate=function(Oe){this.__v&&(this.__e=!0,Oe&&this.__h.push(Oe),$(this))},fe.prototype.render=_e,v=[],m=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,L.__r=0,O=0},function(t,s,i){(function(c,l){i.d(s,"a",function(){return $}),i.d(s,"b",function(){return Nu}),i.d(s,"c",function(){return Lo}),i.d(s,"d",function(){return dr}),i.d(s,"e",function(){return Ot}),i.d(s,"f",function(){return Nt}),i.d(s,"g",function(){return or}),i.d(s,"h",function(){return uo}),i.d(s,"i",function(){return Zr}),i.d(s,"j",function(){return Xt}),i.d(s,"k",function(){return Vo}),i.d(s,"l",function(){return Ou}),i.d(s,"m",function(){return G}),i.d(s,"n",function(){return Si}),i.d(s,"o",function(){return K}),i.d(s,"p",function(){return ks}),i.d(s,"q",function(){return vo}),i.d(s,"r",function(){return Ma}),i.d(s,"s",function(){return ao}),i.d(s,"t",function(){return qi}),i.d(s,"u",function(){return ja}),i.d(s,"v",function(){return hl}),i.d(s,"w",function(){return Ds}),i.d(s,"x",function(){return Nn}),i.d(s,"y",function(){return jo}),i.d(s,"z",function(){return On}),i.d(s,"A",function(){return Mn}),i.d(s,"B",function(){return yo}),i.d(s,"C",function(){return Gt}),i.d(s,"D",function(){return Au}),i.d(s,"E",function(){return xi}),i.d(s,"F",function(){return wi}),i.d(s,"G",function(){return dl}),i.d(s,"H",function(){return Ps}),i.d(s,"I",function(){return yl}),i.d(s,"J",function(){return go}),i.d(s,"K",function(){return Ne}),i.d(s,"L",function(){return zn}),i.d(s,"M",function(){return Is});var h=[];Object.freeze(h);var v={};function m(){return++qt.mobxGuid}function g(_){throw O(!1,_),"X"}function O(_,E){if(!_)throw new Error("[mobx] "+(E||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(v);function x(_){var E=!1;return function(){if(!E)return E=!0,_.apply(this,arguments)}}var S=function(){};function N(_){return _!==null&&typeof _=="object"}function j(_){if(_===null||typeof _!="object")return!1;var E=Object.getPrototypeOf(_);return E===Object.prototype||E===null}function M(_,E,P){Object.defineProperty(_,E,{enumerable:!1,writable:!0,configurable:!0,value:P})}function C(_,E){var P="isMobX"+_;return E.prototype[P]=!0,function(F){return N(F)&&F[P]===!0}}function V(_){return _ instanceof Map}function ce(_){return _ instanceof Set}function _e(_){var E=new Set;for(var P in _)E.add(P);return Object.getOwnPropertySymbols(_).forEach(function(F){Object.getOwnPropertyDescriptor(_,F).enumerable&&E.add(F)}),Array.from(E)}function fe(_){return _&&_.toString?_.toString():new String(_).toString()}function z(_){return _===null?null:typeof _=="object"?""+_:_}var ee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:Object.getOwnPropertyNames,$=Symbol("mobx administration"),L=function(){function _(E){E===void 0&&(E="Atom@"+m()),this.name=E,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Wt.NOT_TRACKING}return _.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},_.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},_.prototype.reportObserved=function(){return Ts(this)},_.prototype.reportChanged=function(){po(),function(E){E.lowestObserverState!==Wt.STALE&&(E.lowestObserverState=Wt.STALE,E.observers.forEach(function(P){P.dependenciesState===Wt.UP_TO_DATE&&(P.isTracing!==xe.NONE&&Xo(P,E),P.onBecomeStale()),P.dependenciesState=Wt.STALE}))}(this),ho()},_.prototype.toString=function(){return this.name},_}(),Y=C("Atom",L);function K(_,E,P){E===void 0&&(E=S),P===void 0&&(P=S);var F,Z=new L(_);return E!==S&&Ms("onBecomeObserved",Z,E,F),P!==S&&xi(Z,P),Z}var I={identity:function(_,E){return _===E},structural:function(_,E){return Mu(_,E)},default:function(_,E){return Object.is(_,E)},shallow:function(_,E){return Mu(_,E,1)}},pe=function(_,E){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,F){P.__proto__=F}||function(P,F){for(var Z in F)F.hasOwnProperty(Z)&&(P[Z]=F[Z])},pe(_,E)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var De=function(){return De=Object.assign||function(_){for(var E,P=1,F=arguments.length;P<F;P++)for(var Z in E=arguments[P])Object.prototype.hasOwnProperty.call(E,Z)&&(_[Z]=E[Z]);return _},De.apply(this,arguments)};function Q(_){var E=typeof Symbol=="function"&&_[Symbol.iterator],P=0;return E?E.call(_):{next:function(){return _&&P>=_.length&&(_=void 0),{value:_&&_[P++],done:!_}}}}function se(_,E){var P=typeof Symbol=="function"&&_[Symbol.iterator];if(!P)return _;var F,Z,Ae=P.call(_),Xe=[];try{for(;(E===void 0||E-- >0)&&!(F=Ae.next()).done;)Xe.push(F.value)}catch(mt){Z={error:mt}}finally{try{F&&!F.done&&(P=Ae.return)&&P.call(Ae)}finally{if(Z)throw Z.error}}return Xe}function he(){for(var _=[],E=0;E<arguments.length;E++)_=_.concat(se(arguments[E]));return _}var be=Symbol("mobx did run lazy initializers"),te=Symbol("mobx pending decorators"),ve={},Fe={};function Ze(_,E){var P=E?ve:Fe;return P[_]||(P[_]={configurable:!0,enumerable:E,get:function(){return ht(this),this[_]},set:function(F){ht(this),this[_]=F}})}function ht(_){var E,P;if(_[be]!==!0){var F=_[te];if(F){M(_,be,!0);var Z=he(Object.getOwnPropertySymbols(F),Object.keys(F));try{for(var Ae=Q(Z),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var mt=F[Xe.value];mt.propertyCreator(_,mt.prop,mt.descriptor,mt.decoratorTarget,mt.decoratorArguments)}}catch(Vt){E={error:Vt}}finally{try{Xe&&!Xe.done&&(P=Ae.return)&&P.call(Ae)}finally{if(E)throw E.error}}}}}function Ft(_,E){return function(){var P,F=function(Z,Ae,Xe,mt){if(mt===!0)return E(Z,Ae,Xe,Z,P),null;if(!Object.prototype.hasOwnProperty.call(Z,te)){var Vt=Z[te];M(Z,te,De({},Vt))}return Z[te][Ae]={prop:Ae,propertyCreator:E,descriptor:Xe,decoratorTarget:Z,decoratorArguments:P},Ze(Ae,_)};return bt(arguments)?(P=h,F.apply(null,arguments)):(P=Array.prototype.slice.call(arguments),F)}}function bt(_){return(_.length===2||_.length===3)&&(typeof _[1]=="string"||typeof _[1]=="symbol")||_.length===4&&_[3]===!0}function xt(_,E,P){return Nn(_)?_:Array.isArray(_)?Gt.array(_,{name:P}):j(_)?Gt.object(_,void 0,{name:P}):V(_)?Gt.map(_,{name:P}):ce(_)?Gt.set(_,{name:P}):_}function tr(_){return _}function Oe(_){O(_);var E=Ft(!0,function(F,Z,Ae,Xe,mt){var Vt=Ae?Ae.initializer?Ae.initializer.call(F):Ae.value:void 0;ea(F).addObservableProp(Z,Vt,_)}),P=(c!==void 0&&c.env,E);return P.enhancer=_,P}var oe={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function me(_){return _==null?oe:typeof _=="string"?{name:_,deep:!0,proxy:!0}:_}Object.freeze(oe);var qe=Oe(xt),gt=Oe(function(_,E,P){return _==null||Mn(_)||jo(_)||On(_)||jn(_)?_:Array.isArray(_)?Gt.array(_,{name:P,deep:!1}):j(_)?Gt.object(_,void 0,{name:P,deep:!1}):V(_)?Gt.map(_,{name:P,deep:!1}):ce(_)?Gt.set(_,{name:P,deep:!1}):g(!1)}),et=Oe(tr),Ct=Oe(function(_,E,P){return Mu(_,E)?E:_});function zt(_){return _.defaultDecorator?_.defaultDecorator.enhancer:_.deep===!1?tr:xt}var Zt={box:function(_,E){arguments.length>2&&ze("box");var P=me(E);return new kr(_,zt(P),P.name,!0,P.equals)},array:function(_,E){arguments.length>2&&ze("array");var P=me(E);return Ji(_,zt(P),P.name)},map:function(_,E){arguments.length>2&&ze("map");var P=me(E);return new Nu(_,zt(P),P.name)},set:function(_,E){arguments.length>2&&ze("set");var P=me(E);return new Da(_,zt(P),P.name)},object:function(_,E,P){typeof arguments[1]=="string"&&ze("object");var F=me(P);if(F.proxy===!1)return vo({},_,E,F);var Z=wu(F),Ae=vo({},void 0,void 0,F),Xe=ml(Ae);return Rs(Xe,_,E,Z),Xe},ref:et,shallow:gt,deep:qe,struct:Ct},Gt=function(_,E,P){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return qe.apply(null,arguments);if(Nn(_))return _;var F=j(_)?Gt.object(_,E,P):Array.isArray(_)?Gt.array(_,E):V(_)?Gt.map(_,E):ce(_)?Gt.set(_,E):_;if(F!==_)return F;g(!1)};function ze(_){g("Expected one or two arguments to observable."+_+". Did you accidentally try to use observable."+_+" as decorator?")}Object.keys(Zt).forEach(function(_){return Gt[_]=Zt[_]});var Wt,xe,Ht=Ft(!1,function(_,E,P,F,Z){var Ae=P.get,Xe=P.set,mt=Z[0]||{};ea(_).addComputedProp(_,E,De({get:Ae,set:Xe,context:_},mt))}),yr=Ht({equals:I.structural}),G=function(_,E,P){if(typeof E=="string"||_!==null&&typeof _=="object"&&arguments.length===1)return Ht.apply(null,arguments);var F=typeof E=="object"?E:{};return F.get=_,F.set=typeof E=="function"?E:F.set,F.name=F.name||_.name||"",new zo(F)};G.struct=yr,function(_){_[_.NOT_TRACKING=-1]="NOT_TRACKING",_[_.UP_TO_DATE=0]="UP_TO_DATE",_[_.POSSIBLY_STALE=1]="POSSIBLY_STALE",_[_.STALE=2]="STALE"}(Wt||(Wt={})),function(_){_[_.NONE=0]="NONE",_[_.LOG=1]="LOG",_[_.BREAK=2]="BREAK"}(xe||(xe={}));var pr=function(_){this.cause=_};function Dr(_){return _ instanceof pr}function Yr(_){switch(_.dependenciesState){case Wt.UP_TO_DATE:return!1;case Wt.NOT_TRACKING:case Wt.STALE:return!0;case Wt.POSSIBLY_STALE:for(var E=Nt(!0),P=de(),F=_.observing,Z=F.length,Ae=0;Ae<Z;Ae++){var Xe=F[Ae];if(Ho(Xe)){if(qt.disableErrorBoundaries)Xe.get();else try{Xe.get()}catch{return Be(P),Ot(E),!0}if(_.dependenciesState===Wt.STALE)return Be(P),Ot(E),!0}}return Kt(_),Be(P),Ot(E),!1}}function Zr(){return qt.trackingDerivation!==null}function sr(_){var E=_.observers.size>0;qt.computationDepth>0&&E&&g(!1),qt.allowStateChanges||!E&&qt.enforceActions!=="strict"||g(!1)}function sn(_,E,P){var F=Nt(!0);Kt(_),_.newObserving=new Array(_.observing.length+100),_.unboundDepsCount=0,_.runId=++qt.runId;var Z,Ae=qt.trackingDerivation;if(qt.trackingDerivation=_,qt.disableErrorBoundaries===!0)Z=E.call(P);else try{Z=E.call(P)}catch(Xe){Z=new pr(Xe)}return qt.trackingDerivation=Ae,function(Xe){for(var mt=Xe.observing,Vt=Xe.observing=Xe.newObserving,Ar=Wt.UP_TO_DATE,cr=0,Gr=Xe.unboundDepsCount,Or=0;Or<Gr;Or++)(Ur=Vt[Or]).diffValue===0&&(Ur.diffValue=1,cr!==Or&&(Vt[cr]=Ur),cr++),Ur.dependenciesState>Ar&&(Ar=Ur.dependenciesState);for(Vt.length=cr,Xe.newObserving=null,Gr=mt.length;Gr--;)(Ur=mt[Gr]).diffValue===0&&tn(Ur,Xe),Ur.diffValue=0;for(;cr--;){var Ur;(Ur=Vt[cr]).diffValue===1&&(Ur.diffValue=0,xs(Ur,Xe))}Ar!==Wt.UP_TO_DATE&&(Xe.dependenciesState=Ar,Xe.onBecomeStale())}(_),Ot(F),Z}function re(_){var E=_.observing;_.observing=[];for(var P=E.length;P--;)tn(E[P],_);_.dependenciesState=Wt.NOT_TRACKING}function Ne(_){var E=de();try{return _()}finally{Be(E)}}function de(){var _=qt.trackingDerivation;return qt.trackingDerivation=null,_}function Be(_){qt.trackingDerivation=_}function Nt(_){var E=qt.allowStateReads;return qt.allowStateReads=_,E}function Ot(_){qt.allowStateReads=_}function Kt(_){if(_.dependenciesState!==Wt.UP_TO_DATE){_.dependenciesState=Wt.UP_TO_DATE;for(var E=_.observing,P=E.length;P--;)E[P].lowestObserverState=Wt.UP_TO_DATE}}var Tr=0,xn=1,Fn=Object.getOwnPropertyDescriptor(function(){},"name");Fn&&Fn.configurable;function hn(_,E,P){var F=function(){return En(_,E,P||this,arguments)};return F.isMobxAction=!0,F}function En(_,E,P,F){var Z=Xt();try{return E.apply(P,F)}catch(Ae){throw Z.error=Ae,Ae}finally{or(Z)}}function Xt(_,E,P){var F=0,Z=de();po();var Ae={prevDerivation:Z,prevAllowStateChanges:gr(!0),prevAllowStateReads:Nt(!0),notifySpy:!1,startTime:F,actionId:xn++,parentActionId:Tr};return Tr=Ae.actionId,Ae}function or(_){Tr!==_.actionId&&g("invalid action stack. did you forget to finish an action?"),Tr=_.parentActionId,_.error!==void 0&&(qt.suppressReactionErrors=!0),Xr(_.prevAllowStateChanges),Ot(_.prevAllowStateReads),ho(),Be(_.prevDerivation),_.notifySpy,qt.suppressReactionErrors=!1}function dr(_,E){var P,F=gr(_);try{P=E()}finally{Xr(F)}return P}function gr(_){var E=qt.allowStateChanges;return qt.allowStateChanges=_,E}function Xr(_){qt.allowStateChanges=_}var kr=function(_){function E(P,F,Z,Ae,Xe){Z===void 0&&(Z="ObservableValue@"+m()),Xe===void 0&&(Xe=I.default);var mt=_.call(this,Z)||this;return mt.enhancer=F,mt.name=Z,mt.equals=Xe,mt.hasUnreportedChange=!1,mt.value=F(P,void 0,Z),mt}return function(P,F){function Z(){this.constructor=P}pe(P,F),P.prototype=F===null?Object.create(F):(Z.prototype=F.prototype,new Z)}(E,_),E.prototype.dehanceValue=function(P){return this.dehancer!==void 0?this.dehancer(P):P},E.prototype.set=function(P){this.value,(P=this.prepareNewValue(P))!==qt.UNCHANGED&&this.setNewValue(P)},E.prototype.prepareNewValue=function(P){if(sr(this),qn(this)){var F=Rr(this,{object:this,type:"update",newValue:P});if(!F)return qt.UNCHANGED;P=F.newValue}return P=this.enhancer(P,this.value,this.name),this.equals(this.value,P)?qt.UNCHANGED:P},E.prototype.setNewValue=function(P){var F=this.value;this.value=P,this.reportChanged(),io(this)&&Bn(this,{type:"update",object:this,newValue:P,oldValue:F})},E.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},E.prototype.intercept=function(P){return No(this,P)},E.prototype.observe=function(P,F){return F&&P({object:this,type:"update",newValue:this.value,oldValue:void 0}),Wo(this,P)},E.prototype.toJSON=function(){return this.get()},E.prototype.toString=function(){return this.name+"["+this.value+"]"},E.prototype.valueOf=function(){return z(this.get())},E.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},E}(L),ui=C("ObservableValue",kr),zo=function(){function _(E){this.dependenciesState=Wt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Wt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+m(),this.value=new pr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=xe.NONE,O(E.get,"missing option for computed: get"),this.derivation=E.get,this.name=E.name||"ComputedValue@"+m(),E.set&&(this.setter=hn(this.name+"-setter",E.set)),this.equals=E.equals||(E.compareStructural||E.struct?I.structural:I.default),this.scope=E.context,this.requiresReaction=!!E.requiresReaction,this.keepAlive=!!E.keepAlive}return _.prototype.onBecomeStale=function(){(function(E){E.lowestObserverState===Wt.UP_TO_DATE&&(E.lowestObserverState=Wt.POSSIBLY_STALE,E.observers.forEach(function(P){P.dependenciesState===Wt.UP_TO_DATE&&(P.dependenciesState=Wt.POSSIBLY_STALE,P.isTracing!==xe.NONE&&Xo(P,E),P.onBecomeStale())}))})(this)},_.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},_.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},_.prototype.get=function(){this.isComputing&&g("Cycle detected in computation "+this.name+": "+this.derivation),qt.inBatch!==0||this.observers.size!==0||this.keepAlive?(Ts(this),Yr(this)&&this.trackAndCompute()&&function(P){P.lowestObserverState!==Wt.STALE&&(P.lowestObserverState=Wt.STALE,P.observers.forEach(function(F){F.dependenciesState===Wt.POSSIBLY_STALE?F.dependenciesState=Wt.STALE:F.dependenciesState===Wt.UP_TO_DATE&&(P.lowestObserverState=Wt.UP_TO_DATE)}))}(this)):Yr(this)&&(this.warnAboutUntrackedRead(),po(),this.value=this.computeValue(!1),ho());var E=this.value;if(Dr(E))throw E.cause;return E},_.prototype.peek=function(){var E=this.computeValue(!1);if(Dr(E))throw E.cause;return E},_.prototype.set=function(E){if(this.setter){O(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,E)}finally{this.isRunningSetter=!1}}else O(!1,!1)},_.prototype.trackAndCompute=function(){var E=this.value,P=this.dependenciesState===Wt.NOT_TRACKING,F=this.computeValue(!0),Z=P||Dr(E)||Dr(F)||!this.equals(E,F);return Z&&(this.value=F),Z},_.prototype.computeValue=function(E){var P;if(this.isComputing=!0,qt.computationDepth++,E)P=sn(this,this.derivation,this.scope);else if(qt.disableErrorBoundaries===!0)P=this.derivation.call(this.scope);else try{P=this.derivation.call(this.scope)}catch(F){P=new pr(F)}return qt.computationDepth--,this.isComputing=!1,P},_.prototype.suspend=function(){this.keepAlive||(re(this),this.value=void 0)},_.prototype.observe=function(E,P){var F=this,Z=!0,Ae=void 0;return Ou(function(){var Xe=F.get();if(!Z||P){var mt=de();E({type:"update",object:F,newValue:Xe,oldValue:Ae}),Be(mt)}Z=!1,Ae=Xe})},_.prototype.warnAboutUntrackedRead=function(){},_.prototype.toJSON=function(){return this.get()},_.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},_.prototype.valueOf=function(){return z(this.get())},_.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},_}(),Ho=C("ComputedValue",zo),Ki=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},sl={};function bu(){return typeof window<"u"?window:l!==void 0?l:typeof self<"u"?self:sl}var Ao=!0,ws=!1,qt=function(){var _=bu();return _.__mobxInstanceCount>0&&!_.__mobxGlobals&&(Ao=!1),_.__mobxGlobals&&_.__mobxGlobals.version!==new Ki().version&&(Ao=!1),Ao?_.__mobxGlobals?(_.__mobxInstanceCount+=1,_.__mobxGlobals.UNCHANGED||(_.__mobxGlobals.UNCHANGED={}),_.__mobxGlobals):(_.__mobxInstanceCount=1,_.__mobxGlobals=new Ki):(setTimeout(function(){ws||g("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Ki)}();function xs(_,E){_.observers.add(E),_.lowestObserverState>E.dependenciesState&&(_.lowestObserverState=E.dependenciesState)}function tn(_,E){_.observers.delete(E),_.observers.size===0&&Ss(_)}function Ss(_){_.isPendingUnobservation===!1&&(_.isPendingUnobservation=!0,qt.pendingUnobservations.push(_))}function po(){qt.inBatch++}function ho(){if(--qt.inBatch==0){As();for(var _=qt.pendingUnobservations,E=0;E<_.length;E++){var P=_[E];P.isPendingUnobservation=!1,P.observers.size===0&&(P.isBeingObserved&&(P.isBeingObserved=!1,P.onBecomeUnobserved()),P instanceof zo&&P.suspend())}qt.pendingUnobservations=[]}}function Ts(_){var E=qt.trackingDerivation;return E!==null?(E.runId!==_.lastAccessedBy&&(_.lastAccessedBy=E.runId,E.newObserving[E.unboundDepsCount++]=_,_.isBeingObserved||(_.isBeingObserved=!0,_.onBecomeObserved())),!0):(_.observers.size===0&&qt.inBatch>0&&Ss(_),!1)}function Xo(_,E){if(_.isTracing===xe.BREAK){var P=[];Oi(qi(_),P,1),new Function(`debugger;
/*
Tracing '`+_.name+`'

You are entering this break point because derivation '`+_.name+"' is being traced and '"+E.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(_ instanceof zo?_.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+P.join(`
`)+`
*/
    `)()}}function Oi(_,E,P){E.length>=1e3?E.push("(and many more)"):(E.push(""+new Array(P).join("	")+_.name),_.dependencies&&_.dependencies.forEach(function(F){return Oi(F,E,P+1)}))}var Lo=function(){function _(E,P,F,Z){E===void 0&&(E="Reaction@"+m()),Z===void 0&&(Z=!1),this.name=E,this.onInvalidate=P,this.errorHandler=F,this.requiresObservable=Z,this.observing=[],this.newObserving=[],this.dependenciesState=Wt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+m(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=xe.NONE}return _.prototype.onBecomeStale=function(){this.schedule()},_.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,qt.pendingReactions.push(this),As())},_.prototype.isScheduled=function(){return this._isScheduled},_.prototype.runReaction=function(){if(!this.isDisposed){if(po(),this._isScheduled=!1,Yr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(E){this.reportExceptionInDerivation(E)}}ho()}},_.prototype.track=function(E){if(!this.isDisposed){po(),this._isRunning=!0;var P=sn(this,E,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&re(this),Dr(P)&&this.reportExceptionInDerivation(P.cause),ho()}},_.prototype.reportExceptionInDerivation=function(E){var P=this;if(this.errorHandler)this.errorHandler(E,this);else{if(qt.disableErrorBoundaries)throw E;qt.suppressReactionErrors,qt.globalReactionErrorHandlers.forEach(function(F){return F(E,P)})}},_.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(po(),re(this),ho()))},_.prototype.getDisposer=function(){var E=this.dispose.bind(this);return E[$]=this,E},_.prototype.toString=function(){return"Reaction["+this.name+"]"},_.prototype.trace=function(E){E===void 0&&(E=!1),function(){for(var P=[],F=0;F<arguments.length;F++)P[F]=arguments[F];var Z=!1;typeof P[P.length-1]=="boolean"&&(Z=P.pop());var Ae=Po(P);if(!Ae)return g(!1);Ae.isTracing,xe.NONE,Ae.isTracing=Z?xe.BREAK:xe.LOG}(this,E)},_}(),_u=function(_){return _()};function As(){qt.inBatch>0||qt.isRunningReactions||_u(cl)}function cl(){qt.isRunningReactions=!0;for(var _=qt.pendingReactions,E=0;_.length>0;){++E==100&&_.splice(0);for(var P=_.splice(0),F=0,Z=P.length;F<Z;F++)P[F].runReaction()}qt.isRunningReactions=!1}var Na=C("Reaction",Lo);function ll(_){var E=_u;_u=function(P){return _(function(){return E(P)})}}function Ps(_){return function(){}}function fl(){g(!1)}function si(_){return function(E,P,F){if(F){if(F.value)return{value:hn(_,F.value),enumerable:!1,configurable:!0,writable:!0};var Z=F.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return hn(_,Z.call(this))}}}return Ns(_).apply(this,arguments)}}function Ns(_){return function(E,P,F){Object.defineProperty(E,P,{configurable:!0,enumerable:!1,get:function(){},set:function(Z){M(this,P,Vo(_,Z))}})}}var Vo=function(_,E,P,F){return arguments.length===1&&typeof _=="function"?hn(_.name||"<unnamed action>",_):arguments.length===2&&typeof E=="function"?hn(_,E):arguments.length===1&&typeof _=="string"?si(_):F!==!0?si(E).apply(null,arguments):void M(_,E,hn(_.name||E,P.value,this))};function dl(_,E){return En(typeof _=="string"?_:_.name||"<unnamed action>",typeof _=="function"?_:E,this,void 0)}function ja(_){return typeof _=="function"&&_.isMobxAction===!0}function Eu(_,E,P){M(_,E,hn(E,P.bind(_)))}function Ou(_,E){E===void 0&&(E=v);var P,F=E&&E.name||_.name||"Autorun@"+m();if(!E.scheduler&&!E.delay)P=new Lo(F,function(){this.track(Xe)},E.onError,E.requiresObservable);else{var Z=js(E),Ae=!1;P=new Lo(F,function(){Ae||(Ae=!0,Z(function(){Ae=!1,P.isDisposed||P.track(Xe)}))},E.onError,E.requiresObservable)}function Xe(){_(P)}return P.schedule(),P.getDisposer()}Vo.bound=function(_,E,P,F){return F===!0?(Eu(_,E,P.value),null):P?{configurable:!0,enumerable:!1,get:function(){return Eu(this,E,P.value||P.initializer.call(this)),this[E]},set:fl}:{enumerable:!1,configurable:!0,set:function(Z){Eu(this,E,Z)},get:function(){}}};var pl=function(_){return _()};function js(_){return _.scheduler?_.scheduler:_.delay?function(E){return setTimeout(E,_.delay)}:pl}function wi(_,E,P){P===void 0&&(P=v);var F,Z,Ae,Xe=P.name||"Reaction@"+m(),mt=Vo(Xe,P.onError?(F=P.onError,Z=E,function(){try{return Z.apply(this,arguments)}catch(rn){F.call(this,rn)}}):E),Vt=!P.scheduler&&!P.delay,Ar=js(P),cr=!0,Gr=!1,Or=P.compareStructural?I.structural:P.equals||I.default,Ur=new Lo(Xe,function(){cr||Vt?so():Gr||(Gr=!0,Ar(so))},P.onError,P.requiresObservable);function so(){if(Gr=!1,!Ur.isDisposed){var rn=!1;Ur.track(function(){var Jn=_(Ur);rn=cr||!Or(Ae,Jn),Ae=Jn}),cr&&P.fireImmediately&&mt(Ae,Ur),cr||rn!==!0||mt(Ae,Ur),cr&&(cr=!1)}}return Ur.schedule(),Ur.getDisposer()}function xi(_,E,P){return Ms("onBecomeUnobserved",_,E,P)}function Ms(_,E,P,F){var Z=typeof F=="function"?ao(E,P):ao(E),Ae=typeof F=="function"?F:P,Xe=_+"Listeners";return Z[Xe]?Z[Xe].add(Ae):Z[Xe]=new Set([Ae]),typeof Z[_]!="function"?g(!1):function(){var mt=Z[Xe];mt&&(mt.delete(Ae),mt.size===0&&delete Z[Xe])}}function Si(_){var E=_.enforceActions,P=_.computedRequiresReaction,F=_.computedConfigurable,Z=_.disableErrorBoundaries,Ae=_.reactionScheduler,Xe=_.reactionRequiresObservable,mt=_.observableRequiresReaction;if(_.isolateGlobalState===!0&&((qt.pendingReactions.length||qt.inBatch||qt.isRunningReactions)&&g("isolateGlobalState should be called before MobX is running any reactions"),ws=!0,Ao&&(--bu().__mobxInstanceCount==0&&(bu().__mobxGlobals=void 0),qt=new Ki)),E!==void 0){var Vt=void 0;switch(E){case!0:case"observed":Vt=!0;break;case!1:case"never":Vt=!1;break;case"strict":case"always":Vt="strict";break;default:g("Invalid value for 'enforceActions': '"+E+"', expected 'never', 'always' or 'observed'")}qt.enforceActions=Vt,qt.allowStateChanges=Vt!==!0&&Vt!=="strict"}P!==void 0&&(qt.computedRequiresReaction=!!P),Xe!==void 0&&(qt.reactionRequiresObservable=!!Xe),mt!==void 0&&(qt.observableRequiresReaction=!!mt,qt.allowStateReads=!qt.observableRequiresReaction),F!==void 0&&(qt.computedConfigurable=!!F),Z!==void 0&&(qt.disableErrorBoundaries=!!Z),Ae&&ll(Ae)}function vo(_,E,P,F){var Z=wu(F=me(F));return ht(_),ea(_,F.name,Z.enhancer),E&&Rs(_,E,P,Z),_}function wu(_){return _.defaultDecorator||(_.deep===!1?et:qe)}function Rs(_,E,P,F){var Z,Ae;po();try{var Xe=ee(E);try{for(var mt=Q(Xe),Vt=mt.next();!Vt.done;Vt=mt.next()){var Ar=Vt.value,cr=Object.getOwnPropertyDescriptor(E,Ar),Gr=(P&&Ar in P?P[Ar]:cr.get?Ht:F)(_,Ar,cr,!0);Gr&&Object.defineProperty(_,Ar,Gr)}}catch(Or){Z={error:Or}}finally{try{Vt&&!Vt.done&&(Ae=mt.return)&&Ae.call(mt)}finally{if(Z)throw Z.error}}}finally{ho()}}function qi(_,E){return Ti(ao(_,E))}function Ti(_){var E,P,F={name:_.name};return _.observing&&_.observing.length>0&&(F.dependencies=(E=_.observing,P=[],E.forEach(function(Z){P.indexOf(Z)===-1&&P.push(Z)}),P).map(Ti)),F}var xu=0;function Su(){this.message="FLOW_CANCELLED"}function Ma(_){arguments.length!==1&&g("Flow expects 1 argument and cannot be used as decorator");var E=_.name||"<unnamed flow>";return function(){var P,F=this,Z=arguments,Ae=++xu,Xe=Vo(E+" - runid: "+Ae+" - init",_).apply(F,Z),mt=void 0,Vt=new Promise(function(Ar,cr){var Gr=0;function Or(rn){var Jn;mt=void 0;try{Jn=Vo(E+" - runid: "+Ae+" - yield "+Gr++,Xe.next).call(Xe,rn)}catch(ra){return cr(ra)}so(Jn)}function Ur(rn){var Jn;mt=void 0;try{Jn=Vo(E+" - runid: "+Ae+" - yield "+Gr++,Xe.throw).call(Xe,rn)}catch(ra){return cr(ra)}so(Jn)}function so(rn){if(!rn||typeof rn.then!="function")return rn.done?Ar(rn.value):(mt=Promise.resolve(rn.value)).then(Or,Ur);rn.then(so,cr)}P=cr,Or(void 0)});return Vt.cancel=Vo(E+" - runid: "+Ae+" - cancel",function(){try{mt&&Zi(mt);var Ar=Xe.return(void 0),cr=Promise.resolve(Ar.value);cr.then(S,S),Zi(cr),P(new Su)}catch(Gr){P(Gr)}}),Vt}}function Zi(_){typeof _.cancel=="function"&&_.cancel()}function Cs(_,E){if(_==null)return!1;if(E!==void 0){if(Mn(_)===!1||!_[$].values.has(E))return!1;var P=ao(_,E);return Ho(P)}return Ho(_)}function hl(_){return arguments.length>1?g(!1):Cs(_)}function Ds(_,E){return typeof E!="string"?g(!1):Cs(_,E)}function Kn(_,E){return _!=null&&(E!==void 0?!!Mn(_)&&_[$].values.has(E):Mn(_)||!!_[$]||Y(_)||Na(_)||Ho(_))}function Nn(_){return arguments.length!==1&&g(!1),Kn(_)}function yo(_){return Mn(_)?_[$].getKeys():On(_)||jn(_)?Array.from(_.keys()):jo(_)?_.map(function(E,P){return P}):g(!1)}function zn(_){return Mn(_)?yo(_).map(function(E){return _[E]}):On(_)?yo(_).map(function(E){return _.get(E)}):jn(_)?Array.from(_.values()):jo(_)?_.slice():g(!1)}function ks(_){return Mn(_)?yo(_).map(function(E){return[E,_[E]]}):On(_)?yo(_).map(function(E){return[E,_.get(E)]}):jn(_)?Array.from(_.entries()):jo(_)?_.map(function(E,P){return[P,E]}):g(!1)}function Tu(_,E,P){if(arguments.length!==2||jn(_))if(Mn(_)){var F=_[$],Z=F.values.get(E);Z?F.write(E,P):F.addObservableProp(E,P,F.defaultEnhancer)}else if(On(_))_.set(E,P);else if(jn(_))_.add(E);else{if(!jo(_))return g(!1);typeof E!="number"&&(E=parseInt(E,10)),O(E>=0,"Not a valid index: '"+E+"'"),po(),E>=_.length&&(_.length=E+1),_[E]=P,ho()}else{po();var Ae=E;try{for(var Xe in Ae)Tu(_,Xe,Ae[Xe])}finally{ho()}}}function Au(_,E,P,F){return typeof P=="function"?function(Z,Ae,Xe,mt){return uo(Z,Ae).observe(Xe,mt)}(_,E,P,F):function(Z,Ae,Xe){return uo(Z).observe(Ae,Xe)}(_,E,P)}Su.prototype=Object.create(Error.prototype);var vl={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function ci(_,E,P,F){return F.detectCycles&&_.set(E,P),P}function oo(_,E,P){if(!E.recurseEverything&&!Nn(_)||typeof _!="object")return _;if(_===null)return null;if(_ instanceof Date)return _;if(ui(_))return oo(_.get(),E,P);if(Nn(_)&&yo(_),E.detectCycles===!0&&_!==null&&P.has(_))return P.get(_);if(jo(_)||Array.isArray(_)){var F=ci(P,_,[],E),Z=_.map(function(Or){return oo(Or,E,P)});F.length=Z.length;for(var Ae=0,Xe=Z.length;Ae<Xe;Ae++)F[Ae]=Z[Ae];return F}if(jn(_)||Object.getPrototypeOf(_)===Set.prototype){if(E.exportMapsAsObjects===!1){var mt=ci(P,_,new Set,E);return _.forEach(function(Or){mt.add(oo(Or,E,P))}),mt}var Vt=ci(P,_,[],E);return _.forEach(function(Or){Vt.push(oo(Or,E,P))}),Vt}if(On(_)||Object.getPrototypeOf(_)===Map.prototype){if(E.exportMapsAsObjects===!1){var Ar=ci(P,_,new Map,E);return _.forEach(function(Or,Ur){Ar.set(Ur,oo(Or,E,P))}),Ar}var cr=ci(P,_,{},E);return _.forEach(function(Or,Ur){cr[Ur]=oo(Or,E,P)}),cr}var Gr=ci(P,_,{},E);return _e(_).forEach(function(Or){Gr[Or]=oo(_[Or],E,P)}),Gr}function yl(_,E){var P;return typeof E=="boolean"&&(E={detectCycles:E}),E||(E=vl),E.detectCycles=E.detectCycles===void 0?E.recurseEverything===!0:E.detectCycles===!0,E.detectCycles&&(P=new Map),oo(_,E,P)}function Po(_){switch(_.length){case 0:return qt.trackingDerivation;case 1:return ao(_[0]);case 2:return ao(_[0],_[1])}}function go(_,E){E===void 0&&(E=void 0),po();try{return _.apply(E)}finally{ho()}}function Is(_,E,P){return arguments.length===1||E&&typeof E=="object"?gl(_,E):Ls(_,E,P||{})}function Ls(_,E,P){var F;typeof P.timeout=="number"&&(F=setTimeout(function(){if(!Ae[$].isDisposed){Ae();var Xe=new Error("WHEN_TIMEOUT");if(!P.onError)throw Xe;P.onError(Xe)}},P.timeout)),P.name=P.name||"When@"+m();var Z=hn(P.name+"-effect",E),Ae=Ou(function(Xe){_()&&(Xe.dispose(),F&&clearTimeout(F),Z())},P);return Ae}function gl(_,E){var P,F=new Promise(function(Z,Ae){var Xe=Ls(_,Z,De(De({},E),{onError:Ae}));P=function(){Xe(),Ae("WHEN_CANCELLED")}});return F.cancel=P,F}function Ra(_){return _[$]}function $o(_){return typeof _=="string"||typeof _=="number"||typeof _=="symbol"}var mo={has:function(_,E){if(E===$||E==="constructor"||E===be)return!0;var P=Ra(_);return $o(E)?P.has(E):E in _},get:function(_,E){if(E===$||E==="constructor"||E===be)return _[E];var P=Ra(_),F=P.values.get(E);if(F instanceof L){var Z=F.get();return Z===void 0&&P.has(E),Z}return $o(E)&&P.has(E),_[E]},set:function(_,E,P){return!!$o(E)&&(Tu(_,E,P),!0)},deleteProperty:function(_,E){return!!$o(E)&&(Ra(_).remove(E),!0)},ownKeys:function(_){return Ra(_).keysAtom.reportObserved(),Reflect.ownKeys(_)},preventExtensions:function(_){return g("Dynamic observable objects cannot be frozen"),!1}};function ml(_){var E=new Proxy(_,mo);return _[$].proxy=E,E}function qn(_){return _.interceptors!==void 0&&_.interceptors.length>0}function No(_,E){var P=_.interceptors||(_.interceptors=[]);return P.push(E),x(function(){var F=P.indexOf(E);F!==-1&&P.splice(F,1)})}function Rr(_,E){var P=de();try{for(var F=he(_.interceptors||[]),Z=0,Ae=F.length;Z<Ae&&(O(!(E=F[Z](E))||E.type,"Intercept handlers should return nothing or a change object"),E);Z++);return E}finally{Be(P)}}function io(_){return _.changeListeners!==void 0&&_.changeListeners.length>0}function Wo(_,E){var P=_.changeListeners||(_.changeListeners=[]);return P.push(E),x(function(){var F=P.indexOf(E);F!==-1&&P.splice(F,1)})}function Bn(_,E){var P=de(),F=_.changeListeners;if(F){for(var Z=0,Ae=(F=F.slice()).length;Z<Ae;Z++)F[Z](E);Be(P)}}var Ca={get:function(_,E){return E===$?_[$]:E==="length"?_[$].getArrayLength():typeof E=="number"?Zn.get.call(_,E):typeof E!="string"||isNaN(E)?Zn.hasOwnProperty(E)?Zn[E]:_[E]:Zn.get.call(_,parseInt(E))},set:function(_,E,P){return E==="length"&&_[$].setArrayLength(P),typeof E=="number"&&Zn.set.call(_,E,P),typeof E=="symbol"||isNaN(E)?_[E]=P:Zn.set.call(_,parseInt(E),P),!0},preventExtensions:function(_){return g("Observable arrays cannot be frozen"),!1}};function Ji(_,E,P,F){P===void 0&&(P="ObservableArray@"+m()),F===void 0&&(F=!1);var Z,Ae,Xe,mt=new Fo(P,E,F);Z=mt.values,Ae=$,Xe=mt,Object.defineProperty(Z,Ae,{enumerable:!1,writable:!1,configurable:!0,value:Xe});var Vt=new Proxy(mt.values,Ca);if(mt.proxy=Vt,_&&_.length){var Ar=gr(!0);mt.spliceWithArray(0,0,_),Xr(Ar)}return Vt}var Fo=function(){function _(E,P,F){this.owned=F,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new L(E||"ObservableArray@"+m()),this.enhancer=function(Z,Ae){return P(Z,Ae,E+"[..]")}}return _.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.dehanceValues=function(E){return this.dehancer!==void 0&&E.length>0?E.map(this.dehancer):E},_.prototype.intercept=function(E){return No(this,E)},_.prototype.observe=function(E,P){return P===void 0&&(P=!1),P&&E({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Wo(this,E)},_.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},_.prototype.setArrayLength=function(E){if(typeof E!="number"||E<0)throw new Error("[mobx.array] Out of range: "+E);var P=this.values.length;if(E!==P)if(E>P){for(var F=new Array(E-P),Z=0;Z<E-P;Z++)F[Z]=void 0;this.spliceWithArray(P,0,F)}else this.spliceWithArray(E,P-E)},_.prototype.updateArrayLength=function(E,P){if(E!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=P},_.prototype.spliceWithArray=function(E,P,F){var Z=this;sr(this.atom);var Ae=this.values.length;if(E===void 0?E=0:E>Ae?E=Ae:E<0&&(E=Math.max(0,Ae+E)),P=arguments.length===1?Ae-E:P==null?0:Math.max(0,Math.min(P,Ae-E)),F===void 0&&(F=h),qn(this)){var Xe=Rr(this,{object:this.proxy,type:"splice",index:E,removedCount:P,added:F});if(!Xe)return h;P=Xe.removedCount,F=Xe.added}F=F.length===0?F:F.map(function(Vt){return Z.enhancer(Vt,void 0)});var mt=this.spliceItemsIntoValues(E,P,F);return P===0&&F.length===0||this.notifyArraySplice(E,F,mt),this.dehanceValues(mt)},_.prototype.spliceItemsIntoValues=function(E,P,F){var Z;if(F.length<1e4)return(Z=this.values).splice.apply(Z,he([E,P],F));var Ae=this.values.slice(E,E+P);return this.values=this.values.slice(0,E).concat(F,this.values.slice(E+P)),Ae},_.prototype.notifyArrayChildUpdate=function(E,P,F){var Z=!this.owned&&!1,Ae=io(this),Xe=Ae||Z?{object:this.proxy,type:"update",index:E,newValue:P,oldValue:F}:null;this.atom.reportChanged(),Ae&&Bn(this,Xe)},_.prototype.notifyArraySplice=function(E,P,F){var Z=!this.owned&&!1,Ae=io(this),Xe=Ae||Z?{object:this.proxy,type:"splice",index:E,removed:F,added:P,removedCount:F.length,addedCount:P.length}:null;this.atom.reportChanged(),Ae&&Bn(this,Xe)},_}(),Zn={intercept:function(_){return this[$].intercept(_)},observe:function(_,E){return E===void 0&&(E=!1),this[$].observe(_,E)},clear:function(){return this.splice(0)},replace:function(_){var E=this[$];return E.spliceWithArray(0,E.values.length,_)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(_,E){for(var P=[],F=2;F<arguments.length;F++)P[F-2]=arguments[F];var Z=this[$];switch(arguments.length){case 0:return[];case 1:return Z.spliceWithArray(_);case 2:return Z.spliceWithArray(_,E)}return Z.spliceWithArray(_,E,P)},spliceWithArray:function(_,E,P){return this[$].spliceWithArray(_,E,P)},push:function(){for(var _=[],E=0;E<arguments.length;E++)_[E]=arguments[E];var P=this[$];return P.spliceWithArray(P.values.length,0,_),P.values.length},pop:function(){return this.splice(Math.max(this[$].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var _=[],E=0;E<arguments.length;E++)_[E]=arguments[E];var P=this[$];return P.spliceWithArray(0,0,_),P.values.length},reverse:function(){var _=this.slice();return _.reverse.apply(_,arguments)},sort:function(_){var E=this.slice();return E.sort.apply(E,arguments)},remove:function(_){var E=this[$],P=E.dehanceValues(E.values).indexOf(_);return P>-1&&(this.splice(P,1),!0)},get:function(_){var E=this[$];if(E&&_<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[_])},set:function(_,E){var P=this[$],F=P.values;if(_<F.length){sr(P.atom);var Z=F[_];if(qn(P)){var Ae=Rr(P,{type:"update",object:P.proxy,index:_,newValue:E});if(!Ae)return;E=Ae.newValue}(E=P.enhancer(E,Z))!==Z&&(F[_]=E,P.notifyArrayChildUpdate(_,E,Z))}else{if(_!==F.length)throw new Error("[mobx.array] Index out of bounds, "+_+" is larger than "+F.length);P.spliceWithArray(_,0,[E])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(_){typeof Array.prototype[_]=="function"&&(Zn[_]=function(){var E=this[$];E.atom.reportObserved();var P=E.dehanceValues(E.values);return P[_].apply(P,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(_){typeof Array.prototype[_]=="function"&&(Zn[_]=function(E,P){var F=this,Z=this[$];return Z.atom.reportObserved(),Z.dehanceValues(Z.values)[_](function(Ae,Xe){return E.call(P,Ae,Xe,F)},P)})}),["reduce","reduceRight"].forEach(function(_){Zn[_]=function(){var E=this,P=this[$];P.atom.reportObserved();var F=arguments[0];return arguments[0]=function(Z,Ae,Xe){return Ae=P.dehanceValue(Ae),F(Z,Ae,Xe,E)},P.values[_].apply(P.values,arguments)}});var Pu,Qi=C("ObservableArrayAdministration",Fo);function jo(_){return N(_)&&Qi(_[$])}var Fs,bl={},Nu=function(){function _(E,P,F){if(P===void 0&&(P=xt),F===void 0&&(F="ObservableMap@"+m()),this.enhancer=P,this.name=F,this[Pu]=bl,this._keysAtom=K(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(E)}return _.prototype._has=function(E){return this._data.has(E)},_.prototype.has=function(E){var P=this;if(!qt.trackingDerivation)return this._has(E);var F=this._hasMap.get(E);if(!F){var Z=F=new kr(this._has(E),tr,this.name+"."+fe(E)+"?",!1);this._hasMap.set(E,Z),xi(Z,function(){return P._hasMap.delete(E)})}return F.get()},_.prototype.set=function(E,P){var F=this._has(E);if(qn(this)){var Z=Rr(this,{type:F?"update":"add",object:this,newValue:P,name:E});if(!Z)return this;P=Z.newValue}return F?this._updateValue(E,P):this._addValue(E,P),this},_.prototype.delete=function(E){var P=this;if(sr(this._keysAtom),qn(this)&&!(Z=Rr(this,{type:"delete",object:this,name:E})))return!1;if(this._has(E)){var F=io(this),Z=F?{type:"delete",object:this,oldValue:this._data.get(E).value,name:E}:null;return go(function(){P._keysAtom.reportChanged(),P._updateHasMapEntry(E,!1),P._data.get(E).setNewValue(void 0),P._data.delete(E)}),F&&Bn(this,Z),!0}return!1},_.prototype._updateHasMapEntry=function(E,P){var F=this._hasMap.get(E);F&&F.setNewValue(P)},_.prototype._updateValue=function(E,P){var F=this._data.get(E);if((P=F.prepareNewValue(P))!==qt.UNCHANGED){var Z=io(this),Ae=Z?{type:"update",object:this,oldValue:F.value,name:E,newValue:P}:null;F.setNewValue(P),Z&&Bn(this,Ae)}},_.prototype._addValue=function(E,P){var F=this;sr(this._keysAtom),go(function(){var Xe=new kr(P,F.enhancer,F.name+"."+fe(E),!1);F._data.set(E,Xe),P=Xe.value,F._updateHasMapEntry(E,!0),F._keysAtom.reportChanged()});var Z=io(this),Ae=Z?{type:"add",object:this,name:E,newValue:P}:null;Z&&Bn(this,Ae)},_.prototype.get=function(E){return this.has(E)?this.dehanceValue(this._data.get(E).get()):this.dehanceValue(void 0)},_.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},_.prototype.values=function(){var E=this,P=this.keys();return Ia({next:function(){var F=P.next(),Z=F.done,Ae=F.value;return{done:Z,value:Z?void 0:E.get(Ae)}}})},_.prototype.entries=function(){var E=this,P=this.keys();return Ia({next:function(){var F=P.next(),Z=F.done,Ae=F.value;return{done:Z,value:Z?void 0:[Ae,E.get(Ae)]}}})},_.prototype[Pu=$,Symbol.iterator]=function(){return this.entries()},_.prototype.forEach=function(E,P){var F,Z;try{for(var Ae=Q(this),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var mt=se(Xe.value,2),Vt=mt[0],Ar=mt[1];E.call(P,Ar,Vt,this)}}catch(cr){F={error:cr}}finally{try{Xe&&!Xe.done&&(Z=Ae.return)&&Z.call(Ae)}finally{if(F)throw F.error}}},_.prototype.merge=function(E){var P=this;return On(E)&&(E=E.toJS()),go(function(){var F=gr(!0);try{j(E)?_e(E).forEach(function(Z){return P.set(Z,E[Z])}):Array.isArray(E)?E.forEach(function(Z){var Ae=se(Z,2),Xe=Ae[0],mt=Ae[1];return P.set(Xe,mt)}):V(E)?(E.constructor!==Map&&g("Cannot initialize from classes that inherit from Map: "+E.constructor.name),E.forEach(function(Z,Ae){return P.set(Ae,Z)})):E!=null&&g("Cannot initialize map from "+E)}finally{Xr(F)}}),this},_.prototype.clear=function(){var E=this;go(function(){Ne(function(){var P,F;try{for(var Z=Q(E.keys()),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=Ae.value;E.delete(Xe)}}catch(mt){P={error:mt}}finally{try{Ae&&!Ae.done&&(F=Z.return)&&F.call(Z)}finally{if(P)throw P.error}}})})},_.prototype.replace=function(E){var P=this;return go(function(){var F,Z,Ae,Xe,mt=function(Sn){if(V(Sn)||On(Sn))return Sn;if(Array.isArray(Sn))return new Map(Sn);if(j(Sn)){var Fa=new Map;for(var fi in Sn)Fa.set(fi,Sn[fi]);return Fa}return g("Cannot convert to map from '"+Sn+"'")}(E),Vt=new Map,Ar=!1;try{for(var cr=Q(P._data.keys()),Gr=cr.next();!Gr.done;Gr=cr.next()){var Or=Gr.value;if(!mt.has(Or))if(P.delete(Or))Ar=!0;else{var Ur=P._data.get(Or);Vt.set(Or,Ur)}}}catch(Sn){F={error:Sn}}finally{try{Gr&&!Gr.done&&(Z=cr.return)&&Z.call(cr)}finally{if(F)throw F.error}}try{for(var so=Q(mt.entries()),rn=so.next();!rn.done;rn=so.next()){var Jn=se(rn.value,2),ra=(Or=Jn[0],Ur=Jn[1],P._data.has(Or));if(P.set(Or,Ur),P._data.has(Or)){var _l=P._data.get(Or);Vt.set(Or,_l),ra||(Ar=!0)}}}catch(Sn){Ae={error:Sn}}finally{try{rn&&!rn.done&&(Xe=so.return)&&Xe.call(so)}finally{if(Ae)throw Ae.error}}if(!Ar)if(P._data.size!==Vt.size)P._keysAtom.reportChanged();else for(var La=P._data.keys(),na=Vt.keys(),Pi=La.next(),oa=na.next();!Pi.done;){if(Pi.value!==oa.value){P._keysAtom.reportChanged();break}Pi=La.next(),oa=na.next()}P._data=Vt}),this},Object.defineProperty(_.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),_.prototype.toPOJO=function(){var E,P,F={};try{for(var Z=Q(this),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=se(Ae.value,2),mt=Xe[0],Vt=Xe[1];F[typeof mt=="symbol"?mt:fe(mt)]=Vt}}catch(Ar){E={error:Ar}}finally{try{Ae&&!Ae.done&&(P=Z.return)&&P.call(Z)}finally{if(E)throw E.error}}return F},_.prototype.toJS=function(){return new Map(this)},_.prototype.toJSON=function(){return this.toPOJO()},_.prototype.toString=function(){var E=this;return this.name+"[{ "+Array.from(this.keys()).map(function(P){return fe(P)+": "+E.get(P)}).join(", ")+" }]"},_.prototype.observe=function(E,P){return Wo(this,E)},_.prototype.intercept=function(E){return No(this,E)},_}(),On=C("ObservableMap",Nu),Ai={},Da=function(){function _(E,P,F){if(P===void 0&&(P=xt),F===void 0&&(F="ObservableSet@"+m()),this.name=F,this[Fs]=Ai,this._data=new Set,this._atom=K(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(Z,Ae){return P(Z,Ae,F)},E&&this.replace(E)}return _.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.clear=function(){var E=this;go(function(){Ne(function(){var P,F;try{for(var Z=Q(E._data.values()),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=Ae.value;E.delete(Xe)}}catch(mt){P={error:mt}}finally{try{Ae&&!Ae.done&&(F=Z.return)&&F.call(Z)}finally{if(P)throw P.error}}})})},_.prototype.forEach=function(E,P){var F,Z;try{for(var Ae=Q(this),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var mt=Xe.value;E.call(P,mt,mt,this)}}catch(Vt){F={error:Vt}}finally{try{Xe&&!Xe.done&&(Z=Ae.return)&&Z.call(Ae)}finally{if(F)throw F.error}}},Object.defineProperty(_.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),_.prototype.add=function(E){var P=this;if(sr(this._atom),qn(this)&&!(Z=Rr(this,{type:"add",object:this,newValue:E})))return this;if(!this.has(E)){go(function(){P._data.add(P.enhancer(E,void 0)),P._atom.reportChanged()});var F=io(this),Z=F?{type:"add",object:this,newValue:E}:null;F&&Bn(this,Z)}return this},_.prototype.delete=function(E){var P=this;if(qn(this)&&!(Z=Rr(this,{type:"delete",object:this,oldValue:E})))return!1;if(this.has(E)){var F=io(this),Z=F?{type:"delete",object:this,oldValue:E}:null;return go(function(){P._atom.reportChanged(),P._data.delete(E)}),F&&Bn(this,Z),!0}return!1},_.prototype.has=function(E){return this._atom.reportObserved(),this._data.has(this.dehanceValue(E))},_.prototype.entries=function(){var E=0,P=Array.from(this.keys()),F=Array.from(this.values());return Ia({next:function(){var Z=E;return E+=1,Z<F.length?{value:[P[Z],F[Z]],done:!1}:{done:!0}}})},_.prototype.keys=function(){return this.values()},_.prototype.values=function(){this._atom.reportObserved();var E=this,P=0,F=Array.from(this._data.values());return Ia({next:function(){return P<F.length?{value:E.dehanceValue(F[P++]),done:!1}:{done:!0}}})},_.prototype.replace=function(E){var P=this;return jn(E)&&(E=E.toJS()),go(function(){var F=gr(!0);try{Array.isArray(E)||ce(E)?(P.clear(),E.forEach(function(Z){return P.add(Z)})):E!=null&&g("Cannot initialize set from "+E)}finally{Xr(F)}}),this},_.prototype.observe=function(E,P){return Wo(this,E)},_.prototype.intercept=function(E){return No(this,E)},_.prototype.toJS=function(){return new Set(this)},_.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},_.prototype[Fs=$,Symbol.iterator]=function(){return this.values()},_}(),jn=C("ObservableSet",Da),Bs=function(){function _(E,P,F,Z){P===void 0&&(P=new Map),this.target=E,this.values=P,this.name=F,this.defaultEnhancer=Z,this.keysAtom=new L(F+".keys")}return _.prototype.read=function(E){return this.values.get(E).get()},_.prototype.write=function(E,P){var F=this.target,Z=this.values.get(E);if(Z instanceof zo)Z.set(P);else{if(qn(this)){if(!(Xe=Rr(this,{type:"update",object:this.proxy||F,name:E,newValue:P})))return;P=Xe.newValue}if((P=Z.prepareNewValue(P))!==qt.UNCHANGED){var Ae=io(this),Xe=Ae?{type:"update",object:this.proxy||F,oldValue:Z.value,name:E,newValue:P}:null;Z.setNewValue(P),Ae&&Bn(this,Xe)}}},_.prototype.has=function(E){var P=this.pendingKeys||(this.pendingKeys=new Map),F=P.get(E);if(F)return F.get();var Z=!!this.values.get(E);return F=new kr(Z,tr,this.name+"."+fe(E)+"?",!1),P.set(E,F),F.get()},_.prototype.addObservableProp=function(E,P,F){F===void 0&&(F=this.defaultEnhancer);var Z=this.target;if(qn(this)){var Ae=Rr(this,{object:this.proxy||Z,name:E,type:"add",newValue:P});if(!Ae)return;P=Ae.newValue}var Xe=new kr(P,F,this.name+"."+fe(E),!1);this.values.set(E,Xe),P=Xe.value,Object.defineProperty(Z,E,function(mt){return Yo[mt]||(Yo[mt]={configurable:!0,enumerable:!0,get:function(){return this[$].read(mt)},set:function(Vt){this[$].write(mt,Vt)}})}(E)),this.notifyPropertyAddition(E,P)},_.prototype.addComputedProp=function(E,P,F){var Z,Ae,Xe,mt=this.target;F.name=F.name||this.name+"."+fe(P),this.values.set(P,new zo(F)),(E===mt||(Z=E,Ae=P,!(Xe=Object.getOwnPropertyDescriptor(Z,Ae))||Xe.configurable!==!1&&Xe.writable!==!1))&&Object.defineProperty(E,P,function(Vt){return ka[Vt]||(ka[Vt]={configurable:qt.computedConfigurable,enumerable:!1,get:function(){return Bo(this).read(Vt)},set:function(Ar){Bo(this).write(Vt,Ar)}})}(P))},_.prototype.remove=function(E){if(this.values.has(E)){var P=this.target;if(qn(this)&&!(Vt=Rr(this,{object:this.proxy||P,name:E,type:"remove"})))return;try{po();var F=io(this),Z=!1,Ae=this.values.get(E),Xe=Ae&&Ae.get();if(Ae&&Ae.set(void 0),this.keysAtom.reportChanged(),this.values.delete(E),this.pendingKeys){var mt=this.pendingKeys.get(E);mt&&mt.set(!1)}delete this.target[E];var Vt=F?{type:"remove",object:this.proxy||P,oldValue:Xe,name:E}:null;F&&Bn(this,Vt)}finally{ho()}}},_.prototype.illegalAccess=function(E,P){},_.prototype.observe=function(E,P){return Wo(this,E)},_.prototype.intercept=function(E){return No(this,E)},_.prototype.notifyPropertyAddition=function(E,P){var F=io(this),Z=F?{type:"add",object:this.proxy||this.target,name:E,newValue:P}:null;if(F&&Bn(this,Z),this.pendingKeys){var Ae=this.pendingKeys.get(E);Ae&&Ae.set(!0)}this.keysAtom.reportChanged()},_.prototype.getKeys=function(){var E,P;this.keysAtom.reportObserved();var F=[];try{for(var Z=Q(this.values),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=se(Ae.value,2),mt=Xe[0];Xe[1]instanceof kr&&F.push(mt)}}catch(Vt){E={error:Vt}}finally{try{Ae&&!Ae.done&&(P=Z.return)&&P.call(Z)}finally{if(E)throw E.error}}return F},_}();function ea(_,E,P){if(E===void 0&&(E=""),P===void 0&&(P=xt),Object.prototype.hasOwnProperty.call(_,$))return _[$];j(_)||(E=(_.constructor.name||"ObservableObject")+"@"+m()),E||(E="ObservableObject@"+m());var F=new Bs(_,new Map,fe(E),P);return M(_,$,F),F}var Yo=Object.create(null),ka=Object.create(null);function Bo(_){var E=_[$];return E||(ht(_),_[$])}var ju=C("ObservableObjectAdministration",Bs);function Mn(_){return!!N(_)&&(ht(_),ju(_[$]))}function ao(_,E){if(typeof _=="object"&&_!==null){if(jo(_))return E!==void 0&&g(!1),_[$].atom;if(jn(_))return _[$];if(On(_)){var P=_;return E===void 0?P._keysAtom:((F=P._data.get(E)||P._hasMap.get(E))||g(!1),F)}var F;if(ht(_),E&&!_[$]&&_[E],Mn(_))return E?((F=_[$].values.get(E))||g(!1),F):g(!1);if(Y(_)||Ho(_)||Na(_))return _}else if(typeof _=="function"&&Na(_[$]))return _[$];return g(!1)}function uo(_,E){return _||g("Expecting some object"),E!==void 0?uo(ao(_,E)):Y(_)||Ho(_)||Na(_)||On(_)||jn(_)?_:(ht(_),_[$]?_[$]:void g(!1))}var ta=Object.prototype.toString;function Mu(_,E,P){return P===void 0&&(P=-1),Ru(_,E,P)}function Ru(_,E,P,F,Z){if(_===E)return _!==0||1/_==1/E;if(_==null||E==null)return!1;if(_!=_)return E!=E;var Ae=typeof _;if(Ae!=="function"&&Ae!=="object"&&typeof E!="object")return!1;var Xe=ta.call(_);if(Xe!==ta.call(E))return!1;switch(Xe){case"[object RegExp]":case"[object String]":return""+_==""+E;case"[object Number]":return+_!=+_?+E!=+E:+_==0?1/+_==1/E:+_==+E;case"[object Date]":case"[object Boolean]":return+_==+E;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(_)===Symbol.valueOf.call(E);case"[object Map]":case"[object Set]":P>=0&&P++}_=Gs(_),E=Gs(E);var mt=Xe==="[object Array]";if(!mt){if(typeof _!="object"||typeof E!="object")return!1;var Vt=_.constructor,Ar=E.constructor;if(Vt!==Ar&&!(typeof Vt=="function"&&Vt instanceof Vt&&typeof Ar=="function"&&Ar instanceof Ar)&&"constructor"in _&&"constructor"in E)return!1}if(P===0)return!1;P<0&&(P=-1),Z=Z||[];for(var cr=(F=F||[]).length;cr--;)if(F[cr]===_)return Z[cr]===E;if(F.push(_),Z.push(E),mt){if((cr=_.length)!==E.length)return!1;for(;cr--;)if(!Ru(_[cr],E[cr],P-1,F,Z))return!1}else{var Gr=Object.keys(_),Or=void 0;if(cr=Gr.length,Object.keys(E).length!==cr)return!1;for(;cr--;)if(!Us(E,Or=Gr[cr])||!Ru(_[Or],E[Or],P-1,F,Z))return!1}return F.pop(),Z.pop(),!0}function Gs(_){return jo(_)?_.slice():V(_)||On(_)||ce(_)||jn(_)?Array.from(_.entries()):_}function Us(_,E){return Object.prototype.hasOwnProperty.call(_,E)}function Ia(_){return _[Symbol.iterator]=li,_}function li(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Ps,extras:{getDebugName:function(_,E){return(E!==void 0?ao(_,E):Mn(_)||On(_)||jn(_)?uo(_):ao(_)).name}},$mobx:$})}).call(this,i(155),i(82))},function(t,s,i){var c=i(116),l=i(44),h=i(179);c||l(Object.prototype,"toString",h,{unsafe:!0})},function(t,s,i){var c=i(40),l=i(83),h=i(70),v=i(56),m=i(111),g="Array Iterator",O=v.set,x=v.getterFor(g);t.exports=m(Array,"Array",function(S,N){O(this,{type:g,target:c(S),index:0,kind:N})},function(){var S=x(this),N=S.target,j=S.kind,M=S.index++;return!N||M>=N.length?(S.target=void 0,{value:void 0,done:!0}):j=="keys"?{value:M,done:!1}:j=="values"?{value:N[M],done:!1}:{value:[M,N[M]],done:!1}},"values"),h.Arguments=h.Array,l("keys"),l("values"),l("entries")},function(t,s,i){var c=i(7),l=i(147),h=i(148),v=i(3),m=i(57),g=i(27),O=g("iterator"),x=g("toStringTag"),S=v.values,N=function(M,C){if(M){if(M[O]!==S)try{m(M,O,S)}catch{M[O]=S}if(M[x]||m(M,x,C),l[C]){for(var V in v)if(M[V]!==v[V])try{m(M,V,v[V])}catch{M[V]=v[V]}}}};for(var j in l)N(c[j]&&c[j].prototype,j);N(h,"DOMTokenList")},function(t,s,i){var c=i(17),l=i(7),h=i(46),v=i(76),m=i(35),g=i(15),O=i(64),x=i(36),S=i(109),N=i(19),j=i(34),M=i(99),C=i(28),V=i(33),ce=i(58),_e=i(88),fe=i(32),z=i(38),ee=i(40),$=i(87),L=i(41),Y=i(71),K=i(54),I=i(66),pe=i(72),De=i(139),Q=i(112),se=i(51),he=i(37),be=i(93),te=i(101),ve=i(44),Fe=i(84),Ze=i(91),ht=i(69),Ft=i(85),bt=i(27),xt=i(149),tr=i(150),Oe=i(73),oe=i(56),me=i(74).forEach,qe=Ze("hidden"),gt="Symbol",et=bt("toPrimitive"),Ct=oe.set,zt=oe.getterFor(gt),Zt=Object.prototype,Gt=l.Symbol,ze=Gt&&Gt.prototype,Wt=l.TypeError,xe=l.QObject,Ht=h("JSON","stringify"),yr=se.f,G=he.f,pr=De.f,Dr=be.f,Yr=g([].push),Zr=Fe("symbols"),sr=Fe("op-symbols"),sn=Fe("string-to-symbol-registry"),re=Fe("symbol-to-string-registry"),Ne=Fe("wks"),de=!xe||!xe.prototype||!xe.prototype.findChild,Be=x&&N(function(){return K(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a!=7})?function(Xt,or,dr){var gr=yr(Zt,or);gr&&delete Zt[or],G(Xt,or,dr),gr&&Xt!==Zt&&G(Zt,or,gr)}:G,Nt=function(Xt,or){var dr=Zr[Xt]=K(ze);return Ct(dr,{type:gt,tag:Xt,description:or}),x||(dr.description=or),dr},Ot=function(Xt,or,dr){Xt===Zt&&Ot(sr,or,dr),fe(Xt);var gr=$(or);return fe(dr),j(Zr,gr)?(dr.enumerable?(j(Xt,qe)&&Xt[qe][gr]&&(Xt[qe][gr]=!1),dr=K(dr,{enumerable:Y(0,!1)})):(j(Xt,qe)||G(Xt,qe,Y(1,{})),Xt[qe][gr]=!0),Be(Xt,gr,dr)):G(Xt,gr,dr)},Kt=function(Xt,or){fe(Xt);var dr=ee(or),gr=I(dr).concat(hn(dr));return me(gr,function(Xr){x&&!m(Tr,dr,Xr)||Ot(Xt,Xr,dr[Xr])}),Xt},Tr=function(Xt){var or=$(Xt),dr=m(Dr,this,or);return!(this===Zt&&j(Zr,or)&&!j(sr,or))&&(!(dr||!j(this,or)||!j(Zr,or)||j(this,qe)&&this[qe][or])||dr)},xn=function(Xt,or){var dr=ee(Xt),gr=$(or);if(dr!==Zt||!j(Zr,gr)||j(sr,gr)){var Xr=yr(dr,gr);return!Xr||!j(Zr,gr)||j(dr,qe)&&dr[qe][gr]||(Xr.enumerable=!0),Xr}},Fn=function(Xt){var or=pr(ee(Xt)),dr=[];return me(or,function(gr){j(Zr,gr)||j(ht,gr)||Yr(dr,gr)}),dr},hn=function(Xt){var or=Xt===Zt,dr=pr(or?sr:ee(Xt)),gr=[];return me(dr,function(Xr){!j(Zr,Xr)||or&&!j(Zt,Xr)||Yr(gr,Zr[Xr])}),gr};if(S||(Gt=function(){if(ce(ze,this))throw Wt("Symbol is not a constructor");var Xt=arguments.length&&arguments[0]!==void 0?L(arguments[0]):void 0,or=Ft(Xt),dr=function(gr){this===Zt&&m(dr,sr,gr),j(this,qe)&&j(this[qe],or)&&(this[qe][or]=!1),Be(this,or,Y(1,gr))};return x&&de&&Be(Zt,or,{configurable:!0,set:dr}),Nt(or,Xt)},ve(ze=Gt.prototype,"toString",function(){return zt(this).tag}),ve(Gt,"withoutSetter",function(Xt){return Nt(Ft(Xt),Xt)}),be.f=Tr,he.f=Ot,se.f=xn,pe.f=De.f=Fn,Q.f=hn,xt.f=function(Xt){return Nt(bt(Xt),Xt)},x&&(G(ze,"description",{configurable:!0,get:function(){return zt(this).description}}),O||ve(Zt,"propertyIsEnumerable",Tr,{unsafe:!0}))),c({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:Gt}),me(I(Ne),function(Xt){tr(Xt)}),c({target:gt,stat:!0,forced:!S},{for:function(Xt){var or=L(Xt);if(j(sn,or))return sn[or];var dr=Gt(or);return sn[or]=dr,re[dr]=or,dr},keyFor:function(Xt){if(!_e(Xt))throw Wt(Xt+" is not a symbol");if(j(re,Xt))return re[Xt]},useSetter:function(){de=!0},useSimple:function(){de=!1}}),c({target:"Object",stat:!0,forced:!S,sham:!x},{create:function(Xt,or){return or===void 0?K(Xt):Kt(K(Xt),or)},defineProperty:Ot,defineProperties:Kt,getOwnPropertyDescriptor:xn}),c({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:Fn,getOwnPropertySymbols:hn}),c({target:"Object",stat:!0,forced:N(function(){Q.f(1)})},{getOwnPropertySymbols:function(Xt){return Q.f(z(Xt))}}),Ht&&c({target:"JSON",stat:!0,forced:!S||N(function(){var Xt=Gt();return Ht([Xt])!="[null]"||Ht({a:Xt})!="{}"||Ht(Object(Xt))!="{}"})},{stringify:function(Xt,or,dr){var gr=te(arguments),Xr=or;if((V(or)||Xt!==void 0)&&!_e(Xt))return M(or)||(or=function(kr,ui){if(C(Xr)&&(ui=m(Xr,this,kr,ui)),!_e(ui))return ui}),gr[1]=or,v(Ht,null,gr)}}),!ze[et]){var En=ze.valueOf;ve(ze,et,function(Xt){return m(En,this)})}Oe(Gt,gt),ht[qe]=!0},function(t,s,i){var c=i(146).charAt,l=i(41),h=i(56),v=i(111),m="String Iterator",g=h.set,O=h.getterFor(m);v(String,"String",function(x){g(this,{type:m,string:l(x),index:0})},function(){var x,S=O(this),N=S.string,j=S.index;return j>=N.length?{value:void 0,done:!0}:(x=c(N,j),S.index+=x.length,{value:x,done:!1})})},function(t,s,i){(function(c){var l=function(h){return h&&h.Math==Math&&h};t.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof c=="object"&&c)||function(){return this}()||Function("return this")()}).call(this,i(82))},function(t,s,i){var c=i(17),l=i(36),h=i(7),v=i(15),m=i(34),g=i(28),O=i(58),x=i(41),S=i(37).f,N=i(134),j=h.Symbol,M=j&&j.prototype;if(l&&g(j)&&(!("description"in M)||j().description!==void 0)){var C={},V=function(){var L=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),Y=O(M,this)?new j(L):L===void 0?j():j(L);return L===""&&(C[Y]=!0),Y};N(V,j),V.prototype=M,M.constructor=V;var ce=String(j("test"))=="Symbol(test)",_e=v(M.toString),fe=v(M.valueOf),z=/^Symbol\((.*)\)[^)]+$/,ee=v("".replace),$=v("".slice);S(M,"description",{configurable:!0,get:function(){var L=fe(this),Y=_e(L);if(m(C,L))return"";var K=ce?$(Y,7,-1):ee(Y,z,"$1");return K===""?void 0:K}}),c({global:!0,forced:!0},{Symbol:V})}},function(t,s,i){i(150)("iterator")},function(t,s,i){i.d(s,"a",function(){return v.a}),i.d(s,"c",function(){return v.e}),i.d(s,"h",function(){return z}),i.d(s,"i",function(){return ce}),i.d(s,"j",function(){return C}),i.d(s,"b",function(){return se}),i.d(s,"e",function(){return ve}),i.d(s,"f",function(){return he}),i.d(s,"g",function(){return Zr});var c,l,h,v=i(0),m=0,g=[],O=v.i.__b,x=v.i.__r,S=v.i.diffed,N=v.i.__c,j=v.i.unmount;function M(re,Ne){v.i.__h&&v.i.__h(l,re,m||Ne),m=0;var de=l.__H||(l.__H={__:[],__h:[]});return re>=de.__.length&&de.__.push({}),de.__[re]}function C(re){return m=1,V(pe,re)}function V(re,Ne,de){var Be=M(c++,2);return Be.t=re,Be.__c||(Be.__=[de?de(Ne):pe(void 0,Ne),function(Nt){var Ot=Be.t(Be.__[0],Nt);Be.__[0]!==Ot&&(Be.__=[Ot,Be.__[1]],Be.__c.setState({}))}],Be.__c=l),Be.__}function ce(re,Ne){var de=M(c++,3);!v.i.__s&&I(de.__H,Ne)&&(de.__=re,de.__H=Ne,l.__H.__h.push(de))}function _e(re,Ne){var de=M(c++,4);!v.i.__s&&I(de.__H,Ne)&&(de.__=re,de.__H=Ne,l.__h.push(de))}function fe(re,Ne){var de=M(c++,7);return I(de.__H,Ne)&&(de.__=re(),de.__H=Ne,de.__h=re),de.__}function z(re,Ne){return m=8,fe(function(){return re},Ne)}function ee(){var re;for(g.sort(function(Ne,de){return Ne.__v.__b-de.__v.__b});re=g.pop();)if(re.__P)try{re.__H.__h.forEach(Y),re.__H.__h.forEach(K),re.__H.__h=[]}catch(Ne){re.__H.__h=[],v.i.__e(Ne,re.__v)}}v.i.__b=function(re){l=null,O&&O(re)},v.i.__r=function(re){x&&x(re),c=0;var Ne=(l=re.__c).__H;Ne&&(Ne.__h.forEach(Y),Ne.__h.forEach(K),Ne.__h=[])},v.i.diffed=function(re){S&&S(re);var Ne=re.__c;Ne&&Ne.__H&&Ne.__H.__h.length&&(g.push(Ne)!==1&&h===v.i.requestAnimationFrame||((h=v.i.requestAnimationFrame)||L)(ee)),l=null},v.i.__c=function(re,Ne){Ne.some(function(de){try{de.__h.forEach(Y),de.__h=de.__h.filter(function(Be){return!Be.__||K(Be)})}catch(Be){Ne.some(function(Nt){Nt.__h&&(Nt.__h=[])}),Ne=[],v.i.__e(Be,de.__v)}}),N&&N(re,Ne)},v.i.unmount=function(re){j&&j(re);var Ne,de=re.__c;de&&de.__H&&(de.__H.__.forEach(function(Be){try{Y(Be)}catch(Nt){Ne=Nt}}),Ne&&v.i.__e(Ne,de.__v))};var $=typeof requestAnimationFrame=="function";function L(re){var Ne,de=function(){clearTimeout(Be),$&&cancelAnimationFrame(Ne),setTimeout(re)},Be=setTimeout(de,100);$&&(Ne=requestAnimationFrame(de))}function Y(re){var Ne=l,de=re.__c;typeof de=="function"&&(re.__c=void 0,de()),l=Ne}function K(re){var Ne=l;re.__c=re.__(),l=Ne}function I(re,Ne){return!re||re.length!==Ne.length||Ne.some(function(de,Be){return de!==re[Be]})}function pe(re,Ne){return typeof Ne=="function"?Ne(re):Ne}function De(re,Ne){for(var de in Ne)re[de]=Ne[de];return re}function Q(re,Ne){for(var de in re)if(de!=="__source"&&!(de in Ne))return!0;for(var Be in Ne)if(Be!=="__source"&&re[Be]!==Ne[Be])return!0;return!1}function se(re){this.props=re}function he(re,Ne){function de(Nt){var Ot=this.props.ref,Kt=Ot==Nt.ref;return!Kt&&Ot&&(Ot.call?Ot(null):Ot.current=null),Ne?!Ne(this.props,Nt)||!Kt:Q(this.props,Nt)}function Be(Nt){return this.shouldComponentUpdate=de,Object(v.e)(re,Nt)}return Be.displayName="Memo("+(re.displayName||re.name)+")",Be.prototype.isReactComponent=!0,Be.__f=!0,Be}(se.prototype=new v.a).isPureReactComponent=!0,se.prototype.shouldComponentUpdate=function(re,Ne){return Q(this.props,re)||Q(this.state,Ne)};var be=v.i.__b;v.i.__b=function(re){re.type&&re.type.__f&&re.ref&&(re.props.ref=re.ref,re.ref=null),be&&be(re)};var te=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ve(re){function Ne(de,Be){var Nt=De({},de);return delete Nt.ref,re(Nt,!(Be=de.ref||Be)||typeof Be=="object"&&!("current"in Be)?null:Be)}return Ne.$$typeof=te,Ne.render=Ne,Ne.prototype.isReactComponent=Ne.__f=!0,Ne.displayName="ForwardRef("+(re.displayName||re.name)+")",Ne}var Fe=function(re,Ne){return re==null?null:Object(v.k)(Object(v.k)(re).map(Ne))},Ze={map:Fe,forEach:Fe,count:function(re){return re?Object(v.k)(re).length:0},only:function(re){var Ne=Object(v.k)(re);if(Ne.length!==1)throw"Children.only";return Ne[0]},toArray:v.k},ht=v.i.__e;v.i.__e=function(re,Ne,de){if(re.then){for(var Be,Nt=Ne;Nt=Nt.__;)if((Be=Nt.__c)&&Be.__c)return Ne.__e==null&&(Ne.__e=de.__e,Ne.__k=de.__k),Be.__c(re,Ne)}ht(re,Ne,de)};var Ft=v.i.unmount;function bt(re,Ne,de){return re&&(re.__c&&re.__c.__H&&(re.__c.__H.__.forEach(function(Be){typeof Be.__c=="function"&&Be.__c()}),re.__c.__H=null),(re=De({},re)).__c!=null&&(re.__c.__P===de&&(re.__c.__P=Ne),re.__c=null),re.__k=re.__k&&re.__k.map(function(Be){return bt(Be,Ne,de)})),re}function xt(re,Ne,de){return re&&(re.__v=null,re.__k=re.__k&&re.__k.map(function(Be){return xt(Be,Ne,de)}),re.__c&&re.__c.__P===Ne&&(re.__e&&de.insertBefore(re.__e,re.__d),re.__c.__e=!0,re.__c.__P=de)),re}function tr(){this.__u=0,this.t=null,this.__b=null}function Oe(re){var Ne=re.__.__c;return Ne&&Ne.__e&&Ne.__e(re)}function oe(){this.u=null,this.o=null}v.i.unmount=function(re){var Ne=re.__c;Ne&&Ne.__R&&Ne.__R(),Ne&&re.__h===!0&&(re.type=null),Ft&&Ft(re)},(tr.prototype=new v.a).__c=function(re,Ne){var de=Ne.__c,Be=this;Be.t==null&&(Be.t=[]),Be.t.push(de);var Nt=Oe(Be.__v),Ot=!1,Kt=function(){Ot||(Ot=!0,de.__R=null,Nt?Nt(Tr):Tr())};de.__R=Kt;var Tr=function(){if(!--Be.__u){if(Be.state.__e){var Fn=Be.state.__e;Be.__v.__k[0]=xt(Fn,Fn.__c.__P,Fn.__c.__O)}var hn;for(Be.setState({__e:Be.__b=null});hn=Be.t.pop();)hn.forceUpdate()}},xn=Ne.__h===!0;Be.__u++||xn||Be.setState({__e:Be.__b=Be.__v.__k[0]}),re.then(Kt,Kt)},tr.prototype.componentWillUnmount=function(){this.t=[]},tr.prototype.render=function(re,Ne){if(this.__b){if(this.__v.__k){var de=document.createElement("div"),Be=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,de,Be.__O=Be.__P)}this.__b=null}var Nt=Ne.__e&&Object(v.e)(v.b,null,re.fallback);return Nt&&(Nt.__h=null),[Object(v.e)(v.b,null,Ne.__e?null:re.children),Nt]};var me=function(re,Ne,de){if(++de[1]===de[0]&&re.o.delete(Ne),re.props.revealOrder&&(re.props.revealOrder[0]!=="t"||!re.o.size))for(de=re.u;de;){for(;de.length>3;)de.pop()();if(de[1]<de[0])break;re.u=de=de[2]}};function qe(re){return this.getChildContext=function(){return re.context},re.children}function gt(re){var Ne=this,de=re.i;Ne.componentWillUnmount=function(){Object(v.j)(null,Ne.l),Ne.l=null,Ne.i=null},Ne.i&&Ne.i!==de&&Ne.componentWillUnmount(),re.__v?(Ne.l||(Ne.i=de,Ne.l={nodeType:1,parentNode:de,childNodes:[],appendChild:function(Be){this.childNodes.push(Be),Ne.i.appendChild(Be)},insertBefore:function(Be,Nt){this.childNodes.push(Be),Ne.i.appendChild(Be)},removeChild:function(Be){this.childNodes.splice(this.childNodes.indexOf(Be)>>>1,1),Ne.i.removeChild(Be)}}),Object(v.j)(Object(v.e)(qe,{context:Ne.context},re.__v),Ne.l)):Ne.l&&Ne.componentWillUnmount()}(oe.prototype=new v.a).__e=function(re){var Ne=this,de=Oe(Ne.__v),Be=Ne.o.get(re);return Be[0]++,function(Nt){var Ot=function(){Ne.props.revealOrder?(Be.push(Nt),me(Ne,re,Be)):Nt()};de?de(Ot):Ot()}},oe.prototype.render=function(re){this.u=null,this.o=new Map;var Ne=Object(v.k)(re.children);re.revealOrder&&re.revealOrder[0]==="b"&&Ne.reverse();for(var de=Ne.length;de--;)this.o.set(Ne[de],this.u=[1,0,this.u]);return re.children},oe.prototype.componentDidUpdate=oe.prototype.componentDidMount=function(){var re=this;this.o.forEach(function(Ne,de){me(re,de,Ne)})};var et=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Ct=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zt=typeof document<"u",Zt=function(re){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(re)};v.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(re){Object.defineProperty(v.a.prototype,re,{configurable:!0,get:function(){return this["UNSAFE_"+re]},set:function(Ne){Object.defineProperty(this,re,{configurable:!0,writable:!0,value:Ne})}})});var Gt=v.i.event;function ze(){}function Wt(){return this.cancelBubble}function xe(){return this.defaultPrevented}v.i.event=function(re){return Gt&&(re=Gt(re)),re.persist=ze,re.isPropagationStopped=Wt,re.isDefaultPrevented=xe,re.nativeEvent=re};var Ht,yr={configurable:!0,get:function(){return this.class}},G=v.i.vnode;v.i.vnode=function(re){var Ne=re.type,de=re.props,Be=de;if(typeof Ne=="string"){var Nt=Ne.indexOf("-")===-1;for(var Ot in Be={},de){var Kt=de[Ot];zt&&Ot==="children"&&Ne==="noscript"||Ot==="value"&&"defaultValue"in de&&Kt==null||(Ot==="defaultValue"&&"value"in de&&de.value==null?Ot="value":Ot==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(Ot)?Ot="ondblclick":/^onchange(textarea|input)/i.test(Ot+Ne)&&!Zt(de.type)?Ot="oninput":/^onfocus$/i.test(Ot)?Ot="onfocusin":/^onblur$/i.test(Ot)?Ot="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Ot)?Ot=Ot.toLowerCase():Nt&&Ct.test(Ot)?Ot=Ot.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),Be[Ot]=Kt)}Ne=="select"&&Be.multiple&&Array.isArray(Be.value)&&(Be.value=Object(v.k)(de.children).forEach(function(Tr){Tr.props.selected=Be.value.indexOf(Tr.props.value)!=-1})),Ne=="select"&&Be.defaultValue!=null&&(Be.value=Object(v.k)(de.children).forEach(function(Tr){Tr.props.selected=Be.multiple?Be.defaultValue.indexOf(Tr.props.value)!=-1:Be.defaultValue==Tr.props.value})),re.props=Be,de.class!=de.className&&(yr.enumerable="className"in de,de.className!=null&&(Be.class=de.className),Object.defineProperty(Be,"className",yr))}re.$$typeof=et,G&&G(re)};var pr=v.i.__r;v.i.__r=function(re){pr&&pr(re),Ht=re.__c};var Dr={ReactCurrentDispatcher:{current:{readContext:function(re){return Ht.__n[re.__c].props.value}}}};function Yr(re){return!!re&&re.$$typeof===et}var Zr=function(re,Ne){return re(Ne)},sr=v.b,sn={useState:C,useReducer:V,useEffect:ce,useLayoutEffect:_e,useRef:function(re){return m=5,fe(function(){return{current:re}},[])},useImperativeHandle:function(re,Ne,de){m=6,_e(function(){typeof re=="function"?re(Ne()):re&&(re.current=Ne())},de==null?de:de.concat(re))},useMemo:fe,useCallback:z,useContext:function(re){var Ne=l.context[re.__c],de=M(c++,9);return de.c=re,Ne?(de.__==null&&(de.__=!0,Ne.sub(l)),Ne.props.value):re.__},useDebugValue:function(re,Ne){v.i.useDebugValue&&v.i.useDebugValue(Ne?Ne(re):re)},version:"17.0.2",Children:Ze,render:function(re,Ne,de){return Ne.__k==null&&(Ne.textContent=""),Object(v.j)(re,Ne),typeof de=="function"&&de(),re?re.__c:null},hydrate:function(re,Ne,de){return Object(v.h)(re,Ne),typeof de=="function"&&de(),re?re.__c:null},unmountComponentAtNode:function(re){return!!re.__k&&(Object(v.j)(null,re),!0)},createPortal:function(re,Ne){return Object(v.e)(gt,{__v:re,i:Ne})},createElement:v.e,createContext:v.d,createFactory:function(re){return v.e.bind(null,re)},cloneElement:function(re){return Yr(re)?v.c.apply(null,arguments):re},createRef:v.f,Fragment:v.b,isValidElement:Yr,findDOMNode:function(re){return re&&(re.base||re.nodeType===1&&re)||null},Component:v.a,PureComponent:se,memo:he,forwardRef:ve,flushSync:function(re,Ne){return re(Ne)},unstable_batchedUpdates:Zr,StrictMode:sr,Suspense:tr,SuspenseList:oe,lazy:function(re){var Ne,de,Be;function Nt(Ot){if(Ne||(Ne=re()).then(function(Kt){de=Kt.default||Kt},function(Kt){Be=Kt}),Be)throw Be;if(!de)throw Ne;return Object(v.e)(de,Ot)}return Nt.displayName="Lazy",Nt.__f=!0,Nt},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Dr};s.d=sn},function(t,s,i){var c=i(7),l=i(147),h=i(148),v=i(180),m=i(57),g=function(x){if(x&&x.forEach!==v)try{m(x,"forEach",v)}catch{x.forEach=v}};for(var O in l)l[O]&&g(c[O]&&c[O].prototype);g(h)},function(t,s,i){i(17)({target:"Object",stat:!0},{setPrototypeOf:i(97)})},function(t,s,i){var c=i(17),l=i(19),h=i(38),v=i(96),m=i(137);c({target:"Object",stat:!0,forced:l(function(){v(1)}),sham:!m},{getPrototypeOf:function(g){return v(h(g))}})},function(t,s,i){var c=i(17),l=i(46),h=i(76),v=i(200),m=i(157),g=i(32),O=i(33),x=i(54),S=i(19),N=l("Reflect","construct"),j=Object.prototype,M=[].push,C=S(function(){function _e(){}return!(N(function(){},[],_e)instanceof _e)}),V=!S(function(){N(function(){})}),ce=C||V;c({target:"Reflect",stat:!0,forced:ce,sham:ce},{construct:function(_e,fe){m(_e),g(fe);var z=arguments.length<3?_e:m(arguments[2]);if(V&&!C)return N(_e,fe,z);if(_e==z){switch(fe.length){case 0:return new _e;case 1:return new _e(fe[0]);case 2:return new _e(fe[0],fe[1]);case 3:return new _e(fe[0],fe[1],fe[2]);case 4:return new _e(fe[0],fe[1],fe[2],fe[3])}var ee=[null];return h(M,ee,fe),new(h(v,_e,ee))}var $=z.prototype,L=x(O($)?$:j),Y=h(_e,L,fe);return O(Y)?Y:L}})},function(t,s){var i=Function.prototype,c=i.bind,l=i.call,h=c&&c.bind(l);t.exports=c?function(v){return v&&h(l,v)}:function(v){return v&&function(){return l.apply(v,arguments)}}},function(t,s,i){var c=i(17),l=i(7),h=i(99),v=i(100),m=i(33),g=i(67),O=i(43),x=i(40),S=i(61),N=i(27),j=i(75),M=i(101),C=j("slice"),V=N("species"),ce=l.Array,_e=Math.max;c({target:"Array",proto:!0,forced:!C},{slice:function(fe,z){var ee,$,L,Y=x(this),K=O(Y),I=g(fe,K),pe=g(z===void 0?K:z,K);if(h(Y)&&(ee=Y.constructor,(v(ee)&&(ee===ce||h(ee.prototype))||m(ee)&&(ee=ee[V])===null)&&(ee=void 0),ee===ce||ee===void 0))return M(Y,I,pe);for($=new(ee===void 0?ce:ee)(_e(pe-I,0)),L=0;I<pe;I++,L++)I in Y&&S($,L,Y[I]);return $.length=L,$}})},function(t,s,i){var c=i(7),l=i(51).f,h=i(57),v=i(44),m=i(108),g=i(134),O=i(95);t.exports=function(x,S){var N,j,M,C,V,ce=x.target,_e=x.global,fe=x.stat;if(N=_e?c:fe?c[ce]||m(ce,{}):(c[ce]||{}).prototype)for(j in S){if(C=S[j],M=x.noTargetGet?(V=l(N,j))&&V.value:N[j],!O(_e?j:ce+(fe?".":"#")+j,x.forced)&&M!==void 0){if(typeof C==typeof M)continue;g(C,M)}(x.sham||M&&M.sham)&&h(C,"sham",!0),v(N,j,C,x)}}},function(t,s,i){var c=i(17),l=i(102);c({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},function(t,s){t.exports=function(i){try{return!!i()}catch{return!0}}},function(t,s,i){var c=i(17),l=i(38),h=i(66);c({target:"Object",stat:!0,forced:i(19)(function(){h(1)})},{keys:function(v){return h(l(v))}})},function(t,s,i){var c=i(17),l=i(19),h=i(40),v=i(51).f,m=i(36),g=l(function(){v(1)});c({target:"Object",stat:!0,forced:!m||g,sham:!m},{getOwnPropertyDescriptor:function(O,x){return v(h(O),x)}})},function(t,s,i){var c=i(36),l=i(94).EXISTS,h=i(15),v=i(37).f,m=Function.prototype,g=h(m.toString),O=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=h(O.exec);c&&!l&&v(m,"name",{configurable:!0,get:function(){try{return x(O,g(this))[1]}catch{return""}}})},function(t,s,i){var c=i(17),l=i(74).filter;c({target:"Array",proto:!0,forced:!i(75)("filter")},{filter:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}})},function(t,s,i){var c=i(17),l=i(183);c({target:"Array",stat:!0,forced:!i(118)(function(h){Array.from(h)})},{from:l})},function(t,s,i){var c=i(17),l=i(36),h=i(135),v=i(40),m=i(51),g=i(61);c({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(O){for(var x,S,N=v(O),j=m.f,M=h(N),C={},V=0;M.length>V;)(S=j(N,x=M[V++]))!==void 0&&g(C,x,S);return C}})},,function(t,s,i){var c=i(7),l=i(84),h=i(34),v=i(85),m=i(109),g=i(128),O=l("wks"),x=c.Symbol,S=x&&x.for,N=g?x:x&&x.withoutSetter||v;t.exports=function(j){if(!h(O,j)||!m&&typeof O[j]!="string"){var M="Symbol."+j;m&&h(x,j)?O[j]=x[j]:O[j]=g&&S?S(M):N(M)}return O[j]}},function(t,s){t.exports=function(i){return typeof i=="function"}},function(t,s,i){var c=i(17),l=i(7),h=i(19),v=i(99),m=i(33),g=i(38),O=i(43),x=i(61),S=i(119),N=i(75),j=i(27),M=i(65),C=j("isConcatSpreadable"),V=9007199254740991,ce="Maximum allowed index exceeded",_e=l.TypeError,fe=M>=51||!h(function(){var $=[];return $[C]=!1,$.concat()[0]!==$}),z=N("concat"),ee=function($){if(!m($))return!1;var L=$[C];return L!==void 0?!!L:v($)};c({target:"Array",proto:!0,forced:!fe||!z},{concat:function($){var L,Y,K,I,pe,De=g(this),Q=S(De,0),se=0;for(L=-1,K=arguments.length;L<K;L++)if(ee(pe=L===-1?De:arguments[L])){if(se+(I=O(pe))>V)throw _e(ce);for(Y=0;Y<I;Y++,se++)Y in pe&&x(Q,se,pe[Y])}else{if(se>=V)throw _e(ce);x(Q,se++,pe)}return Q.length=se,Q}})},function(t,s,i){var c=i(17),l=i(199);c({target:"Object",stat:!0,forced:Object.assign!==l},{assign:l})},function(t,s,i){var c=i(105),l=typeof self=="object"&&self&&self.Object===Object&&self,h=c.a||l||Function("return this")();s.a=h},function(t,s,i){var c=i(7),l=i(33),h=c.String,v=c.TypeError;t.exports=function(m){if(l(m))return m;throw v(h(m)+" is not an object")}},function(t,s,i){var c=i(28);t.exports=function(l){return typeof l=="object"?l!==null:c(l)}},function(t,s,i){var c=i(15),l=i(38),h=c({}.hasOwnProperty);t.exports=Object.hasOwn||function(v,m){return h(l(v),m)}},function(t,s){var i=Function.prototype.call;t.exports=i.bind?i.bind(i):function(){return i.apply(i,arguments)}},function(t,s,i){var c=i(19);t.exports=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(t,s,i){var c=i(7),l=i(36),h=i(129),v=i(32),m=i(87),g=c.TypeError,O=Object.defineProperty;s.f=l?O:function(x,S,N){if(v(x),S=m(S),v(N),h)try{return O(x,S,N)}catch{}if("get"in N||"set"in N)throw g("Accessors not supported");return"value"in N&&(x[S]=N.value),x}},function(t,s,i){var c=i(7),l=i(45),h=c.Object;t.exports=function(v){return h(l(v))}},function(t,s,i){var c=i(17),l=i(74).map;c({target:"Array",proto:!0,forced:!i(75)("map")},{map:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}})},function(t,s,i){var c=i(81),l=i(45);t.exports=function(h){return c(l(h))}},function(t,s,i){var c=i(7),l=i(98),h=c.String;t.exports=function(v){if(l(v)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return h(v)}},function(t,s,i){(function(c){i.d(s,"d",function(){return v}),i.d(s,"c",function(){return m}),i.d(s,"b",function(){return g}),i.d(s,"a",function(){return x});var l=i(10),h=function(S,N){var j=typeof Symbol=="function"&&S[Symbol.iterator];if(!j)return S;var M,C,V=j.call(S),ce=[];try{for(;(N===void 0||N-- >0)&&!(M=V.next()).done;)ce.push(M.value)}catch(_e){C={error:_e}}finally{try{M&&!M.done&&(j=V.return)&&j.call(V)}finally{if(C)throw C.error}}return ce};function v(){var S=h(Object(l.j)(0),2)[1];return Object(l.h)(function(){S(function(N){return N+1})},[])}function m(S){if(!S||typeof S!="object")return!1;var N=Object.getPrototypeOf(S);return!N||N===Object.prototype}function g(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var O={};function x(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:O}}).call(this,i(82))},function(t,s,i){var c=i(90);t.exports=function(l){return c(l.length)}},function(t,s,i){var c=i(7),l=i(28),h=i(34),v=i(57),m=i(108),g=i(92),O=i(56),x=i(94).CONFIGURABLE,S=O.get,N=O.enforce,j=String(String).split("String");(t.exports=function(M,C,V,ce){var _e,fe=!!ce&&!!ce.unsafe,z=!!ce&&!!ce.enumerable,ee=!!ce&&!!ce.noTargetGet,$=ce&&ce.name!==void 0?ce.name:C;l(V)&&(String($).slice(0,7)==="Symbol("&&($="["+String($).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!h(V,"name")||x&&V.name!==$)&&v(V,"name",$),(_e=N(V)).source||(_e.source=j.join(typeof $=="string"?$:""))),M!==c?(fe?!ee&&M[C]&&(z=!0):delete M[C],z?M[C]=V:v(M,C,V)):z?M[C]=V:m(C,V)})(Function.prototype,"toString",function(){return l(this)&&S(this).source||g(this)})},function(t,s,i){var c=i(7).TypeError;t.exports=function(l){if(l==null)throw c("Can't call method on "+l);return l}},function(t,s,i){var c=i(7),l=i(28),h=function(v){return l(v)?v:void 0};t.exports=function(v,m){return arguments.length<2?h(c[v]):c[v]&&c[v][m]}},function(t,s,i){var c=i(17),l=i(35),h=i(33),v=i(32),m=i(201),g=i(51),O=i(96);c({target:"Reflect",stat:!0},{get:function x(S,N){var j,M,C=arguments.length<3?S:arguments[2];return v(S)===C?S[N]:(j=g.f(S,N))?m(j)?j.value:j.get===void 0?void 0:l(j.get,C):h(M=O(S))?x(M,N,C):void 0}})},function(t,s,i){(function(c){var l=i(31),h=i(166),v=r&&!r.nodeType&&r,m=v&&typeof c=="object"&&c&&!c.nodeType&&c,g=m&&m.exports===v?l.a.Buffer:void 0,O=(g?g.isBuffer:void 0)||h.a;s.a=O}).call(this,i(121)(t))},function(t,s,i){(function(c){var l=i(105),h=r&&!r.nodeType&&r,v=h&&typeof c=="object"&&c&&!c.nodeType&&c,m=v&&v.exports===h&&l.a.process,g=function(){try{var O=v&&v.require&&v.require("util").types;return O||m&&m.binding&&m.binding("util")}catch{}}();s.a=g}).call(this,i(121)(t))},function(t,s,i){var c=i(15),l=c({}.toString),h=c("".slice);t.exports=function(v){return h(l(v),8,-1)}},function(t,s,i){var c=i(36),l=i(35),h=i(93),v=i(71),m=i(40),g=i(87),O=i(34),x=i(129),S=Object.getOwnPropertyDescriptor;s.f=c?S:function(N,j){if(N=m(N),j=g(j),x)try{return S(N,j)}catch{}if(O(N,j))return v(!l(h.f,N,j),N[j])}},function(t,s,i){var c=i(17),l=i(213).entries;c({target:"Object",stat:!0},{entries:function(h){return l(h)}})},function(t,s,i){var c=i(46);t.exports=c("navigator","userAgent")||""},function(t,s,i){var c,l=i(32),h=i(169),v=i(110),m=i(69),g=i(133),O=i(86),x=i(91),S=x("IE_PROTO"),N=function(){},j=function(V){return"<script>"+V+"<\/script>"},M=function(V){V.write(j("")),V.close();var ce=V.parentWindow.Object;return V=null,ce},C=function(){try{c=new ActiveXObject("htmlfile")}catch{}var V,ce;C=typeof document<"u"?document.domain&&c?M(c):((ce=O("iframe")).style.display="none",g.appendChild(ce),ce.src="javascript:",(V=ce.contentWindow.document).open(),V.write(j("document.F=Object")),V.close(),V.F):M(c);for(var _e=v.length;_e--;)delete C.prototype[v[_e]];return C()};m[S]=!0,t.exports=Object.create||function(V,ce){var _e;return V!==null?(N.prototype=l(V),_e=new N,N.prototype=null,_e[S]=V):_e=C(),ce===void 0?_e:h(_e,ce)}},function(t,s,i){var c=i(7),l=i(28),h=i(89),v=c.TypeError;t.exports=function(m){if(l(m))return m;throw v(h(m)+" is not a function")}},function(t,s,i){var c,l,h,v=i(171),m=i(7),g=i(15),O=i(33),x=i(57),S=i(34),N=i(107),j=i(91),M=i(69),C="Object already initialized",V=m.TypeError,ce=m.WeakMap;if(v||N.state){var _e=N.state||(N.state=new ce),fe=g(_e.get),z=g(_e.has),ee=g(_e.set);c=function(L,Y){if(z(_e,L))throw new V(C);return Y.facade=L,ee(_e,L,Y),Y},l=function(L){return fe(_e,L)||{}},h=function(L){return z(_e,L)}}else{var $=j("state");M[$]=!0,c=function(L,Y){if(S(L,$))throw new V(C);return Y.facade=L,x(L,$,Y),Y},l=function(L){return S(L,$)?L[$]:{}},h=function(L){return S(L,$)}}t.exports={set:c,get:l,has:h,enforce:function(L){return h(L)?l(L):c(L,{})},getterFor:function(L){return function(Y){var K;if(!O(Y)||(K=l(Y)).type!==L)throw V("Incompatible receiver, "+L+" required");return K}}}},function(t,s,i){var c=i(36),l=i(37),h=i(71);t.exports=c?function(v,m,g){return l.f(v,m,h(1,g))}:function(v,m,g){return v[m]=g,v}},function(t,s,i){var c=i(15);t.exports=c({}.isPrototypeOf)},function(t,s,i){var c=i(55);t.exports=function(l,h){var v=l[h];return v==null?void 0:c(v)}},function(t,s,i){i(174)("Map",function(c){return function(){return c(this,arguments.length?arguments[0]:void 0)}},i(178))},function(t,s,i){var c=i(87),l=i(37),h=i(71);t.exports=function(v,m,g){var O=c(m);O in v?l.f(v,O,h(0,g)):v[O]=g}},function(t,s,i){var c=i(15),l=i(55),h=c(c.bind);t.exports=function(v,m){return l(v),m===void 0?v:h?h(v,m):function(){return v.apply(m,arguments)}}},function(t,s,i){var c=i(17),l=i(15),h=i(81),v=i(40),m=i(120),g=l([].join),O=h!=Object,x=m("join",",");c({target:"Array",proto:!0,forced:O||!x},{join:function(S){return g(v(this),S===void 0?",":S)}})},function(t,s){t.exports=!1},function(t,s,i){var c,l,h=i(7),v=i(53),m=h.process,g=h.Deno,O=m&&m.versions||g&&g.version,x=O&&O.v8;x&&(l=(c=x.split("."))[0]>0&&c[0]<4?1:+(c[0]+c[1])),!l&&v&&(!(c=v.match(/Edge\/(\d+)/))||c[1]>=74)&&(c=v.match(/Chrome\/(\d+)/))&&(l=+c[1]),t.exports=l},function(t,s,i){var c=i(131),l=i(110);t.exports=Object.keys||function(h){return c(h,l)}},function(t,s,i){var c=i(68),l=Math.max,h=Math.min;t.exports=function(v,m){var g=c(v);return g<0?l(g+m,0):h(g,m)}},function(t,s){var i=Math.ceil,c=Math.floor;t.exports=function(l){var h=+l;return h!=h||h===0?0:(h>0?c:i)(h)}},function(t,s){t.exports={}},function(t,s){t.exports={}},function(t,s){t.exports=function(i,c){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:c}}},function(t,s,i){var c=i(131),l=i(110).concat("length","prototype");s.f=Object.getOwnPropertyNames||function(h){return c(h,l)}},function(t,s,i){var c=i(37).f,l=i(34),h=i(27)("toStringTag");t.exports=function(v,m,g){v&&!l(v=g?v:v.prototype,h)&&c(v,h,{configurable:!0,value:m})}},function(t,s,i){var c=i(62),l=i(15),h=i(81),v=i(38),m=i(43),g=i(119),O=l([].push),x=function(S){var N=S==1,j=S==2,M=S==3,C=S==4,V=S==6,ce=S==7,_e=S==5||V;return function(fe,z,ee,$){for(var L,Y,K=v(fe),I=h(K),pe=c(z,ee),De=m(I),Q=0,se=$||g,he=N?se(fe,De):j||ce?se(fe,0):void 0;De>Q;Q++)if((_e||Q in I)&&(Y=pe(L=I[Q],Q,K),S))if(N)he[Q]=Y;else if(Y)switch(S){case 3:return!0;case 5:return L;case 6:return Q;case 2:O(he,L)}else switch(S){case 4:return!1;case 7:O(he,L)}return V?-1:M||C?C:he}};t.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(t,s,i){var c=i(19),l=i(27),h=i(65),v=l("species");t.exports=function(m){return h>=51||!c(function(){var g=[];return(g.constructor={})[v]=function(){return{foo:1}},g[m](Boolean).foo!==1})}},function(t,s){var i=Function.prototype,c=i.apply,l=i.bind,h=i.call;t.exports=typeof Reflect=="object"&&Reflect.apply||(l?h.bind(c):function(){return h.apply(c,arguments)})},function(t,s,i){var c=i(76),l=i(35),h=i(15),v=i(122),m=i(154),g=i(32),O=i(45),x=i(156),S=i(123),N=i(90),j=i(41),M=i(59),C=i(113),V=i(124),ce=i(102),_e=i(151),fe=i(19),z=_e.UNSUPPORTED_Y,ee=4294967295,$=Math.min,L=[].push,Y=h(/./.exec),K=h(L),I=h("".slice),pe=!fe(function(){var De=/(?:)/,Q=De.exec;De.exec=function(){return Q.apply(this,arguments)};var se="ab".split(De);return se.length!==2||se[0]!=="a"||se[1]!=="b"});v("split",function(De,Q,se){var he;return he="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(be,te){var ve=j(O(this)),Fe=te===void 0?ee:te>>>0;if(Fe===0)return[];if(be===void 0)return[ve];if(!m(be))return l(Q,ve,be,Fe);for(var Ze,ht,Ft,bt=[],xt=(be.ignoreCase?"i":"")+(be.multiline?"m":"")+(be.unicode?"u":"")+(be.sticky?"y":""),tr=0,Oe=new RegExp(be.source,xt+"g");(Ze=l(ce,Oe,ve))&&!((ht=Oe.lastIndex)>tr&&(K(bt,I(ve,tr,Ze.index)),Ze.length>1&&Ze.index<ve.length&&c(L,bt,C(Ze,1)),Ft=Ze[0].length,tr=ht,bt.length>=Fe));)Oe.lastIndex===Ze.index&&Oe.lastIndex++;return tr===ve.length?!Ft&&Y(Oe,"")||K(bt,""):K(bt,I(ve,tr)),bt.length>Fe?C(bt,0,Fe):bt}:"0".split(void 0,0).length?function(be,te){return be===void 0&&te===0?[]:l(Q,this,be,te)}:Q,[function(be,te){var ve=O(this),Fe=be==null?void 0:M(be,De);return Fe?l(Fe,be,ve,te):l(he,j(ve),be,te)},function(be,te){var ve=g(this),Fe=j(be),Ze=se(he,ve,Fe,te,he!==Q);if(Ze.done)return Ze.value;var ht=x(ve,RegExp),Ft=ve.unicode,bt=(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(z?"g":"y"),xt=new ht(z?"^(?:"+ve.source+")":ve,bt),tr=te===void 0?ee:te>>>0;if(tr===0)return[];if(Fe.length===0)return V(xt,Fe)===null?[Fe]:[];for(var Oe=0,oe=0,me=[];oe<Fe.length;){xt.lastIndex=z?0:oe;var qe,gt=V(xt,z?I(Fe,oe):Fe);if(gt===null||(qe=$(N(xt.lastIndex+(z?oe:0)),Fe.length))===Oe)oe=S(Fe,oe,Ft);else{if(K(me,I(Fe,Oe,oe)),me.length===tr)return me;for(var et=1;et<=gt.length-1;et++)if(K(me,gt[et]),me.length===tr)return me;oe=Oe=qe}}return K(me,I(Fe,Oe)),me}]},!pe,z)},function(t,s,i){var c=i(36),l=i(7),h=i(15),v=i(95),m=i(44),g=i(34),O=i(143),x=i(58),S=i(88),N=i(130),j=i(19),M=i(72).f,C=i(51).f,V=i(37).f,ce=i(197),_e=i(159).trim,fe="Number",z=l.Number,ee=z.prototype,$=l.TypeError,L=h("".slice),Y=h("".charCodeAt),K=function(he){var be=N(he,"number");return typeof be=="bigint"?be:I(be)},I=function(he){var be,te,ve,Fe,Ze,ht,Ft,bt,xt=N(he,"number");if(S(xt))throw $("Cannot convert a Symbol value to a number");if(typeof xt=="string"&&xt.length>2){if(xt=_e(xt),(be=Y(xt,0))===43||be===45){if((te=Y(xt,2))===88||te===120)return NaN}else if(be===48){switch(Y(xt,1)){case 66:case 98:ve=2,Fe=49;break;case 79:case 111:ve=8,Fe=55;break;default:return+xt}for(ht=(Ze=L(xt,2)).length,Ft=0;Ft<ht;Ft++)if((bt=Y(Ze,Ft))<48||bt>Fe)return NaN;return parseInt(Ze,ve)}}return+xt};if(v(fe,!z(" 0o1")||!z("0b1")||z("+0x1"))){for(var pe,De=function(he){var be=arguments.length<1?0:z(K(he)),te=this;return x(ee,te)&&j(function(){ce(te)})?O(Object(be),te,De):be},Q=c?M(z):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),se=0;Q.length>se;se++)g(z,pe=Q[se])&&!g(De,pe)&&V(De,pe,C(z,pe));De.prototype=ee,ee.constructor=De,m(l,fe,De)}},function(t,s,i){i(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,s,i){var c=i(17),l=i(214),h=i(83);c({target:"Array",proto:!0},{fill:l}),h("fill")},function(t,s,i){var c=i(7),l=i(15),h=i(19),v=i(50),m=c.Object,g=l("".split);t.exports=h(function(){return!m("z").propertyIsEnumerable(0)})?function(O){return v(O)=="String"?g(O,""):m(O)}:m},function(t,s){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}t.exports=i},function(t,s,i){var c=i(27),l=i(54),h=i(37),v=c("unscopables"),m=Array.prototype;m[v]==null&&h.f(m,v,{configurable:!0,value:l(null)}),t.exports=function(g){m[v][g]=!0}},function(t,s,i){var c=i(64),l=i(107);(t.exports=function(h,v){return l[h]||(l[h]=v!==void 0?v:{})})("versions",[]).push({version:"3.19.3",mode:c?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(t,s,i){var c=i(15),l=0,h=Math.random(),v=c(1 .toString);t.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+v(++l+h,36)}},function(t,s,i){var c=i(7),l=i(33),h=c.document,v=l(h)&&l(h.createElement);t.exports=function(m){return v?h.createElement(m):{}}},function(t,s,i){var c=i(130),l=i(88);t.exports=function(h){var v=c(h,"string");return l(v)?v:v+""}},function(t,s,i){var c=i(7),l=i(46),h=i(28),v=i(58),m=i(128),g=c.Object;t.exports=m?function(O){return typeof O=="symbol"}:function(O){var x=l("Symbol");return h(x)&&v(x.prototype,g(O))}},function(t,s,i){var c=i(7).String;t.exports=function(l){try{return c(l)}catch{return"Object"}}},function(t,s,i){var c=i(68),l=Math.min;t.exports=function(h){return h>0?l(c(h),9007199254740991):0}},function(t,s,i){var c=i(84),l=i(85),h=c("keys");t.exports=function(v){return h[v]||(h[v]=l(v))}},function(t,s,i){var c=i(15),l=i(28),h=i(107),v=c(Function.toString);l(h.inspectSource)||(h.inspectSource=function(m){return v(m)}),t.exports=h.inspectSource},function(t,s,i){var c={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,h=l&&!c.call({1:2},1);s.f=h?function(v){var m=l(this,v);return!!m&&m.enumerable}:c},function(t,s,i){var c=i(36),l=i(34),h=Function.prototype,v=c&&Object.getOwnPropertyDescriptor,m=l(h,"name"),g=m&&function(){}.name==="something",O=m&&(!c||c&&v(h,"name").configurable);t.exports={EXISTS:m,PROPER:g,CONFIGURABLE:O}},function(t,s,i){var c=i(19),l=i(28),h=/#|\.prototype\./,v=function(S,N){var j=g[m(S)];return j==x||j!=O&&(l(N)?c(N):!!N)},m=v.normalize=function(S){return String(S).replace(h,".").toLowerCase()},g=v.data={},O=v.NATIVE="N",x=v.POLYFILL="P";t.exports=v},function(t,s,i){var c=i(7),l=i(34),h=i(28),v=i(38),m=i(91),g=i(137),O=m("IE_PROTO"),x=c.Object,S=x.prototype;t.exports=g?x.getPrototypeOf:function(N){var j=v(N);if(l(j,O))return j[O];var M=j.constructor;return h(M)&&j instanceof M?M.prototype:j instanceof x?S:null}},function(t,s,i){var c=i(15),l=i(32),h=i(173);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var v,m=!1,g={};try{(v=c(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(g,[]),m=g instanceof Array}catch{}return function(O,x){return l(O),h(x),m?v(O,x):O.__proto__=x,O}}():void 0)},function(t,s,i){var c=i(7),l=i(116),h=i(28),v=i(50),m=i(27)("toStringTag"),g=c.Object,O=v(function(){return arguments}())=="Arguments";t.exports=l?v:function(x){var S,N,j;return x===void 0?"Undefined":x===null?"Null":typeof(N=function(M,C){try{return M[C]}catch{}}(S=g(x),m))=="string"?N:O?v(S):(j=v(S))=="Object"&&h(S.callee)?"Arguments":j}},function(t,s,i){var c=i(50);t.exports=Array.isArray||function(l){return c(l)=="Array"}},function(t,s,i){var c=i(15),l=i(19),h=i(28),v=i(98),m=i(46),g=i(92),O=function(){},x=[],S=m("Reflect","construct"),N=/^\s*(?:class|function)\b/,j=c(N.exec),M=!N.exec(O),C=function(V){if(!h(V))return!1;try{return S(O,x,V),!0}catch{return!1}};t.exports=!S||l(function(){var V;return C(C.call)||!C(Object)||!C(function(){V=!0})||V})?function(V){if(!h(V))return!1;switch(v(V)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return M||!!j(N,g(V))}:C},function(t,s,i){var c=i(15);t.exports=c([].slice)},function(t,s,i){var c,l,h=i(35),v=i(15),m=i(41),g=i(185),O=i(151),x=i(84),S=i(54),N=i(56).get,j=i(186),M=i(187),C=x("native-string-replace",String.prototype.replace),V=RegExp.prototype.exec,ce=V,_e=v("".charAt),fe=v("".indexOf),z=v("".replace),ee=v("".slice),$=(l=/b*/g,h(V,c=/a/,"a"),h(V,l,"a"),c.lastIndex!==0||l.lastIndex!==0),L=O.BROKEN_CARET,Y=/()??/.exec("")[1]!==void 0;($||Y||L||j||M)&&(ce=function(K){var I,pe,De,Q,se,he,be,te=this,ve=N(te),Fe=m(K),Ze=ve.raw;if(Ze)return Ze.lastIndex=te.lastIndex,I=h(ce,Ze,Fe),te.lastIndex=Ze.lastIndex,I;var ht=ve.groups,Ft=L&&te.sticky,bt=h(g,te),xt=te.source,tr=0,Oe=Fe;if(Ft&&(bt=z(bt,"y",""),fe(bt,"g")===-1&&(bt+="g"),Oe=ee(Fe,te.lastIndex),te.lastIndex>0&&(!te.multiline||te.multiline&&_e(Fe,te.lastIndex-1)!==`
`)&&(xt="(?: "+xt+")",Oe=" "+Oe,tr++),pe=new RegExp("^(?:"+xt+")",bt)),Y&&(pe=new RegExp("^"+xt+"$(?!\\s)",bt)),$&&(De=te.lastIndex),Q=h(V,Ft?pe:te,Oe),Ft?Q?(Q.input=ee(Q.input,tr),Q[0]=ee(Q[0],tr),Q.index=te.lastIndex,te.lastIndex+=Q[0].length):te.lastIndex=0:$&&Q&&(te.lastIndex=te.global?Q.index+Q[0].length:De),Y&&Q&&Q.length>1&&h(C,Q[0],pe,function(){for(se=1;se<arguments.length-2;se++)arguments[se]===void 0&&(Q[se]=void 0)}),Q&&ht)for(Q.groups=he=S(null),se=0;se<ht.length;se++)he[(be=ht[se])[0]]=Q[be[1]];return Q}),t.exports=ce},function(t,s,i){var c=i(17),l=i(7),h=i(67),v=i(68),m=i(43),g=i(38),O=i(119),x=i(61),S=i(75)("splice"),N=l.TypeError,j=Math.max,M=Math.min,C=9007199254740991,V="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!S},{splice:function(ce,_e){var fe,z,ee,$,L,Y,K=g(this),I=m(K),pe=h(ce,I),De=arguments.length;if(De===0?fe=z=0:De===1?(fe=0,z=I-pe):(fe=De-2,z=M(j(v(_e),0),I-pe)),I+fe-z>C)throw N(V);for(ee=O(K,z),$=0;$<z;$++)(L=pe+$)in K&&x(ee,$,K[L]);if(ee.length=z,fe<z){for($=pe;$<I-z;$++)Y=$+fe,(L=$+z)in K?K[Y]=K[L]:delete K[Y];for($=I;$>I-z+fe;$--)delete K[$-1]}else if(fe>z)for($=I-z;$>pe;$--)Y=$+fe-1,(L=$+z-1)in K?K[Y]=K[L]:delete K[Y];for($=0;$<fe;$++)K[$+pe]=arguments[$+2];return K.length=I-z+fe,ee}})},function(t,s,i){var c=i(17),l=i(202);c({target:"String",proto:!0,forced:i(203)("anchor")},{anchor:function(h){return l(this,"a","name",h)}})},function(t,s,i){(function(c){var l=typeof c=="object"&&c&&c.Object===Object&&c;s.a=l}).call(this,i(82))},function(t,s,i){(function(c){var l=i(31),h=r&&!r.nodeType&&r,v=h&&typeof c=="object"&&c&&!c.nodeType&&c,m=v&&v.exports===h?l.a.Buffer:void 0,g=m?m.allocUnsafe:void 0;s.a=function(O,x){if(x)return O.slice();var S=O.length,N=g?g(S):new O.constructor(S);return O.copy(N),N}}).call(this,i(121)(t))},function(t,s,i){var c=i(7),l=i(108),h="__core-js_shared__",v=c[h]||l(h,{});t.exports=v},function(t,s,i){var c=i(7),l=Object.defineProperty;t.exports=function(h,v){try{l(c,h,{value:v,configurable:!0,writable:!0})}catch{c[h]=v}return v}},function(t,s,i){var c=i(65),l=i(19);t.exports=!!Object.getOwnPropertySymbols&&!l(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&c&&c<41})},function(t,s){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,s,i){var c=i(17),l=i(35),h=i(64),v=i(94),m=i(28),g=i(172),O=i(96),x=i(97),S=i(73),N=i(57),j=i(44),M=i(27),C=i(70),V=i(136),ce=v.PROPER,_e=v.CONFIGURABLE,fe=V.IteratorPrototype,z=V.BUGGY_SAFARI_ITERATORS,ee=M("iterator"),$="keys",L="values",Y="entries",K=function(){return this};t.exports=function(I,pe,De,Q,se,he,be){g(De,pe,Q);var te,ve,Fe,Ze=function(oe){if(oe===se&&tr)return tr;if(!z&&oe in bt)return bt[oe];switch(oe){case $:case L:case Y:return function(){return new De(this,oe)}}return function(){return new De(this)}},ht=pe+" Iterator",Ft=!1,bt=I.prototype,xt=bt[ee]||bt["@@iterator"]||se&&bt[se],tr=!z&&xt||Ze(se),Oe=pe=="Array"&&bt.entries||xt;if(Oe&&(te=O(Oe.call(new I)))!==Object.prototype&&te.next&&(h||O(te)===fe||(x?x(te,fe):m(te[ee])||j(te,ee,K)),S(te,ht,!0,!0),h&&(C[ht]=K)),ce&&se==L&&xt&&xt.name!==L&&(!h&&_e?N(bt,"name",L):(Ft=!0,tr=function(){return l(xt,this)})),se)if(ve={values:Ze(L),keys:he?tr:Ze($),entries:Ze(Y)},be)for(Fe in ve)(z||Ft||!(Fe in bt))&&j(bt,Fe,ve[Fe]);else c({target:pe,proto:!0,forced:z||Ft},ve);return h&&!be||bt[ee]===tr||j(bt,ee,tr,{name:se}),C[pe]=tr,ve}},function(t,s){s.f=Object.getOwnPropertySymbols},function(t,s,i){var c=i(7),l=i(67),h=i(43),v=i(61),m=c.Array,g=Math.max;t.exports=function(O,x,S){for(var N=h(O),j=l(x,N),M=l(S===void 0?N:S,N),C=m(g(M-j,0)),V=0;j<M;j++,V++)v(C,V,O[j]);return C.length=V,C}},function(t,s,i){var c=i(7),l=i(62),h=i(35),v=i(32),m=i(89),g=i(140),O=i(43),x=i(58),S=i(141),N=i(115),j=i(142),M=c.TypeError,C=function(ce,_e){this.stopped=ce,this.result=_e},V=C.prototype;t.exports=function(ce,_e,fe){var z,ee,$,L,Y,K,I,pe=fe&&fe.that,De=!(!fe||!fe.AS_ENTRIES),Q=!(!fe||!fe.IS_ITERATOR),se=!(!fe||!fe.INTERRUPTED),he=l(_e,pe),be=function(ve){return z&&j(z,"normal",ve),new C(!0,ve)},te=function(ve){return De?(v(ve),se?he(ve[0],ve[1],be):he(ve[0],ve[1])):se?he(ve,be):he(ve)};if(Q)z=ce;else{if(!(ee=N(ce)))throw M(m(ce)+" is not iterable");if(g(ee)){for($=0,L=O(ce);L>$;$++)if((Y=te(ce[$]))&&x(V,Y))return Y;return new C(!1)}z=S(ce,ee)}for(K=z.next;!(I=h(K,z)).done;){try{Y=te(I.value)}catch(ve){j(z,"throw",ve)}if(typeof Y=="object"&&Y&&x(V,Y))return Y}return new C(!1)}},function(t,s,i){var c=i(98),l=i(59),h=i(70),v=i(27)("iterator");t.exports=function(m){if(m!=null)return l(m,v)||l(m,"@@iterator")||h[c(m)]}},function(t,s,i){var c={};c[i(27)("toStringTag")]="z",t.exports=String(c)==="[object z]"},function(t,s,i){var c=i(7),l=i(58),h=c.TypeError;t.exports=function(v,m){if(l(m,v))return v;throw h("Incorrect invocation")}},function(t,s,i){var c=i(27)("iterator"),l=!1;try{var h=0,v={next:function(){return{done:!!h++}},return:function(){l=!0}};v[c]=function(){return this},Array.from(v,function(){throw 2})}catch{}t.exports=function(m,g){if(!g&&!l)return!1;var O=!1;try{var x={};x[c]=function(){return{next:function(){return{done:O=!0}}}},m(x)}catch{}return O}},function(t,s,i){var c=i(181);t.exports=function(l,h){return new(c(l))(h===0?0:h)}},function(t,s,i){var c=i(19);t.exports=function(l,h){var v=[][l];return!!v&&c(function(){v.call(null,h||function(){throw 1},1)})}},function(t,s){t.exports=function(i){if(!i.webpackPolyfill){var c=Object.create(i);c.children||(c.children=[]),Object.defineProperty(c,"loaded",{enumerable:!0,get:function(){return c.l}}),Object.defineProperty(c,"id",{enumerable:!0,get:function(){return c.i}}),Object.defineProperty(c,"exports",{enumerable:!0}),c.webpackPolyfill=1}return c}},function(t,s,i){i(18);var c=i(15),l=i(44),h=i(102),v=i(19),m=i(27),g=i(57),O=m("species"),x=RegExp.prototype;t.exports=function(S,N,j,M){var C=m(S),V=!v(function(){var z={};return z[C]=function(){return 7},""[S](z)!=7}),ce=V&&!v(function(){var z=!1,ee=/a/;return S==="split"&&((ee={}).constructor={},ee.constructor[O]=function(){return ee},ee.flags="",ee[C]=/./[C]),ee.exec=function(){return z=!0,null},ee[C](""),!z});if(!V||!ce||j){var _e=c(/./[C]),fe=N(C,""[S],function(z,ee,$,L,Y){var K=c(z),I=ee.exec;return I===h||I===x.exec?V&&!Y?{done:!0,value:_e(ee,$,L)}:{done:!0,value:K($,ee,L)}:{done:!1}});l(String.prototype,S,fe[0]),l(x,C,fe[1])}M&&g(x[C],"sham",!0)}},function(t,s,i){var c=i(146).charAt;t.exports=function(l,h,v){return h+(v?c(l,h).length:1)}},function(t,s,i){var c=i(7),l=i(35),h=i(32),v=i(28),m=i(50),g=i(102),O=c.TypeError;t.exports=function(x,S){var N=x.exec;if(v(N)){var j=l(N,x,S);return j!==null&&h(j),j}if(m(x)==="RegExp")return l(g,x,S);throw O("RegExp#exec called on incompatible receiver")}},function(t,s,i){var c=i(76),l=i(35),h=i(15),v=i(122),m=i(19),g=i(32),O=i(28),x=i(68),S=i(90),N=i(41),j=i(45),M=i(123),C=i(59),V=i(198),ce=i(124),_e=i(27)("replace"),fe=Math.max,z=Math.min,ee=h([].concat),$=h([].push),L=h("".indexOf),Y=h("".slice),K="a".replace(/./,"$0")==="$0",I=!!/./[_e]&&/./[_e]("a","$0")==="";v("replace",function(pe,De,Q){var se=I?"$":"$0";return[function(he,be){var te=j(this),ve=he==null?void 0:C(he,_e);return ve?l(ve,he,te,be):l(De,N(te),he,be)},function(he,be){var te=g(this),ve=N(he);if(typeof be=="string"&&L(be,se)===-1&&L(be,"$<")===-1){var Fe=Q(De,te,ve,be);if(Fe.done)return Fe.value}var Ze=O(be);Ze||(be=N(be));var ht=te.global;if(ht){var Ft=te.unicode;te.lastIndex=0}for(var bt=[];;){var xt=ce(te,ve);if(xt===null||($(bt,xt),!ht))break;N(xt[0])===""&&(te.lastIndex=M(ve,S(te.lastIndex),Ft))}for(var tr,Oe="",oe=0,me=0;me<bt.length;me++){for(var qe=N((xt=bt[me])[0]),gt=fe(z(x(xt.index),ve.length),0),et=[],Ct=1;Ct<xt.length;Ct++)$(et,(tr=xt[Ct])===void 0?tr:String(tr));var zt=xt.groups;if(Ze){var Zt=ee([qe],et,gt,ve);zt!==void 0&&$(Zt,zt);var Gt=N(c(be,void 0,Zt))}else Gt=V(qe,ve,gt,et,zt,be);gt>=oe&&(Oe+=Y(ve,oe,gt)+Gt,oe=gt+qe.length)}return Oe+Y(ve,oe)}]},!!m(function(){var pe=/./;return pe.exec=function(){var De=[];return De.groups={a:"7"},De},"".replace(pe,"$<a>")!=="7"})||!K||I)},function(t,s,i){var c=i(50),l=i(7);t.exports=c(l.process)=="process"},function(t,s,i){i(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(t,s,i){var c=i(109);t.exports=c&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(t,s,i){var c=i(36),l=i(19),h=i(86);t.exports=!c&&!l(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},function(t,s,i){var c=i(7),l=i(35),h=i(33),v=i(88),m=i(59),g=i(170),O=i(27),x=c.TypeError,S=O("toPrimitive");t.exports=function(N,j){if(!h(N)||v(N))return N;var M,C=m(N,S);if(C){if(j===void 0&&(j="default"),M=l(C,N,j),!h(M)||v(M))return M;throw x("Can't convert object to primitive value")}return j===void 0&&(j="number"),g(N,j)}},function(t,s,i){var c=i(15),l=i(34),h=i(40),v=i(132).indexOf,m=i(69),g=c([].push);t.exports=function(O,x){var S,N=h(O),j=0,M=[];for(S in N)!l(m,S)&&l(N,S)&&g(M,S);for(;x.length>j;)l(N,S=x[j++])&&(~v(M,S)||g(M,S));return M}},function(t,s,i){var c=i(40),l=i(67),h=i(43),v=function(m){return function(g,O,x){var S,N=c(g),j=h(N),M=l(x,j);if(m&&O!=O){for(;j>M;)if((S=N[M++])!=S)return!0}else for(;j>M;M++)if((m||M in N)&&N[M]===O)return m||M||0;return!m&&-1}};t.exports={includes:v(!0),indexOf:v(!1)}},function(t,s,i){var c=i(46);t.exports=c("document","documentElement")},function(t,s,i){var c=i(34),l=i(135),h=i(51),v=i(37);t.exports=function(m,g){for(var O=l(g),x=v.f,S=h.f,N=0;N<O.length;N++){var j=O[N];c(m,j)||x(m,j,S(g,j))}}},function(t,s,i){var c=i(46),l=i(15),h=i(72),v=i(112),m=i(32),g=l([].concat);t.exports=c("Reflect","ownKeys")||function(O){var x=h.f(m(O)),S=v.f;return S?g(x,S(O)):x}},function(t,s,i){var c,l,h,v=i(19),m=i(28),g=i(54),O=i(96),x=i(44),S=i(27),N=i(64),j=S("iterator"),M=!1;[].keys&&("next"in(h=[].keys())?(l=O(O(h)))!==Object.prototype&&(c=l):M=!0),c==null||v(function(){var C={};return c[j].call(C)!==C})?c={}:N&&(c=g(c)),m(c[j])||x(c,j,function(){return this}),t.exports={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:M}},function(t,s,i){var c=i(19);t.exports=!c(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},function(t,s,i){var c=i(17),l=i(15),h=i(69),v=i(33),m=i(34),g=i(37).f,O=i(72),x=i(139),S=i(175),N=i(85),j=i(177),M=!1,C=N("meta"),V=0,ce=function(fe){g(fe,C,{value:{objectID:"O"+V++,weakData:{}}})},_e=t.exports={enable:function(){_e.enable=function(){},M=!0;var fe=O.f,z=l([].splice),ee={};ee[C]=1,fe(ee).length&&(O.f=function($){for(var L=fe($),Y=0,K=L.length;Y<K;Y++)if(L[Y]===C){z(L,Y,1);break}return L},c({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},fastKey:function(fe,z){if(!v(fe))return typeof fe=="symbol"?fe:(typeof fe=="string"?"S":"P")+fe;if(!m(fe,C)){if(!S(fe))return"F";if(!z)return"E";ce(fe)}return fe[C].objectID},getWeakData:function(fe,z){if(!m(fe,C)){if(!S(fe))return!0;if(!z)return!1;ce(fe)}return fe[C].weakData},onFreeze:function(fe){return j&&M&&S(fe)&&!m(fe,C)&&ce(fe),fe}};h[C]=!0},function(t,s,i){var c=i(50),l=i(40),h=i(72).f,v=i(113),m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(g){return m&&c(g)=="Window"?function(O){try{return h(O)}catch{return v(m)}}(g):h(l(g))}},function(t,s,i){var c=i(27),l=i(70),h=c("iterator"),v=Array.prototype;t.exports=function(m){return m!==void 0&&(l.Array===m||v[h]===m)}},function(t,s,i){var c=i(7),l=i(35),h=i(55),v=i(32),m=i(89),g=i(115),O=c.TypeError;t.exports=function(x,S){var N=arguments.length<2?g(x):S;if(h(N))return v(l(N,x));throw O(m(x)+" is not iterable")}},function(t,s,i){var c=i(35),l=i(32),h=i(59);t.exports=function(v,m,g){var O,x;l(v);try{if(!(O=h(v,"return"))){if(m==="throw")throw g;return g}O=c(O,v)}catch(S){x=!0,O=S}if(m==="throw")throw g;if(x)throw O;return l(O),g}},function(t,s,i){var c=i(28),l=i(33),h=i(97);t.exports=function(v,m,g){var O,x;return h&&c(O=m.constructor)&&O!==g&&l(x=O.prototype)&&x!==g.prototype&&h(v,x),v}},function(t,s,i){var c=i(44);t.exports=function(l,h,v){for(var m in h)c(l,m,h[m],v);return l}},function(t,s,i){var c=i(46),l=i(37),h=i(27),v=i(36),m=h("species");t.exports=function(g){var O=c(g),x=l.f;v&&O&&!O[m]&&x(O,m,{configurable:!0,get:function(){return this}})}},function(t,s,i){var c=i(15),l=i(68),h=i(41),v=i(45),m=c("".charAt),g=c("".charCodeAt),O=c("".slice),x=function(S){return function(N,j){var M,C,V=h(v(N)),ce=l(j),_e=V.length;return ce<0||ce>=_e?S?"":void 0:(M=g(V,ce))<55296||M>56319||ce+1===_e||(C=g(V,ce+1))<56320||C>57343?S?m(V,ce):M:S?O(V,ce,ce+2):C-56320+(M-55296<<10)+65536}};t.exports={codeAt:x(!1),charAt:x(!0)}},function(t,s){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,s,i){var c=i(86)("span").classList,l=c&&c.constructor&&c.constructor.prototype;t.exports=l===Object.prototype?void 0:l},function(t,s,i){var c=i(27);s.f=c},function(t,s,i){var c=i(182),l=i(34),h=i(149),v=i(37).f;t.exports=function(m){var g=c.Symbol||(c.Symbol={});l(g,m)||v(g,m,{value:h.f(m)})}},function(t,s,i){var c=i(19),l=i(7).RegExp,h=c(function(){var g=l("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),v=h||c(function(){return!l("a","y").sticky}),m=h||c(function(){var g=l("^r","gy");return g.lastIndex=2,g.exec("str")!=null});t.exports={BROKEN_CARET:m,MISSED_STICKY:v,UNSUPPORTED_Y:h}},function(t,s,i){var c=i(17),l=i(132).includes,h=i(83);c({target:"Array",proto:!0},{includes:function(v){return l(this,v,arguments.length>1?arguments[1]:void 0)}}),h("includes")},function(t,s,i){var c=i(17),l=i(15),h=i(194),v=i(45),m=i(41),g=i(195),O=l("".indexOf);c({target:"String",proto:!0,forced:!g("includes")},{includes:function(x){return!!~O(m(v(this)),m(h(x)),arguments.length>1?arguments[1]:void 0)}})},function(t,s,i){var c=i(33),l=i(50),h=i(27)("match");t.exports=function(v){var m;return c(v)&&((m=v[h])!==void 0?!!m:l(v)=="RegExp")}},function(t,s){var i,c,l=t.exports={};function h(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}function m(V){if(i===setTimeout)return setTimeout(V,0);if((i===h||!i)&&setTimeout)return i=setTimeout,setTimeout(V,0);try{return i(V,0)}catch{try{return i.call(null,V,0)}catch{return i.call(this,V,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:h}catch{i=h}try{c=typeof clearTimeout=="function"?clearTimeout:v}catch{c=v}})();var g,O=[],x=!1,S=-1;function N(){x&&g&&(x=!1,g.length?O=g.concat(O):S=-1,O.length&&j())}function j(){if(!x){var V=m(N);x=!0;for(var ce=O.length;ce;){for(g=O,O=[];++S<ce;)g&&g[S].run();S=-1,ce=O.length}g=null,x=!1,function(_e){if(c===clearTimeout)return clearTimeout(_e);if((c===v||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(_e);try{c(_e)}catch{try{return c.call(null,_e)}catch{return c.call(this,_e)}}}(V)}}function M(V,ce){this.fun=V,this.array=ce}function C(){}l.nextTick=function(V){var ce=new Array(arguments.length-1);if(arguments.length>1)for(var _e=1;_e<arguments.length;_e++)ce[_e-1]=arguments[_e];O.push(new M(V,ce)),O.length!==1||x||m(j)},M.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=C,l.addListener=C,l.once=C,l.off=C,l.removeListener=C,l.removeAllListeners=C,l.emit=C,l.prependListener=C,l.prependOnceListener=C,l.listeners=function(V){return[]},l.binding=function(V){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(V){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,s,i){var c=i(32),l=i(157),h=i(27)("species");t.exports=function(v,m){var g,O=c(v).constructor;return O===void 0||(g=c(O)[h])==null?m:l(g)}},function(t,s,i){var c=i(7),l=i(100),h=i(89),v=c.TypeError;t.exports=function(m){if(l(m))return m;throw v(h(m)+" is not a constructor")}},function(t,s,i){var c=i(17),l=i(159).trim;c({target:"String",proto:!0,forced:i(196)("trim")},{trim:function(){return l(this)}})},function(t,s,i){var c=i(15),l=i(45),h=i(41),v=i(160),m=c("".replace),g="["+v+"]",O=RegExp("^"+g+g+"*"),x=RegExp(g+g+"*$"),S=function(N){return function(j){var M=h(l(j));return 1&N&&(M=m(M,O,"")),2&N&&(M=m(M,x,"")),M}};t.exports={start:S(1),end:S(2),trim:S(3)}},function(t,s){t.exports=`	
\v\f\r \u2028\u2029\uFEFF`},function(t,s,i){var c=i(35),l=i(122),h=i(32),v=i(90),m=i(41),g=i(45),O=i(59),x=i(123),S=i(124);l("match",function(N,j,M){return[function(C){var V=g(this),ce=C==null?void 0:O(C,N);return ce?c(ce,C,V):new RegExp(C)[N](m(V))},function(C){var V=h(this),ce=m(C),_e=M(j,V,ce);if(_e.done)return _e.value;if(!V.global)return S(V,ce);var fe=V.unicode;V.lastIndex=0;for(var z,ee=[],$=0;(z=S(V,ce))!==null;){var L=m(z[0]);ee[$]=L,L===""&&(V.lastIndex=x(ce,v(V.lastIndex),fe)),$++}return $===0?null:ee}]})},function(t,s,i){var c=i(17),l=Math.hypot,h=Math.abs,v=Math.sqrt;c({target:"Math",stat:!0,forced:!!l&&l(1/0,NaN)!==1/0},{hypot:function(m,g){for(var O,x,S=0,N=0,j=arguments.length,M=0;N<j;)M<(O=h(arguments[N++]))?(S=S*(x=M/O)*x+1,M=O):S+=O>0?(x=O/M)*x:O;return M===1/0?1/0:M*v(S)}})},function(t,s,i){var c,l,h,v,m=i(7),g=i(76),O=i(62),x=i(28),S=i(34),N=i(19),j=i(133),M=i(101),C=i(86),V=i(164),ce=i(126),_e=m.setImmediate,fe=m.clearImmediate,z=m.process,ee=m.Dispatch,$=m.Function,L=m.MessageChannel,Y=m.String,K=0,I={},pe="onreadystatechange";try{c=m.location}catch{}var De=function(be){if(S(I,be)){var te=I[be];delete I[be],te()}},Q=function(be){return function(){De(be)}},se=function(be){De(be.data)},he=function(be){m.postMessage(Y(be),c.protocol+"//"+c.host)};_e&&fe||(_e=function(be){var te=M(arguments,1);return I[++K]=function(){g(x(be)?be:$(be),void 0,te)},l(K),K},fe=function(be){delete I[be]},ce?l=function(be){z.nextTick(Q(be))}:ee&&ee.now?l=function(be){ee.now(Q(be))}:L&&!V?(v=(h=new L).port2,h.port1.onmessage=se,l=O(v.postMessage,v)):m.addEventListener&&x(m.postMessage)&&!m.importScripts&&c&&c.protocol!=="file:"&&!N(he)?(l=he,m.addEventListener("message",se,!1)):l=pe in C("script")?function(be){j.appendChild(C("script")).onreadystatechange=function(){j.removeChild(this),De(be)}}:function(be){setTimeout(Q(be),0)}),t.exports={set:_e,clear:fe}},function(t,s,i){var c=i(53);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(c)},function(t,s,i){var c=i(55),l=function(h){var v,m;this.promise=new h(function(g,O){if(v!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");v=g,m=O}),this.resolve=c(v),this.reject=c(m)};t.exports.f=function(h){return new l(h)}},function(t,s,i){s.a=function(){return!1}},function(t,s,i){(function(c){i.d(s,"a",function(){return z});var l=i(1);function h(L){throw new Error("[mobx-utils] "+L)}function v(L,Y){Y===void 0&&(Y="Illegal state"),L||h(Y)}var m=function(L){return L&&L!==Object.prototype&&Object.getOwnPropertyNames(L).concat(m(Object.getPrototypeOf(L))||[])},g=function(L){return function(Y){var K=m(Y);return K.filter(function(I,pe){return K.indexOf(I)===pe})}(L).filter(function(Y){return Y!=="constructor"&&!~Y.indexOf("__")})},O="pending",x="fulfilled",S="rejected";function N(L){switch(this.state){case O:return L.pending&&L.pending(this.value);case S:return L.rejected&&L.rejected(this.value);case x:return L.fulfilled?L.fulfilled(this.value):this.value}}function j(L,Y){if(v(arguments.length<=2,"fromPromise expects up to two arguments"),v(typeof L=="function"||typeof L=="object"&&L&&typeof L.then=="function","Please pass a promise or function to fromPromise"),L.isPromiseBasedObservable===!0)return L;typeof L=="function"&&(L=new Promise(L));var K=L;L.then(Object(l.k)("observableFromPromise-resolve",function(pe){K.value=pe,K.state=x}),Object(l.k)("observableFromPromise-reject",function(pe){K.value=pe,K.state=S})),K.isPromiseBasedObservable=!0,K.case=N;var I=Y&&Y.state===x?Y.value:void 0;return Object(l.q)(K,{value:I,state:O},{},{deep:!1}),K}(function(L){L.reject=Object(l.k)("fromPromise.reject",function(Y){var K=L(Promise.reject(Y));return K.state=S,K.value=Y,K}),L.resolve=Object(l.k)("fromPromise.resolve",function(Y){Y===void 0&&(Y=void 0);var K=L(Promise.resolve(Y));return K.state=x,K.value=Y,K})})(j||(j={}));var M=function(L,Y,K,I){var pe,De=arguments.length,Q=De<3?Y:I===null?I=Object.getOwnPropertyDescriptor(Y,K):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(L,Y,K,I);else for(var se=L.length-1;se>=0;se--)(pe=L[se])&&(Q=(De<3?pe(Q):De>3?pe(Y,K,Q):pe(Y,K))||Q);return De>3&&Q&&Object.defineProperty(Y,K,Q),Q};(function(){function L(Y,K){var I=this;Object(l.G)(function(){I.current=K,I.subscription=Y.subscribe(I)})}L.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},L.prototype.next=function(Y){this.current=Y},L.prototype.complete=function(){this.dispose()},L.prototype.error=function(Y){this.current=Y,this.dispose()},M([l.C.ref],L.prototype,"current",void 0),M([l.k.bound],L.prototype,"next",null),M([l.k.bound],L.prototype,"complete",null),M([l.k.bound],L.prototype,"error",null)})();var C=function(){return C=Object.assign||function(L){for(var Y,K=1,I=arguments.length;K<I;K++)for(var pe in Y=arguments[K])Object.prototype.hasOwnProperty.call(Y,pe)&&(L[pe]=Y[pe]);return L},C.apply(this,arguments)},V=function(L,Y,K,I){var pe,De=arguments.length,Q=De<3?Y:I===null?I=Object.getOwnPropertyDescriptor(Y,K):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(L,Y,K,I);else for(var se=L.length-1;se>=0;se--)(pe=L[se])&&(Q=(De<3?pe(Q):De>3?pe(Y,K,Q):pe(Y,K))||Q);return De>3&&Q&&Object.defineProperty(Y,K,Q),Q},ce=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function L(Y){var K=this;this.model=Y,this.localValues=l.C.map({}),this.localComputedValues=l.C.map({}),this.isPropertyDirty=function(I){return K.localValues.has(I)},v(Object(l.A)(Y),"createViewModel expects an observable object"),g(Y).forEach(function(I){if(I!==l.a&&I!=="__mobxDidRunLazyInitializers"){if(v(ce.indexOf(I)===-1,"The propertyname "+I+" is reserved and cannot be used with viewModels"),Object(l.w)(Y,I)){var pe=Object(l.h)(Y,I).derivation;K.localComputedValues.set(I,Object(l.m)(pe.bind(K)))}var De=Object.getOwnPropertyDescriptor(Y,I),Q=De?{enumerable:De.enumerable}:{};Object.defineProperty(K,I,C(C({},Q),{configurable:!0,get:function(){return Object(l.w)(Y,I)?K.localComputedValues.get(I).get():K.isPropertyDirty(I)?K.localValues.get(I):K.model[I]},set:Object(l.k)(function(se){se!==K.model[I]?K.localValues.set(I,se):K.localValues.delete(I)})}))}})}Object.defineProperty(L.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),L.prototype.submit=function(){var Y=this;Object(l.B)(this.localValues).forEach(function(K){var I=Y.localValues.get(K),pe=Y.model[K];Object(l.y)(pe)?pe.replace(I):Object(l.z)(pe)?(pe.clear(),pe.merge(I)):Object(l.v)(I)||(Y.model[K]=I)}),this.localValues.clear()},L.prototype.reset=function(){this.localValues.clear()},L.prototype.resetProperty=function(Y){this.localValues.delete(Y)},V([l.m],L.prototype,"isDirty",null),V([l.m],L.prototype,"changedValues",null),V([l.k.bound],L.prototype,"submit",null),V([l.k.bound],L.prototype,"reset",null),V([l.k.bound],L.prototype,"resetProperty",null)})();function _e(L){if(!L)return"ROOT";for(var Y=[];L.parent;)Y.push(L.path),L=L.parent;return Y.reverse().join("/")}function fe(L){return Object(l.A)(L)||Object(l.y)(L)||Object(l.z)(L)}function z(L,Y){var K=new WeakMap;function I(Q){var se=K.get(Q.object);(function(he,be){switch(he.type){case"add":pe(he.newValue,be,he.name);break;case"update":De(he.oldValue),pe(he.newValue,be,he.name||""+he.index);break;case"remove":case"delete":De(he.oldValue);break;case"splice":he.removed.map(De),he.added.forEach(function(Fe,Ze){return pe(Fe,be,""+(he.index+Ze))});for(var te=he.index+he.addedCount;te<he.object.length;te++)if(fe(he.object[te])){var ve=K.get(he.object[te]);ve&&(ve.path=""+te)}}})(Q,se),Y(Q,_e(se),L)}function pe(Q,se,he){if(fe(Q)){var be=K.get(Q);if(be){if(be.parent!==se||be.path!==he)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+_e(se)+"/"+he+"', but it already exists at '"+_e(be.parent)+"/"+be.path+"'")}else{var te={parent:se,path:he,dispose:Object(l.D)(Q,I)};K.set(Q,te),Object(l.p)(Q).forEach(function(ve){var Fe=ve[0];return pe(ve[1],te,Fe)})}}}function De(Q){if(fe(Q)){var se=K.get(Q);if(!se)return;K.delete(Q),se.dispose(),Object(l.L)(Q).forEach(De)}}return pe(L,void 0,""),function(){De(L)}}var ee,$=(ee=function(L,Y){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,I){K.__proto__=I}||function(K,I){for(var pe in I)I.hasOwnProperty(pe)&&(K[pe]=I[pe])},ee(L,Y)},function(L,Y){function K(){this.constructor=L}ee(L,Y),L.prototype=Y===null?Object.create(Y):(K.prototype=Y.prototype,new K)});(function(L){function Y(K,I,pe){var De=pe===void 0?{}:pe,Q=De.name,se=Q===void 0?"ogm"+(1e3*Math.random()|0):Q,he=De.keyToName,be=he===void 0?function(Fe){return""+Fe}:he,te=L.call(this)||this;te._keyToName=be,te._groupBy=I,te._ogmInfoKey=Symbol("ogmInfo"+se),te._base=K;for(var ve=0;ve<K.length;ve++)te._addItem(K[ve]);return te._disposeBaseObserver=Object(l.D)(te._base,function(Fe){if(Fe.type==="splice")Object(l.J)(function(){for(var Ze=0,ht=Fe.removed;Ze<ht.length;Ze++){var Ft=ht[Ze];te._removeItem(Ft)}for(var bt=0,xt=Fe.added;bt<xt.length;bt++){var tr=xt[bt];te._addItem(tr)}});else{if(Fe.type!=="update")throw new Error("illegal state");Object(l.J)(function(){te._removeItem(Fe.oldValue),te._addItem(Fe.newValue)})}}),te}$(Y,L),Y.prototype.clear=function(){throw new Error("not supported")},Y.prototype.delete=function(K){throw new Error("not supported")},Y.prototype.set=function(K,I){throw new Error("not supported")},Y.prototype.dispose=function(){this._disposeBaseObserver();for(var K=0;K<this._base.length;K++){var I=this._base[K];I[this._ogmInfoKey].reaction(),delete I[this._ogmInfoKey]}},Y.prototype._getGroupArr=function(K){var I=L.prototype.get.call(this,K);return I===void 0&&(I=Object(l.C)([],{name:"GroupArray["+this._keyToName(K)+"]",deep:!1}),L.prototype.set.call(this,K,I)),I},Y.prototype._removeFromGroupArr=function(K,I){var pe=L.prototype.get.call(this,K);pe.length===1?L.prototype.delete.call(this,K):(I===pe.length-1||(pe[I]=pe[pe.length-1],pe[I][this._ogmInfoKey].groupArrIndex=I),pe.length--)},Y.prototype._addItem=function(K){var I=this,pe=this._groupBy(K),De=this._getGroupArr(pe),Q={groupByValue:pe,groupArrIndex:De.length,reaction:Object(l.F)(function(){return I._groupBy(K)},function(se,he){var be=K[I._ogmInfoKey];I._removeFromGroupArr(be.groupByValue,be.groupArrIndex);var te=I._getGroupArr(se),ve=te.length;te.push(K),be.groupByValue=se,be.groupArrIndex=ve})};Object.defineProperty(K,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:Q}),De.push(K)},Y.prototype._removeItem=function(K){var I=K[this._ogmInfoKey];this._removeFromGroupArr(I.groupByValue,I.groupArrIndex),I.reaction(),delete K[this._ogmInfoKey]}})(l.b),function(){function L(Y,K){this.base=Y,this.args=K,this.closestIdx=0,this.isDisposed=!1;for(var I=this.closest=this.root=Y,pe=0;pe<this.args.length-1&&(I=I.get(K[pe]));pe++)this.closest=I;this.closestIdx=pe}return L.prototype.exists=function(){this.assertNotDisposed();var Y=this.args.length;return this.closestIdx>=Y-1&&this.closest.has(this.args[Y-1])},L.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},L.prototype.set=function(Y){this.assertNotDisposed();for(var K=this.args.length,I=this.closest,pe=this.closestIdx;pe<K-1;pe++){var De=new Map;I.set(this.args[pe],De),I=De}this.closestIdx=K-1,this.closest=I,I.set(this.args[K-1],Y)},L.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var Y=this.args.length;this.closest.delete(this.args[Y-1]);for(var K=this.root,I=[K],pe=0;pe<Y-1;pe++)K=K.get(this.args[pe]),I.push(K);for(pe=I.length-1;pe>0;pe--)I[pe].size===0&&I[pe-1].delete(this.args[pe-1]);this.isDisposed=!0},L.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},L}(),Promise.resolve(),typeof queueMicrotask<"u"||c!==void 0&&c.nextTick}).call(this,i(155))},function(t,s,i){var c;(function(l,h,v){if(l){for(var m,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},O={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},N=1;N<20;++N)g[111+N]="f"+N;for(N=0;N<=9;++N)g[N+96]=N.toString();fe.prototype.bind=function(z,ee,$){var L=this;return z=z instanceof Array?z:[z],L._bindMultiple.call(L,z,ee,$),L},fe.prototype.unbind=function(z,ee){return this.bind.call(this,z,function(){},ee)},fe.prototype.trigger=function(z,ee){var $=this;return $._directMap[z+":"+ee]&&$._directMap[z+":"+ee]({},z),$},fe.prototype.reset=function(){var z=this;return z._callbacks={},z._directMap={},z},fe.prototype.stopCallback=function(z,ee){if((" "+ee.className+" ").indexOf(" mousetrap ")>-1||_e(ee,this.target))return!1;if("composedPath"in z&&typeof z.composedPath=="function"){var $=z.composedPath()[0];$!==z.target&&(ee=$)}return ee.tagName=="INPUT"||ee.tagName=="SELECT"||ee.tagName=="TEXTAREA"||ee.isContentEditable},fe.prototype.handleKey=function(){var z=this;return z._handleKey.apply(z,arguments)},fe.addKeycodes=function(z){for(var ee in z)z.hasOwnProperty(ee)&&(g[ee]=z[ee]);m=null},fe.init=function(){var z=fe(h);for(var ee in z)ee.charAt(0)!=="_"&&(fe[ee]=function($){return function(){return z[$].apply(z,arguments)}}(ee))},fe.init(),l.Mousetrap=fe,t.exports&&(t.exports=fe),(c=function(){return fe}.call(s,i,s,t))===void 0||(t.exports=c)}function j(z,ee,$){z.addEventListener?z.addEventListener(ee,$,!1):z.attachEvent("on"+ee,$)}function M(z){if(z.type=="keypress"){var ee=String.fromCharCode(z.which);return z.shiftKey||(ee=ee.toLowerCase()),ee}return g[z.which]?g[z.which]:O[z.which]?O[z.which]:String.fromCharCode(z.which).toLowerCase()}function C(z){return z=="shift"||z=="ctrl"||z=="alt"||z=="meta"}function V(z,ee,$){return $||($=function(){if(!m)for(var L in m={},g)L>95&&L<112||g.hasOwnProperty(L)&&(m[g[L]]=L);return m}()[z]?"keydown":"keypress"),$=="keypress"&&ee.length&&($="keydown"),$}function ce(z,ee){var $,L,Y,K=[];for($=function(I){return I==="+"?["+"]:(I=I.replace(/\+{2}/g,"+plus")).split("+")}(z),Y=0;Y<$.length;++Y)L=$[Y],S[L]&&(L=S[L]),ee&&ee!="keypress"&&x[L]&&(L=x[L],K.push("shift")),C(L)&&K.push(L);return{key:L,modifiers:K,action:ee=V(L,K,ee)}}function _e(z,ee){return z!==null&&z!==h&&(z===ee||_e(z.parentNode,ee))}function fe(z){var ee=this;if(z=z||h,!(ee instanceof fe))return new fe(z);ee.target=z,ee._callbacks={},ee._directMap={};var $,L={},Y=!1,K=!1,I=!1;function pe(te){te=te||{};var ve,Fe=!1;for(ve in L)te[ve]?Fe=!0:L[ve]=0;Fe||(I=!1)}function De(te,ve,Fe,Ze,ht,Ft){var bt,xt,tr,Oe,oe=[],me=Fe.type;if(!ee._callbacks[te])return[];for(me=="keyup"&&C(te)&&(ve=[te]),bt=0;bt<ee._callbacks[te].length;++bt)if(xt=ee._callbacks[te][bt],(Ze||!xt.seq||L[xt.seq]==xt.level)&&me==xt.action&&(me=="keypress"&&!Fe.metaKey&&!Fe.ctrlKey||(tr=ve,Oe=xt.modifiers,tr.sort().join(",")===Oe.sort().join(",")))){var qe=!Ze&&xt.combo==ht,gt=Ze&&xt.seq==Ze&&xt.level==Ft;(qe||gt)&&ee._callbacks[te].splice(bt,1),oe.push(xt)}return oe}function Q(te,ve,Fe,Ze){ee.stopCallback(ve,ve.target||ve.srcElement,Fe,Ze)||te(ve,Fe)===!1&&(function(ht){ht.preventDefault?ht.preventDefault():ht.returnValue=!1}(ve),function(ht){ht.stopPropagation?ht.stopPropagation():ht.cancelBubble=!0}(ve))}function se(te){typeof te.which!="number"&&(te.which=te.keyCode);var ve=M(te);ve&&(te.type!="keyup"||Y!==ve?ee.handleKey(ve,function(Fe){var Ze=[];return Fe.shiftKey&&Ze.push("shift"),Fe.altKey&&Ze.push("alt"),Fe.ctrlKey&&Ze.push("ctrl"),Fe.metaKey&&Ze.push("meta"),Ze}(te),te):Y=!1)}function he(te,ve,Fe,Ze){function ht(tr){return function(){I=tr,++L[te],clearTimeout($),$=setTimeout(pe,1e3)}}function Ft(tr){Q(Fe,tr,te),Ze!=="keyup"&&(Y=M(tr)),setTimeout(pe,10)}L[te]=0;for(var bt=0;bt<ve.length;++bt){var xt=bt+1===ve.length?Ft:ht(Ze||ce(ve[bt+1]).action);be(ve[bt],xt,Ze,te,bt)}}function be(te,ve,Fe,Ze,ht){ee._directMap[te+":"+Fe]=ve;var Ft,bt=(te=te.replace(/\s+/g," ")).split(" ");bt.length>1?he(te,bt,ve,Fe):(Ft=ce(te,Fe),ee._callbacks[Ft.key]=ee._callbacks[Ft.key]||[],De(Ft.key,Ft.modifiers,{type:Ft.action},Ze,te,ht),ee._callbacks[Ft.key][Ze?"unshift":"push"]({callback:ve,modifiers:Ft.modifiers,action:Ft.action,seq:Ze,level:ht,combo:te}))}ee._handleKey=function(te,ve,Fe){var Ze,ht=De(te,ve,Fe),Ft={},bt=0,xt=!1;for(Ze=0;Ze<ht.length;++Ze)ht[Ze].seq&&(bt=Math.max(bt,ht[Ze].level));for(Ze=0;Ze<ht.length;++Ze)if(ht[Ze].seq){if(ht[Ze].level!=bt)continue;xt=!0,Ft[ht[Ze].seq]=1,Q(ht[Ze].callback,Fe,ht[Ze].combo,ht[Ze].seq)}else xt||Q(ht[Ze].callback,Fe,ht[Ze].combo);var tr=Fe.type=="keypress"&&K;Fe.type!=I||C(te)||tr||pe(Ft),K=xt&&Fe.type=="keydown"},ee._bindMultiple=function(te,ve,Fe){for(var Ze=0;Ze<te.length;++Ze)be(te[Ze],ve,Fe)},j(z,"keypress",se),j(z,"keydown",se),j(z,"keyup",se)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(t,s,i){var c=i(36),l=i(37),h=i(32),v=i(40),m=i(66);t.exports=c?Object.defineProperties:function(g,O){h(g);for(var x,S=v(O),N=m(O),j=N.length,M=0;j>M;)l.f(g,x=N[M++],S[x]);return g}},function(t,s,i){var c=i(7),l=i(35),h=i(28),v=i(33),m=c.TypeError;t.exports=function(g,O){var x,S;if(O==="string"&&h(x=g.toString)&&!v(S=l(x,g))||h(x=g.valueOf)&&!v(S=l(x,g))||O!=="string"&&h(x=g.toString)&&!v(S=l(x,g)))return S;throw m("Can't convert object to primitive value")}},function(t,s,i){var c=i(7),l=i(28),h=i(92),v=c.WeakMap;t.exports=l(v)&&/native code/.test(h(v))},function(t,s,i){var c=i(136).IteratorPrototype,l=i(54),h=i(71),v=i(73),m=i(70),g=function(){return this};t.exports=function(O,x,S,N){var j=x+" Iterator";return O.prototype=l(c,{next:h(+!N,S)}),v(O,j,!1,!0),m[j]=g,O}},function(t,s,i){var c=i(7),l=i(28),h=c.String,v=c.TypeError;t.exports=function(m){if(typeof m=="object"||l(m))return m;throw v("Can't set "+h(m)+" as a prototype")}},function(t,s,i){var c=i(17),l=i(7),h=i(15),v=i(95),m=i(44),g=i(138),O=i(114),x=i(117),S=i(28),N=i(33),j=i(19),M=i(118),C=i(73),V=i(143);t.exports=function(ce,_e,fe){var z=ce.indexOf("Map")!==-1,ee=ce.indexOf("Weak")!==-1,$=z?"set":"add",L=l[ce],Y=L&&L.prototype,K=L,I={},pe=function(te){var ve=h(Y[te]);m(Y,te,te=="add"?function(Fe){return ve(this,Fe===0?0:Fe),this}:te=="delete"?function(Fe){return!(ee&&!N(Fe))&&ve(this,Fe===0?0:Fe)}:te=="get"?function(Fe){return ee&&!N(Fe)?void 0:ve(this,Fe===0?0:Fe)}:te=="has"?function(Fe){return!(ee&&!N(Fe))&&ve(this,Fe===0?0:Fe)}:function(Fe,Ze){return ve(this,Fe===0?0:Fe,Ze),this})};if(v(ce,!S(L)||!(ee||Y.forEach&&!j(function(){new L().entries().next()}))))K=fe.getConstructor(_e,ce,z,$),g.enable();else if(v(ce,!0)){var De=new K,Q=De[$](ee?{}:-0,1)!=De,se=j(function(){De.has(1)}),he=M(function(te){new L(te)}),be=!ee&&j(function(){for(var te=new L,ve=5;ve--;)te[$](ve,ve);return!te.has(-0)});he||((K=_e(function(te,ve){x(te,Y);var Fe=V(new L,te,K);return ve!=null&&O(ve,Fe[$],{that:Fe,AS_ENTRIES:z}),Fe})).prototype=Y,Y.constructor=K),(se||be)&&(pe("delete"),pe("has"),z&&pe("get")),(be||Q)&&pe($),ee&&Y.clear&&delete Y.clear}return I[ce]=K,c({global:!0,forced:K!=L},I),C(K,ce),ee||fe.setStrong(K,ce,z),K}},function(t,s,i){var c=i(19),l=i(33),h=i(50),v=i(176),m=Object.isExtensible,g=c(function(){});t.exports=g||v?function(O){return!!l(O)&&(!v||h(O)!="ArrayBuffer")&&(!m||m(O))}:m},function(t,s,i){var c=i(19);t.exports=c(function(){if(typeof ArrayBuffer=="function"){var l=new ArrayBuffer(8);Object.isExtensible(l)&&Object.defineProperty(l,"a",{value:8})}})},function(t,s,i){var c=i(19);t.exports=!c(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(t,s,i){var c=i(37).f,l=i(54),h=i(144),v=i(62),m=i(117),g=i(114),O=i(111),x=i(145),S=i(36),N=i(138).fastKey,j=i(56),M=j.set,C=j.getterFor;t.exports={getConstructor:function(V,ce,_e,fe){var z=V(function(K,I){m(K,ee),M(K,{type:ce,index:l(null),first:void 0,last:void 0,size:0}),S||(K.size=0),I!=null&&g(I,K[fe],{that:K,AS_ENTRIES:_e})}),ee=z.prototype,$=C(ce),L=function(K,I,pe){var De,Q,se=$(K),he=Y(K,I);return he?he.value=pe:(se.last=he={index:Q=N(I,!0),key:I,value:pe,previous:De=se.last,next:void 0,removed:!1},se.first||(se.first=he),De&&(De.next=he),S?se.size++:K.size++,Q!=="F"&&(se.index[Q]=he)),K},Y=function(K,I){var pe,De=$(K),Q=N(I);if(Q!=="F")return De.index[Q];for(pe=De.first;pe;pe=pe.next)if(pe.key==I)return pe};return h(ee,{clear:function(){for(var K=$(this),I=K.index,pe=K.first;pe;)pe.removed=!0,pe.previous&&(pe.previous=pe.previous.next=void 0),delete I[pe.index],pe=pe.next;K.first=K.last=void 0,S?K.size=0:this.size=0},delete:function(K){var I=this,pe=$(I),De=Y(I,K);if(De){var Q=De.next,se=De.previous;delete pe.index[De.index],De.removed=!0,se&&(se.next=Q),Q&&(Q.previous=se),pe.first==De&&(pe.first=Q),pe.last==De&&(pe.last=se),S?pe.size--:I.size--}return!!De},forEach:function(K){for(var I,pe=$(this),De=v(K,arguments.length>1?arguments[1]:void 0);I=I?I.next:pe.first;)for(De(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(K){return!!Y(this,K)}}),h(ee,_e?{get:function(K){var I=Y(this,K);return I&&I.value},set:function(K,I){return L(this,K===0?0:K,I)}}:{add:function(K){return L(this,K=K===0?0:K,K)}}),S&&c(ee,"size",{get:function(){return $(this).size}}),z},setStrong:function(V,ce,_e){var fe=ce+" Iterator",z=C(ce),ee=C(fe);O(V,ce,function($,L){M(this,{type:fe,target:$,state:z($),kind:L,last:void 0})},function(){for(var $=ee(this),L=$.kind,Y=$.last;Y&&Y.removed;)Y=Y.previous;return $.target&&($.last=Y=Y?Y.next:$.state.first)?L=="keys"?{value:Y.key,done:!1}:L=="values"?{value:Y.value,done:!1}:{value:[Y.key,Y.value],done:!1}:($.target=void 0,{value:void 0,done:!0})},_e?"entries":"values",!_e,!0),x(ce)}}},function(t,s,i){var c=i(116),l=i(98);t.exports=c?{}.toString:function(){return"[object "+l(this)+"]"}},function(t,s,i){var c=i(74).forEach,l=i(120)("forEach");t.exports=l?[].forEach:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}},function(t,s,i){var c=i(7),l=i(99),h=i(100),v=i(33),m=i(27)("species"),g=c.Array;t.exports=function(O){var x;return l(O)&&(x=O.constructor,(h(x)&&(x===g||l(x.prototype))||v(x)&&(x=x[m])===null)&&(x=void 0)),x===void 0?g:x}},function(t,s,i){var c=i(7);t.exports=c},function(t,s,i){var c=i(7),l=i(62),h=i(35),v=i(38),m=i(184),g=i(140),O=i(100),x=i(43),S=i(61),N=i(141),j=i(115),M=c.Array;t.exports=function(C){var V=v(C),ce=O(this),_e=arguments.length,fe=_e>1?arguments[1]:void 0,z=fe!==void 0;z&&(fe=l(fe,_e>2?arguments[2]:void 0));var ee,$,L,Y,K,I,pe=j(V),De=0;if(!pe||this==M&&g(pe))for(ee=x(V),$=ce?new this(ee):M(ee);ee>De;De++)I=z?fe(V[De],De):V[De],S($,De,I);else for(K=(Y=N(V,pe)).next,$=ce?new this:[];!(L=h(K,Y)).done;De++)I=z?m(Y,fe,[L.value,De],!0):L.value,S($,De,I);return $.length=De,$}},function(t,s,i){var c=i(32),l=i(142);t.exports=function(h,v,m,g){try{return g?v(c(m)[0],m[1]):v(m)}catch(O){l(h,"throw",O)}}},function(t,s,i){var c=i(32);t.exports=function(){var l=c(this),h="";return l.global&&(h+="g"),l.ignoreCase&&(h+="i"),l.multiline&&(h+="m"),l.dotAll&&(h+="s"),l.unicode&&(h+="u"),l.sticky&&(h+="y"),h}},function(t,s,i){var c=i(19),l=i(7).RegExp;t.exports=c(function(){var h=l(".","s");return!(h.dotAll&&h.exec(`
`)&&h.flags==="s")})},function(t,s,i){var c=i(19),l=i(7).RegExp;t.exports=c(function(){var h=l("(?<a>b)","g");return h.exec("b").groups.a!=="b"||"b".replace(h,"$<a>c")!=="bc"})},function(t,s,i){var c=i(17),l=i(15),h=i(55),v=i(38),m=i(43),g=i(41),O=i(19),x=i(189),S=i(120),N=i(190),j=i(191),M=i(65),C=i(192),V=[],ce=l(V.sort),_e=l(V.push),fe=O(function(){V.sort(void 0)}),z=O(function(){V.sort(null)}),ee=S("sort"),$=!O(function(){if(M)return M<70;if(!(N&&N>3)){if(j)return!0;if(C)return C<603;var L,Y,K,I,pe="";for(L=65;L<76;L++){switch(Y=String.fromCharCode(L),L){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(I=0;I<47;I++)V.push({k:Y+I,v:K})}for(V.sort(function(De,Q){return Q.v-De.v}),I=0;I<V.length;I++)Y=V[I].k.charAt(0),pe.charAt(pe.length-1)!==Y&&(pe+=Y);return pe!=="DGBEFHACIJK"}});c({target:"Array",proto:!0,forced:fe||!z||!ee||!$},{sort:function(L){L!==void 0&&h(L);var Y=v(this);if($)return L===void 0?ce(Y):ce(Y,L);var K,I,pe=[],De=m(Y);for(I=0;I<De;I++)I in Y&&_e(pe,Y[I]);for(x(pe,function(Q){return function(se,he){return he===void 0?-1:se===void 0?1:Q!==void 0?+Q(se,he)||0:g(se)>g(he)?1:-1}}(L)),K=pe.length,I=0;I<K;)Y[I]=pe[I++];for(;I<De;)delete Y[I++];return Y}})},function(t,s,i){var c=i(113),l=Math.floor,h=function(g,O){var x=g.length,S=l(x/2);return x<8?v(g,O):m(g,h(c(g,0,S),O),h(c(g,S),O),O)},v=function(g,O){for(var x,S,N=g.length,j=1;j<N;){for(S=j,x=g[j];S&&O(g[S-1],x)>0;)g[S]=g[--S];S!==j++&&(g[S]=x)}return g},m=function(g,O,x,S){for(var N=O.length,j=x.length,M=0,C=0;M<N||C<j;)g[M+C]=M<N&&C<j?S(O[M],x[C])<=0?O[M++]:x[C++]:M<N?O[M++]:x[C++];return g};t.exports=h},function(t,s,i){var c=i(53).match(/firefox\/(\d+)/i);t.exports=!!c&&+c[1]},function(t,s,i){var c=i(53);t.exports=/MSIE|Trident/.test(c)},function(t,s,i){var c=i(53).match(/AppleWebKit\/(\d+)\./);t.exports=!!c&&+c[1]},function(t,s,i){var c=i(17),l=i(74).find,h=i(83),v="find",m=!0;v in[]&&Array(1).find(function(){m=!1}),c({target:"Array",proto:!0,forced:m},{find:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),h(v)},function(t,s,i){var c=i(7),l=i(154),h=c.TypeError;t.exports=function(v){if(l(v))throw h("The method doesn't accept regular expressions");return v}},function(t,s,i){var c=i(27)("match");t.exports=function(l){var h=/./;try{"/./"[l](h)}catch{try{return h[c]=!1,"/./"[l](h)}catch{}}return!1}},function(t,s,i){var c=i(94).PROPER,l=i(19),h=i(160);t.exports=function(v){return l(function(){return!!h[v]()||""[v]()!==""||c&&h[v].name!==v})}},function(t,s,i){var c=i(15);t.exports=c(1 .valueOf)},function(t,s,i){var c=i(15),l=i(38),h=Math.floor,v=c("".charAt),m=c("".replace),g=c("".slice),O=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;t.exports=function(S,N,j,M,C,V){var ce=j+S.length,_e=M.length,fe=x;return C!==void 0&&(C=l(C),fe=O),m(V,fe,function(z,ee){var $;switch(v(ee,0)){case"$":return"$";case"&":return S;case"`":return g(N,0,j);case"'":return g(N,ce);case"<":$=C[g(ee,1,-1)];break;default:var L=+ee;if(L===0)return z;if(L>_e){var Y=h(L/10);return Y===0?z:Y<=_e?M[Y-1]===void 0?v(ee,1):M[Y-1]+v(ee,1):z}$=M[L-1]}return $===void 0?"":$})}},function(t,s,i){var c=i(36),l=i(15),h=i(35),v=i(19),m=i(66),g=i(112),O=i(93),x=i(38),S=i(81),N=Object.assign,j=Object.defineProperty,M=l([].concat);t.exports=!N||v(function(){if(c&&N({b:1},N(j({},"a",{enumerable:!0,get:function(){j(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var C={},V={},ce=Symbol(),_e="abcdefghijklmnopqrst";return C[ce]=7,_e.split("").forEach(function(fe){V[fe]=fe}),N({},C)[ce]!=7||m(N({},V)).join("")!=_e})?function(C,V){for(var ce=x(C),_e=arguments.length,fe=1,z=g.f,ee=O.f;_e>fe;)for(var $,L=S(arguments[fe++]),Y=z?M(m(L),z(L)):m(L),K=Y.length,I=0;K>I;)$=Y[I++],c&&!h(ee,L,$)||(ce[$]=L[$]);return ce}:N},function(t,s,i){var c=i(7),l=i(15),h=i(55),v=i(33),m=i(34),g=i(101),O=c.Function,x=l([].concat),S=l([].join),N={},j=function(M,C,V){if(!m(N,C)){for(var ce=[],_e=0;_e<C;_e++)ce[_e]="a["+_e+"]";N[C]=O("C,a","return new C("+S(ce,",")+")")}return N[C](M,V)};t.exports=O.bind||function(M){var C=h(this),V=C.prototype,ce=g(arguments,1),_e=function(){var fe=x(ce,g(arguments));return this instanceof _e?j(C,fe.length,fe):C.apply(M,fe)};return v(V)&&(_e.prototype=V),_e}},function(t,s,i){var c=i(34);t.exports=function(l){return l!==void 0&&(c(l,"value")||c(l,"writable"))}},function(t,s,i){var c=i(15),l=i(45),h=i(41),v=/"/g,m=c("".replace);t.exports=function(g,O,x,S){var N=h(l(g)),j="<"+O;return x!==""&&(j+=" "+x+'="'+m(h(S),v,"&quot;")+'"'),j+">"+N+"</"+O+">"}},function(t,s,i){var c=i(19);t.exports=function(l){return c(function(){var h=""[l]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},function(t,s,i){var c,l,h,v,m=i(17),g=i(64),O=i(7),x=i(46),S=i(35),N=i(205),j=i(44),M=i(144),C=i(97),V=i(73),ce=i(145),_e=i(55),fe=i(28),z=i(33),ee=i(117),$=i(92),L=i(114),Y=i(118),K=i(156),I=i(163).set,pe=i(206),De=i(209),Q=i(210),se=i(165),he=i(211),be=i(56),te=i(95),ve=i(27),Fe=i(212),Ze=i(126),ht=i(65),Ft=ve("species"),bt="Promise",xt=be.getterFor(bt),tr=be.set,Oe=be.getterFor(bt),oe=N&&N.prototype,me=N,qe=oe,gt=O.TypeError,et=O.document,Ct=O.process,zt=se.f,Zt=zt,Gt=!!(et&&et.createEvent&&O.dispatchEvent),ze=fe(O.PromiseRejectionEvent),Wt="unhandledrejection",xe=!1,Ht=te(bt,function(){var de=$(me),Be=de!==String(me);if(!Be&&ht===66||g&&!qe.finally)return!0;if(ht>=51&&/native code/.test(de))return!1;var Nt=new me(function(Kt){Kt(1)}),Ot=function(Kt){Kt(function(){},function(){})};return(Nt.constructor={})[Ft]=Ot,!(xe=Nt.then(function(){})instanceof Ot)||!Be&&Fe&&!ze}),yr=Ht||!Y(function(de){me.all(de).catch(function(){})}),G=function(de){var Be;return!(!z(de)||!fe(Be=de.then))&&Be},pr=function(de,Be){if(!de.notified){de.notified=!0;var Nt=de.reactions;pe(function(){for(var Ot=de.value,Kt=de.state==1,Tr=0;Nt.length>Tr;){var xn,Fn,hn,En=Nt[Tr++],Xt=Kt?En.ok:En.fail,or=En.resolve,dr=En.reject,gr=En.domain;try{Xt?(Kt||(de.rejection===2&&sr(de),de.rejection=1),Xt===!0?xn=Ot:(gr&&gr.enter(),xn=Xt(Ot),gr&&(gr.exit(),hn=!0)),xn===En.promise?dr(gt("Promise-chain cycle")):(Fn=G(xn))?S(Fn,xn,or,dr):or(xn)):dr(Ot)}catch(Xr){gr&&!hn&&gr.exit(),dr(Xr)}}de.reactions=[],de.notified=!1,Be&&!de.rejection&&Yr(de)})}},Dr=function(de,Be,Nt){var Ot,Kt;Gt?((Ot=et.createEvent("Event")).promise=Be,Ot.reason=Nt,Ot.initEvent(de,!1,!0),O.dispatchEvent(Ot)):Ot={promise:Be,reason:Nt},!ze&&(Kt=O["on"+de])?Kt(Ot):de===Wt&&Q("Unhandled promise rejection",Nt)},Yr=function(de){S(I,O,function(){var Be,Nt=de.facade,Ot=de.value;if(Zr(de)&&(Be=he(function(){Ze?Ct.emit("unhandledRejection",Ot,Nt):Dr(Wt,Nt,Ot)}),de.rejection=Ze||Zr(de)?2:1,Be.error))throw Be.value})},Zr=function(de){return de.rejection!==1&&!de.parent},sr=function(de){S(I,O,function(){var Be=de.facade;Ze?Ct.emit("rejectionHandled",Be):Dr("rejectionhandled",Be,de.value)})},sn=function(de,Be,Nt){return function(Ot){de(Be,Ot,Nt)}},re=function(de,Be,Nt){de.done||(de.done=!0,Nt&&(de=Nt),de.value=Be,de.state=2,pr(de,!0))},Ne=function(de,Be,Nt){if(!de.done){de.done=!0,Nt&&(de=Nt);try{if(de.facade===Be)throw gt("Promise can't be resolved itself");var Ot=G(Be);Ot?pe(function(){var Kt={done:!1};try{S(Ot,Be,sn(Ne,Kt,de),sn(re,Kt,de))}catch(Tr){re(Kt,Tr,de)}}):(de.value=Be,de.state=1,pr(de,!1))}catch(Kt){re({done:!1},Kt,de)}}};if(Ht&&(qe=(me=function(de){ee(this,qe),_e(de),S(c,this);var Be=xt(this);try{de(sn(Ne,Be),sn(re,Be))}catch(Nt){re(Be,Nt)}}).prototype,(c=function(de){tr(this,{type:bt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=M(qe,{then:function(de,Be){var Nt=Oe(this),Ot=Nt.reactions,Kt=zt(K(this,me));return Kt.ok=!fe(de)||de,Kt.fail=fe(Be)&&Be,Kt.domain=Ze?Ct.domain:void 0,Nt.parent=!0,Ot[Ot.length]=Kt,Nt.state!=0&&pr(Nt,!1),Kt.promise},catch:function(de){return this.then(void 0,de)}}),l=function(){var de=new c,Be=xt(de);this.promise=de,this.resolve=sn(Ne,Be),this.reject=sn(re,Be)},se.f=zt=function(de){return de===me||de===h?new l(de):Zt(de)},!g&&fe(N)&&oe!==Object.prototype)){v=oe.then,xe||(j(oe,"then",function(de,Be){var Nt=this;return new me(function(Ot,Kt){S(v,Nt,Ot,Kt)}).then(de,Be)},{unsafe:!0}),j(oe,"catch",qe.catch,{unsafe:!0}));try{delete oe.constructor}catch{}C&&C(oe,qe)}m({global:!0,wrap:!0,forced:Ht},{Promise:me}),V(me,bt,!1,!0),ce(bt),h=x(bt),m({target:bt,stat:!0,forced:Ht},{reject:function(de){var Be=zt(this);return S(Be.reject,void 0,de),Be.promise}}),m({target:bt,stat:!0,forced:g||Ht},{resolve:function(de){return De(g&&this===h?me:this,de)}}),m({target:bt,stat:!0,forced:yr},{all:function(de){var Be=this,Nt=zt(Be),Ot=Nt.resolve,Kt=Nt.reject,Tr=he(function(){var xn=_e(Be.resolve),Fn=[],hn=0,En=1;L(de,function(Xt){var or=hn++,dr=!1;En++,S(xn,Be,Xt).then(function(gr){dr||(dr=!0,Fn[or]=gr,--En||Ot(Fn))},Kt)}),--En||Ot(Fn)});return Tr.error&&Kt(Tr.value),Nt.promise},race:function(de){var Be=this,Nt=zt(Be),Ot=Nt.reject,Kt=he(function(){var Tr=_e(Be.resolve);L(de,function(xn){S(Tr,Be,xn).then(Nt.resolve,Ot)})});return Kt.error&&Ot(Kt.value),Nt.promise}})},function(t,s,i){var c=i(7);t.exports=c.Promise},function(t,s,i){var c,l,h,v,m,g,O,x,S=i(7),N=i(62),j=i(51).f,M=i(163).set,C=i(164),V=i(207),ce=i(208),_e=i(126),fe=S.MutationObserver||S.WebKitMutationObserver,z=S.document,ee=S.process,$=S.Promise,L=j(S,"queueMicrotask"),Y=L&&L.value;Y||(c=function(){var K,I;for(_e&&(K=ee.domain)&&K.exit();l;){I=l.fn,l=l.next;try{I()}catch(pe){throw l?v():h=void 0,pe}}h=void 0,K&&K.enter()},C||_e||ce||!fe||!z?!V&&$&&$.resolve?((O=$.resolve(void 0)).constructor=$,x=N(O.then,O),v=function(){x(c)}):_e?v=function(){ee.nextTick(c)}:(M=N(M,S),v=function(){M(c)}):(m=!0,g=z.createTextNode(""),new fe(c).observe(g,{characterData:!0}),v=function(){g.data=m=!m})),t.exports=Y||function(K){var I={fn:K,next:void 0};h&&(h.next=I),l||(l=I,v()),h=I}},function(t,s,i){var c=i(53),l=i(7);t.exports=/ipad|iphone|ipod/i.test(c)&&l.Pebble!==void 0},function(t,s,i){var c=i(53);t.exports=/web0s(?!.*chrome)/i.test(c)},function(t,s,i){var c=i(32),l=i(33),h=i(165);t.exports=function(v,m){if(c(v),l(m)&&m.constructor===v)return m;var g=h.f(v);return(0,g.resolve)(m),g.promise}},function(t,s,i){var c=i(7);t.exports=function(l,h){var v=c.console;v&&v.error&&(arguments.length==1?v.error(l):v.error(l,h))}},function(t,s){t.exports=function(i){try{return{error:!1,value:i()}}catch(c){return{error:!0,value:c}}}},function(t,s){t.exports=typeof window=="object"},function(t,s,i){var c=i(36),l=i(15),h=i(66),v=i(40),m=l(i(93).f),g=l([].push),O=function(x){return function(S){for(var N,j=v(S),M=h(j),C=M.length,V=0,ce=[];C>V;)N=M[V++],c&&!m(j,N)||g(ce,x?[N,j[N]]:j[N]);return ce}};t.exports={entries:O(!0),values:O(!1)}},function(t,s,i){var c=i(38),l=i(67),h=i(43);t.exports=function(v){for(var m=c(this),g=h(m),O=arguments.length,x=l(O>1?arguments[1]:void 0,g),S=O>2?arguments[2]:void 0,N=S===void 0?g:l(S,g);N>x;)m[x++]=v;return m}},function(t,s,i){i.r(s),i.d(s,"observer",function(){return gi}),i.d(s,"LogicFlow",function(){return $g}),i.d(s,"h",function(){return xe.g}),i.d(s,"LogicFlowUtil",function(){return c}),i.d(s,"BaseNode",function(){return va}),i.d(s,"RectNode",function(){return By}),i.d(s,"CircleNode",function(){return Hy}),i.d(s,"PolygonNode",function(){return Yy}),i.d(s,"DiamondNode",function(){return Jy}),i.d(s,"EllipseNode",function(){return ng}),i.d(s,"TextNode",function(){return ag}),i.d(s,"HtmlNode",function(){return lg}),i.d(s,"BaseEdge",function(){return wf}),i.d(s,"LineEdge",function(){return xg}),i.d(s,"PolylineEdge",function(){return Ng}),i.d(s,"BezierEdge",function(){return Cg}),i.d(s,"Arrow",function(){return AA}),i.d(s,"BaseEdgeModel",function(){return qu}),i.d(s,"BezierEdgeModel",function(){return Yv}),i.d(s,"LineEdgeModel",function(){return qo}),i.d(s,"PolylineEdgeModel",function(){return Wn}),i.d(s,"BaseNodeModel",function(){return ha}),i.d(s,"CircleNodeModel",function(){return ey}),i.d(s,"DiamondNodeModel",function(){return iy}),i.d(s,"EllipseNodeModel",function(){return cy}),i.d(s,"PolygonNodeModel",function(){return vy}),i.d(s,"RectNodeModel",function(){return by}),i.d(s,"TextNodeModel",function(){return wy}),i.d(s,"HtmlNodeModel",function(){return Ty}),i.d(s,"EditConfigModel",function(){return Il}),i.d(s,"GraphModel",function(){return jt}),i.d(s,"SnaplineModel",function(){return K0}),i.d(s,"Keyboard",function(){return k_}),i.d(s,"get",function(){return Bb}),i.d(s,"defaults",function(){return Ub}),i.d(s,"ElementState",function(){return zr}),i.d(s,"ModelType",function(){return Pr}),i.d(s,"ElementType",function(){return Tn}),i.d(s,"EventType",function(){return ir}),i.d(s,"formateAnchorConnectValidateData",function(){return Yu});var c={};i.r(c),i.d(c,"createUuid",function(){return pi}),i.d(c,"refreshGraphId",function(){return Vd}),i.d(c,"createDrag",function(){return nr}),i.d(c,"StepDrag",function(){return Wr});var l=i(1),h=i(10);if(!h.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!l.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var v=i(42),m=Object(v.b)("observerBatching");function g(n){n()}var O=!1;function x(){return O}function S(n){return Object(l.t)(n)}var N,j=1e4,M=new Set;function C(){N===void 0&&(N=setTimeout(V,1e4))}function V(){N=void 0;var n=Date.now();M.forEach(function(o){var a=o.current;a&&n>=a.cleanAt&&(a.reaction.dispose(),o.current=null,M.delete(o))}),M.size>0&&C()}var ce=!1,_e=[],fe={};function z(n){return"observer"+n}function ee(n,o,a){o===void 0&&(o="observed"),a===void 0&&(a=fe),x();var u,d=function(w){return function(){ce?_e.push(w):w()}}((a.useForceUpdate||v.d)()),f=h.d.useRef(null);if(!f.current){var p=new l.c(z(o),function(){y.mounted?d():(p.dispose(),f.current=null)}),y=function(w){return{cleanAt:Date.now()+j,reaction:w}}(p);f.current=y,u=f,M.add(u),C()}var b=f.current.reaction;return h.d.useDebugValue(b,S),h.d.useEffect(function(){var w;return w=f,M.delete(w),f.current?f.current.mounted=!0:(f.current={reaction:new l.c(z(o),function(){d()}),cleanAt:1/0},d()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(w){ce=!0,_e=[];try{var T=w();ce=!1;var R=_e.length>0?_e:void 0;return h.d.useLayoutEffect(function(){R&&R.forEach(function(k){return k()})},[R]),T}finally{ce=!1}}(function(){var w,T;if(b.track(function(){try{w=n()}catch(R){T=R}}),T)throw T;return w})}var $=function(){return $=Object.assign||function(n){for(var o,a=1,u=arguments.length;a<u;a++)for(var d in o=arguments[a])Object.prototype.hasOwnProperty.call(o,d)&&(n[d]=o[d]);return n},$.apply(this,arguments)};function L(n,o){var a,u,d,f=$({forwardRef:!1},o),p=n.displayName||n.name,y=function(b,w){return ee(function(){return n(b,w)},p)};return y.displayName=p,a=f.forwardRef?Object(h.f)(Object(h.e)(y)):Object(h.f)(y),u=n,d=a,Object.keys(u).forEach(function(b){Y[b]||Object.defineProperty(d,b,Object.getOwnPropertyDescriptor(u,b))}),a.displayName=p,a}var Y={$$typeof:!0,render:!0,compare:!0,type:!0};function K(n){var o=n.children,a=n.render,u=o||a;return typeof u!="function"?null:ee(u)}function I(n,o,a,u,d){var f=o==="children"?"render":"children",p=typeof n[o]=="function",y=typeof n[f]=="function";return p&&y?new Error("MobX Observer: Do not use children and render in the same time in`"+a):p||y?null:new Error("Invalid prop `"+d+"` of type `"+typeof n[o]+"` supplied to `"+a+"`, expected `function`.")}K.propTypes={children:I,render:I},K.displayName="Observer";var pe;(pe=h.g)||(pe=g),Object(l.n)({reactionScheduler:pe}),Object(v.a)()[m]=!0;var De=0,Q={};function se(n){return Q[n]||(Q[n]=function(o){if(typeof Symbol=="function")return Symbol(o);var a="__$mobx-react "+o+" ("+De+")";return De++,a}(n)),Q[n]}function he(n,o){if(be(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var a=Object.keys(n),u=Object.keys(o);if(a.length!==u.length)return!1;for(var d=0;d<a.length;d++)if(!Object.hasOwnProperty.call(o,a[d])||!be(n[a[d]],o[a[d]]))return!1;return!0}function be(n,o){return n===o?n!==0||1/n==1/o:n!=n&&o!=o}function te(n,o,a){Object.hasOwnProperty.call(n,o)?n[o]=a:Object.defineProperty(n,o,{enumerable:!1,configurable:!0,writable:!0,value:a})}var ve=se("patchMixins"),Fe=se("patchedDefinition");function Ze(n,o){for(var a=this,u=arguments.length,d=new Array(u>2?u-2:0),f=2;f<u;f++)d[f-2]=arguments[f];o.locks++;try{var p;return n!=null&&(p=n.apply(this,d)),p}finally{o.locks--,o.locks===0&&o.methods.forEach(function(y){y.apply(a,d)})}}function ht(n,o){return function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];Ze.call.apply(Ze,[this,n,o].concat(u))}}function Ft(n,o,a){var u=function(y,b){var w=y[ve]=y[ve]||{},T=w[b]=w[b]||{};return T.locks=T.locks||0,T.methods=T.methods||[],T}(n,o);u.methods.indexOf(a)<0&&u.methods.push(a);var d=Object.getOwnPropertyDescriptor(n,o);if(!d||!d[Fe]){var f=n[o],p=bt(n,o,d?d.enumerable:void 0,u,f);Object.defineProperty(n,o,p)}}function bt(n,o,a,u,d){var f,p=ht(d,u);return(f={})[Fe]=!0,f.get=function(){return p},f.set=function(y){if(this===n)p=ht(y,u);else{var b=bt(this,o,a,u,y);Object.defineProperty(this,o,b)}},f.configurable=!0,f.enumerable=a,f}var xt=l.a||"$mobx",tr=se("isMobXReactObserver"),Oe=se("isUnmounted"),oe=se("skipRender"),me=se("isForcingUpdate");function qe(n){var o=n.prototype;if(n[tr]?gt(o):n[tr]=!0,o.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(n.__proto__!==h.b)if(o.shouldComponentUpdate){if(o.shouldComponentUpdate!==Ct)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else o.shouldComponentUpdate=Ct;zt(o,"props"),zt(o,"state");var a=o.render;return o.render=function(){return et.call(this,a)},Ft(o,"componentWillUnmount",function(){var u;(u=this.render[xt])===null||u===void 0||u.dispose(),this[Oe]=!0,!this.render[xt]&&gt(this)}),n}function gt(n){return n.displayName||n.name||n.constructor&&(n.constructor.displayName||n.constructor.name)||"<component>"}function et(n){var o=this;te(this,oe,!1),te(this,me,!1);var a=gt(this),u=n.bind(this),d=!1,f=new l.c(a+".render()",function(){if(!d&&(d=!0,o[Oe]!==!0)){var y=!0;try{te(o,me,!0),o[oe]||h.a.prototype.forceUpdate.call(o),y=!1}finally{te(o,me,!1),y&&f.dispose()}}});function p(){d=!1;var y=void 0,b=void 0;if(f.track(function(){try{b=Object(l.d)(!1,u)}catch(w){y=w}}),y)throw y;return b}return f.reactComponent=this,p[xt]=f,this.render=p,p.call(this)}function Ct(n,o){return this.state!==o||!he(this.props,n)}function zt(n,o){var a=se("reactProp_"+o+"_valueHolder"),u=se("reactProp_"+o+"_atomHolder");function d(){return this[u]||te(this,u,Object(l.o)("reactive "+o)),this[u]}Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:function(){var f=!1;return l.f&&l.e&&(f=Object(l.f)(!0)),d.call(this).reportObserved(),l.f&&l.e&&Object(l.e)(f),this[a]},set:function(f){this[me]||he(this[a],f)?te(this,a,f):(te(this,a,f),te(this,oe,!0),d.call(this).reportChanged(),te(this,oe,!1))}})}var Zt=typeof Symbol=="function"&&Symbol.for,Gt=Zt?Symbol.for("react.forward_ref"):typeof h.e=="function"&&Object(h.e)(function(n){return null}).$$typeof,ze=Zt?Symbol.for("react.memo"):typeof h.f=="function"&&Object(h.f)(function(n){return null}).$$typeof;function Wt(n){if(n.isMobxInjector,ze&&n.$$typeof===ze)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Gt&&n.$$typeof===Gt){var o=n.render;if(typeof o!="function")throw new Error("render property of ForwardRef was not a function");return Object(h.e)(function(){var a=arguments;return Object(h.c)(K,null,function(){return o.apply(void 0,a)})})}return typeof n!="function"||n.prototype&&n.prototype.render||n.isReactClass||Object.prototype.isPrototypeOf.call(h.a,n)?qe(n):L(n)}if(!h.a)throw new Error("mobx-react requires React to be available");if(!l.C)throw new Error("mobx-react requires mobx to be available");var xe=i(0);i(3),i(60),i(2),i(6),i(4),i(11),i(39),i(29),i(22),i(20),i(5),i(23),i(21),i(25),i(8),i(9),i(16),i(24),i(18),i(188),i(193),i(103),i(152),i(153);var Ht=function(n,o){for(var a=-1,u=n==null?0:n.length,d=Array(u);++a<u;)d[a]=o(n[a],a,n);return d},yr=function(){this.__data__=[],this.size=0},G=function(n,o){return n===o||n!=n&&o!=o},pr=function(n,o){for(var a=n.length;a--;)if(G(n[a][0],o))return a;return-1},Dr=Array.prototype.splice,Yr=function(n){var o=this.__data__,a=pr(o,n);return!(a<0)&&(a==o.length-1?o.pop():Dr.call(o,a,1),--this.size,!0)},Zr=function(n){var o=this.__data__,a=pr(o,n);return a<0?void 0:o[a][1]},sr=function(n){return pr(this.__data__,n)>-1},sn=function(n,o){var a=this.__data__,u=pr(a,n);return u<0?(++this.size,a.push([n,o])):a[u][1]=o,this};function re(n){var o=-1,a=n==null?0:n.length;for(this.clear();++o<a;){var u=n[o];this.set(u[0],u[1])}}re.prototype.clear=yr,re.prototype.delete=Yr,re.prototype.get=Zr,re.prototype.has=sr,re.prototype.set=sn;var Ne=re,de=function(){this.__data__=new Ne,this.size=0},Be=function(n){var o=this.__data__,a=o.delete(n);return this.size=o.size,a},Nt=function(n){return this.__data__.get(n)},Ot=function(n){return this.__data__.has(n)},Kt=i(31),Tr=Kt.a.Symbol,xn=Object.prototype,Fn=xn.hasOwnProperty,hn=xn.toString,En=Tr?Tr.toStringTag:void 0,Xt=function(n){var o=Fn.call(n,En),a=n[En];try{n[En]=void 0;var u=!0}catch{}var d=hn.call(n);return u&&(o?n[En]=a:delete n[En]),d},or=Object.prototype.toString,dr=function(n){return or.call(n)},gr=Tr?Tr.toStringTag:void 0,Xr=function(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":gr&&gr in Object(n)?Xt(n):dr(n)},kr=function(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")},ui,zo=function(n){if(!kr(n))return!1;var o=Xr(n);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"},Ho=Kt.a["__core-js_shared__"],Ki=(ui=/[^.]+$/.exec(Ho&&Ho.keys&&Ho.keys.IE_PROTO||""))?"Symbol(src)_1."+ui:"",sl=function(n){return!!Ki&&Ki in n},bu=Function.prototype.toString,Ao=function(n){if(n!=null){try{return bu.call(n)}catch{}try{return n+""}catch{}}return""},ws=/^\[object .+?Constructor\]$/,qt=Function.prototype,xs=Object.prototype,tn=qt.toString,Ss=xs.hasOwnProperty,po=RegExp("^"+tn.call(Ss).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ho=function(n){return!(!kr(n)||sl(n))&&(zo(n)?po:ws).test(Ao(n))},Ts=function(n,o){return n==null?void 0:n[o]},Xo=function(n,o){var a=Ts(n,o);return ho(a)?a:void 0},Oi=Xo(Kt.a,"Map"),Lo=Xo(Object,"create"),_u=function(){this.__data__=Lo?Lo(null):{},this.size=0},As=function(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o},cl=Object.prototype.hasOwnProperty,Na=function(n){var o=this.__data__;if(Lo){var a=o[n];return a==="__lodash_hash_undefined__"?void 0:a}return cl.call(o,n)?o[n]:void 0},ll=Object.prototype.hasOwnProperty,Ps=function(n){var o=this.__data__;return Lo?o[n]!==void 0:ll.call(o,n)},fl=function(n,o){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=Lo&&o===void 0?"__lodash_hash_undefined__":o,this};function si(n){var o=-1,a=n==null?0:n.length;for(this.clear();++o<a;){var u=n[o];this.set(u[0],u[1])}}si.prototype.clear=_u,si.prototype.delete=As,si.prototype.get=Na,si.prototype.has=Ps,si.prototype.set=fl;var Ns=si,Vo=function(){this.size=0,this.__data__={hash:new Ns,map:new(Oi||Ne),string:new Ns}},dl=function(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null},ja=function(n,o){var a=n.__data__;return dl(o)?a[typeof o=="string"?"string":"hash"]:a.map},Eu=function(n){var o=ja(this,n).delete(n);return this.size-=o?1:0,o},Ou=function(n){return ja(this,n).get(n)},pl=function(n){return ja(this,n).has(n)},js=function(n,o){var a=ja(this,n),u=a.size;return a.set(n,o),this.size+=a.size==u?0:1,this};function wi(n){var o=-1,a=n==null?0:n.length;for(this.clear();++o<a;){var u=n[o];this.set(u[0],u[1])}}wi.prototype.clear=Vo,wi.prototype.delete=Eu,wi.prototype.get=Ou,wi.prototype.has=pl,wi.prototype.set=js;var xi=wi,Ms=function(n,o){var a=this.__data__;if(a instanceof Ne){var u=a.__data__;if(!Oi||u.length<199)return u.push([n,o]),this.size=++a.size,this;a=this.__data__=new xi(u)}return a.set(n,o),this.size=a.size,this};function Si(n){var o=this.__data__=new Ne(n);this.size=o.size}Si.prototype.clear=de,Si.prototype.delete=Be,Si.prototype.get=Nt,Si.prototype.has=Ot,Si.prototype.set=Ms;var vo=Si,wu=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Rs=function(n){return this.__data__.has(n)};function qi(n){var o=-1,a=n==null?0:n.length;for(this.__data__=new xi;++o<a;)this.add(n[o])}qi.prototype.add=qi.prototype.push=wu,qi.prototype.has=Rs;var Ti=qi,xu=function(n,o){for(var a=-1,u=n==null?0:n.length;++a<u;)if(o(n[a],a,n))return!0;return!1},Su=function(n,o){return n.has(o)},Ma=function(n,o,a,u,d,f){var p=1&a,y=n.length,b=o.length;if(y!=b&&!(p&&b>y))return!1;var w=f.get(n),T=f.get(o);if(w&&T)return w==o&&T==n;var R=-1,k=!0,q=2&a?new Ti:void 0;for(f.set(n,o),f.set(o,n);++R<y;){var ae=n[R],ye=o[R];if(u)var Me=p?u(ye,ae,R,o,n,f):u(ae,ye,R,n,o,f);if(Me!==void 0){if(Me)continue;k=!1;break}if(q){if(!xu(o,function(Re,We){if(!Su(q,We)&&(ae===Re||d(ae,Re,a,u,f)))return q.push(We)})){k=!1;break}}else if(ae!==ye&&!d(ae,ye,a,u,f)){k=!1;break}}return f.delete(n),f.delete(o),k},Zi=Kt.a.Uint8Array,Cs=function(n){var o=-1,a=Array(n.size);return n.forEach(function(u,d){a[++o]=[d,u]}),a},hl=function(n){var o=-1,a=Array(n.size);return n.forEach(function(u){a[++o]=u}),a},Ds=Tr?Tr.prototype:void 0,Kn=Ds?Ds.valueOf:void 0,Nn=function(n,o,a,u,d,f,p){switch(a){case"[object DataView]":if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=o.byteLength||!f(new Zi(n),new Zi(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return G(+n,+o);case"[object Error]":return n.name==o.name&&n.message==o.message;case"[object RegExp]":case"[object String]":return n==o+"";case"[object Map]":var y=Cs;case"[object Set]":var b=1&u;if(y||(y=hl),n.size!=o.size&&!b)return!1;var w=p.get(n);if(w)return w==o;u|=2,p.set(n,o);var T=Ma(y(n),y(o),u,d,f,p);return p.delete(n),T;case"[object Symbol]":if(Kn)return Kn.call(n)==Kn.call(o)}return!1},yo=function(n,o){for(var a=-1,u=o.length,d=n.length;++a<u;)n[d+a]=o[a];return n},zn=Array.isArray,ks=function(n,o,a){var u=o(n);return zn(n)?u:yo(u,a(n))},Tu=function(n,o){for(var a=-1,u=n==null?0:n.length,d=0,f=[];++a<u;){var p=n[a];o(p,a,n)&&(f[d++]=p)}return f},Au=function(){return[]},vl=Object.prototype.propertyIsEnumerable,ci=Object.getOwnPropertySymbols,oo=ci?function(n){return n==null?[]:(n=Object(n),Tu(ci(n),function(o){return vl.call(n,o)}))}:Au,yl=function(n,o){for(var a=-1,u=Array(n);++a<n;)u[a]=o(a);return u},Po=function(n){return n!=null&&typeof n=="object"},go=function(n){return Po(n)&&Xr(n)=="[object Arguments]"},Is=Object.prototype,Ls=Is.hasOwnProperty,gl=Is.propertyIsEnumerable,Ra=go(function(){return arguments}())?go:function(n){return Po(n)&&Ls.call(n,"callee")&&!gl.call(n,"callee")},$o=Ra,mo=i(48),ml=/^(?:0|[1-9]\d*)$/,qn=function(n,o){var a=typeof n;return!!(o=o??9007199254740991)&&(a=="number"||a!="symbol"&&ml.test(n))&&n>-1&&n%1==0&&n<o},No=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991},Rr={};Rr["[object Float32Array]"]=Rr["[object Float64Array]"]=Rr["[object Int8Array]"]=Rr["[object Int16Array]"]=Rr["[object Int32Array]"]=Rr["[object Uint8Array]"]=Rr["[object Uint8ClampedArray]"]=Rr["[object Uint16Array]"]=Rr["[object Uint32Array]"]=!0,Rr["[object Arguments]"]=Rr["[object Array]"]=Rr["[object ArrayBuffer]"]=Rr["[object Boolean]"]=Rr["[object DataView]"]=Rr["[object Date]"]=Rr["[object Error]"]=Rr["[object Function]"]=Rr["[object Map]"]=Rr["[object Number]"]=Rr["[object Object]"]=Rr["[object RegExp]"]=Rr["[object Set]"]=Rr["[object String]"]=Rr["[object WeakMap]"]=!1;var io=function(n){return Po(n)&&No(n.length)&&!!Rr[Xr(n)]},Wo=function(n){return function(o){return n(o)}},Bn=i(49),Ca=Bn.a&&Bn.a.isTypedArray,Ji=Ca?Wo(Ca):io,Fo=Object.prototype.hasOwnProperty,Zn=function(n,o){var a=zn(n),u=!a&&$o(n),d=!a&&!u&&Object(mo.a)(n),f=!a&&!u&&!d&&Ji(n),p=a||u||d||f,y=p?yl(n.length,String):[],b=y.length;for(var w in n)!o&&!Fo.call(n,w)||p&&(w=="length"||d&&(w=="offset"||w=="parent")||f&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||qn(w,b))||y.push(w);return y},Pu=Object.prototype,Qi=function(n){var o=n&&n.constructor;return n===(typeof o=="function"&&o.prototype||Pu)},jo=function(n,o){return function(a){return n(o(a))}},Fs=jo(Object.keys,Object),bl=Object.prototype.hasOwnProperty,Nu=function(n){if(!Qi(n))return Fs(n);var o=[];for(var a in Object(n))bl.call(n,a)&&a!="constructor"&&o.push(a);return o},On=function(n){return n!=null&&No(n.length)&&!zo(n)},Ai=function(n){return On(n)?Zn(n):Nu(n)},Da=function(n){return ks(n,Ai,oo)},jn=Object.prototype.hasOwnProperty,Bs=function(n,o,a,u,d,f){var p=1&a,y=Da(n),b=y.length;if(b!=Da(o).length&&!p)return!1;for(var w=b;w--;){var T=y[w];if(!(p?T in o:jn.call(o,T)))return!1}var R=f.get(n),k=f.get(o);if(R&&k)return R==o&&k==n;var q=!0;f.set(n,o),f.set(o,n);for(var ae=p;++w<b;){var ye=n[T=y[w]],Me=o[T];if(u)var Re=p?u(Me,ye,T,o,n,f):u(ye,Me,T,n,o,f);if(!(Re===void 0?ye===Me||d(ye,Me,a,u,f):Re)){q=!1;break}ae||(ae=T=="constructor")}if(q&&!ae){var We=n.constructor,lt=o.constructor;We==lt||!("constructor"in n)||!("constructor"in o)||typeof We=="function"&&We instanceof We&&typeof lt=="function"&&lt instanceof lt||(q=!1)}return f.delete(n),f.delete(o),q},ea=Xo(Kt.a,"DataView"),Yo=Xo(Kt.a,"Promise"),ka=Xo(Kt.a,"Set"),Bo=Xo(Kt.a,"WeakMap"),ju="[object Map]",Mn="[object Promise]",ao="[object Set]",uo="[object WeakMap]",ta="[object DataView]",Mu=Ao(ea),Ru=Ao(Oi),Gs=Ao(Yo),Us=Ao(ka),Ia=Ao(Bo),li=Xr;(ea&&li(new ea(new ArrayBuffer(1)))!=ta||Oi&&li(new Oi)!=ju||Yo&&li(Yo.resolve())!=Mn||ka&&li(new ka)!=ao||Bo&&li(new Bo)!=uo)&&(li=function(n){var o=Xr(n),a=o=="[object Object]"?n.constructor:void 0,u=a?Ao(a):"";if(u)switch(u){case Mu:return ta;case Ru:return ju;case Gs:return Mn;case Us:return ao;case Ia:return uo}return o});var _=li,E="[object Arguments]",P="[object Array]",F="[object Object]",Z=Object.prototype.hasOwnProperty,Ae=function(n,o,a,u,d,f){var p=zn(n),y=zn(o),b=p?P:_(n),w=y?P:_(o),T=(b=b==E?F:b)==F,R=(w=w==E?F:w)==F,k=b==w;if(k&&Object(mo.a)(n)){if(!Object(mo.a)(o))return!1;p=!0,T=!1}if(k&&!T)return f||(f=new vo),p||Ji(n)?Ma(n,o,a,u,d,f):Nn(n,o,b,a,u,d,f);if(!(1&a)){var q=T&&Z.call(n,"__wrapped__"),ae=R&&Z.call(o,"__wrapped__");if(q||ae){var ye=q?n.value():n,Me=ae?o.value():o;return f||(f=new vo),d(ye,Me,a,u,f)}}return!!k&&(f||(f=new vo),Bs(n,o,a,u,d,f))},Xe=function n(o,a,u,d,f){return o===a||(o==null||a==null||!Po(o)&&!Po(a)?o!=o&&a!=a:Ae(o,a,u,d,n,f))},mt=function(n,o,a,u){var d=a.length,f=d,p=!u;if(n==null)return!f;for(n=Object(n);d--;){var y=a[d];if(p&&y[2]?y[1]!==n[y[0]]:!(y[0]in n))return!1}for(;++d<f;){var b=(y=a[d])[0],w=n[b],T=y[1];if(p&&y[2]){if(w===void 0&&!(b in n))return!1}else{var R=new vo;if(u)var k=u(w,T,b,n,o,R);if(!(k===void 0?Xe(T,w,3,u,R):k))return!1}}return!0},Vt=function(n){return n==n&&!kr(n)},Ar=function(n){for(var o=Ai(n),a=o.length;a--;){var u=o[a],d=n[u];o[a]=[u,d,Vt(d)]}return o},cr=function(n,o){return function(a){return a!=null&&a[n]===o&&(o!==void 0||n in Object(a))}},Gr=function(n){var o=Ar(n);return o.length==1&&o[0][2]?cr(o[0][0],o[0][1]):function(a){return a===n||mt(a,n,o)}},Or=function(n){return typeof n=="symbol"||Po(n)&&Xr(n)=="[object Symbol]"},Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,so=/^\w*$/,rn=function(n,o){if(zn(n))return!1;var a=typeof n;return!(a!="number"&&a!="symbol"&&a!="boolean"&&n!=null&&!Or(n))||so.test(n)||!Ur.test(n)||o!=null&&n in Object(o)};function Jn(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new TypeError("Expected a function");var a=function(){var u=arguments,d=o?o.apply(this,u):u[0],f=a.cache;if(f.has(d))return f.get(d);var p=n.apply(this,u);return a.cache=f.set(d,p)||f,p};return a.cache=new(Jn.Cache||xi),a}Jn.Cache=xi;var ra=Jn,_l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,La=/\\(\\)?/g,na=function(n){var o=ra(n,function(u){return a.size===500&&a.clear(),u}),a=o.cache;return o}(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(_l,function(a,u,d,f){o.push(d?f.replace(La,"$1"):u||a)}),o}),Pi=Tr?Tr.prototype:void 0,oa=Pi?Pi.toString:void 0,Sn=function n(o){if(typeof o=="string")return o;if(zn(o))return Ht(o,n)+"";if(Or(o))return oa?oa.call(o):"";var a=o+"";return a=="0"&&1/o==-1/0?"-0":a},Fa=function(n){return n==null?"":Sn(n)},fi=function(n,o){return zn(n)?n:rn(n,o)?[n]:na(Fa(n))},ia=function(n){if(typeof n=="string"||Or(n))return n;var o=n+"";return o=="0"&&1/n==-1/0?"-0":o},Cu=function(n,o){for(var a=0,u=(o=fi(o,n)).length;n!=null&&a<u;)n=n[ia(o[a++])];return a&&a==u?n:void 0},El=function(n,o,a){var u=n==null?void 0:Cu(n,o);return u===void 0?a:u},id=function(n,o){return n!=null&&o in Object(n)},ad=function(n,o,a){for(var u=-1,d=(o=fi(o,n)).length,f=!1;++u<d;){var p=ia(o[u]);if(!(f=n!=null&&a(n,p)))break;n=n[p]}return f||++u!=d?f:!!(d=n==null?0:n.length)&&No(d)&&qn(p,d)&&(zn(n)||$o(n))},Ol=function(n,o){return n!=null&&ad(n,o,id)},ud=function(n,o){return rn(n)&&Vt(o)?cr(ia(n),o):function(a){var u=El(a,n);return u===void 0&&u===o?Ol(a,n):Xe(o,u,3)}},zs=function(n){return n},sd=function(n){return function(o){return o==null?void 0:o[n]}},cd=function(n){return function(o){return Cu(o,n)}},Ba=function(n){return rn(n)?sd(ia(n)):cd(n)},wl=function(n){return typeof n=="function"?n:n==null?zs:typeof n=="object"?zn(n)?ud(n[0],n[1]):Gr(n):Ba(n)},Hs=function(n){return function(o,a,u){for(var d=-1,f=Object(o),p=u(o),y=p.length;y--;){var b=p[n?y:++d];if(a(f[b],b,f)===!1)break}return o}}(),Du=function(n,o){return function(a,u){if(a==null)return a;if(!On(a))return n(a,u);for(var d=a.length,f=o?d:-1,p=Object(a);(o?f--:++f<d)&&u(p[f],f,p)!==!1;);return a}}(function(n,o){return n&&Hs(n,o,Ai)}),qh=function(n,o){var a=-1,u=On(n)?Array(n.length):[];return Du(n,function(d,f,p){u[++a]=o(d,f,p)}),u},Xs=function(n,o){return(zn(n)?Ht:qh)(n,wl(o))};Object(l.n)({isolateGlobalState:!0});var Vs=function(){try{var n=Xo(Object,"defineProperty");return n({},"",{}),n}catch{}}(),ku=function(n,o,a){o=="__proto__"&&Vs?Vs(n,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[o]=a},Zh=Object.prototype.hasOwnProperty,$s=function(n,o,a){var u=n[o];Zh.call(n,o)&&G(u,a)&&(a!==void 0||o in n)||ku(n,o,a)},Ga=function(n,o,a,u){var d=!a;a||(a={});for(var f=-1,p=o.length;++f<p;){var y=o[f],b=u?u(a[y],n[y],y,a,n):void 0;b===void 0&&(b=n[y]),d?ku(a,y,b):$s(a,y,b)}return a},xl=function(n,o,a){switch(a.length){case 0:return n.call(o);case 1:return n.call(o,a[0]);case 2:return n.call(o,a[0],a[1]);case 3:return n.call(o,a[0],a[1],a[2])}return n.apply(o,a)},ld=Math.max,Ws=function(n,o,a){return o=ld(o===void 0?n.length-1:o,0),function(){for(var u=arguments,d=-1,f=ld(u.length-o,0),p=Array(f);++d<f;)p[d]=u[o+d];d=-1;for(var y=Array(o+1);++d<o;)y[d]=u[d];return y[o]=a(p),xl(n,this,y)}},fd=function(n){return function(){return n}},dd=Vs?function(n,o){return Vs(n,"toString",{configurable:!0,enumerable:!1,value:fd(o),writable:!0})}:zs,Sl=Date.now,Jh=function(n){var o=0,a=0;return function(){var u=Sl(),d=16-(u-a);if(a=u,d>0){if(++o>=800)return arguments[0]}else o=0;return n.apply(void 0,arguments)}},Iu=Jh(dd),Qh=function(n,o){return Iu(Ws(n,o,zs),n+"")},ev=function(n,o,a){if(!kr(a))return!1;var u=typeof o;return!!(u=="number"?On(a)&&qn(o,a.length):u=="string"&&o in a)&&G(a[o],n)},pd=function(n){return Qh(function(o,a){var u=-1,d=a.length,f=d>1?a[d-1]:void 0,p=d>2?a[2]:void 0;for(f=n.length>3&&typeof f=="function"?(d--,f):void 0,p&&ev(a[0],a[1],p)&&(f=d<3?void 0:f,d=1),o=Object(o);++u<d;){var y=a[u];y&&n(o,y,u,f)}return o})},tv=Object.prototype.hasOwnProperty,Qn=pd(function(n,o){if(Qi(o)||On(o))Ga(o,Ai(o),n);else for(var a in o)tv.call(o,a)&&$s(n,a,o[a])}),rv=function(n,o,a,u){if(!kr(n))return n;for(var d=-1,f=(o=fi(o,n)).length,p=f-1,y=n;y!=null&&++d<f;){var b=ia(o[d]),w=a;if(b==="__proto__"||b==="constructor"||b==="prototype")return n;if(d!=p){var T=y[b];(w=u?u(T,b,y):void 0)===void 0&&(w=kr(T)?T:qn(o[d+1])?[]:{})}$s(y,b,w),y=y[b]}return n},nv=function(n,o,a){for(var u=-1,d=o.length,f={};++u<d;){var p=o[u],y=Cu(n,p);a(y,p)&&rv(f,fi(p,n),y)}return f},hd=function(n,o){return nv(n,o,function(a,u){return Ol(n,u)})},Ua=Tr?Tr.isConcatSpreadable:void 0,ov=function(n){return zn(n)||$o(n)||!!(Ua&&n&&n[Ua])},Ys=function n(o,a,u,d,f){var p=-1,y=o.length;for(u||(u=ov),f||(f=[]);++p<y;){var b=o[p];a>0&&u(b)?a>1?n(b,a-1,u,d,f):yo(f,b):d||(f[f.length]=b)}return f},Mo=function(n){return n!=null&&n.length?Ys(n,1):[]},Jr,Tl,Al,Pl,Nl,jl,Ml,vd,aa,Rn,Rl,Cl,Ni,Dl,kl,yd,gd,md,Lu=function(n){return Iu(Ws(n,void 0,Mo),n+"")}(function(n,o){return n==null?{}:hd(n,o)});function Cn(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function bd(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function _d(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Dn(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var zr,Ed,Pr,Tn,ir,Kr,Od={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Ks=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Il=(Tl=Dn((Jr=function(){function n(u){(function(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")})(this,n),Cn(this,"isSilentMode",Tl,this),Cn(this,"stopZoomGraph",Al,this),Cn(this,"stopScrollGraph",Pl,this),Cn(this,"stopMoveGraph",Nl,this),Cn(this,"adjustEdge",jl,this),Cn(this,"adjustEdgeMiddle",Ml,this),Cn(this,"adjustEdgeStartAndEnd",vd,this),Cn(this,"adjustNodePosition",aa,this),Cn(this,"hideAnchors",Rn,this),Cn(this,"hoverOutline",Rl,this),Cn(this,"nodeSelectedOutline",Cl,this),Cn(this,"edgeSelectedOutline",Ni,this),Cn(this,"nodeTextEdit",Dl,this),Cn(this,"edgeTextEdit",kl,this),Cn(this,"nodeTextDraggable",yd,this),Cn(this,"edgeTextDraggable",gd,this),Cn(this,"autoExpand",md,this),_d(this,"multipleSelectKey",""),_d(this,"defaultConfig",{}),Qn(this,this.getConfigDetail(u))}var o,a;return o=n,(a=[{key:"updateEditConfig",value:function(u){var d=this.getConfigDetail(u);Qn(this,d)}},{key:"getConfigDetail",value:function(u){var d=u.isSilentMode,f=u.textEdit,p={};if(d===!1&&Qn(p,this.defaultConfig),d===!0){var y=Lu(Od,Ks);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Qn(p,y)}f===!1&&Qn(p,{nodeTextEdit:!1,edgeTextEdit:!1});var b=Lu(u,Ks);return Qn(p,b)}},{key:"getConfig",value:function(){return Lu(this,Ks)}}])&&bd(o.prototype,a),n}()).prototype,"isSilentMode",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Al=Dn(Jr.prototype,"stopZoomGraph",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pl=Dn(Jr.prototype,"stopScrollGraph",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nl=Dn(Jr.prototype,"stopMoveGraph",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jl=Dn(Jr.prototype,"adjustEdge",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ml=Dn(Jr.prototype,"adjustEdgeMiddle",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vd=Dn(Jr.prototype,"adjustEdgeStartAndEnd",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),aa=Dn(Jr.prototype,"adjustNodePosition",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Rn=Dn(Jr.prototype,"hideAnchors",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rl=Dn(Jr.prototype,"hoverOutline",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Cl=Dn(Jr.prototype,"nodeSelectedOutline",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ni=Dn(Jr.prototype,"edgeSelectedOutline",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Dl=Dn(Jr.prototype,"nodeTextEdit",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kl=Dn(Jr.prototype,"edgeTextEdit",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yd=Dn(Jr.prototype,"nodeTextDraggable",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gd=Dn(Jr.prototype,"edgeTextDraggable",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),md=Dn(Jr.prototype,"autoExpand",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dn(Jr.prototype,"updateEditConfig",[l.k],Object.getOwnPropertyDescriptor(Jr.prototype,"updateEditConfig"),Jr.prototype),Jr);i(63),function(n){n[n.DEFAULT=1]="DEFAULT",n[n.TEXT_EDIT=2]="TEXT_EDIT",n[n.SHOW_MENU=3]="SHOW_MENU",n[n.ALLOW_CONNECT=4]="ALLOW_CONNECT",n[n.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(n){n.KEY="logic-flow",n.NODE_NAME="lf-node",n.EDGE_NAME="lf-edge"}(Ed||(Ed={})),function(n){n.NODE="node",n.CIRCLE_NODE="circle-node",n.POLYGON_NODE="polygon-node",n.RECT_NODE="rect-node",n.TEXT_NODE="text-node",n.ELLIPSE_NODE="ellipse-node",n.DIAMOND_NODE="diamond-node",n.HTML_NODE="html-node",n.EDGE="edge",n.LINE_EDGE="line-edge",n.POLYLINE_EDGE="polyline-edge",n.BEZIER_EDGE="bezier-edge",n.GRAPH="graph"}(Pr||(Pr={})),function(n){n.NODE="node",n.EDGE="edge",n.GRAPH="graph"}(Tn||(Tn={})),function(n){n.ELEMENT_CLICK="element:click",n.NODE_CLICK="node:click",n.NODE_DBCLICK="node:dbclick",n.NODE_DELETE="node:delete",n.NODE_ADD="node:add",n.NODE_DND_ADD="node:dnd-add",n.NODE_DND_DRAG="node:dnd-drag",n.NODE_MOUSEDOWN="node:mousedown",n.NODE_DRAGSTART="node:dragstart",n.NODE_DRAG="node:drag",n.NODE_DROP="node:drop",n.NODE_MOUSEUP="node:mouseup",n.NODE_MOUSEMOVE="node:mousemove",n.NODE_MOUSEENTER="node:mouseenter",n.NODE_MOUSELEAVE="node:mouseleave",n.NODE_CONTEXTMENU="node:contextmenu",n.EDGE_DELETE="edge:delete",n.EDGE_ADD="edge:add",n.EDGE_CLICK="edge:click",n.EDGE_DBCLICK="edge:dbclick",n.EDGE_MOUSEENTER="edge:mouseenter",n.EDGE_MOUSELEAVE="edge:mouseleave",n.EDGE_CONTEXTMENU="edge:contextmenu",n.EDGE_ADJUST="edge:adjust",n.EDGE_EXCHANGE_NODE="edge:exchange-node",n.ANCHOR_DRAGSTART="anchor:dragstart",n.ANCHOR_DRAG="anchor:drag",n.ANCHOR_DROP="anchor:drop",n.ANCHOR_DRAGEND="anchor:dragend",n.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",n.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",n.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",n.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",n.ADJUST_POINT_DRAG="adjustPoint:drag",n.ADJUST_POINT_DROP="adjustPoint:drop",n.ADJUST_POINT_DRAGEND="adjustPoint:dragend",n.BLANK_MOUSEDOWN="blank:mousedown",n.BLANK_DRAGSTART="blank:dragstart",n.BLANK_DRAG="blank:drag",n.BLANK_DROP="blank:drop",n.BLANK_MOUSEMOVE="blank:mousemove",n.BLANK_MOUSEUP="blank:mouseup",n.BLANK_CLICK="blank:click",n.BLANK_CONTEXTMENU="blank:contextmenu",n.SELECTION_MOUSEDOWN="selection:mousedown",n.SELECTION_DRAGSTART="selection:dragstart",n.SELECTION_DRAG="selection:drag",n.SELECTION_DROP="selection:drop",n.SELECTION_MOUSEMOVE="selection:mousemove",n.SELECTION_MOUSEUP="selection:mouseup",n.SELECTION_CONTEXTMENU="selection:contextmenu",n.CONNECTION_NOT_ALLOWED="connection:not-allowed",n.HISTORY_CHANGE="history:change",n.TEXT_UPDATE="text:update",n.GRAPH_TRANSFORM="graph:transform",n.GRAPH_RENDERED="graph:rendered"}(ir||(ir={})),function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"}(Kr||(Kr={}));var co,vn,Ll,Fl,Bl,Gl,Ro,Ul,wd;function Co(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return qs(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return qs(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qs(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function bo(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function Zs(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Js(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Do(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}(function(n){n[n.DEFAULT=0]="DEFAULT",n[n.INCREASE=1]="INCREASE"})(co||(co={}));var xd=(vn=function(){function n(u){(function(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")})(this,n),Js(this,"MINI_SCALE_SIZE",.2),Js(this,"MAX_SCALE_SIZE",16),bo(this,"SCALE_X",Ll,this),bo(this,"SKEW_Y",Fl,this),bo(this,"SKEW_X",Bl,this),bo(this,"SCALE_Y",Gl,this),bo(this,"TRANSLATE_X",Ro,this),bo(this,"TRANSLATE_Y",Ul,this),bo(this,"ZOOM_SIZE",wd,this),Js(this,"eventCenter",void 0),this.eventCenter=u}var o,a;return o=n,a=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var d=Co(u,2),f=d[0],p=d[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(p-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var d=Co(u,2),f=d[0],p=d[1];return[f*this.SCALE_X+this.TRANSLATE_X,p*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,d,f){var p=Co(u,2),y=p[0],b=p[1];return[y+d/this.SCALE_X,b+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,d){return[u/this.SCALE_X,d/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],d=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,p=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,p+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,p-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,p=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(d&&(this.TRANSLATE_X-=(f-this.SCALE_X)*d[0],this.TRANSLATE_Y-=(p-this.SCALE_Y)*d[1]),this.SCALE_X=f,this.SCALE_Y=p,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(ir.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,d){this.TRANSLATE_X+=u,this.TRANSLATE_Y+=d,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,d,f,p){var y=Co(this.CanvasPointToHtmlPoint([u,d]),2),b=f/2-y[0],w=p/2-y[1];this.TRANSLATE_X+=b,this.TRANSLATE_Y+=w,this.emitGraphTransform("focusOn")}}],a&&Zs(o.prototype,a),n}(),Ll=Do(vn.prototype,"SCALE_X",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Fl=Do(vn.prototype,"SKEW_Y",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bl=Do(vn.prototype,"SKEW_X",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gl=Do(vn.prototype,"SCALE_Y",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ro=Do(vn.prototype,"TRANSLATE_X",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ul=Do(vn.prototype,"TRANSLATE_Y",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wd=Do(vn.prototype,"ZOOM_SIZE",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Do(vn.prototype,"zoom",[l.k],Object.getOwnPropertyDescriptor(vn.prototype,"zoom"),vn.prototype),Do(vn.prototype,"resetZoom",[l.k],Object.getOwnPropertyDescriptor(vn.prototype,"resetZoom"),vn.prototype),Do(vn.prototype,"translate",[l.k],Object.getOwnPropertyDescriptor(vn.prototype,"translate"),vn.prototype),Do(vn.prototype,"focusOn",[l.k],Object.getOwnPropertyDescriptor(vn.prototype,"focusOn"),vn.prototype),vn),Sd=function(n,o){for(var a=-1,u=n==null?0:n.length;++a<u&&o(n[a],a,n)!==!1;);return n},Td=function(n,o){return n&&Ga(o,Ai(o),n)},iv=function(n){var o=[];if(n!=null)for(var a in Object(n))o.push(a);return o},av=Object.prototype.hasOwnProperty,uv=function(n){if(!kr(n))return iv(n);var o=Qi(n),a=[];for(var u in n)(u!="constructor"||!o&&av.call(n,u))&&a.push(u);return a},Fu=function(n){return On(n)?Zn(n,!0):uv(n)},sv=function(n,o){return n&&Ga(o,Fu(o),n)},Ad=i(106),Pd=function(n,o){var a=-1,u=n.length;for(o||(o=Array(u));++a<u;)o[a]=n[a];return o},Nd=function(n,o){return Ga(n,oo(n),o)},Qs=jo(Object.getPrototypeOf,Object),jd=Object.getOwnPropertySymbols?function(n){for(var o=[];n;)yo(o,oo(n)),n=Qs(n);return o}:Au,cv=function(n,o){return Ga(n,jd(n),o)},zl=function(n){return ks(n,Fu,jd)},ec=Object.prototype.hasOwnProperty,lv=function(n){var o=n.length,a=new n.constructor(o);return o&&typeof n[0]=="string"&&ec.call(n,"index")&&(a.index=n.index,a.input=n.input),a},Hl=function(n){var o=new n.constructor(n.byteLength);return new Zi(o).set(new Zi(n)),o},fv=function(n,o){var a=o?Hl(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)},dv=/\w*$/,pv=function(n){var o=new n.constructor(n.source,dv.exec(n));return o.lastIndex=n.lastIndex,o},Xl=Tr?Tr.prototype:void 0,Md=Xl?Xl.valueOf:void 0,hv=function(n){return Md?Object(Md.call(n)):{}},Rd=function(n,o){var a=o?Hl(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)},vv=function(n,o,a){var u=n.constructor;switch(o){case"[object ArrayBuffer]":return Hl(n);case"[object Boolean]":case"[object Date]":return new u(+n);case"[object DataView]":return fv(n,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Rd(n,a);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(n);case"[object RegExp]":return pv(n);case"[object Symbol]":return hv(n)}},Cd=Object.create,za=function(){function n(){}return function(o){if(!kr(o))return{};if(Cd)return Cd(o);n.prototype=o;var a=new n;return n.prototype=void 0,a}}(),Dd=function(n){return typeof n.constructor!="function"||Qi(n)?{}:za(Qs(n))},yv=function(n){return Po(n)&&_(n)=="[object Map]"},Vl=Bn.a&&Bn.a.isMap,$l=Vl?Wo(Vl):yv,gv=function(n){return Po(n)&&_(n)=="[object Set]"},Wl=Bn.a&&Bn.a.isSet,mv=Wl?Wo(Wl):gv,kd="[object Arguments]",Id="[object Function]",bv="[object Object]",Qr={};Qr[kd]=Qr["[object Array]"]=Qr["[object ArrayBuffer]"]=Qr["[object DataView]"]=Qr["[object Boolean]"]=Qr["[object Date]"]=Qr["[object Float32Array]"]=Qr["[object Float64Array]"]=Qr["[object Int8Array]"]=Qr["[object Int16Array]"]=Qr["[object Int32Array]"]=Qr["[object Map]"]=Qr["[object Number]"]=Qr["[object Object]"]=Qr["[object RegExp]"]=Qr["[object Set]"]=Qr["[object String]"]=Qr["[object Symbol]"]=Qr["[object Uint8Array]"]=Qr["[object Uint8ClampedArray]"]=Qr["[object Uint16Array]"]=Qr["[object Uint32Array]"]=!0,Qr["[object Error]"]=Qr[Id]=Qr["[object WeakMap]"]=!1;var Bu=function n(o,a,u,d,f,p){var y,b=1&a,w=2&a,T=4&a;if(u&&(y=f?u(o,d,f,p):u(o)),y!==void 0)return y;if(!kr(o))return o;var R=zn(o);if(R){if(y=lv(o),!b)return Pd(o,y)}else{var k=_(o),q=k==Id||k=="[object GeneratorFunction]";if(Object(mo.a)(o))return Object(Ad.a)(o,b);if(k==bv||k==kd||q&&!f){if(y=w||q?{}:Dd(o),!b)return w?cv(o,sv(y,o)):Nd(o,Td(y,o))}else{if(!Qr[k])return f?o:{};y=vv(o,k,b)}}p||(p=new vo);var ae=p.get(o);if(ae)return ae;p.set(o,y),mv(o)?o.forEach(function(Me){y.add(n(Me,a,u,Me,o,p))}):$l(o)&&o.forEach(function(Me,Re){y.set(Re,n(Me,a,u,Re,o,p))});var ye=R?void 0:(T?w?zl:Da:w?Fu:Ai)(o);return Sd(ye||o,function(Me,Re){ye&&(Me=o[Re=Me]),$s(y,Re,n(Me,a,u,Re,o,p))}),y},cn=function(n){return Bu(n,5)},Ha=function(n,o,a){(a!==void 0&&!G(n[o],a)||a===void 0&&!(o in n))&&ku(n,o,a)},_v=function(n){return Po(n)&&On(n)},Xa=Function.prototype,Va=Object.prototype,Ld=Xa.toString,$a=Va.hasOwnProperty,Fd=Ld.call(Object),Wa=function(n){if(!Po(n)||Xr(n)!="[object Object]")return!1;var o=Qs(n);if(o===null)return!0;var a=$a.call(o,"constructor")&&o.constructor;return typeof a=="function"&&a instanceof a&&Ld.call(a)==Fd},Gu=function(n,o){if((o!=="constructor"||typeof n[o]!="function")&&o!="__proto__")return n[o]},Yl=function(n){return Ga(n,Fu(n))},Kl=function(n,o,a,u,d,f,p){var y=Gu(n,a),b=Gu(o,a),w=p.get(b);if(w)Ha(n,a,w);else{var T=f?f(y,b,a+"",n,o,p):void 0,R=T===void 0;if(R){var k=zn(b),q=!k&&Object(mo.a)(b),ae=!k&&!q&&Ji(b);T=b,k||q||ae?zn(y)?T=y:_v(y)?T=Pd(y):q?(R=!1,T=Object(Ad.a)(b,!0)):ae?(R=!1,T=Rd(b,!0)):T=[]:Wa(b)||$o(b)?(T=y,$o(y)?T=Yl(y):kr(y)&&!zo(y)||(T=Dd(b))):R=!1}R&&(p.set(b,T),d(T,b,u,f,p),p.delete(b)),Ha(n,a,T)}},ql=function n(o,a,u,d,f){o!==a&&Hs(a,function(p,y){if(f||(f=new vo),kr(p))Kl(o,a,y,u,n,d,f);else{var b=d?d(Gu(o,y),p,y+"",o,a,f):void 0;b===void 0&&(b=p),Ha(o,y,b)}},Fu)},tc=pd(function(n,o,a){ql(n,o,a)}),rc={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},Zl=function(n){var o=cn(rc);return n&&(o=tc(o,n)),o};i(77),i(158);function Bd(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}var Gd=function(){function n(){var u,d,f;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,n),f={},(d="_events")in(u=this)?Object.defineProperty(u,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[d]=f}var o,a;return o=n,(a=[{key:"on",value:function(u,d,f){var p=this;return u==null||u.split(",").forEach(function(y){y=y.trim(),p._events[y]||(p._events[y]=[]),p._events[y].push({callback:d,once:!!f})}),this}},{key:"once",value:function(u,d){var f=this;u==null||u.split(",").forEach(function(p){return p=p.trim(),f.on(p,d,!0)})}},{key:"emit",value:function(u,d){var f=this;u==null||u.split(",").forEach(function(p){var y=f._events[p]||[],b=f._events["*"]||[],w=function(T){for(var R=T.length,k=0;k<R;k++)if(T[k]){var q=T[k],ae=q.callback;q.once&&(T.splice(k,1),T.length===0&&delete f._events[p],R--,k--),ae.apply(f,[d])}};w(y),w(b)})}},{key:"off",value:function(u,d){var f=this;return u||(this._events={}),u.split(",").forEach(function(p){if(d){for(var y=f._events[p]||[],b=y.length,w=0;w<b;w++)y[w].callback===d&&(y.splice(w,1),b--,w--);y.length===0&&delete f._events[p]}else delete f._events[p]}),this}},{key:"getEvents",value:function(){return this._events}}])&&Bd(o.prototype,a),n}();function di(n,o){return o*Math.round(n/o)||n}function Jl(n,o){return n%o}function Uu(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return nc(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return nc(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nc(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}var oc,ic=function(n,o,a){var u=Uu(n,2),d=u[0],f=u[1],p=Uu(o,2),y=p[0],b=p[1],w=Uu(a,2),T=w[0],R=w[1];return d>y&&d<T&&f>b&&f<R},Ql=function(n,o){var a=!1;switch(o.multipleSelectKey){case"meta":a=n.metaKey;break;case"alt":a=n.altKey;break;case"shift":a=n.shiftKey;break;case"ctrl":a=n.ctrlKey;break;default:a=!1}return a},Ud=(i(78),i(161),i(125),i(79),i(30),i(12),i(13),i(14),i(47),new Uint8Array(16));function ef(){if(!oc&&!(oc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oc(Ud)}for(var zd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Hd=function(n){return typeof n=="string"&&zd.test(n)},kn=[],zu=0;zu<256;++zu)kn.push((zu+256).toString(16).substr(1));var Xd=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(kn[n[o+0]]+kn[n[o+1]]+kn[n[o+2]]+kn[n[o+3]]+"-"+kn[n[o+4]]+kn[n[o+5]]+"-"+kn[n[o+6]]+kn[n[o+7]]+"-"+kn[n[o+8]]+kn[n[o+9]]+"-"+kn[n[o+10]]+kn[n[o+11]]+kn[n[o+12]]+kn[n[o+13]]+kn[n[o+14]]+kn[n[o+15]]).toLowerCase();if(!Hd(a))throw TypeError("Stringified UUID is invalid");return a},Hu=function(n,o,a){var u=(n=n||{}).random||(n.rng||ef)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,o){a=a||0;for(var d=0;d<16;++d)o[a+d]=u[d];return o}return Xd(u)},pi=function(){return Hu()},Vd=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=n.nodes.reduce(function(u,d){return u[d.id]=o+Hu(),d.id=u[d.id],u},{});return n.edges.forEach(function(u){u.id=o+Hu(),u.sourceNodeId=a[u.sourceNodeId],u.targetNodeId=a[u.targetNodeId]}),n},ua=(i(104),i(162),function(n,o,a){var u=n.x,d=n.y;return(u-o.x)*(u-a.x)<=0&&(d-o.y)*(d-a.y)<=0});function ac(n){return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ac(n)}function tf(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function uc(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?tf(Object(a),!0).forEach(function(u){rf(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):tf(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function rf(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var nt,nf,Xu,Ko,Ya,ji,Ka,qa,Mi,Ri,Ci,Vu,$u,Za,sc,cc,sa,ca,$d,Wd,of,lc=function(n){return n.anchors},Wu=function(n,o){for(var a,u=o.nodes,d=u.length-1;d>=0;d--){var f=u[d];if(Ov(n,f)){var p=f.getTargetAnchor(n);if(p){var y={node:f,anchorIndex:p.index,anchor:p.anchor};a&&!Ev(f,a.node,o)||(a=y)}}}return a},Ev=function(n,o,a){return n.zIndex>o.zIndex||a.nodesMap[n.id].index>a.nodesMap[o.id].index},eo=function(n,o,a,u){return Math.hypot(n-a,o-u)},Di=function(n,o){var a=!1,u=_o(o);return n.x>=u.minX-0&&n.x<=u.maxX+0&&n.y>=u.minY-0&&n.y<=u.maxY+0&&(a=!0),a},Ov=function(n,o){var a=!1,u=_o(o);return n.x>=u.minX-5&&n.x<=u.maxX+5&&n.y>=u.minY-5&&n.y<=u.maxY+5&&(a=!0),a},_o=function(n){var o=n.x,a=n.y,u=n.width,d=n.height;return{minX:o-u/2,minY:a-d/2,maxX:o+u/2,maxY:a+d/2,x:o,y:a,width:u,height:d,centerX:o,centerY:a}},af=function(n,o,a){var u,d=function(p){var y=p,b=y.x,w=y.y,T=y.width,R=y.height,k=y.radius;return[{x:b-T/2+k,y:w-R/2+k,r:k},{x:b+T/2-k,y:w-R/2+k,r:k},{x:b-T/2+k,y:w+R/2-k,r:k},{x:b+T/2-k,y:w+R/2-k,r:k}]}(a),f=Number.MAX_SAFE_INTEGER;return d.forEach(function(p){var y=eo(n.x,n.y,p.x,p.y);y<f&&(f=y,u=p)}),uf(n,o,u)},uf=function(n,o,a){var u,d=a,f=d.x,p=d.y,y=d.r;if(o===Kr.HORIZONTAL){var b=f-Math.sqrt(y*y-(n.y-p)*(n.y-p)),w=f+Math.sqrt(y*y-(n.y-p)*(n.y-p));u={x:Math.abs(b-n.x)<Math.abs(w-n.x)?b:w,y:n.y}}else if(o===Kr.VERTICAL){var T=p-Math.sqrt(y*y-(n.x-f)*(n.x-f)),R=p+Math.sqrt(y*y-(n.x-f)*(n.x-f)),k=Math.abs(T-n.y)<Math.abs(R-n.y)?T:R;u={x:n.x,y:k}}return u},Yd=function(n,o){var a=o,u=!1,d=a.x-a.width/2+a.radius,f=a.x+a.width/2-a.radius,p=a.y-a.height/2+a.radius,y=a.y+a.height/2-a.radius,b=a.x,w=a.y,T=a.width,R=a.height;return n.y===w+R/2||n.y===w-R/2?u=n.x>d&&n.x<f:n.x!==b+T/2&&n.x!==b-T/2||(u=n.y>p&&n.y<y),u},Kd=function(n,o,a){var u,d=a,f=d.x,p=d.y,y=d.rx,b=d.ry;if(o===Kr.HORIZONTAL){var w=f-Math.sqrt(y*y-(n.y-p)*(n.y-p)*y*y/(b*b)),T=f+Math.sqrt(y*y-(n.y-p)*(n.y-p)*y*y/(b*b));u={x:Math.abs(w-n.x)<Math.abs(T-n.x)?w:T,y:n.y}}else if(o===Kr.VERTICAL){var R=p-Math.sqrt(b*b-(n.x-f)*(n.x-f)*b*b/(y*y)),k=p+Math.sqrt(b*b-(n.x-f)*(n.x-f)*b*b/(y*y)),q=Math.abs(R-n.y)<Math.abs(k-n.y)?R:k;u={x:n.x,y:q}}return u},qd=function(n,o,a){for(var u,d=a.pointsPosition,f=Number.MAX_SAFE_INTEGER,p=[],y=0;y<d.length;y++)p.push({start:d[y],end:d[(y+1)%d.length]});return p.forEach(function(b){var w=b.start,T=b.end,R=w,k=T;w.x>T.x&&(R=T,k=w);var q={x:n.x,y:n.y};if(R.x===k.x&&o===Kr.HORIZONTAL&&(q={x:R.x,y:n.y}),R.y===k.y&&o===Kr.VERTICAL&&(q={x:n.x,y:R.y}),R.x!==k.x&&R.y!==k.y){var ae=(k.y-R.y)/(k.x-R.x),ye=(R.x*k.y-k.x*R.y)/(R.x-k.x);o===Kr.HORIZONTAL?q={x:(n.y-ye)/ae,y:n.y}:o===Kr.VERTICAL&&(q={x:n.x,y:ae*n.x+ye})}if(ua(q,w,T)){var Me=eo(q.x,q.y,n.x,n.y);Me<f&&(f=Me,u=q)}}),u},Zd=function(n,o,a,u){var d=n.x,f=n.y;return o.x>n.x?d=n.x+a/2:o.x<n.x&&(d=n.x-a/2),o.y>n.y?f=n.y+u/2:o.y<n.y&&(f=n.y-u/2),{x:d,y:f}},Jd=function(n){var o=n.rows,a=n.style,u=n.rowsLength,d=n.className,f=document.createElement("div");f.style.fontSize=a.fontSize,f.style.width=a.width,f.className=d,f.style.lineHeight=a.lineHeight,f.style.padding=a.padding,a.fontFamily&&(f.style.fontFamily=a.fontFamily),u>1?o.forEach(function(y){var b=document.createElement("div");b.textContent=y,f.appendChild(b)}):f.textContent=o,document.body.appendChild(f);var p=f.clientHeight;return document.body.removeChild(f),p},sf=function(n){var o=n.rows,a=n.rowsLength,u=n.fontSize,d=0;return o&&o.forEach(function(f){var p=St(f);d=p>d?p:d}),{width:Math.ceil(d/2)*u+u/4,height:a*(u+2)+u/4}},Yu=function(n){return ac(n)!=="object"?{isAllPass:!!n,msg:n?"":""}:n},$n=function(n){try{return JSON.parse(JSON.stringify(n))}catch{return n}},wv=1e3,cf=999,Ja=function(){return++wv};function Ku(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function Hn(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Ku(Object(a),!0).forEach(function(u){to(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Ku(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function yn(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function fc(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function to(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function ar(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var qu=(nt=function(){function n(u,d){(function(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")})(this,n),to(this,"id",""),yn(this,"type",nf,this),yn(this,"sourceNodeId",Xu,this),yn(this,"targetNodeId",Ko,this),yn(this,"startPoint",Ya,this),yn(this,"endPoint",ji,this),yn(this,"text",Ka,this),yn(this,"properties",qa,this),yn(this,"points",Mi,this),yn(this,"pointsList",Ri,this),yn(this,"isSelected",Ci,this),yn(this,"isHovered",Vu,this),yn(this,"isHitable",$u,this),yn(this,"draggable",Za,this),yn(this,"visible",sc,this),to(this,"virtual",!1),yn(this,"isAnimation",cc,this),yn(this,"isShowAdjustPoint",sa,this),to(this,"graphModel",void 0),yn(this,"zIndex",ca,this),to(this,"BaseType",Tn.EDGE),to(this,"modelType",Pr.EDGE),yn(this,"state",$d,this),to(this,"additionStateData",void 0),to(this,"sourceAnchorId",""),to(this,"targetAnchorId",""),to(this,"menu",void 0),to(this,"customTextPosition",!1),yn(this,"style",Wd,this),yn(this,"arrowConfig",of,this),this.graphModel=d,this.initEdgeData(u),this.setAttributes()}var o,a;return o=n,a=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var d=this.graphModel.idGenerator,f=d&&d(u.type),p=this.createId();u.id=p||f||pi()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var y=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=y,Qn(this,yt(u)),this.graphModel.overlapMode===co.INCREASE&&(this.zIndex=u.zIndex||Ja()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Hn(Hn({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Hn({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return cn(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return cn(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),d=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,p=this.isAnimation?d.stroke:u.stroke;return Hn(Hn({},u),{},{fill:p,stroke:p},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return cn(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,d;return(u=this.graphModel)===null||u===void 0||(d=u.nodesMap[this.sourceNodeId])===null||d===void 0?void 0:d.model}},{key:"targetNode",get:function(){var u,d;return(u=this.graphModel)===null||u===void 0||(d=u.nodesMap[this.targetNodeId])===null||d===void 0?void 0:d.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,d){var f,p;return lc(u).forEach(function(y){var b=Yt(y,d);(p===void 0||b<p)&&(p=b,f=y)}),f}},{key:"getEndAnchor",value:function(u){var d,f,p=this;return lc(u).forEach(function(y){var b=Yt(y,p.startPoint);(f===void 0||b<f)&&(f=b,d=y)}),d}},{key:"getProperties",value:function(){return Object(l.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,d=u.x,f=u.y,p=u.value,y={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(l.I)(this.properties)};return p&&(y.text={x:d,y:f,value:p}),this.graphModel.overlapMode===co.INCREASE&&(y.zIndex=this.zIndex),y}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,d){this.properties[u]=$n(d),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Hn(Hn({},Object(l.I)(this.properties)),$n(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var d=this.arrowConfig,f=d.markerEnd,p=d.markerStart;p&&p==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,d){this.style=Hn(Hn({},this.style),{},to({},u,$n(d)))}},{key:"setStyles",value:function(u){this.style=Hn(Hn({},this.style),$n(u))}},{key:"updateStyles",value:function(u){this.style=Hn({},$n(u))}},{key:"formatText",value:function(u){var d=this.textPosition,f=d.x,p=d.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||p,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y:p,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,d=u.x,f=u.y;this.text.x=d,this.text.y=f}},{key:"moveText",value:function(u,d){if(this.text){var f=this.text,p=f.x,y=f.y,b=f.value,w=f.draggable,T=f.editable;this.text={value:b,draggable:w,x:p+u,y:y+d,editable:T}}}},{key:"setText",value:function(u){u&&Qn(this.text,u)}},{key:"updateText",value:function(u){this.text=Hn(Hn({},Object(l.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var d=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:d.x,y:d.y}),this.targetAnchorId||(this.targetAnchorId=d.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,d){this.state=u,this.additionStateData=d}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,d){this.startPoint.x+=u,this.startPoint.y+=d}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,d){this.endPoint.x+=u,this.endPoint.y+=d}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Qn(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var d=u.startPoint,f=u.endPoint;this.updateStartPoint({x:d.x,y:d.y}),this.updateEndPoint({x:f.x,y:f.y})}}],a&&fc(o.prototype,a),n}(),nf=ar(nt.prototype,"type",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Xu=ar(nt.prototype,"sourceNodeId",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ko=ar(nt.prototype,"targetNodeId",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ya=ar(nt.prototype,"startPoint",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ji=ar(nt.prototype,"endPoint",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ka=ar(nt.prototype,"text",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),qa=ar(nt.prototype,"properties",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Mi=ar(nt.prototype,"points",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ri=ar(nt.prototype,"pointsList",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ci=ar(nt.prototype,"isSelected",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vu=ar(nt.prototype,"isHovered",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$u=ar(nt.prototype,"isHitable",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Za=ar(nt.prototype,"draggable",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),sc=ar(nt.prototype,"visible",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cc=ar(nt.prototype,"isAnimation",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sa=ar(nt.prototype,"isShowAdjustPoint",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ca=ar(nt.prototype,"zIndex",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$d=ar(nt.prototype,"state",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Wd=ar(nt.prototype,"style",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),of=ar(nt.prototype,"arrowConfig",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),ar(nt.prototype,"sourceNode",[l.m],Object.getOwnPropertyDescriptor(nt.prototype,"sourceNode"),nt.prototype),ar(nt.prototype,"targetNode",[l.m],Object.getOwnPropertyDescriptor(nt.prototype,"targetNode"),nt.prototype),ar(nt.prototype,"textPosition",[l.m],Object.getOwnPropertyDescriptor(nt.prototype,"textPosition"),nt.prototype),ar(nt.prototype,"setProperty",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setProperty"),nt.prototype),ar(nt.prototype,"deleteProperty",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteProperty"),nt.prototype),ar(nt.prototype,"setProperties",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setProperties"),nt.prototype),ar(nt.prototype,"changeEdgeId",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeEdgeId"),nt.prototype),ar(nt.prototype,"setStyle",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setStyle"),nt.prototype),ar(nt.prototype,"setStyles",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setStyles"),nt.prototype),ar(nt.prototype,"updateStyles",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateStyles"),nt.prototype),ar(nt.prototype,"formatText",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"formatText"),nt.prototype),ar(nt.prototype,"resetTextPosition",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"resetTextPosition"),nt.prototype),ar(nt.prototype,"moveText",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveText"),nt.prototype),ar(nt.prototype,"setText",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setText"),nt.prototype),ar(nt.prototype,"updateText",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateText"),nt.prototype),ar(nt.prototype,"setAnchors",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setAnchors"),nt.prototype),ar(nt.prototype,"setSelected",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setSelected"),nt.prototype),ar(nt.prototype,"setHovered",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setHovered"),nt.prototype),ar(nt.prototype,"setHitable",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setHitable"),nt.prototype),ar(nt.prototype,"openEdgeAnimation",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"openEdgeAnimation"),nt.prototype),ar(nt.prototype,"closeEdgeAnimation",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"closeEdgeAnimation"),nt.prototype),ar(nt.prototype,"setElementState",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementState"),nt.prototype),ar(nt.prototype,"updateStartPoint",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateStartPoint"),nt.prototype),ar(nt.prototype,"moveStartPoint",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveStartPoint"),nt.prototype),ar(nt.prototype,"updateEndPoint",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateEndPoint"),nt.prototype),ar(nt.prototype,"moveEndPoint",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveEndPoint"),nt.prototype),ar(nt.prototype,"setZIndex",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"setZIndex"),nt.prototype),ar(nt.prototype,"initPoints",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"initPoints"),nt.prototype),ar(nt.prototype,"updateAttributes",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateAttributes"),nt.prototype),ar(nt.prototype,"getAdjustStart",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAdjustStart"),nt.prototype),ar(nt.prototype,"getAdjustEnd",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAdjustEnd"),nt.prototype),ar(nt.prototype,"updateAfterAdjustStartAndEnd",[l.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateAfterAdjustStartAndEnd"),nt.prototype),nt),Qa=qu;function eu(n){return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},eu(n)}function Zu(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function tu(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Zu(Object(a),!0).forEach(function(u){Qd(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Zu(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function Ju(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Qu(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function la(){return la=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=es(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},la.apply(this,arguments)}function es(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=ki(n))!==null;);return n}function dc(n,o){return dc=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},dc(n,o)}function ts(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=ki(n);if(o){var d=ki(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return fa(this,a)}}function fa(n,o){if(o&&(eu(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lf(n)}function lf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ki(n){return ki=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ki(n)}function Qd(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var wr,ep,qo=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&dc(f,p)})(d,n);var o,a,u=ts(d);function d(){var f;Ju(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Qd(lf(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.LINE_EDGE),f}return o=d,(a=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return tu(tu({},la(ki(d.prototype),"getEdgeStyle",this).call(this)),cn(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Qu(o.prototype,a),d}(Qa);function pc(n){return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},pc(n)}function tp(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return ff(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return ff(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ff(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function rp(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function df(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?rp(Object(a),!0).forEach(function(u){Qo(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):rp(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function xv(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function Zo(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function np(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Jo(){return Jo=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=Ii(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},Jo.apply(this,arguments)}function Ii(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=gn(n))!==null;);return n}function hc(n,o){return hc=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},hc(n,o)}function pf(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=gn(n);if(o){var d=gn(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return vc(this,a)}}function vc(n,o){if(o&&(pc(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ru(n)}function ru(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gn(n){return gn=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},gn(n)}function Qo(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Ir(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var Wn=(wr=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&hc(f,p)})(d,n);var o,a,u=pf(d);function d(){var f;Zo(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Qo(ru(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.POLYLINE_EDGE),Qo(ru(f),"draggingPointList",void 0),xv(ru(f),"dbClickPosition",ep,ru(f)),f}return o=d,(a=[{key:"initEdgeData",value:function(f){this.offset=30,Jo(gn(d.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return df(df({},Jo(gn(d.prototype),"getEdgeStyle",this).call(this)),cn(f))}},{key:"getTextPosition",value:function(){var f,p=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!p){var y=this.dbClickPosition;return{x:y.x,y:y.y}}var b=Se(this.points),w=tp(ut(b),2),T=w[0],R=w[1];return{x:(T.x+R.x)/2,y:(T.y+R.y)/2}}},{key:"getAfterAnchor",value:function(f,p,y){var b,w;return y.forEach(function(T){var R;f===Kr.HORIZONTAL?R=Math.abs(p.y-T.y):f===Kr.VERTICAL&&(R=Math.abs(p.x-T.x)),(!w||w>R)&&(w=R,b=T)}),b}},{key:"getCrossPoint",value:function(f,p,y){var b;return f===Kr.HORIZONTAL?b={x:y.x,y:p.y}:f===Kr.VERTICAL&&(b={x:p.x,y:y.y}),b}},{key:"removeCrossPoints",value:function(f,p,y){var b=y.map(function(Re){return Re});if(f===1){var w=b[f],T=b[p],R=b[f-1];if(pt(R,w,this.sourceNode)){if(_t(w,T,this.sourceNode)){var k=it(w,T,this.sourceNode);k&&(b[f]=k,b.splice(f-1,1),f--,p--)}}else this.sourceNode.anchors.forEach(function(Re){(Re.x===R.x&&Re.x===w.x||Re.y===R.y&&Re.y===w.y)&&eo(Re.x,Re.y,w.x,w.y)<eo(R.x,R.y,w.x,w.y)&&(b[f-1]=Re)})}if(p===y.length-2){var q=b[f],ae=b[p],ye=b[p+1];if(pt(ae,ye,this.targetNode)){if(_t(q,ae,this.targetNode)){var Me=it(q,ae,this.targetNode);Me&&(b[p]=Me,b.splice(p+1,1))}}else this.targetNode.anchors.forEach(function(Re){(Re.x===ye.x&&Re.x===ae.x||Re.y===ye.y&&Re.y===ae.y)&&eo(Re.x,Re.y,ae.x,ae.y)<eo(ye.x,ye.y,ae.x,ae.y)&&(b[p+1]=Re)})}return b}},{key:"getDraggingPoints",value:function(f,p,y,b,w){var T=w.map(function(q){return q}),R=this.getAfterAnchor(f,y,b),k=this.getCrossPoint(f,y,R);return p==="start"?(T.unshift(k),T.unshift(R)):(T.push(k),T.push(R)),T}},{key:"updateCrossPoints",value:function(f){var p=f.map(function(lt){return lt}),y=f[0],b=f[1],w=f[p.length-2],T=f[p.length-1],R=this.sourceNode,k=this.targetNode,q=R.modelType,ae=k.modelType,ye=dt(y,b),Me=p[0];switch(q){case Pr.RECT_NODE:R.radius!==0&&(Yd(y,R)||(Me=af(y,ye,R)));break;case Pr.CIRCLE_NODE:Me=uf(y,ye,R);break;case Pr.ELLIPSE_NODE:Me=Kd(y,ye,R);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:Me=qd(y,ye,R)}p[0]=Me;var Re=dt(w,T),We=p[p.length-1];switch(ae){case Pr.RECT_NODE:k.radius!==0&&(Yd(T,k)||(We=af(T,Re,k)));break;case Pr.CIRCLE_NODE:We=uf(T,Re,k);break;case Pr.ELLIPSE_NODE:We=Kd(T,Re,k);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:We=qd(T,Re,k)}return p[p.length-1]=We,p}},{key:"getData",value:function(){var f=Jo(gn(d.prototype),"getData",this).call(this),p=this.pointsList.map(function(y){return{x:y.x,y:y.y}});return Object.assign({},f,{pointsList:p})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=ft({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,p){this.startPoint.x+=f,this.startPoint.y+=p,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveEndPoint",value:function(f,p){this.endPoint.x+=f,this.endPoint.y+=p,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,p){this.isDragging=!0;var y=f.start,b=f.end,w=f.startIndex,T=f.endIndex,R=f.direction,k=this.pointsList,q=k;return R===Kr.HORIZONTAL?(k[w]={x:y.x,y:y.y+p.y},k[T]={x:b.x,y:b.y+p.y},q=this.pointsList.map(function(ae){return ae})):R===Kr.VERTICAL&&(k[w]={x:y.x+p.x,y:y.y},k[T]={x:b.x+p.x,y:b.y},q=this.pointsList.map(function(ae){return ae})),this.updatePointsAfterDrag(q),this.draggingPointList=q,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},k[w]),end:Object.assign({},k[T]),startIndex:w,endIndex:T,direction:R}}},{key:"dragAppend",value:function(f,p){this.isDragging=!0;var y=f.start,b=f.end,w=f.startIndex,T=f.endIndex,R=f.direction,k=this.pointsList;if(R===Kr.HORIZONTAL){k[w]={x:y.x,y:y.y+p.y},k[T]={x:b.x,y:b.y+p.y};var q=this.pointsList.map(function(Rt){return Rt});if(w!==0&&T!==this.pointsList.length-1&&(q=this.removeCrossPoints(w,T,q)),w===0){var ae={x:y.x,y:y.y+p.y};if(!Di(ae,this.sourceNode)){var ye=this.sourceNode.anchors;q=this.getDraggingPoints(R,"start",ae,ye,q)}}if(T===this.pointsList.length-1){var Me={x:b.x,y:b.y+p.y};if(!Di(Me,this.targetNode)){var Re=this.targetNode.anchors;q=this.getDraggingPoints(R,"end",Me,Re,q)}}this.updatePointsAfterDrag(q),this.draggingPointList=q}else if(R===Kr.VERTICAL){k[w]={x:y.x+p.x,y:y.y},k[T]={x:b.x+p.x,y:b.y};var We=this.pointsList.map(function(Rt){return Rt});if(w!==0&&T!==this.pointsList.length-1&&(We=this.removeCrossPoints(w,T,We)),w===0){var lt={x:y.x+p.x,y:y.y};if(!Di(lt,this.sourceNode)){var kt=this.sourceNode.anchors;We=this.getDraggingPoints(R,"start",lt,kt,We)}}if(T===this.pointsList.length-1){var wt={x:b.x+p.x,y:b.y};if(!Di(wt,this.targetNode)){var er=this.targetNode.anchors;We=this.getDraggingPoints(R,"end",wt,er,We)}}this.updatePointsAfterDrag(We),this.draggingPointList=We}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},k[w]),end:Object.assign({},k[T]),startIndex:w,endIndex:T,direction:R}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=at(Se(this.points));this.pointsList=f.map(function(b){return b}),this.draggingPointList=[];var p=f[0];this.startPoint=Object.assign({},p);var y=f[f.length-1];this.endPoint=Object.assign({},y)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var p=this.updateCrossPoints(f);this.points=p.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var p=f.startPoint,y=f.endPoint,b=f.sourceNode,w=f.targetNode,T=ft({x:p.x,y:p.y},{x:y.x,y:y.y},b,w,this.offset||0);this.pointsList=T,this.initPoints()}}])&&np(o.prototype,a),d}(Qa),ep=Ir(wr.prototype,"dbClickPosition",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ir(wr.prototype,"initPoints",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"initPoints"),wr.prototype),Ir(wr.prototype,"updatePoints",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePoints"),wr.prototype),Ir(wr.prototype,"updateStartPoint",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateStartPoint"),wr.prototype),Ir(wr.prototype,"moveStartPoint",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveStartPoint"),wr.prototype),Ir(wr.prototype,"updateEndPoint",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateEndPoint"),wr.prototype),Ir(wr.prototype,"moveEndPoint",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveEndPoint"),wr.prototype),Ir(wr.prototype,"dragAppendStart",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendStart"),wr.prototype),Ir(wr.prototype,"dragAppendSimple",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendSimple"),wr.prototype),Ir(wr.prototype,"dragAppend",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppend"),wr.prototype),Ir(wr.prototype,"dragAppendEnd",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendEnd"),wr.prototype),Ir(wr.prototype,"updatePointsAfterDrag",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePointsAfterDrag"),wr.prototype),Ir(wr.prototype,"getAdjustStart",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustStart"),wr.prototype),Ir(wr.prototype,"getAdjustEnd",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustEnd"),wr.prototype),Ir(wr.prototype,"updateAfterAdjustStartAndEnd",[l.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateAfterAdjustStartAndEnd"),wr.prototype),wr),nu=function(n){var o=n.start,a=n.end,u=n.offset,d=n.verticalLength,f=n.type,p={leftX:0,leftY:0,rightX:0,rightY:0},y=Math.atan((a.y-o.y)/(a.x-o.x)),b=Math.atan(u/d),w=Math.sqrt(d*d+u*u);return f==="start"?a.x>=o.x?(p.leftX=o.x+w*Math.sin(y+b),p.leftY=o.y-w*Math.cos(y+b),p.rightX=o.x-w*Math.sin(y-b),p.rightY=o.y+w*Math.cos(y-b)):(p.leftX=o.x-w*Math.sin(y+b),p.leftY=o.y+w*Math.cos(y+b),p.rightX=o.x+w*Math.sin(y-b),p.rightY=o.y-w*Math.cos(y-b)):f==="end"&&(a.x>=o.x?(p.leftX=a.x+w*Math.sin(y-b),p.leftY=a.y-w*Math.cos(y-b),p.rightX=a.x-w*Math.sin(y+b),p.rightY=a.y+w*Math.cos(y+b)):(p.leftX=a.x-w*Math.sin(y-b),p.leftY=a.y+w*Math.cos(y-b),p.rightX=a.x+w*Math.sin(y+b),p.rightY=a.y-w*Math.cos(y+b))),p},Sv={x:1,y:0,z:0};function op(n){var o=Math.hypot(n.x,n.y);return{x:n.x/o,y:n.y/o,z:0}}function Tv(n){return u=function(f,p){return f.x*p.y-f.y*p.x}(o=Sv,a=n),d=Math.acos(function(f,p){var y=[f.x,f.y,f.z];return[p.x,p.y,p.z].reduce(function(b,w,T){return b+w*y[T]})}(op(o),op(a))),u>=0?d:-d;var o,a,u,d}function ip(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function rs(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?ip(Object(a),!0).forEach(function(u){Av(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):ip(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function Av(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Pv(n){return function(o){if(Array.isArray(o))return gc(o)}(n)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(n)||ap(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hf(n){return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},hf(n)}function yc(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||ap(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ap(n,o){if(n){if(typeof n=="string")return gc(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?gc(n,o):void 0}}function gc(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}var mc=function(n){var o=[],a={};return n.forEach(function(u){var d="".concat(u.x,"-").concat(u.y);u.id=d,a[d]=u}),Object.keys(a).forEach(function(u){o.push(a[u])}),o},ns=function(n,o){return n.width===0&&n.height===0?n:{centerX:n.centerX,centerY:n.centerY,minX:n.minX-o,minY:n.minY-o,maxX:n.maxX+o,maxY:n.maxY+o,height:n.height+2*o,width:n.width+2*o}},bc=function(n,o){var a=function(u,d){var f=Math.abs(u.x-d.centerX),p=Math.abs(u.y-d.centerY);return f/d.width>p/d.height?Kr.HORIZONTAL:Kr.VERTICAL}(o,n);return a===Kr.HORIZONTAL?{x:o.x>n.centerX?n.maxX:n.minX,y:o.y}:{x:o.x,y:o.y>n.centerY?n.maxY:n.minY}},up=function(n,o){var a=Math.min(n.minX,o.minX),u=Math.min(n.minY,o.minY),d=Math.max(n.maxX,o.maxX),f=Math.max(n.maxY,o.maxY);return{centerX:(a+d)/2,centerY:(u+f)/2,minX:a,minY:u,maxX:d,maxY:f,height:f-u,width:d-a}},ou=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,a=[],u=[];n.forEach(function(T){a.push(T.x),u.push(T.y)});var d=Math.min.apply(Math,a),f=Math.max.apply(Math,a),p=Math.min.apply(Math,u),y=Math.max.apply(Math,u),b=f-d,w=y-p;return o&&(b+=o,w+=o),{centerX:(d+f)/2,centerY:(p+y)/2,maxX:f,maxY:y,minX:d,minY:p,x:(d+f)/2,y:(p+y)/2,height:w,width:b}},_c=function(n){var o=n.minX,a=n.minY,u=n.maxX,d=n.maxY;return[{x:o,y:a},{x:u,y:a},{x:u,y:d},{x:o,y:d}]},A=function(n,o){var a=n.x,u=n.y;return a<o.minX||a>o.maxX||u<o.minY||u>o.maxY},U=function(n,o){return Math.abs(n.x-o.x)+Math.abs(n.y-o.y)},J=function(n,o,a,u,d){return U(n,o)+U(n,a)+function(f,p){var y=0;return p.forEach(function(b){b&&(f.x===b.x&&(y+=-2),f.y===b.y&&(y+=-2))}),y}(n,[o,a,u,d])},Ie=function n(o,a,u,d,f){f||(f=0),o.unshift(a[d]),u[d]&&u[d]!==d&&f<=100&&n(o,a,u,u[d],f+1)},Ve=function(n,o,a,u){var d=o.x-n.x,f=o.y-n.y,p=u.x-a.x,y=u.y-a.y,b=(-f*(n.x-a.x)+d*(n.y-a.y))/(-p*f+d*y),w=(p*(n.y-a.y)-y*(n.x-a.x))/(-p*f+d*y);return b>=0&&b<=1&&w>=0&&w<=1},ke=function(n,o,a){if(a.width===0&&a.height===0)return!1;var u=yc(_c(a),4),d=u[0],f=u[1],p=u[2],y=u[3];return Ve(n,o,d,f)||Ve(n,o,d,y)||Ve(n,o,f,p)||Ve(n,o,p,y)},Ge=function(n,o,a,u,d,f,p){var y=[],b=[o],w={},T={},R={};T[o.id]=0,R[o.id]=J(o,a,o);var k={};n.forEach(function(ye){k[ye.id]=ye});for(var q=function(){var ye,Me,Re,We=void 0,lt=1/0;if(b.forEach(function(wt){R[wt.id]<lt&&(lt=R[wt.id],We=wt)}),We===a){var kt=[];return Ie(kt,k,w,a.id),{v:kt}}Me=We,(Re=(ye=b).indexOf(Me))>-1&&ye.splice(Re,1),y.push(We),function(wt,er,Rt,Tt){var vr=[];return wt.forEach(function(Fr){Fr!==er&&(Fr.x!==er.x&&Fr.y!==er.y||ke(Fr,er,Rt)||ke(Fr,er,Tt)||vr.push(Fr))}),mc(vr)}(n,We,u,d).forEach(function(wt){if(y.indexOf(wt)===-1){b.indexOf(wt)===-1&&b.push(wt);var er=R[We.id]+U(We,wt);T[wt.id]&&er>=T[wt.id]||(w[wt.id]=We.id,T[wt.id]=er,R[wt.id]=T[wt.id]+J(wt,a,o,f,p))}})};b.length;){var ae=q();if(hf(ae)==="object")return ae.v}return[o,a]},ot=function(n){return _o(n)},at=function(n){for(var o=1;o<n.length-1;){var a=n[o-1],u=n[o],d=n[o+1];a.x===u.x&&u.x===d.x||a.y===u.y&&u.y===d.y?n.splice(o,1):o++}return n},ft=function(n,o,a,u,d){var f,p,y=ot(a),b=ot(u),w=ns(y,d),T=ns(b,d),R=bc(w,n),k=bc(T,o);if(f=w,p=T,2*Math.abs(f.centerX-p.centerX)<f.width+p.width&&2*Math.abs(f.centerY-p.centerY)<f.height+p.height){var q=Ue(n,o,R,k);return[n,R].concat(Pv(q),[k,o])}var ae=ou([R,k]),ye=up(w,ae),Me=up(T,ae),Re=[];Re=(Re=Re.concat(_c(ye))).concat(_c(Me));var We={x:(n.x+o.x)/2,y:(n.y+o.y)/2};[ae,ye,Me].forEach(function(kt){Re=Re.concat(function(wt,er){return function(Rt,Tt){return Tt<Rt.minX||Tt>Rt.maxX?[]:[{x:Tt,y:Rt.minY},{x:Tt,y:Rt.maxY}]}(wt,er.x).concat(function(Rt,Tt){return Tt<Rt.minY||Tt>Rt.maxY?[]:[{x:Rt.minX,y:Tt},{x:Rt.maxX,y:Tt}]}(wt,er.y))}(kt,We).filter(function(wt){return A(wt,w)&&A(wt,T)}))}),[{x:R.x,y:k.y},{x:k.x,y:R.y}].forEach(function(kt){A(kt,w)&&A(kt,T)&&Re.push(kt)}),Re.unshift(R),Re.push(k),Re=mc(Re);var lt=Ge(Re,R,k,y,b,n,o);return lt.unshift(n),lt.push(o),lt.length>2&&(lt=at(lt)),mc(lt)},ut=function(n){var o;if(n.length===1)o=[n[0],n[0]];else if(n.length>=2){for(var a=n[0],u=n[1],d=eo(a.x,a.y,u.x,u.y),f=1;f<n.length-1;f++){var p=n[f],y=n[f+1],b=eo(p.x,p.y,y.x,y.y);b>d&&(d=b,a=p,u=y)}o=[a,u]}return o},pt=function(n,o,a){var u=Di(n,a),d=Di(o,a);return u&&d},_t=function(n,o,a){var u=Di(n,a),d=Di(o,a);return!(u&&d)&&(u||d)},it=function(n,o,a){for(var u,d,f=_o(a),p=_c(f),y=0;y<p.length;y++)Ve(n,o,p[y],p[(y+1)%p.length])&&(d=[p[y],p[(y+1)%p.length]]);return d&&(u=function(b,w,T,R){var k=(w.y-b.y)*(R.x-T.x)-(b.x-w.x)*(T.y-R.y);if(k===0)return!1;var q=((w.x-b.x)*(R.x-T.x)*(T.y-b.y)+(w.y-b.y)*(R.x-T.x)*b.x-(R.y-T.y)*(w.x-b.x)*T.x)/k,ae=-((w.y-b.y)*(R.y-T.y)*(T.x-b.x)+(w.x-b.x)*(R.y-T.y)*b.y-(R.x-T.x)*(w.y-b.y)*T.y)/k;return(q-b.x)*(q-w.x)<=0&&(ae-b.y)*(ae-w.y)<=0&&(q-T.x)*(q-R.x)<=0&&(ae-T.y)*(ae-R.y)<=0&&{x:q,y:ae}}(n,o,d[0],d[1])),u},dt=function(n,o){var a;return n.x===o.x?a=Kr.VERTICAL:n.y===o.y&&(a=Kr.HORIZONTAL),a},Se=function(n){var o=n.split(" "),a=[];return o&&o.forEach(function(u){var d=yc(u.split(","),2),f=d[0],p=d[1];a.push({x:Number(f),y:Number(p)})}),a},Ue=function(n,o,a,u){var d=[];if(dt(n,a)===dt(o,u))n.y===a.y?(d.push({x:a.x,y:(a.y+u.y)/2}),d.push({x:u.x,y:(a.y+u.y)/2})):(d.push({x:(a.x+u.x)/2,y:a.y}),d.push({x:(a.x+u.x)/2,y:u.y}));else{var f={x:a.x,y:u.y},p=ua(f,n,a),y=ua(f,o,u);if(p||y)f={x:u.x,y:a.y};else{var b=st(f,n,a),w=st(f,o,u);b&&w&&(f={x:u.x,y:a.y})}d.push(f)}return d},st=function(n,o,a){return n.x===o.x&&n.x===a.x||n.y===o.y&&n.y===a.y},St=function(n){if(!n)return 0;for(var o=0,a=0;a<n.length;a++){var u=n.charCodeAt(a);n.match(/[A-Z]/)?o+=1.5:o+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return o},Je=function(n){var o=n.start,a=n.end,u=n.sourceNode,d=n.targetNode,f=n.offset,p=_o(u),y=_o(d),b=ns(p,f),w=ns(y,f);return{sNext:bc(b,o),ePre:bc(w,a)}},At=function(n){var o=n.replace(/M/g,"").replace(/C/g,",").split(",");return[tt(o[0]),tt(o[1]),tt(o[2]),tt(o[3])]},tt=function(n){var o=yc(n.replace(/(^\s*)/g,"").split(" "),2);return{x:+o[0],y:+o[1]}},vt=function(n){var o=At(n),a=yc(o,4),u=function(d,f,p,y){return function(b){if(b<0||b>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:d.x*Math.pow(1-b,3)+3*f.x*b*Math.pow(1-b,2)+3*p.x*Math.pow(b,2)*(1-b)+y.x*Math.pow(b,3),y:d.y*Math.pow(1-b,3)+3*f.y*b*Math.pow(1-b,2)+3*p.y*Math.pow(b,2)*(1-b)+y.y*Math.pow(b,3)}}(.95)}(a[0],a[1],a[2],a[3]);return[u,o[3]]},rt=function(n,o){for(var a,u=n.x,d=n.y,f=Se(o),p=Number.MAX_SAFE_INTEGER,y=[],b=0;b<f.length;b++)y.push({start:f[b],end:f[(b+1)%f.length]});if(y.forEach(function(k){var q=k.start,ae=k.end;if(q.x===ae.x){var ye={x:q.x,y:d};if(ua(ye,q,ae)){var Me=Math.abs(q.x-u);Me<p&&(p=Me,a=ye)}}else if(q.y===ae.y){var Re={x:u,y:q.y};if(ua(Re,q,ae)){var We=Math.abs(q.y-d);We<p&&(p=We,a=Re)}}}),!a){var w=y[0],T=w.start,R=w.end;a={x:T.x+(R.x-T.x)/2,y:T.y+(R.y-T.y)/2}}return a},yt=function(n){return Lu(n,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},Yt=function(n,o){return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))};i(204);var rr=function(){};function Et(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Qe(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var Ye=window.document;function nr(n){var o=n.onDragStart,a=o===void 0?rr:o,u=n.onDragging,d=u===void 0?rr:u,f=n.onDragEnd,p=f===void 0?rr:f,y=n.step,b=y===void 0?1:y,w=n.isStopPropagation,T=w===void 0||w,R=!1,k=!1,q=0,ae=0,ye=0,Me=0;function Re(lt){if(T&&lt.stopPropagation(),k&&(R=!0,ye+=lt.clientX-q,Me+=lt.clientY-ae,q=lt.clientX,ae=lt.clientY,Math.abs(ye)>b||Math.abs(Me)>b)){var kt=ye%b,wt=Me%b,er=ye-kt,Rt=Me-wt;ye=kt,Me=wt,d({deltaX:er,deltaY:Rt,event:lt})}}function We(lt){if(T&&lt.stopPropagation(),k=!1,Ye.removeEventListener("mousemove",Re,!1),Ye.removeEventListener("mouseup",We,!1),R)return R=!1,p({event:lt})}return function(lt){if(lt.button===0)return T&&lt.stopPropagation(),k=!0,q=lt.clientX,ae=lt.clientY,Ye.addEventListener("mousemove",Re,!1),Ye.addEventListener("mouseup",We,!1),a({event:lt})}}var Te,Lt,br,ur,mr,Mr,ln,wn,xr,mn,$r,fn,bn,Wr=function(){function n(u){var d=this,f=u.onDragStart,p=f===void 0?rr:f,y=u.onDragging,b=y===void 0?rr:y,w=u.onDragEnd,T=w===void 0?rr:w,R=u.eventType,k=R===void 0?"":R,q=u.eventCenter,ae=q===void 0?null:q,ye=u.step,Me=ye===void 0?1:ye,Re=u.isStopPropagation,We=Re===void 0||Re,lt=u.model,kt=lt===void 0?null:lt,wt=u.data,er=wt===void 0?null:wt;(function(Rt,Tt){if(!(Rt instanceof Tt))throw new TypeError("Cannot call a class as a function")})(this,n),Qe(this,"onDragStart",void 0),Qe(this,"onDragging",void 0),Qe(this,"onDragEnd",void 0),Qe(this,"step",void 0),Qe(this,"isStopPropagation",void 0),Qe(this,"isDragging",!1),Qe(this,"isStartDragging",!1),Qe(this,"startX",0),Qe(this,"startY",0),Qe(this,"sumDeltaX",0),Qe(this,"sumDeltaY",0),Qe(this,"eventType",void 0),Qe(this,"eventCenter",void 0),Qe(this,"model",void 0),Qe(this,"data",void 0),Qe(this,"startTime",void 0),Qe(this,"handleMouseDown",function(Rt){var Tt,vr;if(Rt.button===0){d.isStopPropagation&&Rt.stopPropagation(),d.isStartDragging=!0,d.startX=Rt.clientX,d.startY=Rt.clientY,Ye.addEventListener("mousemove",d.handleMouseMove,!1),Ye.addEventListener("mouseup",d.handleMouseUp,!1);var Fr=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();(vr=d.eventCenter)===null||vr===void 0||vr.emit(ir["".concat(d.eventType,"_MOUSEDOWN")],{e:Rt,data:d.data||Fr}),d.startTime=new Date().getTime()}}),Qe(this,"handleMouseMove",function(Rt){if(d.isStopPropagation&&Rt.stopPropagation(),d.isStartDragging&&(d.sumDeltaX+=Rt.clientX-d.startX,d.sumDeltaY+=Rt.clientY-d.startY,d.startX=Rt.clientX,d.startY=Rt.clientY,d.step<=1||Math.abs(d.sumDeltaX)>d.step||Math.abs(d.sumDeltaY)>d.step)){var Tt,vr=d.sumDeltaX%d.step,Fr=d.sumDeltaY%d.step,qr=d.sumDeltaX-vr,Vr=d.sumDeltaY-Fr;d.sumDeltaX=vr,d.sumDeltaY=Fr;var en,Ln=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();d.isDragging||((en=d.eventCenter)===null||en===void 0||en.emit(ir["".concat(d.eventType,"_DRAGSTART")],{e:Rt,data:d.data||Ln}),d.onDragStart({event:Rt})),d.isDragging=!0,Promise.resolve().then(function(){var Vn,So;d.onDragging({deltaX:qr,deltaY:Vr,event:Rt}),(Vn=d.eventCenter)===null||Vn===void 0||Vn.emit(ir["".concat(d.eventType,"_MOUSEMOVE")],{e:Rt,data:d.data||Ln}),(So=d.eventCenter)===null||So===void 0||So.emit(ir["".concat(d.eventType,"_DRAG")],{e:Rt,data:d.data||Ln})})}}),Qe(this,"handleMouseUp",function(Rt){d.isStartDragging=!1,d.isStopPropagation&&Rt.stopPropagation(),Promise.resolve().then(function(){var Tt,vr,Fr;Ye.removeEventListener("mousemove",d.handleMouseMove,!1),Ye.removeEventListener("mouseup",d.handleMouseUp,!1);var qr=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();(vr=d.eventCenter)===null||vr===void 0||vr.emit(ir["".concat(d.eventType,"_MOUSEUP")],{e:Rt,data:d.data||qr}),d.isDragging&&(d.isDragging=!1,d.onDragEnd({event:Rt}),(Fr=d.eventCenter)===null||Fr===void 0||Fr.emit(ir["".concat(d.eventType,"_DROP")],{e:Rt,data:d.data||qr}))})}),Qe(this,"cancelDrag",function(){Ye.removeEventListener("mousemove",d.handleMouseMove,!1),Ye.removeEventListener("mouseup",d.handleMouseUp,!1),d.onDragEnd({event:null}),d.isDragging=!1}),this.onDragStart=p,this.onDragging=b,this.onDragEnd=T,this.step=Me,this.isStopPropagation=We,this.eventType=k,this.eventCenter=ae,this.model=kt,this.data=er}var o,a;return o=n,(a=[{key:"setStep",value:function(u){this.step=u}}])&&Et(o.prototype,a),n}(),An={node:!1,edge:!1},Gn={node:!0,edge:!0};function nn(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function lr(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?nn(Object(a),!0).forEach(function(u){Yn(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):nn(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function _n(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||Jt(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nr(n){return function(o){if(Array.isArray(o))return _r(o)}(n)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(n)||Jt(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jt(n,o){if(n){if(typeof n=="string")return _r(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_r(n,o):void 0}}function _r(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function Sr(n){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Sr(n)}function Br(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function ei(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Yn(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function B(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var Le,Ce=200,jt=(Te=function(){function n(u){(function(ae,ye){if(!(ae instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,n),Yn(this,"rootEl",void 0),Br(this,"width",Lt,this),Br(this,"height",br,this),Yn(this,"theme",void 0),Yn(this,"eventCenter",void 0),Yn(this,"modelMap",new Map),Yn(this,"topElement",void 0),Yn(this,"animation",void 0),Yn(this,"idGenerator",void 0),Yn(this,"edgeGenerator",void 0),Yn(this,"nodeMoveRules",[]),Br(this,"edgeType",ur,this),Br(this,"nodes",mr,this),Br(this,"edges",Mr,this),Br(this,"overlapMode",ln,this),Br(this,"background",wn,this),Br(this,"transformModel",xr,this),Br(this,"editConfigModel",mn,this),Br(this,"gridSize",$r,this),Br(this,"partial",fn,this),Br(this,"fakerNode",bn,this);var d,f,p,y=u.container,b=u.background,w=b===void 0?{}:b,T=u.grid,R=u.idGenerator,k=u.edgeGenerator,q=u.animation;this.background=w,Sr(T)==="object"&&(this.gridSize=T.size),this.rootEl=y,this.editConfigModel=new Il(u),this.eventCenter=new Gd,this.transformModel=new xd(this.eventCenter),this.theme=Zl(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(d=q)&&typeof d!="boolean"?tc(cn(An),d):cn(d===!0?Gn:An),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=R,this.edgeGenerator=(f=this,typeof(p=k)!="function"?function(ae,ye,Me){return Object.assign({type:f.edgeType},Me)}:function(ae,ye,Me){var Re=p(ae,ye,Me);return Re?typeof Re=="string"?Object.assign({},Me,{type:Re}):Object.assign({type:Re},Me):{type:f.edgeType}}),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=pi()}var o,a;return o=n,a=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,d,f){return u[d.id]={index:f,model:d},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,d,f){return u[d.id]={index:f,model:d},u},{})}},{key:"modelsMap",get:function(){return[].concat(Nr(this.nodes),Nr(this.edges)).reduce(function(u,d){return u[d.id]=d,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(w){return u.push(w)}),this.edges.forEach(function(w){return u.push(w)}),u=u.sort(function(w,T){return w.zIndex-T.zIndex});for(var d=[],f=[-200,-200],p=[this.width+Ce,this.height+Ce],y=0;y<u.length;y++){var b=u[y];b.visible&&(!this.partial||b.isSelected||this.isElementInArea(b,f,p,!1,!1))&&d.push(b)}return d}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===zr.TEXT_EDIT}),d=this.edges.find(function(f){return f.state===zr.TEXT_EDIT});return u||d}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(d){d.isSelected&&u.set(d.id,d)}),this.edges.forEach(function(d){d.isSelected&&u.set(d.id,d)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(d){d.isSelected&&u.push(d)}),u}},{key:"getAreaElement",value:function(u,d){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],b=[],w=[];this.nodes.forEach(function(k){return w.push(k)}),this.edges.forEach(function(k){return w.push(k)});for(var T=0;T<w.length;T++){var R=w[T];y&&!R.visible||!this.isElementInArea(R,u,d,f,p)||b.push(R)}return b}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var d;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(d=this.nodesMap[u])===null||d===void 0?void 0:d.model}},{key:"getPointByClient",value:function(u){var d=u.x,f=u.y,p=this.rootEl.getBoundingClientRect(),y={x:d-p.left,y:f-p.top},b=_n(this.transformModel.HtmlPointToCanvasPoint([y.x,y.y]),2);return{domOverlayPosition:y,canvasOverlayPosition:{x:b[0],y:b[1]}}}},{key:"isElementInArea",value:function(u,d,f){var p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],y=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===Tn.NODE){for(var b=_o(u=u),w=b.minX,T=b.minY,R=b.maxX,k=b.maxY,q=[{x:w,y:T},{x:R,y:T},{x:R,y:k},{x:w,y:k}],ae=y,ye=0;ye<q.length;ye++){var Me=q[ye],Re=Me.x,We=Me.y,lt=this.transformModel.CanvasPointToHtmlPoint([Re,We]),kt=_n(lt,2);if(Re=kt[0],We=kt[1],ic([Re,We],d,f)!==y){ae=!y;break}}return ae}if(u.BaseType===Tn.EDGE){var wt=u=u,er=wt.startPoint,Rt=wt.endPoint,Tt=this.transformModel.CanvasPointToHtmlPoint([er.x,er.y]),vr=this.transformModel.CanvasPointToHtmlPoint([Rt.x,Rt.y]),Fr=ic(Tt,d,f),qr=ic(vr,d,f);return p?Fr&&qr:Fr||qr}return!1}},{key:"graphDataToModel",value:function(u){var d=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Xs(u.nodes,function(f){var p=d.getModel(f.type);if(!p)throw new Error("".concat(f.type,""));var y=f.x,b=f.y;return y&&b&&(f.x=di(y,d.gridSize),f.y=di(b,d.gridSize),Sr(f.text)==="object"&&(f.text.x-=Jl(y,d.gridSize),f.text.y-=Jl(b,d.gridSize))),new p(f,d)}):this.nodes=[],u.edges?this.edges=Xs(u.edges,function(f){var p=d.getModel(f.type);if(!p)throw new Error("".concat(f.type,""));return new p(f,d)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var p=f.getData();p&&!f.virtual&&u.push(p)});var d=[];return this.nodes.forEach(function(f){var p=f.getData();p&&!f.virtual&&d.push(p)}),{nodes:d,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,d=[],f=0;f<this.nodes.length;f++){var p=this.nodes[f];if(p.isDragging){u=!0;break}d.push(p.getHistoryData())}if(u)return!1;for(var y=!1,b=[],w=0;w<this.edges.length;w++){var T=this.edges[w];if(T.isDragging){y=!0;break}b.push(T.getHistoryData())}return!y&&{nodes:d,edges:b}}},{key:"getEdgeModelById",value:function(u){var d;return(d=this.edgesMap[u])===null||d===void 0?void 0:d.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var d=[],f=0;f<this.edges.length;f++){var p=this.edges[f],y=this.edges[f].sourceNodeId===u,b=this.edges[f].targetNodeId===u;(y||b)&&d.push(p)}return d}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],d=this.selectElements,f={nodes:[],edges:[]};return d.forEach(function(p){if(p.BaseType===Tn.NODE&&f.nodes.push(p.getData()),p.BaseType===Tn.EDGE){var y=p.getData(),b=d.get(y.sourceNodeId)&&d.get(y.targetNodeId);(u||b)&&f.edges.push(y)}}),f}},{key:"updateAttributes",value:function(u,d){this.getElement(u).updateAttributes(d)}},{key:"changeNodeId",value:function(u,d){return d||(d=pi()),this.nodesMap[d]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=d),f.targetNodeId===u&&(f.targetNodeId=d)}),this.nodesMap[u].model.id=d,this.nodesMap[d]=this.nodesMap[u],d):""}},{key:"changeEdgeId",value:function(u,d){return d||(d=pi()),this.edgesMap[d]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(d)}),d):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,d){return this.modelMap.set(u,d)}},{key:"toFront",value:function(u){var d,f,p,y=((d=this.nodesMap[u])===null||d===void 0?void 0:d.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);y&&(this.overlapMode===co.DEFAULT&&((p=this.topElement)===null||p===void 0||p.setZIndex(),y.setZIndex(9999),this.topElement=y),this.overlapMode===co.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,d){var f,p,y,b=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((p=this.edgesMap[u])===null||p===void 0?void 0:p.model);b&&(typeof d=="number"&&(y=d),d==="top"&&(y=Ja()),d==="bottom"&&(y=--cf),b.setZIndex(y))}},{key:"deleteNode",value:function(u){var d=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(ir.NODE_DELETE,{data:d})}},{key:"addNode",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,p=$n(u);p.id&&this.nodesMap[u.id]&&delete p.id;var y=this.getModel(p.type);if(!y)throw new Error("".concat(p.type,""));p.x=di(p.x,this.gridSize),p.y=di(p.y,this.gridSize);var b=new y(p,this);this.nodes.push(b);var w=b.getData(),T={data:w};return f&&(T.e=f),this.eventCenter.emit(d,T),b}},{key:"cloneNode",value:function(u){var d=this.getNodeModelById(u),f=d.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var p=this.addNode(f);return p.setSelected(!0),d.setSelected(!1),p.getData()}},{key:"moveNode",value:function(u,d,f){var p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],y=this.nodesMap[u];if(y){var b=y.model,w=b.getMoveDistance(d,f,p),T=_n(w,2);d=T[0],f=T[1],this.moveEdge(u,d,f)}}},{key:"moveNode2Coordinate",value:function(u,d,f){var p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],y=this.nodesMap[u];if(y){var b=y.model,w=b.x,T=b.y,R=d-w,k=f-T;this.moveNode(u,R,k,p)}}},{key:"editText",value:function(u){this.setElementStateById(u,zr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var d=$n(u),f=d.type;f||(f=this.edgeType),d.id&&this.edgesMap[d.id]&&delete d.id;var p=this.getModel(f);if(!p)throw new Error("".concat(f,""));var y=new p(lr(lr({},d),{},{type:f}),this),b=y.getData();return this.edges.push(y),this.eventCenter.emit(ir.EDGE_ADD,{data:b}),y}},{key:"moveEdge",value:function(u,d,f){for(var p=0;p<this.edges.length;p++){var y,b=this.edges[p],w=b.textPosition,T=w.x,R=w.y,k=this.edges[p].sourceNodeId===u,q=this.edges[p].targetNodeId===u;if(k&&b.moveStartPoint(d,f),q&&b.moveEndPoint(d,f),k||q)if(b.customTextPosition===!0)b.resetTextPosition();else if(b.modelType===Pr.POLYLINE_EDGE&&(y=b.text)!==null&&y!==void 0&&y.value){var ae=b.text,ye=rt(ae,b.points);b.moveText(ye.x-ae.x,ye.y-ae.y)}else{var Me=b.textPosition,Re=Me.x,We=Me.y;b.moveText(Re-T,We-R)}}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,d){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===d){var p=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(ir.EDGE_DELETE,{data:p})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var d=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(d,1),this.eventCenter.emit(ir.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var d=0;d<this.edges.length;d++)if(this.edges[d].sourceNodeId===u){var f=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(ir.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var d=0;d<this.edges.length;d++)if(this.edges[d].targetNodeId===u){var f=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(ir.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,d,f){this.nodes.forEach(function(p){p.id===u?p.setElementState(d,f):p.setElementState(zr.DEFAULT)}),this.edges.forEach(function(p){p.id===u?p.setElementState(d,f):p.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(u,d){this.nodes.forEach(function(f){f.id===u&&f.updateText(d)}),this.edges.forEach(function(f){f.id===u&&f.updateText(d)})}},{key:"selectNodeById",value:function(u){var d,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var p=(d=this.nodesMap[u])===null||d===void 0?void 0:d.model;p==null||p.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var d,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var p=(d=this.edgesMap[u])===null||d===void 0?void 0:d.model;p==null||p.setSelected(!0)}},{key:"selectElementById",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(d){d==null||d.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===co.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,d,f){for(var p=this,y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=u.reduce(function(Re,We){var lt=p.nodesMap[We].model.getMoveDistance(d,f,y);return Re[We]=lt,Re},{}),w=0;w<this.edges.length;w++){var T=this.edges[w],R=b[T.sourceNodeId],k=void 0,q=void 0;if(R){var ae=_n(R,2);k=ae[0],q=ae[1],T.moveStartPoint(k,q)}var ye=b[T.targetNodeId];if(ye){var Me=_n(ye,2);k=Me[0],q=Me[1],T.moveEndPoint(k,q)}(R||ye)&&T.moveText(k,q)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,d){var f=this.getNodeModelById(u);if(f){var p=f.getData();p.type=d;var y=this.getModel(d);if(!y)throw new Error("".concat(d,""));var b=new y(p,this);this.nodes.splice(this.nodesMap[u].index,1,b),this.getNodeEdges(u).forEach(function(w){if(w.sourceNodeId===u){var T=Zd(b,w.startPoint,b.width,b.height);w.updateStartPoint(T)}if(w.targetNodeId===u){var R=Zd(b,w.endPoint,b.width,b.height);w.updateEndPoint(R)}})}}},{key:"changeEdgeType",value:function(u,d){var f=this.getEdgeModelById(u);if(f&&f.type!==d){var p=f.getData();p.type=d;var y=this.getModel(d);if(!y)throw new Error("".concat(d,""));delete p.pointsList;var b=new y(p,this);this.edges.splice(this.edgesMap[u].index,1,b)}}},{key:"getNodeIncomingEdge",value:function(u){var d=[];return this.edges.forEach(function(f){f.targetNodeId===u&&d.push(f)}),d}},{key:"getNodeOutgoingEdge",value:function(u){var d=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&d.push(f)}),d}},{key:"getNodeIncomingNode",value:function(u){var d=this,f=[];return this.edges.forEach(function(p){p.targetNodeId===u&&f.push(d.nodesMap[p.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var d=this,f=[];return this.edges.forEach(function(p){p.sourceNodeId===u&&f.push(d.nodesMap[p.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=Zl(lr(lr({},this.theme),u))}},{key:"resize",value:function(u,d){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=d||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,d=[],f=[];u.forEach(function(R){var k=R.x,q=R.y,ae=R.width,ye=R.height,Me=R.getNodeStyle().strokeWidth,Re=Me===void 0?0:Me;d=d.concat([k+ae/2+Re,k-ae/2-Re]),f=f.concat([q+ye/2+Re,q-ye/2-Re])});var p=Math.min.apply(Math,Nr(d)),y=Math.max.apply(Math,Nr(d)),b=Math.min.apply(Math,Nr(f)),w=y-p||0,T=Math.max.apply(Math,Nr(f))-b||0;return{virtualRectWidth:w,virtualRectHeight:T,virtualRectCenterPositionX:p+w/2,virtualRectCenterPositionY:b+T/2}}},{key:"translateCenter",value:function(){var u=this.nodes,d=this.width,f=this.height,p=this.rootEl,y=this.transformModel;if(u.length){var b=d||p.clientWidth,w=f||p.clientHeight,T=this.getVirtualRectSize(),R=T.virtualRectCenterPositionX,k=T.virtualRectCenterPositionY;y.focusOn(R,k,b,w)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,p=this.width,y=this.height,b=this.rootEl,w=this.transformModel;if(f.length){var T=p||b.clientWidth,R=y||b.clientHeight,k=this.getVirtualRectSize(),q=k.virtualRectWidth,ae=k.virtualRectHeight,ye=k.virtualRectCenterPositionX,Me=k.virtualRectCenterPositionY,Re=(q+d)/T,We=(ae+u)/R,lt=0;lt=1/Math.max(Re,We);var kt=[T/2,R/2];w.zoom(lt,kt),w.focusOn(ye,Me,T,R)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],a&&ei(o.prototype,a),n}(),Lt=B(Te.prototype,"width",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),br=B(Te.prototype,"height",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=B(Te.prototype,"edgeType",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=B(Te.prototype,"nodes",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mr=B(Te.prototype,"edges",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ln=B(Te.prototype,"overlapMode",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return co.DEFAULT}}),wn=B(Te.prototype,"background",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=B(Te.prototype,"transformModel",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn=B(Te.prototype,"editConfigModel",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=B(Te.prototype,"gridSize",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),fn=B(Te.prototype,"partial",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bn=B(Te.prototype,"fakerNode",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B(Te.prototype,"nodesMap",[l.m],Object.getOwnPropertyDescriptor(Te.prototype,"nodesMap"),Te.prototype),B(Te.prototype,"edgesMap",[l.m],Object.getOwnPropertyDescriptor(Te.prototype,"edgesMap"),Te.prototype),B(Te.prototype,"modelsMap",[l.m],Object.getOwnPropertyDescriptor(Te.prototype,"modelsMap"),Te.prototype),B(Te.prototype,"sortElements",[l.m],Object.getOwnPropertyDescriptor(Te.prototype,"sortElements"),Te.prototype),B(Te.prototype,"textEditElement",[l.m],Object.getOwnPropertyDescriptor(Te.prototype,"textEditElement"),Te.prototype),B(Te.prototype,"selectElements",[l.m],Object.getOwnPropertyDescriptor(Te.prototype,"selectElements"),Te.prototype),B(Te.prototype,"selectNodes",[l.m],Object.getOwnPropertyDescriptor(Te.prototype,"selectNodes"),Te.prototype),B(Te.prototype,"setFakerNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"setFakerNode"),Te.prototype),B(Te.prototype,"removeFakerNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"removeFakerNode"),Te.prototype),B(Te.prototype,"setModel",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"setModel"),Te.prototype),B(Te.prototype,"toFront",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"toFront"),Te.prototype),B(Te.prototype,"setElementZIndex",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"setElementZIndex"),Te.prototype),B(Te.prototype,"deleteNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteNode"),Te.prototype),B(Te.prototype,"addNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"addNode"),Te.prototype),B(Te.prototype,"cloneNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"cloneNode"),Te.prototype),B(Te.prototype,"moveNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNode"),Te.prototype),B(Te.prototype,"moveNode2Coordinate",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNode2Coordinate"),Te.prototype),B(Te.prototype,"editText",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"editText"),Te.prototype),B(Te.prototype,"addEdge",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"addEdge"),Te.prototype),B(Te.prototype,"moveEdge",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveEdge"),Te.prototype),B(Te.prototype,"deleteEdgeBySourceAndTarget",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeBySourceAndTarget"),Te.prototype),B(Te.prototype,"deleteEdgeById",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeById"),Te.prototype),B(Te.prototype,"deleteEdgeBySource",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeBySource"),Te.prototype),B(Te.prototype,"deleteEdgeByTarget",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeByTarget"),Te.prototype),B(Te.prototype,"setElementStateById",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"setElementStateById"),Te.prototype),B(Te.prototype,"updateText",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"updateText"),Te.prototype),B(Te.prototype,"selectNodeById",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectNodeById"),Te.prototype),B(Te.prototype,"selectEdgeById",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectEdgeById"),Te.prototype),B(Te.prototype,"selectElementById",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectElementById"),Te.prototype),B(Te.prototype,"clearSelectElements",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"clearSelectElements"),Te.prototype),B(Te.prototype,"moveNodes",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNodes"),Te.prototype),B(Te.prototype,"setDefaultEdgeType",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"setDefaultEdgeType"),Te.prototype),B(Te.prototype,"changeNodeType",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"changeNodeType"),Te.prototype),B(Te.prototype,"changeEdgeType",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"changeEdgeType"),Te.prototype),B(Te.prototype,"getNodeIncomingEdge",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeIncomingEdge"),Te.prototype),B(Te.prototype,"getNodeOutgoingEdge",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeOutgoingEdge"),Te.prototype),B(Te.prototype,"getNodeIncomingNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeIncomingNode"),Te.prototype),B(Te.prototype,"getNodeOutgoingNode",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeOutgoingNode"),Te.prototype),B(Te.prototype,"setTheme",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"setTheme"),Te.prototype),B(Te.prototype,"resize",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"resize"),Te.prototype),B(Te.prototype,"clearData",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"clearData"),Te.prototype),B(Te.prototype,"translateCenter",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"translateCenter"),Te.prototype),B(Te.prototype,"fitView",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"fitView"),Te.prototype),B(Te.prototype,"openEdgeAnimation",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"openEdgeAnimation"),Te.prototype),B(Te.prototype,"closeEdgeAnimation",[l.k],Object.getOwnPropertyDescriptor(Te.prototype,"closeEdgeAnimation"),Te.prototype),Te),Er=jt;function W(n){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},W(n)}function D(){return D=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},D.apply(this,arguments)}function ue(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function we(n,o){return we=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},we(n,o)}function Pe(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=ge(n);if(o){var d=ge(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return le(this,a)}}function le(n,o){if(o&&(W(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ie(n)}function ie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ge(n){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},ge(n)}function X(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var ne,H=gi(Le=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&we(f,p)})(d,n);var o,a,u=Pe(d);function d(f){var p;(function(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")})(this,d),X(ie(p=u.call(this)),"stepDrag",void 0),X(ie(p),"stepScrollX",0),X(ie(p),"stepScrollY",0),X(ie(p),"onDragging",function(T){var R=T.deltaX,k=T.deltaY;p.setState({isDragging:!0});var q=p.props.graphModel,ae=q.transformModel;q.editConfigModel.stopMoveGraph||ae.translate(R,k)}),X(ie(p),"onDragEnd",function(){p.setState({isDragging:!1})}),X(ie(p),"zoomHandler",function(T){var R=p.props,k=R.graphModel,q=k.editConfigModel,ae=k.transformModel,ye=k.gridSize,Me=R.graphModel,Re=T.deltaX,We=T.deltaY;if(q.stopScrollGraph||T.ctrlKey===!0){if(!q.stopZoomGraph){T.preventDefault();var lt=Me.getPointByClient({x:T.clientX,y:T.clientY}).canvasOverlayPosition,kt=lt.x,wt=lt.y;ae.zoom(T.deltaY<0,[kt,wt])}}else{if(T.preventDefault(),p.stepScrollX+=Re,p.stepScrollY+=We,Math.abs(p.stepScrollX)>=ye){var er=p.stepScrollX%ye,Rt=p.stepScrollX-er;ae.translate(-Rt*ae.SCALE_X,0),p.stepScrollX=er}if(Math.abs(p.stepScrollY)>=ye){var Tt=p.stepScrollY%ye,vr=p.stepScrollY-Tt;ae.translate(0,-vr*ae.SCALE_Y),p.stepScrollY=Tt}}}),X(ie(p),"clickHandler",function(T){if(T.target.getAttribute("name")==="canvas-overlay"){var R=p.props.graphModel;R.selectElements.size>0&&R.clearSelectElements(),R.eventCenter.emit(ir.BLANK_CLICK,{e:T})}}),X(ie(p),"handleContextMenu",function(T){if(T.target.getAttribute("name")==="canvas-overlay"){T.preventDefault();var R=p.props.graphModel,k=R.getPointByClient({x:T.clientX,y:T.clientY});R.eventCenter.emit(ir.BLANK_CONTEXTMENU,{e:T,position:k})}}),X(ie(p),"mouseDownHandler",function(T){var R=p.props.graphModel,k=R.eventCenter,q=R.editConfigModel,ae=R.transformModel.SCALE_X,ye=R.gridSize,Me=T.target,Re=!q.adjustEdge&&!q.adjustNodePosition;(Me.getAttribute("name")==="canvas-overlay"||Re)&&(q.stopMoveGraph?k.emit(ir.BLANK_MOUSEDOWN,{e:T}):(p.stepDrag.setStep(ye*ae),p.stepDrag.handleMouseDown(T)),p.clickHandler(T))});var y=f.graphModel,b=y.gridSize,w=y.eventCenter;return p.stepDrag=new Wr({onDragging:p.onDragging,onDragEnd:p.onDragEnd,step:b,eventType:"BLANK",isStopPropagation:!1,eventCenter:w,model:null}),p.state={isDragging:!1},p}return o=d,(a=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,p=this.props,y=p.children,b=p.dnd,w=this.state.isDragging;return Object(xe.g)("svg",D({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:w?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},b.eventMap()),Object(xe.g)("g",{transform:f},y))}}])&&ue(o.prototype,a),d}(xe.a))||Le;function Ee(n){return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ee(n)}function je(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function $e(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Ke(n,o){return Ke=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ke(n,o)}function He(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ut(n);if(o){var d=Ut(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ct(this,a)}}function ct(n,o){if(o&&(Ee(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Ut(n){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ut(n)}var hr=gi(ne=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Ke(f,p)})(d,n);var o,a,u=He(d);function d(){return je(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,p=f.tool,y=f.graphModel,b=p.getTools().map(function(w){return Object(xe.g)(w,{graphModel:y,logicFlow:p.instance})});return p.components=b,b}},{key:"triggerToolRender",value:function(){var f=this.props,p=f.tool,y=f.graphModel,b=document.querySelector("#ToolOverlay_".concat(y.flowId)),w=p.getInstance();w.components.forEach(function(T){return T(w,b)}),w.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(xe.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&$e(o.prototype,a),d}(xe.a))||ne;function It(n){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},It(n)}function Qt(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function fr(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function jr(n,o){return jr=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},jr(n,o)}function on(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=iu(n);if(o){var d=iu(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ro(this,a)}}function ro(n,o){if(o&&(It(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function iu(n){return iu=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},iu(n)}var Eo,sp=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&jr(f,p)})(d,n);var o,a,u=on(d);function d(){return Qt(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"render",value:function(){var f=this.props.background;return Object(xe.g)("div",{className:"lf-background"},Object(xe.g)("div",{style:f,className:"lf-background-area"}))}}])&&fr(o.prototype,a),d}(xe.a);function Oo(n){return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Oo(n)}function cp(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Sx(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Nv(n,o){return Nv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Nv(n,o)}function Tx(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=lp(n);if(o){var d=lp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Ax(this,a)}}function Ax(n,o){if(o&&(Oo(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mb(n)}function mb(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lp(n){return lp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},lp(n)}function Px(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var bb=gi(Eo=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Nv(f,p)})(d,n);var o,a,u=Tx(d);function d(){var f;cp(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Px(mb(f=u.call.apply(u,[this].concat(y))),"id",pi()),f}return o=d,(a=[{key:"renderDot",value:function(){var f=this.props,p=f.config,y=p.color,b=p.thickness,w=b===void 0?2:b,T=f.size,R=f.visible,k=Math.min(Math.max(2,w),T/2),q=1;return R||(q=0),Object(xe.g)("rect",{width:k,height:k,rx:k/2,ry:k/2,fill:y,opacity:q})}},{key:"renderMesh",value:function(){var f=this.props,p=f.config,y=p.color,b=p.thickness,w=b===void 0?1:b,T=f.size,R=f.visible,k=Math.min(Math.max(1,w),T/2),q="M ".concat(T," 0 H0 M0 0 V0 ").concat(T),ae=1;return R||(ae=0),Object(xe.g)("path",{d:q,stroke:y,strokeWidth:k,opacity:ae})}},{key:"render",value:function(){var f=this.props,p=f.type,y=f.size,b=f.graphModel.transformModel,w=[b.SCALE_X,b.SKEW_Y,b.SKEW_X,b.SCALE_Y,b.TRANSLATE_X,b.TRANSLATE_Y].join(","),T="matrix(".concat(w,")");return Object(xe.g)("div",{className:"lf-grid"},Object(xe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(xe.g)("defs",null,Object(xe.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:T,x:"0",y:"0",width:y,height:y},p==="dot"&&this.renderDot(),p==="mesh"&&this.renderMesh())),Object(xe.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&Sx(o.prototype,a),d}(xe.a))||Eo;bb.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},i(52);function jv(n){return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jv(n)}function Nx(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return _b(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return _b(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _b(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}var Eb,Ec=function(n){var o={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(n).forEach(function(a){var u=Nx(a,2),d=u[0],f=u[1];(d==="style"||jv(f)!=="object")&&(o[d]=f)}),Object(xe.g)("line",o)};function Mv(n){return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Mv(n)}function Ob(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function fp(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Ob(Object(a),!0).forEach(function(u){jx(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Ob(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function jx(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Mx(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Rx(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Rv(n,o){return Rv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Rv(n,o)}function Cx(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=dp(n);if(o){var d=dp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Dx(this,a)}}function Dx(n,o){if(o&&(Mv(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function dp(n){return dp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},dp(n)}var wb,kx=gi(Eb=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Rv(f,p)})(d,n);var o,a,u=Cx(d);function d(){return Mx(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"render",value:function(){var f=this.props.snaplineModel,p=f.position,y=f.isShowHorizontal,b=f.isShowVertical,w=f.getStyle(),T=p.x,R=T===void 0?0:T,k=p.y,q=k===void 0?0:k,ae=fp(fp({x1:-1e5,y1:q,x2:1e5,y2:q},w),{},{stroke:y?w.stroke:"none"}),ye=fp(fp({x1:R,y1:-1e5,x2:R,y2:1e5},w),{},{stroke:b?w.stroke:"none"});return Object(xe.g)("g",{className:"lf-snapline"},Object(xe.g)(Ec,ae),Object(xe.g)(Ec,ye))}}])&&Rx(o.prototype,a),d}(xe.a))||Eb;function Cv(n){return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Cv(n)}function Ix(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return xb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return xb(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xb(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function au(n){var o=n.x,a=n.y,u=n.width,d=n.height,f=n.className,p=n.radius,y=o-u/2,b=a-d/2,w={};return Object.entries(n).forEach(function(T){var R=Ix(T,2),k=R[0],q=R[1];Cv(q)!=="object"&&(w[k]=q)}),w.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",p&&(w.rx=p,w.ry=p),w.x=y,w.y=b,Object(xe.g)("rect",w)}function Dv(n){return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Dv(n)}function Oc(){return Oc=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Oc.apply(this,arguments)}function Sb(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function Tb(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Sb(Object(a),!0).forEach(function(u){Lx(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Sb(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function Lx(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Fx(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Bx(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function kv(n,o){return kv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},kv(n,o)}function Gx(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=pp(n);if(o){var d=pp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Ux(this,a)}}function Ux(n,o){if(o&&(Dv(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function pp(n){return pp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},pp(n)}au.defaultProps={className:"",radius:""};var Ab,zx=gi(wb=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&kv(f,p)})(d,n);var o,a,u=Gx(d);function d(){return Fx(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,p=f.nodes,y=f.editConfigModel,b=y.hoverOutline,w=y.nodeSelectedOutline,T=[];return p.forEach(function(R){if(R.isHovered||R.isSelected){var k=R.isHovered,q=R.isSelected,ae=R.x,ye=R.y,Me=R.width,Re=R.height;if(w&&q||b&&k){var We=R.getOutlineStyle(),lt={};if(Object.keys(We).forEach(function(wt){wt!=="hover"&&(lt[wt]=We[wt])}),k){var kt=We.hover;lt=Tb(Tb({},lt),kt)}T.push(Object(xe.g)(au,Oc({className:"lf-outline-node",x:ae,y:ye,width:Me+10,height:Re+10},lt)))}}}),T}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,p=f.edges,y=f.editConfigModel,b=y.edgeSelectedOutline,w=y.hoverOutline,T=[],R=0;R<p.length;R++){var k=p[R];(b&&k.isSelected||w&&k.isHovered)&&(k.modelType===Pr.LINE_EDGE?T.push(this.getLineOutline(k)):k.modelType===Pr.POLYLINE_EDGE?T.push(this.getPolylineOutline(k)):k.modelType===Pr.BEZIER_EDGE&&T.push(this.getBezierOutline(k)))}return T}},{key:"getLineOutline",value:function(f){var p=f.startPoint,y=f.endPoint,b=(p.x+y.x)/2,w=(p.y+y.y)/2,T=Math.abs(p.x-y.x)+10,R=Math.abs(p.y-y.y)+10,k=f.getOutlineStyle();return Object(xe.g)(au,Oc({className:"lf-outline-edge",x:b,y:w,width:T,height:R},k))}},{key:"getPolylineOutline",value:function(f){var p=f.points,y=Se(p),b=ou(y,8),w=b.x,T=b.y,R=b.width,k=b.height,q=f.getOutlineStyle();return Object(xe.g)(au,Oc({className:"lf-outline",x:w,y:T,width:R,height:k},q))}},{key:"getBezierOutline",value:function(f){var p=f.path,y=At(p),b=ou(y,8),w=b.x,T=b.y,R=b.width,k=b.height,q=f.getOutlineStyle();return Object(xe.g)(au,Oc({className:"lf-outline",x:w,y:T,width:R,height:k},q))}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&Bx(o.prototype,a),d}(xe.a))||wb;function Iv(n){return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Iv(n)}function Hx(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return Pb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Pb(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pb(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function vf(n){var o=n.x,a=o===void 0?0:o,u=n.y,d=u===void 0?0:u,f=n.r,p=f===void 0?4:f,y=n.className,b={cx:a,cy:d,r:p,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(n).forEach(function(w){var T=Hx(w,2),R=T[0],k=T[1];Iv(k)!=="object"&&(b[R]=k)}),b.className=y?"lf-basic-shape ".concat(y):"lf-basic-shape",Object(xe.g)("circle",b)}function Lv(n){return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Lv(n)}function Xx(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return Nb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Nb(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nb(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function yf(){return yf=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},yf.apply(this,arguments)}function jb(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Mb(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Rb(n,o,a){return o&&Mb(n.prototype,o),a&&Mb(n,a),n}function Cb(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),o&&Fv(n,o)}function Fv(n,o){return Fv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Fv(n,o)}function Db(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=vp(n);if(o){var d=vp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Vx(this,a)}}function Vx(n,o){if(o&&(Lv(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hp(n)}function hp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vp(n){return vp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},vp(n)}function Bv(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var kb,Ib=function(n){Cb(a,n);var o=Db(a);function a(){var u;return jb(this,a),Bv(hp(u=o.call(this)),"dragHandler",void 0),Bv(hp(u),"onDragging",function(d){var f=d.event,p=u.props,y=p.graphModel,b=p.bezierModel,w=p.type,T=y.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,R=T.x,k=T.y;b.updateAdjustAnchor({x:R,y:k},w)}),Bv(hp(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new Wr({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return Rb(a,[{key:"render",value:function(){var u=this,d=this.props.position,f=d.x,p=d.y,y=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(xe.g)(vf,yf({className:"lf-bezier-adjust-anchor",x:f,y:p},y,{onMouseDown:function(b){u.dragHandler.handleMouseDown(b)}}))}}]),a}(xe.a),$x=gi(Ab=function(n){Cb(a,n);var o=Db(a);function a(){return jb(this,a),o.apply(this,arguments)}return Rb(a,[{key:"getBezierAdjust",value:function(u,d){var f=u.path,p=u.id,y=Xx(At(f),4),b=y[0],w=y[1],T=y[2],R=y[3],k=u.getEdgeStyle().adjustLine,q=[];return q.push(Object(xe.g)(Ec,yf({x1:b.x,y1:b.y,x2:w.x,y2:w.y},k))),q.push(Object(xe.g)(Ib,{position:w,bezierModel:u,graphModel:d,key:"".concat(p,"_ePre"),type:"sNext"})),q.push(Object(xe.g)(Ec,yf({x1:R.x,y1:R.y,x2:T.x,y2:T.y},k))),q.push(Object(xe.g)(Ib,{position:T,bezierModel:u,graphModel:d,key:"".concat(p,"_sNext"),type:"ePre"})),q}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,d=u.edges,f=[],p=0;p<d.length;p++){var y=d[p];y.isSelected&&y.modelType===Pr.BEZIER_EDGE&&y.draggable&&f.push(this.getBezierAdjust(y,u))}return f}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),a}(xe.a))||Ab;function Gv(n){return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gv(n)}function Wx(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Yx(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Uv(n,o){return Uv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Uv(n,o)}function Kx(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=yp(n);if(o){var d=yp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return qx(this,a)}}function qx(n,o){if(o&&(Gv(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function yp(n){return yp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},yp(n)}var Lb,Zx=gi(kb=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Uv(f,p)})(d,n);var o,a,u=Kx(d);function d(){return Wx(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,p=this.props.children;return Object(xe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(xe.g)("g",{transform:f},p))}}])&&Yx(o.prototype,a),d}(xe.a))||kb;function zv(n){return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},zv(n)}function Hv(){return Hv=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Hv.apply(this,arguments)}function Jx(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function Qx(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Xv(n,o){return Xv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Xv(n,o)}function eS(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=gp(n);if(o){var d=gp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return tS(this,a)}}function tS(n,o){if(o&&(zv(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function gp(n){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},gp(n)}var rS=gi(Lb=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Xv(f,p)})(d,n);var o,a,u=eS(d);function d(){return Jx(this,d),u.apply(this,arguments)}return o=d,a=[{key:"getComponent",value:function(f,p){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",b=this.props.getView,w=b(f.type);return Object(xe.g)(w,{key:f.id,model:f,graphModel:p,overlay:y})}},{key:"render",value:function(){var f=this,p=this.props,y=p.graphModel,b=p.tool,w=p.options,T=p.dnd,R=p.snaplineModel,k={};w.width&&(k.width="".concat(y.width,"px")),w.height&&(k.height="".concat(y.height,"px"));var q=w.grid,ae=y.fakerNode,ye=y.editConfigModel.adjustEdge;return Object(xe.g)("div",{className:"lf-graph","flow-id":y.flowId,style:k},Object(xe.g)(H,{graphModel:y,dnd:T},Object(xe.g)("g",{className:"lf-base"},Xs(y.sortElements,function(Me){return f.getComponent(Me,y)})),ae?this.getComponent(ae,y):""),Object(xe.g)(Zx,{graphModel:y},Object(xe.g)(zx,{graphModel:y}),ye?Object(xe.g)($x,{graphModel:y}):"",w.snapline!==!1?Object(xe.g)(kx,{snaplineModel:R}):""),Object(xe.g)(hr,{graphModel:y,tool:b}),w.background&&Object(xe.g)(sp,{background:w.background}),w.grid&&Object(xe.g)(bb,Hv({},q,{graphModel:y})))}}],a&&Qx(o.prototype,a),d}(xe.a))||Lb,nS=rS;function Fb(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function mp(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Fb(Object(a),!0).forEach(function(u){da(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Fb(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function oS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function da(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var iS=function(){function n(u){var d=this;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,n),da(this,"nodeConfig",void 0),da(this,"lf",void 0),da(this,"fakerNode",void 0),da(this,"stopDrag",function(){d.nodeConfig=null,window.document.removeEventListener("mouseup",d.stopDrag)}),da(this,"dragEnter",function(p){d.nodeConfig&&!d.fakerNode&&(d.fakerNode=d.lf.createFakerNode(mp(mp({},d.nodeConfig),d.clientToLocalPoint({x:p.clientX,y:p.clientY}))))}),da(this,"onDragOver",function(p){if(p.preventDefault(),d.fakerNode){var y=d.clientToLocalPoint({x:p.clientX,y:p.clientY}),b=y.x,w=y.y;d.fakerNode.moveTo(b,w);var T=d.fakerNode.getData();d.lf.setNodeSnapLine(T),d.lf.graphModel.eventCenter.emit(ir.NODE_DND_DRAG,{data:T})}return!1}),da(this,"onDragLeave",function(){d.fakerNode&&(d.lf.removeNodeSnapLine(),d.lf.graphModel.removeFakerNode(),d.fakerNode=null)}),da(this,"onDrop",function(p){d.lf.graphModel&&p&&d.nodeConfig&&(d.lf.addNode(mp(mp({},d.nodeConfig),d.clientToLocalPoint({x:p.clientX,y:p.clientY})),ir.NODE_DND_ADD,p),p.preventDefault(),p.stopPropagation(),d.nodeConfig=null,d.lf.removeNodeSnapLine(),d.lf.graphModel.removeFakerNode(),d.fakerNode=null)});var f=u.lf;this.lf=f}var o,a;return o=n,(a=[{key:"clientToLocalPoint",value:function(u){var d=u.x,f=u.y,p=El(this.lf.options,["grid","size"]),y=this.lf.graphModel.getPointByClient({x:d,y:f}).canvasOverlayPosition,b=y.x,w=y.y;return{x:di(b,p),y:di(w,p)}}},{key:"startDrag",value:function(u){this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&oS(o.prototype,a),n}();function Bb(n){var o=n.container,a=n.grid,u=n.width,d=n.height;if(!o)throw new Error(" container ");if(typeof u=="string"||typeof d=="string")throw new Error("widthheight");return a&&(n.grid=Qn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},a)),Qn({},Ub,n)}var Hr,Gb,Ub={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function Vv(n){return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vv(n)}function $v(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return zb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return zb(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zb(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function Hb(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function bp(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Hb(Object(a),!0).forEach(function(u){Xb(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Hb(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function aS(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function uS(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function sS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function gf(){return gf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=cS(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},gf.apply(this,arguments)}function cS(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=uu(n))!==null;);return n}function Wv(n,o){return Wv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Wv(n,o)}function lS(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=uu(n);if(o){var d=uu(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return fS(this,a)}}function fS(n,o){if(o&&(Vv(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _p(n)}function _p(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uu(n){return uu=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},uu(n)}function Xb(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function hi(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var Yv=(Hr=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Wv(f,p)})(d,n);var o,a,u=lS(d);function d(){var f;uS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Xb(_p(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.BEZIER_EDGE),aS(_p(f),"path",Gb,_p(f)),f}return o=d,(a=[{key:"initEdgeData",value:function(f){this.offset=100,gf(uu(d.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return bp(bp({},gf(uu(d.prototype),"getEdgeStyle",this).call(this)),cn(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,p=0;return this.pointsList.forEach(function(y){var b=y.x,w=y.y;f+=b,p+=w}),{x:f/this.pointsList.length,y:p/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=gf(uu(d.prototype),"getData",this).call(this),p=this.pointsList.map(function(y){return{x:y.x,y:y.y}});return bp(bp({},f),{},{pointsList:p})}},{key:"getControls",value:function(){var f=this.startPoint,p=this.endPoint;return Je({start:f,end:p,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var p=$v(f,4),y=p[0],b=p[1],w=p[2],T=p[3];return"M ".concat(y.x," ").concat(y.y,`
    C `).concat(b.x," ").concat(b.y,`,
    `).concat(w.x," ").concat(w.y,`,
    `).concat(T.x," ").concat(T.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),p=f.sNext,y=f.ePre;this.updatePath(p,y)}},{key:"updatePath",value:function(f,p){f=cn(f),p=cn(p);var y={x:this.startPoint.x,y:this.startPoint.y},b={x:this.endPoint.x,y:this.endPoint.y};if(!f||!p){var w=this.getControls();f=w.sNext,p=w.ePre}this.pointsList=[y,f,p,b],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,p){this.startPoint.x+=f,this.startPoint.y+=p;var y=$v(this.pointsList,3),b=y[1],w=y[2];b.x+=f,b.y+=p,this.updatePath(b,w)}},{key:"moveEndPoint",value:function(f,p){this.endPoint.x+=f,this.endPoint.y+=p;var y=$v(this.pointsList,3),b=y[1],w=y[2];w.x+=f,w.y+=p,this.updatePath(b,w)}},{key:"updateAdjustAnchor",value:function(f,p){p==="sNext"?this.pointsList[1]=f:p==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var p=f.startPoint,y=f.endPoint,b=f.sourceNode,w=f.targetNode,T=Je({start:p,end:y,sourceNode:b,targetNode:w,offset:this.offset}),R=T.sNext,k=T.ePre;this.pointsList=[p,R,k,y],this.initPoints()}}])&&sS(o.prototype,a),d}(Qa),Gb=hi(Hr.prototype,"path",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hi(Hr.prototype,"initPoints",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"initPoints"),Hr.prototype),hi(Hr.prototype,"updatePoints",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updatePoints"),Hr.prototype),hi(Hr.prototype,"updateStartPoint",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateStartPoint"),Hr.prototype),hi(Hr.prototype,"updateEndPoint",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateEndPoint"),Hr.prototype),hi(Hr.prototype,"moveStartPoint",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveStartPoint"),Hr.prototype),hi(Hr.prototype,"moveEndPoint",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveEndPoint"),Hr.prototype),hi(Hr.prototype,"updateAdjustAnchor",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAdjustAnchor"),Hr.prototype),hi(Hr.prototype,"getAdjustStart",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustStart"),Hr.prototype),hi(Hr.prototype,"getAdjustEnd",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustEnd"),Hr.prototype),hi(Hr.prototype,"updateAfterAdjustStartAndEnd",[l.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAfterAdjustStartAndEnd"),Hr.prototype),Hr),Dt,Vb,$b,Wb,Yb,Kb,qb,Zb,Jb,Qb,e0,t0,r0,n0,o0,i0,a0,u0,s0,c0,dS=function(n){return n==null};function Kv(n){return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Kv(n)}function pS(n,o){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!a){if(Array.isArray(n)||(a=function(b,w){if(b){if(typeof b=="string")return l0(b,w);var T=Object.prototype.toString.call(b).slice(8,-1);if(T==="Object"&&b.constructor&&(T=b.constructor.name),T==="Map"||T==="Set")return Array.from(b);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return l0(b,w)}}(n))||o&&n&&typeof n.length=="number"){a&&(n=a);var u=0,d=function(){};return{s:d,n:function(){return u>=n.length?{done:!0}:{done:!1,value:n[u++]}},e:function(b){throw b},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f,p=!0,y=!1;return{s:function(){a=a.call(n)},n:function(){var b=a.next();return p=b.done,b},e:function(b){y=!0,f=b},f:function(){try{p||a.return==null||a.return()}finally{if(y)throw f}}}}function l0(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function f0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function wo(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?f0(Object(a),!0).forEach(function(u){ko(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):f0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function Xn(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function hS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function ko(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Cr(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var pa,d0,ha=(Dt=function(){function n(u,d){(function(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")})(this,n),ko(this,"id",""),Xn(this,"type",Vb,this),Xn(this,"x",$b,this),Xn(this,"y",Wb,this),Xn(this,"text",Yb,this),Xn(this,"properties",Kb,this),Xn(this,"_width",qb,this),Xn(this,"_height",Zb,this),Xn(this,"anchorsOffset",Jb,this),Xn(this,"isSelected",Qb,this),Xn(this,"isHovered",e0,this),Xn(this,"isShowAnchor",t0,this),Xn(this,"isDragging",r0,this),Xn(this,"isHitable",n0,this),Xn(this,"draggable",o0,this),Xn(this,"visible",i0,this),ko(this,"virtual",!1),ko(this,"graphModel",void 0),Xn(this,"zIndex",a0,this),Xn(this,"state",u0,this),Xn(this,"autoToFront",s0,this),Xn(this,"style",c0,this),ko(this,"BaseType",Tn.NODE),ko(this,"modelType",Pr.NODE),ko(this,"additionStateData",void 0),ko(this,"targetRules",[]),ko(this,"sourceRules",[]),ko(this,"moveRules",[]),ko(this,"hasSetTargetRules",!1),ko(this,"hasSetSourceRules",!1),this.graphModel=d,this.initNodeData(u),this.setAttributes()}var o,a;return o=n,a=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var d=this.graphModel.idGenerator,f=d&&d(u.type),p=this.createId();u.id=p||f||pi()}this.formatText(u),Qn(this,function(y){return Lu(y,["id","type","x","y","text","properties","virtual"])}(u)),this.graphModel.overlapMode===co.INCREASE&&(this.zIndex=u.zIndex||Ja())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,d=u.x,f=u.y,p=u.value,y=this.properties;Object(l.x)(y)&&(y=Object(l.I)(y));var b={id:this.id,type:this.type,x:this.x,y:this.y,properties:y};return this.graphModel.overlapMode===co.INCREASE&&(b.zIndex=this.zIndex),p&&(b.text={x:d,y:f,value:p}),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(l.I)(this.properties)}},{key:"getNodeStyle",value:function(){return wo(wo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return cn(u)}},{key:"getAnchorStyle",value:function(u){var d=this.graphModel.theme.anchor;return cn(d)}},{key:"getAnchorLineStyle",value:function(u){var d=this.graphModel.theme.anchorLine;return cn(d)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return cn(u)}},{key:"isAllowConnectedAsSource",value:function(u,d,f,p){var y=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var b,w=!0,T=0;T<y.length;T++){var R=y[T];if(!R.validate.call(this,this,u,d,f,p)){w=!1,b=R.message;break}}return{isAllPass:w,msg:b}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,d,f,p){var y=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var b,w=!0,T=0;T<y.length;T++){var R=y[T];if(!R.validate.call(this,u,this,d,f,p)){w=!1,b=R.message;break}}return{isAllPass:w,msg:b}}},{key:"isAllowMoveNode",value:function(u,d){var f,p=!0,y=!0,b=pS(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(b.s();!(f=b.n()).done;){var w=(0,f.value)(this,u,d);if(!w)return!1;if(Kv(w)==="object"){var T=w;if(T.x===!1&&T.y===!1)return!1;p=p&&T.x,y=y&&T.y}}}catch(R){b.e(R)}finally{b.f()}return{x:p,y}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,d=this.id,f=this.x,p=this.y;return u&&u.length>0?u.map(function(y,b){return y.length?(y=y,{id:"".concat(d,"_").concat(b),x:f+y[0],y:p+y[1]}):wo(wo({},y=y),{},{x:f+y.x,y:p+y.y,id:y.id||"".concat(d,"_").concat(b)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(d,f){for(var p,y=lc(f),b=Number.MAX_SAFE_INTEGER,w=0;w<y.length;w++){var T=eo(d.x,d.y,y[w].x,y[w].y);T<b&&(b=T,p={index:w,anchor:uc(uc({},y[w]),{},{x:y[w].x,y:y[w].y,id:y[w].id})})}return p}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(u){if(!dS(u))for(var d=0;d<this.anchors.length;d++){var f=this.anchors[d];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,d){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=!1,y=!1;if(f)p=!0,y=!0;else{var b=this.isAllowMoveNode(u,d);typeof b=="boolean"?(p=b,y=b):(p=b.x,y=b.y)}if(p){var w=this.x+u;this.x=w,this.text&&this.moveText(u,0)}if(y){var T=this.y+d;this.y=T,this.text&&this.moveText(0,d)}return p||y}},{key:"getMoveDistance",value:function(u,d){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=!1,y=!1,b=0,w=0;if(f)p=!0,y=!0;else{var T=this.isAllowMoveNode(u,d);typeof T=="boolean"?(p=T,y=T):(p=T.x,y=T.y)}if(p&&u){var R=this.x+u;this.x=R,this.text&&this.moveText(u,0),b=u}if(y&&d){var k=this.y+d;this.y=k,this.text&&this.moveText(0,d),w=d}return[b,w]}},{key:"moveTo",value:function(u,d){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=u-this.x,y=d-this.y;return!(!f&&!this.isAllowMoveNode(p,y)||(this.text&&this.text&&this.moveText(p,y),this.x=u,this.y=d,0))}},{key:"moveText",value:function(u,d){var f=this.text,p=f.x,y=f.y,b=f.value,w=f.draggable,T=f.editable;this.text={value:b,editable:T,draggable:w,x:p+u,y:y+d}}},{key:"updateText",value:function(u){this.text=wo(wo({},Object(l.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,d){this.state=u,this.additionStateData=d}},{key:"setProperty",value:function(u,d){this.properties=wo(wo({},Object(l.I)(this.properties)),{},ko({},u,$n(d))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=wo(wo({},Object(l.I)(this.properties)),$n(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,d){this.style=wo(wo({},this.style),{},ko({},u,$n(d)))}},{key:"setStyles",value:function(u){this.style=wo(wo({},this.style),$n(u))}},{key:"updateStyles",value:function(u){this.style=wo({},$n(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Qn(this,u)}}],a&&hS(o.prototype,a),n}(),Vb=Cr(Dt.prototype,"type",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$b=Cr(Dt.prototype,"x",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wb=Cr(Dt.prototype,"y",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yb=Cr(Dt.prototype,"text",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Kb=Cr(Dt.prototype,"properties",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),qb=Cr(Dt.prototype,"_width",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Zb=Cr(Dt.prototype,"_height",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Jb=Cr(Dt.prototype,"anchorsOffset",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qb=Cr(Dt.prototype,"isSelected",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e0=Cr(Dt.prototype,"isHovered",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t0=Cr(Dt.prototype,"isShowAnchor",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r0=Cr(Dt.prototype,"isDragging",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n0=Cr(Dt.prototype,"isHitable",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o0=Cr(Dt.prototype,"draggable",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i0=Cr(Dt.prototype,"visible",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a0=Cr(Dt.prototype,"zIndex",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u0=Cr(Dt.prototype,"state",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s0=Cr(Dt.prototype,"autoToFront",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c0=Cr(Dt.prototype,"style",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Cr(Dt.prototype,"incoming",[l.m],Object.getOwnPropertyDescriptor(Dt.prototype,"incoming"),Dt.prototype),Cr(Dt.prototype,"outgoing",[l.m],Object.getOwnPropertyDescriptor(Dt.prototype,"outgoing"),Dt.prototype),Cr(Dt.prototype,"addNodeMoveRules",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"addNodeMoveRules"),Dt.prototype),Cr(Dt.prototype,"move",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"move"),Dt.prototype),Cr(Dt.prototype,"getMoveDistance",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getMoveDistance"),Dt.prototype),Cr(Dt.prototype,"moveTo",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveTo"),Dt.prototype),Cr(Dt.prototype,"moveText",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveText"),Dt.prototype),Cr(Dt.prototype,"updateText",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateText"),Dt.prototype),Cr(Dt.prototype,"setSelected",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setSelected"),Dt.prototype),Cr(Dt.prototype,"setHovered",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHovered"),Dt.prototype),Cr(Dt.prototype,"setIsShowAnchor",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setIsShowAnchor"),Dt.prototype),Cr(Dt.prototype,"setHitable",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHitable"),Dt.prototype),Cr(Dt.prototype,"setElementState",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setElementState"),Dt.prototype),Cr(Dt.prototype,"setProperty",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperty"),Dt.prototype),Cr(Dt.prototype,"setProperties",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperties"),Dt.prototype),Cr(Dt.prototype,"deleteProperty",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"deleteProperty"),Dt.prototype),Cr(Dt.prototype,"setStyle",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyle"),Dt.prototype),Cr(Dt.prototype,"setStyles",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyles"),Dt.prototype),Cr(Dt.prototype,"updateStyles",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStyles"),Dt.prototype),Cr(Dt.prototype,"setZIndex",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setZIndex"),Dt.prototype),Cr(Dt.prototype,"updateAttributes",[l.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAttributes"),Dt.prototype),Dt);function qv(n){return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},qv(n)}function p0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function h0(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?p0(Object(a),!0).forEach(function(u){v0(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):p0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function vS(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function yS(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function gS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Zv(){return Zv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=mS(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},Zv.apply(this,arguments)}function mS(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=wc(n))!==null;);return n}function Jv(n,o){return Jv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Jv(n,o)}function bS(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=wc(n);if(o){var d=wc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return _S(this,a)}}function _S(n,o){if(o&&(qv(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ep(n)}function Ep(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wc(n){return wc=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},wc(n)}function v0(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Qv(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var lo,y0,g0,ey=(pa=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Jv(f,p)})(d,n);var o,a,u=bS(d);function d(){var f;yS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return v0(Ep(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.CIRCLE_NODE),vS(Ep(f),"r",d0,Ep(f)),f}return o=d,(a=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=Zv(wc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.circle;return h0(h0({},f),cn(p))}},{key:"getDefaultAnchor",value:function(){var f=this.x,p=this.y,y=this.r;return[{x:f,y:p-y,id:"".concat(this.id,"_0")},{x:f+y,y:p,id:"".concat(this.id,"_1")},{x:f,y:p+y,id:"".concat(this.id,"_2")},{x:f-y,y:p,id:"".concat(this.id,"_3")}]}}])&&gS(o.prototype,a),d}(ha),d0=Qv(pa.prototype,"r",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Qv(pa.prototype,"width",[l.m],Object.getOwnPropertyDescriptor(pa.prototype,"width"),pa.prototype),Qv(pa.prototype,"height",[l.m],Object.getOwnPropertyDescriptor(pa.prototype,"height"),pa.prototype),pa);i(127);function ty(n){return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ty(n)}function ry(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return m0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return m0(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function m0(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function b0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function _0(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?b0(Object(a),!0).forEach(function(u){O0(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):b0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function E0(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function ES(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function OS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function ny(){return ny=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=wS(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},ny.apply(this,arguments)}function wS(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=Sc(n))!==null;);return n}function oy(n,o){return oy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},oy(n,o)}function xS(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Sc(n);if(o){var d=Sc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return SS(this,a)}}function SS(n,o){if(o&&(ty(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xc(n)}function xc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Sc(n){return Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Sc(n)}function O0(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Tc(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var Li,w0,x0,iy=(lo=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&oy(f,p)})(d,n);var o,a,u=xS(d);function d(){var f;ES(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return O0(xc(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.DIAMOND_NODE),E0(xc(f),"rx",y0,xc(f)),E0(xc(f),"ry",g0,xc(f)),f}return o=d,(a=[{key:"getNodeStyle",value:function(){var f=ny(Sc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.diamond;return _0(_0({},f),cn(p))}},{key:"points",get:function(){var f=this.x,p=this.y,y=this.rx,b=this.ry;return[[f,p-b],[f+y,p],[f,p+b],[f-y,p]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=ry(y,1)[0];b<f&&(f=b),b>p&&(p=b)}),p-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=ry(y,2)[1];b<f&&(f=b),b>p&&(p=b)}),p-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(p,y){var b=ry(p,2);return{x:b[0],y:b[1],id:"".concat(f.id,"_").concat(y)}})}}])&&OS(o.prototype,a),d}(ha),y0=Tc(lo.prototype,"rx",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),g0=Tc(lo.prototype,"ry",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Tc(lo.prototype,"points",[l.m],Object.getOwnPropertyDescriptor(lo.prototype,"points"),lo.prototype),Tc(lo.prototype,"pointsPosition",[l.m],Object.getOwnPropertyDescriptor(lo.prototype,"pointsPosition"),lo.prototype),Tc(lo.prototype,"width",[l.m],Object.getOwnPropertyDescriptor(lo.prototype,"width"),lo.prototype),Tc(lo.prototype,"height",[l.m],Object.getOwnPropertyDescriptor(lo.prototype,"height"),lo.prototype),lo);function ay(n){return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ay(n)}function S0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function T0(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?S0(Object(a),!0).forEach(function(u){P0(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):S0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function A0(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function TS(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function AS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function uy(){return uy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=PS(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},uy.apply(this,arguments)}function PS(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=Pc(n))!==null;);return n}function sy(n,o){return sy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},sy(n,o)}function NS(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Pc(n);if(o){var d=Pc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return jS(this,a)}}function jS(n,o){if(o&&(ay(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ac(n)}function Ac(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Pc(n){return Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Pc(n)}function P0(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function Op(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var ti,N0,cy=(Li=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&sy(f,p)})(d,n);var o,a,u=NS(d);function d(){var f;TS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return P0(Ac(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.ELLIPSE_NODE),A0(Ac(f),"rx",w0,Ac(f)),A0(Ac(f),"ry",x0,Ac(f)),f}return o=d,(a=[{key:"getNodeStyle",value:function(){var f=uy(Pc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.ellipse;return T0(T0({},f),cn(p))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,p=this.y,y=this.rx,b=this.ry;return[{x:f,y:p-b,id:"".concat(this.id,"_0")},{x:f+y,y:p,id:"".concat(this.id,"_1")},{x:f,y:p+b,id:"".concat(this.id,"_2")},{x:f-y,y:p,id:"".concat(this.id,"_3")}]}}])&&AS(o.prototype,a),d}(ha),w0=Op(Li.prototype,"rx",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),x0=Op(Li.prototype,"ry",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Op(Li.prototype,"width",[l.m],Object.getOwnPropertyDescriptor(Li.prototype,"width"),Li.prototype),Op(Li.prototype,"height",[l.m],Object.getOwnPropertyDescriptor(Li.prototype,"height"),Li.prototype),Li);function ly(n){return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ly(n)}function fy(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return j0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return j0(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function j0(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function M0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function R0(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?M0(Object(a),!0).forEach(function(u){C0(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):M0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function MS(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function RS(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function CS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function dy(){return dy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=DS(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},dy.apply(this,arguments)}function DS(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=Nc(n))!==null;);return n}function py(n,o){return py=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},py(n,o)}function kS(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Nc(n);if(o){var d=Nc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return IS(this,a)}}function IS(n,o){if(o&&(ly(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wp(n)}function wp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Nc(n){return Nc=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Nc(n)}function C0(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function xp(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var hy,D0,vy=(ti=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&py(f,p)})(d,n);var o,a,u=kS(d);function d(){var f;RS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return C0(wp(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.POLYGON_NODE),MS(wp(f),"points",N0,wp(f)),f}return o=d,(a=[{key:"getNodeStyle",value:function(){var f=dy(Nc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.polygon;return R0(R0({},f),cn(p))}},{key:"pointsPosition",get:function(){var f=this.x,p=this.y,y=this.width,b=this.height;return this.points.map(function(w){return{x:w[0]+f-y/2,y:w[1]+p-b/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=fy(y,1)[0];b<f&&(f=b),b>p&&(p=b)}),p-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=fy(y,2)[1];b<f&&(f=b),b>p&&(p=b)}),p-f}},{key:"getDefaultAnchor",value:function(){var f=this,p=this.x,y=this.y,b=this.width,w=this.height;return this.points.map(function(T,R){var k=fy(T,2),q=k[0],ae=k[1];return{x:p+q-b/2,y:y+ae-w/2,id:"".concat(f.id,"_").concat(R)}})}}])&&CS(o.prototype,a),d}(ha),N0=xp(ti.prototype,"points",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),xp(ti.prototype,"pointsPosition",[l.m],Object.getOwnPropertyDescriptor(ti.prototype,"pointsPosition"),ti.prototype),xp(ti.prototype,"width",[l.m],Object.getOwnPropertyDescriptor(ti.prototype,"width"),ti.prototype),xp(ti.prototype,"height",[l.m],Object.getOwnPropertyDescriptor(ti.prototype,"height"),ti.prototype),ti);function yy(n){return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yy(n)}function k0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function I0(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?k0(Object(a),!0).forEach(function(u){L0(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):k0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function LS(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function FS(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function BS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function gy(){return gy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=GS(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},gy.apply(this,arguments)}function GS(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=jc(n))!==null;);return n}function my(n,o){return my=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},my(n,o)}function US(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=jc(n);if(o){var d=jc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return zS(this,a)}}function zS(n,o){if(o&&(yy(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sp(n)}function Sp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jc(n){return jc=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jc(n)}function L0(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var su,by=(hy=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&my(f,p)})(d,n);var o,a,u=US(d);function d(){var f;FS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return L0(Sp(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.RECT_NODE),LS(Sp(f),"radius",D0,Sp(f)),f}return o=d,(a=[{key:"getDefaultAnchor",value:function(){var f=this.x,p=this.y,y=this.width,b=this.height;return[{x:f,y:p-b/2,id:"".concat(this.id,"_0")},{x:f+y/2,y:p,id:"".concat(this.id,"_1")},{x:f,y:p+b/2,id:"".concat(this.id,"_2")},{x:f-y/2,y:p,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=gy(jc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.rect;return I0(I0({},f),cn(p))}}])&&BS(o.prototype,a),d}(ha),D0=function(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}(hy.prototype,"radius",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),hy);function _y(n){return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_y(n)}function F0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function B0(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?F0(Object(a),!0).forEach(function(u){U0(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):F0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function HS(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function XS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Ey(){return Ey=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(n,o,a){var u=VS(n,o);if(u){var d=Object.getOwnPropertyDescriptor(u,o);return d.get?d.get.call(arguments.length<3?n:a):d.value}},Ey.apply(this,arguments)}function VS(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=Mc(n))!==null;);return n}function Oy(n,o){return Oy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Oy(n,o)}function $S(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Mc(n);if(o){var d=Mc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return WS(this,a)}}function WS(n,o){if(o&&(_y(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G0(n)}function G0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Mc(n){return Mc=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Mc(n)}function U0(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function z0(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var wy=(su=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Oy(f,p)})(d,n);var o,a,u=$S(d);function d(){var f;HS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return U0(G0(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.TEXT_NODE),f}return o=d,(a=[{key:"getTextStyle",value:function(){var f=Ey(Mc(d.prototype),"getTextStyle",this).call(this),p=this.graphModel.theme.text;return B0(B0({},f),cn(p))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),p=this.getTextStyle().fontSize;return sf({rows:f,fontSize:p,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),p=this.getTextStyle().fontSize;return sf({rows:f,fontSize:p,rowsLength:f.length}).height}}])&&XS(o.prototype,a),d}(ha),z0(su.prototype,"width",[l.m],Object.getOwnPropertyDescriptor(su.prototype,"width"),su.prototype),z0(su.prototype,"height",[l.m],Object.getOwnPropertyDescriptor(su.prototype,"height"),su.prototype),su);function xy(n){return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},xy(n)}function YS(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function KS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Sy(n,o){return Sy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Sy(n,o)}function qS(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Tp(n);if(o){var d=Tp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ZS(this,a)}}function ZS(n,o){if(o&&(xy(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H0(n)}function H0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Tp(n){return Tp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Tp(n)}function JS(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var vi,X0,V0,$0,Ty=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Sy(f,p)})(d,n);var o,a,u=qS(d);function d(){var f;YS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return JS(H0(f=u.call.apply(u,[this].concat(y))),"modelType",Pr.HTML_NODE),f}return o=d,(a=[{key:"getDefaultAnchor",value:function(){var f=this.x,p=this.y,y=this.width,b=this.height;return[{x:f,y:p-b/2,id:"".concat(this.id,"_0")},{x:f+y/2,y:p,id:"".concat(this.id,"_1")},{x:f,y:p+b/2,id:"".concat(this.id,"_2")},{x:f-y/2,y:p,id:"".concat(this.id,"_3")}]}}])&&KS(o.prototype,a),d}(ha);function W0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function Ay(n,o,a,u){a&&Object.defineProperty(n,o,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function QS(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Y0(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function mf(n,o,a,u,d){var f={};return Object.keys(u).forEach(function(p){f[p]=u[p]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=a.slice().reverse().reduce(function(p,y){return y(n,o,p)||p},f),d&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(d):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(n,o,f),f=null),f}var K0=(vi=function(){function n(u){(function(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")})(this,n),Y0(this,"graphModel",void 0),Ay(this,"isShowHorizontal",X0,this),Ay(this,"isShowVertical",V0,this),Ay(this,"position",$0,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var o,a;return o=n,a=[{key:"getStyle",value:function(){return function(u){for(var d=1;d<arguments.length;d++){var f=arguments[d]!=null?arguments[d]:{};d%2?W0(Object(f),!0).forEach(function(p){Y0(u,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):W0(Object(f)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(f,p))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,d){for(var f=u.x,p=u.y,y=!1,b=!1,w=0;w<d.length;w++){var T=d[w];if(T.id!==u.id&&(f===T.x&&(y=!0),p===T.y&&(b=!0),y&&b))break}return{isShowVertical:y,isShowHorizontal:b,position:{x:f,y:p}}}},{key:"getHorizontalSnapline",value:function(u,d){var f,p,y=!1,b=u.id;if(b){var w=this.graphModel.fakerNode;if(w&&w.id===b)p=_o(w);else{var T=this.graphModel.getNodeModelById(b);p=_o(T)}}for(var R=0;R<d.length;R++){var k=d[R];if(k.id!==u.id){var q=_o(k);if(q.minY===p.minY||q.maxY===p.minY){y=!0,f=p.minY;break}if(q.minY===p.maxY||q.maxY===p.maxY){y=!0,f=p.maxY;break}}}return Qn({isShowHorizontal:y,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,d){var f,p,y=!1,b=u.id;if(b){var w=this.graphModel.fakerNode;if(w&&w.id===b)p=_o(w);else{var T=this.graphModel.getNodeModelById(b);p=_o(T)}}for(var R=0;R<d.length;R++){var k=d[R];if(k.id!==u.id){var q=_o(k);if(q.minX===p.minX||q.maxX===p.minX){y=!0,f=p.minX;break}if(q.minX===p.maxX||q.maxX===p.maxX){y=!0,f=p.maxX;break}}}return Qn({isShowVertical:y,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,d){var f=this.getCenterSnapLine(u,d),p=f.isShowHorizontal,y=f.isShowVertical;if(!p){var b=this.getHorizontalSnapline(u,d);b.isShowHorizontal&&(f.isShowHorizontal=b.isShowHorizontal,f.position.y=b.position.y)}if(!y){var w=this.getVerticalSnapline(u,d);w.isShowVertical&&(f.isShowVertical=w.isShowVertical,f.position.x=w.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var d=u.isShowHorizontal,f=u.isShowVertical,p=u.position;this.position=p,this.isShowHorizontal=d,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var d=this.graphModel.nodes,f=this.getSnapLinePosition(u,d);this.setSnaplineInfo(f)}}],a&&QS(o.prototype,a),n}(),X0=mf(vi.prototype,"isShowHorizontal",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V0=mf(vi.prototype,"isShowVertical",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$0=mf(vi.prototype,"position",[l.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mf(vi.prototype,"clearSnapline",[l.k],Object.getOwnPropertyDescriptor(vi.prototype,"clearSnapline"),vi.prototype),mf(vi.prototype,"setNodeSnapLine",[l.k],Object.getOwnPropertyDescriptor(vi.prototype,"setNodeSnapLine"),vi.prototype),vi),bf=new Map,q0=function(n){var o=pi(),a=window.requestAnimationFrame(function u(){if(n(),bf.get(o)){var d=window.requestAnimationFrame(u);bf.set(o,d)}});return bf.set(o,a),o},Ap=function(n){var o=bf.get(n);o&&(window.cancelAnimationFrame(o),bf.delete(n))};function Py(n){return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Py(n)}function _f(){return _f=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},_f.apply(this,arguments)}function Z0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function Pp(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Z0(Object(a),!0).forEach(function(u){Bi(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Z0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function eT(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return J0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return J0(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function J0(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function tT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Ny(n,o){return Ny=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ny(n,o)}function rT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Np(n);if(o){var d=Np(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return nT(this,a)}}function nT(n,o){if(o&&(Py(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fi(n)}function Fi(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Np(n){return Np=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Np(n)}function Bi(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var oT=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Ny(f,p)})(d,n);var o,a,u=rT(d);function d(){var f;return function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}(this,d),Bi(Fi(f=u.call(this)),"preTargetNode",void 0),Bi(Fi(f),"sourceRuleResults",void 0),Bi(Fi(f),"targetRuleResults",void 0),Bi(Fi(f),"dragHandler",void 0),Bi(Fi(f),"t",void 0),Bi(Fi(f),"onDragStart",function(p){var y=p.event,b=f.props,w=b.anchorData,T=b.nodeModel,R=b.graphModel,k=R.overlapMode;R.selectNodeById(T.id),k!==co.INCREASE&&T.autoToFront&&R.toFront(T.id),R.eventCenter.emit(ir.ANCHOR_DRAGSTART,{data:w,e:y,nodeModel:T}),f.setState({startX:w.x,startY:w.y,endX:w.x,endY:w.y})}),Bi(Fi(f),"onDragging",function(p){var y=p.event,b=f.props,w=b.graphModel,T=b.nodeModel,R=b.anchorData,k=w.transformModel,q=w.eventCenter,ae=w.width,ye=w.height,Me=w.editConfigModel,Re=Me.autoExpand,We=Me.stopMoveGraph,lt=y.clientX,kt=y.clientY,wt=w.getPointByClient({x:lt,y:kt}),er=wt.domOverlayPosition,Rt=er.x,Tt=er.y,vr=wt.canvasOverlayPosition,Fr=vr.x,qr=vr.y;f.t&&Ap(f.t);var Vr=[];Rt<10?Vr=[10,0]:Rt+10>ae?Vr=[-10,0]:Tt<10?Vr=[0,10]:Tt+10>ye&&(Vr=[0,-10]),f.setState({endX:Fr,endY:qr,dragging:!0}),f.moveAnchorEnd(Fr,qr),Vr.length>0&&!We&&Re&&(f.t=q0(function(){var en=eT(Vr,2),Ln=en[0],Vn=en[1];k.translate(Ln,Vn);var So=f.state,zi=So.endX,ri=So.endY;f.setState({endX:zi-Ln,endY:ri-Vn}),f.moveAnchorEnd(zi-Ln,ri-Vn)})),q.emit(ir.ANCHOR_DRAG,{data:R,e:y,nodeModel:T})}),Bi(Fi(f),"onDragEnd",function(p){var y=p.event;f.t&&Ap(f.t),f.checkEnd(y),f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var b=f.props,w=b.graphModel,T=b.nodeModel,R=b.anchorData;w.eventCenter.emit(ir.ANCHOR_DRAGEND,{data:R,e:y,nodeModel:T})}),Bi(Fi(f),"checkEnd",function(p){var y=f.props,b=y.graphModel,w=y.nodeModel,T=y.anchorData,R=T.x,k=T.y,q=T.id,ae=(b.edgeType,f.state),ye=ae.endX,Me=ae.endY,Re=ae.dragging,We=Wu({x:ye,y:Me},b);if(f.preTargetNode&&f.preTargetNode.state!==zr.DEFAULT&&f.preTargetNode.setElementState(zr.DEFAULT),Re&&We&&We.node){var lt=We.node,kt=We.anchor.id,wt="".concat(w.id,"_").concat(lt.id,"_").concat(kt,"_").concat(q),er=f.sourceRuleResults.get(wt)||{},Rt=er.isAllPass,Tt=er.msg,vr=f.targetRuleResults.get(wt)||{},Fr=vr.isAllPass,qr=vr.msg;if(Rt&&Fr){lt.setElementState(zr.DEFAULT);var Vr=b.edgeGenerator(w.getData(),b.getNodeModelById(We.node.id).getData()),en=b.addEdge(Pp(Pp({},Vr),{},{sourceNodeId:w.id,sourceAnchorId:q,startPoint:{x:R,y:k},targetNodeId:We.node.id,targetAnchorId:We.anchor.id,endPoint:{x:We.anchor.x,y:We.anchor.y}})),Ln=f.props.anchorData;b.eventCenter.emit(ir.ANCHOR_DROP,{data:Ln,e:p,nodeModel:w,edgeModel:en})}else{var Vn=lt.getData();b.eventCenter.emit(ir.CONNECTION_NOT_ALLOWED,{data:Vn,msg:qr||Tt})}}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new Wr({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return o=d,(a=[{key:"getAnchorShape",value:function(){var f=this.props,p=f.anchorData,y=f.style,b=f.node.getAnchorShape(p);if(b)return b;var w=p.x,T=p.y,R=Pp(Pp({},y),y.hover);return Object(xe.g)("g",null,Object(xe.g)(vf,_f({className:"lf-node-anchor-hover"},R,{x:w,y:T})),Object(xe.g)(vf,_f({className:"lf-node-anchor"},y,{x:w,y:T})))}},{key:"moveAnchorEnd",value:function(f,p){var y=this.props,b=y.graphModel,w=y.nodeModel,T=y.anchorData,R=Wu({x:f,y:p},b);if(R){var k=R.node,q=R.anchor.id;if(this.preTargetNode&&this.preTargetNode!==R.node&&this.preTargetNode.setElementState(zr.DEFAULT),T.id===q)return;this.preTargetNode=k;var ae="".concat(w.id,"_").concat(k.id,"_").concat(q,"_").concat(T.id);if(!this.targetRuleResults.has(ae)){var ye=R.anchor,Me=w.isAllowConnectedAsSource(k,T,ye),Re=k.isAllowConnectedAsTarget(w,T,ye);this.sourceRuleResults.set(ae,Yu(Me)),this.targetRuleResults.set(ae,Yu(Re))}var We=this.sourceRuleResults.get(ae).isAllPass,lt=this.targetRuleResults.get(ae).isAllPass;We&&lt?k.setElementState(zr.ALLOW_CONNECT):k.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,p=f.startX,y=f.startY,b=f.endX,w=f.endY;return eo(p,y,b,w)>10}},{key:"render",value:function(){var f=this,p=this.state,y=p.startX,b=p.startY,w=p.endX,T=p.endY,R=this.props,k=R.anchorData.edgeAddable,q=R.edgeStyle;return Object(xe.g)("g",{className:"lf-anchor"},Object(xe.g)("g",{onMouseDown:function(ae){k!==!1&&f.dragHandler.handleMouseDown(ae)}},this.getAnchorShape()),this.isShowLine()&&Object(xe.g)(Ec,_f({x1:y,y1:b,x2:w,y2:T},q,{"pointer-events":"none"})))}}])&&tT(o.prototype,a),d}(xe.a);i(80);function Q0(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function iT(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?Q0(Object(a),!0).forEach(function(u){aT(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Q0(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function aT(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function jy(n){return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jy(n)}function uT(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return e_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return e_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function e_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function t_(n){var o=n.x,a=o===void 0?0:o,u=n.y,d=u===void 0?0:u,f=n.value,p=n.fontSize,y=n.fill,b=y===void 0?"currentColor":y,w=n.overflowMode,T=w===void 0?"default":w,R=n.textWidth,k=R===void 0?"":R,q=n.model,ae={textAnchor:"middle","dominant-baseline":"middle",x:a,y:d,fill:b};if(Object.entries(n).forEach(function(kt){var wt=uT(kt,2),er=wt[0],Rt=wt[1];jy(Rt)!=="object"&&(ae[er]=Rt)}),f){var ye=String(f).split(/[\r\n]/g),Me=ye.length;if(T!=="default"){var Re=q.BaseType,We=q.modelType;if(Re===Tn.NODE&&We!==Pr.TEXT_NODE||Re===Tn.EDGE&&k)return function(kt){var wt=kt.value,er=kt.fontSize,Rt=kt.model,Tt=kt.fontFamily,vr=Tt===void 0?"":Tt,Fr=kt.lineHeight,qr=kt.wrapPadding,Vr=qr===void 0?"0, 0":qr,en=kt.overflowMode,Ln=kt.x,Vn=kt.y,So=Rt.width,zi=Rt.textHeight,ri=kt.textWidth||So,Dc=String(wt).split(/[\r\n]/g),Jp=Dc.length,Qp=Jd({rows:Dc,style:{fontSize:"".concat(er,"px"),width:"".concat(ri,"px"),fontFamily:vr,lineHeight:Fr,padding:Vr},rowsLength:Jp,className:"lf-get-text-height"}),us=Rt.height>Qp?Rt.height:Qp;zi&&(us=zi);var fu=en==="ellipsis";return fu&&(us=er+2),Object(xe.g)("g",null,Object(xe.g)("foreignObject",{width:ri,height:us,x:Ln-ri/2,y:Vn-us/2},Object(xe.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:us,width:ri,padding:Vr}},Object(xe.g)("div",{className:fu?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:fu?Dc.join(""):"",style:iT({},kt)},Dc.map(function(du){return Object(xe.g)("div",{className:"lf-node-text--auto-wrap-inner"},du)})))))}(n)}if(Me>1){var lt=ye.map(function(kt,wt){var er=(wt-(Me-1)/2)*(p+2);return Object(xe.g)("tspan",{className:"lf-text-tspan",x:a,y:d+er},kt)});return Object(xe.g)("text",ae,lt)}return Object(xe.g)("text",ae,f)}}function My(n){return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},My(n)}function Ry(){return Ry=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Ry.apply(this,arguments)}function sT(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return r_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return r_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function r_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function cT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Cy(n,o){return Cy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Cy(n,o)}function lT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=jp(n);if(o){var d=jp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return fT(this,a)}}function fT(n,o){if(o&&(My(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cu(n)}function cu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jp(n){return jp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jp(n)}function os(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var n_=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Cy(f,p)})(d,n);var o,a,u=lT(d);function d(f){var p;(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,d),os(cu(p=u.call(this)),"dragHandler",void 0),os(cu(p),"sumDeltaX",0),os(cu(p),"sumDeltaY",0),os(cu(p),"stepDrag",void 0),os(cu(p),"onDragging",function(b){var w=b.deltaX,T=b.deltaY,R=p.props,k=R.model,q=sT(R.graphModel.transformModel.fixDeltaXY(w,T),2),ae=q[0],ye=q[1];k.moveText(ae,ye)}),os(cu(p),"dblClickHandler",function(){p.props.editable&&p.props.model.setElementState(zr.TEXT_EDIT)}),os(cu(p),"mouseDownHandle",function(b){var w=p.props,T=w.draggable,R=w.model,k=w.graphModel.editConfigModel.nodeTextDraggable;(T||k)&&(p.stepDrag.model=R,p.stepDrag.handleMouseDown(b))}),f.model;var y=f.draggable;return p.stepDrag=new Wr({onDragging:p.onDragging,step:1,isStopPropagation:y}),p}return o=d,(a=[{key:"getShape",value:function(){var f=this.props,p=f.model,y=f.graphModel,b=p.text,w=y.editConfigModel,T=b.value,R=b.x,k=b.y,q=b.editable,ae=b.draggable,ye={x:R,y:k,className:"",value:T};q?ye.className="lf-element-text":ae||w.nodeTextDraggable?ye.className="lf-text-draggable":ye.className="lf-text-disabled";var Me=p.getTextStyle();return Object(xe.g)(t_,Ry({},ye,Me,{model:p}))}},{key:"render",value:function(){if(this.props.model.text)return Object(xe.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&cT(o.prototype,a),d}(xe.a),dT=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Dy(n){return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Dy(n)}function Mp(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return o_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return o_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function i_(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function ky(n,o){return ky=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ky(n,o)}function pT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Rp(n);if(o){var d=Rp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return hT(this,a)}}function hT(n,o){if(o&&(Dy(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fo(n)}function fo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Rp(n){return Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Rp(n)}function xo(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var va=function(n){(function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&ky(p,y)})(f,n);var o,a,u,d=pT(f);function f(p){var y;(function(k,q){if(!(k instanceof q))throw new TypeError("Cannot call a class as a function")})(this,f),xo(fo(y=d.call(this)),"t",void 0),xo(fo(y),"moveOffset",void 0),xo(fo(y),"stepDrag",void 0),xo(fo(y),"contextMenuTime",void 0),xo(fo(y),"startTime",void 0),xo(fo(y),"clickTimer",void 0),xo(fo(y),"onDragStart",function(k){var q=k.event,ae=q.clientX,ye=q.clientY,Me=y.props,Re=Me.model,We=Me.graphModel.getPointByClient({x:ae,y:ye}).canvasOverlayPosition,lt=We.x,kt=We.y;y.moveOffset={x:Re.x-lt,y:Re.y-kt}}),xo(fo(y),"onDragging",function(k){var q=k.event,ae=y.props,ye=ae.model,Me=ae.graphModel,Re=Me.editConfigModel,We=Re.stopMoveGraph,lt=Re.autoExpand,kt=Me.transformModel,wt=Me.selectNodes,er=Me.width,Rt=Me.height,Tt=Me.gridSize;ye.isDragging=!0;var vr=q.clientX,Fr=q.clientY,qr=Me.getPointByClient({x:vr,y:Fr}).canvasOverlayPosition,Vr=qr.x,en=qr.y,Ln=Mp(kt.CanvasPointToHtmlPoint([Vr,en]),2),Vn=Ln[0],So=Ln[1];if(Vr+=y.moveOffset.x,en+=y.moveOffset.y,Vr=di(Vr,Tt),en=di(en,Tt),er&&Rt){if(!lt||We||!(Vn<0||So<0||Vn>er||So>Rt)){var zi=Mp(kt.CanvasPointToHtmlPoint([Vr-ye.width/2,en-ye.height/2]),2),ri=zi[0],Dc=zi[1],Jp=Mp(kt.CanvasPointToHtmlPoint([Vr+ye.width/2,en+ye.height/2]),2),Qp=Jp[0],us=Jp[1],fu=Math.max(Tt,20),du=[];ri<0?du=[fu,0]:Qp>Me.width?du=[-fu,0]:Dc<0?du=[0,fu]:us>Me.height&&(du=[0,-fu]),y.t&&Ap(y.t);var eh=wt.map(function(th){return th.id});eh.indexOf(ye.id)===-1&&(eh=[ye.id]),du.length>0&&!We&&lt?y.t=q0(function(){var th=Mp(du,2),G_=th[0],U_=th[1];kt.translate(G_,U_);var nP=-G_/kt.SCALE_X,oP=-U_/kt.SCALE_X;Me.moveNodes(eh,nP,oP)}):Me.moveNodes(eh,Vr-ye.x,en-ye.y)}}else Me.moveNode2Coordinate(ye.id,Vr,en)}),xo(fo(y),"onDragEnd",function(){y.t&&Ap(y.t),y.props.model.isDragging=!1}),xo(fo(y),"handleClick",function(k){if(y.startTime&&!(new Date().getTime()-y.startTime>200)){var q=y.props,ae=q.model,ye=q.graphModel,Me={data:ae.getData(),e:k,position:ye.getPointByClient({x:k.clientX,y:k.clientY}),isSelected:!1,isMultiple:!1},Re=k.button===2,We=k.detail===2;if(!Re){var lt=ye.editConfigModel,kt=Ql(k,lt);Me.isMultiple=kt,ae.isSelected&&!We&&kt?(Me.isSelected=!1,ae.setSelected(!1)):(ye.selectNodeById(ae.id,kt),Me.isSelected=!0,y.toFront()),We?(lt.nodeTextEdit&&ae.text.editable&&(ae.setSelected(!1),ye.setElementStateById(ae.id,zr.TEXT_EDIT)),ye.eventCenter.emit(ir.NODE_DBCLICK,Me)):(ye.eventCenter.emit(ir.ELEMENT_CLICK,Me),ye.eventCenter.emit(ir.NODE_CLICK,Me))}}}),xo(fo(y),"handleContextMenu",function(k){k.preventDefault();var q=y.props,ae=q.model,ye=q.graphModel,Me=ae.getData(),Re=ye.getPointByClient({x:k.clientX,y:k.clientY});ye.setElementStateById(ae.id,zr.SHOW_MENU,Re.domOverlayPosition),ae.isSelected||ye.selectNodeById(ae.id),ye.eventCenter.emit(ir.NODE_CONTEXTMENU,{data:Me,e:k,position:Re}),y.toFront()}),xo(fo(y),"handleMouseDown",function(k){var q=y.props,ae=q.model,ye=q.graphModel;y.startTime=new Date().getTime(),ye.editConfigModel.adjustNodePosition&&ae.draggable&&y.stepDrag&&y.stepDrag.handleMouseDown(k)}),xo(fo(y),"setHoverON",function(k){var q=y.props,ae=q.model,ye=q.graphModel;if(!ae.isHovered){var Me=ae.getData();ae.setHovered(!0),ye.eventCenter.emit(ir.NODE_MOUSEENTER,{data:Me,e:k})}}),xo(fo(y),"setHoverOFF",function(k){var q=y.props,ae=q.model,ye=q.graphModel,Me=ae.getData();ae.isHovered&&(ae.setHovered(!1),ye.eventCenter.emit(ir.NODE_MOUSELEAVE,{data:Me,e:k}))}),xo(fo(y),"onMouseOut",function(k){dT&&y.setHoverOFF(k)});var b=p.graphModel,w=b.gridSize,T=b.eventCenter,R=p.model;return y.stepDrag=new Wr({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:w,eventType:"NODE",isStopPropagation:!1,eventCenter:T,model:R}),y}return o=f,u=[{key:"getModel",value:function(p){return p}}],(a=[{key:"getAnchorShape",value:function(p){return null}},{key:"getAnchors",value:function(){var p=this,y=this.props,b=y.model,w=y.graphModel,T=b.isSelected,R=b.isHitable,k=b.isDragging,q=b.isShowAnchor;return R&&(T||q)&&!k?Xs(b.anchors,function(ae,ye){var Me=b.getAnchorLineStyle(ae),Re=b.getAnchorStyle(ae);return Object(xe.g)(oT,{anchorData:ae,node:p,style:Re,edgeStyle:Me,anchorIndex:ye,nodeModel:b,graphModel:w,setHoverOFF:p.setHoverOFF})}):[]}},{key:"getText",value:function(){var p=this.props,y=p.model,b=p.graphModel;if(y.state===zr.TEXT_EDIT)return"";if(y.text){var w=b.editConfigModel,T=!1;return(y.text.draggable||w.nodeTextDraggable)&&(T=!0),Object(xe.g)(n_,{editable:w.nodeTextEdit&&y.text.editable,model:y,graphModel:b,draggable:T})}}},{key:"getStateClassName",value:function(){var p=this.props.model,y=p.state,b=p.isDragging,w=p.isSelected,T="lf-node";switch(y){case zr.ALLOW_CONNECT:T+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:T+=" lf-node-not-allow";break;default:T+=" lf-node-default"}return b&&(T+=" lf-isDragging"),w&&(T+=" lf-node-selected"),T}},{key:"toFront",value:function(){var p=this.props,y=p.model,b=p.graphModel;b.overlapMode!==co.INCREASE&&y.autoToFront&&b.toFront(y.id)}},{key:"render",value:function(){var p,y=this.props,b=y.model,w=y.graphModel,T=w.editConfigModel,R=T.hideAnchors,k=T.adjustNodePosition,q=w.gridSize,ae=w.transformModel.SCALE_X,ye=b.isHitable,Me=b.draggable,Re=Object(xe.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),R?null:this.getAnchors());return ye?(k&&Me&&this.stepDrag.setStep(q*ae),p=Object(xe.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Re)):p=Object(xe.g)("g",{className:this.getStateClassName()},Re),p}}])&&i_(o.prototype,a),u&&i_(o,u),f}(xe.a);function Iy(n){return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Iy(n)}function Ly(){return Ly=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Ly.apply(this,arguments)}function vT(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function yT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Fy(n,o){return Fy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Fy(n,o)}function gT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Cp(n);if(o){var d=Cp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return mT(this,a)}}function mT(n,o){if(o&&(Iy(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Cp(n){return Cp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Cp(n)}var By=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Fy(f,p)})(d,n);var o,a,u=gT(d);function d(){return vT(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getShape",value:function(){var f=this.props.model,p=f.getNodeStyle();return Object(xe.g)(au,Ly({},p,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&yT(o.prototype,a),d}(va);function Gy(n){return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gy(n)}function Uy(){return Uy=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Uy.apply(this,arguments)}function bT(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function _T(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function zy(n,o){return zy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},zy(n,o)}function ET(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Dp(n);if(o){var d=Dp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return OT(this,a)}}function OT(n,o){if(o&&(Gy(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Dp(n){return Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Dp(n)}var Hy=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&zy(f,p)})(d,n);var o,a,u=ET(d);function d(){return bT(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getShape",value:function(){var f=this.props.model,p=f.x,y=f.y,b=f.r,w=f.getNodeStyle();return Object(xe.g)(vf,Uy({},w,{x:p,y,r:b}))}}])&&_T(o.prototype,a),d}(va);function Xy(n){return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Xy(n)}function wT(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return a_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return a_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function u_(n){var o=n.points,a=n.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(n).forEach(function(d){var f=wT(d,2),p=f[0],y=f[1];Xy(y)!=="object"&&(u[p]=y)}),u.className=a?"lf-basic-shape ".concat(a):"lf-basic-shape",u.points=o.map(function(d){return d.join(",")}).join(" "),Object(xe.g)("polygon",u)}function Vy(n){return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vy(n)}function $y(){return $y=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},$y.apply(this,arguments)}function xT(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function ST(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Wy(n,o){return Wy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Wy(n,o)}function TT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=kp(n);if(o){var d=kp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return AT(this,a)}}function AT(n,o){if(o&&(Vy(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function kp(n){return kp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},kp(n)}var Yy=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Wy(f,p)})(d,n);var o,a,u=TT(d);function d(){return xT(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getShape",value:function(){var f=this.props.model,p=f.x,y=f.y,b=f.width,w=f.height,T=f.points,R=f.getNodeStyle(),k={transform:"matrix(1 0 0 1 ".concat(p-b/2," ").concat(y-w/2,")")};return Object(xe.g)("g",k,Object(xe.g)(u_,$y({},R,{points:T,x:p,y})))}}])&&ST(o.prototype,a),d}(va);function Ky(n){return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ky(n)}function qy(){return qy=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},qy.apply(this,arguments)}function PT(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function NT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Zy(n,o){return Zy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Zy(n,o)}function jT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ip(n);if(o){var d=Ip(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return MT(this,a)}}function MT(n,o){if(o&&(Ky(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Ip(n){return Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Ip(n)}var Jy=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Zy(f,p)})(d,n);var o,a,u=jT(d);function d(){return PT(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getShape",value:function(){var f=this.props.model,p=f.getNodeStyle();return Object(xe.g)("g",null,Object(xe.g)(u_,qy({},p,{points:f.points,x:f.x,y:f.y})))}}])&&NT(o.prototype,a),d}(va);function Qy(n){return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qy(n)}function RT(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return s_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function CT(n){var o=n.x,a=o===void 0?0:o,u=n.y,d=u===void 0?0:u,f=n.rx,p=f===void 0?4:f,y=n.ry,b=y===void 0?4:y,w=n.className,T={cx:a,cy:d,rx:p,ry:b,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(n).forEach(function(R){var k=RT(R,2),q=k[0],ae=k[1];Qy(ae)!=="object"&&(T[q]=ae)}),T.className=w?"lf-basic-shape ".concat(w):"lf-basic-shape",Object(xe.g)("ellipse",T)}function eg(n){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},eg(n)}function tg(){return tg=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},tg.apply(this,arguments)}function DT(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function kT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function rg(n,o){return rg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},rg(n,o)}function IT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Lp(n);if(o){var d=Lp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return LT(this,a)}}function LT(n,o){if(o&&(eg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Lp(n){return Lp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Lp(n)}var ng=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&rg(f,p)})(d,n);var o,a,u=IT(d);function d(){return DT(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getShape",value:function(){var f=this.props.model,p=f.getNodeStyle();return Object(xe.g)(CT,tg({},p,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&kT(o.prototype,a),d}(va);function og(n){return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},og(n)}function c_(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function l_(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?c_(Object(a),!0).forEach(function(u){FT(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):c_(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function FT(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function BT(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function GT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function ig(n,o){return ig=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ig(n,o)}function UT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Fp(n);if(o){var d=Fp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return zT(this,a)}}function zT(n,o){if(o&&(og(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Fp(n){return Fp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Fp(n)}var ag=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&ig(f,p)})(d,n);var o,a,u=UT(d);function d(){return BT(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getBackground",value:function(){var f=this.props.model,p=f.getTextStyle(),y=f.width,b=f.height,w=f.x,T=f.y,R=l_(l_({},p.background),{},{x:w,y:T-1,width:y,height:b});return Object(xe.g)(au,R)}},{key:"getShape",value:function(){return Object(xe.g)("g",null,this.getBackground())}}])&&GT(o.prototype,a),d}(va);function ug(n){return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ug(n)}function sg(){return sg=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},sg.apply(this,arguments)}function HT(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function XT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function cg(n,o){return cg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},cg(n,o)}function VT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Bp(n);if(o){var d=Bp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return $T(this,a)}}function $T(n,o){if(o&&(ug(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ef(n)}function Ef(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Bp(n){return Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Bp(n)}function Gp(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var lg=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&cg(f,p)})(d,n);var o,a,u=VT(d);function d(){var f;HT(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Gp(Ef(f=u.call.apply(u,[this].concat(y))),"ref",void 0),Gp(Ef(f),"currentProperties",void 0),Gp(Ef(f),"preProperties",void 0),Gp(Ef(f),"setRef",function(w){f.ref=w}),f}return o=d,(a=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,p=f.x,y=f.y,b=f.height,w=f.width,T=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(xe.g)("foreignObject",sg({},T,{x:p-w/2,y:y-b/2,width:w,height:b,ref:this.setRef}))}}])&&XT(o.prototype,a),d}(va);function fg(n){return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fg(n)}function dg(){return dg=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},dg.apply(this,arguments)}function f_(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function is(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?f_(Object(a),!0).forEach(function(u){vg(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):f_(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function WT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function pg(n,o){return pg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},pg(n,o)}function YT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Up(n);if(o){var d=Up(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return KT(this,a)}}function KT(n,o){if(o&&(fg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hg(n)}function hg(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Up(n){return Up=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Up(n)}function vg(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var Gi,qT=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&pg(f,p)})(d,n);var o,a,u=YT(d);function d(f){var p;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),vg(hg(p=u.call(this,f)),"setHoverON",function(){p.setState({isHovered:!0})}),vg(hg(p),"setHoverOFF",function(){p.setState({isHovered:!1})}),p.state={isHovered:!1},p}return o=d,(a=[{key:"getBackground",value:function(){var f=this.props.model,p=f.getTextStyle(),y=f.text,b=p.background||{};if(this.state.isHovered&&p.hover&&p.hover.background&&(b=is(is({},b),p.hover.background)),y&&y.value&&b.fill!=="transparent"){var w,T=p.fontSize,R=p.overflowMode,k=p.lineHeight,q=p.wrapPadding,ae=p.textWidth,ye=y.value,Me=y.x,Re=y.y,We=String(ye).split(/[\r\n]/g),lt=We.length;if(R==="autoWrap"&&ae){var kt=Jd({rows:We,style:{fontSize:"".concat(T,"px"),width:"".concat(ae,"px"),lineHeight:k,padding:q},rowsLength:lt,className:"lf-get-text-height"});w=is(is({},b),{},{x:Me-1,y:Re-1,width:ae,height:kt})}else{We&&We.forEach(function(vr){St(vr)});var wt=sf({rows:We,fontSize:T,rowsLength:lt}),er=wt.width,Rt=wt.height;if(typeof b.wrapPadding=="string"){var Tt=b.wrapPadding.split(",").filter(function(vr){return vr.trim()}).map(function(vr){return parseFloat(vr.trim())});Tt.length>0&&Tt.length<=4&&(Tt.length===1?Tt=[Tt[0],Tt[0],Tt[0],Tt[0]]:Tt.length===2?Tt=[Tt[0],Tt[1],Tt[0],Tt[1]]:Tt.length===3&&(Tt=[Tt[0],Tt[1],Tt[2],Tt[1]]),er+=Tt[1]+Tt[3],Rt+=Tt[0]+Tt[2],Me+=(Tt[1]-Tt[3])/2,Re+=(Tt[2]-Tt[0])/2)}w=is(is({},b),{},{x:Me-1,y:Re-1,width:er,height:Rt})}return Object(xe.g)(au,w)}}},{key:"getShape",value:function(){var f=this.props.model,p=f.text,y=p.value,b=p.x,w=p.y;if(y){var T=is({x:b,y:w,className:"lf-element-text",value:y},f.getTextStyle());return Object(xe.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(xe.g)(t_,dg({},T,{model:f})))}}}])&&WT(o.prototype,a),d}(n_);function yg(n){return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},yg(n)}function d_(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function ya(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?d_(Object(a),!0).forEach(function(u){Uo(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):d_(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function ZT(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return p_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return p_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function JT(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function gg(n,o){return gg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},gg(n,o)}function QT(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=zp(n);if(o){var d=zp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return eA(this,a)}}function eA(n,o){if(o&&(yg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Go(n)}function Go(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zp(n){return zp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},zp(n)}function Uo(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(Gi||(Gi={}));var h_=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&gg(f,p)})(d,n);var o,a,u=QT(d);function d(f){var p;(function(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")})(this,d),Uo(Go(p=u.call(this)),"stepDragData",void 0),Uo(Go(p),"stepDrag",void 0),Uo(Go(p),"oldEdge",void 0),Uo(Go(p),"preTargetNode",void 0),Uo(Go(p),"targetRuleResults",void 0),Uo(Go(p),"sourceRuleResults",void 0),Uo(Go(p),"handleMouseDown",function(T){p.stepDrag&&p.stepDrag.handleMouseDown(T)}),Uo(Go(p),"onDragStart",function(){var T=p.props,R=T.x,k=T.y,q=T.edgeModel,ae=q.startPoint,ye=q.endPoint,Me=q.pointsList;p.oldEdge={startPoint:ae,endPoint:ye,pointsList:Me},p.setState({endX:R,endY:k,dragging:!0})}),Uo(Go(p),"onDragging",function(T){var R=T.deltaX,k=T.deltaY,q=p.state,ae=q.endX,ye=q.endY,Me=p.props,Re=Me.graphModel,We=Me.type,lt=Re.transformModel,kt=Re.editConfigModel,wt=ZT(lt.moveCanvasPointByHtml([ae,ye],R,k),2),er=wt[0],Rt=wt[1];p.setState({endX:er,endY:Rt,dragging:!0});var Tt=p.props.edgeModel,vr=Wu({x:ae,y:ye},Re);if(vr&&vr.node&&p.isAllowAdjust(vr).pass){var Fr,qr=Tt.startPoint,Vr=Tt.endPoint,en=Tt.sourceNode,Ln=Tt.targetNode;We===Gi.SOURCE?Fr={startPoint:{x:vr.anchor.x,y:vr.anchor.y},endPoint:{x:Vr.x,y:Vr.y},sourceNode:vr.node,targetNode:Ln}:We===Gi.TARGET&&(Fr={startPoint:{x:qr.x,y:qr.y},endPoint:{x:vr.anchor.x,y:vr.anchor.y},sourceNode:en,targetNode:vr.node}),Tt.updateAfterAdjustStartAndEnd(Fr)}else We===Gi.SOURCE?Tt.updateStartPoint({x:er,y:Rt}):We===Gi.TARGET&&Tt.updateEndPoint({x:er,y:Rt});Tt.text.value&&kt.adjustEdge&&Tt.setText(Object.assign({},Tt.text,Tt.textPosition))}),Uo(Go(p),"onDragEnd",function(T){var R=T.event;try{var k;p.setState({dragging:!1});var q=p.props,ae=q.graphModel,ye=q.edgeModel,Me=q.type,Re=p.state,We=Re.endX,lt=Re.endY,kt=Re.dragging,wt=Wu({x:We,y:lt},ae);if(!kt)return;var er,Rt=!1;if(wt&&wt.node){var Tt=p.isAllowAdjust(wt),vr=Tt.pass,Fr=Tt.msg,qr=Tt.newTargetNode;if(vr){var Vr,en=ye.getData();er=ya(ya({},en),{},{sourceAnchorId:"",targetAnchorId:"",text:(en==null||(Vr=en.text)===null||Vr===void 0?void 0:Vr.value)||""}),Me===Gi.SOURCE?(er=ya(ya({},ae.edgeGenerator(ae.getNodeModelById(wt.node.id).getData(),ae.getNodeModelById(ye.targetNodeId).getData(),er)),{},{sourceNodeId:wt.node.id,sourceAnchorId:wt.anchor.id,startPoint:{x:wt.anchor.x,y:wt.anchor.y},targetNodeId:ye.targetNodeId,endPoint:ya({},ye.endPoint)}),ye.sourceNodeId===wt.node.id&&ye.sourceAnchorId===wt.anchor.id&&(Rt=!0)):Me===Gi.TARGET&&(er=ya(ya({},ae.edgeGenerator(ae.getNodeModelById(ye.sourceNodeId).getData(),ae.getNodeModelById(wt.node.id).getData(),er)),{},{sourceNodeId:ye.sourceNodeId,startPoint:ya({},ye.startPoint),targetNodeId:wt.node.id,targetAnchorId:wt.anchor.id,endPoint:{x:wt.anchor.x,y:wt.anchor.y}}),ye.targetNodeId===wt.node.id&&ye.targetAnchorId===wt.anchor.id&&(Rt=!0))}else{Rt=!0;var Ln=qr.getData();ae.eventCenter.emit(ir.CONNECTION_NOT_ALLOWED,{data:Ln,msg:Fr})}}else Rt=!0;if(Rt)p.recoveryEdge();else{var Vn=ye.getData();ae.deleteEdgeById(ye.id);var So=ae.addEdge(ya({},er));ae.eventCenter.emit(ir.EDGE_EXCHANGE_NODE,{data:{newEdge:So.getData(),oldEdge:Vn}})}(k=p.preTargetNode)===null||k===void 0||k.setElementState(zr.DEFAULT)}finally{p.props.graphModel.eventCenter.emit(ir.ADJUST_POINT_DRAGEND,{e:R,data:p.stepDragData})}}),Uo(Go(p),"recoveryEdge",function(){var T=p.props.edgeModel,R=p.oldEdge,k=R.startPoint,q=R.endPoint,ae=R.pointsList;T.updateStartPoint(k),T.updateEndPoint(q),T.modelType!==Pr.LINE_EDGE&&(T.pointsList=ae,T.initPoints())}),Uo(Go(p),"getAdjustPointStyle",function(){var T=p.props,R=T.graphModel.theme;return T.edgeModel,R.edgeAdjust}),p.state={dragging:!1,endX:0,endY:0},p.targetRuleResults=new Map,p.sourceRuleResults=new Map;var y=f.type,b=f.edgeModel,w=f.graphModel.eventCenter;return p.stepDragData={type:y,edgeData:b.getData()},p.stepDrag=new Wr({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:w,data:p.stepDragData}),p}return o=d,(a=[{key:"isAllowAdjust",value:function(f){var p=this.props,y=p.edgeModel,b=y.id,w=y.sourceNode,T=y.targetNode,R=y.sourceAnchorId,k=y.targetAnchorId,q=p.type,ae=null,ye=null,Me=null,Re=null;if(q===Gi.SOURCE?(ae=f.node,ye=T,Me=f.anchor,Re=T.getAnchorInfo(k)):(ae=w,ye=f.node,Re=f.anchor,Me=w.getAnchorInfo(R)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=f.node,Re.id===Me.id)return{pass:!1,msg:"",newTargetNode:ye};var We="".concat(ae.id,"_").concat(ye.id,"_").concat(Me.id,"_").concat(Re.id);if(!this.targetRuleResults.has(We)){var lt=ae.isAllowConnectedAsSource(ye,Me,Re,b),kt=ye.isAllowConnectedAsTarget(ae,Me,Re,b);this.sourceRuleResults.set(We,Yu(lt)),this.targetRuleResults.set(We,Yu(kt))}var wt=this.sourceRuleResults.get(We),er=wt.isAllPass,Rt=wt.msg,Tt=this.targetRuleResults.get(We),vr=Tt.isAllPass,Fr=Tt.msg,qr=er&&vr?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return q===Gi.SOURCE?ae.setElementState(qr):ye.setElementState(qr),{pass:er&&vr,msg:Fr||Rt,newTargetNode:ye}}},{key:"render",value:function(){var f=this.props,p=f.x,y=f.y,b=f.getAdjustPointShape,w=f.edgeModel,T=this.state.dragging;return Object(xe.g)("g",{pointerEvents:T?"none":"",onMouseDown:this.handleMouseDown},T?"":b(p,y,w))}}])&&JT(o.prototype,a),d}(xe.a);function mg(n){return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},mg(n)}function Of(){return Of=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Of.apply(this,arguments)}function tA(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return v_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return v_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function rA(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function nA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function bg(n,o){return bg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},bg(n,o)}function oA(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Hp(n);if(o){var d=Hp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return iA(this,a)}}function iA(n,o){if(o&&(mg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yi(n)}function yi(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Hp(n){return Hp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Hp(n)}function Ui(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var wf=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&bg(f,p)})(d,n);var o,a,u=oA(d);function d(){var f;rA(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Ui(yi(f=u.call.apply(u,[this].concat(y))),"startTime",void 0),Ui(yi(f),"contextMenuTime",void 0),Ui(yi(f),"clickTimer",void 0),Ui(yi(f),"textRef",Object(xe.f)()),Ui(yi(f),"handleHover",function(w,T){var R=f.props,k=R.model,q=R.graphModel.eventCenter;k.setHovered(w);var ae=w?ir.EDGE_MOUSEENTER:ir.EDGE_MOUSELEAVE,ye=k.getData();q.emit(ae,{data:ye,e:T})}),Ui(yi(f),"setHoverON",function(w){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,w))}),Ui(yi(f),"setHoverOFF",function(w){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,w))}),Ui(yi(f),"handleContextMenu",function(w){w.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var T=f.props,R=T.model,k=T.graphModel,q=k.getPointByClient({x:w.clientX,y:w.clientY});k.setElementStateById(R.id,zr.SHOW_MENU,q.domOverlayPosition),f.toFront(),R.isSelected||k.selectEdgeById(R.id);var ae=R==null?void 0:R.getData();k.eventCenter.emit(ir.EDGE_CONTEXTMENU,{data:ae,e:w,position:q})}),Ui(yi(f),"handleMouseDown",function(w){w.stopPropagation(),f.startTime=new Date().getTime()}),Ui(yi(f),"handleMouseUp",function(w){if(f.startTime&&!(new Date().getTime()-f.startTime>200||w.button===2)){var T=w.detail===2,R=f.props,k=R.model,q=R.graphModel,ae=k==null?void 0:k.getData(),ye=q.getPointByClient({x:w.clientX,y:w.clientY});if(T){var Me=q.editConfigModel,Re=q.textEditElement;if(Re&&Re.id===k.id&&q.setElementStateById(k.id,zr.DEFAULT),Me.edgeTextEdit&&k.text.editable&&q.setElementStateById(k.id,zr.TEXT_EDIT),k.modelType===Pr.POLYLINE_EDGE){var We=k,lt=q.getPointByClient({x:w.x,y:w.y}).canvasOverlayPosition,kt=lt.x,wt=lt.y,er=rt({x:kt,y:wt},We.points);We.dbClickPosition=er}q.eventCenter.emit(ir.EDGE_DBCLICK,{data:ae,e:w,position:ye})}else q.eventCenter.emit(ir.ELEMENT_CLICK,{data:ae,e:w,position:ye}),q.eventCenter.emit(ir.EDGE_CLICK,{data:ae,e:w,position:ye});var Rt=q.editConfigModel;q.selectEdgeById(k.id,Ql(w,Rt)),f.toFront()}}),f}return o=d,(a=[{key:"getShape",value:function(){return Object(xe.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,p=f.model,y=f.graphModel;if(p.state===zr.TEXT_EDIT)return null;var b=!1,w=y.editConfigModel;return(p.text.draggable||w.edgeTextDraggable)&&(b=!0),Object(xe.g)(qT,{ref:this.textRef,editable:w.edgeTextEdit&&p.text.editable,model:p,graphModel:y,draggable:b})}},{key:"getArrowInfo",value:function(){var f=this.props.model,p=f.startPoint,y=f.endPoint,b=f.isSelected;return{start:p,end:y,hover:this.state.hover,isSelected:b}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,p=f.id,y=f.getArrowStyle(),b=y.refY,w=b===void 0?0:b,T=y.refX,R=T===void 0?2:T,k=tA(this.getLastTwoPoints(),2),q=k[0],ae=k[1],ye="auto";return q!==null&&ae!==null&&(ye=Tv({x:ae.x-q.x,y:ae.y-q.y,z:0})*(180/Math.PI)),Object(xe.g)("g",null,Object(xe.g)("defs",null,Object(xe.g)("marker",{id:"marker-start-".concat(p),refX:-R,refY:w,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(xe.g)("marker",{id:"marker-end-".concat(p),refX:R,refY:w,overflow:"visible",orient:ye,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(xe.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),p=f.stroke,y=f.strokeWidth,b=f.offset,w=f.verticalLength;return Object(xe.g)("path",{stroke:p,fill:p,strokeWidth:y,transform:"rotate(180)",d:"M 0 0 L ".concat(b," -").concat(w," L ").concat(b," ").concat(w," Z")})}},{key:"getAdjustPointShape",value:function(f,p,y){var b=y.getAdjustPointStyle();return Object(xe.g)(vf,Of({className:"lf-edge-adjust-point"},b,{x:f,y:p}))}},{key:"getAdjustPoints",value:function(){var f=this.props,p=f.model,y=f.graphModel,b=p.getAdjustStart(),w=p.getAdjustEnd();return Object(xe.g)("g",null,Object(xe.g)(h_,Of({type:"SOURCE"},b,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:p,graphModel:y})),Object(xe.g)(h_,Of({type:"TARGET"},w,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:p,graphModel:y})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(xe.g)("g",null)}},{key:"getAppend",value:function(){return Object(xe.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,p=f.graphModel,y=f.model;p.overlapMode!==co.INCREASE&&p.toFront(y.id)}},{key:"render",value:function(){var f=this.props,p=f.model,y=p.isSelected,b=p.isHitable,w=p.isShowAdjustPoint;return f.graphModel.animation,Object(xe.g)("g",null,Object(xe.g)("g",{className:["lf-edge",!b&&"pointer-none",y&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),w&&y?this.getAdjustPoints():"")}}])&&nA(o.prototype,a),d}(xe.a);function _g(n){return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_g(n)}function aA(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return y_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return y_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function y_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}var xf=function(n){var o={d:""};return Object.entries(n).forEach(function(a){var u=aA(a,2),d=u[0],f=u[1],p=_g(f);d!=="style"&&p==="object"||(o[d]=f)}),Object(xe.g)("path",o)};function Eg(n){return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Eg(n)}function Og(){return Og=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Og.apply(this,arguments)}function uA(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function sA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function wg(n,o){return wg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},wg(n,o)}function cA(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Xp(n);if(o){var d=Xp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return lA(this,a)}}function lA(n,o){if(o&&(Eg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Xp(n){return Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Xp(n)}var xg=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&wg(f,p)})(d,n);var o,a,u=cA(d);function d(){return uA(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getEdge",value:function(){var f=this.props.model,p=f.startPoint,y=f.endPoint,b=f.isAnimation,w=f.arrowConfig,T=f.getEdgeStyle(),R=f.getEdgeAnimationStyle(),k=R.strokeDasharray,q=R.stroke,ae=R.strokeDashoffset,ye=R.animationName,Me=R.animationDuration,Re=R.animationIterationCount,We=R.animationTimingFunction,lt=R.animationDirection;return Object(xe.g)(Ec,Og({},T,{x1:p.x,y1:p.y,x2:y.x,y2:y.y},w,b?{strokeDasharray:k,stroke:q,style:{strokeDashoffset:ae,animationName:ye,animationDuration:Me,animationIterationCount:Re,animationTimingFunction:We,animationDirection:lt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,p=function(k){var q,ae=k.start,ye=k.end;if(ae.x===ye.x&&ae.y===ye.y)q="";else{var Me={start:ae,end:ye,offset:10,verticalLength:5},Re=nu(rs(rs({},Me),{},{type:"start"})),We=nu(rs(rs({},Me),{},{type:"end"}));q="M".concat(Re.leftX," ").concat(Re.leftY,` 
    L`).concat(Re.rightX," ").concat(Re.rightY,` 
    L`).concat(We.rightX," ").concat(We.rightY,`
    L`).concat(We.leftX," ").concat(We.leftY," z")}return{d:q,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:f.startPoint,end:f.endPoint}),y=p.d,b=p.strokeWidth,w=p.fill,T=p.strokeDasharray,R=p.stroke;return Object(xe.g)(xf,{d:y,fill:w,strokeWidth:b,stroke:R,strokeDasharray:T})}}])&&sA(o.prototype,a),d}(wf);function Sg(n){return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Sg(n)}function fA(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return g_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return g_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}var dA=function(n){var o={points:"",fill:"none"};return Object.entries(n).forEach(function(a){var u=fA(a,2),d=u[0],f=u[1];(d==="style"||Sg(f)!=="object")&&(o[d]=f)}),Object(xe.g)("polyline",o)};function Tg(n){return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Tg(n)}function m_(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function Vp(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?m_(Object(a),!0).forEach(function(u){ma(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):m_(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function Ag(){return Ag=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Ag.apply(this,arguments)}function pA(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return b_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return b_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function hA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Pg(n,o){return Pg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Pg(n,o)}function vA(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=$p(n);if(o){var d=$p(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return yA(this,a)}}function yA(n,o){if(o&&(Tg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ga(n)}function ga(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $p(n){return $p=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},$p(n)}function ma(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var Ng=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Pg(f,p)})(d,n);var o,a,u=vA(d);function d(){var f;return function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}(this,d),ma(ga(f=u.call(this)),"drag",void 0),ma(ga(f),"isDragging",void 0),ma(ga(f),"isShowAdjustPointTemp",void 0),ma(ga(f),"appendInfo",void 0),ma(ga(f),"onDragStart",function(){var p=f.props.model;p.dragAppendStart(),f.isShowAdjustPointTemp=p.isShowAdjustPoint,p.isShowAdjustPoint=!1}),ma(ga(f),"onDragging",function(p){var y=p.deltaX,b=p.deltaY,w=f.props,T=w.model,R=w.graphModel;f.isDragging=!0;var k=R.transformModel,q=R.editConfigModel,ae=pA(k.fixDeltaXY(y,b),2),ye=ae[0],Me=ae[1],Re=T,We=q.adjustEdgeMiddle;f.appendInfo=We?Re.dragAppendSimple(f.appendInfo,{x:ye,y:Me}):Re.dragAppend(f.appendInfo,{x:ye,y:Me})}),ma(ga(f),"onDragEnd",function(){var p=f.props,y=p.model,b=p.graphModel.eventCenter,w=y;w.dragAppendEnd(),f.isDragging=!1,w.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,b.emit(ir.EDGE_ADJUST,{data:w.getData()})}),ma(ga(f),"beforeDragStart",function(p,y){y.dragAble&&f.drag.handleMouseDown(p),f.appendInfo=y}),f.drag=new Wr({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return o=d,(a=[{key:"getEdge",value:function(){var f=this.props.model,p=f.points,y=f.isAnimation,b=f.arrowConfig,w=f.getEdgeStyle(),T=f.getEdgeAnimationStyle(),R=T.strokeDasharray,k=T.stroke,q=T.strokeDashoffset,ae=T.animationName,ye=T.animationDuration,Me=T.animationIterationCount,Re=T.animationTimingFunction,We=T.animationDirection;return Object(xe.g)(dA,Ag({points:p},w,b,y?{strokeDasharray:R,stroke:k,style:{strokeDashoffset:q,animationName:ae,animationDuration:ye,animationIterationCount:Me,animationTimingFunction:Re,animationDirection:We}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,p=f.points,y=f.isSelected,b={start:null,end:null,hover:this.state.hover,isSelected:y},w=Se(p);return w.length>=2&&(b.start=w[w.length-2],b.end=w[w.length-1]),b}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,p=Se(f);return p.length>=2?[p[p.length-2],p[p.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var p,y=f.start,b=f.end;if(y.x===b.x&&y.y===b.y)p="";else{var w={start:y,end:b,offset:10,verticalLength:5},T=nu(Vp(Vp({},w),{},{type:"start"})),R=nu(Vp(Vp({},w),{},{type:"end"}));p="M".concat(T.leftX," ").concat(T.leftY,` 
      L`).concat(T.rightX," ").concat(T.rightY,` 
      L`).concat(R.rightX," ").concat(R.rightY,`
      L`).concat(R.leftX," ").concat(R.leftY," z")}return{d:p,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var p=this.getAppendAttributes(f),y=p.d,b=p.strokeWidth,w=p.fill,T=p.strokeDasharray,R=p.stroke;return Object(xe.g)(xf,{d:y,fill:w,strokeWidth:b,stroke:R,strokeDasharray:T})}},{key:"getAppendWidth",value:function(){for(var f=this,p=this.props,y=p.model,b=p.graphModel,w=y.pointsList,T=y.draggable,R=[],k=w.length,q=function(ye){var Me="lf-polyline-append",Re={start:{x:w[ye].x,y:w[ye].y},end:{x:w[ye+1].x,y:w[ye+1].y},startIndex:ye,endIndex:ye+1,direction:"",dragAble:!0},We=Object(xe.g)("g",{className:Me},f.getAppendShape(Re)),lt=b.editConfigModel,kt=lt.adjustEdge,wt=lt.adjustEdgeMiddle;if(kt&&T){var er=Re.startIndex,Rt=Re.endIndex,Tt=wt&&(er===0||Rt===k-1);Re.dragAble=!Tt,Re.start.x===Re.end.x?(Re.dragAble&&(Me+="-ew-resize"),Re.direction=Kr.VERTICAL):Re.start.y===Re.end.y&&(Re.dragAble&&(Me+="-ns-resize"),Re.direction=Kr.HORIZONTAL),We=Object(xe.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(vr){return f.beforeDragStart(vr,Re)}},Object(xe.g)("g",{className:Me},f.getAppendShape(Re)))}R.push(We)},ae=0;ae<k-1;ae++)q(ae);return Object(xe.g)("g",null,R)}}])&&hA(o.prototype,a),d}(wf);function jg(n){return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},jg(n)}function gA(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return __(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return __(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function __(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function Mg(){return Mg=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},Mg.apply(this,arguments)}function mA(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function bA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Rg(n,o){return Rg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Rg(n,o)}function _A(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Wp(n);if(o){var d=Wp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return EA(this,a)}}function EA(n,o){if(o&&(jg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Wp(n){return Wp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Wp(n)}var Cg=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&Rg(f,p)})(d,n);var o,a,u=_A(d);function d(){return mA(this,d),u.apply(this,arguments)}return o=d,(a=[{key:"getEdge",value:function(){var f=this.props.model,p=f.getEdgeStyle(),y=f.path,b=f.isAnimation,w=f.arrowConfig,T=f.getEdgeAnimationStyle(),R=T.strokeDasharray,k=T.stroke,q=T.strokeDashoffset,ae=T.animationName,ye=T.animationDuration,Me=T.animationIterationCount,Re=T.animationTimingFunction,We=T.animationDirection;return Object(xe.g)(xf,Mg({d:y},p,w,b?{strokeDasharray:R,stroke:k,style:{strokeDashoffset:q,animationName:ae,animationDuration:ye,animationIterationCount:Me,animationTimingFunction:Re,animationDirection:We}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(xe.g)(xf,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,p=this.state.hover,y=f,b=y.path,w=y.isSelected,T=gA(vt(b),2);return{start:T[0],end:T[1],hover:p,isSelected:w}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.path;return vt(f)}}])&&bA(o.prototype,a),d}(wf);function Dg(n){return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Dg(n)}function E_(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function OA(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function wA(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function xA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function kg(n,o){return kg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},kg(n,o)}function SA(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Yp(n);if(o){var d=Yp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return TA(this,a)}}function TA(n,o){if(o&&(Dg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function Yp(n){return Yp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Yp(n)}var AA=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&kg(f,p)})(d,n);var o,a,u=SA(d);function d(){return wA(this,d),u.apply(this,arguments)}return o=d,a=[{key:"getArrowAttributes",value:function(){var f=this.props,p=f.arrowInfo,y=f.style,b=p.start,w=p.end,T={start:b,end:w,offset:y.offset,verticalLength:y.verticalLength,type:"end"},R=nu(T),k=R.leftX,q=R.leftY,ae=R.rightX,ye=R.rightY;return function(Me){for(var Re=1;Re<arguments.length;Re++){var We=arguments[Re]!=null?arguments[Re]:{};Re%2?E_(Object(We),!0).forEach(function(lt){OA(Me,lt,We[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Me,Object.getOwnPropertyDescriptors(We)):E_(Object(We)).forEach(function(lt){Object.defineProperty(Me,lt,Object.getOwnPropertyDescriptor(We,lt))})}return Me}({d:"M".concat(k," ").concat(q," L").concat(w.x," ").concat(w.y," L").concat(ae," ").concat(ye," z")},y)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),p=f.d,y=f.strokeWidth,b=f.stroke,w=f.fill;return Object(xe.g)(xf,{d:p,fill:w,strokeWidth:y,stroke:b})}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-arrow"},this.getShape())}}],a&&xA(o.prototype,a),d}(xe.a),O_=function(n,o){return Xe(n,o)},PA=function(n){var o=n==null?0:n.length;return o?n[o-1]:void 0},Ig=function(){return Kt.a.Date.now()},NA=/\s/,jA=function(n){for(var o=n.length;o--&&NA.test(n.charAt(o)););return o},MA=/^\s+/,RA=function(n){return n&&n.slice(0,jA(n)+1).replace(MA,"")},CA=/^[-+]0x[0-9a-f]+$/i,DA=/^0b[01]+$/i,kA=/^0o[0-7]+$/i,IA=parseInt,w_=function(n){if(typeof n=="number")return n;if(Or(n))return NaN;if(kr(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=kr(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=RA(n);var a=DA.test(n);return a||kA.test(n)?IA(n.slice(2),a?2:8):CA.test(n)?NaN:+n},LA=Math.max,FA=Math.min,BA=function(n,o,a){var u,d,f,p,y,b,w=0,T=!1,R=!1,k=!0;if(typeof n!="function")throw new TypeError("Expected a function");function q(lt){var kt=u,wt=d;return u=d=void 0,w=lt,p=n.apply(wt,kt)}function ae(lt){return w=lt,y=setTimeout(Me,o),T?q(lt):p}function ye(lt){var kt=lt-b;return b===void 0||kt>=o||kt<0||R&&lt-w>=f}function Me(){var lt=Ig();if(ye(lt))return Re(lt);y=setTimeout(Me,function(kt){var wt=o-(kt-b);return R?FA(wt,f-(kt-w)):wt}(lt))}function Re(lt){return y=void 0,k&&u?q(lt):(u=d=void 0,p)}function We(){var lt=Ig(),kt=ye(lt);if(u=arguments,d=this,b=lt,kt){if(y===void 0)return ae(b);if(R)return clearTimeout(y),y=setTimeout(Me,o),q(b)}return y===void 0&&(y=setTimeout(Me,o)),p}return o=w_(o)||0,kr(a)&&(T=!!a.leading,f=(R="maxWait"in a)?LA(w_(a.maxWait)||0,o):f,k="trailing"in a?!!a.trailing:k),We.cancel=function(){y!==void 0&&clearTimeout(y),w=0,u=b=d=y=void 0},We.flush=function(){return y===void 0?p:Re(Ig())},We},GA=i(167);function UA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function lu(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var x_,S_,T_,zA=function(){function n(u){(function(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")})(this,n),lu(this,"undos",[]),lu(this,"redos",[]),lu(this,"callbacks",[]),lu(this,"stopWatch",null),lu(this,"curData",null),lu(this,"maxSize",50),lu(this,"waitTime",100),lu(this,"eventCenter",void 0),this.eventCenter=u}var o,a;return o=n,(a=[{key:"add",value:function(u){O_(PA(this.undos),u)||(this.undos.push(u),O_(this.curData,u)||(this.redos=[]),this.eventCenter.emit(ir.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var d=this.undos.pop();return this.curData=cn(d),d}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=cn(u),u}}},{key:"watch",value:function(u){var d=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(GA.a)(u,BA(function(){var f=u.modelToHistoryData();f&&d.add(f)},this.waitTime))}}])&&UA(o.prototype,a),n}();function Lg(n){return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Lg(n)}function HA(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||function(a,u){if(a){if(typeof a=="string")return A_(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return A_(a,u)}}(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function A_(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function P_(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function Rc(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?P_(Object(a),!0).forEach(function(u){as(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):P_(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function N_(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Fg(n,o){return Fg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Fg(n,o)}function XA(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Kp(n);if(o){var d=Kp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return VA(this,a)}}function VA(n,o){if(o&&(Lg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cc(n)}function Cc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Kp(n){return Kp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Kp(n)}function as(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var j_,M_,R_,Bg=gi((T_=S_=function(n){(function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&Fg(p,y)})(f,n);var o,a,u,d=XA(f);function f(){var p;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,f),as(Cc(p=d.call(this)),"ref",Object(xe.f)()),as(Cc(p),"__prevText",{type:"",text:"",id:""}),as(Cc(p),"keyupHandler",function(y){var b=p.props.graphModel.textEditElement;y.key==="Enter"&&y.altKey&&b.setElementState(0)}),as(Cc(p),"inputHandler",function(y){var b=y.target.innerText,w=p.props.graphModel.textEditElement;p.__prevText={type:w.type,text:b.replace(/(\r\n)+$|(\n)+$/,""),id:w.id}}),as(Cc(p),"keydownHandler",function(y){y.stopPropagation()}),p.state={style:{left:0,top:0}},p}return o=f,u=[{key:"getDerivedStateFromProps",value:function(p){var y,b=p.graphModel,w=b.transformModel,T=b.theme,R=b.textEditElement;if(R){var k;if((k=R.text)===null||k===void 0||!k.value)if(R.BaseType===Tn.EDGE){var q=(R=R).text,ae=R.textPosition,ye=ae.x,Me=ae.y;q.x=ye,q.y=Me,R.setText(q)}else R=R;var Re={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(R.BaseType===Tn.EDGE){var We=T.edgeText,lt=We.overflowMode,kt=We.lineHeight,wt=We.wrapPadding,er=We.textWidth;er&&lt==="autoWrap"&&(y=Rc(Rc({},Re),{},{width:er,minWidth:er,lineHeight:kt,padding:wt}))}else if(R.BaseType===Tn.NODE){var Rt=T.nodeText,Tt=Rt.overflowMode,vr=Rt.lineHeight,Fr=Rt.wrapPadding,qr=Rt.textWidth,Vr=R,en=Vr.width,Ln=Vr.modelType;(Ln!==Pr.TEXT_NODE&&Tt==="autoWrap"||Ln===Pr.TEXT_NODE&&qr)&&(y=Rc(Rc({},Re),{},{width:qr||en,minWidth:qr||en,lineHeight:vr,padding:Fr}))}var Vn=R.text,So=Vn.x,zi=Vn.y,ri=HA(w.CanvasPointToHtmlPoint([So,zi]),2);return{style:Rc({left:ri[0],top:ri[1]},y)}}}}],(a=[{key:"componentDidUpdate",value:function(){var p=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var y=this.__prevText,b=y.text,w=y.id;p.updateText(w,b),p.eventCenter.emit(ir.TEXT_UPDATE,Rc({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(p){if(window.getSelection!==void 0&&document.createRange!==void 0){var y=document.createRange();y.selectNodeContents(p),y.collapse(!1);var b=window.getSelection();b.removeAllRanges(),b.addRange(y)}}},{key:"render",value:function(){var p,y=this.props.graphModel.textEditElement,b=this.state.style;return y?Object(xe.g)("div",{contentEditable:!0,className:"lf-text-input",style:b,ref:this.ref,key:y.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(p=y.text)===null||p===void 0?void 0:p.value):null}}])&&N_(o.prototype,a),u&&N_(o,u),f}(xe.a),as(S_,"toolName","textEdit"),x_=T_))||x_,$A=function(n){return n.modelType===Pr.LINE_EDGE?function(o){var a=o.startPoint,u=o.endPoint,d=(a.x+u.x)/2,f=(a.y+u.y)/2,p=Math.abs(a.x-u.x)+10,y=Math.abs(a.y-u.y)+10;return{x:d-p/2,y:f-y/2,x1:d+p/2,y1:f+y/2}}(n):n.modelType===Pr.POLYLINE_EDGE?function(o){var a=o.points,u=Se(a),d=ou(u,8),f=d.x,p=d.y,y=d.width,b=d.height;return{x:f-y/2,y:p-b/2,x1:f+y/2,y1:p+b/2}}(n):n.modelType===Pr.BEZIER_EDGE?function(o){var a=o.path,u=At(a),d=ou(u,8),f=d.x,p=d.y,y=d.width,b=d.height;return{x:f-y/2,y:p-b/2,x1:f+y/2,y1:p+b/2}}(n):void 0};function Gg(n){return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Gg(n)}function C_(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var f,p,y=[],b=!0,w=!1;try{for(d=d.call(a);!(b=(f=d.next()).done)&&(y.push(f.value),!u||y.length!==u);b=!0);}catch(T){w=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(w)throw p}}return y}}(n,o)||D_(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function WA(n){return function(o){if(Array.isArray(o))return Ug(o)}(n)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(n)||D_(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function D_(n,o){if(n){if(typeof n=="string")return Ug(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ug(n,o):void 0}}function Ug(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function YA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function zg(n,o){return zg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},zg(n,o)}function KA(n){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=qp(n);if(o){var d=qp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return qA(this,a)}}function qA(n,o){if(o&&(Gg(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sf(n)}function Sf(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qp(n){return qp=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},qp(n)}function Tf(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var Hg=gi((R_=M_=function(n){(function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),p&&zg(f,p)})(d,n);var o,a,u=KA(d);function d(f){var p;(function(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")})(this,d),Tf(Sf(p=u.call(this)),"stepDrag",void 0),Tf(Sf(p),"handleMouseDown",function(T){p.stepDrag.handleMouseDown(T)}),Tf(Sf(p),"onDragging",function(T){var R=T.deltaX,k=T.deltaY,q=p.props.graphModel,ae=q.getSelectElements(!0);q.moveNodes(ae.nodes.map(function(ye){return ye.id}),R,k)}),Tf(Sf(p),"handleContextMenu",function(T){T.preventDefault();var R=p.props,k=R.graphModel,q=R.graphModel,ae=q.eventCenter,ye=q.selectElements,Me=k.getPointByClient({x:T.clientX,y:T.clientY}),Re={nodes:[],edges:[]};WA(ye.values()).forEach(function(We){We.BaseType===Tn.NODE&&Re.nodes.push(We.getData()),We.BaseType===Tn.EDGE&&Re.edges.push(We.getData())}),ae.emit(ir.SELECTION_CONTEXTMENU,{data:Re,e:T,position:Me})});var y=f.graphModel,b=y.gridSize,w=y.eventCenter;return p.stepDrag=new Wr({onDragging:p.onDragging,step:b,eventType:"SELECTION",eventCenter:w}),p}return o=d,(a=[{key:"render",value:function(){var f=this.props.graphModel,p=f.selectElements,y=f.transformModel;if(!(p.size<=1)){var b=Number.MAX_SAFE_INTEGER,w=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;p.forEach(function(ye){var Me={x:0,y:0,x1:0,y1:0};ye.BaseType===Tn.NODE&&(Me=function(Re){var We=Re.x,lt=Re.y,kt=Re.width,wt=Re.height;return{x:We-kt/2,y:lt-wt/2,x1:We+kt/2,y1:lt+wt/2}}(ye)),ye.BaseType===Tn.EDGE&&(Me=$A(ye)),b=Math.min(b,Me.x),w=Math.min(w,Me.y),T=Math.max(T,Me.x1),R=Math.max(R,Me.y1)});var k=C_(y.CanvasPointToHtmlPoint([b,w]),2);b=k[0],w=k[1];var q=C_(y.CanvasPointToHtmlPoint([T,R]),2);T=q[0],R=q[1];var ae={left:"".concat(b-10,"px"),top:"".concat(w-10,"px"),width:"".concat(T-b+20,"px"),height:"".concat(R-w+20,"px")};return Object(xe.g)("div",{className:"lf-multiple-select",style:ae,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&YA(o.prototype,a),d}(xe.a),Tf(M_,"toolName","multipleSelect"),j_=R_))||j_;function ZA(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Zp(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var JA=function(){function n(u){(function(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")})(this,n),Zp(this,"tools",void 0),Zp(this,"components",void 0),Zp(this,"toolMap",new Map),Zp(this,"instance",void 0),this.instance=u,this.isDisabledTool(Bg.toolName)||this.registerTool(Bg.toolName,Bg),this.isDisabledTool(Hg.toolName)||this.registerTool(Hg.toolName,Hg);var d=u.graphModel;d.eventCenter.on("".concat(ir.GRAPH_TRANSFORM,",").concat(ir.NODE_CLICK,",").concat(ir.BLANK_CLICK," "),function(){var f=d.textEditElement,p=d.editConfigModel,y=p.edgeTextEdit,b=p.nodeTextEdit;(y||b)&&f&&d.textEditElement.setElementState(zr.DEFAULT)})}var o,a;return o=n,(a=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,d){this.toolMap.set(u,d)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&ZA(o.prototype,a),n}(),QA=i(168),eP=i.n(QA);function tP(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Xg(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var k_=function(){function n(u){(function(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")})(this,n),Xg(this,"mousetrap",void 0),Xg(this,"options",void 0),Xg(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var d=u.lf;this.target=d.container,this.mousetrap=new eP.a(this.target),u.keyboard.enabled&&this.enable(!0)}var o,a;return o=n,(a=[{key:"initShortcuts",value:function(){var u=this,d=this.options.keyboard.shortcuts;if(d)if(zn(d))d.forEach(function(b){var w=b.keys,T=b.callback,R=b.action;return u.on(w,T,R)});else{var f=d.keys,p=d.callback,y=d.action;this.on(f,p,y)}}},{key:"on",value:function(u,d,f){this.mousetrap.bind(this.getKeys(u),d,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,d){this.mousetrap.unbind(this.getKeys(u),d)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var d=this;return(Array.isArray(u)?u:[u]).map(function(f){return d.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&tP(o.prototype,a),n}(),rP=k_,ba=null;function I_(n,o){return n.x+=o,n.y+=o,n.text&&(n.text.x+=o,n.text.y+=o),n}function L_(n,o){return n.startPoint&&(n.startPoint.x+=o,n.startPoint.y+=o),n.endPoint&&(n.endPoint.x+=o,n.endPoint.y+=o),n.pointsList&&n.pointsList.length>0&&n.pointsList.forEach(function(a){a.x+=o,a.y+=o}),n.text&&(n.text.x+=o,n.text.y+=o),n}function Vg(n){return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Vg(n)}function F_(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function Af(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?F_(Object(a),!0).forEach(function(u){In(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):F_(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function B_(n,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function In(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}var $g=function(){function n(d){var f,p,y=this;(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,n),In(this,"container",void 0),In(this,"width",void 0),In(this,"height",void 0),In(this,"graphModel",void 0),In(this,"history",void 0),In(this,"viewMap",new Map),In(this,"tool",void 0),In(this,"keyboard",void 0),In(this,"dnd",void 0),In(this,"options",void 0),In(this,"snaplineModel",void 0),In(this,"components",[]),In(this,"plugins",void 0),In(this,"extension",{}),In(this,"adapterIn",void 0),In(this,"adapterOut",void 0),In(this,"getView",function(b){return y.viewMap.get(b)}),d=Bb(d),this.options=d,this.container=this.initContainer(d.container),this.plugins=d.plugins,this.graphModel=new Er(Af({},d)),this.tool=new JA(this),this.history=new zA(this.graphModel.eventCenter),this.dnd=new iS({lf:this}),this.keyboard=new rP({lf:this,keyboard:d.keyboard}),d.snapline!==!1&&(this.snaplineModel=new K0(this.graphModel),f=this.graphModel.eventCenter,p=this.snaplineModel,f.on("node:mousemove",function(b){var w=b.data;p.setNodeSnapLine(w)}),f.on("node:mouseup",function(){p.clearSnapline()})),function(b,w){var T=b.keyboard,R=T.options.keyboard;T.on(["cmd + c","ctrl + c"],function(){if(!R.enabled||w.textEditElement)return!0;var k=b.options.guards,q=w.getSelectElements(!1);return k&&k.beforeClone&&!k.beforeClone(q)||q.nodes.length===0&&q.edges.length===0?(ba=null,!0):((ba=q).nodes.forEach(function(ae){return I_(ae,40)}),ba.edges.forEach(function(ae){return L_(ae,40)}),!1)}),T.on(["cmd + v","ctrl + v"],function(){if(!R.enabled||w.textEditElement)return!0;if(ba&&(ba.nodes||ba.edges)){b.clearSelectElements();var k=b.addElements(ba);if(!k)return!0;k.nodes.forEach(function(q){return b.selectElementById(q.id,!0)}),k.edges.forEach(function(q){return b.selectElementById(q.id,!0)}),ba.nodes.forEach(function(q){return I_(q,40)}),ba.edges.forEach(function(q){return L_(q,40)})}return!1}),T.on(["cmd + z","ctrl + z"],function(){return!R.enabled||!!w.textEditElement||(b.undo(),!1)}),T.on(["cmd + y","ctrl + y"],function(){return!R.enabled||!!w.textEditElement||(b.redo(),!1)}),T.on(["backspace"],function(){if(!R.enabled||w.textEditElement)return!0;var k=w.getSelectElements(!0);return b.clearSelectElements(),k.edges.forEach(function(q){return b.deleteEdge(q.id)}),k.nodes.forEach(function(q){return b.deleteNode(q.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(d.disabledPlugins)}var o,a,u;return o=n,a=[{key:"register",value:function(d,f){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof d=="string"){var y={BaseEdge:wf,BaseEdgeModel:qu,BaseNode:va,BaseNodeModel:ha,RectNode:By,RectNodeModel:by,CircleNode:Hy,CircleNodeModel:ey,PolygonNode:Yy,PolygonNodeModel:vy,TextNode:ag,TextNodeModel:wy,LineEdge:xg,LineEdgeModel:qo,DiamondNode:Jy,DiamondNodeModel:iy,PolylineEdge:Ng,PolylineEdgeModel:Wn,BezierEdge:Cg,BezierEdgeModel:Yv,EllipseNode:ng,EllipseNodeModel:cy,HtmlNode:lg,HtmlNodeModel:Ty,h:xe.g,type:d};this.viewMap.forEach(function(k){var q=k.extendKey;q&&(y[q]=k)}),this.graphModel.modelMap.forEach(function(k){var q=k.extendKey;q&&(y[q]=k)});var b=f(y),w=b.view,T=b.model,R=w;p&&!R.isObervered&&(R.isObervered=!0,R=Wt(R)),this.setView(d,R),this.graphModel.setModel(d,T)}else this.registerElement(d)}},{key:"registerElement",value:function(d){var f=d.view;d.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=Wt(f)),this.setView(d.type,f),this.graphModel.setModel(d.type,d.model)}},{key:"batchRegister",value:function(){var d=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(p){d.registerElement(p)})}},{key:"defaultRegister",value:function(){this.registerElement({view:By,model:by,type:"rect"}),this.registerElement({type:"circle",view:Hy,model:ey}),this.registerElement({type:"polygon",view:Yy,model:vy}),this.registerElement({type:"line",view:xg,model:qo}),this.registerElement({type:"polyline",view:Ng,model:Wn}),this.registerElement({type:"bezier",view:Cg,model:Yv}),this.registerElement({type:"text",view:ag,model:wy}),this.registerElement({type:"ellipse",view:ng,model:cy}),this.registerElement({type:"diamond",view:Jy,model:iy}),this.registerElement({type:"html",view:lg,model:Ty})}},{key:"selectElementById",value:function(d){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(d,f),!f&&p&&this.graphModel.toFront(d)}},{key:"focusOn",value:function(d){var f=this.graphModel.transformModel,p=d.coordinate,y=d.id;if(!p){var b=this.getNodeModelById(y);b&&(p=b.getData());var w=this.getEdgeModelById(y);w&&(p=w.textPosition)}var T=p,R=T.x,k=T.y;f.focusOn(R,k,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(d){this.graphModel.setTheme(d)}},{key:"resize",value:function(d,f){this.graphModel.resize(d,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(d){this.graphModel.setDefaultEdgeType(d)}},{key:"updateText",value:function(d,f){this.graphModel.updateText(d,f)}},{key:"deleteElement",value:function(d){var f,p,y,b=this.getModelById(d);return!!b&&(p=(y=(In(f={},Tn.NODE,this.deleteNode),In(f,Tn.EDGE,this.deleteEdge),f)[b.BaseType])===null||y===void 0?void 0:y.call(this,d))!==null&&p!==void 0&&p}},{key:"getModelById",value:function(d){return this.graphModel.getElement(d)}},{key:"getDataById",value:function(d){var f;return(f=this.graphModel.getElement(d))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(d,f){this.graphModel.changeNodeType(d,f)}},{key:"changeEdgeType",value:function(d,f){this.graphModel.changeEdgeType(d,f)}},{key:"getNodeEdges",value:function(d){return this.graphModel.getNodeEdges(d)}},{key:"addNode",value:function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir.NODE_ADD,p=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(d,f,p)}},{key:"deleteNode",value:function(d){var f=this.graphModel.getNodeModelById(d);if(!f)return!1;var p=f.getData(),y=this.options.guards,b=!y||!y.beforeDelete||y.beforeDelete(p);return b&&this.graphModel.deleteNode(d),b}},{key:"cloneNode",value:function(d){var f=this.graphModel.getNodeModelById(d).getData(),p=this.options.guards;if(!p||!p.beforeClone||p.beforeClone(f))return this.graphModel.cloneNode(d)}},{key:"changeNodeId",value:function(d,f){return this.graphModel.changeNodeId(d,f)}},{key:"getNodeModelById",value:function(d){return this.graphModel.getNodeModelById(d)}},{key:"getNodeDataById",value:function(d){var f;return(f=this.graphModel.getNodeModelById(d))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(d){return this.graphModel.addEdge(d)}},{key:"deleteEdge",value:function(d){var f=this.options.guards,p=this.graphModel.edgesMap[d];if(!p)return!1;var y=p.model.getData(),b=!f||!f.beforeDelete||f.beforeDelete(y);return b&&this.graphModel.deleteEdgeById(d),b}},{key:"deleteEdgeByNodeId",value:function(d){var f=d.sourceNodeId,p=d.targetNodeId;f&&p?this.graphModel.deleteEdgeBySourceAndTarget(f,p):f?this.graphModel.deleteEdgeBySource(f):p&&this.graphModel.deleteEdgeByTarget(p)}},{key:"changeEdgeId",value:function(d,f){return this.graphModel.changeEdgeId(d,f)}},{key:"getEdgeModelById",value:function(d){var f;return(f=this.graphModel.edgesMap[d])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(d){var f=this.graphModel.edges,p=d.sourceNodeId,y=d.targetNodeId;if(p&&y){var b=[];return f.forEach(function(R){R.sourceNodeId===p&&R.targetNodeId===y&&b.push(R)}),b}if(p){var w=[];return f.forEach(function(R){R.sourceNodeId===p&&w.push(R)}),w}if(y){var T=[];return f.forEach(function(R){R.targetNodeId===y&&T.push(R)}),T}return[]}},{key:"getEdgeDataById",value:function(d){var f;return(f=this.getEdgeModelById(d))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(d){return this.graphModel.getNodeIncomingEdge(d)}},{key:"getNodeOutgoingEdge",value:function(d){return this.graphModel.getNodeOutgoingEdge(d)}},{key:"getNodeIncomingNode",value:function(d){return this.graphModel.getNodeIncomingNode(d)}},{key:"getNodeOutgoingNode",value:function(d){return this.graphModel.getNodeOutgoingNode(d)}},{key:"editText",value:function(d){this.graphModel.editText(d)}},{key:"setProperties",value:function(d,f){var p;(p=this.graphModel.getElement(d))===null||p===void 0||p.setProperties($n(f))}},{key:"deleteProperty",value:function(d,f){var p;(p=this.graphModel.getElement(d))===null||p===void 0||p.deleteProperty(f)}},{key:"getProperties",value:function(d){var f;return(f=this.graphModel.getElement(d))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(d){this.graphModel.toFront(d)}},{key:"setElementZIndex",value:function(d,f){return this.graphModel.setElementZIndex(d,f)}},{key:"addElements",value:function(d){for(var f=this,p=d.nodes,y=d.edges,b={},w={nodes:[],edges:[]},T=0;T<p.length;T++){var R=p[T],k=R.id,q=this.addNode(R);if(!q)return;k&&(b[k]=q.id),w.nodes.push(q)}return y.forEach(function(ae){var ye=ae.sourceNodeId,Me=ae.targetNodeId;b[ye]&&(ye=b[ye]),b[Me]&&(Me=b[Me]);var Re=f.graphModel.addEdge(Af(Af({},ae),{},{sourceNodeId:ye,targetNodeId:Me}));w.edges.push(Re)}),w}},{key:"getAreaElement",value:function(d,f){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(d,f,p,y,b).map(function(w){return w.getData()})}},{key:"getSelectElements",value:function(){var d=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(d)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var d=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,p=new Array(f),y=0;y<f;y++)p[y]=arguments[y];return this.adapterOut.apply(this,[d].concat(p))}return d}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(d){this.graphModel.editConfigModel.updateEditConfig(d)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(d,f){return this.graphModel.getPointByClient({x:d,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var d=$n(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(d)}}},{key:"redo",value:function(){if(this.history.redoAble()){var d=$n(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(d)}}},{key:"zoom",value:function(d,f){return this.graphModel.transformModel.zoom(d,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(d){this.graphModel.transformModel.setZoomMiniSize(d)}},{key:"setZoomMaxSize",value:function(d){this.graphModel.transformModel.setZoomMaxSize(d)}},{key:"getTransform",value:function(){var d=this.graphModel.transformModel;return{SCALE_X:d.SCALE_X,SCALE_Y:d.SCALE_Y,TRANSLATE_X:d.TRANSLATE_X,TRANSLATE_Y:d.TRANSLATE_Y}}},{key:"translate",value:function(d,f){this.graphModel.transformModel.translate(d,f)}},{key:"resetTranslate",value:function(){var d=this.graphModel.transformModel,f=d.TRANSLATE_X,p=d.TRANSLATE_Y;this.translate(-f,-p)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(d,f){f===void 0&&(f=d),this.graphModel.fitView(d,f)}},{key:"openEdgeAnimation",value:function(d){this.graphModel.openEdgeAnimation(d)}},{key:"closeEdgeAnimation",value:function(d){this.graphModel.closeEdgeAnimation(d)}},{key:"on",value:function(d,f){this.graphModel.eventCenter.on(d,f)}},{key:"off",value:function(d,f){this.graphModel.eventCenter.off(d,f)}},{key:"once",value:function(d,f){this.graphModel.eventCenter.once(d,f)}},{key:"emit",value:function(d,f){this.graphModel.eventCenter.emit(d,f)}},{key:"initContainer",value:function(d){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",d.innerHTML="",d.appendChild(f),f}},{key:"installPlugins",value:function(){var d,f=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=(d=this.plugins)!==null&&d!==void 0?d:n.extensions;y.forEach(function(b){var w=b.pluginName||b.name;p.indexOf(w)===-1&&f.installPlugin(b)})}},{key:"installPlugin",value:function(d){if(Vg(d)==="object"){var f=d.install,p=d.render;return f&&f.call(d,this,n),p&&this.components.push(p.bind(d)),void(this.extension[d.pluginName]=d)}var y=d,b=new y({lf:this,LogicFlow:n,options:this.options.pluginsOptions});b.render&&this.components.push(b.render.bind(b)),this.extension[y.pluginName]=b}},{key:"updateAttributes",value:function(d,f){this.graphModel.updateAttributes(d,f)}},{key:"createFakerNode",value:function(d){var f=this.graphModel.modelMap.get(d.type);if(f){var p=new f(Af(Af({},d),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(p),p}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(d){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(d)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(d,f){this.viewMap.set(d,f)}},{key:"renderRawData",value:function(d){this.graphModel.graphDataToModel($n(d)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(xe.j)(Object(xe.g)(nS,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ir.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(d=this.adapterIn(d)),this.renderRawData(d)}}],u=[{key:"use",value:function(d){var f=d.pluginName;f||(f=d.name);var p=this.extensions.get(f);p&&p.destroy&&p.destroy(),this.extensions.set(f,d)}}],a&&B_(o.prototype,a),u&&B_(o,u),n}();function gi(n){return Wt(n)}In($g,"extensions",new Map),s.default=$g}])})})(hm,hm.exports);var $t=hm.exports,tw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),EP=function(e){tw(r,e);function r(t,s){var i=this;return t.id||(t.id="Event_"+Wi()),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),i=e.call(this,t,s)||this,i}return r.prototype.setAttributes=function(){this.r=18},r.prototype.getConnectedTargetRules=function(){var t=e.prototype.getConnectedTargetRules.call(this),s={message:"",validate:function(){return!1}};return t.push(s),t},r.extendKey="StartEventModel",r}($t.CircleNodeModel),OP=function(e){tw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.extendKey="StartEventNode",r}($t.CircleNode),rw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),ph=globalThis&&globalThis.__assign||function(){return ph=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ph.apply(this,arguments)},wP=function(e){rw(r,e);function r(t,s){var i=this;return t.id||(t.id="Event_"+Wi()),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),i=e.call(this,t,s)||this,i}return r.prototype.setAttributes=function(){this.r=18},r.prototype.getConnectedSourceRules=function(){var t=e.prototype.getConnectedSourceRules.call(this),s={message:"",validate:function(){return!1}};return t.push(s),t},r.extendKey="EndEventModel",r}($t.CircleNodeModel),xP=function(e){rw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},r.prototype.getShape=function(){var t=this.props.model,s=t.getNodeStyle(),i=t.x,c=t.y,l=t.r,h=e.prototype.getShape.call(this);return $t.h("g",{},h,$t.h("circle",ph(ph({},s),{cx:i,cy:c,r:l-5})))},r.extendKey="EndEventView",r}($t.CircleNode),nw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),Uf=globalThis&&globalThis.__assign||function(){return Uf=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Uf.apply(this,arguments)},SP=function(e){nw(r,e);function r(t,s){var i=this;return t.id||(t.id="Gateway_"+Wi()),t.text||(t.text=""),t.text&&typeof t.text=="string"&&(t.text={value:t.text,x:t.x,y:t.y+40}),i=e.call(this,t,s)||this,i.points=[[25,0],[50,25],[25,50],[0,25]],i}return r.extendKey="ExclusiveGatewayModel",r}($t.PolygonNodeModel),TP=function(e){nw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getShape=function(){var t=this.props.model,s=t.x,i=t.y,c=t.width,l=t.height,h=t.points,v=t.getNodeStyle();return $t.h("g",{transform:"matrix(1 0 0 1 "+(s-c/2)+" "+(i-l/2)+")"},$t.h("polygon",Uf(Uf({},v),{x:s,y:i,points:h})),$t.h("path",Uf({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},v)))},r.extendKey="ExclusiveGatewayNode",r}($t.PolygonNode),ow=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),hh=globalThis&&globalThis.__assign||function(){return hh=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},hh.apply(this,arguments)},AP=function(e){ow(r,e);function r(t,s){var i=this;return t.id||(t.id="Activity_"+Wi()),i=e.call(this,t,s)||this,i}return r.extendKey="UserTaskModel",r}($t.RectNodeModel),PP=function(e){ow(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getLabelShape=function(){var t=this.props.model,s=t.x,i=t.y,c=t.width,l=t.height,h=t.getNodeStyle();return $t.h("svg",{x:s-c/2+5,y:i-l/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},r.prototype.getShape=function(){var t=this.props.model,s=t.x,i=t.y,c=t.width,l=t.height,h=t.radius,v=t.getNodeStyle();return $t.h("g",{},[$t.h("rect",hh(hh({},v),{x:s-c/2,y:i-l/2,rx:h,ry:h,width:c,height:l})),this.getLabelShape()])},r.extendKey="UserTaskNode",r}($t.RectNode),iw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),vm=globalThis&&globalThis.__assign||function(){return vm=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},vm.apply(this,arguments)},NP=function(e){iw(r,e);function r(t,s){var i=this;return t.id||(t.id="Activity_"+Wi()),i=e.call(this,t,s)||this,i}return r.extendKey="ServiceTaskModel",r}($t.RectNodeModel),jP=function(e){iw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getLabelShape=function(){var t=this.props.model,s=t.x,i=t.y,c=t.width,l=t.height,h=t.getNodeStyle();return $t.h("svg",{x:s-c/2+5,y:i-l/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},r.prototype.getShape=function(){var t=this.props.model,s=t.x,i=t.y,c=t.width,l=t.height,h=t.radius,v=t.getNodeStyle();return $t.h("g",{},[$t.h("rect",vm({x:s-c/2,y:i-l/2,rx:h,ry:h,width:c,height:l},v)),this.getLabelShape()])},r.extendKey="ServiceTaskNode",r}($t.RectNode),aw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),uw=function(e){aw(r,e);function r(t,s){var i=this;return t.id||(t.id="Flow_"+Wi()),i=e.call(this,t,s)||this,i}return r.extendKey="SequenceFlowModel",r}($t.PolylineEdgeModel),sw=function(e){aw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.extendKey="SequenceFlowEdge",r}($t.PolylineEdge),V_={width:40,height:40},$_={width:40,height:40},W_={width:40,height:40},Y_={width:100,height:80},K_={width:100,height:80},MP=new sP([32,32,1]);function q_(){return MP.next()}function cw(e){return Object.prototype.toString.call(e)}function RP(e){return"  ".repeat(e)}function vh(e){var r=e;return cw(e)==="[object Object]"?(r={},Object.keys(e).forEach(function(t){var s=t;t.charAt(0)==="-"&&(s=t.substring(1)),r[s]=vh(e[t])})):Array.isArray(e)&&(r=[],e.forEach(function(t,s){r[s]=vh(t)})),r}function CP(e){var r=e;try{typeof r!="string"&&(r=JSON.parse(e))}catch{r=JSON.stringify(vh(e)).replace(/"/g,"'")}return r}var kc=`	
`;function ah(e,r,t){var s=RP(t),i="";if(r==="#text")return kc+s+e;if(r==="#cdata-section")return kc+s+"<![CDATA["+e+"]]>";if(r==="#comment")return kc+s+"<!--"+e+"-->";if((""+r).charAt(0)==="-")return" "+r.substring(1)+'="'+CP(e)+'"';if(Array.isArray(e))e.forEach(function(v){i+=ah(v,r,t+1)});else if(cw(e)==="[object Object]"){var c=Object.keys(e),l="",h="";i+=(t===0?"":kc+s)+"<"+r,c.forEach(function(v){v.charAt(0)==="-"?l+=ah(e[v],v,t+1):h+=ah(e[v],v,t+1)}),i+=l+(h!==""?">"+h+(kc+s)+"</"+r+">":" />")}else i+=kc+s+("<"+r+">"+e.toString()+"</"+r+">");return i}function DP(e){var r="";for(var t in e)r+=ah(e[t],t,0);return r}var To=function(){};To.ObjTree=function(){return this};To.ObjTree.VERSION="0.23";To.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;To.ObjTree.prototype.attr_prefix="-";To.ObjTree.prototype.parseXML=function(e){var r;if(window.DOMParser){var t=new DOMParser,s=t.parseFromString(e,"application/xml");if(!s)return;r=s.documentElement}else window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e),r=t.documentElement);if(r)return this.parseDOM(r)};To.ObjTree.prototype.parseHTTP=function(e,r,t){var s={};for(var i in r)s[i]=r[i];if(s.method||(typeof s.postBody>"u"&&typeof s.postbody>"u"&&typeof s.parameters>"u"?s.method="get":s.method="post"),t){s.asynchronous=!0;var c=this,l=t,h=s.onComplete;s.onComplete=function(g){var O;g&&g.responseXML&&g.responseXML.documentElement&&(O=c.parseDOM(g.responseXML.documentElement)),l(O,g),h&&h(g)}}else s.asynchronous=!1;var v;if(typeof HTTP<"u"&&HTTP.Request){s.uri=e;var m=new HTTP.Request(s);m&&(v=m.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var m=new Ajax.Request(e,s);m&&(v=m.transport)}if(t)return v;if(v&&v.responseXML&&v.responseXML.documentElement)return this.parseDOM(v.responseXML.documentElement)};To.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var r=0;r<this.force_array.length;r++)this.__force_array[this.force_array[r]]=1;var t=this.parseElement(e);if(this.__force_array[e.nodeName]&&(t=[t]),e.nodeType!=11){var s={};s[e.nodeName]=t,t=s}return t}};To.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var r=e.nodeValue.match(/[^\x00-\x20]/);return r==null?void 0:e.nodeValue}var t=null,s={};if(e.attributes&&e.attributes.length){t={};for(var i=0;i<e.attributes.length;i++){var c=e.attributes[i].nodeName;if(typeof c=="string"){var l=e.attributes[i].nodeValue;try{l=JSON.parse(e.attributes[i].nodeValue.replace(/'/g,'"'))}catch{l=e.attributes[i].nodeValue}l&&(c=this.attr_prefix+c,typeof s[c]>"u"&&(s[c]=0),s[c]++,this.addNode(t,c,s[c],l))}}}if(e.childNodes&&e.childNodes.length){var h=!0;t&&(h=!1);for(var i=0;i<e.childNodes.length&&h;i++){var v=e.childNodes[i].nodeType;v==3||v==4||v==8||(h=!1)}if(h){t||(t="");for(var i=0;i<e.childNodes.length;i++)t+=e.childNodes[i].nodeValue}else{t||(t={});for(var i=0;i<e.childNodes.length;i++){var c=e.childNodes[i].nodeName;if(typeof c=="string"){var l=this.parseElement(e.childNodes[i]);l&&(typeof s[c]>"u"&&(s[c]=0),s[c]++,this.addNode(t,c,s[c],l))}}}}else t===null&&(t={});return t}};To.ObjTree.prototype.addNode=function(e,r,t,s){this.__force_array[r]?(t==1&&(e[r]=[]),e[r][e[r].length]=s):t==1?e[r]=s:t==2?e[r]=[e[r],s]:e[r][e[r].length]=s};To.ObjTree.prototype.writeXML=function(e){var r=this.hash_to_xml(null,e);return this.xmlDecl+r};To.ObjTree.prototype.hash_to_xml=function(e,r){var t=[],s=[];for(var i in r)if(r.hasOwnProperty(i)){var c=r[i];i.charAt(0)!=this.attr_prefix?typeof c>"u"||c==null?t[t.length]="<"+i+" />":typeof c=="object"&&c.constructor==Array?t[t.length]=this.array_to_xml(i,c):typeof c=="object"?t[t.length]=this.hash_to_xml(i,c):t[t.length]=this.scalar_to_xml(i,c):s[s.length]=" "+i.substring(1)+'="'+this.xml_escape(c)+'"'}var l=s.join(""),h=t.join("");return typeof e>"u"||e==null||(t.length>0?h.match(/\n/)?h="<"+e+l+`>
`+h+"</"+e+`>
`:h="<"+e+l+">"+h+"</"+e+`>
`:h="<"+e+l+` />
`),h};To.ObjTree.prototype.array_to_xml=function(e,r){for(var t=[],s=0;s<r.length;s++){var i=r[s];typeof i>"u"||i==null?t[t.length]="<"+e+" />":typeof i=="object"&&i.constructor==Array?t[t.length]=this.array_to_xml(e,i):typeof i=="object"?t[t.length]=this.hash_to_xml(e,i):t[t.length]=this.scalar_to_xml(e,i)}return t.join("")};To.ObjTree.prototype.scalar_to_xml=function(e,r){return e=="#text"?this.xml_escape(r):"<"+e+">"+this.xml_escape(r)+"</"+e+`>
`};To.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var kP=function(e){return new To.ObjTree().parseXML(e)},IP=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),ym=globalThis&&globalThis.__assign||function(){return ym=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ym.apply(this,arguments)},jh=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c},$i;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})($i||($i={}));var lw=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],Z_=["properties","startPoint","endPoint","pointsList"];function J_(e){var r=e?Z_.concat(e):Z_;return function(t){function s(i){var c={};return typeof i=="string"?i:Array.isArray(i)?i.map(function(l){return s(l)}):(Object.entries(i).forEach(function(l){var h=jh(l,2),v=h[0],m=h[1];typeof m!="object"?v.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(v)?c[v]=m:c["-"+v]=m:r.includes(v)?c["-"+v]=s(m):c[v]=s(m)}),c)}return s(t)}}function yh(e){var r={};return Object.entries(e).forEach(function(t){var s=jh(t,2),i=s[0],c=s[1];i.indexOf("-")===0?r[i.substring(1)]=vh(c):typeof c=="string"?r[i]=c:Object.prototype.toString.call(c)==="[object Object]"?r[i]=yh(c):Array.isArray(c)?r[i]=c.map(function(l){return yh(l)}):r[i]=c}),r}function LP(e,r,t){var s=new Map;r.nodes.forEach(function(c){var l,h={"-id":c.id};if(!((l=c.text)===null||l===void 0)&&l.value&&(h["-name"]=c.text.value),c.properties){var v=J_(t)(c.properties);Object.assign(h,v)}s.set(c.id,h),e[c.type]?Array.isArray(e[c.type])?e[c.type].push(h):e[c.type]=[e[c.type],h]:e[c.type]=h});var i=r.edges.map(function(c){var l,h,v=s.get(c.targetNodeId);v["bpmn:incoming"]?Array.isArray(v["bpmn:incoming"])?v["bpmn:incoming"].push(c.id):v["bpmn:incoming"]=[v["bpmn:incoming"],c.id]:v["bpmn:incoming"]=c.id;var m={"-id":c.id,"-sourceRef":c.sourceNodeId,"-targetRef":c.targetNodeId};if(!((l=c.text)===null||l===void 0)&&l.value&&(m["-name"]=(h=c.text)===null||h===void 0?void 0:h.value),c.properties){var g=J_(t)(c.properties);Object.assign(m,g)}return m});r.edges.forEach(function(c){var l=s.get(c.sourceNodeId);l["bpmn:outgoing"]?Array.isArray(l["bpmn:outgoing"])?l["bpmn:outgoing"].push(c.id):l["bpmn:outgoing"]=[l["bpmn:outgoing"],c.id]:l["bpmn:outgoing"]=c.id}),e[$i.FLOW]=i}function FP(e,r){e["bpmndi:BPMNEdge"]=r.edges.map(function(t){var s,i=t.id,c=t.pointsList.map(function(h){var v=h.x,m=h.y;return{"-x":v,"-y":m}}),l={"-id":i+"_di","-bpmnElement":i,"di:waypoint":c};return!((s=t.text)===null||s===void 0)&&s.value&&(l["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),l}),e["bpmndi:BPMNShape"]=r.nodes.map(function(t){var s,i=t.id,c=100,l=80,h=t.x,v=t.y,m=yu.shapeConfigMap.get(t.type);m&&(c=m.width,l=m.height),h-=c/2,v-=l/2;var g={"-id":i+"_di","-bpmnElement":i,"dc:Bounds":{"-x":h,"-y":v,"-width":c,"-height":l}};return!((s=t.text)===null||s===void 0)&&s.value&&(g["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":t.text.x-t.text.value.length*10/2,"-y":t.text.y-7,"-width":t.text.value.length*10,"-height":14}}),g})}function BP(e){var r=[],t=[],s=e["bpmn:definitions"];if(s){var i=s["bpmn:process"];Object.keys(i).forEach(function(c){if(c.indexOf("bpmn:")===0){var l=i[c];if(c===$i.FLOW){var h=s["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];t=UP(l,h)}else{var v=s["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];r=r.concat(GP(l,v,c))}}})}return{nodes:r,edges:t}}function GP(e,r,t){var s=[];if(Array.isArray(e))e.forEach(function(l){var h;Array.isArray(r)?h=r.find(function(m){return m["-bpmnElement"]===l["-id"]}):h=r;var v=Q_(h,t,l);s.push(v)});else{var i=void 0;Array.isArray(r)?i=r.find(function(l){return l["-bpmnElement"]===e["-id"]}):i=r;var c=Q_(i,t,e);s.push(c)}return s}function Q_(e,r,t){var s=Number(e["dc:Bounds"]["-x"]),i=Number(e["dc:Bounds"]["-y"]),c=t["-name"],l=yu.shapeConfigMap.get(r);l&&(s+=l.width/2,i+=l.height/2);var h;Object.entries(t).forEach(function(O){var x=jh(O,2),S=x[0],N=x[1];lw.indexOf(S)===-1&&(h||(h={}),h[S]=N)}),h&&(h=yh(h));var v;if(c&&(v={x:s,y:i,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var m=e["bpmndi:BPMNLabel"]["dc:Bounds"];v.x=Number(m["-x"])+Number(m["-width"])/2,v.y=Number(m["-y"])+Number(m["-height"])/2}var g={id:e["-bpmnElement"],type:r,x:s,y:i,properties:h};return v&&(g.text=v),g}function UP(e,r){var t=[];if(Array.isArray(e))e.forEach(function(i){var c;Array.isArray(r)?c=r.find(function(l){return l["-bpmnElement"]===i["-id"]}):c=r,t.push(eE(c,i))});else{var s=void 0;Array.isArray(r)?s=r.find(function(i){return i["-bpmnElement"]===e["-id"]}):s=r,t.push(eE(s,e))}return t}function eE(e,r){var t,s=r["-name"];if(s){var i=e["bpmndi:BPMNLabel"]["dc:Bounds"],c=0;s.split(`
`).forEach(function(v){c<v.length&&(c=v.length)}),t={value:s,x:Number(i["-x"])+c*10/2,y:Number(i["-y"])+7}}var l;Object.entries(r).forEach(function(v){var m=jh(v,2),g=m[0],O=m[1];lw.indexOf(g)===-1&&(l||(l={}),l[g]=O)}),l&&(l=yh(l));var h={id:r["-id"],type:$i.FLOW,pointsList:e["di:waypoint"].map(function(v){return{x:Number(v["-x"]),y:Number(v["-y"])}}),sourceNodeId:r["-sourceRef"],targetNodeId:r["-targetRef"],properties:l};return t&&(h.text=t),h}var yu=function(){function e(r){var t=this,s=r.lf;this.adapterOut=function(i,c){var l=ym({},t.processAttributes);LP(l,i,c);var h={"-id":"BPMNPlane_1","-bpmnElement":l["-id"]};FP(h,i);var v=t.definitionAttributes;v["bpmn:process"]=l,v["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":h};var m={"bpmn:definitions":v};return m},this.adapterIn=function(i){if(i)return BP(i)},s.adapterIn=function(i){return t.adapterIn(i)},s.adapterOut=function(i,c){return t.adapterOut(i,c)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+q_()},this.definitionAttributes={"-id":"Definitions_"+q_(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(r,t){e.shapeConfigMap.set(r,t)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();yu.shapeConfigMap.set($i.START,{width:V_.width,height:V_.height});yu.shapeConfigMap.set($i.END,{width:$_.width,height:$_.height});yu.shapeConfigMap.set($i.GATEWAY,{width:W_.width,height:W_.height});yu.shapeConfigMap.set($i.SYSTEM,{width:Y_.width,height:Y_.height});yu.shapeConfigMap.set($i.USER,{width:K_.width,height:K_.height});(function(e){IP(r,e);function r(t){var s=e.call(this,t)||this;s.adapterXmlIn=function(c){var l=kP(c);return s.adapterIn(l)},s.adapterXmlOut=function(c,l){var h=s.adapterOut(c,l);return DP(h)};var i=t.lf;return i.adapterIn=s.adapterXmlIn,i.adapterOut=s.adapterXmlOut,s}return r.pluginName="bpmnXmlAdapter",r})(yu);var tE=globalThis&&globalThis.__assign||function(){return tE=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},tE.apply(this,arguments)};globalThis&&globalThis.__read;var zP=typeof global=="object"&&global&&global.Object===Object&&global;const fw=zP;var HP=typeof self=="object"&&self&&self.Object===Object&&self,XP=fw||HP||Function("return this")();const _i=XP;var VP=_i.Symbol;const qc=VP;var dw=Object.prototype,$P=dw.hasOwnProperty,WP=dw.toString,Pf=qc?qc.toStringTag:void 0;function YP(e){var r=$P.call(e,Pf),t=e[Pf];try{e[Pf]=void 0;var s=!0}catch{}var i=WP.call(e);return s&&(r?e[Pf]=t:delete e[Pf]),i}var KP=Object.prototype,qP=KP.toString;function ZP(e){return qP.call(e)}var JP="[object Null]",QP="[object Undefined]",rE=qc?qc.toStringTag:void 0;function tl(e){return e==null?e===void 0?QP:JP:rE&&rE in Object(e)?YP(e):ZP(e)}function rl(e){return e!=null&&typeof e=="object"}var eN="[object Symbol]";function tN(e){return typeof e=="symbol"||rl(e)&&tl(e)==eN}var rN=Array.isArray;const Um=rN;var nN=/\s/;function oN(e){for(var r=e.length;r--&&nN.test(e.charAt(r)););return r}var iN=/^\s+/;function aN(e){return e&&e.slice(0,oN(e)+1).replace(iN,"")}function xa(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var nE=0/0,uN=/^[-+]0x[0-9a-f]+$/i,sN=/^0b[01]+$/i,cN=/^0o[0-7]+$/i,lN=parseInt;function oE(e){if(typeof e=="number")return e;if(tN(e))return nE;if(xa(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=xa(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=aN(e);var t=sN.test(e);return t||cN.test(e)?lN(e.slice(2),t?2:8):uN.test(e)?nE:+e}var fN="[object AsyncFunction]",dN="[object Function]",pN="[object GeneratorFunction]",hN="[object Proxy]";function pw(e){if(!xa(e))return!1;var r=tl(e);return r==dN||r==pN||r==fN||r==hN}var vN=_i["__core-js_shared__"];const Wg=vN;var iE=function(){var e=/[^.]+$/.exec(Wg&&Wg.keys&&Wg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function yN(e){return!!iE&&iE in e}var gN=Function.prototype,mN=gN.toString;function gs(e){if(e!=null){try{return mN.call(e)}catch{}try{return e+""}catch{}}return""}var bN=/[\\^$.*+?()[\]{}|]/g,_N=/^\[object .+?Constructor\]$/,EN=Function.prototype,ON=Object.prototype,wN=EN.toString,xN=ON.hasOwnProperty,SN=RegExp("^"+wN.call(xN).replace(bN,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function TN(e){if(!xa(e)||yN(e))return!1;var r=pw(e)?SN:_N;return r.test(gs(e))}function AN(e,r){return e==null?void 0:e[r]}function ms(e,r){var t=AN(e,r);return TN(t)?t:void 0}var PN=ms(_i,"WeakMap");const gm=PN;var aE=Object.create,NN=function(){function e(){}return function(r){if(!xa(r))return{};if(aE)return aE(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}();const jN=NN;function MN(e,r){var t=-1,s=e.length;for(r||(r=Array(s));++t<s;)r[t]=e[t];return r}var RN=function(){try{var e=ms(Object,"defineProperty");return e({},"",{}),e}catch{}}();const uE=RN;function CN(e,r){for(var t=-1,s=e==null?0:e.length;++t<s&&r(e[t],t,e)!==!1;);return e}var DN=9007199254740991,kN=/^(?:0|[1-9]\d*)$/;function IN(e,r){var t=typeof e;return r=r??DN,!!r&&(t=="number"||t!="symbol"&&kN.test(e))&&e>-1&&e%1==0&&e<r}function hw(e,r,t){r=="__proto__"&&uE?uE(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function vw(e,r){return e===r||e!==e&&r!==r}var LN=Object.prototype,FN=LN.hasOwnProperty;function yw(e,r,t){var s=e[r];(!(FN.call(e,r)&&vw(s,t))||t===void 0&&!(r in e))&&hw(e,r,t)}function Mh(e,r,t,s){var i=!t;t||(t={});for(var c=-1,l=r.length;++c<l;){var h=r[c],v=s?s(t[h],e[h],h,t,e):void 0;v===void 0&&(v=e[h]),i?hw(t,h,v):yw(t,h,v)}return t}var BN=9007199254740991;function gw(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=BN}function mw(e){return e!=null&&gw(e.length)&&!pw(e)}var GN=Object.prototype;function zm(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||GN;return e===t}function UN(e,r){for(var t=-1,s=Array(e);++t<e;)s[t]=r(t);return s}var zN="[object Arguments]";function sE(e){return rl(e)&&tl(e)==zN}var bw=Object.prototype,HN=bw.hasOwnProperty,XN=bw.propertyIsEnumerable,VN=sE(function(){return arguments}())?sE:function(e){return rl(e)&&HN.call(e,"callee")&&!XN.call(e,"callee")};const $N=VN;function WN(){return!1}var _w=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cE=_w&&typeof module=="object"&&module&&!module.nodeType&&module,YN=cE&&cE.exports===_w,lE=YN?_i.Buffer:void 0,KN=lE?lE.isBuffer:void 0,qN=KN||WN;const Ew=qN;var ZN="[object Arguments]",JN="[object Array]",QN="[object Boolean]",ej="[object Date]",tj="[object Error]",rj="[object Function]",nj="[object Map]",oj="[object Number]",ij="[object Object]",aj="[object RegExp]",uj="[object Set]",sj="[object String]",cj="[object WeakMap]",lj="[object ArrayBuffer]",fj="[object DataView]",dj="[object Float32Array]",pj="[object Float64Array]",hj="[object Int8Array]",vj="[object Int16Array]",yj="[object Int32Array]",gj="[object Uint8Array]",mj="[object Uint8ClampedArray]",bj="[object Uint16Array]",_j="[object Uint32Array]",pn={};pn[dj]=pn[pj]=pn[hj]=pn[vj]=pn[yj]=pn[gj]=pn[mj]=pn[bj]=pn[_j]=!0;pn[ZN]=pn[JN]=pn[lj]=pn[QN]=pn[fj]=pn[ej]=pn[tj]=pn[rj]=pn[nj]=pn[oj]=pn[ij]=pn[aj]=pn[uj]=pn[sj]=pn[cj]=!1;function Ej(e){return rl(e)&&gw(e.length)&&!!pn[tl(e)]}function Hm(e){return function(r){return e(r)}}var Ow=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zf=Ow&&typeof module=="object"&&module&&!module.nodeType&&module,Oj=zf&&zf.exports===Ow,Yg=Oj&&fw.process,wj=function(){try{var e=zf&&zf.require&&zf.require("util").types;return e||Yg&&Yg.binding&&Yg.binding("util")}catch{}}();const Zc=wj;var fE=Zc&&Zc.isTypedArray,xj=fE?Hm(fE):Ej;const Sj=xj;var Tj=Object.prototype,Aj=Tj.hasOwnProperty;function ww(e,r){var t=Um(e),s=!t&&$N(e),i=!t&&!s&&Ew(e),c=!t&&!s&&!i&&Sj(e),l=t||s||i||c,h=l?UN(e.length,String):[],v=h.length;for(var m in e)(r||Aj.call(e,m))&&!(l&&(m=="length"||i&&(m=="offset"||m=="parent")||c&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||IN(m,v)))&&h.push(m);return h}function xw(e,r){return function(t){return e(r(t))}}var Pj=xw(Object.keys,Object);const Nj=Pj;var jj=Object.prototype,Mj=jj.hasOwnProperty;function Rj(e){if(!zm(e))return Nj(e);var r=[];for(var t in Object(e))Mj.call(e,t)&&t!="constructor"&&r.push(t);return r}function Xm(e){return mw(e)?ww(e):Rj(e)}function Cj(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var Dj=Object.prototype,kj=Dj.hasOwnProperty;function Ij(e){if(!xa(e))return Cj(e);var r=zm(e),t=[];for(var s in e)s=="constructor"&&(r||!kj.call(e,s))||t.push(s);return t}function Vm(e){return mw(e)?ww(e,!0):Ij(e)}var Lj=ms(Object,"create");const Vf=Lj;function Fj(){this.__data__=Vf?Vf(null):{},this.size=0}function Bj(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Gj="__lodash_hash_undefined__",Uj=Object.prototype,zj=Uj.hasOwnProperty;function Hj(e){var r=this.__data__;if(Vf){var t=r[e];return t===Gj?void 0:t}return zj.call(r,e)?r[e]:void 0}var Xj=Object.prototype,Vj=Xj.hasOwnProperty;function $j(e){var r=this.__data__;return Vf?r[e]!==void 0:Vj.call(r,e)}var Wj="__lodash_hash_undefined__";function Yj(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Vf&&r===void 0?Wj:r,this}function ps(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}ps.prototype.clear=Fj;ps.prototype.delete=Bj;ps.prototype.get=Hj;ps.prototype.has=$j;ps.prototype.set=Yj;function Kj(){this.__data__=[],this.size=0}function Rh(e,r){for(var t=e.length;t--;)if(vw(e[t][0],r))return t;return-1}var qj=Array.prototype,Zj=qj.splice;function Jj(e){var r=this.__data__,t=Rh(r,e);if(t<0)return!1;var s=r.length-1;return t==s?r.pop():Zj.call(r,t,1),--this.size,!0}function Qj(e){var r=this.__data__,t=Rh(r,e);return t<0?void 0:r[t][1]}function eM(e){return Rh(this.__data__,e)>-1}function tM(e,r){var t=this.__data__,s=Rh(t,e);return s<0?(++this.size,t.push([e,r])):t[s][1]=r,this}function Ta(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Ta.prototype.clear=Kj;Ta.prototype.delete=Jj;Ta.prototype.get=Qj;Ta.prototype.has=eM;Ta.prototype.set=tM;var rM=ms(_i,"Map");const $f=rM;function nM(){this.size=0,this.__data__={hash:new ps,map:new($f||Ta),string:new ps}}function oM(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function Ch(e,r){var t=e.__data__;return oM(r)?t[typeof r=="string"?"string":"hash"]:t.map}function iM(e){var r=Ch(this,e).delete(e);return this.size-=r?1:0,r}function aM(e){return Ch(this,e).get(e)}function uM(e){return Ch(this,e).has(e)}function sM(e,r){var t=Ch(this,e),s=t.size;return t.set(e,r),this.size+=t.size==s?0:1,this}function nl(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}nl.prototype.clear=nM;nl.prototype.delete=iM;nl.prototype.get=aM;nl.prototype.has=uM;nl.prototype.set=sM;function Sw(e,r){for(var t=-1,s=r.length,i=e.length;++t<s;)e[i+t]=r[t];return e}var cM=xw(Object.getPrototypeOf,Object);const Tw=cM;function lM(){this.__data__=new Ta,this.size=0}function fM(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function dM(e){return this.__data__.get(e)}function pM(e){return this.__data__.has(e)}var hM=200;function vM(e,r){var t=this.__data__;if(t instanceof Ta){var s=t.__data__;if(!$f||s.length<hM-1)return s.push([e,r]),this.size=++t.size,this;t=this.__data__=new nl(s)}return t.set(e,r),this.size=t.size,this}function ol(e){var r=this.__data__=new Ta(e);this.size=r.size}ol.prototype.clear=lM;ol.prototype.delete=fM;ol.prototype.get=dM;ol.prototype.has=pM;ol.prototype.set=vM;function yM(e,r){return e&&Mh(r,Xm(r),e)}function gM(e,r){return e&&Mh(r,Vm(r),e)}var Aw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dE=Aw&&typeof module=="object"&&module&&!module.nodeType&&module,mM=dE&&dE.exports===Aw,pE=mM?_i.Buffer:void 0,hE=pE?pE.allocUnsafe:void 0;function bM(e,r){if(r)return e.slice();var t=e.length,s=hE?hE(t):new e.constructor(t);return e.copy(s),s}function _M(e,r){for(var t=-1,s=e==null?0:e.length,i=0,c=[];++t<s;){var l=e[t];r(l,t,e)&&(c[i++]=l)}return c}function Pw(){return[]}var EM=Object.prototype,OM=EM.propertyIsEnumerable,vE=Object.getOwnPropertySymbols,wM=vE?function(e){return e==null?[]:(e=Object(e),_M(vE(e),function(r){return OM.call(e,r)}))}:Pw;const $m=wM;function xM(e,r){return Mh(e,$m(e),r)}var SM=Object.getOwnPropertySymbols,TM=SM?function(e){for(var r=[];e;)Sw(r,$m(e)),e=Tw(e);return r}:Pw;const Nw=TM;function AM(e,r){return Mh(e,Nw(e),r)}function jw(e,r,t){var s=r(e);return Um(e)?s:Sw(s,t(e))}function PM(e){return jw(e,Xm,$m)}function NM(e){return jw(e,Vm,Nw)}var jM=ms(_i,"DataView");const mm=jM;var MM=ms(_i,"Promise");const bm=MM;var RM=ms(_i,"Set");const _m=RM;var yE="[object Map]",CM="[object Object]",gE="[object Promise]",mE="[object Set]",bE="[object WeakMap]",_E="[object DataView]",DM=gs(mm),kM=gs($f),IM=gs(bm),LM=gs(_m),FM=gs(gm),cs=tl;(mm&&cs(new mm(new ArrayBuffer(1)))!=_E||$f&&cs(new $f)!=yE||bm&&cs(bm.resolve())!=gE||_m&&cs(new _m)!=mE||gm&&cs(new gm)!=bE)&&(cs=function(e){var r=tl(e),t=r==CM?e.constructor:void 0,s=t?gs(t):"";if(s)switch(s){case DM:return _E;case kM:return yE;case IM:return gE;case LM:return mE;case FM:return bE}return r});const Wm=cs;var BM=Object.prototype,GM=BM.hasOwnProperty;function UM(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&GM.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var zM=_i.Uint8Array;const EE=zM;function Ym(e){var r=new e.constructor(e.byteLength);return new EE(r).set(new EE(e)),r}function HM(e,r){var t=r?Ym(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var XM=/\w*$/;function VM(e){var r=new e.constructor(e.source,XM.exec(e));return r.lastIndex=e.lastIndex,r}var OE=qc?qc.prototype:void 0,wE=OE?OE.valueOf:void 0;function $M(e){return wE?Object(wE.call(e)):{}}function WM(e,r){var t=r?Ym(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var YM="[object Boolean]",KM="[object Date]",qM="[object Map]",ZM="[object Number]",JM="[object RegExp]",QM="[object Set]",eR="[object String]",tR="[object Symbol]",rR="[object ArrayBuffer]",nR="[object DataView]",oR="[object Float32Array]",iR="[object Float64Array]",aR="[object Int8Array]",uR="[object Int16Array]",sR="[object Int32Array]",cR="[object Uint8Array]",lR="[object Uint8ClampedArray]",fR="[object Uint16Array]",dR="[object Uint32Array]";function pR(e,r,t){var s=e.constructor;switch(r){case rR:return Ym(e);case YM:case KM:return new s(+e);case nR:return HM(e,t);case oR:case iR:case aR:case uR:case sR:case cR:case lR:case fR:case dR:return WM(e,t);case qM:return new s;case ZM:case eR:return new s(e);case JM:return VM(e);case QM:return new s;case tR:return $M(e)}}function hR(e){return typeof e.constructor=="function"&&!zm(e)?jN(Tw(e)):{}}var vR="[object Map]";function yR(e){return rl(e)&&Wm(e)==vR}var xE=Zc&&Zc.isMap,gR=xE?Hm(xE):yR;const mR=gR;var bR="[object Set]";function _R(e){return rl(e)&&Wm(e)==bR}var SE=Zc&&Zc.isSet,ER=SE?Hm(SE):_R;const OR=ER;var wR=1,xR=2,SR=4,Mw="[object Arguments]",TR="[object Array]",AR="[object Boolean]",PR="[object Date]",NR="[object Error]",Rw="[object Function]",jR="[object GeneratorFunction]",MR="[object Map]",RR="[object Number]",Cw="[object Object]",CR="[object RegExp]",DR="[object Set]",kR="[object String]",IR="[object Symbol]",LR="[object WeakMap]",FR="[object ArrayBuffer]",BR="[object DataView]",GR="[object Float32Array]",UR="[object Float64Array]",zR="[object Int8Array]",HR="[object Int16Array]",XR="[object Int32Array]",VR="[object Uint8Array]",$R="[object Uint8ClampedArray]",WR="[object Uint16Array]",YR="[object Uint32Array]",un={};un[Mw]=un[TR]=un[FR]=un[BR]=un[AR]=un[PR]=un[GR]=un[UR]=un[zR]=un[HR]=un[XR]=un[MR]=un[RR]=un[Cw]=un[CR]=un[DR]=un[kR]=un[IR]=un[VR]=un[$R]=un[WR]=un[YR]=!0;un[NR]=un[Rw]=un[LR]=!1;function uh(e,r,t,s,i,c){var l,h=r&wR,v=r&xR,m=r&SR;if(t&&(l=i?t(e,s,i,c):t(e)),l!==void 0)return l;if(!xa(e))return e;var g=Um(e);if(g){if(l=UM(e),!h)return MN(e,l)}else{var O=Wm(e),x=O==Rw||O==jR;if(Ew(e))return bM(e,h);if(O==Cw||O==Mw||x&&!i){if(l=v||x?{}:hR(e),!h)return v?AM(e,gM(l,e)):xM(e,yM(l,e))}else{if(!un[O])return i?e:{};l=pR(e,O,h)}}c||(c=new ol);var S=c.get(e);if(S)return S;c.set(e,l),OR(e)?e.forEach(function(M){l.add(uh(M,r,t,M,e,c))}):mR(e)&&e.forEach(function(M,C){l.set(C,uh(M,r,t,C,e,c))});var N=m?v?NM:PM:v?Vm:Xm,j=g?void 0:N(e);return CN(j||e,function(M,C){j&&(C=M,M=e[C]),yw(l,C,uh(M,r,t,C,e,c))}),l}var KR=1,qR=4;function rh(e){return uh(e,KR|qR)}var ZR=function(){return _i.Date.now()};const Kg=ZR;var JR="Expected a function",QR=Math.max,eC=Math.min;function tC(e,r,t){var s,i,c,l,h,v,m=0,g=!1,O=!1,x=!0;if(typeof e!="function")throw new TypeError(JR);r=oE(r)||0,xa(t)&&(g=!!t.leading,O="maxWait"in t,c=O?QR(oE(t.maxWait)||0,r):c,x="trailing"in t?!!t.trailing:x);function S(z){var ee=s,$=i;return s=i=void 0,m=z,l=e.apply($,ee),l}function N(z){return m=z,h=setTimeout(C,r),g?S(z):l}function j(z){var ee=z-v,$=z-m,L=r-ee;return O?eC(L,c-$):L}function M(z){var ee=z-v,$=z-m;return v===void 0||ee>=r||ee<0||O&&$>=c}function C(){var z=Kg();if(M(z))return V(z);h=setTimeout(C,j(z))}function V(z){return h=void 0,x&&s?S(z):(s=i=void 0,l)}function ce(){h!==void 0&&clearTimeout(h),m=0,s=v=i=h=void 0}function _e(){return h===void 0?l:V(Kg())}function fe(){var z=Kg(),ee=M(z);if(s=arguments,i=this,v=z,ee){if(h===void 0)return N(v);if(O)return clearTimeout(h),h=setTimeout(C,r),S(v)}return h===void 0&&(h=setTimeout(C,r)),l}return fe.cancel=ce,fe.flush=_e,fe}var rC="Expected a function";function nC(e,r,t){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(rC);return xa(t)&&(s="leading"in t?!!t.leading:s,i="trailing"in t?!!t.trailing:i),tC(e,r,{leading:s,maxWait:r,trailing:i})}var Jc;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Jc||(Jc={}));var oC=function(e,r,t,s){s===void 0&&(s=0);var i=aC(e,r,t);return i<=s};function TE(e){return e*e}function qg(e,r){return TE(e.x-r.x)+TE(e.y-r.y)}var iC=function(e,r,t){var s=qg(r,t);if(s===0)return qg(e,r);var i=((e.x-r.x)*(t.x-r.x)+(e.y-r.y)*(t.y-r.y))/s;return i=Math.max(0,Math.min(1,i)),qg(e,{x:r.x+i*(t.x-r.x),y:r.y+i*(t.y-r.y)})},aC=function(e,r,t){return Math.sqrt(iC(e,r,t))},uC=function(e){var r=e.x,t=e.y,s=e.width,i=e.height,c={minX:r-s/2,minY:t-i/2,maxX:r+s/2,maxY:t+i/2,x:r,y:t,width:s,height:i,centerX:r,centerY:t};return c},sC=function(e,r){var t;return e.x===r.x?t=Jc.VERTICAL:e.y===r.y&&(t=Jc.HORIZONTAL),t},cC=function(e,r,t){var s=uC(e),i=sC(r,t),c=Math.max(r.x,t.x),l=Math.min(r.x,t.x),h=Math.max(r.y,t.y),v=Math.min(r.y,t.y),m=e.x,g=e.y,O=e.width,x=e.height;if(i===Jc.HORIZONTAL){if(c>=s.maxX&&l<=s.minX)return{startCrossPoint:{x:r.x>t.x?m+O/2:m-O/2,y:r.y},endCrossPoint:{x:r.x>t.x?m-O/2:m+O/2,y:r.y}}}else if(i===Jc.VERTICAL&&h>=s.maxY&&v<=s.minY)return{startCrossPoint:{x:r.x,y:r.y>t.y?g+x/2:g-x/2},endCrossPoint:{x:r.x,y:r.y>t.y?g-x/2:g+x/2}}},lC=function(e,r,t){t===void 0&&(t=0);for(var s=e.x,i=e.y,c=r.pointsList,l=0;l<c.length-1;l++)if(oC({x:s,y:i},c[l],c[l+1],t)){var h=cC(e,c[l],c[l+1]);if(h)return{crossIndex:l+1,crossPoints:h}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},fC=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c},AE=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(fC(arguments[r]));return e},dC=function(){function e(r){var t=r.lf;this._lf=t,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return e.prototype.eventHandler=function(){var r=this;this.dndAdd&&this._lf.on("node:dnd-add",function(t){var s=t.data;r.insetNode(s)}),this.dropAdd&&this._lf.on("node:drop",function(t){for(var s=t.data,i=r._lf.graphModel.edges,c=s.id,l=!0,h=0;h<i.length;h++)if(i[h].sourceNodeId===c||i[h].targetNodeId===c){l=!1;break}l&&r.insetNode(s)})},e.prototype.checkRuleBeforeInsetNode=function(r,t,s,i,c){var l=this._lf.getNodeModelById(r),h=this._lf.getNodeModelById(t),v=l.getAnchorInfo(s),m=h.getAnchorInfo(i),g=l.isAllowConnectedAsSource(c,v,m),O=h.isAllowConnectedAsTarget(c,v,m),x=$t.formateAnchorConnectValidateData(g),S=x.isAllPass,N=x.msg,j=$t.formateAnchorConnectValidateData(O),M=j.isAllPass,C=j.msg;return{isPass:S&&M,sourceMsg:N,targetMsg:C}},e.prototype.insetNode=function(r){for(var t=this,s=this._lf.graphModel.edges,i=this._lf.getNodeModelById(r.id),c=0;c<s.length;c++){var l=lC(i,s[c],this.deviation),h=l.crossIndex,v=l.crossPoints;if(h>=0){var m=s[c],g=m.sourceNodeId,O=m.targetNodeId,x=m.id,S=m.type,N=m.pointsList,j=m.sourceAnchorId,M=m.targetAnchorId,C=rh(N[0]),V=rh(v.startCrossPoint);this._lf.deleteEdge(x);var ce=this.checkRuleBeforeInsetNode(g,O,j,M,r);if(this._lf.addEdge({type:S,sourceNodeId:g,targetNodeId:r.id,startPoint:C,endPoint:V,pointsList:AE(N.slice(0,h),[v.startCrossPoint])}),this._lf.addEdge({type:S,sourceNodeId:r.id,targetNodeId:O,startPoint:rh(v.endCrossPoint),endPoint:rh(N[N.length-1]),pointsList:AE([v.endCrossPoint],N.slice(h))}),ce.isPass)break;this._lf.graphModel.eventCenter.emit($t.EventType.CONNECTION_NOT_ALLOWED,{data:r,msg:ce.targetMsg||ce.sourceMsg}),setTimeout(function(){t._lf.undo()},200);break}}},e.pluginName="insertNodeInPolyline",e}(),pC=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c},hC=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(pC(arguments[r]));return e},vC=function(){function e(r){var t=this,s=r.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"",text:"",onClick:function(){t.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"",text:"",onClick:function(){t.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"",text:"",onClick:function(){t.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"",text:"",onClick:function(){t.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"",text:"",onClick:function(){t.lf.redo()}}],this.lf=s}return e.prototype.render=function(r,t){this.destroy();var s=this.getControlTool();this.toolEl=s,t.appendChild(s),this.domContainer=t},e.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},e.prototype.addItem=function(r){this.controlItems.push(r)},e.prototype.removeItem=function(r){var t=this.controlItems.findIndex(function(s){return s.key===r});return this.controlItems.splice(t,1)[0]},e.prototype.getControlTool=function(){var r=this,t="lf-control-item",s="lf-control-item disabled",i=document.createElement("div"),c=[];return i.className="lf-control",this.controlItems.forEach(function(l){var h=document.createElement("div"),v=document.createElement("i"),m=document.createElement("span");switch(h.className=s,l.onClick&&(h.onclick=l.onClick.bind(null,r.lf)),l.onMouseEnter&&(h.onmouseenter=l.onMouseEnter.bind(null,r.lf)),l.onMouseLeave&&(h.onmouseleave=l.onMouseLeave.bind(null,r.lf)),v.className=l.iconClass,m.className="lf-control-text",m.title=l.title,m.innerText=l.text,h.append(v,m),l.text){case"":r.lf.on("history:change",function(g){var O=g.data.undoAble;h.className=O?t:s});break;case"":r.lf.on("history:change",function(g){var O=g.data.redoAble;h.className=O?t:s});break;default:h.className=t;break}c.push(h)}),i.append.apply(i,hC(c)),i},e.pluginName="control",e}(),yC=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c},gC=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(yC(arguments[r]));return e},Nf="lf:defaultNodeMenu",jf="lf:defaultEdgeMenu",Mf="lf:defaultGraphMenu",PE="lf:defaultSelectionMenu",mC=function(){function e(r){var t=this,s=r.lf;this.__menuDOM=document.createElement("ul"),this.lf=s,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(i){t.setMenuConfig(i)},this.lf.addMenuConfig=function(i){t.addMenuConfig(i)},this.lf.setMenuByType=function(i){t.setMenuByType(i)}}return e.prototype.init=function(){var r=this,t=[{text:"",callback:function(c){r.lf.deleteNode(c.id)}},{text:"",callback:function(c){r.lf.graphModel.editText(c.id)}},{text:"",callback:function(c){r.lf.cloneNode(c.id)}}];this.menuTypeMap.set(Nf,t);var s=[{text:"",callback:function(c){r.lf.deleteEdge(c.id)}},{text:"",callback:function(c){r.lf.graphModel.editText(c.id)}}];this.menuTypeMap.set(jf,s),this.menuTypeMap.set(Mf,[]);var i=[{text:"",callback:function(c){r.lf.clearSelectElements(),c.edges.forEach(function(l){return r.lf.deleteEdge(l.id)}),c.nodes.forEach(function(l){return r.lf.deleteNode(l.id)})}}];this.menuTypeMap.set(PE,i)},e.prototype.render=function(r,t){var s=this;this.__container=t,this.__currentData=null,this.__menuDOM.className="lf-menu",t.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(i){i.stopPropagation();for(var c=i.target;Array.from(c.classList).indexOf("lf-menu-item")===-1&&Array.from(c.classList).indexOf("lf-menu")===-1;)c=c.parentElement;Array.from(c.classList).indexOf("lf-menu-item")>-1?(c.onclickCallback(s.__currentData),s.__menuDOM.style.display="none",s.__currentData=null):console.warn("")},!0),this.lf.on("node:contextmenu",function(i){var c=i.data,l=i.position,h=l.domOverlayPosition,v=h.x,m=h.y,g=c.id,O=s.lf.graphModel.getNodeModelById(g),x=[],S=s.menuTypeMap.get(O.type);O&&O.menu&&Array.isArray(O.menu)?x=O.menu:S?x=S:x=s.menuTypeMap.get(Nf),s.__currentData=c,s.showMenu(v,m,x)}),this.lf.on("edge:contextmenu",function(i){var c=i.data,l=i.position,h=l.domOverlayPosition,v=h.x,m=h.y,g=c.id,O=s.lf.graphModel.getEdgeModelById(g),x=[],S=s.menuTypeMap.get(O.type);O&&O.menu&&Array.isArray(O.menu)?x=O.menu:S?x=S:x=s.menuTypeMap.get(jf),s.__currentData=c,s.showMenu(v,m,x)}),this.lf.on("blank:contextmenu",function(i){var c=i.position,l=s.menuTypeMap.get(Mf),h=c.domOverlayPosition,v=h.x,m=h.y;s.showMenu(v,m,l)}),this.lf.on("selection:contextmenu",function(i){var c=i.data,l=i.position,h=s.menuTypeMap.get(PE),v=l.domOverlayPosition,m=v.x,g=v.y;s.__currentData=c,s.showMenu(m,g,h)}),this.lf.on("node:mousedown",function(){s.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){s.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){s.__menuDOM.style.display="none"})},e.prototype.destroy=function(){var r;(r=this===null||this===void 0?void 0:this.__container)===null||r===void 0||r.removeChild(this.__menuDOM),this.__menuDOM=null},e.prototype.showMenu=function(r,t,s){if(!(!s||!s.length)){var i=this.__menuDOM;i.innerHTML="",i.append.apply(i,gC(this.__getMenuDom(s))),i.children.length&&(i.style.display="block",i.style.top=t+"px",i.style.left=r+"px")}},e.prototype.setMenuByType=function(r){!r.type||!r.menu||this.menuTypeMap.set(r.type,r.menu)},e.prototype.__getMenuDom=function(r){var t=[];return r&&r.length>0&&r.forEach(function(s){var i=document.createElement("li");if(s.className?i.className="lf-menu-item "+s.className:i.className="lf-menu-item",s.icon===!0){var c=document.createElement("span");c.className="lf-menu-item-icon",i.appendChild(c)}var l=document.createElement("span");l.className="lf-menu-item-text",s.text&&(l.innerText=s.text),i.appendChild(l),i.onclickCallback=s.callback,t.push(i)}),t},e.prototype.setMenuConfig=function(r){r&&(r.nodeMenu!==void 0&&this.menuTypeMap.set(Nf,r.nodeMenu?r.nodeMenu:[]),r.edgeMenu!==void 0&&this.menuTypeMap.set(jf,r.edgeMenu?r.edgeMenu:[]),r.graphMenu!==void 0&&this.menuTypeMap.set(Mf,r.graphMenu?r.graphMenu:[]))},e.prototype.addMenuConfig=function(r){if(r){if(Array.isArray(r.nodeMenu)){var t=this.menuTypeMap.get(Nf);this.menuTypeMap.set(Nf,t.concat(r.nodeMenu))}if(Array.isArray(r.edgeMenu)){var t=this.menuTypeMap.get(jf);this.menuTypeMap.set(jf,t.concat(r.edgeMenu))}if(Array.isArray(r.graphMenu)){var t=this.menuTypeMap.get(Mf);this.menuTypeMap.set(Mf,t.concat(r.graphMenu))}}},e.prototype.changeMenuItem=function(r,t){if(r==="add")this.addMenuConfig(t);else if(r==="reset")this.setMenuConfig(t);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},e.pluginName="menu",e}();globalThis&&globalThis.__read;var bC=function(){function e(r){var t=this,s=r.lf;this.lf=s,this.lf.setPatternItems=function(i){t.setPatternItems(i)}}return e.prototype.render=function(r,t){var s=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=t;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(i){s.panelEl.appendChild(s.createDndItem(i))}),t.appendChild(this.panelEl),this.domContainer=t},e.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},e.prototype.setPatternItems=function(r){this.shapeList=r,this.domContainer&&this.render(this.lf,this.domContainer)},e.prototype.createDndItem=function(r){var t=this,s=document.createElement("div");s.className=r.className?"lf-dnd-item "+r.className:"lf-dnd-item";var i=document.createElement("div");if(i.className="lf-dnd-shape",r.icon&&(i.style.backgroundImage="url("+r.icon+")"),s.appendChild(i),r.label){var c=document.createElement("div");c.innerText=r.label,c.className="lf-dnd-text",s.appendChild(c)}return s.onmousedown=function(){r.type&&t.lf.dnd.startDrag({type:r.type,properties:r.properties,text:r.text}),r.callback&&r.callback(t.lf,t.domContainer)},s.ondblclick=function(l){t.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:l,data:r})},s.onclick=function(l){t.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:l,data:r})},s.oncontextmenu=function(l){t.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:l,data:r})},s},e.pluginName="dndPanel",e}(),_C=function(){function e(r){var t=this,s=r.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(c){var l=t.lf.getPointByClient(c.clientX,c.clientY).domOverlayPosition,h=l.x,v=l.y;t.endPoint={x:h,y:v};var m=t.startPoint,g=m.x,O=m.y,x=t.wrapper.style,S=g,N=O,j=h-g,M=v-O;h<g&&(S=h,j=g-h),v<O&&(N=v,M=O-v),x.left=S+"px",x.top=N+"px",x.width=j+"px",x.height=M+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",t.__draw),document.removeEventListener("mouseup",t.__drawOff),t.wrapper.oncontextmenu=null,t.__domContainer.removeChild(t.wrapper);var c=t.startPoint,l=c.x,h=c.y,v=t.endPoint,m=v.x,g=v.y;if(!(Math.abs(m-l)<10&&Math.abs(g-h)<10)){var O=[Math.min(l,m),Math.min(h,g)],x=[Math.max(l,m),Math.max(h,g)],S=t.lf.graphModel.getAreaElement(O,x,t.isWholeEdge,t.isWholeNode,!0),N=t.lf.graphModel.group;S.forEach(function(j){(!N||!N.getNodeGroup(j.id))&&t.lf.selectElementById(j.id,!0)}),t.lf.emit("selection:selected",S)}},this.lf=s;var i=s.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=i,s.openSelectionSelect=function(){t.openSelectionSelect()},s.closeSelectionSelect=function(){t.closeSelectionSelect()}}return e.prototype.render=function(r,t){var s=this;this.__domContainer=t,r.on("blank:mousedown",function(i){var c=i.e,l=r.getEditConfig();if(!(!l.stopMoveGraph||s.__disabled)){var h=c.button===2;if(!h){var v=r.getPointByClient(c.clientX,c.clientY).domOverlayPosition,m=v.x,g=v.y;s.startPoint={x:m,y:g},s.endPoint={x:m,y:g};var O=document.createElement("div");O.className="lf-selection-select",O.oncontextmenu=function(S){S.preventDefault()},O.style.top=s.startPoint.y+"px",O.style.left=s.startPoint.x+"px",t.appendChild(O),s.wrapper=O,document.addEventListener("mousemove",s.__draw),document.addEventListener("mouseup",s.__drawOff)}}})},e.prototype.setSelectionSense=function(r,t){r===void 0&&(r=!0),t===void 0&&(t=!0),this.isWholeEdge=r,this.isWholeNode=t},e.prototype.openSelectionSelect=function(){var r=this.lf.getEditConfig().stopMoveGraph;r||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},e.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},e.prototype.open=function(){this.__disabled=!1},e.prototype.close=function(){this.__disabled=!0},e.pluginName="selectionSelect",e}(),EC=globalThis&&globalThis.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],s=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},OC=function(){function e(r){var t=this,s=r.lf,i=r.LogicFlow,c=r.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(l,h){t.setView(),t.isShow||t.createMiniMap(l,h),t.isShow=!0},this.hide=function(){t.isShow&&t.removeMiniMap(),t.isShow=!1},this.reset=function(){t.lf.resetTranslate(),t.lf.resetZoom(),t.hide(),t.show()},this.startDrag=function(l){document.addEventListener("mousemove",t.drag),document.addEventListener("mouseup",t.drop),t.startPosition={x:l.x,y:l.y}},this.moveViewport=function(l,h){var v=t.viewport.style;t.viewPortTop=l,t.viewPortLeft=h,v.top=t.viewPortTop+"px",v.left=t.viewPortLeft+"px"},this.drag=function(l){t.dragging=!0;var h=t.viewPortTop+l.y-t.startPosition.y,v=t.viewPortLeft+l.x-t.startPosition.x;t.moveViewport(h,v),t.startPosition={x:l.x,y:l.y};var m=(t.viewPortLeft+t.viewPortWidth/2)/t.viewPortScale,g=(t.viewPortTop+t.viewPortHeight/2)/t.viewPortScale;t.lf.focusOn({coordinate:{x:m+t.resetDataX,y:g+t.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",t.drag),document.removeEventListener("mouseup",t.drop);var l=t.viewPortTop,h=t.viewPortLeft;t.viewPortLeft>t.width&&(h=t.width-t.viewPortWidth),t.viewPortTop>t.height&&(l=t.height-t.viewPortHeight),t.viewPortLeft<-t.width&&(h=0),t.viewPortTop<-t.height&&(l=0),t.moveViewport(l,h)},this.mapClick=function(l){if(t.dragging)t.dragging=!1;else{var h=l.layerX,v=l.layerY,m=h,g=v,O=t.lf.getGraphRawData(),x=t.getBounds(O),S=x.left,N=x.top,j=S+m/t.viewPortScale,M=N+g/t.viewPortScale;t.lf.focusOn({coordinate:{x:j,y:M}})}},this.lf=s,c&&c.MiniMap&&this.setOption(c),this.miniMapWidth=s.graphModel.width,this.miniMapHeight=s.graphModel.width*this.height/this.width,this.LogicFlow=i,this.initMiniMap()}return e.prototype.render=function(r,t){var s=this;this.container=t,this.lf.on("history:change",function(){s.isShow&&s.setView()}),this.lf.on("graph:transform",nC(function(){s.isShow&&!s.dragging&&s.setView()},300))},e.prototype.init=function(r){this.disabledPlugins=this.disabledPlugins.concat(r.disabledPlugins||[])},e.prototype.setOption=function(r){var t=r.MiniMap,s=t.width,i=s===void 0?150:s,c=t.height,l=c===void 0?220:c,h=t.isShowHeader,v=h===void 0?!0:h,m=t.isShowCloseIcon,g=m===void 0?!0:m,O=t.leftPosition,x=O===void 0?0:O,S=t.topPosition,N=S===void 0?0:S,j=t.rightPosition,M=t.bottomPosition;this.width=i,this.height=l,this.isShowHeader=v,this.isShowCloseIcon=g,this.viewPortWidth=i,this.leftPosition=x,this.topPosition=N,this.rightPosition=j,this.bottomPosition=M},e.prototype.initMiniMap=function(){var r=document.createElement("div");r.className="lf-mini-map-graph",r.style.width=this.width+4+"px",r.style.height=this.height+"px",this.lfMap=new this.LogicFlow({container:r,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(t){return t},this.lfMap.adapterOut=function(t){return t},this.miniMapWrap=r,this.createViewPort(),r.addEventListener("click",this.mapClick)},e.prototype.createMiniMap=function(r,t){var s=document.createElement("div");s.appendChild(this.miniMapWrap),typeof r<"u"||typeof t<"u"?(s.style.left=(r||0)+"px",s.style.top=(t||0)+"px"):(typeof this.rightPosition<"u"?s.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(s.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?s.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(s.style.top=this.topPosition+"px")),s.style.position="absolute",s.className="lf-mini-map",this.isShowCloseIcon||s.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||s.classList.add("lf-mini-map-no-header"),this.container.appendChild(s),this.miniMapWrap.appendChild(this.viewport);var i=document.createElement("div");i.className="lf-mini-map-header",i.innerText=e.headerTitle,s.appendChild(i);var c=document.createElement("span");c.className="lf-mini-map-close",c.addEventListener("click",this.hide),s.appendChild(c),this.miniMapContainer=s},e.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},e.prototype.getBounds=function(r){var t=0,s=this.miniMapWidth,i=0,c=this.miniMapHeight,l=r.nodes;return l&&l.length>0&&l.forEach(function(h){var v=h.x,m=h.y,g=h.width,O=g===void 0?200:g,x=h.height,S=x===void 0?200:x,N=v-O/2,j=v+O/2,M=m-S/2,C=m+S/2;t=N<t?N:t,s=j>s?j:s,i=M<i?M:i,c=C>c?C:c}),{left:t,top:i,bottom:c,right:s}},e.prototype.resetData=function(r){var t=r.nodes,s=r.edges,i=0,c=0;return t&&t.length>0&&(t.forEach(function(l){var h=l.x,v=l.y,m=l.width,g=m===void 0?200:m,O=l.height,x=O===void 0?200:O,S=h-g/2,N=v-x/2;i=S<i?S:i,c=N<c?N:c}),(i<0||c<0)&&(this.resetDataX=i,this.resetDataY=c,t.forEach(function(l){l.x=l.x-i,l.y=l.y-c,l.text&&(l.text.x=l.text.x-i,l.text.y=l.text.y-c)}),s.forEach(function(l){l.startPoint&&(l.startPoint.x=l.startPoint.x-i,l.startPoint.y=l.startPoint.y-c),l.endPoint&&(l.endPoint.x=l.endPoint.x-i,l.endPoint.y=l.endPoint.y-c),l.text&&(l.text.x=l.text.x-i,l.text.y=l.text.y-c),l.pointsList&&l.pointsList.forEach(function(h){h.x=h.x-i,h.y=h.y-c})}))),r},e.prototype.setView=function(){var r,t,s=this.lf.getGraphRawData(),i=this.resetData(s),c=this.lf.viewMap,l=this.lf.graphModel.modelMap,h=this.lfMap.viewMap;try{for(var v=EC(c.keys()),m=v.next();!m.done;m=v.next()){var g=m.value;h.has(g)||(this.lfMap.setView(g,c.get(g)),this.lfMap.graphModel.modelMap.set(g,l.get(g)))}}catch(_e){r={error:_e}}finally{try{m&&!m.done&&(t=v.return)&&t.call(v)}finally{if(r)throw r.error}}this.lfMap.render(i);var O=this.getBounds(i),x=O.left,S=O.top,N=O.right,j=O.bottom,M=this.width/(N-x),C=this.height/(j-S),V=this.miniMapWrap.firstChild.style,ce=Math.min(M,C);V.transform="matrix("+ce+", 0, 0, "+ce+", 0, 0)",V.transformOrigin="left top",V.height=j-Math.min(S,0)+"px",V.width=N-Math.min(x,0)+"px",this.viewPortScale=ce,this.setViewPort(ce,{left:x,top:S,right:N,bottom:j})},e.prototype.setViewPort=function(r,t){var s=t.left,i=t.right;t.top,t.bottom;var c=this.viewport.style;c.width=this.viewPortWidth+"px",c.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var l=this.lf.getTransform(),h=l.TRANSLATE_X,v=l.TRANSLATE_Y,m=l.SCALE_X,g=l.SCALE_Y,O=i-s,x=this.width/(O/this.lf.graphModel.width),S=this.width*(x/this.width),N=this.lf.graphModel.width/this.lf.graphModel.height,j=S/N,M=this.lf.getGraphRawData(),C=this.getBounds(M),V=C.left,ce=C.top,_e=V,fe=ce;_e+=h/m,fe+=v/g,this.viewPortTop=fe>0?0:-fe*r,this.viewPortLeft=_e>0?0:-_e*r,this.viewPortWidth=S,this.viewPortHeight=j,c.top=this.viewPortTop+"px",c.left=this.viewPortLeft+"px",c.width=S/m+"px",c.height=j/g+"px"},e.prototype.createViewPort=function(){var r=document.createElement("div");r.className="lf-minimap-viewport",r.addEventListener("mousedown",this.startDrag),this.viewport=r},e.pluginName="miniMap",e.width=150,e.height=220,e.viewPortWidth=150,e.viewPortHeight=75,e.isShowHeader=!0,e.isShowCloseIcon=!0,e.leftPosition=0,e.topPosition=0,e.rightPosition=null,e.bottomPosition=null,e.headerTitle="",e}();function wC(e){if(e.length<=1)return!1;for(var r=0,t=e.length-1;r!==t&&r+1!==t&&t-1!==r;)r++,t--;return r===t?[--r,t]:[r,t]}var Dw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),zc=globalThis&&globalThis.__assign||function(){return zc=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zc.apply(this,arguments)},_a=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c};(function(e){Dw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.pointFilter=function(t){for(var s=t,i=1;i<s.length-1;){var c=_a(s[i-1],2),l=c[0],h=c[1],v=_a(s[i],2),m=v[0],g=v[1],O=_a(s[i+1],2),x=O[0],S=O[1];l===m&&m===x||h===g&&g===S?s.splice(i,1):i++}return s},r.prototype.getEdge=function(){var t=this.props.model,s=t.points,i=t.isAnimation,c=t.arrowConfig,l=t.radius,h=l===void 0?5:l,v=t.getEdgeStyle(),m=t.getEdgeAnimationStyle(),g=this.pointFilter(s.split(" ").map(function(bt){return bt.split(",").map(function(xt){return Number(xt)})})),O=wC(g);if(O){var x=_a(O,2),S=x[0],N=x[1],j=g[S],M=g[N],C=j.some(function(bt,xt){return bt===M[xt]});if(!C){var V=(M[1]-j[1])/2,ce=[M[0],M[1]-V],_e=[j[0],j[1]+V];g.splice(S+1,0,_e,ce)}}for(var fe=_a(g[0],2),z=fe[0],ee=fe[1],$="M"+z+" "+ee,L=1;L<g.length-1;L++){var Y=_a(g[L-1],2),K=Y[0],I=Y[1],pe=_a(g[L],2),De=pe[0],Q=pe[1],se=_a(g[L+1],2),he=se[0],be=se[1];if(De===K&&Q!==I){var te=Q>I?Q-h:Q+h;$=$+" L "+De+" "+te}if(Q===I&&De!==K){var ve=De>K?De-h:De+h;$=$+" L "+ve+" "+Q}if($=$+" Q "+De+" "+Q,De===he&&Q!==be){var te=Q>be?Q-h:Q+h;$=$+" "+De+" "+te}if(Q===be&&De!==he){var ve=De>he?De-h:De+h;$=$+" "+ve+" "+Q}}var Fe=_a(g[g.length-1],2),Ze=Fe[0],ht=Fe[1];$=$+" L "+Ze+" "+ht;var Ft=zc(zc(zc({d:$,style:i?m:{}},v),c),{fill:"none"});return $t.h("path",zc({d:$},Ft))},r})($t.PolylineEdge);(function(e){Dw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r})($t.PolylineEdgeModel);var Km,Un,kw,fs,NE,Iw,Em,Lw={},Fw=[],xC=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,qm=Array.isArray;function hu(e,r){for(var t in r)e[t]=r[t];return e}function Bw(e){var r=e.parentNode;r&&r.removeChild(e)}function Hf(e,r,t){var s,i,c,l={};for(c in r)c=="key"?s=r[c]:c=="ref"?i=r[c]:l[c]=r[c];if(arguments.length>2&&(l.children=arguments.length>3?Km.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(c in e.defaultProps)l[c]===void 0&&(l[c]=e.defaultProps[c]);return sh(e,l,s,i,null)}function sh(e,r,t,s,i){var c={type:e,props:r,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++kw};return i==null&&Un.vnode!=null&&Un.vnode(c),c}function Zm(e){return e.children}function Vc(e,r){this.props=e,this.context=r}function Wf(e,r){if(r==null)return e.__?Wf(e.__,e.__.__k.indexOf(e)+1):null;for(var t;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?Wf(e):null}function Gw(e){var r,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((t=e.__k[r])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return Gw(e)}}function jE(e){(!e.__d&&(e.__d=!0)&&fs.push(e)&&!gh.__r++||NE!==Un.debounceRendering)&&((NE=Un.debounceRendering)||Iw)(gh)}function gh(){var e,r,t,s,i,c,l,h;for(fs.sort(Em);e=fs.shift();)e.__d&&(r=fs.length,s=void 0,i=void 0,l=(c=(t=e).__v).__e,(h=t.__P)&&(s=[],(i=hu({},c)).__v=c.__v+1,Vw(h,c,i,t.__n,h.ownerSVGElement!==void 0,c.__h!=null?[l]:null,s,l??Wf(c),c.__h),TC(s,c),c.__e!=l&&Gw(c)),fs.length>r&&fs.sort(Em));gh.__r=0}function Uw(e,r,t,s,i,c,l,h,v,m){var g,O,x,S,N,j,M,C=s&&s.__k||Fw,V=C.length;for(t.__k=[],g=0;g<r.length;g++)if((S=t.__k[g]=(S=r[g])==null||typeof S=="boolean"||typeof S=="function"?null:typeof S=="string"||typeof S=="number"||typeof S=="bigint"?sh(null,S,null,null,S):qm(S)?sh(Zm,{children:S},null,null,null):S.__b>0?sh(S.type,S.props,S.key,S.ref?S.ref:null,S.__v):S)!=null){if(S.__=t,S.__b=t.__b+1,(x=C[g])===null||x&&S.key==x.key&&S.type===x.type)C[g]=void 0;else for(O=0;O<V;O++){if((x=C[O])&&S.key==x.key&&S.type===x.type){C[O]=void 0;break}x=null}Vw(e,S,x=x||Lw,i,c,l,h,v,m),N=S.__e,(O=S.ref)&&x.ref!=O&&(M||(M=[]),x.ref&&M.push(x.ref,null,S),M.push(O,S.__c||N,S)),N!=null?(j==null&&(j=N),typeof S.type=="function"&&S.__k===x.__k?S.__d=v=zw(S,v,e):v=Hw(e,S,x,C,N,v),typeof t.type=="function"&&(t.__d=v)):v&&x.__e==v&&v.parentNode!=e&&(v=Wf(x))}for(t.__e=j,g=V;g--;)C[g]!=null&&(typeof t.type=="function"&&C[g].__e!=null&&C[g].__e==t.__d&&(t.__d=Xw(s).nextSibling),Ww(C[g],C[g]));if(M)for(g=0;g<M.length;g++)$w(M[g],M[++g],M[++g])}function zw(e,r,t){for(var s,i=e.__k,c=0;i&&c<i.length;c++)(s=i[c])&&(s.__=e,r=typeof s.type=="function"?zw(s,r,t):Hw(t,s,s,i,s.__e,r));return r}function Hw(e,r,t,s,i,c){var l,h,v;if(r.__d!==void 0)l=r.__d,r.__d=void 0;else if(t==null||i!=c||i.parentNode==null)e:if(c==null||c.parentNode!==e)e.appendChild(i),l=null;else{for(h=c,v=0;(h=h.nextSibling)&&v<s.length;v+=1)if(h==i)break e;e.insertBefore(i,c),l=c}return l!==void 0?l:i.nextSibling}function Xw(e){var r,t,s;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(r=e.__k.length-1;r>=0;r--)if((t=e.__k[r])&&(s=Xw(t)))return s}return null}function SC(e,r,t,s,i){var c;for(c in t)c==="children"||c==="key"||c in r||mh(e,c,null,t[c],s);for(c in r)i&&typeof r[c]!="function"||c==="children"||c==="key"||c==="value"||c==="checked"||t[c]===r[c]||mh(e,c,r[c],t[c],s)}function ME(e,r,t){r[0]==="-"?e.setProperty(r,t??""):e[r]=t==null?"":typeof t!="number"||xC.test(r)?t:t+"px"}function mh(e,r,t,s,i){var c;e:if(r==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(r in s)t&&r in t||ME(e.style,r,"");if(t)for(r in t)s&&t[r]===s[r]||ME(e.style,r,t[r])}else if(r[0]==="o"&&r[1]==="n")c=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+c]=t,t?s||e.addEventListener(r,c?CE:RE,c):e.removeEventListener(r,c?CE:RE,c);else if(r!=="dangerouslySetInnerHTML"){if(i)r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!=="width"&&r!=="height"&&r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r!=="rowSpan"&&r!=="colSpan"&&r in e)try{e[r]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&r[4]!=="-"?e.removeAttribute(r):e.setAttribute(r,t))}}function RE(e){return this.l[e.type+!1](Un.event?Un.event(e):e)}function CE(e){return this.l[e.type+!0](Un.event?Un.event(e):e)}function Vw(e,r,t,s,i,c,l,h,v){var m,g,O,x,S,N,j,M,C,V,ce,_e,fe,z,ee,$=r.type;if(r.constructor!==void 0)return null;t.__h!=null&&(v=t.__h,h=r.__e=t.__e,r.__h=null,c=[h]),(m=Un.__b)&&m(r);try{e:if(typeof $=="function"){if(M=r.props,C=(m=$.contextType)&&s[m.__c],V=m?C?C.props.value:m.__:s,t.__c?j=(g=r.__c=t.__c).__=g.__E:("prototype"in $&&$.prototype.render?r.__c=g=new $(M,V):(r.__c=g=new Vc(M,V),g.constructor=$,g.render=PC),C&&C.sub(g),g.props=M,g.state||(g.state={}),g.context=V,g.__n=s,O=g.__d=!0,g.__h=[],g._sb=[]),g.__s==null&&(g.__s=g.state),$.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=hu({},g.__s)),hu(g.__s,$.getDerivedStateFromProps(M,g.__s))),x=g.props,S=g.state,g.__v=r,O)$.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if($.getDerivedStateFromProps==null&&M!==x&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(M,V),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(M,g.__s,V)===!1||r.__v===t.__v){for(r.__v!==t.__v&&(g.props=M,g.state=g.__s,g.__d=!1),g.__e=!1,r.__e=t.__e,r.__k=t.__k,r.__k.forEach(function(L){L&&(L.__=r)}),ce=0;ce<g._sb.length;ce++)g.__h.push(g._sb[ce]);g._sb=[],g.__h.length&&l.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(M,g.__s,V),g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(x,S,N)})}if(g.context=V,g.props=M,g.__P=e,_e=Un.__r,fe=0,"prototype"in $&&$.prototype.render){for(g.state=g.__s,g.__d=!1,_e&&_e(r),m=g.render(g.props,g.state,g.context),z=0;z<g._sb.length;z++)g.__h.push(g._sb[z]);g._sb=[]}else do g.__d=!1,_e&&_e(r),m=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++fe<25);g.state=g.__s,g.getChildContext!=null&&(s=hu(hu({},s),g.getChildContext())),O||g.getSnapshotBeforeUpdate==null||(N=g.getSnapshotBeforeUpdate(x,S)),Uw(e,qm(ee=m!=null&&m.type===Zm&&m.key==null?m.props.children:m)?ee:[ee],r,t,s,i,c,l,h,v),g.base=r.__e,r.__h=null,g.__h.length&&l.push(g),j&&(g.__E=g.__=null),g.__e=!1}else c==null&&r.__v===t.__v?(r.__k=t.__k,r.__e=t.__e):r.__e=AC(t.__e,r,t,s,i,c,l,v);(m=Un.diffed)&&m(r)}catch(L){r.__v=null,(v||c!=null)&&(r.__e=h,r.__h=!!v,c[c.indexOf(h)]=null),Un.__e(L,r,t)}}function TC(e,r){Un.__c&&Un.__c(r,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(s){s.call(t)})}catch(s){Un.__e(s,t.__v)}})}function AC(e,r,t,s,i,c,l,h){var v,m,g,O=t.props,x=r.props,S=r.type,N=0;if(S==="svg"&&(i=!0),c!=null){for(;N<c.length;N++)if((v=c[N])&&"setAttribute"in v==!!S&&(S?v.localName===S:v.nodeType===3)){e=v,c[N]=null;break}}if(e==null){if(S===null)return document.createTextNode(x);e=i?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,x.is&&x),c=null,h=!1}if(S===null)O===x||h&&e.data===x||(e.data=x);else{if(c=c&&Km.call(e.childNodes),m=(O=t.props||Lw).dangerouslySetInnerHTML,g=x.dangerouslySetInnerHTML,!h){if(c!=null)for(O={},N=0;N<e.attributes.length;N++)O[e.attributes[N].name]=e.attributes[N].value;(g||m)&&(g&&(m&&g.__html==m.__html||g.__html===e.innerHTML)||(e.innerHTML=g&&g.__html||""))}if(SC(e,x,O,i,h),g)r.__k=[];else if(Uw(e,qm(N=r.props.children)?N:[N],r,t,s,i&&S!=="foreignObject",c,l,c?c[0]:t.__k&&Wf(t,0),h),c!=null)for(N=c.length;N--;)c[N]!=null&&Bw(c[N]);h||("value"in x&&(N=x.value)!==void 0&&(N!==e.value||S==="progress"&&!N||S==="option"&&N!==O.value)&&mh(e,"value",N,O.value,!1),"checked"in x&&(N=x.checked)!==void 0&&N!==e.checked&&mh(e,"checked",N,O.checked,!1))}return e}function $w(e,r,t){try{typeof e=="function"?e(r):e.current=r}catch(s){Un.__e(s,t)}}function Ww(e,r,t){var s,i;if(Un.unmount&&Un.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||$w(s,null,r)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(c){Un.__e(c,r)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&Ww(s[i],r,t||typeof e.type!="function");t||e.__e==null||Bw(e.__e),e.__=e.__e=e.__d=void 0}function PC(e,r,t){return this.constructor(e,t)}Km=Fw.slice,Un={__e:function(e,r,t,s){for(var i,c,l;r=r.__;)if((i=r.__c)&&!i.__)try{if((c=i.constructor)&&c.getDerivedStateFromError!=null&&(i.setState(c.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,s||{}),l=i.__d),l)return i.__E=i}catch(h){e=h}throw e}},kw=0,Vc.prototype.setState=function(e,r){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=hu({},this.state),typeof e=="function"&&(e=e(hu({},t),this.props)),e&&hu(t,e),e!=null&&this.__v&&(r&&this._sb.push(r),jE(this))},Vc.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),jE(this))},Vc.prototype.render=Zm,fs=[],Iw=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Em=function(e,r){return e.__v.__b-r.__v.__b},gh.__r=0;var Xf=globalThis&&globalThis.__assign||function(){return Xf=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Xf.apply(this,arguments)};function Jm(e){var r=e.x,t=e.y,s=e.width,i=e.height,c=e.radius,l=e.className,h=r-s/2,v=t-i/2,m=Xf(Xf({width:10,height:10,cx:0,cy:0,rx:c||0,ry:c||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+l},e),{x:h,y:v});return $t.h("rect",Xf({},m))}Jm.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Hc;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Hc||(Hc={}));function ch(e){var r=e.x,t=e.y,s=e.width,i=e.height;return{minX:r-s/2,minY:t-i/2,maxX:r+s/2,maxY:t+i/2}}function DE(e){var r=ch(e),t=e.radius,s=r.minX,i=r.minY,c=r.maxX,l=r.maxY;return[{x:s+t,y:i+t},{x:c-t,y:i+t},{x:c-t,y:l-t},{x:s+t,y:l-t}]}function kE(e){var r=e.point,t=e.beforeNode,s=e.afterNode,i=r.x,c=r.y,l={x:i,y:c},h=t.radius,v=ch(t),m=ch(s);if(i===v.minX){l.x=m.minX;var g=(c-t.y)/(t.height/2-h);g?l.y=s.y+(s.height/2-h)*g:l.y=s.y}else if(i===v.maxX){l.x=m.maxX;var g=(c-t.y)/(t.height/2-h);g?l.y=s.y+(s.height/2-h)*g:l.y=s.y}else if(c===v.minY){l.y=m.minY;var g=(i-t.x)/(t.width/2-h);g?l.x=s.x+(s.width/2-h)*g:l.x=s.x}else if(c===v.maxY){l.y=m.maxY;var g=(i-t.x)/(t.width/2-h);g?l.x=s.x+(s.width/2-h)*g:l.x=s.x}else{var O=DE(t),x=DE(s),S=ch(t),N=S.minX,j=S.minY,M=S.maxX,C=S.maxY,V=-1;if(i-N<h&&c-j<h?V=0:M-i<h&&c-j<h?V=1:M-i<h&&C-c<h?V=2:i-N<h&&j-c<h&&(V=3),V>-1){var ce=Math.atan2(c-O[V].y,i-O[V].x);l.x=x[V].x+h*Math.cos(ce),l.y=x[V].y+h*Math.sin(ce)}}return l}function IE(e){var r=e.point,t=e.beforeNode,s=e.afterNode,i=s.rx,c=s.ry,l=r,h=(r.y-t.y)/(r.x-t.x),v=i,m=c,g,O;return h>=1/0?(g=0,O=m):h<=-1/0?(g=0,O=-m):r.x-t.x>0?(g=v*m/Math.sqrt(m*m+v*v*h*h),O=v*m*h/Math.sqrt(m*m+v*v*h*h)):(g=-(v*m)/Math.sqrt(m*m+v*v*h*h),O=-(v*m*h)/Math.sqrt(m*m+v*v*h*h)),l={x:g+s.x,y:O+s.y},l}function LE(e){var r=e.point,t=e.beforeNode,s=e.afterNode,i=r,c,l,h=r.x-t.x,v=r.y-t.y,m=t.rx,g=t.ry,O=Math.sqrt((m-Math.abs(h))*(m-Math.abs(h))+v*v)/Math.sqrt(m*m+g*g),x=s.rx,S=s.ry,N=Math.sqrt((x*x+S*S)*O*O*(x*x/(x*x+S*S))),j=N*(S/x);return h>=0?c=x-N:c=N-x,v>0?l=j:l=-j,i={x:c+s.x,y:l+s.y},i}var NC=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),ds=globalThis&&globalThis.__assign||function(){return ds=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ds.apply(this,arguments)},jC=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c},MC=$t.LogicFlowUtil.StepDrag,RC=function(e){NC(r,e);function r(t){var s=e.call(this)||this;return s.updatePosition=function(i){var c=i.deltaX,l=i.deltaY,h=s.nodeModel,v=h.x,m=h.y;s.nodeModel.x=v+c/2,s.nodeModel.y=m+l/2,s.nodeModel.moveText(c/2,l/2)},s.getResize=function(i){var c=i.index,l=i.deltaX,h=i.deltaY,v=i.width,m=i.height,g=i.PCTResizeInfo,O=i.pct,x=O===void 0?1:O,S={width:v,height:m,deltaX:l,deltaY:h};if(g){var N=4,j=0,M=0;switch(c){case 0:M=(l*-1-h)/N;break;case 1:M=(l-h)/N;break;case 2:M=(l+h)/N;break;case 3:M=(l*-1+h)/N;break}M!==0&&(j=Math.round(M/g.ResizeBasis.basisHeight*1e5)/1e3),g.ResizePCT.widthPCT=Math.max(Math.min(g.ResizePCT.widthPCT+j,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit),g.ResizePCT.hightPCT=Math.max(Math.min(g.ResizePCT.hightPCT+j,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit);var C=Math.round(g.ResizePCT.widthPCT*g.ResizeBasis.basisWidth/100),V=Math.round(g.ResizePCT.hightPCT*g.ResizeBasis.basisHeight/100);switch(c){case 0:l=v-C,h=m-V;break;case 1:l=C-v,h=m-V;break;case 2:l=C-v,h=V-m;break;case 3:l=v-C,h=V-m;break}return S.width=C,S.height=V,S.deltaX=l/x,S.deltaY=h/x,S}switch(c){case 0:S.width=v-l*x,S.height=m-h*x;break;case 1:S.width=v+l*x,S.height=m-h*x;break;case 2:S.width=v+l*x,S.height=m+h*x;break;case 3:S.width=v-l*x,S.height=m+h*x;break}return S},s.updateRect=function(i){var c=i.deltaX,l=i.deltaY,h=s.nodeModel,v=h.id,m=h.x,g=h.y,O=h.width,x=h.height,S=h.radius,N=h.PCTResizeInfo,j=s.index,M=s.getResize({index:j,deltaX:c,deltaY:l,width:O,height:x,PCTResizeInfo:N,pct:1}),C=s.nodeModel,V=C.minWidth,ce=C.minHeight,_e=C.maxWidth,fe=C.maxHeight;if(M.width<V||M.width>_e||M.height<ce||M.height>fe){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:M.deltaX,deltaY:M.deltaY}),s.nodeModel.width=M.width,s.nodeModel.height=M.height,s.nodeModel.setProperties({nodeSize:{width:M.width,height:M.height}});var z=s.getNodeEdges(v),ee={x:m,y:g,width:O,height:x,radius:S},$={x:s.nodeModel.x,y:s.nodeModel.y,width:s.nodeModel.width,height:s.nodeModel.height,radius:S},L={point:"",beforeNode:ee,afterNode:$},Y;z.sourceEdges.forEach(function(K){L.point=K.startPoint,Y=kE(L),K.updateStartPoint(Y)}),z.targetEdges.forEach(function(K){L.point=K.endPoint,Y=kE(L),K.updateEndPoint(Y)}),s.eventEmit({beforeNode:ee,afterNode:$})},s.updateEllipse=function(i){var c=i.deltaX,l=i.deltaY,h=s.nodeModel,v=h.id,m=h.rx,g=h.ry,O=h.x,x=h.y,S=h.PCTResizeInfo,N=s.index,j=m,M=g,C=s.getResize({index:N,deltaX:c,deltaY:l,width:j,height:M,PCTResizeInfo:S,pct:1/2}),V=s.nodeModel,ce=V.minWidth,_e=V.minHeight,fe=V.maxWidth,z=V.maxHeight;if(C.width<ce/2||C.width>fe/2||C.height<_e/2||C.height>z/2){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:C.deltaX,deltaY:C.deltaY}),s.nodeModel.rx=C.width,s.nodeModel.ry=C.height,s.nodeModel.setProperties({nodeSize:{rx:C.width,ry:C.height}});var ee=s.getNodeEdges(v),$={x:O,y:x},L={rx:C.width,ry:C.height,x:s.nodeModel.x,y:s.nodeModel.y},Y={point:{},beforeNode:$,afterNode:L},K;ee.sourceEdges.forEach(function(I){Y.point=I.startPoint,K=IE(Y),I.updateStartPoint(K)}),ee.targetEdges.forEach(function(I){Y.point=I.endPoint,K=IE(Y),I.updateEndPoint(K)}),s.eventEmit({beforeNode:ds(ds({},$),{rx:m,ry:g}),afterNode:L})},s.updateDiamond=function(i){var c=i.deltaX,l=i.deltaY,h=s.nodeModel,v=h.id,m=h.rx,g=h.ry,O=h.x,x=h.y,S=h.PCTResizeInfo,N=s.index,j=m,M=g,C=s.getResize({index:N,deltaX:c,deltaY:l,width:j,height:M,PCTResizeInfo:S,pct:1/2}),V=s.nodeModel,ce=V.minWidth,_e=V.minHeight,fe=V.maxWidth,z=V.maxHeight;if(C.width<ce/2||C.width>fe/2||C.height<_e/2||C.height>z/2){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:C.deltaX,deltaY:C.deltaY}),s.nodeModel.rx=C.width,s.nodeModel.ry=C.height,s.nodeModel.setProperties({nodeSize:{rx:C.width,ry:C.height}});var ee={x:O,y:x,rx:m,ry:g},$={rx:C.width,ry:C.height,x:s.nodeModel.x,y:s.nodeModel.y},L={point:{},beforeNode:ee,afterNode:$},Y,K=s.getNodeEdges(v);K.sourceEdges.forEach(function(I){L.point=I.startPoint,Y=LE(L),I.updateStartPoint(Y)}),K.targetEdges.forEach(function(I){L.point=I.endPoint,Y=LE(L),I.updateEndPoint(Y)}),s.eventEmit({beforeNode:ee,afterNode:$})},s.eventEmit=function(i){var c=i.beforeNode,l=i.afterNode,h=s.nodeModel,v=h.id,m=h.modelType,g=h.type,O=ds({id:v,modelType:m,type:g},c),x=ds({id:v,modelType:m,type:g},l);s.graphModel.eventCenter.emit("node:resize",{oldNodeSize:O,newNodeSize:x})},s.onDragging=function(i){var c,l=i.deltaX,h=i.deltaY,v=s.graphModel.transformModel,m=s.nodeModel.modelType;c=jC(v.fixDeltaXY(l,h),2),l=c[0],h=c[1],m===Hc.RECT_NODE||m===Hc.HTML_NODE?s.updateRect({deltaX:l,deltaY:h}):m===Hc.ELLIPSE_NODE?s.updateEllipse({deltaX:l,deltaY:h}):m===Hc.DIAMOND_NODE&&s.updateDiamond({deltaX:l,deltaY:h})},s.onDragEnd=function(){var i=s.graphModel.gridSize,c=i===void 0?1:i,l=c*Math.round(s.nodeModel.x/c),h=c*Math.round(s.nodeModel.y/c);s.nodeModel.moveTo(l,h)},s.index=t.index,s.nodeModel=t.model,s.graphModel=t.graphModel,s.state={},s.dragHandler=new MC({onDragging:s.onDragging,onDragEnd:s.onDragEnd,step:1}),s}return r.prototype.getNodeEdges=function(t){for(var s=this.graphModel,i=s.edges,c=[],l=[],h=0;h<i.length;h++){var v=i[h];v.sourceNodeId===t?c.push(v):i[h].targetNodeId===t&&l.push(v)}return{sourceEdges:c,targetEdges:l}},r.prototype.render=function(){var t=this.props,s=t.x,i=t.y,c=t.index,l=t.model,h=l.getControlPointStyle();return Hf("g",{className:"lf-resize-control-"+c},Hf(Jm,ds({className:"lf-node-control"},{x:s,y:i},h,{onMouseDown:this.dragHandler.handleMouseDown})))},r}(Vc),CC=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),bh=globalThis&&globalThis.__assign||function(){return bh=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},bh.apply(this,arguments)},Dh=function(e){CC(r,e);function r(){var t=e.call(this)||this;return t.state={},t}return r.prototype.getResizeControl=function(){var t=this.props,s=t.model,i=t.graphModel,c=s.x,l=s.y,h=s.width,v=s.height,m={minX:c-h/2,minY:l-v/2,maxX:c+h/2,maxY:l+v/2},g=m.minX,O=m.minY,x=m.maxX,S=m.maxY,N=[{x:g,y:O},{x,y:O},{x,y:S},{x:g,y:S}];return N.map(function(j,M){return Hf(RC,bh({index:M},j,{model:s,graphModel:i}))})},r.prototype.getGroupSolid=function(){var t=this.props.model,s=t.x,i=t.y,c=t.width,l=t.height,h=t.getResizeOutlineStyle();return Hf(Jm,bh({fill:"none"},h,{x:s,y:i,width:c,height:l}))},r.prototype.render=function(){return Hf("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},r}(Vc),Yw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),DC=function(e){Yw(r,e);function r(t,s){var i=e.call(this,t,s)||this,c=i.properties.nodeSize;return c&&(i.width=c.width,i.height=c.height),i}return r.prototype.initNodeData=function(t){e.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},r.prototype.getOutlineStyle=function(){var t=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},r.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},r.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},r.prototype.resize=function(t,s){console.log(t,s)},r.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var s={widthPCT:100,hightPCT:100},i={basisWidth:this.width,basisHeight:this.height},c={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:i,ScaleLimit:c}}else delete this.PCTResizeInfo},r}($t.RectNodeModel),kC=function(e){Yw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getControlGroup=function(){var t=this.props,s=t.model,i=t.graphModel;return $t.h(Dh,{model:s,graphModel:i})},r.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},r.prototype.getShape=function(){var t=this.props,s=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),s&&!i?this.getControlGroup():"")},r}($t.RectNode),kh={type:"rect",view:kC,model:DC},Kw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();(function(e){Kw(r,e);function r(t,s){var i=e.call(this,t,s)||this,c=i.properties.nodeSize;return c&&(i.rx=c.rx,i.ry=c.ry),i}return r.prototype.initNodeData=function(t){e.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},r.prototype.getOutlineStyle=function(){var t=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},r.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},r.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},r.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var s={widthPCT:100,hightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},c={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:i,ScaleLimit:c}}else delete this.PCTResizeInfo},r})($t.EllipseNodeModel);(function(e){Kw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getControlGroup=function(){var t=this.props,s=t.model,i=t.graphModel;return $t.h(Dh,{model:s,graphModel:i})},r.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},r.prototype.getShape=function(){var t=this.props,s=t.model,i=t.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),s.isSelected&&!i?this.getControlGroup():"")},r})($t.EllipseNode);var Om=globalThis&&globalThis.__assign||function(){return Om=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Om.apply(this,arguments)};function IC(e){var r=e.fillOpacity,t=r===void 0?1:r,s=e.strokeWidth,i=s===void 0?1:s,c=e.strokeOpacity,l=c===void 0?1:c,h=e.fill,v=h===void 0?"transparent":h,m=e.stroke,g=m===void 0?"#000":m,O=e.points,x=e.className,S=x===void 0?"lf-basic-shape":x,N={fill:v,fillOpacity:t,strokeWidth:i,stroke:g,strokeOpacity:l,points:"",className:S};return N.points=O.map(function(j){return j.join(",")}).join(" "),$t.h("polygon",Om({},N))}var qw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),wm=globalThis&&globalThis.__assign||function(){return wm=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},wm.apply(this,arguments)};(function(e){qw(r,e);function r(t,s){var i=e.call(this,t,s)||this,c=i.properties.nodeSize;return c&&(i.rx=c.rx,i.ry=c.ry),i}return r.prototype.initNodeData=function(t){e.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},r.prototype.getOutlineStyle=function(){var t=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},r.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},r.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},r.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var s={widthPCT:100,hightPCT:100},i={basisWidth:this.rx,basisHeight:this.ry},c={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:i,ScaleLimit:c}}else delete this.PCTResizeInfo},r})($t.DiamondNodeModel);(function(e){qw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getControlGroup=function(){var t=this.props,s=t.model,i=t.graphModel;return $t.h(Dh,{model:s,graphModel:i})},r.prototype.getResizeShape=function(){var t=this.props.model,s=t.points,i=t.getNodeStyle();return $t.h("g",null,$t.h(IC,wm({},i,{points:s})))},r.prototype.getShape=function(){var t=this.props,s=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),s&&!i?this.getControlGroup():"")},r})($t.DiamondNode);var Zw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();(function(e){Zw(r,e);function r(t,s){var i=e.call(this,t,s)||this,c=i.properties.nodeSize;return c&&(i.width=c.width,i.height=c.height),i}return r.prototype.initNodeData=function(t){e.prototype.initNodeData.call(this,t),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},r.prototype.getOutlineStyle=function(){var t=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(t.stroke="none",t.hover&&(t.hover.stroke="none")),t},r.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},r.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},r.prototype.enableProportionResize=function(t){if(t===void 0&&(t=!0),t){var s={widthPCT:100,hightPCT:100},i={basisWidth:this.width,basisHeight:this.height},c={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:i,ScaleLimit:c}}else delete this.PCTResizeInfo},r})($t.HtmlNodeModel);(function(e){Zw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getControlGroup=function(){var t=this.props,s=t.model,i=t.graphModel;return $t.h(Dh,{model:s,graphModel:i})},r.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},r.prototype.getShape=function(){var t=this.props,s=t.model.isSelected,i=t.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),s&&!i?this.getControlGroup():"")},r})($t.HtmlNode);var Jw=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var c in i)i.hasOwnProperty(c)&&(s[c]=i[c])},e(r,t)};return function(r,t){e(r,t);function s(){this.constructor=r}r.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),_h=globalThis&&globalThis.__assign||function(){return _h=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_h.apply(this,arguments)},LC=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c},FC=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(LC(arguments[r]));return e},FE=500,BE=300,BC=-1e4,GC=function(e){Jw(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.isGroup=!0,t.unfoldedWidth=FE,t.unfoldedHight=BE,t}return r.prototype.initNodeData=function(t){var s=this;e.prototype.initNodeData.call(this,t);var i=[];Array.isArray(t.children)&&(i=t.children),this.children=new Set(i),this.width=FE,this.height=BE,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=BC,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){s.isFolded&&s.foldGroup(s.isFolded)})},r.prototype.getResizeOutlineStyle=function(){var t=e.prototype.getResizeOutlineStyle.call(this);return t.stroke="none",t},r.prototype.foldGroup=function(t){var s=this;this.setProperty("isFolded",t),this.isFolded=t,t?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var i=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(c){var l=s.graphModel.getElement(c);l.isGroup&&!l.isFolded&&l.foldGroup(t),l.visible=!t,i=i.concat(l.incoming.edges.concat(l.outgoing.edges))}),this.foldEdge(t,i)},r.prototype.getAnchorStyle=function(t){var s=e.prototype.getAnchorStyle.call(this,t);return s.stroke="transparent",s.fill="transparent",s.hover.fill="transparent",s.hover.stroke="transparent",s},r.prototype.foldEdge=function(t,s){var i=this;s.forEach(function(c,l){var h=c.id,v=c.sourceNodeId,m=c.targetNodeId,g=c.startPoint,O=c.endPoint,x=c.type,S=c.text,N=c.getProperties(),j={id:h+"__"+l,sourceNodeId:v,targetNodeId:m,startPoint:g,endPoint:O,type:x,properties:N,text:S==null?void 0:S.value};c.virtual&&i.graphModel.deleteEdgeById(c.id);var M=i.graphModel.group.getNodeGroup(m);M||(M=i.graphModel.getNodeModelById(m));var C=i.graphModel.group.getNodeGroup(v);C||(C=i.graphModel.getNodeModelById(v)),t&&c.visible!==!1&&(i.children.has(v)||i.id===v?(j.startPoint=void 0,j.sourceNodeId=i.id):(j.endPoint=void 0,j.targetNodeId=i.id),(M.id!==i.id||C.id!==i.id)&&i.createVirtualEdge(j),c.visible=!1),!t&&c.visible===!1&&(M&&M.isGroup&&M.isFolded?(j.targetNodeId=M.id,j.endPoint=void 0,i.createVirtualEdge(j)):C&&C.isGroup&&C.isFolded?(j.sourceNodeId=C.id,j.startPoint=void 0,i.createVirtualEdge(j)):c.visible=!0)})},r.prototype.createVirtualEdge=function(t){t.pointsList=void 0;var s=this.graphModel.addEdge(t);s.virtual=!0,s.text.editable=!1,s.isFoldedEdge=!0},r.prototype.isInRange=function(t){var s=t.x1,i=t.y1,c=t.x2,l=t.y2;return s>=this.x-this.width/2&&c<=this.x+this.width/2&&i>=this.y-this.height/2&&l<=this.y+this.height/2},r.prototype.isAllowMoveTo=function(t){var s=t.x1,i=t.y1,c=t.x2,l=t.y2;return{x:s>=this.x-this.width/2&&c<=this.x+this.width/2,y:i>=this.y-this.height/2&&l<=this.y+this.height/2}},r.prototype.setAllowAppendChild=function(t){this.setProperty("groupAddable",t)},r.prototype.addChild=function(t){this.children.add(t)},r.prototype.removeChild=function(t){this.children.delete(t)},r.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},r.prototype.getData=function(){var t=this,s=e.prototype.getData.call(this);s.children=[],this.children.forEach(function(c){var l=t.graphModel.getNodeModelById(c);l&&!l.virtual&&s.children.push(c)});var i=s.properties;return delete i.groupAddable,delete i.isFolded,s},r.prototype.getHistoryData=function(){var t=e.prototype.getData.call(this);t.children=FC(this.children),t.isGroup=!0;var s=t.properties;return delete s.groupAddable,s.isFolded&&(t.x=t.x+this.unfoldedWidth/2-this.foldedWidth/2,t.y=t.y+this.unfoldedHight/2-this.foldedHeight/2),t},r.prototype.isAllowAppendIn=function(t){return!0},r.prototype.toBack=function(){this.zIndex--},r}(kh.model),UC=function(e){Jw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getControlGroup=function(){var t=this.props.model,s=t.resizable,i=t.properties;return s&&!i.isFolded?e.prototype.getControlGroup.call(this):null},r.prototype.getAddableShape=function(){var t=this.props.model,s=t.width,i=t.height,c=t.x,l=t.y,h=t.radius,v=t.properties;if(!v.groupAddable)return null;var m=this.props.model.getNodeStyle().strokeWidth,g=this.props.model.getAddableOutlineStyle(),O=s+m+8,x=i+m+8;return $t.h("rect",_h(_h({},g),{width:O,height:x,x:c-O/2,y:l-x/2,rx:h,ry:h}))},r.prototype.getFoldIcon=function(){var t=this.props.model,s=t.x-t.width/2+5,i=t.y-t.height/2+5;if(!t.foldable)return null;var c=$t.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:t.properties.isFolded?"M "+(s+3)+","+(i+6)+" "+(s+11)+","+(i+6)+" M"+(s+7)+","+(i+2)+" "+(s+7)+","+(i+10):"M "+(s+3)+","+(i+6)+" "+(s+11)+","+(i+6)+" "});return $t.h("g",{},[$t.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:t.x-t.width/2+5,y:t.y-t.height/2+5,onClick:function(){t.foldGroup(!t.properties.isFolded)}}),c])},r.prototype.getResizeShape=function(){return $t.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},r}(kh.view);const Qm={type:"group",view:UC,model:GC};var zC=-1e3,GE=-1e4,HC=function(){function e(r){var t=this,s=r.lf;this.topGroupZIndex=GE,this.nodeGroupMap=new Map,this.graphRendered=function(i){i&&i.nodes&&i.nodes.forEach(function(c){c.children&&c.children.forEach(function(l){t.nodeGroupMap.set(l,c.id)})})},this.appendNodeToGroup=function(i){var c=i.data,l=t.nodeGroupMap.get(c.id);if(l){var h=t.lf.getNodeModelById(l);h.removeChild(c.id),t.nodeGroupMap.delete(c.id),h.setAllowAppendChild(!1)}var v=t.lf.getNodeModelById(c.id),m=v.getBounds(),g=t.getGroup(m,c);if(g){var O=g.isAllowAppendIn(c);if(!O){t.lf.emit("group:not-allowed",{group:g.getData(),node:c});return}g.addChild(c.id),t.nodeGroupMap.set(c.id,g.id),g.setAllowAppendChild(!1),v.isGroup&&(c.children.forEach(function(x){t.nodeGroupMap.set(x,c.id)}),t.nodeSelected({data:c,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(i){var c=i.data;c.children&&c.children.forEach(function(v){t.nodeGroupMap.delete(v),t.lf.deleteNode(v)});var l=t.nodeGroupMap.get(c.id);if(l){var h=t.lf.getNodeModelById(l);h.removeChild(c.id),t.nodeGroupMap.delete(c.id)}},this.setActiveGroup=function(i){var c=i.data,l=t.lf.getNodeModelById(c.id),h=l.getBounds(),v=t.getGroup(h,c);if(t.activeGroup&&t.activeGroup.setAllowAppendChild(!1),!(!v||l.isGroup&&v.id===c.id)){var m=v.isAllowAppendIn(c);m&&(t.activeGroup=v,t.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(i){var c=i.data,l=i.isMultiple,h=i.isSelected,v=t.lf.getNodeModelById(c.id);if(t.toFrontGroup(v),t.topGroupZIndex>zC){t.topGroupZIndex=GE;for(var m=t.lf.graphModel.nodes.filter(function(j){return j.isGroup}).sort(function(j,M){return j.zIndex-M.zIndex}),g=0,O=0;O<m.length;O++){var x=m[O];x.zIndex!==g&&(t.topGroupZIndex++,g=x.zIndex),x.setZIndex(t.topGroupZIndex)}}if(l&&h)if(v.isGroup)v.children.forEach(function(j){var M=t.lf.graphModel.getElement(j);M.setSelected(!1)});else{var S=t.nodeGroupMap.get(c.id);if(S){var N=t.lf.getNodeModelById(S);N.isSelected&&v.setSelected(!1)}}},this.toFrontGroup=function(i){!i||!i.isGroup||(t.topGroupZIndex++,i.setZIndex(t.topGroupZIndex),i.children&&i.children.forEach(function(c){var l=t.lf.getNodeModelById(c);t.toFrontGroup(l)}))},s.register(Qm),this.lf=s,s.graphModel.addNodeMoveRules(function(i,c,l){if(i.isGroup){var h=t.getNodeAllChild(i);return s.graphModel.moveNodes(h,c,l,!0),!0}var v=s.getNodeModelById(t.nodeGroupMap.get(i.id));if(v&&v.isRestrict){var m=i.getBounds(),g=m.x1,O=m.y1,x=m.x2,S=m.y2,N=v.isAllowMoveTo({x1:g+c,y1:O+l,x2:x+c,y2:S+l});return N}return!0}),s.graphModel.group=this,s.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),s.on("node:delete",this.deleteGroupChild),s.on("node:dnd-drag,node:drag",this.setActiveGroup),s.on("node:click",this.nodeSelected),s.on("graph:rendered",this.graphRendered)}return e.prototype.getNodeAllChild=function(r){var t=this,s=[];return r.children&&r.children.forEach(function(i){s.push(i);var c=t.lf.getNodeModelById(i);c.isGroup&&(s=s.concat(t.getNodeAllChild(c)))}),s},e.prototype.getGroup=function(r,t){var s=this.lf.graphModel.nodes,i=s.filter(function(h){return h.isGroup&&h.isInRange(r)&&h.id!==t.id});if(i.length!==0){if(i.length===1)return i[0];for(var c=i[i.length-1],l=i.length-2;l>=0;l--)i[l].zIndex>c.zIndex&&(c=i[l]);return c}},e.prototype.getNodeGroup=function(r){var t=this.nodeGroupMap.get(r);if(t)return this.lf.getNodeModelById(t)},e.pluginName="group",e}(),XC=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c};globalThis&&globalThis.__spread;var UE=globalThis&&globalThis.__assign||function(){return UE=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},UE.apply(this,arguments)},zE=globalThis&&globalThis.__assign||function(){return zE=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zE.apply(this,arguments)},VC=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),i,c=[],l;try{for(;(r===void 0||r-- >0)&&!(i=s.next()).done;)c.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c};globalThis&&globalThis.__spread;class $C extends $t.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class WC extends $t.HtmlNode{}class YC extends EP{}class KC extends OP{}class qC extends wP{}class ZC extends xP{getShape(){const r=this.props.model,t=r.getNodeStyle(),{x:s,y:i,r:c}=r;return $t.h("circle",{...t,cx:s,cy:i,r:c,strokeWidth:5})}}class JC extends SP{constructor(r,t){const{id:s,text:i,x:c,y:l}=r;r.id=s||`Gateway_${Wi()}`,r.text=i||{value:i||"",x:c,y:l+40},super(r,t),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class QC extends TP{getShape(){const{model:r}=this.props,{x:t,y:s,width:i,height:c,points:l}=r,h=r.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${t-i/2} ${s-c/2})`},$t.h("polygon",{...h,x:t,y:s,points:l}),$t.h("line",{...h,x1:15,y1:15,x2:35,y2:35}),$t.h("line",{...h,x1:35,y1:15,x2:15,y2:35}))}}class eD extends $t.PolygonNodeModel{constructor(r,t){const{id:s,text:i,x:c,y:l}=r;r.id=s||`Gateway_${Wi()}`,r.text=i||{value:i||"",x:c,y:l+40},super(r,t),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class tD extends $t.PolygonNode{getShape(){const{model:r}=this.props,{x:t,y:s,width:i,height:c,points:l}=r,h=r.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${t-i/2} ${s-c/2})`},$t.h("polygon",{...h,x:t,y:s,points:l}),$t.h("line",{...h,x1:10,y1:25,x2:40,y2:25}),$t.h("line",{...h,x1:25,y1:10,x2:25,y2:40}))}}class rD extends AP{}class nD extends PP{}class oD extends NP{isAllowConnectedAsSource(){return!1}}class iD extends jP{}class aD extends uw{getTextPosition(){const{x:r,y:t}=this.text;return r&&t?{x:r,y:t}:this.dbClickPosition||{x:0,y:0}}}class uD extends sw{}const sD=kh.model,cD=kh.view;class lD extends sD{createId(){return`Note_${Wi()}`}initNodeData(r){super.initNodeData(r),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const r=super.getNodeStyle();return r.strokeDasharray="3 3",r.fill="transparent",r}}class fD extends cD{}class dD extends uw{getEdgeStyle(){const r=super.getEdgeStyle();return r.strokeDasharray="3 3",r}getTextPosition(){const{x:r,y:t}=this.text;return r&&t?{x:r,y:t}:this.dbClickPosition||{x:0,y:0}}}class pD extends sw{}const hD=Qm.model;class vD extends hD{createId(){return`Group_${Wi()}`}initNodeData(r){super.initNodeData(r),this.resizable=!0,this.foldable=!0}addChild(r){var t,s;super.addChild(r),(s=(t=this.graphModel.nodesMap[r])==null?void 0:t.model)==null||s.setProperty("groupKey",this.id)}removeChild(r){var t,s;super.removeChild(r),(s=(t=this.graphModel.nodesMap[r])==null?void 0:t.model)==null||s.deleteProperty("groupKey")}}class yD extends Qm.view{}class HE extends HC{constructor({lf:r}){super({lf:r}),r.register({type:"group",model:vD,view:yD}),r.off("node:delete",this.deleteGroupChild),r.on("node:delete",({data:t})=>{t.children&&t.children.forEach(s=>{this.nodeGroupMap.delete(s),this.lf.deleteNode(s)})})}}const gD=[{type:"process",model:$C,view:WC},{type:"startEvent",model:YC,view:KC},{type:"endEvent",model:qC,view:ZC},{type:"exclusiveGateway",model:JC,view:QC},{type:"parallelGateway",model:eD,view:tD},{type:"userTask",model:rD,view:nD},{type:"serviceTask",model:oD,view:iD},{type:"sequenceFlow",model:aD,view:uD},{type:"note",model:lD,view:fD},{type:"noteFlow",model:dD,view:pD}];class xm{constructor({lf:r}){r.batchRegister(gD),r.setDefaultEdgeType("sequenceFlow")}}mi(xm,"pluginName","bpmnExtend");class mD extends vC{constructor({lf:r}){super({lf:r}),[{key:"clear",iconClass:"lf-control-clear",title:"",text:"",onClick:()=>r.clearData()},{key:"edit",iconClass:"lf-control-edit",title:"",text:"",onClick:()=>r.emit("custom:edit-click",{})},{key:"mini-map",iconClass:"lf-control-mini-map",title:"",text:"",onClick:()=>{const{isShow:s,show:i,hide:c}=r.extension.miniMap??{};s?c():i()}},{key:"reset",iconClass:"lf-control-reset",title:"",text:"",onClick:()=>{lP.confirm("","",{confirmButtonText:"",cancelButtonText:""}).then(()=>{r.emit("custom:reset-form-property",{})}).catch(()=>{r.emit("custom:reset-button",{})})}}].forEach(s=>this.addItem(s))}}class bD{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(r){return this.init(r),this.execute(!0)}init(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[],this.comboEdges=r.comboEdges||[],this.hiddenNodes=r.hiddenNodes||[],this.hiddenEdges=r.hiddenEdges||[],this.hiddenCombos=r.hiddenCombos||[],this.vedges=r.vedges||[]}execute(r){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(r){r&&Object.assign(this,r)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const _D=e=>typeof e=="string",XE=Array.isArray,Eh=e=>typeof e=="number",Qw=e=>e!==null&&typeof e=="object",Oh=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const r=[];return e.forEach(t=>{r.push(t)}),r.map(t=>Oh(t))}if(typeof e=="object"&&Object.keys(e).length){const r=Object.assign({},e);return Object.keys(r).forEach(t=>{r[t]=Oh(r[t])}),r}return e},Ic=(e,r)=>{const t=e[r];return Qw(t)?t.cell:t},VE=(e,r,t)=>{let s;return t?s=t:Eh(e)?s=()=>e:s=()=>r,s},ED=(e,r)=>{if(e!=="next"&&e!=="prev")return r},$E=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let OD=class{constructor(){const r={};r.prev=r,r.next=r.prev,this.shortcut=r}dequeue(){const r=this.shortcut,t=r.prev;if(t&&t!==r)return $E(t),t}enqueue(r){const t=this.shortcut;r.prev&&r.next&&$E(r),r.next=t.next,t.next.prev=r,t.next=r,r.prev=t}toString(){const r=[],t=this.shortcut;let s=t.prev;for(;s!==t;)r.push(JSON.stringify(s,ED)),s=s==null?void 0:s.prev;return`[${r.join(", ")}]`}};var $c;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})($c||($c={}));function WE(e,r){var t=e.get(r)||0;e.set(r,t+1)}function YE(e,r){var t=e.get(r);t!==void 0&&(t=t-1,t>0?e.set(r,t):e.delete(r))}function e1(e,r,t,s){var i=String(r),c=String(t);if(!e&&i>c){var l=i;i=c,c=l}return i+$c.EDGE_KEY_DELIM+c+$c.EDGE_KEY_DELIM+(s===void 0?$c.DEFAULT_EDGE_NAME:s)}function KE(e,r,t,s){var i=String(r),c=String(t),l={v:r,w:t};if(!e&&i>c){var h=l.v;l.v=l.w,l.w=h}return s!==void 0&&(l.name=s),l}function Zg(e,r){return e1(e,r.v,r.w,r.name)}function qE(e){return typeof e=="function"}var wD=function(r){return r.nodes().map(function(t){var s=r.node(t),i=r.parent(t),c={id:t,value:s,parent:i};return c.value===void 0&&delete c.value,c.parent===void 0&&delete c.parent,c})},xD=function(r){return r.edges().map(function(t){var s=r.edge(t),i={v:t.v,w:t.w,value:s,name:t.name};return i.name===void 0&&delete i.name,i.value===void 0&&delete i.value,i})},SD=function(r){var t={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:wD(r),edges:xD(r),value:r.graph()};return t.value===void 0&&delete t.value,t},TD=function(r){var t=new il(r.options);return r.value!==void 0&&t.setGraph(r.value),r.nodes.forEach(function(s){t.setNode(s.id,s.value),s.parent&&t.setParent(s.id,s.parent)}),r.edges.forEach(function(s){t.setEdge(s.v,s.w,s.value,s.name)}),t};function ZE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,s)}return t}function JE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ZE(Object(t),!0).forEach(function(s){AD(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function AD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function PD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function QE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ND(e,r,t){return r&&QE(e.prototype,r),t&&QE(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var jD={compound:!1,multigraph:!1,directed:!0},il=function(){function e(){var r=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};PD(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=$c.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return r.directed},this.isMultigraph=function(){return r.multigraph},this.isCompound=function(){return r.compound},this.setGraph=function(i){return r.label=i,r},this.graph=function(){return r.label},this.setDefaultNodeLabel=function(i){return qE(i)?r.defaultNodeLabelFn=i:r.defaultNodeLabelFn=function(){return i},r},this.nodeCount=function(){return r.nodeCountNum},this.node=function(i){return r.nodesLabelMap.get(i)},this.nodes=function(){return Array.from(r.nodesLabelMap.keys())},this.sources=function(){return r.nodes().filter(function(i){var c;return!(!((c=r.inEdgesMap.get(i))===null||c===void 0)&&c.size)})},this.sinks=function(){return r.nodes().filter(function(i){var c;return!(!((c=r.outEdgesMap.get(i))===null||c===void 0)&&c.size)})},this.setNodes=function(i,c){return i.map(function(l){return r.setNode(l,c)}),r},this.hasNode=function(i){return r.nodesLabelMap.has(i)},this.checkCompound=function(){if(!r.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(i){if(r.isCompound()){var c,l=(c=r.parentMap)===null||c===void 0?void 0:c.get(i);if(l!==r.GRAPH_NODE)return l}},this.removeFromParentsChildList=function(i){var c=r.parentMap.get(i);r.childrenMap.get(c).delete(i)},this.setParent=function(i,c){var l,h;r.checkCompound();for(var v=c===void 0?r.GRAPH_NODE:c,m=r.parent(v);m;){if(i===m)throw new Error("Setting "+c+" as parent of "+i+" would create a cycle");m=r.parent(m)}c&&r.setNode(c),r.setNode(i),r.removeFromParentsChildList(i),(l=r.parentMap)===null||l===void 0||l.set(i,v);var g=r.childrenMap.get(v);return g.set(i,!0),(h=r.childrenMap)===null||h===void 0||h.set(v,g),r},this.children=function(i){var c=i===void 0?r.GRAPH_NODE:i;if(r.isCompound()){var l,h=(l=r.childrenMap)===null||l===void 0?void 0:l.get(c);return h?Array.from(h.keys()):void 0}if(c===r.GRAPH_NODE)return r.nodes();if(i&&r.hasNode(i))return[]},this.predecessors=function(i){var c=r.predecessorsMap.get(i);return c?Array.from(c.keys()):void 0},this.successors=function(i){var c=r.successorsMap.get(i);return c?Array.from(c.keys()):void 0},this.neighbors=function(i){var c;if(r.hasNode(i))return Array.from(new Set((c=r.predecessors(i))===null||c===void 0?void 0:c.concat(r.successors(i))))},this.isLeaf=function(i){var c;if(r.isDirected()){var l;return!(!((l=r.successors(i))===null||l===void 0)&&l.length)}return!(!((c=r.neighbors(i))===null||c===void 0)&&c.length)},this.filterNodes=function(i){var c=r.directed,l=r.multigraph,h=r.compound,v=new e({directed:c,multigraph:l,compound:h});if(v.setGraph(r.graph()),r.nodes().forEach(function(g){i(g)&&v.setNode(g,r.node(g))}),r.edges().forEach(function(g){v.hasNode(g.v)&&v.hasNode(g.w)&&v.setEdgeObj(g,r.edge(g))}),h){var m=function(O){for(var x=r.parent(O);x!==void 0&&!v.hasNode(x);)x=r.parent(x);return x};v.nodes().forEach(function(g){v.setParent(g,m(g))})}return v},this.setDefaultEdgeLabel=function(i){return qE(i)?r.defaultEdgeLabelFn=i:r.defaultEdgeLabelFn=function(){return i},r},this.edgeCount=function(){return r.edgeCountNum},this.setEdgeObj=function(i,c){return r.setEdge(i.v,i.w,c,i.name)},this.setPath=function(i,c){return i.reduce(function(l,h){return r.setEdge(l,h,c),h}),r},this.edgeFromArgs=function(i,c,l){return r.edge({v:i,w:c,name:l})},this.edge=function(i){return r.edgesLabelsMap.get(Zg(r.isDirected(),i))},this.hasEdge=function(i,c,l){return r.edgesLabelsMap.has(Zg(r.isDirected(),{v:i,w:c,name:l}))},this.removeEdgeObj=function(i){var c=i.v,l=i.w,h=i.name;return r.removeEdge(c,l,h)},this.edges=function(){return Array.from(r.edgesMap.values())},this.inEdges=function(i,c){var l=r.inEdgesMap.get(i);if(l)return Array.from(l.values()).filter(function(h){return!c||h.v===c})},this.outEdges=function(i,c){var l=r.outEdgesMap.get(i);if(l)return Array.from(l.values()).filter(function(h){return!c||h.w===c})},this.nodeEdges=function(i,c){var l;if(r.hasNode(i))return(l=r.inEdges(i,c))===null||l===void 0?void 0:l.concat(r.outEdges(i,c))},this.toJSON=function(){return SD(r)},this.nodeInDegree=function(i){var c=r.inEdgesMap.get(i);return c?c.size:0},this.nodeOutDegree=function(i){var c=r.outEdgesMap.get(i);return c?c.size:0},this.nodeDegree=function(i){return r.nodeInDegree(i)+r.nodeOutDegree(i)},this.source=function(i){return i.v},this.target=function(i){return i.w};var s=JE(JE({},jD),t);this.compound=s.compound,this.directed=s.directed,this.multigraph=s.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return ND(e,[{key:"setNode",value:function(t,s){var i=this.nodesLabelMap,c=this.defaultNodeLabelFn,l=this.isCompound,h=this.parentMap,v=this.childrenMap,m=this.inEdgesMap,g=this.outEdgesMap,O=this.predecessorsMap,x=this.successorsMap;if(i.has(t))return s!==void 0&&i.set(t,s),this;if(i.set(t,s||c(t)),l()){var S;h==null||h.set(t,this.GRAPH_NODE),v==null||v.set(t,new Map),v!=null&&v.has(this.GRAPH_NODE)||v==null||v.set(this.GRAPH_NODE,new Map),v==null||(S=v.get(this.GRAPH_NODE))===null||S===void 0||S.set(t,!0)}return[m,g,O,x].forEach(function(N){return N.set(t,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(t){var s=this;if(this.hasNode(t)){var i=function(M){s.removeEdge(M.v,M.w,M.name)},c=this.inEdgesMap,l=this.outEdgesMap,h=this.predecessorsMap,v=this.successorsMap,m=this.nodesLabelMap;if(this.isCompound()){var g,O,x;this.removeFromParentsChildList(t),(g=this.parentMap)===null||g===void 0||g.delete(t),(O=this.children(t))===null||O===void 0||O.forEach(function(j){return s.setParent(j)}),(x=this.childrenMap)===null||x===void 0||x.delete(t)}var S=c.get(t),N=l.get(t);Array.from(S.values()).forEach(function(j){return i(j)}),Array.from(N.values()).forEach(function(j){return i(j)}),m.delete(t),c.delete(t),l.delete(t),h.delete(t),v.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,s,i,c){var l,h,v=KE(this.isDirected(),t,s,c),m=Zg(this.isDirected(),v),g=v.v,O=v.w;if(this.edgesLabelsMap.has(m))return this.edgesLabelsMap.set(m,i),this;if(c!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(g),this.setNode(O),this.edgesLabelsMap.set(m,i||this.defaultEdgeLabelFn(g,O,c)),Object.freeze(v),this.edgesMap.set(m,v);var x=this.predecessorsMap.get(O),S=this.successorsMap.get(g);return WE(x,g),WE(S,O),(l=this.inEdgesMap.get(O))===null||l===void 0||l.set(m,v),(h=this.outEdgesMap.get(g))===null||h===void 0||h.set(m,v),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,s,i){var c=e1(this.isDirected(),t,s,i),l=this.edgesMap.get(c);if(l){var h=KE(this.isDirected(),t,s,i),v=h.v,m=h.w;this.edgesLabelsMap.delete(c),this.edgesMap.delete(c);var g=this.predecessorsMap.get(m),O=this.successorsMap.get(v);YE(g,v),YE(O,m),this.inEdgesMap.get(m).delete(c),this.outEdgesMap.get(v).delete(c),this.edgeCountNum-=1}return this}}]),e}();il.fromJSON=TD;function eO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function MD(e,r,t){return r&&eO(e.prototype,r),t&&eO(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var t1=MD(function e(){var r=this;RD(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return r.arr.length},this.keys=function(){return r.arr.map(function(t){return t.key})},this.has=function(t){return r.keyIndice.has(t)},this.priority=function(t){var s=r.keyIndice.get(t);if(s!==void 0)return r.arr[s].priority},this.swap=function(t,s){var i=r.arr,c=r.keyIndice,l=[i[t],i[s]],h=l[0],v=l[1];i[t]=v,i[s]=h,c.set(h.key,s),c.set(v.key,t)},this.innerDecrease=function(t){for(var s=r.arr,i=s[t].priority,c,l=t;l!==0;){var h;if(c=l>>1,((h=s[c])===null||h===void 0?void 0:h.priority)<i)break;r.swap(l,c),l=c}},this.heapify=function(t){var s=r.arr,i=t<<1,c=i+1,l=t;i<s.length&&(l=s[i].priority<s[l].priority?i:l,c<s.length&&(l=s[c].priority<s[l].priority?c:l),l!==t&&(r.swap(t,l),r.heapify(l)))},this.min=function(){if(r.size()===0)throw new Error("Queue underflow");return r.arr[0].key},this.add=function(t,s){var i=r.keyIndice,c=r.arr;if(!i.has(t)){var l=c.length;return i.set(t,l),c.push({key:t,priority:s}),r.innerDecrease(l),!0}return!1},this.removeMin=function(){r.swap(0,r.arr.length-1);var t=r.arr.pop();return r.keyIndice.delete(t.key),r.heapify(0),t.key},this.decrease=function(t,s){if(!r.has(t))throw new Error("There's no key named ".concat(t));var i=r.keyIndice.get(t);if(s>r.arr[i].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(r.arr[i].priority," New: ").concat(s));r.arr[i].priority=s,r.innerDecrease(i)}}),CD=function(r,t){var s=new il,i=new Map,c=new t1,l;function h(g){var O=g.v===l?g.w:g.v,x=c.priority(O);if(x!==void 0){var S=t(g);S<x&&(i.set(O,l),c.decrease(O,S))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(g){c.add(g,Number.POSITIVE_INFINITY),s.setNode(g)}),c.decrease(r.nodes()[0],0);for(var v=!1;c.size()>0;){var m;if(l=c.removeMin(),i.has(l))s.setEdge(l,i.get(l));else{if(v)throw new Error("Input graph is not connected: "+r.graph());v=!0}(m=r.nodeEdges(l))===null||m===void 0||m.forEach(h)}return s},DD=function(r){var t=new Set,s=[],i=r.nodes();return i.forEach(function(c){for(var l=[],h=[c];h.length>0;){var v=h.pop();if(!t.has(v)){var m,g;t.add(v),l.push(v),(m=r.successors(v))===null||m===void 0||m.forEach(function(O){return h.push(O)}),(g=r.predecessors(v))===null||g===void 0||g.forEach(function(O){return h.push(O)})}}l.length&&s.push(l)}),s},kD=function e(r,t,s,i,c,l){i.includes(t)||(i.push(t),s||l.push(t),c(t).forEach(function(h){return e(r,h,s,i,c,l)}),s&&l.push(t))},eb=function(r,t,s){var i=Array.isArray(t)?t:[t],c=function(m){return r.isDirected()?r.successors(m):r.neighbors(m)},l=[],h=[];return i.forEach(function(v){if(r.hasNode(v))kD(r,v,s==="post",h,c,l);else throw new Error("Graph does not have node: "+v)}),l};function ID(e,r){return GD(e)||BD(e,r)||FD(e,r)||LD()}function LD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FD(e,r){if(e){if(typeof e=="string")return tO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tO(e,r)}}function tO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function BD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],i=!0,c=!1,l,h;try{for(t=t.call(e);!(i=(l=t.next()).done)&&(s.push(l.value),!(r&&s.length===r));i=!0);}catch(v){c=!0,h=v}finally{try{!i&&t.return!=null&&t.return()}finally{if(c)throw h}}return s}}function GD(e){if(Array.isArray(e))return e}var UD=function(){return 1},r1=function(r,t,s,i){return zD(r,t,s||UD,i||function(c){return r.outEdges(c)})},zD=function(r,t,s,i){var c=new Map,l=new t1,h,v,m=function(x){var S=x.v!==h?x.v:x.w,N=c.get(S),j=s(x),M=v.distance+j;if(j<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+j);M<N.distance&&(N.distance=M,N.predecessor=h,l.decrease(S,M))};for(r.nodes().forEach(function(O){var x=O===t?0:Number.POSITIVE_INFINITY;c.set(O,{distance:x}),l.add(O,x)});l.size()>0&&(h=l.removeMin(),v=c.get(h),!(v&&v.distance===Number.POSITIVE_INFINITY));)i(h).forEach(m);var g={};return Array.from(c.entries()).forEach(function(O){var x=ID(O,2),S=x[0],N=x[1];return g[String(S)]=N,g}),g},HD=function(r,t,s){var i={};return r.nodes().forEach(function(c){return i[String(c)]=r1(r,c,t,s),i}),i},n1=function(r){var t=0,s=[],i=new Map,c=[];function l(h){var v,m={onStack:!0,lowlink:t,index:t};if(i.set(h,m),t+=1,s.push(h),(v=r.successors(h))===null||v===void 0||v.forEach(function(S){var N;if(i.has(S)){if(!((N=i.get(S))===null||N===void 0)&&N.onStack){var M=i.get(S);m.lowlink=Math.min(m.lowlink,M.index)}}else{l(S);var j=i.get(S);m.lowlink=Math.min(m.lowlink,j.lowlink)}}),m.lowlink===m.index){var g=[],O;do{O=s.pop();var x=i.get(O);x.onStack=!1,g.push(O)}while(h!==O);c.push(g)}}return r.nodes().forEach(function(h){i.has(h)||l(h)}),c},XD=function(r){return n1(r).filter(function(t){return t.length>1||t.length===1&&r.hasEdge(t[0],t[0])})};function Sm(e){return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sm(e)}function rO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function VD(e,r,t){return r&&rO(e.prototype,r),t&&rO(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $D(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function WD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Yf(e,r)}function YD(e){var r=o1();return function(){var s=Kf(e),i;if(r){var c=Kf(this).constructor;i=Reflect.construct(s,arguments,c)}else i=s.apply(this,arguments);return KD(this,i)}}function KD(e,r){if(r&&(Sm(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qD(e)}function qD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tm(e){var r=typeof Map=="function"?new Map:void 0;return Tm=function(s){if(s===null||!ZD(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(s))return r.get(s);r.set(s,i)}function i(){return lh(s,arguments,Kf(this).constructor)}return i.prototype=Object.create(s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Yf(i,s)},Tm(e)}function lh(e,r,t){return o1()?lh=Reflect.construct:lh=function(i,c,l){var h=[null];h.push.apply(h,c);var v=Function.bind.apply(i,h),m=new v;return l&&Yf(m,l.prototype),m},lh.apply(null,arguments)}function o1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ZD(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Yf(e,r){return Yf=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s},Yf(e,r)}function Kf(e){return Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Kf(e)}var Am=function(e){WD(t,e);var r=YD(t);function t(){return $D(this,t),r.apply(this,arguments)}return VD(t)}(Tm(Error));function i1(e){var r=new Set,t=new Set,s=[];function i(c){if(t.has(c))throw new Am;if(!r.has(c)){var l;t.add(c),r.add(c),(l=e.predecessors(c))===null||l===void 0||l.forEach(i),t.delete(c),s.push(c)}}if(e.sinks().forEach(i),r.size!==e.nodeCount())throw new Am;return s}var JD=function(r){try{i1(r)}catch(t){if(t instanceof Am)return!1;throw t}return!0},QD=function(r,t){return eb(r,t,"post")},e2=function(r,t){return eb(r,t,"pre")},t2=function(){return 1};function r2(e,r,t){return n2(e,r||t2,t||function(s){return e.outEdges(s)})}function n2(e,r,t){var s={},i=e.nodes();return i.forEach(function(c){var l=String(c);s[l]={},s[l][l]={distance:0},i.forEach(function(h){c!==h&&(s[l][String(h)]={distance:Number.POSITIVE_INFINITY})}),t(c).forEach(function(h){var v=h.v===c?h.w:h.v,m=r(h);s[l][String(v)]={distance:m,predecessor:c}})}),i.forEach(function(c){var l=String(c),h=s[l];i.forEach(function(v){var m=String(v),g=s[m];i.forEach(function(O){var x=String(O),S=g[l],N=h[x],j=g[x],M=S.distance+N.distance;M<j.distance&&(j.distance=M,j.predecessor=N.predecessor)})})}),s}const o2=Object.freeze(Object.defineProperty({__proto__:null,components:DD,dfs:eb,dijkstra:r1,dijkstraAll:HD,findCycles:XD,floydWarshall:r2,isAcyclic:JD,postorder:QD,preorder:e2,prim:CD,tarjan:n1,topsort:i1},Symbol.toStringTag,{value:"Module"}));class i2 extends OD{}class a2 extends il{}const u2=()=>1,s2=(e,r)=>{var t;if(e.nodeCount()<=1)return[];const s=l2(e,r||u2);return(t=c2(s.graph,s.buckets,s.zeroIdx).map(c=>e.outEdges(c.v,c.w)))===null||t===void 0?void 0:t.flat()},c2=(e,r,t)=>{let s=[];const i=r[r.length-1],c=r[0];let l;for(;e.nodeCount();){for(;l=c.dequeue();)Jg(e,r,t,l);for(;l=i.dequeue();)Jg(e,r,t,l);if(e.nodeCount()){for(let h=r.length-2;h>0;--h)if(l=r[h].dequeue(),l){s=s.concat(Jg(e,r,t,l,!0));break}}}return s},Jg=(e,r,t,s,i)=>{var c,l;const h=[];return(c=e.inEdges(s.v))===null||c===void 0||c.forEach(v=>{const m=e.edge(v),g=e.node(v.v);i&&h.push({v:v.v,w:v.w,in:0,out:0}),g.out===void 0&&(g.out=0),g.out-=m,Pm(r,t,g)}),(l=e.outEdges(s.v))===null||l===void 0||l.forEach(v=>{const m=e.edge(v),g=v.w,O=e.node(g);O.in===void 0&&(O.in=0),O.in-=m,Pm(r,t,O)}),e.removeNode(s.v),i?h:void 0},l2=(e,r)=>{const t=new a2;let s=0,i=0;e.nodes().forEach(v=>{t.setNode(v,{v,in:0,out:0})}),e.edges().forEach(v=>{const m=t.edge(v)||0,g=(r==null?void 0:r(v))||1,O=m+g;t.setEdge(v.v,v.w,O),i=Math.max(i,t.node(v.v).out+=g),s=Math.max(s,t.node(v.w).in+=g)});const c=[],l=i+s+3;for(let v=0;v<l;v++)c.push(new i2);const h=s+1;return t.nodes().forEach(v=>{Pm(c,h,t.node(v))}),{buckets:c,zeroIdx:h,graph:t}},Pm=(e,r,t)=>{t.out?t.in?e[t.out-t.in+r].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)},f2=e=>{const r=s=>i=>{var c;return((c=s.edge(i))===null||c===void 0?void 0:c.weight)||1},t=e.graph().acyclicer==="greedy"?s2(e,r(e)):d2(e);t==null||t.forEach(s=>{const i=e.edge(s);e.removeEdgeObj(s),i.forwardName=s.name,i.reversed=!0,e.setEdge(s.w,s.v,i,`rev-${Math.random()}`)})},d2=e=>{const r=[],t={},s={},i=c=>{var l;s[c]||(s[c]=!0,t[c]=!0,(l=e.outEdges(c))===null||l===void 0||l.forEach(h=>{t[h.w]?r.push(h):i(h.w)}),delete t[c])};return e.nodes().forEach(i),r},p2=e=>{e.edges().forEach(r=>{const t=e.edge(r);if(t.reversed){e.removeEdgeObj(r);const s=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(r.w,r.v,t,s)}})},nO={run:f2,undo:p2};class Sa extends il{}const h2=(e,r)=>Number(e)-Number(r),al=(e,r,t,s)=>{let i;do i=`${s}${Math.random()}`;while(e.hasNode(i));return t.dummy=r,e.setNode(i,t),i},v2=e=>{const r=new Sa().setGraph(e.graph());return e.nodes().forEach(t=>{r.setNode(t,e.node(t))}),e.edges().forEach(t=>{const s=r.edgeFromArgs(t.v,t.w)||{weight:0,minlen:1},i=e.edge(t);r.setEdge(t.v,t.w,{weight:s.weight+i.weight,minlen:Math.max(s.minlen,i.minlen)})}),r},a1=e=>{const r=new Sa({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(t=>{var s;!((s=e.children(t))===null||s===void 0)&&s.length||r.setNode(t,e.node(t))}),e.edges().forEach(t=>{r.setEdgeObj(t,e.edge(t))}),r},y2=(e,r)=>e==null?void 0:e.reduce((t,s,i)=>(t[s]=r[i],t),{}),oO=(e,r)=>{const t=Number(e.x),s=Number(e.y),i=Number(r.x)-t,c=Number(r.y)-s;let l=Number(e.width)/2,h=Number(e.height)/2;if(!i&&!c)return{x:0,y:0};let v,m;return Math.abs(c)*l>Math.abs(i)*h?(c<0&&(h=-h),v=h*i/c,m=h):(i<0&&(l=-l),v=l,m=l*c/i),{x:t+v,y:s+m}},qf=e=>{const r=[],t=u1(e)+1;for(let s=0;s<t;s++)r.push([]);e.nodes().forEach(s=>{const i=e.node(s);if(!i)return;const c=i.rank;c!==void 0&&r[c]&&r[c].push(s)});for(let s=0;s<t;s++)r[s]=r[s].sort((i,c)=>{var l,h;return h2((l=e.node(i))===null||l===void 0?void 0:l.order,(h=e.node(c))===null||h===void 0?void 0:h.order)});return r},g2=e=>{const r=e.nodes().filter(s=>{var i;return((i=e.node(s))===null||i===void 0?void 0:i.rank)!==void 0}).map(s=>e.node(s).rank),t=Math.min(...r);e.nodes().forEach(s=>{const i=e.node(s);i.hasOwnProperty("rank")&&t!==1/0&&(i.rank-=t)})},m2=e=>{const r=e.nodes(),t=r.filter(h=>{var v;return((v=e.node(h))===null||v===void 0?void 0:v.rank)!==void 0}).map(h=>e.node(h).rank),s=Math.min(...t),i=[];r.forEach(h=>{var v;const m=(((v=e.node(h))===null||v===void 0?void 0:v.rank)||0)-s;i[m]||(i[m]=[]),i[m].push(h)});let c=0;const l=e.graph().nodeRankFactor||0;for(let h=0;h<i.length;h++){const v=i[h];v===void 0?h%l!==0&&(c-=1):c&&(v==null||v.forEach(m=>{const g=e.node(m);g&&(g.rank=g.rank||0,g.rank+=c)}))}},iO=(e,r,t,s)=>{const i={width:0,height:0};return Eh(t)&&Eh(s)&&(i.rank=t,i.order=s),al(e,"border",i,r)},u1=e=>{let r;return e.nodes().forEach(t=>{var s;const i=(s=e.node(t))===null||s===void 0?void 0:s.rank;i!==void 0&&(r===void 0||i>r)&&(r=i)}),r||(r=0),r},b2=(e,r)=>{const t={lhs:[],rhs:[]};return e==null||e.forEach(s=>{r(s)?t.lhs.push(s):t.rhs.push(s)}),t},s1=(e,r)=>{const t=Date.now();try{return r()}finally{console.log(`${e} time: ${Date.now()-t}ms`)}},c1=(e,r)=>r(),tb=(e,r)=>e.reduce((t,s)=>{const i=r(t),c=r(s);return i>c?s:t}),_2=e=>{e.graph().dummyChains=[],e.edges().forEach(r=>E2(e,r))},E2=(e,r)=>{let t=r.v,s=e.node(t).rank;const i=r.w,c=e.node(i).rank,l=r.name,h=e.edge(r),v=h.labelRank;if(c===s+1)return;e.removeEdgeObj(r);const m=e.graph();let g,O,x;for(x=0,++s;s<c;++x,++s)h.points=[],O={edgeLabel:h,width:0,height:0,edgeObj:r,rank:s},g=al(e,"edge",O,"_d"),s===v&&(O.width=h.width,O.height=h.height,O.dummy="edge-label",O.labelpos=h.labelpos),e.setEdge(t,g,{weight:h.weight},l),x===0&&(m.dummyChains||(m.dummyChains=[]),m.dummyChains.push(g)),t=g;e.setEdge(t,i,{weight:h.weight},l)},O2=e=>{var r;(r=e.graph().dummyChains)===null||r===void 0||r.forEach(t=>{let s=e.node(t);const i=s.edgeLabel;let c;s.edgeObj&&e.setEdgeObj(s.edgeObj,i);let l=t;for(;s.dummy;)c=e.successors(l)[0],e.removeNode(l),i.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(i.x=s.x,i.y=s.y,i.width=s.width,i.height=s.height),l=c,s=e.node(l)})},aO={run:_2,undo:O2},l1=e=>{var r;const t={},s=i=>{var c;const l=e.node(i);if(!l)return 0;if(t[i])return l.rank;t[i]=!0;let h;return(c=e.outEdges(i))===null||c===void 0||c.forEach(v=>{const m=s(v.w),g=e.edge(v).minlen,O=m-g;O&&(h===void 0||O<h)&&(h=O)}),h||(h=0),l.rank=h,h};(r=e.sources())===null||r===void 0||r.forEach(i=>s(i))},w2=e=>{var r;const t={};let s;const i=h=>{var v;const m=e.node(h);if(!m)return 0;if(t[h])return m.rank;t[h]=!0;let g;return(v=e.outEdges(h))===null||v===void 0||v.forEach(O=>{const x=i(O.w),S=e.edge(O).minlen,N=x-S;N&&(g===void 0||N<g)&&(g=N)}),g||(g=0),(s===void 0||g<s)&&(s=g),m.rank=g,g};(r=e.sources())===null||r===void 0||r.forEach(h=>{e.node(h)&&i(h)}),s===void 0&&(s=0);const c={},l=(h,v)=>{var m;const g=e.node(h),O=isNaN(g.layer)?v:g.layer;(g.rank===void 0||g.rank<O)&&(g.rank=O),!c[h]&&(c[h]=!0,(m=e.outEdges(h))===null||m===void 0||m.map(x=>{l(x.w,O+e.edge(x).minlen)}))};e.nodes().forEach(h=>{const v=e.node(h);v&&(isNaN(v.layer)?v.rank-=s:l(h,v.layer))})},vu=(e,r)=>e.node(r.w).rank-e.node(r.v).rank-e.edge(r).minlen,x2=e=>{const r=new Sa({directed:!1}),t=e.nodes()[0],s=e.nodeCount();r.setNode(t,{});let i,c;for(;S2(r,e)<s;)i=f1(r,e),c=r.hasNode(i.v)?vu(e,i):-vu(e,i),d1(r,e,c);return r},S2=(e,r)=>{const t=s=>{r.nodeEdges(s).forEach(i=>{const c=i.v,l=s===c?i.w:c;!e.hasNode(l)&&!vu(r,i)&&(e.setNode(l,{}),e.setEdge(s,l,{}),t(l))})};return e.nodes().forEach(t),e.nodeCount()},T2=e=>{const r=new Sa({directed:!1}),t=e.nodes()[0],s=e.nodes().filter(l=>!!e.node(l)).length;r.setNode(t,{});let i,c;for(;A2(r,e)<s;)i=f1(r,e),c=r.hasNode(i.v)?vu(e,i):-vu(e,i),d1(r,e,c);return r},A2=(e,r)=>{const t=s=>{var i;(i=r.nodeEdges(s))===null||i===void 0||i.forEach(c=>{const l=c.v,h=s===l?c.w:l;!e.hasNode(h)&&(r.node(h).layer!==void 0||!vu(r,c))&&(e.setNode(h,{}),e.setEdge(s,h,{}),t(h))})};return e.nodes().forEach(t),e.nodeCount()},f1=(e,r)=>tb(r.edges(),t=>e.hasNode(t.v)!==e.hasNode(t.w)?vu(r,t):1/0),d1=(e,r,t)=>{e.nodes().forEach(s=>{r.node(s).rank||(r.node(s).rank=0),r.node(s).rank+=t})},{preorder:P2,postorder:N2}=o2,j2=e=>{const r=v2(e);l1(r);const t=x2(r);h1(t),p1(t,r);let s,i;for(;s=C2(t);)i=D2(t,r,s),k2(t,r,s,i)},p1=(e,r)=>{let t=N2(e,e.nodes());t=t==null?void 0:t.slice(0,(t==null?void 0:t.length)-1),t==null||t.forEach(s=>{M2(e,r,s)})},M2=(e,r,t)=>{const i=e.node(t).parent;e.edgeFromArgs(t,i).cutvalue=R2(e,r,t)},R2=(e,r,t)=>{var s;const c=e.node(t).parent;let l=!0,h=r.edgeFromArgs(t,c),v=0;return h||(l=!1,h=r.edgeFromArgs(c,t)),v=h.weight,(s=r.nodeEdges(t))===null||s===void 0||s.forEach(m=>{const g=m.v===t,O=g?m.w:m.v;if(O!==c){const x=g===l,S=r.edge(m).weight;if(v+=x?S:-S,L2(e,t,O)){const N=e.edgeFromArgs(t,O).cutvalue;v+=x?-N:N}}}),v},h1=(e,r=e.nodes()[0])=>{v1(e,{},1,r)},v1=(e,r,t,s,i)=>{var c;const l=t;let h=t;const v=e.node(s);return r[s]=!0,(c=e.neighbors(s))===null||c===void 0||c.forEach(m=>{r[m]||(h=v1(e,r,h,m,s))}),v.low=l,v.lim=h++,i?v.parent=i:delete v.parent,h},C2=e=>e.edges().find(r=>e.edge(r).cutvalue<0),D2=(e,r,t)=>{let s=t.v,i=t.w;r.hasEdge(s,i)||(s=t.w,i=t.v);const c=e.node(s),l=e.node(i);let h=c,v=!1;c.lim>l.lim&&(h=l,v=!0);const m=r.edges().filter(g=>v===uO(e,e.node(g.v),h)&&v!==uO(e,e.node(g.w),h));return tb(m,g=>vu(r,g))},k2=(e,r,t,s)=>{const i=t.v,c=t.w;e.removeEdge(i,c),e.setEdge(s.v,s.w,{}),h1(e),p1(e,r),I2(e,r)},I2=(e,r)=>{const t=e.nodes().find(i=>{var c;return!(!((c=r.node(i))===null||c===void 0)&&c.parent)});let s=P2(e,t);s=s==null?void 0:s.slice(1),s==null||s.forEach(i=>{const c=e.node(i).parent;let l=r.edgeFromArgs(i,c),h=!1;l||(l=r.edgeFromArgs(c,i),h=!0),r.node(i).rank=r.node(c).rank+(h?l.minlen:-l.minlen)})},L2=(e,r,t)=>e.hasEdge(r,t),uO=(e,r,t)=>t.low<=r.lim&&r.lim<=t.lim,F2=e=>{switch(e.graph().ranker){case"network-simplex":G2(e);break;case"tight-tree":sO(e);break;case"longest-path":B2(e);break;default:sO(e)}},B2=l1,sO=e=>{w2(e),T2(e)},G2=e=>{j2(e)},U2=e=>{var r;const t={};let s=0;const i=c=>{var l;const h=s;(l=e.children(c))===null||l===void 0||l.forEach(i),t[c]={low:h,lim:s++}};return(r=e.children())===null||r===void 0||r.forEach(i),t},z2=(e,r,t,s)=>{const i=[],c=[],l=Math.min(r[t].low,r[s].low),h=Math.max(r[t].lim,r[s].lim);let v,m;v=t;do v=e.parent(v),i.push(v);while(v&&(r[v].low>l||h>r[v].lim));for(m=v,v=s;v&&v!==m;)c.push(v),v=e.parent(v);return{lca:m,path:i.concat(c.reverse())}},H2=e=>{var r;const t=U2(e);(r=e.graph().dummyChains)===null||r===void 0||r.forEach(s=>{var i,c;let l=s,h=e.node(l);const v=h.edgeObj;if(!v)return;const m=z2(e,t,v.v,v.w),g=m.path,O=m.lca;let x=0,S=g[x],N=!0;for(;l!==v.w;){if(h=e.node(l),N){for(;S!==O&&((i=e.node(S))===null||i===void 0?void 0:i.maxRank)<h.rank;)x++,S=g[x];S===O&&(N=!1)}if(!N){for(;x<g.length-1&&((c=e.node(g[x+1]))===null||c===void 0?void 0:c.minRank)<=h.rank;)x++;S=g[x]}e.setParent(l,S),l=e.successors(l)[0]}})},X2=e=>{var r;const t=al(e,"root",{},"_root"),s=V2(e);let i=Math.max(...Object.values(s));Math.abs(i)===1/0&&(i=1);const c=i-1,l=2*c+1;e.graph().nestingRoot=t,e.edges().forEach(v=>{e.edge(v).minlen*=l});const h=$2(e)+1;(r=e.children())===null||r===void 0||r.forEach(v=>{y1(e,t,l,h,c,s,v)}),e.graph().nodeRankFactor=l},y1=(e,r,t,s,i,c,l)=>{const h=e.children(l);if(!(h!=null&&h.length)){l!==r&&e.setEdge(r,l,{weight:0,minlen:t});return}const v=iO(e,"_bt"),m=iO(e,"_bb"),g=e.node(l);e.setParent(v,l),g.borderTop=v,e.setParent(m,l),g.borderBottom=m,h==null||h.forEach(O=>{y1(e,r,t,s,i,c,O);const x=e.node(O),S=x.borderTop?x.borderTop:O,N=x.borderBottom?x.borderBottom:O,j=x.borderTop?s:2*s,M=S!==N?1:i-c[l]+1;e.setEdge(v,S,{minlen:M,weight:j,nestingEdge:!0}),e.setEdge(N,m,{minlen:M,weight:j,nestingEdge:!0})}),e.parent(l)||e.setEdge(r,v,{weight:0,minlen:i+c[l]})},V2=e=>{var r;const t={},s=(i,c)=>{const l=e.children(i);l==null||l.forEach(h=>s(h,c+1)),t[i]=c};return(r=e.children())===null||r===void 0||r.forEach(i=>s(i,1)),t},$2=e=>{let r=0;return e.edges().forEach(t=>{r+=e.edge(t).weight}),r},W2=e=>{const r=e.graph();r.nestingRoot&&e.removeNode(r.nestingRoot),delete r.nestingRoot,e.edges().forEach(t=>{e.edge(t).nestingEdge&&e.removeEdgeObj(t)})},cO={run:X2,cleanup:W2},Y2=e=>{var r;const t=s=>{const i=e.children(s),c=e.node(s);if(i!=null&&i.length&&i.forEach(l=>t(l)),c.hasOwnProperty("minRank")){c.borderLeft=[],c.borderRight=[];for(let l=c.minRank,h=c.maxRank+1;l<h;l+=1)lO(e,"borderLeft","_bl",s,c,l),lO(e,"borderRight","_br",s,c,l)}};(r=e.children())===null||r===void 0||r.forEach(s=>t(s))},lO=(e,r,t,s,i,c)=>{const l={rank:c,borderType:r,width:0,height:0},h=i[r][c-1],v=al(e,"border",l,t);i[r][c]=v,e.setParent(v,s),h&&e.setEdge(h,v,{weight:1})},K2=e=>{var r;const t=(r=e.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(t==="lr"||t==="rl")&&g1(e)},q2=e=>{var r;const t=(r=e.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(t==="bt"||t==="rl")&&Z2(e),(t==="lr"||t==="rl")&&(J2(e),g1(e))},g1=e=>{e.nodes().forEach(r=>{fO(e.node(r))}),e.edges().forEach(r=>{fO(e.edge(r))})},fO=e=>{const r=e.width;e.width=e.height,e.height=r},Z2=e=>{e.nodes().forEach(r=>{Qg(e.node(r))}),e.edges().forEach(r=>{var t;const s=e.edge(r);(t=s.points)===null||t===void 0||t.forEach(i=>Qg(i)),s.hasOwnProperty("y")&&Qg(s)})},Qg=e=>{e!=null&&e.y&&(e.y=-e.y)},J2=e=>{e.nodes().forEach(r=>{em(e.node(r))}),e.edges().forEach(r=>{var t;const s=e.edge(r);(t=s.points)===null||t===void 0||t.forEach(i=>em(i)),s.hasOwnProperty("x")&&em(s)})},em=e=>{const r=e.x;e.x=e.y,e.y=r},dO={adjust:K2,undo:q2};var Q2={}.toString,ek=function(e,r){return Q2.call(e)==="[object "+r+"]"};const tk=ek,m1=function(e){return Array.isArray?Array.isArray(e):tk(e,"Array")},Nm=function(e){if(m1(e))return e.reduce(function(r,t){return Math.max(r,t)},e[0])},pO=function(e){if(m1(e))return e.reduce(function(r,t){return Math.min(r,t)},e[0])},hO=e=>{const r={},t=e.nodes().filter(g=>{var O;return!(!((O=e.children(g))===null||O===void 0)&&O.length)}),s=t.map(g=>e.node(g).rank),i=Nm(s),c=[];for(let g=0;g<i+1;g++)c.push([]);const l=g=>{var O;if(r.hasOwnProperty(g))return;r[g]=!0;const x=e.node(g);isNaN(x.rank)||c[x.rank].push(g),(O=e.successors(g))===null||O===void 0||O.forEach(S=>l(S))},h=t.sort((g,O)=>e.node(g).rank-e.node(O).rank),m=h.filter(g=>e.node(g).fixorder!==void 0).sort((g,O)=>e.node(g).fixorder-e.node(O).fixorder);return m==null||m.forEach(g=>{isNaN(e.node(g).rank)||c[e.node(g).rank].push(g),r[g]=!0}),h==null||h.forEach(l),c},rk=(e,r,t)=>{const s=y2(t,t.map((g,O)=>O)),c=r.map(g=>{var O;const x=(O=e.outEdges(g))===null||O===void 0?void 0:O.map(S=>({pos:s[S.w]||0,weight:e.edge(S).weight}));return x==null?void 0:x.sort((S,N)=>S.pos-N.pos)}).flat().filter(g=>g!==void 0);let l=1;for(;l<t.length;)l<<=1;const h=2*l-1;l-=1;const v=Array(h).fill(0,0,h);let m=0;return c==null||c.forEach(g=>{if(g){let O=g.pos+l;v[O]+=g.weight;let x=0;for(;O>0;)O%2&&(x+=v[O+1]),O=O-1>>1,v[O]+=g.weight;m+=g.weight*x}}),m},vO=(e,r)=>{let t=0;for(let s=1;s<(r==null?void 0:r.length);s+=1)t+=rk(e,r[s-1],r[s]);return t},nk=(e,r,t)=>{const s=ok(e),i=new Sa({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(c=>e.node(c));return e.nodes().forEach(c=>{var l;const h=e.node(c),v=e.parent(c);(h.rank===r||h.minRank<=r&&r<=h.maxRank)&&(i.setNode(c),i.setParent(c,v||s),(l=e[t](c))===null||l===void 0||l.forEach(m=>{const g=m.v===c?m.w:m.v,O=i.edgeFromArgs(g,c),x=O!==void 0?O.weight:0;i.setEdge(g,c,{weight:e.edge(m).weight+x})}),h.hasOwnProperty("minRank")&&i.setNode(c,{borderLeft:h.borderLeft[r],borderRight:h.borderRight[r]}))}),i},ok=e=>{let r;for(;e.hasNode(r=`_root${Math.random()}`););return r},ik=(e,r,t)=>{const s={};let i;t==null||t.forEach(c=>{let l=e.parent(c),h,v;for(;l;){if(h=e.parent(l),h?(v=s[h],s[h]=l):(v=i,i=l),v&&v!==l){r.setEdge(v,l);return}l=h}})},ak=(e,r)=>r.map(t=>{const s=e.inEdges(t);if(!(s!=null&&s.length))return{v:t};{const i={sum:0,weight:0};return s==null||s.forEach(c=>{const l=e.edge(c),h=e.node(c.v);i.sum+=l.weight*h.order,i.weight+=l.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}}}),uk=(e,r)=>{var t,s,i;const c={};e==null||e.forEach((h,v)=>{c[h.v]={i:v,indegree:0,in:[],out:[],vs:[h.v]};const m=c[h.v];h.barycenter!==void 0&&(m.barycenter=h.barycenter,m.weight=h.weight)}),(t=r.edges())===null||t===void 0||t.forEach(h=>{const v=c[h.v],m=c[h.w];v!==void 0&&m!==void 0&&(m.indegree++,v.out.push(c[h.w]))});const l=(i=(s=Object.values(c)).filter)===null||i===void 0?void 0:i.call(s,h=>!h.indegree);return sk(l)},sk=e=>{var r,t;const s=[],i=v=>m=>{m.merged||(m.barycenter===void 0||v.barycenter===void 0||m.barycenter>=v.barycenter)&&ck(v,m)},c=v=>m=>{m.in.push(v),--m.indegree===0&&e.push(m)};for(;e!=null&&e.length;){const v=e.pop();s.push(v),(r=v.in.reverse())===null||r===void 0||r.forEach(m=>i(v)(m)),(t=v.out)===null||t===void 0||t.forEach(m=>c(v)(m))}const l=s.filter(v=>!v.merged),h=["vs","i","barycenter","weight"];return l.map(v=>{const m={};return h==null||h.forEach(g=>{v[g]!==void 0&&(m[g]=v[g])}),m})},ck=(e,r)=>{var t;let s=0,i=0;e.weight&&(s+=e.barycenter*e.weight,i+=e.weight),r.weight&&(s+=r.barycenter*r.weight,i+=r.weight),e.vs=(t=r.vs)===null||t===void 0?void 0:t.concat(e.vs),e.barycenter=s/i,e.weight=i,e.i=Math.min(r.i,e.i),r.merged=!0},lk=(e,r,t,s)=>{const i=b2(e,x=>{const S=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return s?!S&&x.hasOwnProperty("barycenter"):S||x.hasOwnProperty("barycenter")}),c=i.lhs,l=i.rhs.sort((x,S)=>-x.i- -S.i),h=[];let v=0,m=0,g=0;c==null||c.sort(fk(!!r,!!t)),g=yO(h,l,g),c==null||c.forEach(x=>{var S;g+=(S=x.vs)===null||S===void 0?void 0:S.length,h.push(x.vs),v+=x.barycenter*x.weight,m+=x.weight,g=yO(h,l,g)});const O={vs:h.flat()};return m&&(O.barycenter=v/m,O.weight=m),O},yO=(e,r,t)=>{let s=t,i;for(;r.length&&(i=r[r.length-1]).i<=s;)r.pop(),e==null||e.push(i.vs),s++;return s},fk=(e,r)=>(t,s)=>{if(t.fixorder!==void 0&&s.fixorder!==void 0)return t.fixorder-s.fixorder;if(t.barycenter<s.barycenter)return-1;if(t.barycenter>s.barycenter)return 1;if(r&&t.order!==void 0&&s.order!==void 0){if(t.order<s.order)return-1;if(t.order>s.order)return 1}return e?s.i-t.i:t.i-s.i},b1=(e,r,t,s,i,c)=>{var l,h,v,m;let g=e.children(r);const O=e.node(r),x=O?O.borderLeft:void 0,S=O?O.borderRight:void 0,N={};x&&(g=g==null?void 0:g.filter(V=>V!==x&&V!==S));const j=ak(e,g||[]);j==null||j.forEach(V=>{var ce;if(!((ce=e.children(V.v))===null||ce===void 0)&&ce.length){const _e=b1(e,V.v,t,s,c);N[V.v]=_e,_e.hasOwnProperty("barycenter")&&pk(V,_e)}});const M=uk(j,t);dk(M,N),(l=M.filter(V=>V.vs.length>0))===null||l===void 0||l.forEach(V=>{const ce=e.node(V.vs[0]);ce&&(V.fixorder=ce.fixorder,V.order=ce.order)});const C=lk(M,s,i,c);if(x&&(C.vs=[x,C.vs,S].flat(),!((h=e.predecessors(x))===null||h===void 0)&&h.length)){const V=e.node(((v=e.predecessors(x))===null||v===void 0?void 0:v[0])||""),ce=e.node(((m=e.predecessors(S))===null||m===void 0?void 0:m[0])||"");C.hasOwnProperty("barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+V.order+ce.order)/(C.weight+2),C.weight+=2}return C},dk=(e,r)=>{e==null||e.forEach(t=>{var s;const i=(s=t.vs)===null||s===void 0?void 0:s.map(c=>r[c]?r[c].vs:c);t.vs=i.flat()})},pk=(e,r)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+r.barycenter*r.weight)/(e.weight+r.weight),e.weight+=r.weight):(e.barycenter=r.barycenter,e.weight=r.weight)},hk=(e,r)=>{const t=u1(e),s=[],i=[];for(let g=1;g<t+1;g++)s.push(g);for(let g=t-1;g>-1;g--)i.push(g);const c=gO(e,s,"inEdges"),l=gO(e,i,"outEdges");let h=hO(e);tm(e,h);let v=Number.POSITIVE_INFINITY,m;for(let g=0,O=0;O<4;++g,++O){mO(g%2?c:l,g%4>=2,!1,r),h=qf(e);const x=vO(e,h);x<v&&(O=0,m=Oh(h),v=x)}h=hO(e),tm(e,h);for(let g=0,O=0;O<4;++g,++O){mO(g%2?c:l,g%4>=2,!0,r),h=qf(e);const x=vO(e,h);x<v&&(O=0,m=Oh(h),v=x)}tm(e,m)},gO=(e,r,t)=>r.map(s=>nk(e,s,t)),mO=(e,r,t,s)=>{const i=new Sa;e==null||e.forEach(c=>{var l;const h=c.graph().root,v=b1(c,h,i,r,t,s);for(let m=0;m<((l=v.vs)===null||l===void 0?void 0:l.length);m++){const g=c.node(v.vs[m]);g&&(g.order=m)}ik(c,i,v.vs)})},tm=(e,r)=>{r==null||r.forEach(t=>{t==null||t.forEach((s,i)=>{e.node(s).order=i})})};class vk extends il{}const yk=(e,r)=>{const t={},s=(i,c)=>{let l=0,h=0;const v=i.length,m=c==null?void 0:c[(c==null?void 0:c.length)-1];return c==null||c.forEach((g,O)=>{var x;const S=mk(e,g),N=S?e.node(S).order:v;(S||g===m)&&((x=c.slice(h,O+1))===null||x===void 0||x.forEach(j=>{var M;(M=e.predecessors(j))===null||M===void 0||M.forEach(C=>{var V;const ce=e.node(C),_e=ce.order;(_e<l||N<_e)&&!(ce.dummy&&(!((V=e.node(j))===null||V===void 0)&&V.dummy))&&_1(t,C,j)})}),h=O+1,l=N)}),c};return r!=null&&r.length&&r.reduce(s),t},gk=(e,r)=>{const t={};function s(h,v,m,g,O){var x,S;let N;for(let j=v;j<m;j++)N=h[j],!((x=e.node(N))===null||x===void 0)&&x.dummy&&((S=e.predecessors(N))===null||S===void 0||S.forEach(M=>{const C=e.node(M);C.dummy&&(C.order<g||C.order>O)&&_1(t,M,N)}))}function i(h){return JSON.stringify(h.slice(1))}function c(h,v){const m=i(h);v.get(m)||(s(...h),v.set(m,!0))}const l=(h,v)=>{let m=-1,g,O=0;const x=new Map;return v==null||v.forEach((S,N)=>{var j;if(((j=e.node(S))===null||j===void 0?void 0:j.dummy)==="border"){const M=e.predecessors(S)||[];M.length&&(g=e.node(M[0]).order,c([v,O,N,m,g],x),O=N,m=g)}c([v,O,v.length,g,h.length],x)}),v};return r!=null&&r.length&&r.reduce(l),t},mk=(e,r)=>{var t,s;if(!((t=e.node(r))===null||t===void 0)&&t.dummy)return(s=e.predecessors(r))===null||s===void 0?void 0:s.find(i=>e.node(i).dummy)},_1=(e,r,t)=>{let s=r,i=t;if(s>i){const l=s;s=i,i=l}let c=e[s];c||(e[s]=c={}),c[i]=!0},bk=(e,r,t)=>{let s=r,i=t;if(s>i){const c=r;s=i,i=c}return!!e[s]},_k=(e,r,t,s)=>{const i={},c={},l={};return r==null||r.forEach(h=>{h==null||h.forEach((v,m)=>{i[v]=v,c[v]=v,l[v]=m})}),r==null||r.forEach(h=>{let v=-1;h==null||h.forEach(m=>{let g=s(m);if(g.length){g=g.sort((x,S)=>l[x]-l[S]);const O=(g.length-1)/2;for(let x=Math.floor(O),S=Math.ceil(O);x<=S;++x){const N=g[x];c[m]===m&&v<l[N]&&!bk(t,m,N)&&(c[N]=m,c[m]=i[m]=i[N],v=l[N])}}})}),{root:i,align:c}},Ek=(e,r,t,s,i)=>{var c;const l={},h=Ok(e,r,t,i),v=i?"borderLeft":"borderRight",m=(x,S)=>{let N=h.nodes(),j=N.pop();const M={};for(;j;)M[j]?x(j):(M[j]=!0,N.push(j),N=N.concat(S(j))),j=N.pop()},g=x=>{l[x]=(h.inEdges(x)||[]).reduce((S,N)=>Math.max(S,(l[N.v]||0)+h.edge(N)),0)},O=x=>{const S=(h.outEdges(x)||[]).reduce((j,M)=>Math.min(j,(l[M.w]||0)-h.edge(M)),Number.POSITIVE_INFINITY),N=e.node(x);S!==Number.POSITIVE_INFINITY&&N.borderType!==v&&(l[x]=Math.max(l[x],S))};return m(g,h.predecessors.bind(h)),m(O,h.successors.bind(h)),(c=Object.values(s))===null||c===void 0||c.forEach(x=>{l[x]=l[t[x]]}),l},Ok=(e,r,t,s)=>{const i=new vk,c=e.graph(),l=Tk(c.nodesep,c.edgesep,s);return r==null||r.forEach(h=>{let v;h==null||h.forEach(m=>{const g=t[m];if(i.setNode(g),v){const O=t[v],x=i.edgeFromArgs(O,g);i.setEdge(O,g,Math.max(l(e,m,v),x||0))}v=m})}),i},wk=(e,r)=>tb(Object.values(r),t=>{var s;let i=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;return(s=Object.keys(t))===null||s===void 0||s.forEach(l=>{const h=t[l],v=Ak(e,l)/2;i=Math.max(h+v,i),c=Math.min(h-v,c)}),i-c});function xk(e,r){const t=Object.values(r),s=pO(t),i=Nm(t);["u","d"].forEach(c=>{["l","r"].forEach(l=>{const h=c+l,v=e[h];let m;if(v===r)return;const g=Object.values(v);m=l==="l"?s-pO(g):i-Nm(g),m&&(e[h]={},Object.keys(v).forEach(O=>{e[h][O]=v[O]+m}))})})}const Sk=(e,r)=>{const t={};return Object.keys(e.ul).forEach(s=>{if(r)t[s]=e[r.toLowerCase()][s];else{const i=Object.values(e).map(c=>c[s]);t[s]=(i[0]+i[1])/2}}),t},Tk=(e,r,t)=>(s,i,c)=>{const l=s.node(i),h=s.node(c);let v=0,m;if(v+=l.width/2,l.hasOwnProperty("labelpos"))switch((l.labelpos||"").toLowerCase()){case"l":m=-l.width/2;break;case"r":m=l.width/2;break}if(m&&(v+=t?m:-m),m=0,v+=(l.dummy?r:e)/2,v+=(h.dummy?r:e)/2,v+=h.width/2,h.labelpos)switch((h.labelpos||"").toLowerCase()){case"l":m=h.width/2;break;case"r":m=-h.width/2;break}return m&&(v+=t?m:-m),m=0,v},Ak=(e,r)=>e.node(r).width||0,Pk=e=>{const r=qf(e),t=e.graph().ranksep;let s=0;r==null||r.forEach(i=>{const c=i.map(h=>e.node(h).height),l=Math.max(...c,0);i==null||i.forEach(h=>{e.node(h).y=s+l/2}),s+=l+t})},Nk=e=>{const r=qf(e),t=Object.assign(yk(e,r),gk(e,r)),s={};let i=[];["u","d"].forEach(l=>{i=l==="u"?r:Object.values(r).reverse(),["l","r"].forEach(h=>{h==="r"&&(i=i.map(O=>Object.values(O).reverse()));const v=(l==="u"?e.predecessors:e.successors).bind(e),m=_k(e,i,t,v),g=Ek(e,i,m.root,m.align,h==="r");h==="r"&&Object.keys(g).forEach(O=>g[O]=-g[O]),s[l+h]=g})});const c=wk(e,s);return c&&xk(s,c),Sk(s,e.graph().align)},jk=e=>{var r;const t=a1(e);Pk(t);const s=Nk(t);(r=Object.keys(s))===null||r===void 0||r.forEach(i=>{t.node(i).x=s[i]})},Mk=(e,r)=>{const s=e.nodes().filter(l=>{var h;return!(!((h=e.children(l))===null||h===void 0)&&h.length)}).map(l=>e.node(l).rank),i=Math.max(...s),c=[];for(let l=0;l<i+1;l++)c[l]=[];r==null||r.forEach(l=>{const h=e.node(l);!h||h!=null&&h.dummy||isNaN(h.rank)||(h.fixorder=c[h.rank].length,c[h.rank].push(l))})},Rk=(e,r)=>{const t=r&&r.debugTiming?s1:c1;t("layout",()=>{r&&!r.keepNodeOrder&&r.prevGraph&&t("  inheritOrder",()=>{Dk(e,r.prevGraph)});const s=t("  buildLayoutGraph",()=>zk(e));r&&r.edgeLabelSpace===!1||t("  makeSpaceForEdgeLabels",()=>{Hk(s)});try{t("  runLayout",()=>{Ck(s,t,r)})}catch(i){if(i.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,i);return}throw i}t("  updateInputGraph",()=>{kk(e,s)})})},Ck=(e,r,t)=>{r("    removeSelfEdges",()=>{Jk(e)}),r("    acyclic",()=>{nO.run(e)}),r("    nestingGraph.run",()=>{cO.run(e)}),r("    rank",()=>{F2(a1(e))}),r("    injectEdgeLabelProxies",()=>{Xk(e)}),r("    removeEmptyRanks",()=>{m2(e)}),r("    nestingGraph.cleanup",()=>{cO.cleanup(e)}),r("    normalizeRanks",()=>{g2(e)}),r("    assignRankMinMax",()=>{Vk(e)}),r("    removeEdgeLabelProxies",()=>{$k(e)}),r("    normalize.run",()=>{aO.run(e)}),r("    parentDummyChains",()=>{H2(e)}),r("    addBorderSegments",()=>{Y2(e)}),t&&t.keepNodeOrder&&r("    initDataOrder",()=>{Mk(e,t.nodeOrder)}),r("    order",()=>{hk(e,t==null?void 0:t.keepNodeOrder)}),r("    insertSelfEdges",()=>{Qk(e)}),r("    adjustCoordinateSystem",()=>{dO.adjust(e)}),r("    position",()=>{jk(e)}),r("    positionSelfEdges",()=>{eI(e)}),r("    removeBorderNodes",()=>{Zk(e)}),r("    normalize.undo",()=>{aO.undo(e)}),r("    fixupEdgeLabelCoords",()=>{Kk(e)}),r("    undoCoordinateSystem",()=>{dO.undo(e)}),r("    translateGraph",()=>{Wk(e)}),r("    assignNodeIntersects",()=>{Yk(e)}),r("    reversePoints",()=>{qk(e)}),r("    acyclic.undo",()=>{nO.undo(e)})},Dk=(e,r)=>{e.nodes().forEach(t=>{const s=e.node(t),i=r.node(t);i!==void 0?(s.fixorder=i._order,delete i._order):delete s.fixorder})},kk=(e,r)=>{e.nodes().forEach(t=>{var s;const i=e.node(t);if(i){const c=r.node(t);i.x=c.x,i.y=c.y,i._order=c.order,i._rank=c.rank,!((s=r.children(t))===null||s===void 0)&&s.length&&(i.width=c.width,i.height=c.height)}}),e.edges().forEach(t=>{const s=e.edge(t),i=r.edge(t);s.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(s.x=i.x,s.y=i.y)}),e.graph().width=r.graph().width,e.graph().height=r.graph().height},Ik=["nodesep","edgesep","ranksep","marginx","marginy"],Lk={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},rm=["acyclicer","ranker","rankdir","align"],Fk=["width","height","layer","fixorder"],Bk={width:0,height:0},Gk=["minlen","weight","width","height","labeloffset"],Uk={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},nm=["labelpos"],zk=e=>{const r=new Sa({multigraph:!0,compound:!0}),t=im(e.graph()),s={};return rm==null||rm.forEach(i=>{t[i]!==void 0&&(s[i]=t[i])}),r.setGraph(Object.assign({},Lk,om(t,Ik),s)),e.nodes().forEach(i=>{const c=im(e.node(i)),l=Object.assign(Object.assign({},Bk),c),h=om(l,Fk);r.setNode(i,h),r.setParent(i,e.parent(i))}),e.edges().forEach(i=>{const c=im(e.edge(i)),l={};nm==null||nm.forEach(h=>{c[h]!==void 0&&(l[h]=c[h])}),r.setEdgeObj(i,Object.assign({},Uk,om(c,Gk),l))}),r},Hk=e=>{const r=e.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,e.nodes().forEach(t=>{const s=e.node(t);isNaN(s.layer)||s.layer||(s.layer=0)}),e.edges().forEach(t=>{var s;const i=e.edge(t);i.minlen*=2,((s=i.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})},Xk=e=>{e.edges().forEach(r=>{const t=e.edge(r);if(t.width&&t.height){const s=e.node(r.v),i=e.node(r.w),c={e:r,rank:(i.rank-s.rank)/2+s.rank};al(e,"edge-proxy",c,"_ep")}})},Vk=e=>{let r=0;e.nodes().forEach(t=>{var s,i;const c=e.node(t);c.borderTop&&(c.minRank=(s=e.node(c.borderTop))===null||s===void 0?void 0:s.rank,c.maxRank=(i=e.node(c.borderBottom))===null||i===void 0?void 0:i.rank,r=Math.max(r,c.maxRank||-1/0))}),e.graph().maxRank=r},$k=e=>{e.nodes().forEach(r=>{const t=e.node(r);t.dummy==="edge-proxy"&&(e.edge(t.e).labelRank=t.rank,e.removeNode(r))})},Wk=e=>{let r,t=0,s,i=0;const c=e.graph(),l=c.marginx||0,h=c.marginy||0,v=m=>{if(!m)return;const g=m.x,O=m.y,x=m.width,S=m.height;!isNaN(g)&&!isNaN(x)&&(r===void 0&&(r=g-x/2),r=Math.min(r,g-x/2),t=Math.max(t,g+x/2)),!isNaN(O)&&!isNaN(S)&&(s===void 0&&(s=O-S/2),s=Math.min(s,O-S/2),i=Math.max(i,O+S/2))};e.nodes().forEach(m=>{v(e.node(m))}),e.edges().forEach(m=>{const g=e.edge(m);g!=null&&g.hasOwnProperty("x")&&v(g)}),r-=l,s-=h,e.nodes().forEach(m=>{const g=e.node(m);g&&(g.x-=r,g.y-=s)}),e.edges().forEach(m=>{var g;const O=e.edge(m);(g=O.points)===null||g===void 0||g.forEach(x=>{x.x-=r,x.y-=s}),O.hasOwnProperty("x")&&(O.x-=r),O.hasOwnProperty("y")&&(O.y-=s)}),c.width=t-r+l,c.height=i-s+h},Yk=e=>{e.edges().forEach(r=>{const t=e.edge(r),s=e.node(r.v),i=e.node(r.w);let c,l;t.points?(c=t.points[0],l=t.points[t.points.length-1]):(t.points=[],c=i,l=s),t.points.unshift(oO(s,c)),t.points.push(oO(i,l))})},Kk=e=>{e.edges().forEach(r=>{const t=e.edge(r);if(t!=null&&t.hasOwnProperty("x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})},qk=e=>{e.edges().forEach(r=>{var t;const s=e.edge(r);s.reversed&&((t=s.points)===null||t===void 0||t.reverse())})},Zk=e=>{e.nodes().forEach(r=>{var t,s,i;if(!((t=e.children(r))===null||t===void 0)&&t.length){const c=e.node(r),l=e.node(c.borderTop),h=e.node(c.borderBottom),v=e.node(c.borderLeft[((s=c.borderLeft)===null||s===void 0?void 0:s.length)-1]),m=e.node(c.borderRight[((i=c.borderRight)===null||i===void 0?void 0:i.length)-1]);c.width=Math.abs((m==null?void 0:m.x)-(v==null?void 0:v.x))||10,c.height=Math.abs((h==null?void 0:h.y)-(l==null?void 0:l.y))||10,c.x=((v==null?void 0:v.x)||0)+c.width/2,c.y=((l==null?void 0:l.y)||0)+c.height/2}}),e.nodes().forEach(r=>{var t;((t=e.node(r))===null||t===void 0?void 0:t.dummy)==="border"&&e.removeNode(r)})},Jk=e=>{e.edges().forEach(r=>{if(r.v===r.w){const t=e.node(r.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:r,label:e.edge(r)}),e.removeEdgeObj(r)}})},Qk=e=>{const r=qf(e);r==null||r.forEach(t=>{let s=0;t==null||t.forEach((i,c)=>{var l;const h=e.node(i);h.order=c+s,(l=h.selfEdges)===null||l===void 0||l.forEach(v=>{al(e,"selfedge",{width:v.label.width,height:v.label.height,rank:h.rank,order:c+ ++s,e:v.e,label:v.label},"_se")}),delete h.selfEdges})})},eI=e=>{e.nodes().forEach(r=>{const t=e.node(r);if(t.dummy==="selfedge"){const s=e.node(t.e.v),i=s.x+s.width/2,c=s.y,l=t.x-i,h=s.height/2;e.setEdgeObj(t.e,t.label),e.removeNode(r),t.label.points=[{x:i+2*l/3,y:c-h},{x:i+5*l/6,y:c-h},{y:c,x:i+l},{x:i+5*l/6,y:c+h},{x:i+2*l/3,y:c+h}],t.label.x=t.x,t.label.y=t.y}})},om=(e,r)=>{const t={};return r==null||r.forEach(s=>{e[s]!==void 0&&(t[s]=+e[s])}),t},im=(e={})=>{const r={};return Object.keys(e).forEach(t=>{r[t.toLowerCase()]=e[t]}),r},tI={layout:Rk,util:{time:s1,notime:c1}};class rI extends bD{constructor(r){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=t=>{const s=this,{nodes:i}=s,c=i.find(l=>l.id===t);return c?c.layout!==!1:!0},this.updateCfg(r)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var r,t,s,i;const c=this,{nodes:l,nodeSize:h,rankdir:v,combos:m,begin:g,radial:O,comboEdges:x=[],vedges:S=[]}=c;if(!l)return;const N=c.edges||[],j=new Sa({multigraph:!0,compound:!0});c.nodeMap={};const M={};l.forEach(I=>{c.nodeMap[I.id]=I,I.comboId&&(M[I.comboId]=M[I.comboId]||[],M[I.comboId].push(I.id))});let C=[];const V={};!((r=c.nodeOrder)===null||r===void 0)&&r.length?(c.nodeOrder.forEach(I=>{V[I]=!0,C.push(c.nodeMap[I])}),l.forEach(I=>{V[I.id]||C.push(I)})):C=l;let ce;h?XE(h)?ce=()=>h:ce=()=>[h,h]:ce=I=>I.size?XE(I.size)?I.size:Qw(I.size)?[I.size.width||40,I.size.height||40]:[I.size,I.size]:[40,40];const _e=VE(c.ranksep,50,c.ranksepFunc),fe=VE(c.nodesep,50,c.nodesepFunc);let z=fe,ee=_e;(v==="LR"||v==="RL")&&(z=_e,ee=fe),j.setDefaultEdgeLabel(()=>({})),j.setGraph(c);const $={};this.sortByCombo&&m&&m.forEach(I=>{if($[I.id]=I,I.collapsed){const pe=ce(I),De=ee(I),Q=z(I),se=pe[0]+2*Q,he=pe[1]+2*De;j.setNode(I.id,{width:se,height:he})}I.parentId&&($[I.parentId]||j.setNode(I.parentId,{}),j.setParent(I.id,I.parentId))}),C.filter(I=>I.layout!==!1).forEach(I=>{const pe=ce(I),De=ee(I),Q=z(I),se=pe[0]+2*Q,he=pe[1]+2*De,be=I.layer;Eh(be)?j.setNode(I.id,{width:se,height:he,layer:be}):j.setNode(I.id,{width:se,height:he}),this.sortByCombo&&I.comboId&&($[I.comboId]||($[I.comboId]={id:I.comboId},j.setNode(I.comboId,{})),j.setParent(I.id,I.comboId))}),N.forEach(I=>{const pe=Ic(I,"source"),De=Ic(I,"target");this.layoutNode(pe)&&this.layoutNode(De)&&j.setEdge(pe,De,{weight:I.weight||1})}),(t=x==null?void 0:x.concat(S||[]))===null||t===void 0||t.forEach(I=>{var pe,De;const{source:Q,target:se}=I,he=!((pe=$[Q])===null||pe===void 0)&&pe.collapsed?[Q]:M[Q]||[Q],be=!((De=$[se])===null||De===void 0)&&De.collapsed?[se]:M[se]||[se];he.forEach(te=>{be.forEach(ve=>{j.setEdge(te,ve,{weight:I.weight||1})})})});let L;!((s=c.preset)===null||s===void 0)&&s.nodes&&(L=new Sa({multigraph:!0,compound:!0}),c.preset.nodes.forEach(I=>{L==null||L.setNode(I.id,I)})),tI.layout(j,{prevGraph:L,edgeLabelSpace:c.edgeLabelSpace,keepNodeOrder:!!c.nodeOrder,nodeOrder:c.nodeOrder});const Y=[0,0];if(g){let I=1/0,pe=1/0;j.nodes().forEach(De=>{const Q=j.node(De);I>Q.x&&(I=Q.x),pe>Q.y&&(pe=Q.y)}),j.edges().forEach(De=>{var Q;(Q=j.edge(De).points)===null||Q===void 0||Q.forEach(he=>{I>he.x&&(I=he.x),pe>he.y&&(pe=he.y)})}),Y[0]=g[0]-I,Y[1]=g[1]-pe}const K=v==="LR"||v==="RL";if(O){const{focusNode:I,ranksep:pe,getRadialPos:De}=this,Q=_D(I)?I:I==null?void 0:I.id,se=Q?(i=j.node(Q))===null||i===void 0?void 0:i._rank:0,he=[],be=K?"y":"x",te=K?"height":"width";let ve=1/0,Fe=-1/0;j.nodes().forEach(oe=>{const me=j.node(oe);if(!c.nodeMap[oe])return;const qe=fe(c.nodeMap[oe]);if(se===0)he[me._rank]||(he[me._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),he[me._rank].nodes.push(oe),he[me._rank].totalWidth+=qe*2+me[te],he[me._rank].maxSize<Math.max(me.width,me.height)&&(he[me._rank].maxSize=Math.max(me.width,me.height));else{const Ct=me._rank-se;if(Ct===0)he[Ct]||(he[Ct]={nodes:[],totalWidth:0,maxSize:-1/0}),he[Ct].nodes.push(oe),he[Ct].totalWidth+=qe*2+me[te],he[Ct].maxSize<Math.max(me.width,me.height)&&(he[Ct].maxSize=Math.max(me.width,me.height));else{const zt=Math.abs(Ct);he[zt]||(he[zt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),he[zt].totalWidth+=qe*2+me[te],he[zt].maxSize<Math.max(me.width,me.height)&&(he[zt].maxSize=Math.max(me.width,me.height)),Ct<0?he[zt].left.push(oe):he[zt].right.push(oe)}}const gt=me[be]-me[te]/2-qe,et=me[be]+me[te]/2+qe;gt<ve&&(ve=gt),et>Fe&&(Fe=et)});let Ze=pe||50;const ht={},Ft=(Fe-ve)/.9,bt=[(ve+Fe-Ft)*.5,(ve+Fe+Ft)*.5],xt=(oe,me,qe=-1/0,gt=[0,1])=>{let et=qe;return oe.forEach(Ct=>{const zt=j.node(Ct);ht[Ct]=me;const{x:Zt,y:Gt}=De(zt[be],bt,Ft,me,gt);if(!c.nodeMap[Ct])return;c.nodeMap[Ct].x=Zt+Y[0],c.nodeMap[Ct].y=Gt+Y[1],c.nodeMap[Ct]._order=zt._order;const ze=_e(c.nodeMap[Ct]);et<ze&&(et=ze)}),et};let tr=!0;const Oe=0;he.forEach(oe=>{var me,qe,gt,et,Ct,zt,Zt;if(!(!((me=oe==null?void 0:oe.nodes)===null||me===void 0)&&me.length)&&!(!((qe=oe==null?void 0:oe.left)===null||qe===void 0)&&qe.length)&&!(!((gt=oe==null?void 0:oe.right)===null||gt===void 0)&&gt.length))return;if(tr&&oe.nodes.length===1){const ze=oe.nodes[0];if(!c.nodeMap[ze])return;c.nodeMap[ze].x=Y[0],c.nodeMap[ze].y=Y[1],ht[oe.nodes[0]]=0,Ze=_e(c.nodeMap[ze]),tr=!1;return}Ze=Math.max(Ze,oe.totalWidth/(2*Math.PI));let Gt=-1/0;if(se===0||!((et=oe.nodes)===null||et===void 0)&&et.length)Gt=xt(oe.nodes,Ze,Gt,[0,1]);else{const ze=((Ct=oe.left)===null||Ct===void 0?void 0:Ct.length)/(((zt=oe.left)===null||zt===void 0?void 0:zt.length)+((Zt=oe.right)===null||Zt===void 0?void 0:Zt.length));Gt=xt(oe.left,Ze,Gt,[0,ze]),Gt=xt(oe.right,Ze,Gt,[ze+.05,1])}Ze+=Gt,tr=!1,Oe-oe.maxSize}),j.edges().forEach(oe=>{var me,qe,gt;const et=j.edge(oe),Ct=N.findIndex(zt=>{const Zt=Ic(zt,"source"),Gt=Ic(zt,"target");return Zt===oe.v&&Gt===oe.w});if(!(Ct<=-1)&&c.edgeLabelSpace&&c.controlPoints&&N[Ct].type!=="loop"){const zt=be==="x"?"y":"x",Zt=(me=et==null?void 0:et.points)===null||me===void 0?void 0:me.slice(1,et.points.length-1),Gt=[],ze=(qe=j.node(oe.v))===null||qe===void 0?void 0:qe[zt],Wt=ze-((gt=j.node(oe.w))===null||gt===void 0?void 0:gt[zt]),xe=ht[oe.v],Ht=xe-ht[oe.w];Zt==null||Zt.forEach(yr=>{const G=(yr[zt]-ze)/Wt*Ht+xe,pr=De(yr[be],bt,Ft,G);Gt.push({x:pr.x+Y[0],y:pr.y+Y[1]})}),N[Ct].controlPoints=Gt}})}else{const I=new Set,De=v==="BT"||v==="RL"?(be,te)=>te-be:(be,te)=>be-te;j.nodes().forEach(be=>{const te=j.node(be);if(!te)return;let ve=this.nodeMap[be];ve||(ve=m==null?void 0:m.find(Fe=>Fe.id===be)),ve&&(ve.x=te.x+Y[0],ve.y=te.y+Y[1],ve._order=te._order,I.add(K?ve.x:ve.y))});const Q=Array.from(I).sort(De),se=K?(be,te)=>be.x!==te.x:(be,te)=>be.y!==te.y,he=K?(be,te,ve)=>{const Fe=Math.max(te.y,ve.y),Ze=Math.min(te.y,ve.y);return be.filter(ht=>ht.y<=Fe&&ht.y>=Ze)}:(be,te,ve)=>{const Fe=Math.max(te.x,ve.x),Ze=Math.min(te.x,ve.x);return be.filter(ht=>ht.x<=Fe&&ht.x>=Ze)};j.edges().forEach(be=>{var te;const ve=j.edge(be),Fe=N.findIndex(Ze=>{const ht=Ic(Ze,"source"),Ft=Ic(Ze,"target");return ht===be.v&&Ft===be.w});if(!(Fe<=-1)&&c.edgeLabelSpace&&c.controlPoints&&N[Fe].type!=="loop"){(te=ve==null?void 0:ve.points)===null||te===void 0||te.forEach(Ft=>{Ft.x+=Y[0],Ft.y+=Y[1]});const Ze=c.nodeMap[be.v],ht=c.nodeMap[be.w];N[Fe].controlPoints=nI(ve==null?void 0:ve.points,Ze,ht,Q,K,se,he)}})}return c.onLayoutEnd&&c.onLayoutEnd(),{nodes:l,edges:N}}getRadialPos(r,t,s,i,c=[0,1]){let l=(r-t[0])/s;l=l*(c[1]-c[0])+c[0];const h=l*2*Math.PI;return{x:Math.cos(h)*i,y:Math.sin(h)*i}}getType(){return"dagre"}}const nI=(e,r,t,s,i,c,l)=>{let h=(e==null?void 0:e.slice(1,e.length-1))||[];if(r&&t){let{x:v,y:m}=r,{x:g,y:O}=t;if(i&&(v=r.y,m=r.x,g=t.y,O=t.x),O!==m&&v!==g){const x=s.indexOf(m),S=s[x+1];if(S){const M=h[0],C=i?{x:(m+S)/2,y:(M==null?void 0:M.y)||g}:{x:(M==null?void 0:M.x)||g,y:(m+S)/2};(!M||c(M,C))&&h.unshift(C)}const N=s.indexOf(O),j=Math.abs(N-x);if(j===1)h=l(h,r,t),h.length||h.push(i?{x:(m+O)/2,y:v}:{x:v,y:(m+O)/2});else if(j>1){const M=s[N-1];if(M){const C=h[h.length-1],V=i?{x:(O+M)/2,y:(C==null?void 0:C.y)||g}:{x:(C==null?void 0:C.x)||v,y:(O+M)/2};(!C||c(C,V))&&h.push(V)}}}}return h};var bO,_O,EO,OO;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(bO||(bO={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(_O||(_O={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(EO||(EO={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(OO||(OO={}));var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rb(e,r){return e(r={exports:{}},r.exports),r.exports}var oI=function(){this.__data__=[],this.size=0},ul=function(e,r){return e===r||e!=e&&r!=r},Ih=function(e,r){for(var t=e.length;t--;)if(ul(e[t][0],r))return t;return-1},iI=Array.prototype.splice,aI=function(e){var r=this.__data__,t=Ih(r,e);return!(t<0)&&(t==r.length-1?r.pop():iI.call(r,t,1),--this.size,!0)},uI=function(e){var r=this.__data__,t=Ih(r,e);return t<0?void 0:r[t][1]},sI=function(e){return Ih(this.__data__,e)>-1},cI=function(e,r){var t=this.__data__,s=Ih(t,e);return s<0?(++this.size,t.push([e,r])):t[s][1]=r,this};function Fc(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Fc.prototype.clear=oI,Fc.prototype.delete=aI,Fc.prototype.get=uI,Fc.prototype.has=sI,Fc.prototype.set=cI;var Lh=Fc,lI=function(){this.__data__=new Lh,this.size=0},fI=function(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t},dI=function(e){return this.__data__.get(e)},pI=function(e){return this.__data__.has(e)},E1=typeof nh=="object"&&nh&&nh.Object===Object&&nh,hI=typeof self=="object"&&self&&self.Object===Object&&self,Ei=E1||hI||Function("return this")(),ai=Ei.Symbol,O1=Object.prototype,vI=O1.hasOwnProperty,yI=O1.toString,Rf=ai?ai.toStringTag:void 0,gI=function(e){var r=vI.call(e,Rf),t=e[Rf];try{e[Rf]=void 0;var s=!0}catch{}var i=yI.call(e);return s&&(r?e[Rf]=t:delete e[Rf]),i},mI=Object.prototype.toString,bI=function(e){return mI.call(e)},wO=ai?ai.toStringTag:void 0,gu=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":wO&&wO in Object(e)?gI(e):bI(e)},Io=function(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")},xO,td=function(e){if(!Io(e))return!1;var r=gu(e);return r=="[object Function]"||r=="[object GeneratorFunction]"||r=="[object AsyncFunction]"||r=="[object Proxy]"},am=Ei["__core-js_shared__"],SO=(xO=/[^.]+$/.exec(am&&am.keys&&am.keys.IE_PROTO||""))?"Symbol(src)_1."+xO:"",_I=function(e){return!!SO&&SO in e},EI=Function.prototype.toString,bs=function(e){if(e!=null){try{return EI.call(e)}catch{}try{return e+""}catch{}}return""},OI=/^\[object .+?Constructor\]$/,wI=Function.prototype,xI=Object.prototype,SI=wI.toString,TI=xI.hasOwnProperty,AI=RegExp("^"+SI.call(TI).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),PI=function(e){return!(!Io(e)||_I(e))&&(td(e)?AI:OI).test(bs(e))},NI=function(e,r){return e==null?void 0:e[r]},_s=function(e,r){var t=NI(e,r);return PI(t)?t:void 0},Zf=_s(Ei,"Map"),Jf=_s(Object,"create"),jI=function(){this.__data__=Jf?Jf(null):{},this.size=0},MI=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},RI=Object.prototype.hasOwnProperty,CI=function(e){var r=this.__data__;if(Jf){var t=r[e];return t==="__lodash_hash_undefined__"?void 0:t}return RI.call(r,e)?r[e]:void 0},DI=Object.prototype.hasOwnProperty,kI=function(e){var r=this.__data__;return Jf?r[e]!==void 0:DI.call(r,e)},II=function(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Jf&&r===void 0?"__lodash_hash_undefined__":r,this};function Bc(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Bc.prototype.clear=jI,Bc.prototype.delete=MI,Bc.prototype.get=CI,Bc.prototype.has=kI,Bc.prototype.set=II;var TO=Bc,LI=function(){this.size=0,this.__data__={hash:new TO,map:new(Zf||Lh),string:new TO}},FI=function(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null},Fh=function(e,r){var t=e.__data__;return FI(r)?t[typeof r=="string"?"string":"hash"]:t.map},BI=function(e){var r=Fh(this,e).delete(e);return this.size-=r?1:0,r},GI=function(e){return Fh(this,e).get(e)},UI=function(e){return Fh(this,e).has(e)},zI=function(e,r){var t=Fh(this,e),s=t.size;return t.set(e,r),this.size+=t.size==s?0:1,this};function Gc(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Gc.prototype.clear=LI,Gc.prototype.delete=BI,Gc.prototype.get=GI,Gc.prototype.has=UI,Gc.prototype.set=zI;var Bh=Gc,HI=function(e,r){var t=this.__data__;if(t instanceof Lh){var s=t.__data__;if(!Zf||s.length<199)return s.push([e,r]),this.size=++t.size,this;t=this.__data__=new Bh(s)}return t.set(e,r),this.size=t.size,this};function Uc(e){var r=this.__data__=new Lh(e);this.size=r.size}Uc.prototype.clear=lI,Uc.prototype.delete=fI,Uc.prototype.get=dI,Uc.prototype.has=pI,Uc.prototype.set=HI;var Wc=Uc,nb=function(e,r){for(var t=-1,s=e==null?0:e.length;++t<s&&r(e[t],t,e)!==!1;);return e},wh=function(){try{var e=_s(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Gh=function(e,r,t){r=="__proto__"&&wh?wh(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t},XI=Object.prototype.hasOwnProperty,Uh=function(e,r,t){var s=e[r];XI.call(e,r)&&ul(s,t)&&(t!==void 0||r in e)||Gh(e,r,t)},rd=function(e,r,t,s){var i=!t;t||(t={});for(var c=-1,l=r.length;++c<l;){var h=r[c],v=s?s(t[h],e[h],h,t,e):void 0;v===void 0&&(v=e[h]),i?Gh(t,h,v):Uh(t,h,v)}return t},VI=function(e,r){for(var t=-1,s=Array(e);++t<e;)s[t]=r(t);return s},bi=function(e){return e!=null&&typeof e=="object"},AO=function(e){return bi(e)&&gu(e)=="[object Arguments]"},w1=Object.prototype,$I=w1.hasOwnProperty,WI=w1.propertyIsEnumerable,Qc=AO(function(){return arguments}())?AO:function(e){return bi(e)&&$I.call(e,"callee")&&!WI.call(e,"callee")},Pn=Array.isArray,YI=function(){return!1},hs=rb(function(e,r){var t=r&&!r.nodeType&&r,s=t&&e&&!e.nodeType&&e,i=s&&s.exports===t?Ei.Buffer:void 0,c=(i?i.isBuffer:void 0)||YI;e.exports=c}),KI=/^(?:0|[1-9]\d*)$/,zh=function(e,r){var t=typeof e;return!!(r=r??9007199254740991)&&(t=="number"||t!="symbol"&&KI.test(e))&&e>-1&&e%1==0&&e<r},ob=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},dn={};dn["[object Float32Array]"]=dn["[object Float64Array]"]=dn["[object Int8Array]"]=dn["[object Int16Array]"]=dn["[object Int32Array]"]=dn["[object Uint8Array]"]=dn["[object Uint8ClampedArray]"]=dn["[object Uint16Array]"]=dn["[object Uint32Array]"]=!0,dn["[object Arguments]"]=dn["[object Array]"]=dn["[object ArrayBuffer]"]=dn["[object Boolean]"]=dn["[object DataView]"]=dn["[object Date]"]=dn["[object Error]"]=dn["[object Function]"]=dn["[object Map]"]=dn["[object Number]"]=dn["[object Object]"]=dn["[object RegExp]"]=dn["[object Set]"]=dn["[object String]"]=dn["[object WeakMap]"]=!1;var qI=function(e){return bi(e)&&ob(e.length)&&!!dn[gu(e)]},Hh=function(e){return function(r){return e(r)}},el=rb(function(e,r){var t=r&&!r.nodeType&&r,s=t&&e&&!e.nodeType&&e,i=s&&s.exports===t&&E1.process,c=function(){try{var l=s&&s.require&&s.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();e.exports=c}),PO=el&&el.isTypedArray,nd=PO?Hh(PO):qI,ZI=Object.prototype.hasOwnProperty,x1=function(e,r){var t=Pn(e),s=!t&&Qc(e),i=!t&&!s&&hs(e),c=!t&&!s&&!i&&nd(e),l=t||s||i||c,h=l?VI(e.length,String):[],v=h.length;for(var m in e)!r&&!ZI.call(e,m)||l&&(m=="length"||i&&(m=="offset"||m=="parent")||c&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||zh(m,v))||h.push(m);return h},JI=Object.prototype,Xh=function(e){var r=e&&e.constructor;return e===(typeof r=="function"&&r.prototype||JI)},S1=function(e,r){return function(t){return e(r(t))}},QI=S1(Object.keys,Object),eL=Object.prototype.hasOwnProperty,ib=function(e){if(!Xh(e))return QI(e);var r=[];for(var t in Object(e))eL.call(e,t)&&t!="constructor"&&r.push(t);return r},Aa=function(e){return e!=null&&ob(e.length)&&!td(e)},mu=function(e){return Aa(e)?x1(e):ib(e)},tL=function(e,r){return e&&rd(r,mu(r),e)},rL=function(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r},nL=Object.prototype.hasOwnProperty,oL=function(e){if(!Io(e))return rL(e);var r=Xh(e),t=[];for(var s in e)(s!="constructor"||!r&&nL.call(e,s))&&t.push(s);return t},Es=function(e){return Aa(e)?x1(e,!0):oL(e)},iL=function(e,r){return e&&rd(r,Es(r),e)},T1=rb(function(e,r){var t=r&&!r.nodeType&&r,s=t&&e&&!e.nodeType&&e,i=s&&s.exports===t?Ei.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(l,h){if(h)return l.slice();var v=l.length,m=c?c(v):new l.constructor(v);return l.copy(m),m}}),A1=function(e,r){var t=-1,s=e.length;for(r||(r=Array(s));++t<s;)r[t]=e[t];return r},P1=function(e,r){for(var t=-1,s=e==null?0:e.length,i=0,c=[];++t<s;){var l=e[t];r(l,t,e)&&(c[i++]=l)}return c},N1=function(){return[]},aL=Object.prototype.propertyIsEnumerable,NO=Object.getOwnPropertySymbols,ab=NO?function(e){return e==null?[]:(e=Object(e),P1(NO(e),function(r){return aL.call(e,r)}))}:N1,uL=function(e,r){return rd(e,ab(e),r)},ub=function(e,r){for(var t=-1,s=r.length,i=e.length;++t<s;)e[i+t]=r[t];return e},Vh=S1(Object.getPrototypeOf,Object),j1=Object.getOwnPropertySymbols?function(e){for(var r=[];e;)ub(r,ab(e)),e=Vh(e);return r}:N1,sL=function(e,r){return rd(e,j1(e),r)},M1=function(e,r,t){var s=r(e);return Pn(e)?s:ub(s,t(e))},jm=function(e){return M1(e,mu,ab)},cL=function(e){return M1(e,Es,j1)},Mm=_s(Ei,"DataView"),Rm=_s(Ei,"Promise"),Yc=_s(Ei,"Set"),Cm=_s(Ei,"WeakMap"),lL=bs(Mm),fL=bs(Zf),dL=bs(Rm),pL=bs(Yc),hL=bs(Cm),ls=gu;(Mm&&ls(new Mm(new ArrayBuffer(1)))!="[object DataView]"||Zf&&ls(new Zf)!="[object Map]"||Rm&&ls(Rm.resolve())!="[object Promise]"||Yc&&ls(new Yc)!="[object Set]"||Cm&&ls(new Cm)!="[object WeakMap]")&&(ls=function(e){var r=gu(e),t=r=="[object Object]"?e.constructor:void 0,s=t?bs(t):"";if(s)switch(s){case lL:return"[object DataView]";case fL:return"[object Map]";case dL:return"[object Promise]";case pL:return"[object Set]";case hL:return"[object WeakMap]"}return r});var vs=ls,vL=Object.prototype.hasOwnProperty,yL=function(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&vL.call(e,"index")&&(t.index=e.index,t.input=e.input),t},xh=Ei.Uint8Array,sb=function(e){var r=new e.constructor(e.byteLength);return new xh(r).set(new xh(e)),r},gL=function(e,r){var t=r?sb(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)},mL=/\w*$/,bL=function(e){var r=new e.constructor(e.source,mL.exec(e));return r.lastIndex=e.lastIndex,r},jO=ai?ai.prototype:void 0,MO=jO?jO.valueOf:void 0,_L=function(e){return MO?Object(MO.call(e)):{}},R1=function(e,r){var t=r?sb(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)},EL=function(e,r,t){var s=e.constructor;switch(r){case"[object ArrayBuffer]":return sb(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return gL(e,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return R1(e,t);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return bL(e);case"[object Set]":return new s;case"[object Symbol]":return _L(e)}},RO=Object.create,C1=function(){function e(){}return function(r){if(!Io(r))return{};if(RO)return RO(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),D1=function(e){return typeof e.constructor!="function"||Xh(e)?{}:C1(Vh(e))},OL=function(e){return bi(e)&&vs(e)=="[object Map]"},CO=el&&el.isMap,wL=CO?Hh(CO):OL,xL=function(e){return bi(e)&&vs(e)=="[object Set]"},DO=el&&el.isSet,SL=DO?Hh(DO):xL,an={};an["[object Arguments]"]=an["[object Array]"]=an["[object ArrayBuffer]"]=an["[object DataView]"]=an["[object Boolean]"]=an["[object Date]"]=an["[object Float32Array]"]=an["[object Float64Array]"]=an["[object Int8Array]"]=an["[object Int16Array]"]=an["[object Int32Array]"]=an["[object Map]"]=an["[object Number]"]=an["[object Object]"]=an["[object RegExp]"]=an["[object Set]"]=an["[object String]"]=an["[object Symbol]"]=an["[object Uint8Array]"]=an["[object Uint8ClampedArray]"]=an["[object Uint16Array]"]=an["[object Uint32Array]"]=!0,an["[object Error]"]=an["[object Function]"]=an["[object WeakMap]"]=!1;var k1=function e(r,t,s,i,c,l){var h,v=1&t,m=2&t,g=4&t;if(s&&(h=c?s(r,i,c,l):s(r)),h!==void 0)return h;if(!Io(r))return r;var O=Pn(r);if(O){if(h=yL(r),!v)return A1(r,h)}else{var x=vs(r),S=x=="[object Function]"||x=="[object GeneratorFunction]";if(hs(r))return T1(r,v);if(x=="[object Object]"||x=="[object Arguments]"||S&&!c){if(h=m||S?{}:D1(r),!v)return m?sL(r,iL(h,r)):uL(r,tL(h,r))}else{if(!an[x])return c?r:{};h=EL(r,x,v)}}l||(l=new Wc);var N=l.get(r);if(N)return N;l.set(r,h),SL(r)?r.forEach(function(M){h.add(e(M,t,s,M,r,l))}):wL(r)&&r.forEach(function(M,C){h.set(C,e(M,t,s,C,r,l))});var j=O?void 0:(g?m?cL:jm:m?Es:mu)(r);return nb(j||r,function(M,C){j&&(M=r[C=M]),Uh(h,C,e(M,t,s,C,r,l))}),h},TL=function(e){return k1(e,4)},cb=function(e){return function(){return e}},lb=function(e){return function(r,t,s){for(var i=-1,c=Object(r),l=s(r),h=l.length;h--;){var v=l[e?h:++i];if(t(c[v],v,c)===!1)break}return r}}(),fb=function(e,r){return e&&lb(e,r,mu)},$h=function(e,r){return function(t,s){if(t==null)return t;if(!Aa(t))return e(t,s);for(var i=t.length,c=r?i:-1,l=Object(t);(r?c--:++c<i)&&s(l[c],c,l)!==!1;);return t}}(fb),Os=function(e){return e},I1=function(e){return typeof e=="function"?e:Os},L1=function(e,r){return(Pn(e)?nb:$h)(e,I1(r))},F1=L1,AL=function(e,r){var t=[];return $h(e,function(s,i,c){r(s,i,c)&&t.push(s)}),t},PL=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},NL=function(e){return this.__data__.has(e)};function fh(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Bh;++r<t;)this.add(e[r])}fh.prototype.add=fh.prototype.push=PL,fh.prototype.has=NL;var B1=fh,jL=function(e,r){for(var t=-1,s=e==null?0:e.length;++t<s;)if(r(e[t],t,e))return!0;return!1},G1=function(e,r){return e.has(r)},U1=function(e,r,t,s,i,c){var l=1&t,h=e.length,v=r.length;if(h!=v&&!(l&&v>h))return!1;var m=c.get(e),g=c.get(r);if(m&&g)return m==r&&g==e;var O=-1,x=!0,S=2&t?new B1:void 0;for(c.set(e,r),c.set(r,e);++O<h;){var N=e[O],j=r[O];if(s)var M=l?s(j,N,O,r,e,c):s(N,j,O,e,r,c);if(M!==void 0){if(M)continue;x=!1;break}if(S){if(!jL(r,function(C,V){if(!G1(S,V)&&(N===C||i(N,C,t,s,c)))return S.push(V)})){x=!1;break}}else if(N!==j&&!i(N,j,t,s,c)){x=!1;break}}return c.delete(e),c.delete(r),x},ML=function(e){var r=-1,t=Array(e.size);return e.forEach(function(s,i){t[++r]=[i,s]}),t},db=function(e){var r=-1,t=Array(e.size);return e.forEach(function(s){t[++r]=s}),t},kO=ai?ai.prototype:void 0,um=kO?kO.valueOf:void 0,RL=function(e,r,t,s,i,c,l){switch(t){case"[object DataView]":if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=r.byteLength||!c(new xh(e),new xh(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ul(+e,+r);case"[object Error]":return e.name==r.name&&e.message==r.message;case"[object RegExp]":case"[object String]":return e==r+"";case"[object Map]":var h=ML;case"[object Set]":var v=1&s;if(h||(h=db),e.size!=r.size&&!v)return!1;var m=l.get(e);if(m)return m==r;s|=2,l.set(e,r);var g=U1(h(e),h(r),s,i,c,l);return l.delete(e),g;case"[object Symbol]":if(um)return um.call(e)==um.call(r)}return!1},CL=Object.prototype.hasOwnProperty,DL=function(e,r,t,s,i,c){var l=1&t,h=jm(e),v=h.length;if(v!=jm(r).length&&!l)return!1;for(var m=v;m--;){var g=h[m];if(!(l?g in r:CL.call(r,g)))return!1}var O=c.get(e),x=c.get(r);if(O&&x)return O==r&&x==e;var S=!0;c.set(e,r),c.set(r,e);for(var N=l;++m<v;){var j=e[g=h[m]],M=r[g];if(s)var C=l?s(M,j,g,r,e,c):s(j,M,g,e,r,c);if(!(C===void 0?j===M||i(j,M,t,s,c):C)){S=!1;break}N||(N=g=="constructor")}if(S&&!N){var V=e.constructor,ce=r.constructor;V==ce||!("constructor"in e)||!("constructor"in r)||typeof V=="function"&&V instanceof V&&typeof ce=="function"&&ce instanceof ce||(S=!1)}return c.delete(e),c.delete(r),S},IO=Object.prototype.hasOwnProperty,kL=function(e,r,t,s,i,c){var l=Pn(e),h=Pn(r),v=l?"[object Array]":vs(e),m=h?"[object Array]":vs(r),g=(v=v=="[object Arguments]"?"[object Object]":v)=="[object Object]",O=(m=m=="[object Arguments]"?"[object Object]":m)=="[object Object]",x=v==m;if(x&&hs(e)){if(!hs(r))return!1;l=!0,g=!1}if(x&&!g)return c||(c=new Wc),l||nd(e)?U1(e,r,t,s,i,c):RL(e,r,v,t,s,i,c);if(!(1&t)){var S=g&&IO.call(e,"__wrapped__"),N=O&&IO.call(r,"__wrapped__");if(S||N){var j=S?e.value():e,M=N?r.value():r;return c||(c=new Wc),i(j,M,t,s,c)}}return!!x&&(c||(c=new Wc),DL(e,r,t,s,i,c))},z1=function e(r,t,s,i,c){return r===t||(r==null||t==null||!bi(r)&&!bi(t)?r!=r&&t!=t:kL(r,t,s,i,e,c))},IL=function(e,r,t,s){var i=t.length,c=i,l=!s;if(e==null)return!c;for(e=Object(e);i--;){var h=t[i];if(l&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++i<c;){var v=(h=t[i])[0],m=e[v],g=h[1];if(l&&h[2]){if(m===void 0&&!(v in e))return!1}else{var O=new Wc;if(s)var x=s(m,g,v,e,r,O);if(!(x===void 0?z1(g,m,3,s,O):x))return!1}}return!0},H1=function(e){return e==e&&!Io(e)},LL=function(e){for(var r=mu(e),t=r.length;t--;){var s=r[t],i=e[s];r[t]=[s,i,H1(i)]}return r},X1=function(e,r){return function(t){return t!=null&&t[e]===r&&(r!==void 0||e in Object(t))}},FL=function(e){var r=LL(e);return r.length==1&&r[0][2]?X1(r[0][0],r[0][1]):function(t){return t===e||IL(t,e,r)}},ys=function(e){return typeof e=="symbol"||bi(e)&&gu(e)=="[object Symbol]"},BL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,GL=/^\w*$/,pb=function(e,r){if(Pn(e))return!1;var t=typeof e;return!(t!="number"&&t!="symbol"&&t!="boolean"&&e!=null&&!ys(e))||GL.test(e)||!BL.test(e)||r!=null&&e in Object(r)};function hb(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var t=function(){var s=arguments,i=r?r.apply(this,s):s[0],c=t.cache;if(c.has(i))return c.get(i);var l=e.apply(this,s);return t.cache=c.set(i,l)||c,l};return t.cache=new(hb.Cache||Bh),t}hb.Cache=Bh;var UL=hb,zL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,HL=/\\(\\)?/g,XL=function(e){var r=UL(e,function(s){return t.size===500&&t.clear(),s}),t=r.cache;return r}(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(zL,function(t,s,i,c){r.push(i?c.replace(HL,"$1"):s||t)}),r}),Kc=function(e,r){for(var t=-1,s=e==null?0:e.length,i=Array(s);++t<s;)i[t]=r(e[t],t,e);return i},LO=ai?ai.prototype:void 0,FO=LO?LO.toString:void 0,VL=function e(r){if(typeof r=="string")return r;if(Pn(r))return Kc(r,e)+"";if(ys(r))return FO?FO.call(r):"";var t=r+"";return t=="0"&&1/r==-1/0?"-0":t},V1=function(e){return e==null?"":VL(e)},Wh=function(e,r){return Pn(e)?e:pb(e,r)?[e]:XL(V1(e))},od=function(e){if(typeof e=="string"||ys(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r},Yh=function(e,r){for(var t=0,s=(r=Wh(r,e)).length;e!=null&&t<s;)e=e[od(r[t++])];return t&&t==s?e:void 0},$L=function(e,r,t){var s=e==null?void 0:Yh(e,r);return s===void 0?t:s},WL=function(e,r){return e!=null&&r in Object(e)},$1=function(e,r,t){for(var s=-1,i=(r=Wh(r,e)).length,c=!1;++s<i;){var l=od(r[s]);if(!(c=e!=null&&t(e,l)))break;e=e[l]}return c||++s!=i?c:!!(i=e==null?0:e.length)&&ob(i)&&zh(l,i)&&(Pn(e)||Qc(e))},W1=function(e,r){return e!=null&&$1(e,r,WL)},YL=function(e,r){return pb(e)&&H1(r)?X1(od(e),r):function(t){var s=$L(t,e);return s===void 0&&s===r?W1(t,e):z1(r,s,3)}},Y1=function(e){return function(r){return r==null?void 0:r[e]}},KL=function(e){return function(r){return Yh(r,e)}},qL=function(e){return pb(e)?Y1(od(e)):KL(e)},Pa=function(e){return typeof e=="function"?e:e==null?Os:typeof e=="object"?Pn(e)?YL(e[0],e[1]):FL(e):qL(e)},K1=function(e,r){return(Pn(e)?P1:AL)(e,Pa(r))},ZL=Object.prototype.hasOwnProperty,JL=function(e,r){return e!=null&&ZL.call(e,r)},q1=function(e,r){return e!=null&&$1(e,r,JL)},QL=Object.prototype.hasOwnProperty,e3=function(e){if(e==null)return!0;if(Aa(e)&&(Pn(e)||typeof e=="string"||typeof e.splice=="function"||hs(e)||nd(e)||Qc(e)))return!e.length;var r=vs(e);if(r=="[object Map]"||r=="[object Set]")return!e.size;if(Xh(e))return!ib(e).length;for(var t in e)if(QL.call(e,t))return!1;return!0},Z1=function(e){return e===void 0},J1=function(e,r){var t=-1,s=Aa(e)?Array(e.length):[];return $h(e,function(i,c,l){s[++t]=r(i,c,l)}),s},Q1=function(e,r){return(Pn(e)?Kc:J1)(e,Pa(r))},t3=function(e,r,t,s){var i=-1,c=e==null?0:e.length;for(s&&c&&(t=e[++i]);++i<c;)t=r(t,e[i],i,e);return t},r3=function(e,r,t,s,i){return i(e,function(c,l,h){t=s?(s=!1,c):r(t,c,l,h)}),t},ex=function(e,r,t){var s=Pn(e)?t3:r3,i=arguments.length<3;return s(e,Pa(r),t,i,$h)},n3=function(e){return typeof e=="string"||!Pn(e)&&bi(e)&&gu(e)=="[object String]"},o3=Y1("length"),i3=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),a3=function(e){return i3.test(e)},u3="[\\ud800-\\udfff]",Dm="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",km="\\ud83c[\\udffb-\\udfff]",tx="[^\\ud800-\\udfff]",rx="(?:\\ud83c[\\udde6-\\uddff]){2}",nx="[\\ud800-\\udbff][\\udc00-\\udfff]",BO="(?:"+Dm+"|"+km+")?",s3="[\\ufe0e\\ufe0f]?"+BO+("(?:\\u200d(?:"+[tx,rx,nx].join("|")+")[\\ufe0e\\ufe0f]?"+BO+")*"),c3="(?:"+[tx+Dm+"?",Dm,rx,nx,u3].join("|")+")",GO=RegExp(km+"(?="+km+")|"+c3+s3,"g"),l3=function(e){for(var r=GO.lastIndex=0;GO.test(e);)++r;return r},f3=function(e){return a3(e)?l3(e):o3(e)},d3=function(e){if(e==null)return 0;if(Aa(e))return n3(e)?f3(e):e.length;var r=vs(e);return r=="[object Map]"||r=="[object Set]"?e.size:ib(e).length},p3=function(e,r,t){var s=Pn(e),i=s||hs(e)||nd(e);if(r=Pa(r),t==null){var c=e&&e.constructor;t=i?s?new c:[]:Io(e)&&td(c)?C1(Vh(e)):{}}return(i?nb:fb)(e,function(l,h,v){return r(t,l,h,v)}),t},UO=ai?ai.isConcatSpreadable:void 0,h3=function(e){return Pn(e)||Qc(e)||!!(UO&&e&&e[UO])},vb=function e(r,t,s,i,c){var l=-1,h=r.length;for(s||(s=h3),c||(c=[]);++l<h;){var v=r[l];t>0&&s(v)?t>1?e(v,t-1,s,i,c):ub(c,v):i||(c[c.length]=v)}return c},v3=function(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)},zO=Math.max,ox=function(e,r,t){return r=zO(r===void 0?e.length-1:r,0),function(){for(var s=arguments,i=-1,c=zO(s.length-r,0),l=Array(c);++i<c;)l[i]=s[r+i];i=-1;for(var h=Array(r+1);++i<r;)h[i]=s[i];return h[r]=t(l),v3(e,this,h)}},y3=wh?function(e,r){return wh(e,"toString",{configurable:!0,enumerable:!1,value:cb(r),writable:!0})}:Os,g3=Date.now,ix=function(e){var r=0,t=0;return function(){var s=g3(),i=16-(s-t);if(t=s,i>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}(y3),Kh=function(e,r){return ix(ox(e,r,Os),e+"")},ax=function(e,r,t,s){for(var i=e.length,c=t+(s?1:-1);s?c--:++c<i;)if(r(e[c],c,e))return c;return-1},m3=function(e){return e!=e},b3=function(e,r,t){for(var s=t-1,i=e.length;++s<i;)if(e[s]===r)return s;return-1},_3=function(e,r,t){return r==r?b3(e,r,t):ax(e,m3,t)},E3=function(e,r){return!!(e!=null&&e.length)&&_3(e,r,0)>-1},O3=function(e,r,t){for(var s=-1,i=e==null?0:e.length;++s<i;)if(t(r,e[s]))return!0;return!1},w3=function(){},x3=Yc&&1/db(new Yc([,-0]))[1]==1/0?function(e){return new Yc(e)}:w3,S3=function(e,r,t){var s=-1,i=E3,c=e.length,l=!0,h=[],v=h;if(t)l=!1,i=O3;else if(c>=200){var m=r?null:x3(e);if(m)return db(m);l=!1,i=G1,v=new B1}else v=r?[]:h;e:for(;++s<c;){var g=e[s],O=r?r(g):g;if(g=t||g!==0?g:0,l&&O==O){for(var x=v.length;x--;)if(v[x]===O)continue e;r&&v.push(O),h.push(g)}else i(v,O,t)||(v!==h&&v.push(O),h.push(g))}return h},ux=function(e){return bi(e)&&Aa(e)},T3=Kh(function(e){return S3(vb(e,1,ux,!0))}),A3=function(e,r){return Kc(r,function(t){return e[t]})},Sh,sx=function(e){return e==null?[]:A3(e,mu(e))};try{Sh={clone:TL,constant:cb,each:F1,filter:K1,has:q1,isArray:Pn,isEmpty:e3,isFunction:td,isUndefined:Z1,keys:mu,map:Q1,reduce:ex,size:d3,transform:p3,union:T3,values:sx}}catch{}Sh||(Sh=window._);var Bt=Sh,yb=Lr;function Lr(e){this._isDirected=!Bt.has(e,"directed")||e.directed,this._isMultigraph=!!Bt.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Bt.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Bt.constant(void 0),this._defaultEdgeLabelFn=Bt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function HO(e,r){e[r]?e[r]++:e[r]=1}function XO(e,r){--e[r]||delete e[r]}function Bf(e,r,t,s){var i=""+r,c=""+t;if(!e&&i>c){var l=i;i=c,c=l}return i+""+c+""+(Bt.isUndefined(s)?"\0":s)}function P3(e,r,t,s){var i=""+r,c=""+t;if(!e&&i>c){var l=i;i=c,c=l}var h={v:i,w:c};return s&&(h.name=s),h}function sm(e,r){return Bf(e,r.v,r.w,r.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(e){return this._label=e,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(e){return Bt.isFunction(e)||(e=Bt.constant(e)),this._defaultNodeLabelFn=e,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return Bt.keys(this._nodes)},Lr.prototype.sources=function(){var e=this;return Bt.filter(this.nodes(),function(r){return Bt.isEmpty(e._in[r])})},Lr.prototype.sinks=function(){var e=this;return Bt.filter(this.nodes(),function(r){return Bt.isEmpty(e._out[r])})},Lr.prototype.setNodes=function(e,r){var t=arguments,s=this;return Bt.each(e,function(i){t.length>1?s.setNode(i,r):s.setNode(i)}),this},Lr.prototype.setNode=function(e,r){return Bt.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Lr.prototype.node=function(e){return this._nodes[e]},Lr.prototype.hasNode=function(e){return Bt.has(this._nodes,e)},Lr.prototype.removeNode=function(e){var r=this;if(Bt.has(this._nodes,e)){var t=function(s){r.removeEdge(r._edgeObjs[s])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Bt.each(this.children(e),function(s){r.setParent(s)}),delete this._children[e]),Bt.each(Bt.keys(this._in[e]),t),delete this._in[e],delete this._preds[e],Bt.each(Bt.keys(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Lr.prototype.setParent=function(e,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Bt.isUndefined(r))r="\0";else{for(var t=r+="";!Bt.isUndefined(t);t=this.parent(t))if(t===e)throw new Error("Setting "+r+" as parent of "+e+" would create a cycle");this.setNode(r)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=r,this._children[r][e]=!0,this},Lr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Lr.prototype.parent=function(e){if(this._isCompound){var r=this._parent[e];if(r!=="\0")return r}},Lr.prototype.children=function(e){if(Bt.isUndefined(e)&&(e="\0"),this._isCompound){var r=this._children[e];if(r)return Bt.keys(r)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Lr.prototype.predecessors=function(e){var r=this._preds[e];if(r)return Bt.keys(r)},Lr.prototype.successors=function(e){var r=this._sucs[e];if(r)return Bt.keys(r)},Lr.prototype.neighbors=function(e){var r=this.predecessors(e);if(r)return Bt.union(r,this.successors(e))},Lr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Lr.prototype.filterNodes=function(e){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var t=this;Bt.each(this._nodes,function(c,l){e(l)&&r.setNode(l,c)}),Bt.each(this._edgeObjs,function(c){r.hasNode(c.v)&&r.hasNode(c.w)&&r.setEdge(c,t.edge(c))});var s={};function i(c){var l=t.parent(c);return l===void 0||r.hasNode(l)?(s[c]=l,l):l in s?s[l]:i(l)}return this._isCompound&&Bt.each(r.nodes(),function(c){r.setParent(c,i(c))}),r},Lr.prototype.setDefaultEdgeLabel=function(e){return Bt.isFunction(e)||(e=Bt.constant(e)),this._defaultEdgeLabelFn=e,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return Bt.values(this._edgeObjs)},Lr.prototype.setPath=function(e,r){var t=this,s=arguments;return Bt.reduce(e,function(i,c){return s.length>1?t.setEdge(i,c,r):t.setEdge(i,c),c}),this},Lr.prototype.setEdge=function(){var e,r,t,s,i=!1,c=arguments[0];typeof c=="object"&&c!==null&&"v"in c?(e=c.v,r=c.w,t=c.name,arguments.length===2&&(s=arguments[1],i=!0)):(e=c,r=arguments[1],t=arguments[3],arguments.length>2&&(s=arguments[2],i=!0)),e=""+e,r=""+r,Bt.isUndefined(t)||(t=""+t);var l=Bf(this._isDirected,e,r,t);if(Bt.has(this._edgeLabels,l))return i&&(this._edgeLabels[l]=s),this;if(!Bt.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[l]=i?s:this._defaultEdgeLabelFn(e,r,t);var h=P3(this._isDirected,e,r,t);return e=h.v,r=h.w,Object.freeze(h),this._edgeObjs[l]=h,HO(this._preds[r],e),HO(this._sucs[e],r),this._in[r][l]=h,this._out[e][l]=h,this._edgeCount++,this},Lr.prototype.edge=function(e,r,t){var s=arguments.length===1?sm(this._isDirected,arguments[0]):Bf(this._isDirected,e,r,t);return this._edgeLabels[s]},Lr.prototype.hasEdge=function(e,r,t){var s=arguments.length===1?sm(this._isDirected,arguments[0]):Bf(this._isDirected,e,r,t);return Bt.has(this._edgeLabels,s)},Lr.prototype.removeEdge=function(e,r,t){var s=arguments.length===1?sm(this._isDirected,arguments[0]):Bf(this._isDirected,e,r,t),i=this._edgeObjs[s];return i&&(e=i.v,r=i.w,delete this._edgeLabels[s],delete this._edgeObjs[s],XO(this._preds[r],e),XO(this._sucs[e],r),delete this._in[r][s],delete this._out[e][s],this._edgeCount--),this},Lr.prototype.inEdges=function(e,r){var t=this._in[e];if(t){var s=Bt.values(t);return r?Bt.filter(s,function(i){return i.v===r}):s}},Lr.prototype.outEdges=function(e,r){var t=this._out[e];if(t){var s=Bt.values(t);return r?Bt.filter(s,function(i){return i.w===r}):s}},Lr.prototype.nodeEdges=function(e,r){var t=this.inEdges(e,r);if(t)return t.concat(this.outEdges(e,r))};var VO={Graph:yb,version:"2.1.8"},N3={write:function(e){var r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:j3(e),edges:M3(e)};return Bt.isUndefined(e.graph())||(r.value=Bt.clone(e.graph())),r},read:function(e){var r=new yb(e.options).setGraph(e.value);return Bt.each(e.nodes,function(t){r.setNode(t.v,t.value),t.parent&&r.setParent(t.v,t.parent)}),Bt.each(e.edges,function(t){r.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),r}};function j3(e){return Bt.map(e.nodes(),function(r){var t=e.node(r),s=e.parent(r),i={v:r};return Bt.isUndefined(t)||(i.value=t),Bt.isUndefined(s)||(i.parent=s),i})}function M3(e){return Bt.map(e.edges(),function(r){var t=e.edge(r),s={v:r.v,w:r.w};return Bt.isUndefined(r.name)||(s.name=r.name),Bt.isUndefined(t)||(s.value=t),s})}var R3=function(e){var r,t={},s=[];function i(c){Bt.has(t,c)||(t[c]=!0,r.push(c),Bt.each(e.successors(c),i),Bt.each(e.predecessors(c),i))}return Bt.each(e.nodes(),function(c){r=[],i(c),r.length&&s.push(r)}),s},cx=ii;function ii(){this._arr=[],this._keyIndices={}}ii.prototype.size=function(){return this._arr.length},ii.prototype.keys=function(){return this._arr.map(function(e){return e.key})},ii.prototype.has=function(e){return Bt.has(this._keyIndices,e)},ii.prototype.priority=function(e){var r=this._keyIndices[e];if(r!==void 0)return this._arr[r].priority},ii.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ii.prototype.add=function(e,r){var t=this._keyIndices;if(e=String(e),!Bt.has(t,e)){var s=this._arr,i=s.length;return t[e]=i,s.push({key:e,priority:r}),this._decrease(i),!0}return!1},ii.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},ii.prototype.decrease=function(e,r){var t=this._keyIndices[e];if(r>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[t].priority+" New: "+r);this._arr[t].priority=r,this._decrease(t)},ii.prototype._heapify=function(e){var r=this._arr,t=2*e,s=t+1,i=e;t<r.length&&(i=r[t].priority<r[i].priority?t:i,s<r.length&&(i=r[s].priority<r[i].priority?s:i),i!==e&&(this._swap(e,i),this._heapify(i)))},ii.prototype._decrease=function(e){for(var r,t=this._arr,s=t[e].priority;e!==0&&!(t[r=e>>1].priority<s);)this._swap(e,r),e=r},ii.prototype._swap=function(e,r){var t=this._arr,s=this._keyIndices,i=t[e],c=t[r];t[e]=c,t[r]=i,s[c.key]=e,s[i.key]=r};var lx=function(e,r,t,s){return function(i,c,l,h){var v,m,g={},O=new cx,x=function(S){var N=S.v!==v?S.v:S.w,j=g[N],M=l(S),C=m.distance+M;if(M<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+M);C<j.distance&&(j.distance=C,j.predecessor=v,O.decrease(N,C))};for(i.nodes().forEach(function(S){var N=S===c?0:Number.POSITIVE_INFINITY;g[S]={distance:N},O.add(S,N)});O.size()>0&&(v=O.removeMin(),(m=g[v]).distance!==Number.POSITIVE_INFINITY);)h(v).forEach(x);return g}(e,String(r),t||C3,s||function(i){return e.outEdges(i)})},C3=Bt.constant(1),D3=function(e,r,t){return Bt.transform(e.nodes(),function(s,i){s[i]=lx(e,i,r,t)},{})},fx=function(e){var r=0,t=[],s={},i=[];function c(l){var h=s[l]={onStack:!0,lowlink:r,index:r++};if(t.push(l),e.successors(l).forEach(function(g){Bt.has(s,g)?s[g].onStack&&(h.lowlink=Math.min(h.lowlink,s[g].index)):(c(g),h.lowlink=Math.min(h.lowlink,s[g].lowlink))}),h.lowlink===h.index){var v,m=[];do v=t.pop(),s[v].onStack=!1,m.push(v);while(l!==v);i.push(m)}}return e.nodes().forEach(function(l){Bt.has(s,l)||c(l)}),i},k3=function(e){return Bt.filter(fx(e),function(r){return r.length>1||r.length===1&&e.hasEdge(r[0],r[0])})},I3=function(e,r,t){return function(s,i,c){var l={},h=s.nodes();return h.forEach(function(v){l[v]={},l[v][v]={distance:0},h.forEach(function(m){v!==m&&(l[v][m]={distance:Number.POSITIVE_INFINITY})}),c(v).forEach(function(m){var g=m.v===v?m.w:m.v,O=i(m);l[v][g]={distance:O,predecessor:v}})}),h.forEach(function(v){var m=l[v];h.forEach(function(g){var O=l[g];h.forEach(function(x){var S=O[v],N=m[x],j=O[x],M=S.distance+N.distance;M<j.distance&&(j.distance=M,j.predecessor=N.predecessor)})})}),l}(e,r||L3,t||function(s){return e.outEdges(s)})},L3=Bt.constant(1),cm=dx;function dx(e){var r={},t={},s=[];if(Bt.each(e.sinks(),function i(c){if(Bt.has(t,c))throw new Th;Bt.has(r,c)||(t[c]=!0,r[c]=!0,Bt.each(e.predecessors(c),i),delete t[c],s.push(c))}),Bt.size(r)!==e.nodeCount())throw new Th;return s}function Th(){}dx.CycleException=Th,Th.prototype=new Error;var $O=function(e,r,t){Bt.isArray(r)||(r=[r]);var s=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],c={};return Bt.each(r,function(l){if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);px(e,l,t==="post",c,s,i)}),i};function px(e,r,t,s,i,c){Bt.has(s,r)||(s[r]=!0,t||c.push(r),Bt.each(i(r),function(l){px(e,l,t,s,i,c)}),t&&c.push(r))}var Ah,F3={Graph:VO.Graph,json:N3,alg:{components:R3,dijkstra:lx,dijkstraAll:D3,findCycles:k3,floydWarshall:I3,isAcyclic:function(e){try{cm(e)}catch(r){if(r instanceof cm.CycleException)return!1;throw r}return!0},postorder:function(e,r){return $O(e,r,"post")},preorder:function(e,r){return $O(e,r,"pre")},prim:function(e,r){var t,s=new yb,i={},c=new cx;function l(v){var m=v.v===t?v.w:v.v,g=c.priority(m);if(g!==void 0){var O=r(v);O<g&&(i[m]=t,c.decrease(m,O))}}if(e.nodeCount()===0)return s;Bt.each(e.nodes(),function(v){c.add(v,Number.POSITIVE_INFINITY),s.setNode(v)}),c.decrease(e.nodes()[0],0);for(var h=!1;c.size()>0;){if(t=c.removeMin(),Bt.has(i,t))s.setEdge(t,i[t]);else{if(h)throw new Error("Input graph is not connected: "+e);h=!0}e.nodeEdges(t).forEach(l)}return s},tarjan:fx,topsort:cm},version:VO.version};try{Ah=F3}catch{}Ah||(Ah=window.graphlib);var Yi=Ah,B3=function(e){return k1(e,5)},Qf=function(e,r,t){if(!Io(t))return!1;var s=typeof r;return!!(s=="number"?Aa(t)&&zh(r,t.length):s=="string"&&r in t)&&ul(t[r],e)},hx=Object.prototype,G3=hx.hasOwnProperty,U3=Kh(function(e,r){e=Object(e);var t=-1,s=r.length,i=s>2?r[2]:void 0;for(i&&Qf(r[0],r[1],i)&&(s=1);++t<s;)for(var c=r[t],l=Es(c),h=-1,v=l.length;++h<v;){var m=l[h],g=e[m];(g===void 0||ul(g,hx[m])&&!G3.call(e,m))&&(e[m]=c[m])}return e}),z3=function(e){return function(r,t,s){var i=Object(r);if(!Aa(r)){var c=Pa(t);r=mu(r),t=function(h){return c(i[h],h,i)}}var l=e(r,t,s);return l>-1?i[c?r[l]:l]:void 0}},H3=/^\s+|\s+$/g,X3=/^[-+]0x[0-9a-f]+$/i,V3=/^0b[01]+$/i,$3=/^0o[0-7]+$/i,W3=parseInt,Y3=function(e){if(typeof e=="number")return e;if(ys(e))return NaN;if(Io(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Io(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(H3,"");var t=V3.test(e);return t||$3.test(e)?W3(e.slice(2),t?2:8):X3.test(e)?NaN:+e},dh=function(e){return e?(e=Y3(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},K3=function(e){var r=dh(e),t=r%1;return r==r?t?r-t:r:0},q3=Math.max,Z3=z3(function(e,r,t){var s=e==null?0:e.length;if(!s)return-1;var i=t==null?0:K3(t);return i<0&&(i=q3(s+i,0)),ax(e,Pa(r),i)}),vx=function(e){return e!=null&&e.length?vb(e,1):[]},J3=function(e,r){return e==null?e:lb(e,I1(r),Es)},Q3=function(e){var r=e==null?0:e.length;return r?e[r-1]:void 0},e4=function(e,r){var t={};return r=Pa(r),fb(e,function(s,i,c){Gh(t,i,r(s,i,c))}),t},gb=function(e,r,t){for(var s=-1,i=e.length;++s<i;){var c=e[s],l=r(c);if(l!=null&&(h===void 0?l==l&&!ys(l):t(l,h)))var h=l,v=c}return v},t4=function(e,r){return e>r},r4=function(e){return e&&e.length?gb(e,Os,t4):void 0},Im=function(e,r,t){(t!==void 0&&!ul(e[r],t)||t===void 0&&!(r in e))&&Gh(e,r,t)},n4=Function.prototype,o4=Object.prototype,yx=n4.toString,i4=o4.hasOwnProperty,a4=yx.call(Object),u4=function(e){if(!bi(e)||gu(e)!="[object Object]")return!1;var r=Vh(e);if(r===null)return!0;var t=i4.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&yx.call(t)==a4},Lm=function(e,r){if((r!=="constructor"||typeof e[r]!="function")&&r!="__proto__")return e[r]},s4=function(e){return rd(e,Es(e))},c4=function(e,r,t,s,i,c,l){var h=Lm(e,t),v=Lm(r,t),m=l.get(v);if(m)Im(e,t,m);else{var g=c?c(h,v,t+"",e,r,l):void 0,O=g===void 0;if(O){var x=Pn(v),S=!x&&hs(v),N=!x&&!S&&nd(v);g=v,x||S||N?Pn(h)?g=h:ux(h)?g=A1(h):S?(O=!1,g=T1(v,!0)):N?(O=!1,g=R1(v,!0)):g=[]:u4(v)||Qc(v)?(g=h,Qc(h)?g=s4(h):Io(h)&&!td(h)||(g=D1(v))):O=!1}O&&(l.set(v,g),i(g,v,s,c,l),l.delete(v)),Im(e,t,g)}},l4=function e(r,t,s,i,c){r!==t&&lb(t,function(l,h){if(c||(c=new Wc),Io(l))c4(r,t,h,s,e,i,c);else{var v=i?i(Lm(r,h),l,h+"",r,t,c):void 0;v===void 0&&(v=l),Im(r,h,v)}},Es)},f4=function(e){return Kh(function(r,t){var s=-1,i=t.length,c=i>1?t[i-1]:void 0,l=i>2?t[2]:void 0;for(c=e.length>3&&typeof c=="function"?(i--,c):void 0,l&&Qf(t[0],t[1],l)&&(c=i<3?void 0:c,i=1),r=Object(r);++s<i;){var h=t[s];h&&e(r,h,s,c)}return r})}(function(e,r,t){l4(e,r,t)}),gx=function(e,r){return e<r},d4=function(e){return e&&e.length?gb(e,Os,gx):void 0},p4=function(e,r){return e&&e.length?gb(e,Pa(r),gx):void 0},h4=function(){return Ei.Date.now()},v4=function(e,r,t,s){if(!Io(e))return e;for(var i=-1,c=(r=Wh(r,e)).length,l=c-1,h=e;h!=null&&++i<c;){var v=od(r[i]),m=t;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(i!=l){var g=h[v];(m=s?s(g,v,h):void 0)===void 0&&(m=Io(g)?g:zh(r[i+1])?[]:{})}Uh(h,v,m),h=h[v]}return e},y4=function(e,r,t){for(var s=-1,i=r.length,c={};++s<i;){var l=r[s],h=Yh(e,l);t(h,l)&&v4(c,Wh(l,e),h)}return c},g4=function(e,r){return y4(e,r,function(t,s){return W1(e,s)})},m4=function(e){return ix(ox(e,void 0,vx),e+"")}(function(e,r){return e==null?{}:g4(e,r)}),b4=Math.ceil,_4=Math.max,E4=function(e,r,t,s){for(var i=-1,c=_4(b4((r-e)/(t||1)),0),l=Array(c);c--;)l[s?c:++i]=e,e+=t;return l},O4=function(e){return function(r,t,s){return s&&typeof s!="number"&&Qf(r,t,s)&&(t=s=void 0),r=dh(r),t===void 0?(t=r,r=0):t=dh(t),s=s===void 0?r<t?1:-1:dh(s),E4(r,t,s,e)}}(),w4=function(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e},x4=function(e,r){if(e!==r){var t=e!==void 0,s=e===null,i=e==e,c=ys(e),l=r!==void 0,h=r===null,v=r==r,m=ys(r);if(!h&&!m&&!c&&e>r||c&&l&&v&&!h&&!m||s&&l&&v||!t&&v||!i)return 1;if(!s&&!c&&!m&&e<r||m&&t&&i&&!s&&!c||h&&t&&i||!l&&i||!v)return-1}return 0},S4=function(e,r,t){for(var s=-1,i=e.criteria,c=r.criteria,l=i.length,h=t.length;++s<l;){var v=x4(i[s],c[s]);if(v)return s>=h?v:v*(t[s]=="desc"?-1:1)}return e.index-r.index},T4=function(e,r,t){r=r.length?Kc(r,function(c){return Pn(c)?function(l){return Yh(l,c.length===1?c[0]:c)}:c}):[Os];var s=-1;r=Kc(r,Hh(Pa));var i=J1(e,function(c,l,h){return{criteria:Kc(r,function(v){return v(c)}),index:++s,value:c}});return w4(i,function(c,l){return S4(c,l,t)})},A4=Kh(function(e,r){if(e==null)return[];var t=r.length;return t>1&&Qf(e,r[0],r[1])?r=[]:t>2&&Qf(r[0],r[1],r[2])&&(r=[r[0]]),T4(e,vb(r,1),[])}),P4=0,N4=function(e){var r=++P4;return V1(e)+r},j4=function(e,r,t){for(var s=-1,i=e.length,c=r.length,l={};++s<i;){var h=s<c?r[s]:void 0;t(l,e[s],h)}return l},Ph,M4=function(e,r){return j4(e||[],r||[],Uh)};try{Ph={cloneDeep:B3,constant:cb,defaults:U3,each:F1,filter:K1,find:Z3,flatten:vx,forEach:L1,forIn:J3,has:q1,isUndefined:Z1,last:Q3,map:Q1,mapValues:e4,max:r4,merge:f4,min:d4,minBy:p4,now:h4,pick:m4,range:O4,reduce:ex,sortBy:A4,uniqueId:N4,values:sx,zipObject:M4}}catch{}Ph||(Ph=window._);var R4=Ph;Yi.Graph;R4.constant(1);Yi.Graph;Yi.Graph;Yi.alg.preorder;Yi.alg.postorder;Yi.Graph;Yi.Graph;Yi.Graph;Yi.Graph;Yi.Graph;function ed(e){return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ed(e)}function C4(e,r){if(ed(e)!=="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var s=t.call(e,r||"default");if(ed(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function D4(e){var r=C4(e,"string");return ed(r)==="symbol"?r:String(r)}function Mt(e,r,t){return r=D4(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var k4=typeof If=="object"&&If&&If.Object===Object&&If,mx=k4,I4=mx,L4=typeof self=="object"&&self&&self.Object===Object&&self,F4=I4||L4||Function("return this")(),B4=F4,G4=B4,U4=G4.Symbol,bx=U4,WO=bx;WO&&WO.toStringTag;var YO=bx;YO&&YO.toStringTag;var Nh={exports:{}};Nh.exports;(function(e,r){var t=mx,s=r&&!r.nodeType&&r,i=s&&!0&&e&&!e.nodeType&&e,c=i&&i.exports===s,l=c&&t.process,h=function(){try{var v=i&&i.require&&i.require("util").types;return v||l&&l.binding&&l.binding("util")}catch{}}();e.exports=h})(Nh,Nh.exports);var z4=Nh.exports,KO=z4;KO&&KO.isTypedArray;var _x={exports:{}},Ex={exports:{}};(function(e){function r(t){return e.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Ex);var H4=Ex.exports;(function(e){var r=H4.default;function t(){e.exports=t=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var s={},i=Object.prototype,c=i.hasOwnProperty,l=Object.defineProperty||function(Q,se,he){Q[se]=he.value},h=typeof Symbol=="function"?Symbol:{},v=h.iterator||"@@iterator",m=h.asyncIterator||"@@asyncIterator",g=h.toStringTag||"@@toStringTag";function O(Q,se,he){return Object.defineProperty(Q,se,{value:he,enumerable:!0,configurable:!0,writable:!0}),Q[se]}try{O({},"")}catch{O=function(he,be,te){return he[be]=te}}function x(Q,se,he,be){var te=se&&se.prototype instanceof j?se:j,ve=Object.create(te.prototype),Fe=new I(be||[]);return l(ve,"_invoke",{value:$(Q,he,Fe)}),ve}function S(Q,se,he){try{return{type:"normal",arg:Q.call(se,he)}}catch(be){return{type:"throw",arg:be}}}s.wrap=x;var N={};function j(){}function M(){}function C(){}var V={};O(V,v,function(){return this});var ce=Object.getPrototypeOf,_e=ce&&ce(ce(pe([])));_e&&_e!==i&&c.call(_e,v)&&(V=_e);var fe=C.prototype=j.prototype=Object.create(V);function z(Q){["next","throw","return"].forEach(function(se){O(Q,se,function(he){return this._invoke(se,he)})})}function ee(Q,se){function he(te,ve,Fe,Ze){var ht=S(Q[te],Q,ve);if(ht.type!=="throw"){var Ft=ht.arg,bt=Ft.value;return bt&&r(bt)=="object"&&c.call(bt,"__await")?se.resolve(bt.__await).then(function(xt){he("next",xt,Fe,Ze)},function(xt){he("throw",xt,Fe,Ze)}):se.resolve(bt).then(function(xt){Ft.value=xt,Fe(Ft)},function(xt){return he("throw",xt,Fe,Ze)})}Ze(ht.arg)}var be;l(this,"_invoke",{value:function(ve,Fe){function Ze(){return new se(function(ht,Ft){he(ve,Fe,ht,Ft)})}return be=be?be.then(Ze,Ze):Ze()}})}function $(Q,se,he){var be="suspendedStart";return function(te,ve){if(be==="executing")throw new Error("Generator is already running");if(be==="completed"){if(te==="throw")throw ve;return De()}for(he.method=te,he.arg=ve;;){var Fe=he.delegate;if(Fe){var Ze=L(Fe,he);if(Ze){if(Ze===N)continue;return Ze}}if(he.method==="next")he.sent=he._sent=he.arg;else if(he.method==="throw"){if(be==="suspendedStart")throw be="completed",he.arg;he.dispatchException(he.arg)}else he.method==="return"&&he.abrupt("return",he.arg);be="executing";var ht=S(Q,se,he);if(ht.type==="normal"){if(be=he.done?"completed":"suspendedYield",ht.arg===N)continue;return{value:ht.arg,done:he.done}}ht.type==="throw"&&(be="completed",he.method="throw",he.arg=ht.arg)}}}function L(Q,se){var he=se.method,be=Q.iterator[he];if(be===void 0)return se.delegate=null,he==="throw"&&Q.iterator.return&&(se.method="return",se.arg=void 0,L(Q,se),se.method==="throw")||he!=="return"&&(se.method="throw",se.arg=new TypeError("The iterator does not provide a '"+he+"' method")),N;var te=S(be,Q.iterator,se.arg);if(te.type==="throw")return se.method="throw",se.arg=te.arg,se.delegate=null,N;var ve=te.arg;return ve?ve.done?(se[Q.resultName]=ve.value,se.next=Q.nextLoc,se.method!=="return"&&(se.method="next",se.arg=void 0),se.delegate=null,N):ve:(se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,N)}function Y(Q){var se={tryLoc:Q[0]};1 in Q&&(se.catchLoc=Q[1]),2 in Q&&(se.finallyLoc=Q[2],se.afterLoc=Q[3]),this.tryEntries.push(se)}function K(Q){var se=Q.completion||{};se.type="normal",delete se.arg,Q.completion=se}function I(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(Y,this),this.reset(!0)}function pe(Q){if(Q){var se=Q[v];if(se)return se.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length)){var he=-1,be=function te(){for(;++he<Q.length;)if(c.call(Q,he))return te.value=Q[he],te.done=!1,te;return te.value=void 0,te.done=!0,te};return be.next=be}}return{next:De}}function De(){return{value:void 0,done:!0}}return M.prototype=C,l(fe,"constructor",{value:C,configurable:!0}),l(C,"constructor",{value:M,configurable:!0}),M.displayName=O(C,g,"GeneratorFunction"),s.isGeneratorFunction=function(Q){var se=typeof Q=="function"&&Q.constructor;return!!se&&(se===M||(se.displayName||se.name)==="GeneratorFunction")},s.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,C):(Q.__proto__=C,O(Q,g,"GeneratorFunction")),Q.prototype=Object.create(fe),Q},s.awrap=function(Q){return{__await:Q}},z(ee.prototype),O(ee.prototype,m,function(){return this}),s.AsyncIterator=ee,s.async=function(Q,se,he,be,te){te===void 0&&(te=Promise);var ve=new ee(x(Q,se,he,be),te);return s.isGeneratorFunction(se)?ve:ve.next().then(function(Fe){return Fe.done?Fe.value:ve.next()})},z(fe),O(fe,g,"Generator"),O(fe,v,function(){return this}),O(fe,"toString",function(){return"[object Generator]"}),s.keys=function(Q){var se=Object(Q),he=[];for(var be in se)he.push(be);return he.reverse(),function te(){for(;he.length;){var ve=he.pop();if(ve in se)return te.value=ve,te.done=!1,te}return te.done=!0,te}},s.values=pe,I.prototype={constructor:I,reset:function(se){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(K),!se)for(var he in this)he.charAt(0)==="t"&&c.call(this,he)&&!isNaN(+he.slice(1))&&(this[he]=void 0)},stop:function(){this.done=!0;var se=this.tryEntries[0].completion;if(se.type==="throw")throw se.arg;return this.rval},dispatchException:function(se){if(this.done)throw se;var he=this;function be(Ft,bt){return Fe.type="throw",Fe.arg=se,he.next=Ft,bt&&(he.method="next",he.arg=void 0),!!bt}for(var te=this.tryEntries.length-1;te>=0;--te){var ve=this.tryEntries[te],Fe=ve.completion;if(ve.tryLoc==="root")return be("end");if(ve.tryLoc<=this.prev){var Ze=c.call(ve,"catchLoc"),ht=c.call(ve,"finallyLoc");if(Ze&&ht){if(this.prev<ve.catchLoc)return be(ve.catchLoc,!0);if(this.prev<ve.finallyLoc)return be(ve.finallyLoc)}else if(Ze){if(this.prev<ve.catchLoc)return be(ve.catchLoc,!0)}else{if(!ht)throw new Error("try statement without catch or finally");if(this.prev<ve.finallyLoc)return be(ve.finallyLoc)}}}},abrupt:function(se,he){for(var be=this.tryEntries.length-1;be>=0;--be){var te=this.tryEntries[be];if(te.tryLoc<=this.prev&&c.call(te,"finallyLoc")&&this.prev<te.finallyLoc){var ve=te;break}}ve&&(se==="break"||se==="continue")&&ve.tryLoc<=he&&he<=ve.finallyLoc&&(ve=null);var Fe=ve?ve.completion:{};return Fe.type=se,Fe.arg=he,ve?(this.method="next",this.next=ve.finallyLoc,N):this.complete(Fe)},complete:function(se,he){if(se.type==="throw")throw se.arg;return se.type==="break"||se.type==="continue"?this.next=se.arg:se.type==="return"?(this.rval=this.arg=se.arg,this.method="return",this.next="end"):se.type==="normal"&&he&&(this.next=he),N},finish:function(se){for(var he=this.tryEntries.length-1;he>=0;--he){var be=this.tryEntries[he];if(be.finallyLoc===se)return this.complete(be.completion,be.afterLoc),K(be),N}},catch:function(se){for(var he=this.tryEntries.length-1;he>=0;--he){var be=this.tryEntries[he];if(be.tryLoc===se){var te=be.completion;if(te.type==="throw"){var ve=te.arg;K(be)}return ve}}throw new Error("illegal catch attempt")},delegateYield:function(se,he,be){return this.delegate={iterator:pe(se),resultName:he,nextLoc:be},this.method==="next"&&(this.arg=void 0),N}},s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(_x);var X4=_x.exports,lm=X4();try{regeneratorRuntime=lm}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=lm:Function("r","regeneratorRuntime = r")(lm)}var Pt;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Pt||(Pt={}));var qO;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(qO||(qO={}));var ZO;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(ZO||(ZO={}));var JO;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(JO||(JO={}));var QO;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(QO||(QO={}));var V4={exports:{}};(function(e,r){(function(t,s){e.exports=s()})(If,function(){var t=function(A){return A instanceof Uint8Array||A instanceof Uint16Array||A instanceof Uint32Array||A instanceof Int8Array||A instanceof Int16Array||A instanceof Int32Array||A instanceof Float32Array||A instanceof Float64Array||A instanceof Uint8ClampedArray},s=function(A,U){for(var J=Object.keys(U),Ie=0;Ie<J.length;++Ie)A[J[Ie]]=U[J[Ie]];return A},i=`
`;function c(A){return typeof atob<"u"?atob(A):"base64:"+A}function l(A){var U=new Error("(regl) "+A);throw console.error(U),U}function h(A,U){A||l(U)}function v(A){return A?": "+A:""}function m(A,U,J){A in U||l("unknown parameter ("+A+")"+v(J)+". possible values: "+Object.keys(U).join())}function g(A,U){t(A)||l("invalid parameter type"+v(U)+". must be a typed array")}function O(A,U){switch(U){case"number":return typeof A=="number";case"object":return typeof A=="object";case"string":return typeof A=="string";case"boolean":return typeof A=="boolean";case"function":return typeof A=="function";case"undefined":return typeof A>"u";case"symbol":return typeof A=="symbol"}}function x(A,U,J){O(A,U)||l("invalid parameter type"+v(J)+". expected "+U+", got "+typeof A)}function S(A,U){A>=0&&(A|0)===A||l("invalid parameter type, ("+A+")"+v(U)+". must be a nonnegative integer")}function N(A,U,J){U.indexOf(A)<0&&l("invalid value"+v(J)+". must be one of: "+U)}var j=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function M(A){Object.keys(A).forEach(function(U){j.indexOf(U)<0&&l('invalid regl constructor argument "'+U+'". must be one of '+j)})}function C(A,U){for(A=A+"";A.length<U;)A=" "+A;return A}function V(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ce(A,U){this.number=A,this.line=U,this.errors=[]}function _e(A,U,J){this.file=A,this.line=U,this.message=J}function fe(){var A=new Error,U=(A.stack||A).toString(),J=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(U);if(J)return J[1];var Ie=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(U);return Ie?Ie[1]:"unknown"}function z(){var A=new Error,U=(A.stack||A).toString(),J=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(U);if(J)return J[1];var Ie=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(U);return Ie?Ie[1]:"unknown"}function ee(A,U){var J=A.split(`
`),Ie=1,Ve=0,ke={unknown:new V,0:new V};ke.unknown.name=ke[0].name=U||fe(),ke.unknown.lines.push(new ce(0,""));for(var Ge=0;Ge<J.length;++Ge){var ot=J[Ge],at=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ot);if(at)switch(at[1]){case"line":var ft=/(\d+)(\s+\d+)?/.exec(at[2]);ft&&(Ie=ft[1]|0,ft[2]&&(Ve=ft[2]|0,Ve in ke||(ke[Ve]=new V)));break;case"define":var ut=/SHADER_NAME(_B64)?\s+(.*)$/.exec(at[2]);ut&&(ke[Ve].name=ut[1]?c(ut[2]):ut[2]);break}ke[Ve].lines.push(new ce(Ie++,ot))}return Object.keys(ke).forEach(function(pt){var _t=ke[pt];_t.lines.forEach(function(it){_t.index[it.number]=it})}),ke}function $(A){var U=[];return A.split(`
`).forEach(function(J){if(!(J.length<5)){var Ie=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(J);Ie?U.push(new _e(Ie[1]|0,Ie[2]|0,Ie[3].trim())):J.length>0&&U.push(new _e("unknown",0,J))}}),U}function L(A,U){U.forEach(function(J){var Ie=A[J.file];if(Ie){var Ve=Ie.index[J.line];if(Ve){Ve.errors.push(J),Ie.hasErrors=!0;return}}A.unknown.hasErrors=!0,A.unknown.lines[0].errors.push(J)})}function Y(A,U,J,Ie,Ve){if(!A.getShaderParameter(U,A.COMPILE_STATUS)){var ke=A.getShaderInfoLog(U),Ge=Ie===A.FRAGMENT_SHADER?"fragment":"vertex";he(J,"string",Ge+" shader source must be a string",Ve);var ot=ee(J,Ve),at=$(ke);L(ot,at),Object.keys(ot).forEach(function(ft){var ut=ot[ft];if(!ut.hasErrors)return;var pt=[""],_t=[""];function it(dt,Se){pt.push(dt),_t.push(Se||"")}it("file number "+ft+": "+ut.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ut.lines.forEach(function(dt){if(dt.errors.length>0){it(C(dt.number,4)+"|  ","background-color:yellow; font-weight:bold"),it(dt.line+i,"color:red; background-color:yellow; font-weight:bold");var Se=0;dt.errors.forEach(function(Ue){var st=Ue.message,St=/^\s*'(.*)'\s*:\s*(.*)$/.exec(st);if(St){var Je=St[1];switch(st=St[2],Je){case"assign":Je="=";break}Se=Math.max(dt.line.indexOf(Je,Se),0)}else Se=0;it(C("| ",6)),it(C("^^^",Se+3)+i,"font-weight:bold"),it(C("| ",6)),it(st+i,"font-weight:bold")}),it(C("| ",6)+i)}else it(C(dt.number,4)+"|  "),it(dt.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(_t[0]=pt.join("%c"),console.log.apply(console,_t)):console.log(pt.join(""))}),h.raise("Error compiling "+Ge+" shader, "+ot[0].name)}}function K(A,U,J,Ie,Ve){if(!A.getProgramParameter(U,A.LINK_STATUS)){var ke=A.getProgramInfoLog(U),Ge=ee(J,Ve),ot=ee(Ie,Ve),at='Error linking program with vertex shader, "'+ot[0].name+'", and fragment shader "'+Ge[0].name+'"';typeof document<"u"?console.log("%c"+at+i+"%c"+ke,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(at+i+ke),h.raise(at)}}function I(A){A._commandRef=fe()}function pe(A,U,J,Ie){I(A);function Ve(at){return at?Ie.id(at):0}A._fragId=Ve(A.static.frag),A._vertId=Ve(A.static.vert);function ke(at,ft){Object.keys(ft).forEach(function(ut){at[Ie.id(ut)]=!0})}var Ge=A._uniformSet={};ke(Ge,U.static),ke(Ge,U.dynamic);var ot=A._attributeSet={};ke(ot,J.static),ke(ot,J.dynamic),A._hasCount="count"in A.static||"count"in A.dynamic||"elements"in A.static||"elements"in A.dynamic}function De(A,U){var J=z();l(A+" in command "+(U||fe())+(J==="unknown"?"":" called from "+J))}function Q(A,U,J){A||De(U,J||fe())}function se(A,U,J,Ie){A in U||De("unknown parameter ("+A+")"+v(J)+". possible values: "+Object.keys(U).join(),Ie||fe())}function he(A,U,J,Ie){O(A,U)||De("invalid parameter type"+v(J)+". expected "+U+", got "+typeof A,Ie||fe())}function be(A){A()}function te(A,U,J){A.texture?N(A.texture._texture.internalformat,U,"unsupported texture format for attachment"):N(A.renderbuffer._renderbuffer.format,J,"unsupported renderbuffer format for attachment")}var ve=33071,Fe=9728,Ze=9984,ht=9985,Ft=9986,bt=9987,xt=5120,tr=5121,Oe=5122,oe=5123,me=5124,qe=5125,gt=5126,et=32819,Ct=32820,zt=33635,Zt=34042,Gt=36193,ze={};ze[xt]=ze[tr]=1,ze[Oe]=ze[oe]=ze[Gt]=ze[zt]=ze[et]=ze[Ct]=2,ze[me]=ze[qe]=ze[gt]=ze[Zt]=4;function Wt(A,U){return A===Ct||A===et||A===zt?2:A===Zt?4:ze[A]*U}function xe(A){return!(A&A-1)&&!!A}function Ht(A,U,J){var Ie,Ve=U.width,ke=U.height,Ge=U.channels;h(Ve>0&&Ve<=J.maxTextureSize&&ke>0&&ke<=J.maxTextureSize,"invalid texture shape"),(A.wrapS!==ve||A.wrapT!==ve)&&h(xe(Ve)&&xe(ke),"incompatible wrap mode for texture, both width and height must be power of 2"),U.mipmask===1?Ve!==1&&ke!==1&&h(A.minFilter!==Ze&&A.minFilter!==Ft&&A.minFilter!==ht&&A.minFilter!==bt,"min filter requires mipmap"):(h(xe(Ve)&&xe(ke),"texture must be a square power of 2 to support mipmapping"),h(U.mipmask===(Ve<<1)-1,"missing or incomplete mipmap data")),U.type===gt&&(J.extensions.indexOf("oes_texture_float_linear")<0&&h(A.minFilter===Fe&&A.magFilter===Fe,"filter not supported, must enable oes_texture_float_linear"),h(!A.genMipmaps,"mipmap generation not supported with float textures"));var ot=U.images;for(Ie=0;Ie<16;++Ie)if(ot[Ie]){var at=Ve>>Ie,ft=ke>>Ie;h(U.mipmask&1<<Ie,"missing mipmap data");var ut=ot[Ie];if(h(ut.width===at&&ut.height===ft,"invalid shape for mip images"),h(ut.format===U.format&&ut.internalformat===U.internalformat&&ut.type===U.type,"incompatible type for mip image"),!ut.compressed)if(ut.data){var pt=Math.ceil(Wt(ut.type,Ge)*at/ut.unpackAlignment)*ut.unpackAlignment;h(ut.data.byteLength===pt*ft,"invalid data for image, buffer size is inconsistent with image format")}else ut.element||ut.copy}else A.genMipmaps||h((U.mipmask&1<<Ie)===0,"extra mipmap data");U.compressed&&h(!A.genMipmaps,"mipmap generation for compressed images not supported")}function yr(A,U,J,Ie){var Ve=A.width,ke=A.height,Ge=A.channels;h(Ve>0&&Ve<=Ie.maxTextureSize&&ke>0&&ke<=Ie.maxTextureSize,"invalid texture shape"),h(Ve===ke,"cube map must be square"),h(U.wrapS===ve&&U.wrapT===ve,"wrap mode not supported by cube map");for(var ot=0;ot<J.length;++ot){var at=J[ot];h(at.width===Ve&&at.height===ke,"inconsistent cube map face shape"),U.genMipmaps&&(h(!at.compressed,"can not generate mipmap for compressed textures"),h(at.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ft=at.images,ut=0;ut<16;++ut){var pt=ft[ut];if(pt){var _t=Ve>>ut,it=ke>>ut;h(at.mipmask&1<<ut,"missing mipmap data"),h(pt.width===_t&&pt.height===it,"invalid shape for mip images"),h(pt.format===A.format&&pt.internalformat===A.internalformat&&pt.type===A.type,"incompatible type for mip image"),pt.compressed||(pt.data?h(pt.data.byteLength===_t*it*Math.max(Wt(pt.type,Ge),pt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):pt.element||pt.copy)}}}}var G=s(h,{optional:be,raise:l,commandRaise:De,command:Q,parameter:m,commandParameter:se,constructor:M,type:x,commandType:he,isTypedArray:g,nni:S,oneOf:N,shaderError:Y,linkError:K,callSite:z,saveCommandRef:I,saveDrawInfo:pe,framebufferFormat:te,guessCommand:fe,texture2D:Ht,textureCube:yr}),pr=0,Dr=0,Yr=5,Zr=6;function sr(A,U){this.id=pr++,this.type=A,this.data=U}function sn(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function re(A){if(A.length===0)return[];var U=A.charAt(0),J=A.charAt(A.length-1);if(A.length>1&&U===J&&(U==='"'||U==="'"))return['"'+sn(A.substr(1,A.length-2))+'"'];var Ie=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(A);if(Ie)return re(A.substr(0,Ie.index)).concat(re(Ie[1])).concat(re(A.substr(Ie.index+Ie[0].length)));var Ve=A.split(".");if(Ve.length===1)return['"'+sn(A)+'"'];for(var ke=[],Ge=0;Ge<Ve.length;++Ge)ke=ke.concat(re(Ve[Ge]));return ke}function Ne(A){return"["+re(A).join("][")+"]"}function de(A,U){return new sr(A,Ne(U+""))}function Be(A){return typeof A=="function"&&!A._reglType||A instanceof sr}function Nt(A,U){if(typeof A=="function")return new sr(Dr,A);if(typeof A=="number"||typeof A=="boolean")return new sr(Yr,A);if(Array.isArray(A))return new sr(Zr,A.map((J,Ie)=>Nt(J,U+"["+Ie+"]")));if(A instanceof sr)return A;G(!1,"invalid option type in uniform "+U)}var Ot={DynamicVariable:sr,define:de,isDynamic:Be,unbox:Nt,accessor:Ne},Kt={next:typeof requestAnimationFrame=="function"?function(A){return requestAnimationFrame(A)}:function(A){return setTimeout(A,16)},cancel:typeof cancelAnimationFrame=="function"?function(A){return cancelAnimationFrame(A)}:clearTimeout},Tr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function xn(){var A={"":0},U=[""];return{id:function(J){var Ie=A[J];return Ie||(Ie=A[J]=U.length,U.push(J),Ie)},str:function(J){return U[J]}}}function Fn(A,U,J){var Ie=document.createElement("canvas");s(Ie.style,{border:0,margin:0,padding:0,top:0,left:0}),A.appendChild(Ie),A===document.body&&(Ie.style.position="absolute",s(A.style,{margin:0,padding:0}));function Ve(){var ot=window.innerWidth,at=window.innerHeight;if(A!==document.body){var ft=A.getBoundingClientRect();ot=ft.right-ft.left,at=ft.bottom-ft.top}Ie.width=J*ot,Ie.height=J*at,s(Ie.style,{width:ot+"px",height:at+"px"})}var ke;A!==document.body&&typeof ResizeObserver=="function"?(ke=new ResizeObserver(function(){setTimeout(Ve)}),ke.observe(A)):window.addEventListener("resize",Ve,!1);function Ge(){ke?ke.disconnect():window.removeEventListener("resize",Ve),A.removeChild(Ie)}return Ve(),{canvas:Ie,onDestroy:Ge}}function hn(A,U){function J(Ie){try{return A.getContext(Ie,U)}catch{return null}}return J("webgl")||J("experimental-webgl")||J("webgl-experimental")}function En(A){return typeof A.nodeName=="string"&&typeof A.appendChild=="function"&&typeof A.getBoundingClientRect=="function"}function Xt(A){return typeof A.drawArrays=="function"||typeof A.drawElements=="function"}function or(A){return typeof A=="string"?A.split():(G(Array.isArray(A),"invalid extension array"),A)}function dr(A){return typeof A=="string"?(G(typeof document<"u","not supported outside of DOM"),document.querySelector(A)):A}function gr(A){var U=A||{},J,Ie,Ve,ke,Ge={},ot=[],at=[],ft=typeof window>"u"?1:window.devicePixelRatio,ut=!1,pt=function(dt){dt&&G.raise(dt)},_t=function(){};if(typeof U=="string"?(G(typeof document<"u","selector queries only supported in DOM enviroments"),J=document.querySelector(U),G(J,"invalid query string for element")):typeof U=="object"?En(U)?J=U:Xt(U)?(ke=U,Ve=ke.canvas):(G.constructor(U),"gl"in U?ke=U.gl:"canvas"in U?Ve=dr(U.canvas):"container"in U&&(Ie=dr(U.container)),"attributes"in U&&(Ge=U.attributes,G.type(Ge,"object","invalid context attributes")),"extensions"in U&&(ot=or(U.extensions)),"optionalExtensions"in U&&(at=or(U.optionalExtensions)),"onDone"in U&&(G.type(U.onDone,"function","invalid or missing onDone callback"),pt=U.onDone),"profile"in U&&(ut=!!U.profile),"pixelRatio"in U&&(ft=+U.pixelRatio,G(ft>0,"invalid pixel ratio"))):G.raise("invalid arguments to regl"),J&&(J.nodeName.toLowerCase()==="canvas"?Ve=J:Ie=J),!ke){if(!Ve){G(typeof document<"u","must manually specify webgl context outside of DOM environments");var it=Fn(Ie||document.body,pt,ft);if(!it)return null;Ve=it.canvas,_t=it.onDestroy}Ge.premultipliedAlpha===void 0&&(Ge.premultipliedAlpha=!0),ke=hn(Ve,Ge)}return ke?{gl:ke,canvas:Ve,container:Ie,extensions:ot,optionalExtensions:at,pixelRatio:ft,profile:ut,onDone:pt,onDestroy:_t}:(_t(),pt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Xr(A,U){var J={};function Ie(Ge){G.type(Ge,"string","extension name must be string");var ot=Ge.toLowerCase(),at;try{at=J[ot]=A.getExtension(ot)}catch{}return!!at}for(var Ve=0;Ve<U.extensions.length;++Ve){var ke=U.extensions[Ve];if(!Ie(ke))return U.onDestroy(),U.onDone('"'+ke+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return U.optionalExtensions.forEach(Ie),{extensions:J,restore:function(){Object.keys(J).forEach(function(Ge){if(J[Ge]&&!Ie(Ge))throw new Error("(regl): error restoring extension "+Ge)})}}}function kr(A,U){for(var J=Array(A),Ie=0;Ie<A;++Ie)J[Ie]=U(Ie);return J}var ui=5120,zo=5121,Ho=5122,Ki=5123,sl=5124,bu=5125,Ao=5126;function ws(A){for(var U=16;U<=1<<28;U*=16)if(A<=U)return U;return 0}function qt(A){var U,J;return U=(A>65535)<<4,A>>>=U,J=(A>255)<<3,A>>>=J,U|=J,J=(A>15)<<2,A>>>=J,U|=J,J=(A>3)<<1,A>>>=J,U|=J,U|A>>1}function xs(){var A=kr(8,function(){return[]});function U(ke){var Ge=ws(ke),ot=A[qt(Ge)>>2];return ot.length>0?ot.pop():new ArrayBuffer(Ge)}function J(ke){A[qt(ke.byteLength)>>2].push(ke)}function Ie(ke,Ge){var ot=null;switch(ke){case ui:ot=new Int8Array(U(Ge),0,Ge);break;case zo:ot=new Uint8Array(U(Ge),0,Ge);break;case Ho:ot=new Int16Array(U(2*Ge),0,Ge);break;case Ki:ot=new Uint16Array(U(2*Ge),0,Ge);break;case sl:ot=new Int32Array(U(4*Ge),0,Ge);break;case bu:ot=new Uint32Array(U(4*Ge),0,Ge);break;case Ao:ot=new Float32Array(U(4*Ge),0,Ge);break;default:return null}return ot.length!==Ge?ot.subarray(0,Ge):ot}function Ve(ke){J(ke.buffer)}return{alloc:U,free:J,allocType:Ie,freeType:Ve}}var tn=xs();tn.zero=xs();var Ss=3408,po=3410,ho=3411,Ts=3412,Xo=3413,Oi=3414,Lo=3415,_u=33901,As=33902,cl=3379,Na=3386,ll=34921,Ps=36347,fl=36348,si=35661,Ns=35660,Vo=34930,dl=36349,ja=34076,Eu=34024,Ou=7936,pl=7937,js=7938,wi=35724,xi=34047,Ms=36063,Si=34852,vo=3553,wu=34067,Rs=34069,qi=33984,Ti=6408,xu=5126,Su=5121,Ma=36160,Zi=36053,Cs=36064,hl=16384,Ds=function(A,U){var J=1;U.ext_texture_filter_anisotropic&&(J=A.getParameter(xi));var Ie=1,Ve=1;U.webgl_draw_buffers&&(Ie=A.getParameter(Si),Ve=A.getParameter(Ms));var ke=!!U.oes_texture_float;if(ke){var Ge=A.createTexture();A.bindTexture(vo,Ge),A.texImage2D(vo,0,Ti,1,1,0,Ti,xu,null);var ot=A.createFramebuffer();if(A.bindFramebuffer(Ma,ot),A.framebufferTexture2D(Ma,Cs,vo,Ge,0),A.bindTexture(vo,null),A.checkFramebufferStatus(Ma)!==Zi)ke=!1;else{A.viewport(0,0,1,1),A.clearColor(1,0,0,1),A.clear(hl);var at=tn.allocType(xu,4);A.readPixels(0,0,1,1,Ti,xu,at),A.getError()?ke=!1:(A.deleteFramebuffer(ot),A.deleteTexture(Ge),ke=at[0]===1),tn.freeType(at)}}var ft=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ut=!0;if(!ft){var pt=A.createTexture(),_t=tn.allocType(Su,36);A.activeTexture(qi),A.bindTexture(wu,pt),A.texImage2D(Rs,0,Ti,3,3,0,Ti,Su,_t),tn.freeType(_t),A.bindTexture(wu,null),A.deleteTexture(pt),ut=!A.getError()}return{colorBits:[A.getParameter(po),A.getParameter(ho),A.getParameter(Ts),A.getParameter(Xo)],depthBits:A.getParameter(Oi),stencilBits:A.getParameter(Lo),subpixelBits:A.getParameter(Ss),extensions:Object.keys(U).filter(function(it){return!!U[it]}),maxAnisotropic:J,maxDrawbuffers:Ie,maxColorAttachments:Ve,pointSizeDims:A.getParameter(_u),lineWidthDims:A.getParameter(As),maxViewportDims:A.getParameter(Na),maxCombinedTextureUnits:A.getParameter(si),maxCubeMapSize:A.getParameter(ja),maxRenderbufferSize:A.getParameter(Eu),maxTextureUnits:A.getParameter(Vo),maxTextureSize:A.getParameter(cl),maxAttributes:A.getParameter(ll),maxVertexUniforms:A.getParameter(Ps),maxVertexTextureUnits:A.getParameter(Ns),maxVaryingVectors:A.getParameter(fl),maxFragmentUniforms:A.getParameter(dl),glsl:A.getParameter(wi),renderer:A.getParameter(pl),vendor:A.getParameter(Ou),version:A.getParameter(js),readFloat:ke,npotTextureCube:ut}};function Kn(A){return!!A&&typeof A=="object"&&Array.isArray(A.shape)&&Array.isArray(A.stride)&&typeof A.offset=="number"&&A.shape.length===A.stride.length&&(Array.isArray(A.data)||t(A.data))}var Nn=function(A){return Object.keys(A).map(function(U){return A[U]})},yo={shape:ci,flatten:vl};function zn(A,U,J){for(var Ie=0;Ie<U;++Ie)J[Ie]=A[Ie]}function ks(A,U,J,Ie){for(var Ve=0,ke=0;ke<U;++ke)for(var Ge=A[ke],ot=0;ot<J;++ot)Ie[Ve++]=Ge[ot]}function Tu(A,U,J,Ie,Ve,ke){for(var Ge=ke,ot=0;ot<U;++ot)for(var at=A[ot],ft=0;ft<J;++ft)for(var ut=at[ft],pt=0;pt<Ie;++pt)Ve[Ge++]=ut[pt]}function Au(A,U,J,Ie,Ve){for(var ke=1,Ge=J+1;Ge<U.length;++Ge)ke*=U[Ge];var ot=U[J];if(U.length-J===4){var at=U[J+1],ft=U[J+2],ut=U[J+3];for(Ge=0;Ge<ot;++Ge)Tu(A[Ge],at,ft,ut,Ie,Ve),Ve+=ke}else for(Ge=0;Ge<ot;++Ge)Au(A[Ge],U,J+1,Ie,Ve),Ve+=ke}function vl(A,U,J,Ie){var Ve=1;if(U.length)for(var ke=0;ke<U.length;++ke)Ve*=U[ke];else Ve=0;var Ge=Ie||tn.allocType(J,Ve);switch(U.length){case 0:break;case 1:zn(A,U[0],Ge);break;case 2:ks(A,U[0],U[1],Ge);break;case 3:Tu(A,U[0],U[1],U[2],Ge,0);break;default:Au(A,U,0,Ge,0)}return Ge}function ci(A){for(var U=[],J=A;J.length;J=J[0])U.push(J.length);return U}var oo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},yl=5120,Po=5122,go=5124,Is=5121,Ls=5123,gl=5125,Ra=5126,$o=5126,mo={int8:yl,int16:Po,int32:go,uint8:Is,uint16:Ls,uint32:gl,float:Ra,float32:$o},ml=35048,qn=35040,No={dynamic:ml,stream:qn,static:35044},Rr=yo.flatten,io=yo.shape,Wo=35044,Bn=35040,Ca=5121,Ji=5126,Fo=[];Fo[5120]=1,Fo[5122]=2,Fo[5124]=4,Fo[5121]=1,Fo[5123]=2,Fo[5125]=4,Fo[5126]=4;function Zn(A){return oo[Object.prototype.toString.call(A)]|0}function Pu(A,U){for(var J=0;J<U.length;++J)A[J]=U[J]}function Qi(A,U,J,Ie,Ve,ke,Ge){for(var ot=0,at=0;at<J;++at)for(var ft=0;ft<Ie;++ft)A[ot++]=U[Ve*at+ke*ft+Ge]}function jo(A,U,J,Ie){var Ve=0,ke={};function Ge(Se){this.id=Ve++,this.buffer=A.createBuffer(),this.type=Se,this.usage=Wo,this.byteLength=0,this.dimension=1,this.dtype=Ca,this.persistentData=null,J.profile&&(this.stats={size:0})}Ge.prototype.bind=function(){A.bindBuffer(this.type,this.buffer)},Ge.prototype.destroy=function(){_t(this)};var ot=[];function at(Se,Ue){var st=ot.pop();return st||(st=new Ge(Se)),st.bind(),pt(st,Ue,Bn,0,1,!1),st}function ft(Se){ot.push(Se)}function ut(Se,Ue,st){Se.byteLength=Ue.byteLength,A.bufferData(Se.type,Ue,st)}function pt(Se,Ue,st,St,Je,At){var tt;if(Se.usage=st,Array.isArray(Ue)){if(Se.dtype=St||Ji,Ue.length>0){var vt;if(Array.isArray(Ue[0])){tt=io(Ue);for(var rt=1,yt=1;yt<tt.length;++yt)rt*=tt[yt];Se.dimension=rt,vt=Rr(Ue,tt,Se.dtype),ut(Se,vt,st),At?Se.persistentData=vt:tn.freeType(vt)}else if(typeof Ue[0]=="number"){Se.dimension=Je;var Yt=tn.allocType(Se.dtype,Ue.length);Pu(Yt,Ue),ut(Se,Yt,st),At?Se.persistentData=Yt:tn.freeType(Yt)}else t(Ue[0])?(Se.dimension=Ue[0].length,Se.dtype=St||Zn(Ue[0])||Ji,vt=Rr(Ue,[Ue.length,Ue[0].length],Se.dtype),ut(Se,vt,st),At?Se.persistentData=vt:tn.freeType(vt)):G.raise("invalid buffer data")}}else if(t(Ue))Se.dtype=St||Zn(Ue),Se.dimension=Je,ut(Se,Ue,st),At&&(Se.persistentData=new Uint8Array(new Uint8Array(Ue.buffer)));else if(Kn(Ue)){tt=Ue.shape;var rr=Ue.stride,Et=Ue.offset,Qe=0,Ye=0,nr=0,Te=0;tt.length===1?(Qe=tt[0],Ye=1,nr=rr[0],Te=0):tt.length===2?(Qe=tt[0],Ye=tt[1],nr=rr[0],Te=rr[1]):G.raise("invalid shape"),Se.dtype=St||Zn(Ue.data)||Ji,Se.dimension=Ye;var Lt=tn.allocType(Se.dtype,Qe*Ye);Qi(Lt,Ue.data,Qe,Ye,nr,Te,Et),ut(Se,Lt,st),At?Se.persistentData=Lt:tn.freeType(Lt)}else Ue instanceof ArrayBuffer?(Se.dtype=Ca,Se.dimension=Je,ut(Se,Ue,st),At&&(Se.persistentData=new Uint8Array(new Uint8Array(Ue)))):G.raise("invalid buffer data")}function _t(Se){U.bufferCount--,Ie(Se);var Ue=Se.buffer;G(Ue,"buffer must not be deleted already"),A.deleteBuffer(Ue),Se.buffer=null,delete ke[Se.id]}function it(Se,Ue,st,St){U.bufferCount++;var Je=new Ge(Ue);ke[Je.id]=Je;function At(rt){var yt=Wo,Yt=null,rr=0,Et=0,Qe=1;return Array.isArray(rt)||t(rt)||Kn(rt)||rt instanceof ArrayBuffer?Yt=rt:typeof rt=="number"?rr=rt|0:rt&&(G.type(rt,"object","buffer arguments must be an object, a number or an array"),"data"in rt&&(G(Yt===null||Array.isArray(Yt)||t(Yt)||Kn(Yt),"invalid data for buffer"),Yt=rt.data),"usage"in rt&&(G.parameter(rt.usage,No,"invalid buffer usage"),yt=No[rt.usage]),"type"in rt&&(G.parameter(rt.type,mo,"invalid buffer type"),Et=mo[rt.type]),"dimension"in rt&&(G.type(rt.dimension,"number","invalid dimension"),Qe=rt.dimension|0),"length"in rt&&(G.nni(rr,"buffer length must be a nonnegative integer"),rr=rt.length|0)),Je.bind(),Yt?pt(Je,Yt,yt,Et,Qe,St):(rr&&A.bufferData(Je.type,rr,yt),Je.dtype=Et||Ca,Je.usage=yt,Je.dimension=Qe,Je.byteLength=rr),J.profile&&(Je.stats.size=Je.byteLength*Fo[Je.dtype]),At}function tt(rt,yt){G(yt+rt.byteLength<=Je.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+rt.byteLength+" starting from offset "+yt+" to a buffer of size "+Je.byteLength),A.bufferSubData(Je.type,yt,rt)}function vt(rt,yt){var Yt=(yt||0)|0,rr;if(Je.bind(),t(rt)||rt instanceof ArrayBuffer)tt(rt,Yt);else if(Array.isArray(rt)){if(rt.length>0)if(typeof rt[0]=="number"){var Et=tn.allocType(Je.dtype,rt.length);Pu(Et,rt),tt(Et,Yt),tn.freeType(Et)}else if(Array.isArray(rt[0])||t(rt[0])){rr=io(rt);var Qe=Rr(rt,rr,Je.dtype);tt(Qe,Yt),tn.freeType(Qe)}else G.raise("invalid buffer data")}else if(Kn(rt)){rr=rt.shape;var Ye=rt.stride,nr=0,Te=0,Lt=0,br=0;rr.length===1?(nr=rr[0],Te=1,Lt=Ye[0],br=0):rr.length===2?(nr=rr[0],Te=rr[1],Lt=Ye[0],br=Ye[1]):G.raise("invalid shape");var ur=Array.isArray(rt.data)?Je.dtype:Zn(rt.data),mr=tn.allocType(ur,nr*Te);Qi(mr,rt.data,nr,Te,Lt,br,rt.offset),tt(mr,Yt),tn.freeType(mr)}else G.raise("invalid data for buffer subdata");return At}return st||At(Se),At._reglType="buffer",At._buffer=Je,At.subdata=vt,J.profile&&(At.stats=Je.stats),At.destroy=function(){_t(Je)},At}function dt(){Nn(ke).forEach(function(Se){Se.buffer=A.createBuffer(),A.bindBuffer(Se.type,Se.buffer),A.bufferData(Se.type,Se.persistentData||Se.byteLength,Se.usage)})}return J.profile&&(U.getTotalBufferSize=function(){var Se=0;return Object.keys(ke).forEach(function(Ue){Se+=ke[Ue].stats.size}),Se}),{create:it,createStream:at,destroyStream:ft,clear:function(){Nn(ke).forEach(_t),ot.forEach(_t)},getBuffer:function(Se){return Se&&Se._buffer instanceof Ge?Se._buffer:null},restore:dt,_initBuffer:pt}}var Fs=0,bl=0,Nu=1,On=1,Ai=4,Da=4,jn={points:Fs,point:bl,lines:Nu,line:On,triangles:Ai,triangle:Da,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Bs=0,ea=1,Yo=4,ka=5120,Bo=5121,ju=5122,Mn=5123,ao=5124,uo=5125,ta=34963,Mu=35040,Ru=35044;function Gs(A,U,J,Ie){var Ve={},ke=0,Ge={uint8:Bo,uint16:Mn};U.oes_element_index_uint&&(Ge.uint32=uo);function ot(dt){this.id=ke++,Ve[this.id]=this,this.buffer=dt,this.primType=Yo,this.vertCount=0,this.type=0}ot.prototype.bind=function(){this.buffer.bind()};var at=[];function ft(dt){var Se=at.pop();return Se||(Se=new ot(J.create(null,ta,!0,!1)._buffer)),pt(Se,dt,Mu,-1,-1,0,0),Se}function ut(dt){at.push(dt)}function pt(dt,Se,Ue,st,St,Je,At){dt.buffer.bind();var tt;if(Se){var vt=At;!At&&(!t(Se)||Kn(Se)&&!t(Se.data))&&(vt=U.oes_element_index_uint?uo:Mn),J._initBuffer(dt.buffer,Se,Ue,vt,3)}else A.bufferData(ta,Je,Ue),dt.buffer.dtype=tt||Bo,dt.buffer.usage=Ue,dt.buffer.dimension=3,dt.buffer.byteLength=Je;if(tt=At,!At){switch(dt.buffer.dtype){case Bo:case ka:tt=Bo;break;case Mn:case ju:tt=Mn;break;case uo:case ao:tt=uo;break;default:G.raise("unsupported type for element array")}dt.buffer.dtype=tt}dt.type=tt,G(tt!==uo||!!U.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var rt=St;rt<0&&(rt=dt.buffer.byteLength,tt===Mn?rt>>=1:tt===uo&&(rt>>=2)),dt.vertCount=rt;var yt=st;if(st<0){yt=Yo;var Yt=dt.buffer.dimension;Yt===1&&(yt=Bs),Yt===2&&(yt=ea),Yt===3&&(yt=Yo)}dt.primType=yt}function _t(dt){Ie.elementsCount--,G(dt.buffer!==null,"must not double destroy elements"),delete Ve[dt.id],dt.buffer.destroy(),dt.buffer=null}function it(dt,Se){var Ue=J.create(null,ta,!0),st=new ot(Ue._buffer);Ie.elementsCount++;function St(Je){if(!Je)Ue(),st.primType=Yo,st.vertCount=0,st.type=Bo;else if(typeof Je=="number")Ue(Je),st.primType=Yo,st.vertCount=Je|0,st.type=Bo;else{var At=null,tt=Ru,vt=-1,rt=-1,yt=0,Yt=0;Array.isArray(Je)||t(Je)||Kn(Je)?At=Je:(G.type(Je,"object","invalid arguments for elements"),"data"in Je&&(At=Je.data,G(Array.isArray(At)||t(At)||Kn(At),"invalid data for element buffer")),"usage"in Je&&(G.parameter(Je.usage,No,"invalid element buffer usage"),tt=No[Je.usage]),"primitive"in Je&&(G.parameter(Je.primitive,jn,"invalid element buffer primitive"),vt=jn[Je.primitive]),"count"in Je&&(G(typeof Je.count=="number"&&Je.count>=0,"invalid vertex count for elements"),rt=Je.count|0),"type"in Je&&(G.parameter(Je.type,Ge,"invalid buffer type"),Yt=Ge[Je.type]),"length"in Je?yt=Je.length|0:(yt=rt,Yt===Mn||Yt===ju?yt*=2:(Yt===uo||Yt===ao)&&(yt*=4))),pt(st,At,tt,vt,rt,yt,Yt)}return St}return St(dt),St._reglType="elements",St._elements=st,St.subdata=function(Je,At){return Ue.subdata(Je,At),St},St.destroy=function(){_t(st)},St}return{create:it,createStream:ft,destroyStream:ut,getElements:function(dt){return typeof dt=="function"&&dt._elements instanceof ot?dt._elements:null},clear:function(){Nn(Ve).forEach(_t)}}}var Us=new Float32Array(1),Ia=new Uint32Array(Us.buffer),li=5123;function _(A){for(var U=tn.allocType(li,A.length),J=0;J<A.length;++J)if(isNaN(A[J]))U[J]=65535;else if(A[J]===1/0)U[J]=31744;else if(A[J]===-1/0)U[J]=64512;else{Us[0]=A[J];var Ie=Ia[0],Ve=Ie>>>31<<15,ke=(Ie<<1>>>24)-127,Ge=Ie>>13&(1<<10)-1;if(ke<-24)U[J]=Ve;else if(ke<-14){var ot=-14-ke;U[J]=Ve+(Ge+(1<<10)>>ot)}else ke>15?U[J]=Ve+31744:U[J]=Ve+(ke+15<<10)+Ge}return U}function E(A){return Array.isArray(A)||t(A)}var P=function(A){return!(A&A-1)&&!!A},F=34467,Z=3553,Ae=34067,Xe=34069,mt=6408,Vt=6406,Ar=6407,cr=6409,Gr=6410,Or=32854,Ur=32855,so=36194,rn=32819,Jn=32820,ra=33635,_l=34042,La=6402,na=34041,Pi=35904,oa=35906,Sn=36193,Fa=33776,fi=33777,ia=33778,Cu=33779,El=35986,id=35987,ad=34798,Ol=35840,ud=35841,zs=35842,sd=35843,cd=36196,Ba=5121,wl=5123,Hs=5125,Du=5126,qh=10242,Xs=10243,Vs=10497,ku=33071,Zh=33648,$s=10240,Ga=10241,xl=9728,ld=9729,Ws=9984,fd=9985,dd=9986,Sl=9987,Jh=33170,Iu=4352,Qh=4353,ev=4354,pd=34046,tv=3317,Qn=37440,rv=37441,nv=37443,hd=37444,Ua=33984,ov=[Ws,dd,fd,Sl],Ys=[0,cr,Gr,Ar,mt],Mo={};Mo[cr]=Mo[Vt]=Mo[La]=1,Mo[na]=Mo[Gr]=2,Mo[Ar]=Mo[Pi]=3,Mo[mt]=Mo[oa]=4;function Jr(A){return"[object "+A+"]"}var Tl=Jr("HTMLCanvasElement"),Al=Jr("OffscreenCanvas"),Pl=Jr("CanvasRenderingContext2D"),Nl=Jr("ImageBitmap"),jl=Jr("HTMLImageElement"),Ml=Jr("HTMLVideoElement"),vd=Object.keys(oo).concat([Tl,Al,Pl,Nl,jl,Ml]),aa=[];aa[Ba]=1,aa[Du]=4,aa[Sn]=2,aa[wl]=2,aa[Hs]=4;var Rn=[];Rn[Or]=2,Rn[Ur]=2,Rn[so]=2,Rn[na]=4,Rn[Fa]=.5,Rn[fi]=.5,Rn[ia]=1,Rn[Cu]=1,Rn[El]=.5,Rn[id]=1,Rn[ad]=1,Rn[Ol]=.5,Rn[ud]=.25,Rn[zs]=.5,Rn[sd]=.25,Rn[cd]=.5;function Rl(A){return Array.isArray(A)&&(A.length===0||typeof A[0]=="number")}function Cl(A){if(!Array.isArray(A))return!1;var U=A.length;return!(U===0||!E(A[0]))}function Ni(A){return Object.prototype.toString.call(A)}function Dl(A){return Ni(A)===Tl}function kl(A){return Ni(A)===Al}function yd(A){return Ni(A)===Pl}function gd(A){return Ni(A)===Nl}function md(A){return Ni(A)===jl}function Lu(A){return Ni(A)===Ml}function Cn(A){if(!A)return!1;var U=Ni(A);return vd.indexOf(U)>=0?!0:Rl(A)||Cl(A)||Kn(A)}function bd(A){return oo[Object.prototype.toString.call(A)]|0}function _d(A,U){var J=U.length;switch(A.type){case Ba:case wl:case Hs:case Du:var Ie=tn.allocType(A.type,J);Ie.set(U),A.data=Ie;break;case Sn:A.data=_(U);break;default:G.raise("unsupported texture type, must specify a typed array")}}function Dn(A,U){return tn.allocType(A.type===Sn?Du:A.type,U)}function zr(A,U){A.type===Sn?(A.data=_(U),tn.freeType(U)):A.data=U}function Ed(A,U,J,Ie,Ve,ke){for(var Ge=A.width,ot=A.height,at=A.channels,ft=Ge*ot*at,ut=Dn(A,ft),pt=0,_t=0;_t<ot;++_t)for(var it=0;it<Ge;++it)for(var dt=0;dt<at;++dt)ut[pt++]=U[J*it+Ie*_t+Ve*dt+ke];zr(A,ut)}function Pr(A,U,J,Ie,Ve,ke){var Ge;if(typeof Rn[A]<"u"?Ge=Rn[A]:Ge=Mo[A]*aa[U],ke&&(Ge*=6),Ve){for(var ot=0,at=J;at>=1;)ot+=Ge*at*at,at/=2;return ot}else return Ge*J*Ie}function Tn(A,U,J,Ie,Ve,ke,Ge){var ot={"don't care":Iu,"dont care":Iu,nice:ev,fast:Qh},at={repeat:Vs,clamp:ku,mirror:Zh},ft={nearest:xl,linear:ld},ut=s({mipmap:Sl,"nearest mipmap nearest":Ws,"linear mipmap nearest":fd,"nearest mipmap linear":dd,"linear mipmap linear":Sl},ft),pt={none:0,browser:hd},_t={uint8:Ba,rgba4:rn,rgb565:ra,"rgb5 a1":Jn},it={alpha:Vt,luminance:cr,"luminance alpha":Gr,rgb:Ar,rgba:mt,rgba4:Or,"rgb5 a1":Ur,rgb565:so},dt={};U.ext_srgb&&(it.srgb=Pi,it.srgba=oa),U.oes_texture_float&&(_t.float32=_t.float=Du),U.oes_texture_half_float&&(_t.float16=_t["half float"]=Sn),U.webgl_depth_texture&&(s(it,{depth:La,"depth stencil":na}),s(_t,{uint16:wl,uint32:Hs,"depth stencil":_l})),U.webgl_compressed_texture_s3tc&&s(dt,{"rgb s3tc dxt1":Fa,"rgba s3tc dxt1":fi,"rgba s3tc dxt3":ia,"rgba s3tc dxt5":Cu}),U.webgl_compressed_texture_atc&&s(dt,{"rgb atc":El,"rgba atc explicit alpha":id,"rgba atc interpolated alpha":ad}),U.webgl_compressed_texture_pvrtc&&s(dt,{"rgb pvrtc 4bppv1":Ol,"rgb pvrtc 2bppv1":ud,"rgba pvrtc 4bppv1":zs,"rgba pvrtc 2bppv1":sd}),U.webgl_compressed_texture_etc1&&(dt["rgb etc1"]=cd);var Se=Array.prototype.slice.call(A.getParameter(F));Object.keys(dt).forEach(function(B){var Le=dt[B];Se.indexOf(Le)>=0&&(it[B]=Le)});var Ue=Object.keys(it);J.textureFormats=Ue;var st=[];Object.keys(it).forEach(function(B){var Le=it[B];st[Le]=B});var St=[];Object.keys(_t).forEach(function(B){var Le=_t[B];St[Le]=B});var Je=[];Object.keys(ft).forEach(function(B){var Le=ft[B];Je[Le]=B});var At=[];Object.keys(ut).forEach(function(B){var Le=ut[B];At[Le]=B});var tt=[];Object.keys(at).forEach(function(B){var Le=at[B];tt[Le]=B});var vt=Ue.reduce(function(B,Le){var Ce=it[Le];return Ce===cr||Ce===Vt||Ce===cr||Ce===Gr||Ce===La||Ce===na||U.ext_srgb&&(Ce===Pi||Ce===oa)?B[Ce]=Ce:Ce===Ur||Le.indexOf("rgba")>=0?B[Ce]=mt:B[Ce]=Ar,B},{});function rt(){this.internalformat=mt,this.format=mt,this.type=Ba,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=hd,this.width=0,this.height=0,this.channels=0}function yt(B,Le){B.internalformat=Le.internalformat,B.format=Le.format,B.type=Le.type,B.compressed=Le.compressed,B.premultiplyAlpha=Le.premultiplyAlpha,B.flipY=Le.flipY,B.unpackAlignment=Le.unpackAlignment,B.colorSpace=Le.colorSpace,B.width=Le.width,B.height=Le.height,B.channels=Le.channels}function Yt(B,Le){if(!(typeof Le!="object"||!Le)){if("premultiplyAlpha"in Le&&(G.type(Le.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),B.premultiplyAlpha=Le.premultiplyAlpha),"flipY"in Le&&(G.type(Le.flipY,"boolean","invalid texture flip"),B.flipY=Le.flipY),"alignment"in Le&&(G.oneOf(Le.alignment,[1,2,4,8],"invalid texture unpack alignment"),B.unpackAlignment=Le.alignment),"colorSpace"in Le&&(G.parameter(Le.colorSpace,pt,"invalid colorSpace"),B.colorSpace=pt[Le.colorSpace]),"type"in Le){var Ce=Le.type;G(U.oes_texture_float||!(Ce==="float"||Ce==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),G(U.oes_texture_half_float||!(Ce==="half float"||Ce==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),G(U.webgl_depth_texture||!(Ce==="uint16"||Ce==="uint32"||Ce==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),G.parameter(Ce,_t,"invalid texture type"),B.type=_t[Ce]}var jt=B.width,Er=B.height,W=B.channels,D=!1;"shape"in Le?(G(Array.isArray(Le.shape)&&Le.shape.length>=2,"shape must be an array"),jt=Le.shape[0],Er=Le.shape[1],Le.shape.length===3&&(W=Le.shape[2],G(W>0&&W<=4,"invalid number of channels"),D=!0),G(jt>=0&&jt<=J.maxTextureSize,"invalid width"),G(Er>=0&&Er<=J.maxTextureSize,"invalid height")):("radius"in Le&&(jt=Er=Le.radius,G(jt>=0&&jt<=J.maxTextureSize,"invalid radius")),"width"in Le&&(jt=Le.width,G(jt>=0&&jt<=J.maxTextureSize,"invalid width")),"height"in Le&&(Er=Le.height,G(Er>=0&&Er<=J.maxTextureSize,"invalid height")),"channels"in Le&&(W=Le.channels,G(W>0&&W<=4,"invalid number of channels"),D=!0)),B.width=jt|0,B.height=Er|0,B.channels=W|0;var ue=!1;if("format"in Le){var we=Le.format;G(U.webgl_depth_texture||!(we==="depth"||we==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),G.parameter(we,it,"invalid texture format");var Pe=B.internalformat=it[we];B.format=vt[Pe],we in _t&&("type"in Le||(B.type=_t[we])),we in dt&&(B.compressed=!0),ue=!0}!D&&ue?B.channels=Mo[B.format]:D&&!ue?B.channels!==Ys[B.format]&&(B.format=B.internalformat=Ys[B.channels]):ue&&D&&G(B.channels===Mo[B.format],"number of channels inconsistent with specified format")}}function rr(B){A.pixelStorei(Qn,B.flipY),A.pixelStorei(rv,B.premultiplyAlpha),A.pixelStorei(nv,B.colorSpace),A.pixelStorei(tv,B.unpackAlignment)}function Et(){rt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Qe(B,Le){var Ce=null;if(Cn(Le)?Ce=Le:Le&&(G.type(Le,"object","invalid pixel data type"),Yt(B,Le),"x"in Le&&(B.xOffset=Le.x|0),"y"in Le&&(B.yOffset=Le.y|0),Cn(Le.data)&&(Ce=Le.data)),G(!B.compressed||Ce instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Le.copy){G(!Ce,"can not specify copy and data field for the same texture");var jt=Ve.viewportWidth,Er=Ve.viewportHeight;B.width=B.width||jt-B.xOffset,B.height=B.height||Er-B.yOffset,B.needsCopy=!0,G(B.xOffset>=0&&B.xOffset<jt&&B.yOffset>=0&&B.yOffset<Er&&B.width>0&&B.width<=jt&&B.height>0&&B.height<=Er,"copy texture read out of bounds")}else if(!Ce)B.width=B.width||1,B.height=B.height||1,B.channels=B.channels||4;else if(t(Ce))B.channels=B.channels||4,B.data=Ce,!("type"in Le)&&B.type===Ba&&(B.type=bd(Ce));else if(Rl(Ce))B.channels=B.channels||4,_d(B,Ce),B.alignment=1,B.needsFree=!0;else if(Kn(Ce)){var W=Ce.data;!Array.isArray(W)&&B.type===Ba&&(B.type=bd(W));var D=Ce.shape,ue=Ce.stride,we,Pe,le,ie,ge,X;D.length===3?(le=D[2],X=ue[2]):(G(D.length===2,"invalid ndarray pixel data, must be 2 or 3D"),le=1,X=1),we=D[0],Pe=D[1],ie=ue[0],ge=ue[1],B.alignment=1,B.width=we,B.height=Pe,B.channels=le,B.format=B.internalformat=Ys[le],B.needsFree=!0,Ed(B,W,ie,ge,X,Ce.offset)}else if(Dl(Ce)||kl(Ce)||yd(Ce))Dl(Ce)||kl(Ce)?B.element=Ce:B.element=Ce.canvas,B.width=B.element.width,B.height=B.element.height,B.channels=4;else if(gd(Ce))B.element=Ce,B.width=Ce.width,B.height=Ce.height,B.channels=4;else if(md(Ce))B.element=Ce,B.width=Ce.naturalWidth,B.height=Ce.naturalHeight,B.channels=4;else if(Lu(Ce))B.element=Ce,B.width=Ce.videoWidth,B.height=Ce.videoHeight,B.channels=4;else if(Cl(Ce)){var ne=B.width||Ce[0].length,H=B.height||Ce.length,Ee=B.channels;E(Ce[0][0])?Ee=Ee||Ce[0][0].length:Ee=Ee||1;for(var je=yo.shape(Ce),$e=1,Ke=0;Ke<je.length;++Ke)$e*=je[Ke];var He=Dn(B,$e);yo.flatten(Ce,je,"",He),zr(B,He),B.alignment=1,B.width=ne,B.height=H,B.channels=Ee,B.format=B.internalformat=Ys[Ee],B.needsFree=!0}B.type===Du?G(J.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):B.type===Sn&&G(J.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ye(B,Le,Ce){var jt=B.element,Er=B.data,W=B.internalformat,D=B.format,ue=B.type,we=B.width,Pe=B.height;rr(B),jt?A.texImage2D(Le,Ce,D,D,ue,jt):B.compressed?A.compressedTexImage2D(Le,Ce,W,we,Pe,0,Er):B.needsCopy?(Ie(),A.copyTexImage2D(Le,Ce,D,B.xOffset,B.yOffset,we,Pe,0)):A.texImage2D(Le,Ce,D,we,Pe,0,D,ue,Er||null)}function nr(B,Le,Ce,jt,Er){var W=B.element,D=B.data,ue=B.internalformat,we=B.format,Pe=B.type,le=B.width,ie=B.height;rr(B),W?A.texSubImage2D(Le,Er,Ce,jt,we,Pe,W):B.compressed?A.compressedTexSubImage2D(Le,Er,Ce,jt,ue,le,ie,D):B.needsCopy?(Ie(),A.copyTexSubImage2D(Le,Er,Ce,jt,B.xOffset,B.yOffset,le,ie)):A.texSubImage2D(Le,Er,Ce,jt,le,ie,we,Pe,D)}var Te=[];function Lt(){return Te.pop()||new Et}function br(B){B.needsFree&&tn.freeType(B.data),Et.call(B),Te.push(B)}function ur(){rt.call(this),this.genMipmaps=!1,this.mipmapHint=Iu,this.mipmask=0,this.images=Array(16)}function mr(B,Le,Ce){var jt=B.images[0]=Lt();B.mipmask=1,jt.width=B.width=Le,jt.height=B.height=Ce,jt.channels=B.channels=4}function Mr(B,Le){var Ce=null;if(Cn(Le))Ce=B.images[0]=Lt(),yt(Ce,B),Qe(Ce,Le),B.mipmask=1;else if(Yt(B,Le),Array.isArray(Le.mipmap))for(var jt=Le.mipmap,Er=0;Er<jt.length;++Er)Ce=B.images[Er]=Lt(),yt(Ce,B),Ce.width>>=Er,Ce.height>>=Er,Qe(Ce,jt[Er]),B.mipmask|=1<<Er;else Ce=B.images[0]=Lt(),yt(Ce,B),Qe(Ce,Le),B.mipmask=1;yt(B,B.images[0]),B.compressed&&(B.internalformat===Fa||B.internalformat===fi||B.internalformat===ia||B.internalformat===Cu)&&G(B.width%4===0&&B.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ln(B,Le){for(var Ce=B.images,jt=0;jt<Ce.length;++jt){if(!Ce[jt])return;Ye(Ce[jt],Le,jt)}}var wn=[];function xr(){var B=wn.pop()||new ur;rt.call(B),B.mipmask=0;for(var Le=0;Le<16;++Le)B.images[Le]=null;return B}function mn(B){for(var Le=B.images,Ce=0;Ce<Le.length;++Ce)Le[Ce]&&br(Le[Ce]),Le[Ce]=null;wn.push(B)}function $r(){this.minFilter=xl,this.magFilter=xl,this.wrapS=ku,this.wrapT=ku,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Iu}function fn(B,Le){if("min"in Le){var Ce=Le.min;G.parameter(Ce,ut),B.minFilter=ut[Ce],ov.indexOf(B.minFilter)>=0&&!("faces"in Le)&&(B.genMipmaps=!0)}if("mag"in Le){var jt=Le.mag;G.parameter(jt,ft),B.magFilter=ft[jt]}var Er=B.wrapS,W=B.wrapT;if("wrap"in Le){var D=Le.wrap;typeof D=="string"?(G.parameter(D,at),Er=W=at[D]):Array.isArray(D)&&(G.parameter(D[0],at),G.parameter(D[1],at),Er=at[D[0]],W=at[D[1]])}else{if("wrapS"in Le){var ue=Le.wrapS;G.parameter(ue,at),Er=at[ue]}if("wrapT"in Le){var we=Le.wrapT;G.parameter(we,at),W=at[we]}}if(B.wrapS=Er,B.wrapT=W,"anisotropic"in Le){var Pe=Le.anisotropic;G(typeof Pe=="number"&&Pe>=1&&Pe<=J.maxAnisotropic,"aniso samples must be between 1 and "),B.anisotropic=Le.anisotropic}if("mipmap"in Le){var le=!1;switch(typeof Le.mipmap){case"string":G.parameter(Le.mipmap,ot,"invalid mipmap hint"),B.mipmapHint=ot[Le.mipmap],B.genMipmaps=!0,le=!0;break;case"boolean":le=B.genMipmaps=Le.mipmap;break;case"object":G(Array.isArray(Le.mipmap),"invalid mipmap type"),B.genMipmaps=!1,le=!0;break;default:G.raise("invalid mipmap type")}le&&!("min"in Le)&&(B.minFilter=Ws)}}function bn(B,Le){A.texParameteri(Le,Ga,B.minFilter),A.texParameteri(Le,$s,B.magFilter),A.texParameteri(Le,qh,B.wrapS),A.texParameteri(Le,Xs,B.wrapT),U.ext_texture_filter_anisotropic&&A.texParameteri(Le,pd,B.anisotropic),B.genMipmaps&&(A.hint(Jh,B.mipmapHint),A.generateMipmap(Le))}var Wr=0,An={},Gn=J.maxTextureUnits,nn=Array(Gn).map(function(){return null});function lr(B){rt.call(this),this.mipmask=0,this.internalformat=mt,this.id=Wr++,this.refCount=1,this.target=B,this.texture=A.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new $r,Ge.profile&&(this.stats={size:0})}function _n(B){A.activeTexture(Ua),A.bindTexture(B.target,B.texture)}function Nr(){var B=nn[0];B?A.bindTexture(B.target,B.texture):A.bindTexture(Z,null)}function Jt(B){var Le=B.texture;G(Le,"must not double destroy texture");var Ce=B.unit,jt=B.target;Ce>=0&&(A.activeTexture(Ua+Ce),A.bindTexture(jt,null),nn[Ce]=null),A.deleteTexture(Le),B.texture=null,B.params=null,B.pixels=null,B.refCount=0,delete An[B.id],ke.textureCount--}s(lr.prototype,{bind:function(){var B=this;B.bindCount+=1;var Le=B.unit;if(Le<0){for(var Ce=0;Ce<Gn;++Ce){var jt=nn[Ce];if(jt){if(jt.bindCount>0)continue;jt.unit=-1}nn[Ce]=B,Le=Ce;break}Le>=Gn&&G.raise("insufficient number of texture units"),Ge.profile&&ke.maxTextureUnits<Le+1&&(ke.maxTextureUnits=Le+1),B.unit=Le,A.activeTexture(Ua+Le),A.bindTexture(B.target,B.texture)}return Le},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Jt(this)}});function _r(B,Le){var Ce=new lr(Z);An[Ce.id]=Ce,ke.textureCount++;function jt(D,ue){var we=Ce.texInfo;$r.call(we);var Pe=xr();return typeof D=="number"?typeof ue=="number"?mr(Pe,D|0,ue|0):mr(Pe,D|0,D|0):D?(G.type(D,"object","invalid arguments to regl.texture"),fn(we,D),Mr(Pe,D)):mr(Pe,1,1),we.genMipmaps&&(Pe.mipmask=(Pe.width<<1)-1),Ce.mipmask=Pe.mipmask,yt(Ce,Pe),G.texture2D(we,Pe,J),Ce.internalformat=Pe.internalformat,jt.width=Pe.width,jt.height=Pe.height,_n(Ce),ln(Pe,Z),bn(we,Z),Nr(),mn(Pe),Ge.profile&&(Ce.stats.size=Pr(Ce.internalformat,Ce.type,Pe.width,Pe.height,we.genMipmaps,!1)),jt.format=st[Ce.internalformat],jt.type=St[Ce.type],jt.mag=Je[we.magFilter],jt.min=At[we.minFilter],jt.wrapS=tt[we.wrapS],jt.wrapT=tt[we.wrapT],jt}function Er(D,ue,we,Pe){G(!!D,"must specify image data");var le=ue|0,ie=we|0,ge=Pe|0,X=Lt();return yt(X,Ce),X.width=0,X.height=0,Qe(X,D),X.width=X.width||(Ce.width>>ge)-le,X.height=X.height||(Ce.height>>ge)-ie,G(Ce.type===X.type&&Ce.format===X.format&&Ce.internalformat===X.internalformat,"incompatible format for texture.subimage"),G(le>=0&&ie>=0&&le+X.width<=Ce.width&&ie+X.height<=Ce.height,"texture.subimage write out of bounds"),G(Ce.mipmask&1<<ge,"missing mipmap data"),G(X.data||X.element||X.needsCopy,"missing image data"),_n(Ce),nr(X,Z,le,ie,ge),Nr(),br(X),jt}function W(D,ue){var we=D|0,Pe=ue|0||we;if(we===Ce.width&&Pe===Ce.height)return jt;jt.width=Ce.width=we,jt.height=Ce.height=Pe,_n(Ce);for(var le=0;Ce.mipmask>>le;++le){var ie=we>>le,ge=Pe>>le;if(!ie||!ge)break;A.texImage2D(Z,le,Ce.format,ie,ge,0,Ce.format,Ce.type,null)}return Nr(),Ge.profile&&(Ce.stats.size=Pr(Ce.internalformat,Ce.type,we,Pe,!1,!1)),jt}return jt(B,Le),jt.subimage=Er,jt.resize=W,jt._reglType="texture2d",jt._texture=Ce,Ge.profile&&(jt.stats=Ce.stats),jt.destroy=function(){Ce.decRef()},jt}function Sr(B,Le,Ce,jt,Er,W){var D=new lr(Ae);An[D.id]=D,ke.cubeCount++;var ue=new Array(6);function we(ie,ge,X,ne,H,Ee){var je,$e=D.texInfo;for($r.call($e),je=0;je<6;++je)ue[je]=xr();if(typeof ie=="number"||!ie){var Ke=ie|0||1;for(je=0;je<6;++je)mr(ue[je],Ke,Ke)}else if(typeof ie=="object")if(ge)Mr(ue[0],ie),Mr(ue[1],ge),Mr(ue[2],X),Mr(ue[3],ne),Mr(ue[4],H),Mr(ue[5],Ee);else if(fn($e,ie),Yt(D,ie),"faces"in ie){var He=ie.faces;for(G(Array.isArray(He)&&He.length===6,"cube faces must be a length 6 array"),je=0;je<6;++je)G(typeof He[je]=="object"&&!!He[je],"invalid input for cube map face"),yt(ue[je],D),Mr(ue[je],He[je])}else for(je=0;je<6;++je)Mr(ue[je],ie);else G.raise("invalid arguments to cube map");for(yt(D,ue[0]),J.npotTextureCube||G(P(D.width)&&P(D.height),"your browser does not support non power or two texture dimensions"),$e.genMipmaps?D.mipmask=(ue[0].width<<1)-1:D.mipmask=ue[0].mipmask,G.textureCube(D,$e,ue,J),D.internalformat=ue[0].internalformat,we.width=ue[0].width,we.height=ue[0].height,_n(D),je=0;je<6;++je)ln(ue[je],Xe+je);for(bn($e,Ae),Nr(),Ge.profile&&(D.stats.size=Pr(D.internalformat,D.type,we.width,we.height,$e.genMipmaps,!0)),we.format=st[D.internalformat],we.type=St[D.type],we.mag=Je[$e.magFilter],we.min=At[$e.minFilter],we.wrapS=tt[$e.wrapS],we.wrapT=tt[$e.wrapT],je=0;je<6;++je)mn(ue[je]);return we}function Pe(ie,ge,X,ne,H){G(!!ge,"must specify image data"),G(typeof ie=="number"&&ie===(ie|0)&&ie>=0&&ie<6,"invalid face");var Ee=X|0,je=ne|0,$e=H|0,Ke=Lt();return yt(Ke,D),Ke.width=0,Ke.height=0,Qe(Ke,ge),Ke.width=Ke.width||(D.width>>$e)-Ee,Ke.height=Ke.height||(D.height>>$e)-je,G(D.type===Ke.type&&D.format===Ke.format&&D.internalformat===Ke.internalformat,"incompatible format for texture.subimage"),G(Ee>=0&&je>=0&&Ee+Ke.width<=D.width&&je+Ke.height<=D.height,"texture.subimage write out of bounds"),G(D.mipmask&1<<$e,"missing mipmap data"),G(Ke.data||Ke.element||Ke.needsCopy,"missing image data"),_n(D),nr(Ke,Xe+ie,Ee,je,$e),Nr(),br(Ke),we}function le(ie){var ge=ie|0;if(ge!==D.width){we.width=D.width=ge,we.height=D.height=ge,_n(D);for(var X=0;X<6;++X)for(var ne=0;D.mipmask>>ne;++ne)A.texImage2D(Xe+X,ne,D.format,ge>>ne,ge>>ne,0,D.format,D.type,null);return Nr(),Ge.profile&&(D.stats.size=Pr(D.internalformat,D.type,we.width,we.height,!1,!0)),we}}return we(B,Le,Ce,jt,Er,W),we.subimage=Pe,we.resize=le,we._reglType="textureCube",we._texture=D,Ge.profile&&(we.stats=D.stats),we.destroy=function(){D.decRef()},we}function Br(){for(var B=0;B<Gn;++B)A.activeTexture(Ua+B),A.bindTexture(Z,null),nn[B]=null;Nn(An).forEach(Jt),ke.cubeCount=0,ke.textureCount=0}Ge.profile&&(ke.getTotalTextureSize=function(){var B=0;return Object.keys(An).forEach(function(Le){B+=An[Le].stats.size}),B});function ei(){for(var B=0;B<Gn;++B){var Le=nn[B];Le&&(Le.bindCount=0,Le.unit=-1,nn[B]=null)}Nn(An).forEach(function(Ce){Ce.texture=A.createTexture(),A.bindTexture(Ce.target,Ce.texture);for(var jt=0;jt<32;++jt)if(Ce.mipmask&1<<jt)if(Ce.target===Z)A.texImage2D(Z,jt,Ce.internalformat,Ce.width>>jt,Ce.height>>jt,0,Ce.internalformat,Ce.type,null);else for(var Er=0;Er<6;++Er)A.texImage2D(Xe+Er,jt,Ce.internalformat,Ce.width>>jt,Ce.height>>jt,0,Ce.internalformat,Ce.type,null);bn(Ce.texInfo,Ce.target)})}function Yn(){for(var B=0;B<Gn;++B){var Le=nn[B];Le&&(Le.bindCount=0,Le.unit=-1,nn[B]=null),A.activeTexture(Ua+B),A.bindTexture(Z,null),A.bindTexture(Ae,null)}}return{create2D:_r,createCube:Sr,clear:Br,getTexture:function(B){return null},restore:ei,refresh:Yn}}var ir=36161,Kr=32854,Od=32855,Ks=36194,Il=33189,co=36168,vn=34041,Ll=35907,Fl=34836,Bl=34842,Gl=34843,Ro=[];Ro[Kr]=2,Ro[Od]=2,Ro[Ks]=2,Ro[Il]=2,Ro[co]=1,Ro[vn]=4,Ro[Ll]=4,Ro[Fl]=16,Ro[Bl]=8,Ro[Gl]=6;function Ul(A,U,J){return Ro[A]*U*J}var wd=function(A,U,J,Ie,Ve){var ke={rgba4:Kr,rgb565:Ks,"rgb5 a1":Od,depth:Il,stencil:co,"depth stencil":vn};U.ext_srgb&&(ke.srgba=Ll),U.ext_color_buffer_half_float&&(ke.rgba16f=Bl,ke.rgb16f=Gl),U.webgl_color_buffer_float&&(ke.rgba32f=Fl);var Ge=[];Object.keys(ke).forEach(function(it){var dt=ke[it];Ge[dt]=it});var ot=0,at={};function ft(it){this.id=ot++,this.refCount=1,this.renderbuffer=it,this.format=Kr,this.width=0,this.height=0,Ve.profile&&(this.stats={size:0})}ft.prototype.decRef=function(){--this.refCount<=0&&ut(this)};function ut(it){var dt=it.renderbuffer;G(dt,"must not double destroy renderbuffer"),A.bindRenderbuffer(ir,null),A.deleteRenderbuffer(dt),it.renderbuffer=null,it.refCount=0,delete at[it.id],Ie.renderbufferCount--}function pt(it,dt){var Se=new ft(A.createRenderbuffer());at[Se.id]=Se,Ie.renderbufferCount++;function Ue(St,Je){var At=0,tt=0,vt=Kr;if(typeof St=="object"&&St){var rt=St;if("shape"in rt){var yt=rt.shape;G(Array.isArray(yt)&&yt.length>=2,"invalid renderbuffer shape"),At=yt[0]|0,tt=yt[1]|0}else"radius"in rt&&(At=tt=rt.radius|0),"width"in rt&&(At=rt.width|0),"height"in rt&&(tt=rt.height|0);"format"in rt&&(G.parameter(rt.format,ke,"invalid renderbuffer format"),vt=ke[rt.format])}else typeof St=="number"?(At=St|0,typeof Je=="number"?tt=Je|0:tt=At):St?G.raise("invalid arguments to renderbuffer constructor"):At=tt=1;if(G(At>0&&tt>0&&At<=J.maxRenderbufferSize&&tt<=J.maxRenderbufferSize,"invalid renderbuffer size"),!(At===Se.width&&tt===Se.height&&vt===Se.format))return Ue.width=Se.width=At,Ue.height=Se.height=tt,Se.format=vt,A.bindRenderbuffer(ir,Se.renderbuffer),A.renderbufferStorage(ir,vt,At,tt),G(A.getError()===0,"invalid render buffer format"),Ve.profile&&(Se.stats.size=Ul(Se.format,Se.width,Se.height)),Ue.format=Ge[Se.format],Ue}function st(St,Je){var At=St|0,tt=Je|0||At;return At===Se.width&&tt===Se.height||(G(At>0&&tt>0&&At<=J.maxRenderbufferSize&&tt<=J.maxRenderbufferSize,"invalid renderbuffer size"),Ue.width=Se.width=At,Ue.height=Se.height=tt,A.bindRenderbuffer(ir,Se.renderbuffer),A.renderbufferStorage(ir,Se.format,At,tt),G(A.getError()===0,"invalid render buffer format"),Ve.profile&&(Se.stats.size=Ul(Se.format,Se.width,Se.height))),Ue}return Ue(it,dt),Ue.resize=st,Ue._reglType="renderbuffer",Ue._renderbuffer=Se,Ve.profile&&(Ue.stats=Se.stats),Ue.destroy=function(){Se.decRef()},Ue}Ve.profile&&(Ie.getTotalRenderbufferSize=function(){var it=0;return Object.keys(at).forEach(function(dt){it+=at[dt].stats.size}),it});function _t(){Nn(at).forEach(function(it){it.renderbuffer=A.createRenderbuffer(),A.bindRenderbuffer(ir,it.renderbuffer),A.renderbufferStorage(ir,it.format,it.width,it.height)}),A.bindRenderbuffer(ir,null)}return{create:pt,clear:function(){Nn(at).forEach(ut)},restore:_t}},Co=36160,qs=36161,bo=3553,Zs=34069,Js=36064,Do=36096,xd=36128,Sd=33306,Td=36053,iv=36054,av=36055,uv=36057,Fu=36061,sv=36193,Ad=5121,Pd=5126,Nd=6407,Qs=6408,jd=6402,cv=[Nd,Qs],zl=[];zl[Qs]=4,zl[Nd]=3;var ec=[];ec[Ad]=1,ec[Pd]=4,ec[sv]=2;var lv=32854,Hl=32855,fv=36194,dv=33189,pv=36168,Xl=34041,Md=35907,hv=34836,Rd=34842,vv=34843,Cd=[lv,Hl,fv,Md,Rd,vv,hv],za={};za[Td]="complete",za[iv]="incomplete attachment",za[uv]="incomplete dimensions",za[av]="incomplete, missing attachment",za[Fu]="unsupported";function Dd(A,U,J,Ie,Ve,ke){var Ge={cur:null,next:null,dirty:!1,setFBO:null},ot=["rgba"],at=["rgba4","rgb565","rgb5 a1"];U.ext_srgb&&at.push("srgba"),U.ext_color_buffer_half_float&&at.push("rgba16f","rgb16f"),U.webgl_color_buffer_float&&at.push("rgba32f");var ft=["uint8"];U.oes_texture_half_float&&ft.push("half float","float16"),U.oes_texture_float&&ft.push("float","float32");function ut(Et,Qe,Ye){this.target=Et,this.texture=Qe,this.renderbuffer=Ye;var nr=0,Te=0;Qe?(nr=Qe.width,Te=Qe.height):Ye&&(nr=Ye.width,Te=Ye.height),this.width=nr,this.height=Te}function pt(Et){Et&&(Et.texture&&Et.texture._texture.decRef(),Et.renderbuffer&&Et.renderbuffer._renderbuffer.decRef())}function _t(Et,Qe,Ye){if(Et)if(Et.texture){var nr=Et.texture._texture,Te=Math.max(1,nr.width),Lt=Math.max(1,nr.height);G(Te===Qe&&Lt===Ye,"inconsistent width/height for supplied texture"),nr.refCount+=1}else{var br=Et.renderbuffer._renderbuffer;G(br.width===Qe&&br.height===Ye,"inconsistent width/height for renderbuffer"),br.refCount+=1}}function it(Et,Qe){Qe&&(Qe.texture?A.framebufferTexture2D(Co,Et,Qe.target,Qe.texture._texture.texture,0):A.framebufferRenderbuffer(Co,Et,qs,Qe.renderbuffer._renderbuffer.renderbuffer))}function dt(Et){var Qe=bo,Ye=null,nr=null,Te=Et;typeof Et=="object"&&(Te=Et.data,"target"in Et&&(Qe=Et.target|0)),G.type(Te,"function","invalid attachment data");var Lt=Te._reglType;return Lt==="texture2d"?(Ye=Te,G(Qe===bo)):Lt==="textureCube"?(Ye=Te,G(Qe>=Zs&&Qe<Zs+6,"invalid cube map target")):Lt==="renderbuffer"?(nr=Te,Qe=qs):G.raise("invalid regl object for attachment"),new ut(Qe,Ye,nr)}function Se(Et,Qe,Ye,nr,Te){if(Ye){var Lt=Ie.create2D({width:Et,height:Qe,format:nr,type:Te});return Lt._texture.refCount=0,new ut(bo,Lt,null)}else{var br=Ve.create({width:Et,height:Qe,format:nr});return br._renderbuffer.refCount=0,new ut(qs,null,br)}}function Ue(Et){return Et&&(Et.texture||Et.renderbuffer)}function st(Et,Qe,Ye){Et&&(Et.texture?Et.texture.resize(Qe,Ye):Et.renderbuffer&&Et.renderbuffer.resize(Qe,Ye),Et.width=Qe,Et.height=Ye)}var St=0,Je={};function At(){this.id=St++,Je[this.id]=this,this.framebuffer=A.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function tt(Et){Et.colorAttachments.forEach(pt),pt(Et.depthAttachment),pt(Et.stencilAttachment),pt(Et.depthStencilAttachment)}function vt(Et){var Qe=Et.framebuffer;G(Qe,"must not double destroy framebuffer"),A.deleteFramebuffer(Qe),Et.framebuffer=null,ke.framebufferCount--,delete Je[Et.id]}function rt(Et){var Qe;A.bindFramebuffer(Co,Et.framebuffer);var Ye=Et.colorAttachments;for(Qe=0;Qe<Ye.length;++Qe)it(Js+Qe,Ye[Qe]);for(Qe=Ye.length;Qe<J.maxColorAttachments;++Qe)A.framebufferTexture2D(Co,Js+Qe,bo,null,0);A.framebufferTexture2D(Co,Sd,bo,null,0),A.framebufferTexture2D(Co,Do,bo,null,0),A.framebufferTexture2D(Co,xd,bo,null,0),it(Do,Et.depthAttachment),it(xd,Et.stencilAttachment),it(Sd,Et.depthStencilAttachment);var nr=A.checkFramebufferStatus(Co);!A.isContextLost()&&nr!==Td&&G.raise("framebuffer configuration not supported, status = "+za[nr]),A.bindFramebuffer(Co,Ge.next?Ge.next.framebuffer:null),Ge.cur=Ge.next,A.getError()}function yt(Et,Qe){var Ye=new At;ke.framebufferCount++;function nr(Lt,br){var ur;G(Ge.next!==Ye,"can not update framebuffer which is currently in use");var mr=0,Mr=0,ln=!0,wn=!0,xr=null,mn=!0,$r="rgba",fn="uint8",bn=1,Wr=null,An=null,Gn=null,nn=!1;if(typeof Lt=="number")mr=Lt|0,Mr=br|0||mr;else if(!Lt)mr=Mr=1;else{G.type(Lt,"object","invalid arguments for framebuffer");var lr=Lt;if("shape"in lr){var _n=lr.shape;G(Array.isArray(_n)&&_n.length>=2,"invalid shape for framebuffer"),mr=_n[0],Mr=_n[1]}else"radius"in lr&&(mr=Mr=lr.radius),"width"in lr&&(mr=lr.width),"height"in lr&&(Mr=lr.height);("color"in lr||"colors"in lr)&&(xr=lr.color||lr.colors,Array.isArray(xr)&&G(xr.length===1||U.webgl_draw_buffers,"multiple render targets not supported")),xr||("colorCount"in lr&&(bn=lr.colorCount|0,G(bn>0,"invalid color buffer count")),"colorTexture"in lr&&(mn=!!lr.colorTexture,$r="rgba4"),"colorType"in lr&&(fn=lr.colorType,mn?(G(U.oes_texture_float||!(fn==="float"||fn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),G(U.oes_texture_half_float||!(fn==="half float"||fn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):fn==="half float"||fn==="float16"?(G(U.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),$r="rgba16f"):(fn==="float"||fn==="float32")&&(G(U.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),$r="rgba32f"),G.oneOf(fn,ft,"invalid color type")),"colorFormat"in lr&&($r=lr.colorFormat,ot.indexOf($r)>=0?mn=!0:at.indexOf($r)>=0?mn=!1:mn?G.oneOf(lr.colorFormat,ot,"invalid color format for texture"):G.oneOf(lr.colorFormat,at,"invalid color format for renderbuffer"))),("depthTexture"in lr||"depthStencilTexture"in lr)&&(nn=!!(lr.depthTexture||lr.depthStencilTexture),G(!nn||U.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in lr&&(typeof lr.depth=="boolean"?ln=lr.depth:(Wr=lr.depth,wn=!1)),"stencil"in lr&&(typeof lr.stencil=="boolean"?wn=lr.stencil:(An=lr.stencil,ln=!1)),"depthStencil"in lr&&(typeof lr.depthStencil=="boolean"?ln=wn=lr.depthStencil:(Gn=lr.depthStencil,ln=!1,wn=!1))}var Nr=null,Jt=null,_r=null,Sr=null;if(Array.isArray(xr))Nr=xr.map(dt);else if(xr)Nr=[dt(xr)];else for(Nr=new Array(bn),ur=0;ur<bn;++ur)Nr[ur]=Se(mr,Mr,mn,$r,fn);G(U.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),G(Nr.length<=J.maxColorAttachments,"too many color attachments, not supported"),mr=mr||Nr[0].width,Mr=Mr||Nr[0].height,Wr?Jt=dt(Wr):ln&&!wn&&(Jt=Se(mr,Mr,nn,"depth","uint32")),An?_r=dt(An):wn&&!ln&&(_r=Se(mr,Mr,!1,"stencil","uint8")),Gn?Sr=dt(Gn):!Wr&&!An&&wn&&ln&&(Sr=Se(mr,Mr,nn,"depth stencil","depth stencil")),G(!!Wr+!!An+!!Gn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Br=null;for(ur=0;ur<Nr.length;++ur)if(_t(Nr[ur],mr,Mr),G(!Nr[ur]||Nr[ur].texture&&cv.indexOf(Nr[ur].texture._texture.format)>=0||Nr[ur].renderbuffer&&Cd.indexOf(Nr[ur].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ur+" is invalid"),Nr[ur]&&Nr[ur].texture){var ei=zl[Nr[ur].texture._texture.format]*ec[Nr[ur].texture._texture.type];Br===null?Br=ei:G(Br===ei,"all color attachments much have the same number of bits per pixel.")}return _t(Jt,mr,Mr),G(!Jt||Jt.texture&&Jt.texture._texture.format===jd||Jt.renderbuffer&&Jt.renderbuffer._renderbuffer.format===dv,"invalid depth attachment for framebuffer object"),_t(_r,mr,Mr),G(!_r||_r.renderbuffer&&_r.renderbuffer._renderbuffer.format===pv,"invalid stencil attachment for framebuffer object"),_t(Sr,mr,Mr),G(!Sr||Sr.texture&&Sr.texture._texture.format===Xl||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===Xl,"invalid depth-stencil attachment for framebuffer object"),tt(Ye),Ye.width=mr,Ye.height=Mr,Ye.colorAttachments=Nr,Ye.depthAttachment=Jt,Ye.stencilAttachment=_r,Ye.depthStencilAttachment=Sr,nr.color=Nr.map(Ue),nr.depth=Ue(Jt),nr.stencil=Ue(_r),nr.depthStencil=Ue(Sr),nr.width=Ye.width,nr.height=Ye.height,rt(Ye),nr}function Te(Lt,br){G(Ge.next!==Ye,"can not resize a framebuffer which is currently in use");var ur=Math.max(Lt|0,1),mr=Math.max(br|0||ur,1);if(ur===Ye.width&&mr===Ye.height)return nr;for(var Mr=Ye.colorAttachments,ln=0;ln<Mr.length;++ln)st(Mr[ln],ur,mr);return st(Ye.depthAttachment,ur,mr),st(Ye.stencilAttachment,ur,mr),st(Ye.depthStencilAttachment,ur,mr),Ye.width=nr.width=ur,Ye.height=nr.height=mr,rt(Ye),nr}return nr(Et,Qe),s(nr,{resize:Te,_reglType:"framebuffer",_framebuffer:Ye,destroy:function(){vt(Ye),tt(Ye)},use:function(Lt){Ge.setFBO({framebuffer:nr},Lt)}})}function Yt(Et){var Qe=Array(6);function Ye(Te){var Lt;G(Qe.indexOf(Ge.next)<0,"can not update framebuffer which is currently in use");var br={color:null},ur=0,mr=null,Mr="rgba",ln="uint8",wn=1;if(typeof Te=="number")ur=Te|0;else if(!Te)ur=1;else{G.type(Te,"object","invalid arguments for framebuffer");var xr=Te;if("shape"in xr){var mn=xr.shape;G(Array.isArray(mn)&&mn.length>=2,"invalid shape for framebuffer"),G(mn[0]===mn[1],"cube framebuffer must be square"),ur=mn[0]}else"radius"in xr&&(ur=xr.radius|0),"width"in xr?(ur=xr.width|0,"height"in xr&&G(xr.height===ur,"must be square")):"height"in xr&&(ur=xr.height|0);("color"in xr||"colors"in xr)&&(mr=xr.color||xr.colors,Array.isArray(mr)&&G(mr.length===1||U.webgl_draw_buffers,"multiple render targets not supported")),mr||("colorCount"in xr&&(wn=xr.colorCount|0,G(wn>0,"invalid color buffer count")),"colorType"in xr&&(G.oneOf(xr.colorType,ft,"invalid color type"),ln=xr.colorType),"colorFormat"in xr&&(Mr=xr.colorFormat,G.oneOf(xr.colorFormat,ot,"invalid color format for texture"))),"depth"in xr&&(br.depth=xr.depth),"stencil"in xr&&(br.stencil=xr.stencil),"depthStencil"in xr&&(br.depthStencil=xr.depthStencil)}var $r;if(mr)if(Array.isArray(mr))for($r=[],Lt=0;Lt<mr.length;++Lt)$r[Lt]=mr[Lt];else $r=[mr];else{$r=Array(wn);var fn={radius:ur,format:Mr,type:ln};for(Lt=0;Lt<wn;++Lt)$r[Lt]=Ie.createCube(fn)}for(br.color=Array($r.length),Lt=0;Lt<$r.length;++Lt){var bn=$r[Lt];G(typeof bn=="function"&&bn._reglType==="textureCube","invalid cube map"),ur=ur||bn.width,G(bn.width===ur&&bn.height===ur,"invalid cube map shape"),br.color[Lt]={target:Zs,data:$r[Lt]}}for(Lt=0;Lt<6;++Lt){for(var Wr=0;Wr<$r.length;++Wr)br.color[Wr].target=Zs+Lt;Lt>0&&(br.depth=Qe[0].depth,br.stencil=Qe[0].stencil,br.depthStencil=Qe[0].depthStencil),Qe[Lt]?Qe[Lt](br):Qe[Lt]=yt(br)}return s(Ye,{width:ur,height:ur,color:$r})}function nr(Te){var Lt,br=Te|0;if(G(br>0&&br<=J.maxCubeMapSize,"invalid radius for cube fbo"),br===Ye.width)return Ye;var ur=Ye.color;for(Lt=0;Lt<ur.length;++Lt)ur[Lt].resize(br);for(Lt=0;Lt<6;++Lt)Qe[Lt].resize(br);return Ye.width=Ye.height=br,Ye}return Ye(Et),s(Ye,{faces:Qe,resize:nr,_reglType:"framebufferCube",destroy:function(){Qe.forEach(function(Te){Te.destroy()})}})}function rr(){Ge.cur=null,Ge.next=null,Ge.dirty=!0,Nn(Je).forEach(function(Et){Et.framebuffer=A.createFramebuffer(),rt(Et)})}return s(Ge,{getFramebuffer:function(Et){if(typeof Et=="function"&&Et._reglType==="framebuffer"){var Qe=Et._framebuffer;if(Qe instanceof At)return Qe}return null},create:yt,createCube:Yt,clear:function(){Nn(Je).forEach(vt)},restore:rr})}var yv=5126,Vl=34962;function $l(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=yv,this.offset=0,this.stride=0,this.divisor=0}function gv(A,U,J,Ie,Ve){for(var ke=J.maxAttributes,Ge=new Array(ke),ot=0;ot<ke;++ot)Ge[ot]=new $l;var at=0,ft={},ut={Record:$l,scope:{},state:Ge,currentVAO:null,targetVAO:null,restore:_t()?Je:function(){},createVAO:At,getVAO:dt,destroyBuffer:pt,setVAO:_t()?Se:Ue,clear:_t()?st:function(){}};function pt(tt){for(var vt=0;vt<Ge.length;++vt){var rt=Ge[vt];rt.buffer===tt&&(A.disableVertexAttribArray(vt),rt.buffer=null)}}function _t(){return U.oes_vertex_array_object}function it(){return U.angle_instanced_arrays}function dt(tt){return typeof tt=="function"&&tt._vao?tt._vao:null}function Se(tt){if(tt!==ut.currentVAO){var vt=_t();tt?vt.bindVertexArrayOES(tt.vao):vt.bindVertexArrayOES(null),ut.currentVAO=tt}}function Ue(tt){if(tt!==ut.currentVAO){if(tt)tt.bindAttrs();else for(var vt=it(),rt=0;rt<Ge.length;++rt){var yt=Ge[rt];yt.buffer?(A.enableVertexAttribArray(rt),A.vertexAttribPointer(rt,yt.size,yt.type,yt.normalized,yt.stride,yt.offfset),vt&&yt.divisor&&vt.vertexAttribDivisorANGLE(rt,yt.divisor)):(A.disableVertexAttribArray(rt),A.vertexAttrib4f(rt,yt.x,yt.y,yt.z,yt.w))}ut.currentVAO=tt}}function st(){Nn(ft).forEach(function(tt){tt.destroy()})}function St(){this.id=++at,this.attributes=[];var tt=_t();tt?this.vao=tt.createVertexArrayOES():this.vao=null,ft[this.id]=this,this.buffers=[]}St.prototype.bindAttrs=function(){for(var tt=it(),vt=this.attributes,rt=0;rt<vt.length;++rt){var yt=vt[rt];yt.buffer?(A.enableVertexAttribArray(rt),A.bindBuffer(Vl,yt.buffer.buffer),A.vertexAttribPointer(rt,yt.size,yt.type,yt.normalized,yt.stride,yt.offset),tt&&yt.divisor&&tt.vertexAttribDivisorANGLE(rt,yt.divisor)):(A.disableVertexAttribArray(rt),A.vertexAttrib4f(rt,yt.x,yt.y,yt.z,yt.w))}for(var Yt=vt.length;Yt<ke;++Yt)A.disableVertexAttribArray(Yt)},St.prototype.refresh=function(){var tt=_t();tt&&(tt.bindVertexArrayOES(this.vao),this.bindAttrs(),ut.currentVAO=this)},St.prototype.destroy=function(){if(this.vao){var tt=_t();this===ut.currentVAO&&(ut.currentVAO=null,tt.bindVertexArrayOES(null)),tt.deleteVertexArrayOES(this.vao),this.vao=null}ft[this.id]&&(delete ft[this.id],Ie.vaoCount-=1)};function Je(){var tt=_t();tt&&Nn(ft).forEach(function(vt){vt.refresh()})}function At(tt){var vt=new St;Ie.vaoCount+=1;function rt(yt){G(Array.isArray(yt),"arguments to vertex array constructor must be an array"),G(yt.length<ke,"too many attributes"),G(yt.length>0,"must specify at least one attribute");var Yt={},rr=vt.attributes;rr.length=yt.length;for(var Et=0;Et<yt.length;++Et){var Qe=yt[Et],Ye=rr[Et]=new $l,nr=Qe.data||Qe;if(Array.isArray(nr)||t(nr)||Kn(nr)){var Te;vt.buffers[Et]&&(Te=vt.buffers[Et],t(nr)&&Te._buffer.byteLength>=nr.byteLength?Te.subdata(nr):(Te.destroy(),vt.buffers[Et]=null)),vt.buffers[Et]||(Te=vt.buffers[Et]=Ve.create(Qe,Vl,!1,!0)),Ye.buffer=Ve.getBuffer(Te),Ye.size=Ye.buffer.dimension|0,Ye.normalized=!1,Ye.type=Ye.buffer.dtype,Ye.offset=0,Ye.stride=0,Ye.divisor=0,Ye.state=1,Yt[Et]=1}else Ve.getBuffer(Qe)?(Ye.buffer=Ve.getBuffer(Qe),Ye.size=Ye.buffer.dimension|0,Ye.normalized=!1,Ye.type=Ye.buffer.dtype,Ye.offset=0,Ye.stride=0,Ye.divisor=0,Ye.state=1):Ve.getBuffer(Qe.buffer)?(Ye.buffer=Ve.getBuffer(Qe.buffer),Ye.size=(+Qe.size||Ye.buffer.dimension)|0,Ye.normalized=!!Qe.normalized||!1,"type"in Qe?(G.parameter(Qe.type,mo,"invalid buffer type"),Ye.type=mo[Qe.type]):Ye.type=Ye.buffer.dtype,Ye.offset=(Qe.offset||0)|0,Ye.stride=(Qe.stride||0)|0,Ye.divisor=(Qe.divisor||0)|0,Ye.state=1,G(Ye.size>=1&&Ye.size<=4,"size must be between 1 and 4"),G(Ye.offset>=0,"invalid offset"),G(Ye.stride>=0&&Ye.stride<=255,"stride must be between 0 and 255"),G(Ye.divisor>=0,"divisor must be positive"),G(!Ye.divisor||!!U.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Qe?(G(Et>0,"first attribute must not be a constant"),Ye.x=+Qe.x||0,Ye.y=+Qe.y||0,Ye.z=+Qe.z||0,Ye.w=+Qe.w||0,Ye.state=2):G(!1,"invalid attribute spec for location "+Et)}for(var Lt=0;Lt<vt.buffers.length;++Lt)!Yt[Lt]&&vt.buffers[Lt]&&(vt.buffers[Lt].destroy(),vt.buffers[Lt]=null);return vt.refresh(),rt}return rt.destroy=function(){for(var yt=0;yt<vt.buffers.length;++yt)vt.buffers[yt]&&vt.buffers[yt].destroy();vt.buffers.length=0,vt.destroy()},rt._vao=vt,rt._reglType="vao",rt(tt)}return ut}var Wl=35632,mv=35633,kd=35718,Id=35721;function bv(A,U,J,Ie){var Ve={},ke={};function Ge(Se,Ue,st,St){this.name=Se,this.id=Ue,this.location=st,this.info=St}function ot(Se,Ue){for(var st=0;st<Se.length;++st)if(Se[st].id===Ue.id){Se[st].location=Ue.location;return}Se.push(Ue)}function at(Se,Ue,st){var St=Se===Wl?Ve:ke,Je=St[Ue];if(!Je){var At=U.str(Ue);Je=A.createShader(Se),A.shaderSource(Je,At),A.compileShader(Je),G.shaderError(A,Je,At,Se,st),St[Ue]=Je}return Je}var ft={},ut=[],pt=0;function _t(Se,Ue){this.id=pt++,this.fragId=Se,this.vertId=Ue,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ie.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function it(Se,Ue,st){var St,Je,At=at(Wl,Se.fragId),tt=at(mv,Se.vertId),vt=Se.program=A.createProgram();if(A.attachShader(vt,At),A.attachShader(vt,tt),st)for(St=0;St<st.length;++St){var rt=st[St];A.bindAttribLocation(vt,rt[0],rt[1])}A.linkProgram(vt),G.linkError(A,vt,U.str(Se.fragId),U.str(Se.vertId),Ue);var yt=A.getProgramParameter(vt,kd);Ie.profile&&(Se.stats.uniformsCount=yt);var Yt=Se.uniforms;for(St=0;St<yt;++St)if(Je=A.getActiveUniform(vt,St),Je)if(Je.size>1)for(var rr=0;rr<Je.size;++rr){var Et=Je.name.replace("[0]","["+rr+"]");ot(Yt,new Ge(Et,U.id(Et),A.getUniformLocation(vt,Et),Je))}else ot(Yt,new Ge(Je.name,U.id(Je.name),A.getUniformLocation(vt,Je.name),Je));var Qe=A.getProgramParameter(vt,Id);Ie.profile&&(Se.stats.attributesCount=Qe);var Ye=Se.attributes;for(St=0;St<Qe;++St)Je=A.getActiveAttrib(vt,St),Je&&ot(Ye,new Ge(Je.name,U.id(Je.name),A.getAttribLocation(vt,Je.name),Je))}Ie.profile&&(J.getMaxUniformsCount=function(){var Se=0;return ut.forEach(function(Ue){Ue.stats.uniformsCount>Se&&(Se=Ue.stats.uniformsCount)}),Se},J.getMaxAttributesCount=function(){var Se=0;return ut.forEach(function(Ue){Ue.stats.attributesCount>Se&&(Se=Ue.stats.attributesCount)}),Se});function dt(){Ve={},ke={};for(var Se=0;Se<ut.length;++Se)it(ut[Se],null,ut[Se].attributes.map(function(Ue){return[Ue.location,Ue.name]}))}return{clear:function(){var Se=A.deleteShader.bind(A);Nn(Ve).forEach(Se),Ve={},Nn(ke).forEach(Se),ke={},ut.forEach(function(Ue){A.deleteProgram(Ue.program)}),ut.length=0,ft={},J.shaderCount=0},program:function(Se,Ue,st,St){G.command(Se>=0,"missing vertex shader",st),G.command(Ue>=0,"missing fragment shader",st);var Je=ft[Ue];Je||(Je=ft[Ue]={});var At=Je[Se];if(At&&(At.refCount++,!St))return At;var tt=new _t(Ue,Se);return J.shaderCount++,it(tt,st,St),At||(Je[Se]=tt),ut.push(tt),s(tt,{destroy:function(){if(tt.refCount--,tt.refCount<=0){A.deleteProgram(tt.program);var vt=ut.indexOf(tt);ut.splice(vt,1),J.shaderCount--}Je[tt.vertId].refCount<=0&&(A.deleteShader(ke[tt.vertId]),delete ke[tt.vertId],delete ft[tt.fragId][tt.vertId]),Object.keys(ft[tt.fragId]).length||(A.deleteShader(Ve[tt.fragId]),delete Ve[tt.fragId],delete ft[tt.fragId])}})},restore:dt,shader:at,frag:-1,vert:-1}}var Qr=6408,Bu=5121,cn=3333,Ha=5126;function _v(A,U,J,Ie,Ve,ke,Ge){function ot(ut){var pt;U.next===null?(G(Ve.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),pt=Bu):(G(U.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),pt=U.next.colorAttachments[0].texture._texture.type,ke.oes_texture_float?(G(pt===Bu||pt===Ha,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),pt===Ha&&G(Ge.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):G(pt===Bu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var _t=0,it=0,dt=Ie.framebufferWidth,Se=Ie.framebufferHeight,Ue=null;t(ut)?Ue=ut:ut&&(G.type(ut,"object","invalid arguments to regl.read()"),_t=ut.x|0,it=ut.y|0,G(_t>=0&&_t<Ie.framebufferWidth,"invalid x offset for regl.read"),G(it>=0&&it<Ie.framebufferHeight,"invalid y offset for regl.read"),dt=(ut.width||Ie.framebufferWidth-_t)|0,Se=(ut.height||Ie.framebufferHeight-it)|0,Ue=ut.data||null),Ue&&(pt===Bu?G(Ue instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):pt===Ha&&G(Ue instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),G(dt>0&&dt+_t<=Ie.framebufferWidth,"invalid width for read pixels"),G(Se>0&&Se+it<=Ie.framebufferHeight,"invalid height for read pixels"),J();var st=dt*Se*4;return Ue||(pt===Bu?Ue=new Uint8Array(st):pt===Ha&&(Ue=Ue||new Float32Array(st))),G.isTypedArray(Ue,"data buffer for regl.read() must be a typedarray"),G(Ue.byteLength>=st,"data buffer for regl.read() too small"),A.pixelStorei(cn,4),A.readPixels(_t,it,dt,Se,Qr,pt,Ue),Ue}function at(ut){var pt;return U.setFBO({framebuffer:ut.framebuffer},function(){pt=ot(ut)}),pt}function ft(ut){return!ut||!("framebuffer"in ut)?ot(ut):at(ut)}return ft}function Xa(A){return Array.prototype.slice.call(A)}function Va(A){return Xa(A).join("")}function Ld(){var A=0,U=[],J=[];function Ie(pt){for(var _t=0;_t<J.length;++_t)if(J[_t]===pt)return U[_t];var it="g"+A++;return U.push(it),J.push(pt),it}function Ve(){var pt=[];function _t(){pt.push.apply(pt,Xa(arguments))}var it=[];function dt(){var Se="v"+A++;return it.push(Se),arguments.length>0&&(pt.push(Se,"="),pt.push.apply(pt,Xa(arguments)),pt.push(";")),Se}return s(_t,{def:dt,toString:function(){return Va([it.length>0?"var "+it.join(",")+";":"",Va(pt)])}})}function ke(){var pt=Ve(),_t=Ve(),it=pt.toString,dt=_t.toString;function Se(Ue,st){_t(Ue,st,"=",pt.def(Ue,st),";")}return s(function(){pt.apply(pt,Xa(arguments))},{def:pt.def,entry:pt,exit:_t,save:Se,set:function(Ue,st,St){Se(Ue,st),pt(Ue,st,"=",St,";")},toString:function(){return it()+dt()}})}function Ge(){var pt=Va(arguments),_t=ke(),it=ke(),dt=_t.toString,Se=it.toString;return s(_t,{then:function(){return _t.apply(_t,Xa(arguments)),this},else:function(){return it.apply(it,Xa(arguments)),this},toString:function(){var Ue=Se();return Ue&&(Ue="else{"+Ue+"}"),Va(["if(",pt,"){",dt(),"}",Ue])}})}var ot=Ve(),at={};function ft(pt,_t){var it=[];function dt(){var Je="a"+it.length;return it.push(Je),Je}_t=_t||0;for(var Se=0;Se<_t;++Se)dt();var Ue=ke(),st=Ue.toString,St=at[pt]=s(Ue,{arg:dt,toString:function(){return Va(["function(",it.join(),"){",st(),"}"])}});return St}function ut(){var pt=['"use strict";',ot,"return {"];Object.keys(at).forEach(function(dt){pt.push('"',dt,'":',at[dt].toString(),",")}),pt.push("}");var _t=Va(pt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),it=Function.apply(null,U.concat(_t));return it.apply(null,J)}return{global:ot,link:Ie,block:Ve,proc:ft,scope:ke,cond:Ge,compile:ut}}var $a="xyzw".split(""),Fd=5121,Wa=1,Gu=2,Yl=0,Kl=1,ql=2,tc=3,rc=4,Zl=5,Bd=6,Gd="dither",di="blend.enable",Jl="blend.color",Uu="blend.equation",nc="blend.func",oc="depth.enable",ic="depth.func",Ql="depth.range",Ud="depth.mask",ef="colorMask",zd="cull.enable",Hd="cull.face",kn="frontFace",zu="lineWidth",Xd="polygonOffset.enable",Hu="polygonOffset.offset",pi="sample.alpha",Vd="sample.enable",ua="sample.coverage",ac="stencil.enable",tf="stencil.mask",uc="stencil.func",rf="stencil.opFront",nt="stencil.opBack",nf="scissor.enable",Xu="scissor.box",Ko="viewport",Ya="profile",ji="framebuffer",Ka="vert",qa="frag",Mi="elements",Ri="primitive",Ci="count",Vu="offset",$u="instances",Za="vao",sc="Width",cc="Height",sa=ji+sc,ca=ji+cc,$d=Ko+sc,Wd=Ko+cc,of="drawingBuffer",lc=of+sc,Wu=of+cc,Ev=[nc,Uu,uc,rf,nt,ua,Ko,Xu,Hu],eo=34962,Di=34963,Ov=35632,_o=35633,af=3553,uf=34067,Yd=2884,Kd=3042,qd=3024,Zd=2960,Jd=2929,sf=3089,Yu=32823,$n=32926,wv=32928,cf=5126,Ja=35664,Ku=35665,Hn=35666,yn=5124,fc=35667,to=35668,ar=35669,qu=35670,Qa=35671,eu=35672,Zu=35673,tu=35674,Ju=35675,Qu=35676,la=35678,es=35680,dc=4,ts=1028,fa=1029,lf=2304,ki=2305,Qd=32775,wr=32776,ep=519,qo=7680,pc=0,tp=1,ff=32774,rp=513,df=36160,xv=36064,Zo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},np=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Jo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ii={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},hc={frag:Ov,vert:_o},pf={cw:lf,ccw:ki};function vc(A){return Array.isArray(A)||t(A)||Kn(A)}function ru(A){return A.sort(function(U,J){return U===Ko?-1:J===Ko?1:U<J?-1:1})}function gn(A,U,J,Ie){this.thisDep=A,this.contextDep=U,this.propDep=J,this.append=Ie}function Qo(A){return A&&!(A.thisDep||A.contextDep||A.propDep)}function Ir(A){return new gn(!1,!1,!1,A)}function Wn(A,U){var J=A.type;if(J===Yl){var Ie=A.data.length;return new gn(!0,Ie>=1,Ie>=2,U)}else if(J===rc){var Ve=A.data;return new gn(Ve.thisDep,Ve.contextDep,Ve.propDep,U)}else{if(J===Zl)return new gn(!1,!1,!1,U);if(J===Bd){for(var ke=!1,Ge=!1,ot=!1,at=0;at<A.data.length;++at){var ft=A.data[at];if(ft.type===Kl)ot=!0;else if(ft.type===ql)Ge=!0;else if(ft.type===tc)ke=!0;else if(ft.type===Yl){ke=!0;var ut=ft.data;ut>=1&&(Ge=!0),ut>=2&&(ot=!0)}else ft.type===rc&&(ke=ke||ft.data.thisDep,Ge=Ge||ft.data.contextDep,ot=ot||ft.data.propDep)}return new gn(ke,Ge,ot,U)}else return new gn(J===tc,J===ql,J===Kl,U)}}var nu=new gn(!1,!1,!1,function(){});function Sv(A,U,J,Ie,Ve,ke,Ge,ot,at,ft,ut,pt,_t,it,dt){var Se=ft.Record,Ue={add:32774,subtract:32778,"reverse subtract":32779};J.ext_blend_minmax&&(Ue.min=Qd,Ue.max=wr);var st=J.angle_instanced_arrays,St=J.webgl_draw_buffers,Je={dirty:!0,profile:dt.profile},At={},tt=[],vt={},rt={};function yt(W){return W.replace(".","_")}function Yt(W,D,ue){var we=yt(W);tt.push(W),At[we]=Je[we]=!!ue,vt[we]=D}function rr(W,D,ue){var we=yt(W);tt.push(W),Array.isArray(ue)?(Je[we]=ue.slice(),At[we]=ue.slice()):Je[we]=At[we]=ue,rt[we]=D}Yt(Gd,qd),Yt(di,Kd),rr(Jl,"blendColor",[0,0,0,0]),rr(Uu,"blendEquationSeparate",[ff,ff]),rr(nc,"blendFuncSeparate",[tp,pc,tp,pc]),Yt(oc,Jd,!0),rr(ic,"depthFunc",rp),rr(Ql,"depthRange",[0,1]),rr(Ud,"depthMask",!0),rr(ef,ef,[!0,!0,!0,!0]),Yt(zd,Yd),rr(Hd,"cullFace",fa),rr(kn,kn,ki),rr(zu,zu,1),Yt(Xd,Yu),rr(Hu,"polygonOffset",[0,0]),Yt(pi,$n),Yt(Vd,wv),rr(ua,"sampleCoverage",[1,!1]),Yt(ac,Zd),rr(tf,"stencilMask",-1),rr(uc,"stencilFunc",[ep,0,-1]),rr(rf,"stencilOpSeparate",[ts,qo,qo,qo]),rr(nt,"stencilOpSeparate",[fa,qo,qo,qo]),Yt(nf,sf),rr(Xu,"scissor",[0,0,A.drawingBufferWidth,A.drawingBufferHeight]),rr(Ko,Ko,[0,0,A.drawingBufferWidth,A.drawingBufferHeight]);var Et={gl:A,context:_t,strings:U,next:At,current:Je,draw:pt,elements:ke,buffer:Ve,shader:ut,attributes:ft.state,vao:ft,uniforms:at,framebuffer:ot,extensions:J,timer:it,isBufferArgs:vc},Qe={primTypes:jn,compareFuncs:Jo,blendFuncs:Zo,blendEquations:Ue,stencilOps:Ii,glTypes:mo,orientationType:pf};G.optional(function(){Et.isArrayLike=E}),St&&(Qe.backBuffer=[fa],Qe.drawBuffer=kr(Ie.maxDrawbuffers,function(W){return W===0?[0]:kr(W,function(D){return xv+D})}));var Ye=0;function nr(){var W=Ld(),D=W.link,ue=W.global;W.id=Ye++,W.batchId="0";var we=D(Et),Pe=W.shared={props:"a0"};Object.keys(Et).forEach(function(ne){Pe[ne]=ue.def(we,".",ne)}),G.optional(function(){W.CHECK=D(G),W.commandStr=G.guessCommand(),W.command=D(W.commandStr),W.assert=function(ne,H,Ee){ne("if(!(",H,"))",this.CHECK,".commandRaise(",D(Ee),",",this.command,");")},Qe.invalidBlendCombinations=np});var le=W.next={},ie=W.current={};Object.keys(rt).forEach(function(ne){Array.isArray(Je[ne])&&(le[ne]=ue.def(Pe.next,".",ne),ie[ne]=ue.def(Pe.current,".",ne))});var ge=W.constants={};Object.keys(Qe).forEach(function(ne){ge[ne]=ue.def(JSON.stringify(Qe[ne]))}),W.invoke=function(ne,H){switch(H.type){case Yl:var Ee=["this",Pe.context,Pe.props,W.batchId];return ne.def(D(H.data),".call(",Ee.slice(0,Math.max(H.data.length+1,4)),")");case Kl:return ne.def(Pe.props,H.data);case ql:return ne.def(Pe.context,H.data);case tc:return ne.def("this",H.data);case rc:return H.data.append(W,ne),H.data.ref;case Zl:return H.data.toString();case Bd:return H.data.map(function(je){return W.invoke(ne,je)})}},W.attribCache={};var X={};return W.scopeAttrib=function(ne){var H=U.id(ne);if(H in X)return X[H];var Ee=ft.scope[H];Ee||(Ee=ft.scope[H]=new Se);var je=X[H]=D(Ee);return je},W}function Te(W){var D=W.static,ue=W.dynamic,we;if(Ya in D){var Pe=!!D[Ya];we=Ir(function(ie,ge){return Pe}),we.enable=Pe}else if(Ya in ue){var le=ue[Ya];we=Wn(le,function(ie,ge){return ie.invoke(ge,le)})}return we}function Lt(W,D){var ue=W.static,we=W.dynamic;if(ji in ue){var Pe=ue[ji];return Pe?(Pe=ot.getFramebuffer(Pe),G.command(Pe,"invalid framebuffer object"),Ir(function(ie,ge){var X=ie.link(Pe),ne=ie.shared;ge.set(ne.framebuffer,".next",X);var H=ne.context;return ge.set(H,"."+sa,X+".width"),ge.set(H,"."+ca,X+".height"),X})):Ir(function(ie,ge){var X=ie.shared;ge.set(X.framebuffer,".next","null");var ne=X.context;return ge.set(ne,"."+sa,ne+"."+lc),ge.set(ne,"."+ca,ne+"."+Wu),"null"})}else if(ji in we){var le=we[ji];return Wn(le,function(ie,ge){var X=ie.invoke(ge,le),ne=ie.shared,H=ne.framebuffer,Ee=ge.def(H,".getFramebuffer(",X,")");G.optional(function(){ie.assert(ge,"!"+X+"||"+Ee,"invalid framebuffer object")}),ge.set(H,".next",Ee);var je=ne.context;return ge.set(je,"."+sa,Ee+"?"+Ee+".width:"+je+"."+lc),ge.set(je,"."+ca,Ee+"?"+Ee+".height:"+je+"."+Wu),Ee})}else return null}function br(W,D,ue){var we=W.static,Pe=W.dynamic;function le(X){if(X in we){var ne=we[X];G.commandType(ne,"object","invalid "+X,ue.commandStr);var H=!0,Ee=ne.x|0,je=ne.y|0,$e,Ke;return"width"in ne?($e=ne.width|0,G.command($e>=0,"invalid "+X,ue.commandStr)):H=!1,"height"in ne?(Ke=ne.height|0,G.command(Ke>=0,"invalid "+X,ue.commandStr)):H=!1,new gn(!H&&D&&D.thisDep,!H&&D&&D.contextDep,!H&&D&&D.propDep,function(Ut,hr){var It=Ut.shared.context,Qt=$e;"width"in ne||(Qt=hr.def(It,".",sa,"-",Ee));var fr=Ke;return"height"in ne||(fr=hr.def(It,".",ca,"-",je)),[Ee,je,Qt,fr]})}else if(X in Pe){var He=Pe[X],ct=Wn(He,function(Ut,hr){var It=Ut.invoke(hr,He);G.optional(function(){Ut.assert(hr,It+"&&typeof "+It+'==="object"',"invalid "+X)});var Qt=Ut.shared.context,fr=hr.def(It,".x|0"),jr=hr.def(It,".y|0"),on=hr.def('"width" in ',It,"?",It,".width|0:","(",Qt,".",sa,"-",fr,")"),ro=hr.def('"height" in ',It,"?",It,".height|0:","(",Qt,".",ca,"-",jr,")");return G.optional(function(){Ut.assert(hr,on+">=0&&"+ro+">=0","invalid "+X)}),[fr,jr,on,ro]});return D&&(ct.thisDep=ct.thisDep||D.thisDep,ct.contextDep=ct.contextDep||D.contextDep,ct.propDep=ct.propDep||D.propDep),ct}else return D?new gn(D.thisDep,D.contextDep,D.propDep,function(Ut,hr){var It=Ut.shared.context;return[0,0,hr.def(It,".",sa),hr.def(It,".",ca)]}):null}var ie=le(Ko);if(ie){var ge=ie;ie=new gn(ie.thisDep,ie.contextDep,ie.propDep,function(X,ne){var H=ge.append(X,ne),Ee=X.shared.context;return ne.set(Ee,"."+$d,H[2]),ne.set(Ee,"."+Wd,H[3]),H})}return{viewport:ie,scissor_box:le(Xu)}}function ur(W,D){var ue=W.static,we=typeof ue[qa]=="string"&&typeof ue[Ka]=="string";if(we){if(Object.keys(D.dynamic).length>0)return null;var Pe=D.static,le=Object.keys(Pe);if(le.length>0&&typeof Pe[le[0]]=="number"){for(var ie=[],ge=0;ge<le.length;++ge)G(typeof Pe[le[ge]]=="number","must specify all vertex attribute locations when using vaos"),ie.push([Pe[le[ge]]|0,le[ge]]);return ie}}return null}function mr(W,D,ue){var we=W.static,Pe=W.dynamic;function le(H){if(H in we){var Ee=U.id(we[H]);G.optional(function(){ut.shader(hc[H],Ee,G.guessCommand())});var je=Ir(function(){return Ee});return je.id=Ee,je}else if(H in Pe){var $e=Pe[H];return Wn($e,function(Ke,He){var ct=Ke.invoke(He,$e),Ut=He.def(Ke.shared.strings,".id(",ct,")");return G.optional(function(){He(Ke.shared.shader,".shader(",hc[H],",",Ut,",",Ke.command,");")}),Ut})}return null}var ie=le(qa),ge=le(Ka),X=null,ne;return Qo(ie)&&Qo(ge)?(X=ut.program(ge.id,ie.id,null,ue),ne=Ir(function(H,Ee){return H.link(X)})):ne=new gn(ie&&ie.thisDep||ge&&ge.thisDep,ie&&ie.contextDep||ge&&ge.contextDep,ie&&ie.propDep||ge&&ge.propDep,function(H,Ee){var je=H.shared.shader,$e;ie?$e=ie.append(H,Ee):$e=Ee.def(je,".",qa);var Ke;ge?Ke=ge.append(H,Ee):Ke=Ee.def(je,".",Ka);var He=je+".program("+Ke+","+$e;return G.optional(function(){He+=","+H.command}),Ee.def(He+")")}),{frag:ie,vert:ge,progVar:ne,program:X}}function Mr(W,D){var ue=W.static,we=W.dynamic;function Pe(){if(Mi in ue){var H=ue[Mi];vc(H)?H=ke.getElements(ke.create(H,!0)):H&&(H=ke.getElements(H),G.command(H,"invalid elements",D.commandStr));var Ee=Ir(function($e,Ke){if(H){var He=$e.link(H);return $e.ELEMENTS=He,He}return $e.ELEMENTS=null,null});return Ee.value=H,Ee}else if(Mi in we){var je=we[Mi];return Wn(je,function($e,Ke){var He=$e.shared,ct=He.isBufferArgs,Ut=He.elements,hr=$e.invoke(Ke,je),It=Ke.def("null"),Qt=Ke.def(ct,"(",hr,")"),fr=$e.cond(Qt).then(It,"=",Ut,".createStream(",hr,");").else(It,"=",Ut,".getElements(",hr,");");return G.optional(function(){$e.assert(fr.else,"!"+hr+"||"+It,"invalid elements")}),Ke.entry(fr),Ke.exit($e.cond(Qt).then(Ut,".destroyStream(",It,");")),$e.ELEMENTS=It,It})}return null}var le=Pe();function ie(){if(Ri in ue){var H=ue[Ri];return G.commandParameter(H,jn,"invalid primitve",D.commandStr),Ir(function(je,$e){return jn[H]})}else if(Ri in we){var Ee=we[Ri];return Wn(Ee,function(je,$e){var Ke=je.constants.primTypes,He=je.invoke($e,Ee);return G.optional(function(){je.assert($e,He+" in "+Ke,"invalid primitive, must be one of "+Object.keys(jn))}),$e.def(Ke,"[",He,"]")})}else if(le)return Qo(le)?le.value?Ir(function(je,$e){return $e.def(je.ELEMENTS,".primType")}):Ir(function(){return dc}):new gn(le.thisDep,le.contextDep,le.propDep,function(je,$e){var Ke=je.ELEMENTS;return $e.def(Ke,"?",Ke,".primType:",dc)});return null}function ge(H,Ee){if(H in ue){var je=ue[H]|0;return G.command(!Ee||je>=0,"invalid "+H,D.commandStr),Ir(function(Ke,He){return Ee&&(Ke.OFFSET=je),je})}else if(H in we){var $e=we[H];return Wn($e,function(Ke,He){var ct=Ke.invoke(He,$e);return Ee&&(Ke.OFFSET=ct,G.optional(function(){Ke.assert(He,ct+">=0","invalid "+H)})),ct})}else if(Ee&&le)return Ir(function(Ke,He){return Ke.OFFSET="0",0});return null}var X=ge(Vu,!0);function ne(){if(Ci in ue){var H=ue[Ci]|0;return G.command(typeof H=="number"&&H>=0,"invalid vertex count",D.commandStr),Ir(function(){return H})}else if(Ci in we){var Ee=we[Ci];return Wn(Ee,function(Ke,He){var ct=Ke.invoke(He,Ee);return G.optional(function(){Ke.assert(He,"typeof "+ct+'==="number"&&'+ct+">=0&&"+ct+"===("+ct+"|0)","invalid vertex count")}),ct})}else if(le)if(Qo(le)){if(le)return X?new gn(X.thisDep,X.contextDep,X.propDep,function(Ke,He){var ct=He.def(Ke.ELEMENTS,".vertCount-",Ke.OFFSET);return G.optional(function(){Ke.assert(He,ct+">=0","invalid vertex offset/element buffer too small")}),ct}):Ir(function(Ke,He){return He.def(Ke.ELEMENTS,".vertCount")});var je=Ir(function(){return-1});return G.optional(function(){je.MISSING=!0}),je}else{var $e=new gn(le.thisDep||X.thisDep,le.contextDep||X.contextDep,le.propDep||X.propDep,function(Ke,He){var ct=Ke.ELEMENTS;return Ke.OFFSET?He.def(ct,"?",ct,".vertCount-",Ke.OFFSET,":-1"):He.def(ct,"?",ct,".vertCount:-1")});return G.optional(function(){$e.DYNAMIC=!0}),$e}return null}return{elements:le,primitive:ie(),count:ne(),instances:ge($u,!1),offset:X}}function ln(W,D){var ue=W.static,we=W.dynamic,Pe={};return tt.forEach(function(le){var ie=yt(le);function ge(X,ne){if(le in ue){var H=X(ue[le]);Pe[ie]=Ir(function(){return H})}else if(le in we){var Ee=we[le];Pe[ie]=Wn(Ee,function(je,$e){return ne(je,$e,je.invoke($e,Ee))})}}switch(le){case zd:case di:case Gd:case ac:case oc:case nf:case Xd:case pi:case Vd:case Ud:return ge(function(X){return G.commandType(X,"boolean",le,D.commandStr),X},function(X,ne,H){return G.optional(function(){X.assert(ne,"typeof "+H+'==="boolean"',"invalid flag "+le,X.commandStr)}),H});case ic:return ge(function(X){return G.commandParameter(X,Jo,"invalid "+le,D.commandStr),Jo[X]},function(X,ne,H){var Ee=X.constants.compareFuncs;return G.optional(function(){X.assert(ne,H+" in "+Ee,"invalid "+le+", must be one of "+Object.keys(Jo))}),ne.def(Ee,"[",H,"]")});case Ql:return ge(function(X){return G.command(E(X)&&X.length===2&&typeof X[0]=="number"&&typeof X[1]=="number"&&X[0]<=X[1],"depth range is 2d array",D.commandStr),X},function(X,ne,H){G.optional(function(){X.assert(ne,X.shared.isArrayLike+"("+H+")&&"+H+".length===2&&typeof "+H+'[0]==="number"&&typeof '+H+'[1]==="number"&&'+H+"[0]<="+H+"[1]","depth range must be a 2d array")});var Ee=ne.def("+",H,"[0]"),je=ne.def("+",H,"[1]");return[Ee,je]});case nc:return ge(function(X){G.commandType(X,"object","blend.func",D.commandStr);var ne="srcRGB"in X?X.srcRGB:X.src,H="srcAlpha"in X?X.srcAlpha:X.src,Ee="dstRGB"in X?X.dstRGB:X.dst,je="dstAlpha"in X?X.dstAlpha:X.dst;return G.commandParameter(ne,Zo,ie+".srcRGB",D.commandStr),G.commandParameter(H,Zo,ie+".srcAlpha",D.commandStr),G.commandParameter(Ee,Zo,ie+".dstRGB",D.commandStr),G.commandParameter(je,Zo,ie+".dstAlpha",D.commandStr),G.command(np.indexOf(ne+", "+Ee)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ne+", "+Ee+")",D.commandStr),[Zo[ne],Zo[Ee],Zo[H],Zo[je]]},function(X,ne,H){var Ee=X.constants.blendFuncs;G.optional(function(){X.assert(ne,H+"&&typeof "+H+'==="object"',"invalid blend func, must be an object")});function je(It,Qt){var fr=ne.def('"',It,Qt,'" in ',H,"?",H,".",It,Qt,":",H,".",It);return G.optional(function(){X.assert(ne,fr+" in "+Ee,"invalid "+le+"."+It+Qt+", must be one of "+Object.keys(Zo))}),fr}var $e=je("src","RGB"),Ke=je("dst","RGB");G.optional(function(){var It=X.constants.invalidBlendCombinations;X.assert(ne,It+".indexOf("+$e+'+", "+'+Ke+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var He=ne.def(Ee,"[",$e,"]"),ct=ne.def(Ee,"[",je("src","Alpha"),"]"),Ut=ne.def(Ee,"[",Ke,"]"),hr=ne.def(Ee,"[",je("dst","Alpha"),"]");return[He,Ut,ct,hr]});case Uu:return ge(function(X){if(typeof X=="string")return G.commandParameter(X,Ue,"invalid "+le,D.commandStr),[Ue[X],Ue[X]];if(typeof X=="object")return G.commandParameter(X.rgb,Ue,le+".rgb",D.commandStr),G.commandParameter(X.alpha,Ue,le+".alpha",D.commandStr),[Ue[X.rgb],Ue[X.alpha]];G.commandRaise("invalid blend.equation",D.commandStr)},function(X,ne,H){var Ee=X.constants.blendEquations,je=ne.def(),$e=ne.def(),Ke=X.cond("typeof ",H,'==="string"');return G.optional(function(){function He(ct,Ut,hr){X.assert(ct,hr+" in "+Ee,"invalid "+Ut+", must be one of "+Object.keys(Ue))}He(Ke.then,le,H),X.assert(Ke.else,H+"&&typeof "+H+'==="object"',"invalid "+le),He(Ke.else,le+".rgb",H+".rgb"),He(Ke.else,le+".alpha",H+".alpha")}),Ke.then(je,"=",$e,"=",Ee,"[",H,"];"),Ke.else(je,"=",Ee,"[",H,".rgb];",$e,"=",Ee,"[",H,".alpha];"),ne(Ke),[je,$e]});case Jl:return ge(function(X){return G.command(E(X)&&X.length===4,"blend.color must be a 4d array",D.commandStr),kr(4,function(ne){return+X[ne]})},function(X,ne,H){return G.optional(function(){X.assert(ne,X.shared.isArrayLike+"("+H+")&&"+H+".length===4","blend.color must be a 4d array")}),kr(4,function(Ee){return ne.def("+",H,"[",Ee,"]")})});case tf:return ge(function(X){return G.commandType(X,"number",ie,D.commandStr),X|0},function(X,ne,H){return G.optional(function(){X.assert(ne,"typeof "+H+'==="number"',"invalid stencil.mask")}),ne.def(H,"|0")});case uc:return ge(function(X){G.commandType(X,"object",ie,D.commandStr);var ne=X.cmp||"keep",H=X.ref||0,Ee="mask"in X?X.mask:-1;return G.commandParameter(ne,Jo,le+".cmp",D.commandStr),G.commandType(H,"number",le+".ref",D.commandStr),G.commandType(Ee,"number",le+".mask",D.commandStr),[Jo[ne],H,Ee]},function(X,ne,H){var Ee=X.constants.compareFuncs;G.optional(function(){function He(){X.assert(ne,Array.prototype.join.call(arguments,""),"invalid stencil.func")}He(H+"&&typeof ",H,'==="object"'),He('!("cmp" in ',H,")||(",H,".cmp in ",Ee,")")});var je=ne.def('"cmp" in ',H,"?",Ee,"[",H,".cmp]",":",qo),$e=ne.def(H,".ref|0"),Ke=ne.def('"mask" in ',H,"?",H,".mask|0:-1");return[je,$e,Ke]});case rf:case nt:return ge(function(X){G.commandType(X,"object",ie,D.commandStr);var ne=X.fail||"keep",H=X.zfail||"keep",Ee=X.zpass||"keep";return G.commandParameter(ne,Ii,le+".fail",D.commandStr),G.commandParameter(H,Ii,le+".zfail",D.commandStr),G.commandParameter(Ee,Ii,le+".zpass",D.commandStr),[le===nt?fa:ts,Ii[ne],Ii[H],Ii[Ee]]},function(X,ne,H){var Ee=X.constants.stencilOps;G.optional(function(){X.assert(ne,H+"&&typeof "+H+'==="object"',"invalid "+le)});function je($e){return G.optional(function(){X.assert(ne,'!("'+$e+'" in '+H+")||("+H+"."+$e+" in "+Ee+")","invalid "+le+"."+$e+", must be one of "+Object.keys(Ii))}),ne.def('"',$e,'" in ',H,"?",Ee,"[",H,".",$e,"]:",qo)}return[le===nt?fa:ts,je("fail"),je("zfail"),je("zpass")]});case Hu:return ge(function(X){G.commandType(X,"object",ie,D.commandStr);var ne=X.factor|0,H=X.units|0;return G.commandType(ne,"number",ie+".factor",D.commandStr),G.commandType(H,"number",ie+".units",D.commandStr),[ne,H]},function(X,ne,H){G.optional(function(){X.assert(ne,H+"&&typeof "+H+'==="object"',"invalid "+le)});var Ee=ne.def(H,".factor|0"),je=ne.def(H,".units|0");return[Ee,je]});case Hd:return ge(function(X){var ne=0;return X==="front"?ne=ts:X==="back"&&(ne=fa),G.command(!!ne,ie,D.commandStr),ne},function(X,ne,H){return G.optional(function(){X.assert(ne,H+'==="front"||'+H+'==="back"',"invalid cull.face")}),ne.def(H,'==="front"?',ts,":",fa)});case zu:return ge(function(X){return G.command(typeof X=="number"&&X>=Ie.lineWidthDims[0]&&X<=Ie.lineWidthDims[1],"invalid line width, must be a positive number between "+Ie.lineWidthDims[0]+" and "+Ie.lineWidthDims[1],D.commandStr),X},function(X,ne,H){return G.optional(function(){X.assert(ne,"typeof "+H+'==="number"&&'+H+">="+Ie.lineWidthDims[0]+"&&"+H+"<="+Ie.lineWidthDims[1],"invalid line width")}),H});case kn:return ge(function(X){return G.commandParameter(X,pf,ie,D.commandStr),pf[X]},function(X,ne,H){return G.optional(function(){X.assert(ne,H+'==="cw"||'+H+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ne.def(H+'==="cw"?'+lf+":"+ki)});case ef:return ge(function(X){return G.command(E(X)&&X.length===4,"color.mask must be length 4 array",D.commandStr),X.map(function(ne){return!!ne})},function(X,ne,H){return G.optional(function(){X.assert(ne,X.shared.isArrayLike+"("+H+")&&"+H+".length===4","invalid color.mask")}),kr(4,function(Ee){return"!!"+H+"["+Ee+"]"})});case ua:return ge(function(X){G.command(typeof X=="object"&&X,ie,D.commandStr);var ne="value"in X?X.value:1,H=!!X.invert;return G.command(typeof ne=="number"&&ne>=0&&ne<=1,"sample.coverage.value must be a number between 0 and 1",D.commandStr),[ne,H]},function(X,ne,H){G.optional(function(){X.assert(ne,H+"&&typeof "+H+'==="object"',"invalid sample.coverage")});var Ee=ne.def('"value" in ',H,"?+",H,".value:1"),je=ne.def("!!",H,".invert");return[Ee,je]})}}),Pe}function wn(W,D){var ue=W.static,we=W.dynamic,Pe={};return Object.keys(ue).forEach(function(le){var ie=ue[le],ge;if(typeof ie=="number"||typeof ie=="boolean")ge=Ir(function(){return ie});else if(typeof ie=="function"){var X=ie._reglType;X==="texture2d"||X==="textureCube"?ge=Ir(function(ne){return ne.link(ie)}):X==="framebuffer"||X==="framebufferCube"?(G.command(ie.color.length>0,'missing color attachment for framebuffer sent to uniform "'+le+'"',D.commandStr),ge=Ir(function(ne){return ne.link(ie.color[0])})):G.commandRaise('invalid data for uniform "'+le+'"',D.commandStr)}else E(ie)?ge=Ir(function(ne){var H=ne.global.def("[",kr(ie.length,function(Ee){return G.command(typeof ie[Ee]=="number"||typeof ie[Ee]=="boolean","invalid uniform "+le,ne.commandStr),ie[Ee]}),"]");return H}):G.commandRaise('invalid or missing data for uniform "'+le+'"',D.commandStr);ge.value=ie,Pe[le]=ge}),Object.keys(we).forEach(function(le){var ie=we[le];Pe[le]=Wn(ie,function(ge,X){return ge.invoke(X,ie)})}),Pe}function xr(W,D){var ue=W.static,we=W.dynamic,Pe={};return Object.keys(ue).forEach(function(le){var ie=ue[le],ge=U.id(le),X=new Se;if(vc(ie))X.state=Wa,X.buffer=Ve.getBuffer(Ve.create(ie,eo,!1,!0)),X.type=0;else{var ne=Ve.getBuffer(ie);if(ne)X.state=Wa,X.buffer=ne,X.type=0;else if(G.command(typeof ie=="object"&&ie,"invalid data for attribute "+le,D.commandStr),"constant"in ie){var H=ie.constant;X.buffer="null",X.state=Gu,typeof H=="number"?X.x=H:(G.command(E(H)&&H.length>0&&H.length<=4,"invalid constant for attribute "+le,D.commandStr),$a.forEach(function(Ut,hr){hr<H.length&&(X[Ut]=H[hr])}))}else{vc(ie.buffer)?ne=Ve.getBuffer(Ve.create(ie.buffer,eo,!1,!0)):ne=Ve.getBuffer(ie.buffer),G.command(!!ne,'missing buffer for attribute "'+le+'"',D.commandStr);var Ee=ie.offset|0;G.command(Ee>=0,'invalid offset for attribute "'+le+'"',D.commandStr);var je=ie.stride|0;G.command(je>=0&&je<256,'invalid stride for attribute "'+le+'", must be integer betweeen [0, 255]',D.commandStr);var $e=ie.size|0;G.command(!("size"in ie)||$e>0&&$e<=4,'invalid size for attribute "'+le+'", must be 1,2,3,4',D.commandStr);var Ke=!!ie.normalized,He=0;"type"in ie&&(G.commandParameter(ie.type,mo,"invalid type for attribute "+le,D.commandStr),He=mo[ie.type]);var ct=ie.divisor|0;"divisor"in ie&&(G.command(ct===0||st,'cannot specify divisor for attribute "'+le+'", instancing not supported',D.commandStr),G.command(ct>=0,'invalid divisor for attribute "'+le+'"',D.commandStr)),G.optional(function(){var Ut=D.commandStr,hr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ie).forEach(function(It){G.command(hr.indexOf(It)>=0,'unknown parameter "'+It+'" for attribute pointer "'+le+'" (valid parameters are '+hr+")",Ut)})}),X.buffer=ne,X.state=Wa,X.size=$e,X.normalized=Ke,X.type=He||ne.dtype,X.offset=Ee,X.stride=je,X.divisor=ct}}Pe[le]=Ir(function(Ut,hr){var It=Ut.attribCache;if(ge in It)return It[ge];var Qt={isStream:!1};return Object.keys(X).forEach(function(fr){Qt[fr]=X[fr]}),X.buffer&&(Qt.buffer=Ut.link(X.buffer),Qt.type=Qt.type||Qt.buffer+".dtype"),It[ge]=Qt,Qt})}),Object.keys(we).forEach(function(le){var ie=we[le];function ge(X,ne){var H=X.invoke(ne,ie),Ee=X.shared,je=X.constants,$e=Ee.isBufferArgs,Ke=Ee.buffer;G.optional(function(){X.assert(ne,H+"&&(typeof "+H+'==="object"||typeof '+H+'==="function")&&('+$e+"("+H+")||"+Ke+".getBuffer("+H+")||"+Ke+".getBuffer("+H+".buffer)||"+$e+"("+H+'.buffer)||("constant" in '+H+"&&(typeof "+H+'.constant==="number"||'+Ee.isArrayLike+"("+H+".constant))))",'invalid dynamic attribute "'+le+'"')});var He={isStream:ne.def(!1)},ct=new Se;ct.state=Wa,Object.keys(ct).forEach(function(Qt){He[Qt]=ne.def(""+ct[Qt])});var Ut=He.buffer,hr=He.type;ne("if(",$e,"(",H,")){",He.isStream,"=true;",Ut,"=",Ke,".createStream(",eo,",",H,");",hr,"=",Ut,".dtype;","}else{",Ut,"=",Ke,".getBuffer(",H,");","if(",Ut,"){",hr,"=",Ut,".dtype;",'}else if("constant" in ',H,"){",He.state,"=",Gu,";","if(typeof "+H+'.constant === "number"){',He[$a[0]],"=",H,".constant;",$a.slice(1).map(function(Qt){return He[Qt]}).join("="),"=0;","}else{",$a.map(function(Qt,fr){return He[Qt]+"="+H+".constant.length>"+fr+"?"+H+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",$e,"(",H,".buffer)){",Ut,"=",Ke,".createStream(",eo,",",H,".buffer);","}else{",Ut,"=",Ke,".getBuffer(",H,".buffer);","}",hr,'="type" in ',H,"?",je.glTypes,"[",H,".type]:",Ut,".dtype;",He.normalized,"=!!",H,".normalized;");function It(Qt){ne(He[Qt],"=",H,".",Qt,"|0;")}return It("size"),It("offset"),It("stride"),It("divisor"),ne("}}"),ne.exit("if(",He.isStream,"){",Ke,".destroyStream(",Ut,");","}"),He}Pe[le]=Wn(ie,ge)}),Pe}function mn(W,D){var ue=W.static,we=W.dynamic;if(Za in ue){var Pe=ue[Za];return Pe!==null&&ft.getVAO(Pe)===null&&(Pe=ft.createVAO(Pe)),Ir(function(ie){return ie.link(ft.getVAO(Pe))})}else if(Za in we){var le=we[Za];return Wn(le,function(ie,ge){var X=ie.invoke(ge,le);return ge.def(ie.shared.vao+".getVAO("+X+")")})}return null}function $r(W){var D=W.static,ue=W.dynamic,we={};return Object.keys(D).forEach(function(Pe){var le=D[Pe];we[Pe]=Ir(function(ie,ge){return typeof le=="number"||typeof le=="boolean"?""+le:ie.link(le)})}),Object.keys(ue).forEach(function(Pe){var le=ue[Pe];we[Pe]=Wn(le,function(ie,ge){return ie.invoke(ge,le)})}),we}function fn(W,D,ue,we,Pe){var le=W.static,ie=W.dynamic;G.optional(function(){var It=[ji,Ka,qa,Mi,Ri,Vu,Ci,$u,Ya,Za].concat(tt);function Qt(fr){Object.keys(fr).forEach(function(jr){G.command(It.indexOf(jr)>=0,'unknown parameter "'+jr+'"',Pe.commandStr)})}Qt(le),Qt(ie)});var ge=ur(W,D),X=Lt(W),ne=br(W,X,Pe),H=Mr(W,Pe),Ee=ln(W,Pe),je=mr(W,Pe,ge);function $e(It){var Qt=ne[It];Qt&&(Ee[It]=Qt)}$e(Ko),$e(yt(Xu));var Ke=Object.keys(Ee).length>0,He={framebuffer:X,draw:H,shader:je,state:Ee,dirty:Ke,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(He.profile=Te(W),He.uniforms=wn(ue,Pe),He.drawVAO=He.scopeVAO=mn(W),!He.drawVAO&&je.program&&!ge&&J.angle_instanced_arrays){var ct=!0,Ut=je.program.attributes.map(function(It){var Qt=D.static[It];return ct=ct&&!!Qt,Qt});if(ct&&Ut.length>0){var hr=ft.getVAO(ft.createVAO(Ut));He.drawVAO=new gn(null,null,null,function(It,Qt){return It.link(hr)}),He.useVAO=!0}}return ge?He.useVAO=!0:He.attributes=xr(D,Pe),He.context=$r(we),He}function bn(W,D,ue){var we=W.shared,Pe=we.context,le=W.scope();Object.keys(ue).forEach(function(ie){D.save(Pe,"."+ie);var ge=ue[ie],X=ge.append(W,D);Array.isArray(X)?le(Pe,".",ie,"=[",X.join(),"];"):le(Pe,".",ie,"=",X,";")}),D(le)}function Wr(W,D,ue,we){var Pe=W.shared,le=Pe.gl,ie=Pe.framebuffer,ge;St&&(ge=D.def(Pe.extensions,".webgl_draw_buffers"));var X=W.constants,ne=X.drawBuffer,H=X.backBuffer,Ee;ue?Ee=ue.append(W,D):Ee=D.def(ie,".next"),we||D("if(",Ee,"!==",ie,".cur){"),D("if(",Ee,"){",le,".bindFramebuffer(",df,",",Ee,".framebuffer);"),St&&D(ge,".drawBuffersWEBGL(",ne,"[",Ee,".colorAttachments.length]);"),D("}else{",le,".bindFramebuffer(",df,",null);"),St&&D(ge,".drawBuffersWEBGL(",H,");"),D("}",ie,".cur=",Ee,";"),we||D("}")}function An(W,D,ue){var we=W.shared,Pe=we.gl,le=W.current,ie=W.next,ge=we.current,X=we.next,ne=W.cond(ge,".dirty");tt.forEach(function(H){var Ee=yt(H);if(!(Ee in ue.state)){var je,$e;if(Ee in ie){je=ie[Ee],$e=le[Ee];var Ke=kr(Je[Ee].length,function(ct){return ne.def(je,"[",ct,"]")});ne(W.cond(Ke.map(function(ct,Ut){return ct+"!=="+$e+"["+Ut+"]"}).join("||")).then(Pe,".",rt[Ee],"(",Ke,");",Ke.map(function(ct,Ut){return $e+"["+Ut+"]="+ct}).join(";"),";"))}else{je=ne.def(X,".",Ee);var He=W.cond(je,"!==",ge,".",Ee);ne(He),Ee in vt?He(W.cond(je).then(Pe,".enable(",vt[Ee],");").else(Pe,".disable(",vt[Ee],");"),ge,".",Ee,"=",je,";"):He(Pe,".",rt[Ee],"(",je,");",ge,".",Ee,"=",je,";")}}}),Object.keys(ue.state).length===0&&ne(ge,".dirty=false;"),D(ne)}function Gn(W,D,ue,we){var Pe=W.shared,le=W.current,ie=Pe.current,ge=Pe.gl;ru(Object.keys(ue)).forEach(function(X){var ne=ue[X];if(!(we&&!we(ne))){var H=ne.append(W,D);if(vt[X]){var Ee=vt[X];Qo(ne)?H?D(ge,".enable(",Ee,");"):D(ge,".disable(",Ee,");"):D(W.cond(H).then(ge,".enable(",Ee,");").else(ge,".disable(",Ee,");")),D(ie,".",X,"=",H,";")}else if(E(H)){var je=le[X];D(ge,".",rt[X],"(",H,");",H.map(function($e,Ke){return je+"["+Ke+"]="+$e}).join(";"),";")}else D(ge,".",rt[X],"(",H,");",ie,".",X,"=",H,";")}})}function nn(W,D){st&&(W.instancing=D.def(W.shared.extensions,".angle_instanced_arrays"))}function lr(W,D,ue,we,Pe){var le=W.shared,ie=W.stats,ge=le.current,X=le.timer,ne=ue.profile;function H(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Ee,je;function $e(It){Ee=D.def(),It(Ee,"=",H(),";"),typeof Pe=="string"?It(ie,".count+=",Pe,";"):It(ie,".count++;"),it&&(we?(je=D.def(),It(je,"=",X,".getNumPendingQueries();")):It(X,".beginQuery(",ie,");"))}function Ke(It){It(ie,".cpuTime+=",H(),"-",Ee,";"),it&&(we?It(X,".pushScopeStats(",je,",",X,".getNumPendingQueries(),",ie,");"):It(X,".endQuery();"))}function He(It){var Qt=D.def(ge,".profile");D(ge,".profile=",It,";"),D.exit(ge,".profile=",Qt,";")}var ct;if(ne){if(Qo(ne)){ne.enable?($e(D),Ke(D.exit),He("true")):He("false");return}ct=ne.append(W,D),He(ct)}else ct=D.def(ge,".profile");var Ut=W.block();$e(Ut),D("if(",ct,"){",Ut,"}");var hr=W.block();Ke(hr),D.exit("if(",ct,"){",hr,"}")}function _n(W,D,ue,we,Pe){var le=W.shared;function ie(X){switch(X){case Ja:case fc:case Qa:return 2;case Ku:case to:case eu:return 3;case Hn:case ar:case Zu:return 4;default:return 1}}function ge(X,ne,H){var Ee=le.gl,je=D.def(X,".location"),$e=D.def(le.attributes,"[",je,"]"),Ke=H.state,He=H.buffer,ct=[H.x,H.y,H.z,H.w],Ut=["buffer","normalized","offset","stride"];function hr(){D("if(!",$e,".buffer){",Ee,".enableVertexAttribArray(",je,");}");var Qt=H.type,fr;if(H.size?fr=D.def(H.size,"||",ne):fr=ne,D("if(",$e,".type!==",Qt,"||",$e,".size!==",fr,"||",Ut.map(function(on){return $e+"."+on+"!=="+H[on]}).join("||"),"){",Ee,".bindBuffer(",eo,",",He,".buffer);",Ee,".vertexAttribPointer(",[je,fr,Qt,H.normalized,H.stride,H.offset],");",$e,".type=",Qt,";",$e,".size=",fr,";",Ut.map(function(on){return $e+"."+on+"="+H[on]+";"}).join(""),"}"),st){var jr=H.divisor;D("if(",$e,".divisor!==",jr,"){",W.instancing,".vertexAttribDivisorANGLE(",[je,jr],");",$e,".divisor=",jr,";}")}}function It(){D("if(",$e,".buffer){",Ee,".disableVertexAttribArray(",je,");",$e,".buffer=null;","}if(",$a.map(function(Qt,fr){return $e+"."+Qt+"!=="+ct[fr]}).join("||"),"){",Ee,".vertexAttrib4f(",je,",",ct,");",$a.map(function(Qt,fr){return $e+"."+Qt+"="+ct[fr]+";"}).join(""),"}")}Ke===Wa?hr():Ke===Gu?It():(D("if(",Ke,"===",Wa,"){"),hr(),D("}else{"),It(),D("}"))}we.forEach(function(X){var ne=X.name,H=ue.attributes[ne],Ee;if(H){if(!Pe(H))return;Ee=H.append(W,D)}else{if(!Pe(nu))return;var je=W.scopeAttrib(ne);G.optional(function(){W.assert(D,je+".state","missing attribute "+ne)}),Ee={},Object.keys(new Se).forEach(function($e){Ee[$e]=D.def(je,".",$e)})}ge(W.link(X),ie(X.info.type),Ee)})}function Nr(W,D,ue,we,Pe){for(var le=W.shared,ie=le.gl,ge,X=0;X<we.length;++X){var ne=we[X],H=ne.name,Ee=ne.info.type,je=ue.uniforms[H],$e=W.link(ne),Ke=$e+".location",He;if(je){if(!Pe(je))continue;if(Qo(je)){var ct=je.value;if(G.command(ct!==null&&typeof ct<"u",'missing uniform "'+H+'"',W.commandStr),Ee===la||Ee===es){G.command(typeof ct=="function"&&(Ee===la&&(ct._reglType==="texture2d"||ct._reglType==="framebuffer")||Ee===es&&(ct._reglType==="textureCube"||ct._reglType==="framebufferCube")),"invalid texture for uniform "+H,W.commandStr);var Ut=W.link(ct._texture||ct.color[0]._texture);D(ie,".uniform1i(",Ke,",",Ut+".bind());"),D.exit(Ut,".unbind();")}else if(Ee===tu||Ee===Ju||Ee===Qu){G.optional(function(){G.command(E(ct),"invalid matrix for uniform "+H,W.commandStr),G.command(Ee===tu&&ct.length===4||Ee===Ju&&ct.length===9||Ee===Qu&&ct.length===16,"invalid length for matrix uniform "+H,W.commandStr)});var hr=W.global.def("new Float32Array(["+Array.prototype.slice.call(ct)+"])"),It=2;Ee===Ju?It=3:Ee===Qu&&(It=4),D(ie,".uniformMatrix",It,"fv(",Ke,",false,",hr,");")}else{switch(Ee){case cf:G.commandType(ct,"number","uniform "+H,W.commandStr),ge="1f";break;case Ja:G.command(E(ct)&&ct.length===2,"uniform "+H,W.commandStr),ge="2f";break;case Ku:G.command(E(ct)&&ct.length===3,"uniform "+H,W.commandStr),ge="3f";break;case Hn:G.command(E(ct)&&ct.length===4,"uniform "+H,W.commandStr),ge="4f";break;case qu:G.commandType(ct,"boolean","uniform "+H,W.commandStr),ge="1i";break;case yn:G.commandType(ct,"number","uniform "+H,W.commandStr),ge="1i";break;case Qa:G.command(E(ct)&&ct.length===2,"uniform "+H,W.commandStr),ge="2i";break;case fc:G.command(E(ct)&&ct.length===2,"uniform "+H,W.commandStr),ge="2i";break;case eu:G.command(E(ct)&&ct.length===3,"uniform "+H,W.commandStr),ge="3i";break;case to:G.command(E(ct)&&ct.length===3,"uniform "+H,W.commandStr),ge="3i";break;case Zu:G.command(E(ct)&&ct.length===4,"uniform "+H,W.commandStr),ge="4i";break;case ar:G.command(E(ct)&&ct.length===4,"uniform "+H,W.commandStr),ge="4i";break}D(ie,".uniform",ge,"(",Ke,",",E(ct)?Array.prototype.slice.call(ct):ct,");")}continue}else He=je.append(W,D)}else{if(!Pe(nu))continue;He=D.def(le.uniforms,"[",U.id(H),"]")}Ee===la?(G(!Array.isArray(He),"must specify a scalar prop for textures"),D("if(",He,"&&",He,'._reglType==="framebuffer"){',He,"=",He,".color[0];","}")):Ee===es&&(G(!Array.isArray(He),"must specify a scalar prop for cube maps"),D("if(",He,"&&",He,'._reglType==="framebufferCube"){',He,"=",He,".color[0];","}")),G.optional(function(){function ro(Oo,cp){W.assert(D,Oo,'bad data or missing for uniform "'+H+'".  '+cp)}function iu(Oo){G(!Array.isArray(He),"must not specify an array type for uniform"),ro("typeof "+He+'==="'+Oo+'"',"invalid type, expected "+Oo)}function Eo(Oo,cp){Array.isArray(He)?G(He.length===Oo,"must have length "+Oo):ro(le.isArrayLike+"("+He+")&&"+He+".length==="+Oo,"invalid vector, should have length "+Oo,W.commandStr)}function sp(Oo){G(!Array.isArray(He),"must not specify a value type"),ro("typeof "+He+'==="function"&&'+He+'._reglType==="texture'+(Oo===af?"2d":"Cube")+'"',"invalid texture type",W.commandStr)}switch(Ee){case yn:iu("number");break;case fc:Eo(2);break;case to:Eo(3);break;case ar:Eo(4);break;case cf:iu("number");break;case Ja:Eo(2);break;case Ku:Eo(3);break;case Hn:Eo(4);break;case qu:iu("boolean");break;case Qa:Eo(2);break;case eu:Eo(3);break;case Zu:Eo(4);break;case tu:Eo(4);break;case Ju:Eo(9);break;case Qu:Eo(16);break;case la:sp(af);break;case es:sp(uf);break}});var Qt=1;switch(Ee){case la:case es:var fr=D.def(He,"._texture");D(ie,".uniform1i(",Ke,",",fr,".bind());"),D.exit(fr,".unbind();");continue;case yn:case qu:ge="1i";break;case fc:case Qa:ge="2i",Qt=2;break;case to:case eu:ge="3i",Qt=3;break;case ar:case Zu:ge="4i",Qt=4;break;case cf:ge="1f";break;case Ja:ge="2f",Qt=2;break;case Ku:ge="3f",Qt=3;break;case Hn:ge="4f",Qt=4;break;case tu:ge="Matrix2fv";break;case Ju:ge="Matrix3fv";break;case Qu:ge="Matrix4fv";break}if(D(ie,".uniform",ge,"(",Ke,","),ge.charAt(0)==="M"){var jr=Math.pow(Ee-tu+2,2),on=W.global.def("new Float32Array(",jr,")");Array.isArray(He)?D("false,(",kr(jr,function(ro){return on+"["+ro+"]="+He[ro]}),",",on,")"):D("false,(Array.isArray(",He,")||",He," instanceof Float32Array)?",He,":(",kr(jr,function(ro){return on+"["+ro+"]="+He+"["+ro+"]"}),",",on,")")}else Qt>1?D(kr(Qt,function(ro){return Array.isArray(He)?He[ro]:He+"["+ro+"]"})):(G(!Array.isArray(He),"uniform value must not be an array"),D(He));D(");")}}function Jt(W,D,ue,we){var Pe=W.shared,le=Pe.gl,ie=Pe.draw,ge=we.draw;function X(){var fr=ge.elements,jr,on=D;return fr?((fr.contextDep&&we.contextDynamic||fr.propDep)&&(on=ue),jr=fr.append(W,on)):jr=on.def(ie,".",Mi),jr&&on("if("+jr+")"+le+".bindBuffer("+Di+","+jr+".buffer.buffer);"),jr}function ne(){var fr=ge.count,jr,on=D;return fr?((fr.contextDep&&we.contextDynamic||fr.propDep)&&(on=ue),jr=fr.append(W,on),G.optional(function(){fr.MISSING&&W.assert(D,"false","missing vertex count"),fr.DYNAMIC&&W.assert(on,jr+">=0","missing vertex count")})):(jr=on.def(ie,".",Ci),G.optional(function(){W.assert(on,jr+">=0","missing vertex count")})),jr}var H=X();function Ee(fr){var jr=ge[fr];return jr?jr.contextDep&&we.contextDynamic||jr.propDep?jr.append(W,ue):jr.append(W,D):D.def(ie,".",fr)}var je=Ee(Ri),$e=Ee(Vu),Ke=ne();if(typeof Ke=="number"){if(Ke===0)return}else ue("if(",Ke,"){"),ue.exit("}");var He,ct;st&&(He=Ee($u),ct=W.instancing);var Ut=H+".type",hr=ge.elements&&Qo(ge.elements);function It(){function fr(){ue(ct,".drawElementsInstancedANGLE(",[je,Ke,Ut,$e+"<<(("+Ut+"-"+Fd+")>>1)",He],");")}function jr(){ue(ct,".drawArraysInstancedANGLE(",[je,$e,Ke,He],");")}H?hr?fr():(ue("if(",H,"){"),fr(),ue("}else{"),jr(),ue("}")):jr()}function Qt(){function fr(){ue(le+".drawElements("+[je,Ke,Ut,$e+"<<(("+Ut+"-"+Fd+")>>1)"]+");")}function jr(){ue(le+".drawArrays("+[je,$e,Ke]+");")}H?hr?fr():(ue("if(",H,"){"),fr(),ue("}else{"),jr(),ue("}")):jr()}st&&(typeof He!="number"||He>=0)?typeof He=="string"?(ue("if(",He,">0){"),It(),ue("}else if(",He,"<0){"),Qt(),ue("}")):It():Qt()}function _r(W,D,ue,we,Pe){var le=nr(),ie=le.proc("body",Pe);return G.optional(function(){le.commandStr=D.commandStr,le.command=le.link(D.commandStr)}),st&&(le.instancing=ie.def(le.shared.extensions,".angle_instanced_arrays")),W(le,ie,ue,we),le.compile().body}function Sr(W,D,ue,we){nn(W,D),ue.useVAO?ue.drawVAO?D(W.shared.vao,".setVAO(",ue.drawVAO.append(W,D),");"):D(W.shared.vao,".setVAO(",W.shared.vao,".targetVAO);"):(D(W.shared.vao,".setVAO(null);"),_n(W,D,ue,we.attributes,function(){return!0})),Nr(W,D,ue,we.uniforms,function(){return!0}),Jt(W,D,D,ue)}function Br(W,D){var ue=W.proc("draw",1);nn(W,ue),bn(W,ue,D.context),Wr(W,ue,D.framebuffer),An(W,ue,D),Gn(W,ue,D.state),lr(W,ue,D,!1,!0);var we=D.shader.progVar.append(W,ue);if(ue(W.shared.gl,".useProgram(",we,".program);"),D.shader.program)Sr(W,ue,D,D.shader.program);else{ue(W.shared.vao,".setVAO(null);");var Pe=W.global.def("{}"),le=ue.def(we,".id"),ie=ue.def(Pe,"[",le,"]");ue(W.cond(ie).then(ie,".call(this,a0);").else(ie,"=",Pe,"[",le,"]=",W.link(function(ge){return _r(Sr,W,D,ge,1)}),"(",we,");",ie,".call(this,a0);"))}Object.keys(D.state).length>0&&ue(W.shared.current,".dirty=true;")}function ei(W,D,ue,we){W.batchId="a1",nn(W,D);function Pe(){return!0}_n(W,D,ue,we.attributes,Pe),Nr(W,D,ue,we.uniforms,Pe),Jt(W,D,D,ue)}function Yn(W,D,ue,we){nn(W,D);var Pe=ue.contextDep,le=D.def(),ie="a0",ge="a1",X=D.def();W.shared.props=X,W.batchId=le;var ne=W.scope(),H=W.scope();D(ne.entry,"for(",le,"=0;",le,"<",ge,";++",le,"){",X,"=",ie,"[",le,"];",H,"}",ne.exit);function Ee(Ut){return Ut.contextDep&&Pe||Ut.propDep}function je(Ut){return!Ee(Ut)}if(ue.needsContext&&bn(W,H,ue.context),ue.needsFramebuffer&&Wr(W,H,ue.framebuffer),Gn(W,H,ue.state,Ee),ue.profile&&Ee(ue.profile)&&lr(W,H,ue,!1,!0),we)ue.useVAO?ue.drawVAO?Ee(ue.drawVAO)?H(W.shared.vao,".setVAO(",ue.drawVAO.append(W,H),");"):ne(W.shared.vao,".setVAO(",ue.drawVAO.append(W,ne),");"):ne(W.shared.vao,".setVAO(",W.shared.vao,".targetVAO);"):(ne(W.shared.vao,".setVAO(null);"),_n(W,ne,ue,we.attributes,je),_n(W,H,ue,we.attributes,Ee)),Nr(W,ne,ue,we.uniforms,je),Nr(W,H,ue,we.uniforms,Ee),Jt(W,ne,H,ue);else{var $e=W.global.def("{}"),Ke=ue.shader.progVar.append(W,H),He=H.def(Ke,".id"),ct=H.def($e,"[",He,"]");H(W.shared.gl,".useProgram(",Ke,".program);","if(!",ct,"){",ct,"=",$e,"[",He,"]=",W.link(function(Ut){return _r(ei,W,ue,Ut,2)}),"(",Ke,");}",ct,".call(this,a0[",le,"],",le,");")}}function B(W,D){var ue=W.proc("batch",2);W.batchId="0",nn(W,ue);var we=!1,Pe=!0;Object.keys(D.context).forEach(function($e){we=we||D.context[$e].propDep}),we||(bn(W,ue,D.context),Pe=!1);var le=D.framebuffer,ie=!1;le?(le.propDep?we=ie=!0:le.contextDep&&we&&(ie=!0),ie||Wr(W,ue,le)):Wr(W,ue,null),D.state.viewport&&D.state.viewport.propDep&&(we=!0);function ge($e){return $e.contextDep&&we||$e.propDep}An(W,ue,D),Gn(W,ue,D.state,function($e){return!ge($e)}),(!D.profile||!ge(D.profile))&&lr(W,ue,D,!1,"a1"),D.contextDep=we,D.needsContext=Pe,D.needsFramebuffer=ie;var X=D.shader.progVar;if(X.contextDep&&we||X.propDep)Yn(W,ue,D,null);else{var ne=X.append(W,ue);if(ue(W.shared.gl,".useProgram(",ne,".program);"),D.shader.program)Yn(W,ue,D,D.shader.program);else{ue(W.shared.vao,".setVAO(null);");var H=W.global.def("{}"),Ee=ue.def(ne,".id"),je=ue.def(H,"[",Ee,"]");ue(W.cond(je).then(je,".call(this,a0,a1);").else(je,"=",H,"[",Ee,"]=",W.link(function($e){return _r(Yn,W,D,$e,2)}),"(",ne,");",je,".call(this,a0,a1);"))}}Object.keys(D.state).length>0&&ue(W.shared.current,".dirty=true;")}function Le(W,D){var ue=W.proc("scope",3);W.batchId="a2";var we=W.shared,Pe=we.current;bn(W,ue,D.context),D.framebuffer&&D.framebuffer.append(W,ue),ru(Object.keys(D.state)).forEach(function(ie){var ge=D.state[ie],X=ge.append(W,ue);E(X)?X.forEach(function(ne,H){ue.set(W.next[ie],"["+H+"]",ne)}):ue.set(we.next,"."+ie,X)}),lr(W,ue,D,!0,!0),[Mi,Vu,Ci,$u,Ri].forEach(function(ie){var ge=D.draw[ie];ge&&ue.set(we.draw,"."+ie,""+ge.append(W,ue))}),Object.keys(D.uniforms).forEach(function(ie){var ge=D.uniforms[ie].append(W,ue);Array.isArray(ge)&&(ge="["+ge.join()+"]"),ue.set(we.uniforms,"["+U.id(ie)+"]",ge)}),Object.keys(D.attributes).forEach(function(ie){var ge=D.attributes[ie].append(W,ue),X=W.scopeAttrib(ie);Object.keys(new Se).forEach(function(ne){ue.set(X,"."+ne,ge[ne])})}),D.scopeVAO&&ue.set(we.vao,".targetVAO",D.scopeVAO.append(W,ue));function le(ie){var ge=D.shader[ie];ge&&ue.set(we.shader,"."+ie,ge.append(W,ue))}le(Ka),le(qa),Object.keys(D.state).length>0&&(ue(Pe,".dirty=true;"),ue.exit(Pe,".dirty=true;")),ue("a1(",W.shared.context,",a0,",W.batchId,");")}function Ce(W){if(!(typeof W!="object"||E(W))){for(var D=Object.keys(W),ue=0;ue<D.length;++ue)if(Ot.isDynamic(W[D[ue]]))return!0;return!1}}function jt(W,D,ue){var we=D.static[ue];if(!we||!Ce(we))return;var Pe=W.global,le=Object.keys(we),ie=!1,ge=!1,X=!1,ne=W.global.def("{}");le.forEach(function(Ee){var je=we[Ee];if(Ot.isDynamic(je)){typeof je=="function"&&(je=we[Ee]=Ot.unbox(je));var $e=Wn(je,null);ie=ie||$e.thisDep,X=X||$e.propDep,ge=ge||$e.contextDep}else{switch(Pe(ne,".",Ee,"="),typeof je){case"number":Pe(je);break;case"string":Pe('"',je,'"');break;case"object":Array.isArray(je)&&Pe("[",je.join(),"]");break;default:Pe(W.link(je));break}Pe(";")}});function H(Ee,je){le.forEach(function($e){var Ke=we[$e];if(Ot.isDynamic(Ke)){var He=Ee.invoke(je,Ke);je(ne,".",$e,"=",He,";")}})}D.dynamic[ue]=new Ot.DynamicVariable(rc,{thisDep:ie,contextDep:ge,propDep:X,ref:ne,append:H}),delete D.static[ue]}function Er(W,D,ue,we,Pe){var le=nr();le.stats=le.link(Pe),Object.keys(D.static).forEach(function(ge){jt(le,D,ge)}),Ev.forEach(function(ge){jt(le,W,ge)});var ie=fn(W,D,ue,we,le);return Br(le,ie),Le(le,ie),B(le,ie),s(le.compile(),{destroy:function(){ie.shader.program.destroy()}})}return{next:At,current:Je,procs:function(){var W=nr(),D=W.proc("poll"),ue=W.proc("refresh"),we=W.block();D(we),ue(we);var Pe=W.shared,le=Pe.gl,ie=Pe.next,ge=Pe.current;we(ge,".dirty=false;"),Wr(W,D),Wr(W,ue,null,!0);var X;st&&(X=W.link(st)),J.oes_vertex_array_object&&ue(W.link(J.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ne=0;ne<Ie.maxAttributes;++ne){var H=ue.def(Pe.attributes,"[",ne,"]"),Ee=W.cond(H,".buffer");Ee.then(le,".enableVertexAttribArray(",ne,");",le,".bindBuffer(",eo,",",H,".buffer.buffer);",le,".vertexAttribPointer(",ne,",",H,".size,",H,".type,",H,".normalized,",H,".stride,",H,".offset);").else(le,".disableVertexAttribArray(",ne,");",le,".vertexAttrib4f(",ne,",",H,".x,",H,".y,",H,".z,",H,".w);",H,".buffer=null;"),ue(Ee),st&&ue(X,".vertexAttribDivisorANGLE(",ne,",",H,".divisor);")}return ue(W.shared.vao,".currentVAO=null;",W.shared.vao,".setVAO(",W.shared.vao,".targetVAO);"),Object.keys(vt).forEach(function(je){var $e=vt[je],Ke=we.def(ie,".",je),He=W.block();He("if(",Ke,"){",le,".enable(",$e,")}else{",le,".disable(",$e,")}",ge,".",je,"=",Ke,";"),ue(He),D("if(",Ke,"!==",ge,".",je,"){",He,"}")}),Object.keys(rt).forEach(function(je){var $e=rt[je],Ke=Je[je],He,ct,Ut=W.block();if(Ut(le,".",$e,"("),E(Ke)){var hr=Ke.length;He=W.global.def(ie,".",je),ct=W.global.def(ge,".",je),Ut(kr(hr,function(It){return He+"["+It+"]"}),");",kr(hr,function(It){return ct+"["+It+"]="+He+"["+It+"];"}).join("")),D("if(",kr(hr,function(It){return He+"["+It+"]!=="+ct+"["+It+"]"}).join("||"),"){",Ut,"}")}else He=we.def(ie,".",je),ct=we.def(ge,".",je),Ut(He,");",ge,".",je,"=",He,";"),D("if(",He,"!==",ct,"){",Ut,"}");ue(Ut)}),W.compile()}(),compile:Er}}function op(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Tv=34918,ip=34919,rs=35007,Av=function(A,U){if(!U.ext_disjoint_timer_query)return null;var J=[];function Ie(){return J.pop()||U.ext_disjoint_timer_query.createQueryEXT()}function Ve(st){J.push(st)}var ke=[];function Ge(st){var St=Ie();U.ext_disjoint_timer_query.beginQueryEXT(rs,St),ke.push(St),it(ke.length-1,ke.length,st)}function ot(){U.ext_disjoint_timer_query.endQueryEXT(rs)}function at(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ft=[];function ut(){return ft.pop()||new at}function pt(st){ft.push(st)}var _t=[];function it(st,St,Je){var At=ut();At.startQueryIndex=st,At.endQueryIndex=St,At.sum=0,At.stats=Je,_t.push(At)}var dt=[],Se=[];function Ue(){var st,St,Je=ke.length;if(Je!==0){Se.length=Math.max(Se.length,Je+1),dt.length=Math.max(dt.length,Je+1),dt[0]=0,Se[0]=0;var At=0;for(st=0,St=0;St<ke.length;++St){var tt=ke[St];U.ext_disjoint_timer_query.getQueryObjectEXT(tt,ip)?(At+=U.ext_disjoint_timer_query.getQueryObjectEXT(tt,Tv),Ve(tt)):ke[st++]=tt,dt[St+1]=At,Se[St+1]=st}for(ke.length=st,st=0,St=0;St<_t.length;++St){var vt=_t[St],rt=vt.startQueryIndex,yt=vt.endQueryIndex;vt.sum+=dt[yt]-dt[rt];var Yt=Se[rt],rr=Se[yt];rr===Yt?(vt.stats.gpuTime+=vt.sum/1e6,pt(vt)):(vt.startQueryIndex=Yt,vt.endQueryIndex=rr,_t[st++]=vt)}_t.length=st}}return{beginQuery:Ge,endQuery:ot,pushScopeStats:it,update:Ue,getNumPendingQueries:function(){return ke.length},clear:function(){J.push.apply(J,ke);for(var st=0;st<J.length;st++)U.ext_disjoint_timer_query.deleteQueryEXT(J[st]);ke.length=0,J.length=0},restore:function(){ke.length=0,J.length=0}}},Pv=16384,hf=256,yc=1024,ap=34962,gc="webglcontextlost",mc="webglcontextrestored",ns=1,bc=2,up=3;function ou(A,U){for(var J=0;J<A.length;++J)if(A[J]===U)return J;return-1}function _c(A){var U=gr(A);if(!U)return null;var J=U.gl,Ie=J.getContextAttributes(),Ve=J.isContextLost(),ke=Xr(J,U);if(!ke)return null;var Ge=xn(),ot=op(),at=ke.extensions,ft=Av(J,at),ut=Tr(),pt=J.drawingBufferWidth,_t=J.drawingBufferHeight,it={tick:0,time:0,viewportWidth:pt,viewportHeight:_t,framebufferWidth:pt,framebufferHeight:_t,drawingBufferWidth:pt,drawingBufferHeight:_t,pixelRatio:U.pixelRatio},dt={},Se={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ue=Ds(J,at),st=jo(J,ot,U,Je),St=gv(J,at,Ue,ot,st);function Je(Jt){return St.destroyBuffer(Jt)}var At=Gs(J,at,st,ot),tt=bv(J,Ge,ot,U),vt=Tn(J,at,Ue,function(){Yt.procs.poll()},it,ot,U),rt=wd(J,at,Ue,ot,U),yt=Dd(J,at,Ue,vt,rt,ot),Yt=Sv(J,Ge,at,Ue,st,At,vt,yt,dt,St,tt,Se,it,ft,U),rr=_v(J,yt,Yt.procs.poll,it,Ie,at,Ue),Et=Yt.next,Qe=J.canvas,Ye=[],nr=[],Te=[],Lt=[U.onDestroy],br=null;function ur(){if(Ye.length===0){ft&&ft.update(),br=null;return}br=Kt.next(ur),Gn();for(var Jt=Ye.length-1;Jt>=0;--Jt){var _r=Ye[Jt];_r&&_r(it,null,0)}J.flush(),ft&&ft.update()}function mr(){!br&&Ye.length>0&&(br=Kt.next(ur))}function Mr(){br&&(Kt.cancel(ur),br=null)}function ln(Jt){Jt.preventDefault(),Ve=!0,Mr(),nr.forEach(function(_r){_r()})}function wn(Jt){J.getError(),Ve=!1,ke.restore(),tt.restore(),st.restore(),vt.restore(),rt.restore(),yt.restore(),St.restore(),ft&&ft.restore(),Yt.procs.refresh(),mr(),Te.forEach(function(_r){_r()})}Qe&&(Qe.addEventListener(gc,ln,!1),Qe.addEventListener(mc,wn,!1));function xr(){Ye.length=0,Mr(),Qe&&(Qe.removeEventListener(gc,ln),Qe.removeEventListener(mc,wn)),tt.clear(),yt.clear(),rt.clear(),vt.clear(),At.clear(),st.clear(),St.clear(),ft&&ft.clear(),Lt.forEach(function(Jt){Jt()})}function mn(Jt){G(!!Jt,"invalid args to regl({...})"),G.type(Jt,"object","invalid args to regl({...})");function _r(Pe){var le=s({},Pe);delete le.uniforms,delete le.attributes,delete le.context,delete le.vao,"stencil"in le&&le.stencil.op&&(le.stencil.opBack=le.stencil.opFront=le.stencil.op,delete le.stencil.op);function ie(ge){if(ge in le){var X=le[ge];delete le[ge],Object.keys(X).forEach(function(ne){le[ge+"."+ne]=X[ne]})}}return ie("blend"),ie("depth"),ie("cull"),ie("stencil"),ie("polygonOffset"),ie("scissor"),ie("sample"),"vao"in Pe&&(le.vao=Pe.vao),le}function Sr(Pe,le){var ie={},ge={};return Object.keys(Pe).forEach(function(X){var ne=Pe[X];if(Ot.isDynamic(ne)){ge[X]=Ot.unbox(ne,X);return}else if(le&&Array.isArray(ne)){for(var H=0;H<ne.length;++H)if(Ot.isDynamic(ne[H])){ge[X]=Ot.unbox(ne,X);return}}ie[X]=ne}),{dynamic:ge,static:ie}}var Br=Sr(Jt.context||{},!0),ei=Sr(Jt.uniforms||{},!0),Yn=Sr(Jt.attributes||{},!1),B=Sr(_r(Jt),!1),Le={gpuTime:0,cpuTime:0,count:0},Ce=Yt.compile(B,Yn,ei,Br,Le),jt=Ce.draw,Er=Ce.batch,W=Ce.scope,D=[];function ue(Pe){for(;D.length<Pe;)D.push(null);return D}function we(Pe,le){var ie;if(Ve&&G.raise("context lost"),typeof Pe=="function")return W.call(this,null,Pe,0);if(typeof le=="function")if(typeof Pe=="number")for(ie=0;ie<Pe;++ie)W.call(this,null,le,ie);else if(Array.isArray(Pe))for(ie=0;ie<Pe.length;++ie)W.call(this,Pe[ie],le,ie);else return W.call(this,Pe,le,0);else if(typeof Pe=="number"){if(Pe>0)return Er.call(this,ue(Pe|0),Pe|0)}else if(Array.isArray(Pe)){if(Pe.length)return Er.call(this,Pe,Pe.length)}else return jt.call(this,Pe)}return s(we,{stats:Le,destroy:function(){Ce.destroy()}})}var $r=yt.setFBO=mn({framebuffer:Ot.define.call(null,ns,"framebuffer")});function fn(Jt,_r){var Sr=0;Yt.procs.poll();var Br=_r.color;Br&&(J.clearColor(+Br[0]||0,+Br[1]||0,+Br[2]||0,+Br[3]||0),Sr|=Pv),"depth"in _r&&(J.clearDepth(+_r.depth),Sr|=hf),"stencil"in _r&&(J.clearStencil(_r.stencil|0),Sr|=yc),G(!!Sr,"called regl.clear with no buffer specified"),J.clear(Sr)}function bn(Jt){if(G(typeof Jt=="object"&&Jt,"regl.clear() takes an object as input"),"framebuffer"in Jt)if(Jt.framebuffer&&Jt.framebuffer_reglType==="framebufferCube")for(var _r=0;_r<6;++_r)$r(s({framebuffer:Jt.framebuffer.faces[_r]},Jt),fn);else $r(Jt,fn);else fn(null,Jt)}function Wr(Jt){G.type(Jt,"function","regl.frame() callback must be a function"),Ye.push(Jt);function _r(){var Sr=ou(Ye,Jt);G(Sr>=0,"cannot cancel a frame twice");function Br(){var ei=ou(Ye,Br);Ye[ei]=Ye[Ye.length-1],Ye.length-=1,Ye.length<=0&&Mr()}Ye[Sr]=Br}return mr(),{cancel:_r}}function An(){var Jt=Et.viewport,_r=Et.scissor_box;Jt[0]=Jt[1]=_r[0]=_r[1]=0,it.viewportWidth=it.framebufferWidth=it.drawingBufferWidth=Jt[2]=_r[2]=J.drawingBufferWidth,it.viewportHeight=it.framebufferHeight=it.drawingBufferHeight=Jt[3]=_r[3]=J.drawingBufferHeight}function Gn(){it.tick+=1,it.time=lr(),An(),Yt.procs.poll()}function nn(){vt.refresh(),An(),Yt.procs.refresh(),ft&&ft.update()}function lr(){return(Tr()-ut)/1e3}nn();function _n(Jt,_r){G.type(_r,"function","listener callback must be a function");var Sr;switch(Jt){case"frame":return Wr(_r);case"lost":Sr=nr;break;case"restore":Sr=Te;break;case"destroy":Sr=Lt;break;default:G.raise("invalid event, must be one of frame,lost,restore,destroy")}return Sr.push(_r),{cancel:function(){for(var Br=0;Br<Sr.length;++Br)if(Sr[Br]===_r){Sr[Br]=Sr[Sr.length-1],Sr.pop();return}}}}var Nr=s(mn,{clear:bn,prop:Ot.define.bind(null,ns),context:Ot.define.bind(null,bc),this:Ot.define.bind(null,up),draw:mn({}),buffer:function(Jt){return st.create(Jt,ap,!1,!1)},elements:function(Jt){return At.create(Jt,!1)},texture:vt.create2D,cube:vt.createCube,renderbuffer:rt.create,framebuffer:yt.create,framebufferCube:yt.createCube,vao:St.createVAO,attributes:Ie,frame:Wr,on:_n,limits:Ue,hasExtension:function(Jt){return Ue.extensions.indexOf(Jt.toLowerCase())>=0},read:rr,destroy:xr,_gl:J,_refresh:nn,poll:function(){Gn(),ft&&ft.update()},now:lr,stats:ot});return U.onDone(null,Nr),Nr}return _c})})(V4);var Ea,Cf,Oa,ni,Df,pu,kf,oh,Hi,ss,no,Xi,Vi,ih;Ea={},Mt(Ea,Pt.POINTS,"points"),Mt(Ea,Pt.LINES,"lines"),Mt(Ea,Pt.LINE_LOOP,"line loop"),Mt(Ea,Pt.LINE_STRIP,"line strip"),Mt(Ea,Pt.TRIANGLES,"triangles"),Mt(Ea,Pt.TRIANGLE_FAN,"triangle fan"),Mt(Ea,Pt.TRIANGLE_STRIP,"triangle strip");Cf={},Mt(Cf,Pt.STATIC_DRAW,"static"),Mt(Cf,Pt.DYNAMIC_DRAW,"dynamic"),Mt(Cf,Pt.STREAM_DRAW,"stream");Oa={},Mt(Oa,Pt.BYTE,"int8"),Mt(Oa,Pt.UNSIGNED_INT,"int16"),Mt(Oa,Pt.INT,"int32"),Mt(Oa,Pt.UNSIGNED_BYTE,"uint8"),Mt(Oa,Pt.UNSIGNED_SHORT,"uint16"),Mt(Oa,Pt.UNSIGNED_INT,"uint32"),Mt(Oa,Pt.FLOAT,"float");ni={},Mt(ni,Pt.ALPHA,"alpha"),Mt(ni,Pt.LUMINANCE,"luminance"),Mt(ni,Pt.LUMINANCE_ALPHA,"luminance alpha"),Mt(ni,Pt.RGB,"rgb"),Mt(ni,Pt.RGBA,"rgba"),Mt(ni,Pt.RGBA4,"rgba4"),Mt(ni,Pt.RGB5_A1,"rgb5 a1"),Mt(ni,Pt.RGB565,"rgb565"),Mt(ni,Pt.DEPTH_COMPONENT,"depth"),Mt(ni,Pt.DEPTH_STENCIL,"depth stencil");Df={},Mt(Df,Pt.DONT_CARE,"dont care"),Mt(Df,Pt.NICEST,"nice"),Mt(Df,Pt.FASTEST,"fast");pu={},Mt(pu,Pt.NEAREST,"nearest"),Mt(pu,Pt.LINEAR,"linear"),Mt(pu,Pt.LINEAR_MIPMAP_LINEAR,"mipmap"),Mt(pu,Pt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Mt(pu,Pt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Mt(pu,Pt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");kf={},Mt(kf,Pt.REPEAT,"repeat"),Mt(kf,Pt.CLAMP_TO_EDGE,"clamp"),Mt(kf,Pt.MIRRORED_REPEAT,"mirror");oh={},Mt(oh,Pt.NONE,"none"),Mt(oh,Pt.BROWSER_DEFAULT_WEBGL,"browser");Hi={},Mt(Hi,Pt.NEVER,"never"),Mt(Hi,Pt.ALWAYS,"always"),Mt(Hi,Pt.LESS,"less"),Mt(Hi,Pt.LEQUAL,"lequal"),Mt(Hi,Pt.GREATER,"greater"),Mt(Hi,Pt.GEQUAL,"gequal"),Mt(Hi,Pt.EQUAL,"equal"),Mt(Hi,Pt.NOTEQUAL,"notequal");ss={},Mt(ss,Pt.FUNC_ADD,"add"),Mt(ss,Pt.MIN_EXT,"min"),Mt(ss,Pt.MAX_EXT,"max"),Mt(ss,Pt.FUNC_SUBTRACT,"subtract"),Mt(ss,Pt.FUNC_REVERSE_SUBTRACT,"reverse subtract");no={},Mt(no,Pt.ZERO,"zero"),Mt(no,Pt.ONE,"one"),Mt(no,Pt.SRC_COLOR,"src color"),Mt(no,Pt.ONE_MINUS_SRC_COLOR,"one minus src color"),Mt(no,Pt.SRC_ALPHA,"src alpha"),Mt(no,Pt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Mt(no,Pt.DST_COLOR,"dst color"),Mt(no,Pt.ONE_MINUS_DST_COLOR,"one minus dst color"),Mt(no,Pt.DST_ALPHA,"dst alpha"),Mt(no,Pt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Mt(no,Pt.CONSTANT_COLOR,"constant color"),Mt(no,Pt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Mt(no,Pt.CONSTANT_ALPHA,"constant alpha"),Mt(no,Pt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Mt(no,Pt.SRC_ALPHA_SATURATE,"src alpha saturate");Xi={},Mt(Xi,Pt.NEVER,"never"),Mt(Xi,Pt.ALWAYS,"always"),Mt(Xi,Pt.LESS,"less"),Mt(Xi,Pt.LEQUAL,"lequal"),Mt(Xi,Pt.GREATER,"greater"),Mt(Xi,Pt.GEQUAL,"gequal"),Mt(Xi,Pt.EQUAL,"equal"),Mt(Xi,Pt.NOTEQUAL,"notequal");Vi={},Mt(Vi,Pt.ZERO,"zero"),Mt(Vi,Pt.KEEP,"keep"),Mt(Vi,Pt.REPLACE,"replace"),Mt(Vi,Pt.INVERT,"invert"),Mt(Vi,Pt.INCR,"increment"),Mt(Vi,Pt.DECR,"decrement"),Mt(Vi,Pt.INCR_WRAP,"increment wrap"),Mt(Vi,Pt.DECR_WRAP,"decrement wrap");ih={},Mt(ih,Pt.FRONT,"front"),Mt(ih,Pt.BACK,"back");var $4=Function.prototype,W4=$4.toString;W4.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class Ox{constructor(){mi(this,"lf");mi(this,"option")}render(r){this.lf=r}getBytesLength(r){if(!r)return 0;let t=0;for(let s=0;s<r.length;s++){const i=r.charCodeAt(s);r.match(/[A-Z]/)?t+=1.5:i>=1&&i<=126||i>=65376&&i<=65439?t+=1:t+=2}return t}layout(r={}){const{nodes:t,edges:s,gridSize:i}=this.lf.graphModel;let c=40,l=40;i>20&&(c=i*2,l=i*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:c,ranksep:l,begin:[120,120],...r};const v=new rI(this.option).layout({nodes:t.map(g=>({id:g.id,size:{width:g.width,height:g.height},model:g})),edges:s.map(g=>({source:g.sourceNodeId,target:g.targetNodeId,model:g}))}),m={nodes:[],edges:[]};v.nodes.forEach(g=>{const{model:O}=g,x=O.getData();x.x=g.x,x.y=g.y,x.text&&x.text.value&&(x.text={x:x.x,y:x.y+10,value:x.text.value}),m.nodes.push(x)}),v.edges.forEach(g=>{const{model:O}=g,x=O.getData();if(x.pointsList=this.calcPointsList(O,m.nodes),x.pointsList){const S=x.pointsList[0],N=x.pointsList[x.pointsList.length-1];x.startPoint={x:S.x,y:S.y},x.endPoint={x:N.x,y:N.y},x.text&&x.text.value&&(x.text={x:(S.x+N.x)/2,y:N.y,value:x.text.value})}else x.startPoint=void 0,x.endPoint=void 0,x.text&&x.text.value&&(x.text=x.text.value);m.edges.push(x)}),this.lf.renderRawData(m)}pointFilter(r){const t=r;let s=1;for(;s<t.length-1;){const i=t[s-1],c=t[s],l=t[s+1];i.x===c.x&&c.x===l.x||i.y===c.y&&c.y===l.y?t.splice(s,1):s++}return t}calcPointsList(r,t){const s=[];if(this.option.rankdir==="LR"&&r.modelType==="polyline-edge"){const i=this.lf.getNodeModelById(r.sourceNodeId),c=this.lf.getNodeModelById(r.targetNodeId),l=t.find(v=>v.id===r.sourceNodeId),h=t.find(v=>v.id===r.targetNodeId);if(l.x<h.x)return s.push({x:l.x+i.width/2,y:l.y}),s.push({x:l.x+i.width/2+(r.offset||50),y:l.y}),s.push({x:l.x+i.width/2+(r.offset||50),y:h.y}),s.push({x:h.x-c.width/2,y:h.y}),this.pointFilter(s);if(l.x>h.x)return l.y>=h.y?(s.push({x:l.x,y:l.y+i.height/2}),s.push({x:l.x,y:l.y+i.height/2+(r.offset||50)}),s.push({x:h.x,y:l.y+i.height/2+(r.offset||50)}),s.push({x:h.x,y:h.y+c.height/2})):(s.push({x:l.x,y:l.y-i.height/2}),s.push({x:l.x,y:l.y-i.height/2-(r.offset||50)}),s.push({x:h.x,y:l.y-i.height/2-(r.offset||50)}),s.push({x:h.x,y:h.y-c.height/2})),this.pointFilter(s)}}}mi(Ox,"pluginName","dagre");class Y4 extends mC{constructor({lf:r}){super({lf:r});const t={text:"",icon:!0,className:"lf-menu-copy",callback:z=>r.cloneNode(z.id)},s={text:"",icon:!0,className:"lf-menu-delete",callback:z=>{r.deleteNode(z.id),r.deleteEdge(z.id)}},i={text:"",icon:!0,className:"lf-menu-edit",callback:z=>r.graphModel.editText(z.id)},c={text:"",icon:!0,className:"lf-menu-delete",callback:z=>r.updateText(z.id,"")},l={text:"",icon:!0,className:"lf-menu-select",callback(){r.openSelectionSelect(),r.once("selection:selected",r.closeSelectionSelect)}},h={text:"",icon:!0,className:"lf-menu-clear",callback:()=>r.clearData()},v={text:"",icon:!0,className:"lf-menu-back",callback:z=>this.changeMenuList(z,fe.nodeMenu)},m={text:"",icon:!0,className:"lf-menu-add",callback:z=>{let ee=[];switch(z.type){case"startEvent":case"userTask":case"exclusiveGateway":case"parallelGateway":ee=[v,g,O,S,N,x,j];break;case"endEvent":case"sequenceFlow":case"group":case"serviceTask":ee=[v,j];break;default:ee=[v]}this.changeMenuList(z,ee)}},g={text:"",icon:!0,className:"lf-menu-user-task",callback:z=>this.addNode(z,{type:"userTask",x:z.x+200,y:z.y})},O={text:"",icon:!0,className:"lf-menu-service-task",callback:z=>this.addNode(z,{type:"serviceTask",x:z.x+200,y:z.y})},x={text:"",icon:!0,className:"lf-menu-end-event",callback:z=>this.addNode(z,{type:"endEvent",x:z.x+150,y:z.y})},S={text:"",icon:!0,className:"lf-menu-exclusive-gateway",callback:z=>this.addNode(z,{type:"exclusiveGateway",x:z.x+150,y:z.y})},N={text:"",icon:!0,className:"lf-menu-parallel-gateway",callback:z=>this.addNode(z,{type:"parallelGateway",x:z.x+150,y:z.y})},j={text:"",icon:!0,className:"lf-menu-note",callback:z=>this.addNode(z,{type:"note",x:z.x,y:z.y-150})},M={text:"",icon:!0,className:"lf-menu-switch",callback:z=>{let ee=[];switch(z.type){case"exclusiveGateway":ee=[v,ce];break;case"parallelGateway":ee=[v,_e];break;case"startEvent":ee=[v,V];break;case"endEvent":ee=[v,C];break;default:ee=[v]}this.changeMenuList(z,ee)}},C={text:"",icon:!0,className:"lf-menu-start-event",callback:z=>this.changeNodeType(z,"startEvent")},V={text:"",icon:!0,className:"lf-menu-end-event",callback:z=>this.changeNodeType(z,"endEvent")},ce={text:"",icon:!0,className:"lf-menu-parallel-gateway",callback:z=>this.changeNodeType(z,"parallelGateway")},_e={text:"",icon:!0,className:"lf-menu-exclusive-gateway",callback:z=>this.changeNodeType(z,"exclusiveGateway")},fe={nodeMenu:[m,t,s,M,i,c],edgeMenu:[s,i,c],graphMenu:[l,h]};this.setMenuConfig(fe)}changeMenuList(r,t){setTimeout(()=>{this.__currentData=r;const{left:s,top:i}=this.__menuDOM.style;this.showMenu(s,i,t)})}addNode(r,t){const s=this.lf.addNode(t),i=["serviceTask","note"].includes(t.type);this.lf.addEdge({type:i?"noteFlow":void 0,sourceNodeId:r.id,targetNodeId:s.id})}changeNodeType(r,t){this.lf.changeNodeType(r.id,t),Object.keys(r.properties||{}).forEach(s=>this.lf.deleteProperty(r.id,s)),this.lf.emit("element:click",{data:{...r,type:t,properties:{}}})}}class K4 extends bC{constructor({lf:r}){super({lf:r}),this.setPatternItems([{label:"",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){r.openSelectionSelect(),r.once("selection:selected",r.closeSelectionSelect)}},{type:"group",label:"",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"",label:"",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"",label:"",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const wx={type:"process",key:"Process",properties:{}};function q4(e){const{id:r,type:t,x:s,y:i,properties:c,children:l,text:h}=e;return{incoming:[],outgoing:[],children:l,type:t,key:r,groupKey:c==null?void 0:c.groupKey,properties:{...c,name:Gm(h)?h:(h==null?void 0:h.value)??"",x:s,y:i,text:h}}}function Z4(e){const{id:r,type:t,sourceNodeId:s,targetNodeId:i,startPoint:c,endPoint:l,pointsList:h,properties:v,text:m}=e;return{incoming:[s],outgoing:[i],type:t,key:r,groupKey:v==null?void 0:v.groupKey,properties:{...v,name:Gm(m)?m:(m==null?void 0:m.value)??"",text:m,startPoint:c,endPoint:l,pointsList:h}}}function J4(e){const{id:r,type:t,properties:s,text:i}=e;return{type:t,key:r,properties:{...s,name:Gm(i)?i:(i==null?void 0:i.value)??""}}}function Q4(e){const r=new Map,t={processData:wx,flowElementList:[]};return e.nodes.forEach(s=>{var i;if(s.type==="process")t.processData=J4(s);else{const c=q4(s);(i=t.flowElementList)==null||i.push(c),r.set(s.id,c)}}),e.edges.forEach(s=>{var h;const i=Z4(s);r.get(s.sourceNodeId).outgoing.push(i.key),r.get(s.targetNodeId).incoming.push(i.key),(h=t.flowElementList)==null||h.push(i)}),t}function eF(e){const{incoming:r,outgoing:t,properties:s,key:i,type:c}=e,{text:l,name:h,startPoint:v,endPoint:m,pointsList:g}=s??{},O={id:i,type:c,sourceNodeId:(r==null?void 0:r[0])??"",targetNodeId:(t==null?void 0:t[0])??"",text:l||h,startPoint:v,endPoint:m,pointsList:g,properties:{}},x=["startPoint","endPoint","pointsList","text"];return O.properties=Bm(s,x),O}function tF(e){const{properties:r,key:t,type:s,children:i}=e,{x:c,y:l,text:h,name:v}=r??{},m={id:t,type:s??"",x:c,y:l,text:h||v,children:i,properties:{}},g=["x","y","text"];return m.properties=Bm(r,g),m}function rF(e){const{properties:r,key:t,type:s}=e,{name:i}=r??{},c={id:t,type:s??"",text:i,x:0,y:0},l=["x","y","text"];return c.properties=Bm(r,l),c}function nF(e){const{flowElementList:r}=e,t=l=>["sequenceFlow","noteFlow"].includes(l),s=(r==null?void 0:r.filter(l=>!t(l.type)).map(tF))??[],i=(r==null?void 0:r.filter(l=>t(l.type)).map(eF))??[];return s.unshift(rF(e.processData??wx)),{nodes:s,edges:i}}class Fm{constructor({lf:r}){r.adapterIn=this.adapterIn,r.adapterOut=this.adapterOut}adapterOut(r){return Q4(r)}adapterIn(r){return nF(r)}}mi(Fm,"pluginName","turboAdapter");class xx{constructor({lf:r}){mi(this,"lf");mi(this,"container");mi(this,"__tooltipDOM");mi(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltip",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=r}render(r,t){this.container=t,t.appendChild(this.__tooltipDOM),r.on("node:mouseenter,edge:mouseenter",({data:s,e:i})=>{var m;const c=(m=this.__tooltips.find(g=>g.id===s.id))==null?void 0:m.content;if(!c)return;this.__tooltipDOM.innerHTML=c;const l=r.getPointByClient(i.x,i.y),{domOverlayPosition:{x:h,y:v}}=l;this.__tooltipDOM.style.top=`${v+10}px`,this.__tooltipDOM.style.left=`${h+10}px`,this.__tooltipDOM.style.display="block"}),r.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(r){this.__tooltips=r}}mi(xx,"pluginName","tooltip");function oF({props:e,state:r}){const{lf:t,graphData:s}=r;function i(l){var h;t.value=new $t.LogicFlow({container:l,grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[mD,K4,_C,Y4,OC,dC,xm,HE,Fm,Ox],edgeGenerator:(v,m)=>{if(["note","serviceTask"].includes(m.type))return"noteFlow"},...e.initOptions}),(h=t.value)==null||h.setTheme(H_),_P(r),z_(s,v=>{var x,S,N;const m=JSON.stringify(v),g=JSON.stringify((x=t.value)==null?void 0:x.getGraphData());m!==g&&((S=t.value)==null||S.render(v),(N=t.value)==null||N.emit("element:click",{isForce:!0}))},{immediate:!0})}function c(l){var h;t.value=new $t.LogicFlow({container:l,grid:{type:"dot",size:10},isSilentMode:!0,plugins:[xm,HE,Fm,xx],...e.initOptions}),(h=t.value)==null||h.setTheme(H_),z_(()=>[s.value,e.styles,e.tooltips],async()=>{var v,m,g,O;(v=t.value)==null||v.render(s.value),await fm(),(m=e.styles)==null||m.forEach(({id:x,style:S})=>{var N,j;x&&((j=(N=t.value)==null?void 0:N.graphModel)==null||j.updateAttributes(x,{style:S}))}),(O=(g=t.value)==null?void 0:g.extension.tooltip)==null||O.setTooltips(e.tooltips??[])},{immediate:!0})}return{initViewer:c,initModeler:i}}const iF=vP("span",null,"JSON",-1),aF=ew({__name:"flow-editor",props:{modelValue:{},visible:{type:Boolean}},emits:["confirm"],setup(e,{emit:r}){const s=bP(e),{modelValue:i,visible:c}=s,l=dP("");function h(){const v=JSON.parse(l.value);i.value=v,r("confirm",v),c.value=!1}return pP(()=>{l.value=JSON.stringify(i.value,null,2)}),(v,m)=>{const g=wa("el-input"),O=wa("el-button"),x=wa("el-drawer");return Lc(),Lf(x,{modelValue:oi(c),"onUpdate:modelValue":m[1]||(m[1]=S=>Ff(c)?c.value=S:null)},{header:Xc(()=>[iF,dm(v.$slots,"header")]),default:Xc(()=>[Gf(g,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=S=>l.value=S),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"]),Gf(O,{class:"flow-editor__confirm-btn",type:"primary",onClick:h},{default:Xc(()=>[hP("  ")]),_:1})]),_:3},8,["modelValue"])}}});const uF=["id"],vF=ew({__name:"index",props:{lf:{},initOptions:{},modelValue:{},elementData:{},formOptions:{},formData:{},formOption:{},formDefaults:{},formWidth:{},dataOptions:{},type:{},styles:{},tooltips:{}},setup(e){const r=e,t=cP(r),{lf:s,graphData:i,formRef:c,formData:l,formOption:h,formDefaults:v,formLoading:m,editorVisible:g,onUpdateFormData:O}=t,{initModeler:x,initViewer:S}=oF({props:r,state:t}),N=fP("logicflow-container");return yP(()=>{const j=document.querySelector(`#${N}`);r.type==="viewer"?S(j):x(j)}),(j,M)=>{const C=wa("el-main"),V=wa("el-empty"),ce=wa("el-skeleton"),_e=wa("avue-form"),fe=wa("el-aside"),z=wa("el-container");return j.type==="viewer"?(Lc(),gP("div",{key:0,id:oi(N),class:"lf-container"},null,8,uF)):(Lc(),Lf(z,{key:1,class:"lf-container"},{default:Xc(()=>[Gf(C,{id:oi(N),class:"lf-main"},null,8,["id"]),Gf(fe,{width:j.formWidth,class:"lf-aside"},{default:Xc(()=>{var ee,$;return[dm(j.$slots,"form-top"),($=(ee=oi(h))==null?void 0:ee.group)!=null&&$.length?oi(m)?(Lc(),Lf(ce,{key:1})):(Lc(),Lf(_e,{key:2,ref_key:"formRef",ref:c,modelValue:oi(l),"onUpdate:modelValue":[M[0]||(M[0]=L=>Ff(l)?l.value=L:null),oi(O)],defaults:oi(v),"onUpdate:defaults":M[1]||(M[1]=L=>Ff(v)?v.value=L:null),option:oi(h)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(Lc(),Lf(V,{key:0,description:""}))]}),_:3},8,["width"]),Gf(aF,{modelValue:oi(i),"onUpdate:modelValue":M[2]||(M[2]=ee=>Ff(i)?i.value=ee:null),visible:oi(g),"onUpdate:visible":M[3]||(M[3]=ee=>Ff(g)?g.value=ee:null),onConfirm:M[4]||(M[4]=ee=>{var $;return($=oi(s))==null?void 0:$.render(ee)})},mP({_:2},[j.$slots["editor-header"]?{name:"header",fn:Xc(()=>[dm(j.$slots,"editor-header")]),key:"0"}:void 0]),1032,["modelValue","visible"])]),_:3}))}}});export{xm as B,mD as C,Ox as D,qC as E,vD as G,Y4 as M,lD as N,$C as P,YC as S,Fm as T,rD as U,vF as _,WC as a,KC as b,ZC as c,H_ as d,JC as e,QC as f,eD as g,tD as h,nD as i,oD as j,iD as k,aD as l,uD as m,fD as n,dD as o,pD as p,yD as q,HE as r,K4 as s,Q4 as t,nF as u,xx as v};
