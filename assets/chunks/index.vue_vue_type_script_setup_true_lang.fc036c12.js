var Wj=Object.defineProperty;var Yj=(n,a,i)=>a in n?Wj(n,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[a]=i;var Ho=(n,a,i)=>(Yj(n,typeof a!="symbol"?a+"":a,i),i);import{g as zi,I as Kj}from"./data.4cb21f02.js";import{d as Zj,l as Jj}from"../flow-design_flow-modeler_index.md.59bfab0e.js";import{n as oT,f as Cb,r as Qj,b as qj,D as Pa,h as Il,A as Pc,B as Mc,G as Rc,k as eB,u as Vo,ab as _c,z as tB,e as zA,w as mv,j as rB,i as nB}from"./framework.90a1d017.js";import{d as HA}from"./theme.28e928ac.js";import{b as oB,ar as iB,as as aB,at as sB,X as pv,t as wc,au as Lb}from"../composables_use-crud_index.md.103b0bcb.js";import{fL as uB}from"../app.7914cdb6.js";var lB="[object String]";function jb(n){return typeof n=="string"||!oB(n)&&iB(n)&&aB(n)==lB}var fB=0;function XA(n){var a=++fB;return sB(n)+a}const $A={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}};function cB({lf:n,graphData:a,elementData:i,formData:u,formLoading:o,formOption:l,formOptions:c,editorVisible:h,formOptionFormat:p,formDataFormat:g}){var S,x,T,w,N,R,I;async function y({data:$,isForce:W}={data:void 0,isForce:!1}){var ge,ye,ce,xe,L,Q;const he=(ge=n.value)==null?void 0:ge.graphModel.nodes.find(U=>U.type==="process");!$&&(he!=null&&he.id)&&($=(ye=n.value)==null?void 0:ye.getNodeDataById(he.id)),!(($==null?void 0:$.id)===((ce=i.value)==null?void 0:ce.id)&&!W)&&($.type!=="process"&&((xe=n.value)==null||xe.selectElementById($.id)),o.value=!0,await oT(),i.value=$,l.value=await p({menuBtn:!1,span:24,labelPosition:"left",group:((L=c.value)==null?void 0:L[$.type])??Zj}),u.value=await g({...$.properties,id:$.id,name:((Q=$.text)==null?void 0:Q.value)||""}),await oT(),o.value=!1)}(S=n.value)==null||S.on("element:click",y),(x=n.value)==null||x.on("blank:click",y),(T=n.value)==null||T.on("node:add",y),(w=n.value)==null||w.on("node:dnd-add",y),(N=n.value)==null||N.on("node:delete",()=>y()),(R=n.value)==null||R.on("history:change",()=>{var $;a.value=($=n.value)==null?void 0:$.getGraphData()}),(I=n.value)==null||I.on("custom:edit-click",()=>{h.value=!0})}var $t={},dB={get exports(){return $t},set exports(n){$t=n}};(function(n,a){(function(u,o){n.exports=o()})(window,function(){return function(i){var u={};function o(l){if(u[l])return u[l].exports;var c=u[l]={i:l,l:!1,exports:{}};return i[l].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=i,o.c=u,o.d=function(l,c,h){o.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:h})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,c){if(c&1&&(l=o(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var h=Object.create(null);if(o.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var p in l)o.d(h,p,function(g){return l[g]}.bind(null,p));return h},o.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(c,"a",c),c},o.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},o.p="",o(o.s=215)}([function(i,u,o){(function(l,c){o.d(u,"a",function(){return k}),o.d(u,"b",function(){return Qi}),o.d(u,"c",function(){return Ko}),o.d(u,"d",function(){return jr}),o.d(u,"e",function(){return Kt}),o.d(u,"f",function(){return _t}),o.d(u,"g",function(){return Ps}),o.d(u,"h",function(){return Qo}),o.d(u,"i",function(){return vr}),o.d(u,"j",function(){return ro}),o.d(u,"k",function(){return un}),o.d(u,"l",function(){return co}),o.d(u,"m",function(){return to}),o.d(u,"n",function(){return af}),o.d(u,"o",function(){return Z}),o.d(u,"p",function(){return Fu}),o.d(u,"q",function(){return Rs}),o.d(u,"r",function(){return ja}),o.d(u,"s",function(){return Nn}),o.d(u,"t",function(){return Lu}),o.d(u,"u",function(){return rf}),o.d(u,"v",function(){return Bu}),o.d(u,"w",function(){return uf}),o.d(u,"x",function(){return Io}),o.d(u,"y",function(){return ao}),o.d(u,"z",function(){return dn}),o.d(u,"A",function(){return kn}),o.d(u,"B",function(){return Gn}),o.d(u,"C",function(){return Dr}),o.d(u,"D",function(){return lf}),o.d(u,"E",function(){return Ms}),o.d(u,"F",function(){return nf}),o.d(u,"G",function(){return La}),o.d(u,"H",function(){return Nu}),o.d(u,"I",function(){return df}),o.d(u,"J",function(){return ho}),o.d(u,"K",function(){return we}),o.d(u,"L",function(){return Fa}),o.d(u,"M",function(){return po});var h="An invariant failed, however the error is obfuscated because this is a production build.",p=[];Object.freeze(p);var g={};Object.freeze(g);function y(){return++Wt.mobxGuid}function S(m){throw x(!1,m),"X"}function x(m,E){if(!m)throw new Error("[mobx] "+(E||h))}function T(m){var E=!1;return function(){if(!E)return E=!0,m.apply(this,arguments)}}var w=function(){};function N(m){var E=[];return m.forEach(function(A){E.indexOf(A)===-1&&E.push(A)}),E}function R(m){return m!==null&&typeof m=="object"}function I(m){if(m===null||typeof m!="object")return!1;var E=Object.getPrototypeOf(m);return E===Object.prototype||E===null}function $(m){if(ce(m)||dn(m))return m;if(Array.isArray(m))return new Map(m);if(I(m)){var E=new Map;for(var A in m)E.set(A,m[A]);return E}else return S("Cannot convert to map from '"+m+"'")}function W(m,E,A){Object.defineProperty(m,E,{enumerable:!1,writable:!0,configurable:!0,value:A})}function he(m,E,A){Object.defineProperty(m,E,{enumerable:!1,writable:!1,configurable:!0,value:A})}function ge(m,E){var A=Object.getOwnPropertyDescriptor(m,E);return!A||A.configurable!==!1&&A.writable!==!1}function ye(m,E){var A="isMobX"+m;return E.prototype[A]=!0,function(B){return R(B)&&B[A]===!0}}function ce(m){return m instanceof Map}function xe(m){return m instanceof Set}function L(m){var E=new Set;for(var A in m)E.add(A);return Object.getOwnPropertySymbols(m).forEach(function(B){Object.getOwnPropertyDescriptor(m,B).enumerable&&E.add(B)}),Array.from(E)}function Q(m){return m&&m.toString?m.toString():new String(m).toString()}function U(m){return m===null?null:typeof m=="object"?""+m:m}var D=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:Object.getOwnPropertyNames,k=Symbol("mobx administration"),te=function(){function m(E){E===void 0&&(E="Atom@"+y()),this.name=E,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Qt.NOT_TRACKING}return m.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},m.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},m.prototype.reportObserved=function(){return Tu(this)},m.prototype.reportChanged=function(){Kr(),Kl(this),no()},m.prototype.toString=function(){return this.name},m}(),V=ye("Atom",te);function Z(m,E,A){E===void 0&&(E=w),A===void 0&&(A=w);var B=new te(m);return E!==w&&of(B,E),A!==w&&Ms(B,A),B}function le(m,E){return m===E}function Ae(m,E){return Ei(m,E)}function Re(m,E){return Ei(m,E,1)}function _e(m,E){return Object.is(m,E)}var Ke={identity:le,structural:Ae,default:_e,shallow:Re};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var gt=function(m,E){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,B){A.__proto__=B}||function(A,B){for(var J in B)B.hasOwnProperty(J)&&(A[J]=B[J])},gt(m,E)};function Nt(m,E){gt(m,E);function A(){this.constructor=m}m.prototype=E===null?Object.create(E):(A.prototype=E.prototype,new A)}var Vt=function(){return Vt=Object.assign||function(E){for(var A,B=1,J=arguments.length;B<J;B++){A=arguments[B];for(var pe in A)Object.prototype.hasOwnProperty.call(A,pe)&&(E[pe]=A[pe])}return E},Vt.apply(this,arguments)};function Ct(m){var E=typeof Symbol=="function"&&m[Symbol.iterator],A=0;return E?E.call(m):{next:function(){return m&&A>=m.length&&(m=void 0),{value:m&&m[A++],done:!m}}}}function Ge(m,E){var A=typeof Symbol=="function"&&m[Symbol.iterator];if(!A)return m;var B=A.call(m),J,pe=[],Xe;try{for(;(E===void 0||E-- >0)&&!(J=B.next()).done;)pe.push(J.value)}catch(Et){Xe={error:Et}}finally{try{J&&!J.done&&(A=B.return)&&A.call(B)}finally{if(Xe)throw Xe.error}}return pe}function bt(){for(var m=[],E=0;E<arguments.length;E++)m=m.concat(Ge(arguments[E]));return m}var Ut=Symbol("mobx did run lazy initializers"),ee=Symbol("mobx pending decorators"),se={},be={};function Ue(m,E){var A=E?se:be;return A[m]||(A[m]={configurable:!0,enumerable:E,get:function(){return tt(this),this[m]},set:function(B){tt(this),this[m]=B}})}function tt(m){var E,A;if(m[Ut]!==!0){var B=m[ee];if(B){W(m,Ut,!0);var J=bt(Object.getOwnPropertySymbols(B),Object.keys(B));try{for(var pe=Ct(J),Xe=pe.next();!Xe.done;Xe=pe.next()){var Et=Xe.value,Yt=B[Et];Yt.propertyCreator(m,Yt.prop,Yt.descriptor,Yt.decoratorTarget,Yt.decoratorArguments)}}catch(Tr){E={error:Tr}}finally{try{Xe&&!Xe.done&&(A=pe.return)&&A.call(pe)}finally{if(E)throw E.error}}}}}function He(m,E){return function(){var B,J=function(Xe,Et,Yt,Tr){if(Tr===!0)return E(Xe,Et,Yt,Xe,B),null;if(!Object.prototype.hasOwnProperty.call(Xe,ee)){var wr=Xe[ee];W(Xe,ee,Vt({},wr))}return Xe[ee][Et]={prop:Et,propertyCreator:E,descriptor:Yt,decoratorTarget:Xe,decoratorArguments:B},Ue(Et,m)};return Lt(arguments)?(B=p,J.apply(null,arguments)):(B=Array.prototype.slice.call(arguments),J)}}function Lt(m){return(m.length===2||m.length===3)&&(typeof m[1]=="string"||typeof m[1]=="symbol")||m.length===4&&m[3]===!0}function nr(m,E,A){return Io(m)?m:Array.isArray(m)?Dr.array(m,{name:A}):I(m)?Dr.object(m,void 0,{name:A}):ce(m)?Dr.map(m,{name:A}):xe(m)?Dr.set(m,{name:A}):m}function tr(m,E,A){return m==null||kn(m)||ao(m)||dn(m)||Bn(m)?m:Array.isArray(m)?Dr.array(m,{name:A,deep:!1}):I(m)?Dr.object(m,void 0,{name:A,deep:!1}):ce(m)?Dr.map(m,{name:A,deep:!1}):xe(m)?Dr.set(m,{name:A,deep:!1}):S(!1)}function Jt(m){return m}function rt(m,E,A){return Ei(m,E)?E:m}function Er(m){x(m);var E=He(!0,function(B,J,pe,Xe,Et){var Yt=pe?pe.initializer?pe.initializer.call(B):pe.value:void 0;Bs(B).addObservableProp(J,Yt,m)}),A=(typeof l<"u"&&l.env,E);return A.enhancer=m,A}var ur={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ur);function Xt(m){return m==null?ur:typeof m=="string"?{name:m,deep:!0,proxy:!0}:m}var j=Er(nr),Qr=Er(tr),Rr=Er(Jt),kr=Er(rt);function Be(m){return m.defaultDecorator?m.defaultDecorator.enhancer:m.deep===!1?Jt:nr}function Xr(m,E,A){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return j.apply(null,arguments);if(Io(m))return m;var B=I(m)?Dr.object(m,E,A):Array.isArray(m)?Dr.array(m,E):ce(m)?Dr.map(m,E):xe(m)?Dr.set(m,E):m;if(B!==m)return B;S(!1)}var zr={box:function(m,E){arguments.length>2&&On("box");var A=Xt(E);return new Yo(m,Be(A),A.name,!0,A.equals)},array:function(m,E){arguments.length>2&&On("array");var A=Xt(E);return qr(m,Be(A),A.name)},map:function(m,E){arguments.length>2&&On("map");var A=Xt(E);return new Qi(m,Be(A),A.name)},set:function(m,E){arguments.length>2&&On("set");var A=Xt(E);return new Ls(m,Be(A),A.name)},object:function(m,E,A){typeof arguments[1]=="string"&&On("object");var B=Xt(A);if(B.proxy===!1)return Rs({},m,E,B);var J=Iu(B),pe=Rs({},void 0,void 0,B),Xe=$n(pe);return Cu(Xe,m,E,J),Xe},ref:Rr,shallow:Qr,deep:j,struct:kr},Dr=Xr;Object.keys(zr).forEach(function(m){return Dr[m]=zr[m]});function On(m){S("Expected one or two arguments to observable."+m+". Did you accidentally try to use observable."+m+" as decorator?")}var eo=He(!1,function(m,E,A,B,J){var pe=A.get,Xe=A.set,Et=J[0]||{};Bs(m).addComputedProp(m,E,Vt({get:pe,set:Xe,context:m},Et))}),Dn=eo({equals:Ke.structural}),to=function(E,A,B){if(typeof A=="string"||E!==null&&typeof E=="object"&&arguments.length===1)return eo.apply(null,arguments);var J=typeof A=="object"?A:{};return J.get=E,J.set=typeof A=="function"?A:J.set,J.name=J.name||E.name||"",new di(J)};to.struct=Dn;var Qt;(function(m){m[m.NOT_TRACKING=-1]="NOT_TRACKING",m[m.UP_TO_DATE=0]="UP_TO_DATE",m[m.POSSIBLY_STALE=1]="POSSIBLY_STALE",m[m.STALE=2]="STALE"})(Qt||(Qt={}));var $r;(function(m){m[m.NONE=0]="NONE",m[m.LOG=1]="LOG",m[m.BREAK=2]="BREAK"})($r||($r={}));var In=function(){function m(E){this.cause=E}return m}();function Mt(m){return m instanceof In}function or(m){switch(m.dependenciesState){case Qt.UP_TO_DATE:return!1;case Qt.NOT_TRACKING:case Qt.STALE:return!0;case Qt.POSSIBLY_STALE:{for(var E=_t(!0),A=Ne(),B=m.observing,J=B.length,pe=0;pe<J;pe++){var Xe=B[pe];if(hi(Xe)){if(Wt.disableErrorBoundaries)Xe.get();else try{Xe.get()}catch{return ht(A),Kt(E),!0}if(m.dependenciesState===Qt.STALE)return ht(A),Kt(E),!0}}return Br(m),ht(A),Kt(E),!1}}}function vr(){return Wt.trackingDerivation!==null}function fr(m){var E=m.observers.size>0;Wt.computationDepth>0&&E&&S(!1),!Wt.allowStateChanges&&(E||Wt.enforceActions==="strict")&&S(!1)}function _r(m,E,A){var B=_t(!0);Br(m),m.newObserving=new Array(m.observing.length+100),m.unboundDepsCount=0,m.runId=++Wt.runId;var J=Wt.trackingDerivation;Wt.trackingDerivation=m;var pe;if(Wt.disableErrorBoundaries===!0)pe=E.call(A);else try{pe=E.call(A)}catch(Xe){pe=new In(Xe)}return Wt.trackingDerivation=J,re(m),Kt(B),pe}function re(m){for(var E=m.observing,A=m.observing=m.newObserving,B=Qt.UP_TO_DATE,J=0,pe=m.unboundDepsCount,Xe=0;Xe<pe;Xe++){var Et=A[Xe];Et.diffValue===0&&(Et.diffValue=1,J!==Xe&&(A[J]=Et),J++),Et.dependenciesState>B&&(B=Et.dependenciesState)}for(A.length=J,m.newObserving=null,pe=E.length;pe--;){var Et=E[pe];Et.diffValue===0&&Mo(Et,m),Et.diffValue=0}for(;J--;){var Et=A[J];Et.diffValue===1&&(Et.diffValue=0,Yl(Et,m))}B!==Qt.UP_TO_DATE&&(m.dependenciesState=B,m.onBecomeStale())}function Oe(m){var E=m.observing;m.observing=[];for(var A=E.length;A--;)Mo(E[A],m);m.dependenciesState=Qt.NOT_TRACKING}function we(m){var E=Ne();try{return m()}finally{ht(E)}}function Ne(){var m=Wt.trackingDerivation;return Wt.trackingDerivation=null,m}function ht(m){Wt.trackingDerivation=m}function _t(m){var E=Wt.allowStateReads;return Wt.allowStateReads=m,E}function Kt(m){Wt.allowStateReads=m}function Br(m){if(m.dependenciesState!==Qt.UP_TO_DATE){m.dependenciesState=Qt.UP_TO_DATE;for(var E=m.observing,A=E.length;A--;)E[A].lowestObserverState=Qt.UP_TO_DATE}}var Cn=0,Ln=1,Xi=Object.getOwnPropertyDescriptor(function(){},"name");Xi&&Xi.configurable;function No(m,E,A){var B=function(){return Eu(m,E,A||this,arguments)};return B.isMobxAction=!0,B}function Eu(m,E,A,B){var J=ro();try{return E.apply(A,B)}catch(pe){throw J.error=pe,pe}finally{Ps(J)}}function ro(m,E,A){var B=Zr(),J=0,pe=Ne();Kr();var Xe=ci(!0),Et=_t(!0),Yt={prevDerivation:pe,prevAllowStateChanges:Xe,prevAllowStateReads:Et,notifySpy:B,startTime:J,actionId:Ln++,parentActionId:Cn};return Cn=Yt.actionId,Yt}function Ps(m){Cn!==m.actionId&&S("invalid action stack. did you forget to finish an action?"),Cn=m.parentActionId,m.error!==void 0&&(Wt.suppressReactionErrors=!0),$i(m.prevAllowStateChanges),Kt(m.prevAllowStateReads),no(),ht(m.prevDerivation),m.notifySpy,Wt.suppressReactionErrors=!1}function jr(m,E){var A=ci(m),B;try{B=E()}finally{$i(A)}return B}function ci(m){var E=Wt.allowStateChanges;return Wt.allowStateChanges=m,E}function $i(m){Wt.allowStateChanges=m}var Yo=function(m){Nt(E,m);function E(A,B,J,pe,Xe){J===void 0&&(J="ObservableValue@"+y()),pe===void 0&&(pe=!0),Xe===void 0&&(Xe=Ke.default);var Et=m.call(this,J)||this;return Et.enhancer=B,Et.name=J,Et.equals=Xe,Et.hasUnreportedChange=!1,Et.value=B(A,void 0,J),pe&&Zr(),Et}return E.prototype.dehanceValue=function(A){return this.dehancer!==void 0?this.dehancer(A):A},E.prototype.set=function(A){var B=this.value;if(A=this.prepareNewValue(A),A!==Wt.UNCHANGED){var J=Zr();this.setNewValue(A)}},E.prototype.prepareNewValue=function(A){if(fr(this),Vn(this)){var B=vo(this,{object:this,type:"update",newValue:A});if(!B)return Wt.UNCHANGED;A=B.newValue}return A=this.enhancer(A,this.value,this.name),this.equals(this.value,A)?Wt.UNCHANGED:A},E.prototype.setNewValue=function(A){var B=this.value;this.value=A,this.reportChanged(),io(this)&&jn(this,{type:"update",object:this,newValue:A,oldValue:B})},E.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},E.prototype.intercept=function(A){return Zi(this,A)},E.prototype.observe=function(A,B){return B&&A({object:this,type:"update",newValue:this.value,oldValue:void 0}),mi(this,A)},E.prototype.toJSON=function(){return this.get()},E.prototype.toString=function(){return this.name+"["+this.value+"]"},E.prototype.valueOf=function(){return U(this.get())},E.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},E}(te),Vi=ye("ObservableValue",Yo),di=function(){function m(E){this.dependenciesState=Qt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Qt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+y(),this.value=new In(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=$r.NONE,x(E.get,"missing option for computed: get"),this.derivation=E.get,this.name=E.name||"ComputedValue@"+y(),E.set&&(this.setter=No(this.name+"-setter",E.set)),this.equals=E.equals||(E.compareStructural||E.struct?Ke.structural:Ke.default),this.scope=E.context,this.requiresReaction=!!E.requiresReaction,this.keepAlive=!!E.keepAlive}return m.prototype.onBecomeStale=function(){Jl(this)},m.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},m.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},m.prototype.get=function(){this.isComputing&&S("Cycle detected in computation "+this.name+": "+this.derivation),Wt.inBatch===0&&this.observers.size===0&&!this.keepAlive?or(this)&&(this.warnAboutUntrackedRead(),Kr(),this.value=this.computeValue(!1),no()):(Tu(this),or(this)&&this.trackAndCompute()&&Zl(this));var E=this.value;if(Mt(E))throw E.cause;return E},m.prototype.peek=function(){var E=this.computeValue(!1);if(Mt(E))throw E.cause;return E},m.prototype.set=function(E){if(this.setter){x(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,E)}finally{this.isRunningSetter=!1}}else x(!1,!1)},m.prototype.trackAndCompute=function(){var E=this.value,A=this.dependenciesState===Qt.NOT_TRACKING,B=this.computeValue(!0),J=A||Mt(E)||Mt(B)||!this.equals(E,B);return J&&(this.value=B),J},m.prototype.computeValue=function(E){this.isComputing=!0,Wt.computationDepth++;var A;if(E)A=_r(this,this.derivation,this.scope);else if(Wt.disableErrorBoundaries===!0)A=this.derivation.call(this.scope);else try{A=this.derivation.call(this.scope)}catch(B){A=new In(B)}return Wt.computationDepth--,this.isComputing=!1,A},m.prototype.suspend=function(){this.keepAlive||(Oe(this),this.value=void 0)},m.prototype.observe=function(E,A){var B=this,J=!0,pe=void 0;return co(function(){var Xe=B.get();if(!J||A){var Et=Ne();E({type:"update",object:B,newValue:Xe,oldValue:pe}),ht(Et)}J=!1,pe=Xe})},m.prototype.warnAboutUntrackedRead=function(){},m.prototype.toJSON=function(){return this.get()},m.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},m.prototype.valueOf=function(){return U(this.get())},m.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},m}(),hi=ye("ComputedValue",di),Ma=function(){function m(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return m}(),Wl={};function Ra(){return typeof window<"u"?window:typeof c<"u"?c:typeof self<"u"?self:Wl}var Da=!0,Ou=!1,Wt=function(){var m=Ra();return m.__mobxInstanceCount>0&&!m.__mobxGlobals&&(Da=!1),m.__mobxGlobals&&m.__mobxGlobals.version!==new Ma().version&&(Da=!1),Da?m.__mobxGlobals?(m.__mobxInstanceCount+=1,m.__mobxGlobals.UNCHANGED||(m.__mobxGlobals.UNCHANGED={}),m.__mobxGlobals):(m.__mobxInstanceCount=1,m.__mobxGlobals=new Ma):(setTimeout(function(){Ou||S("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Ma)}();function Su(){(Wt.pendingReactions.length||Wt.inBatch||Wt.isRunningReactions)&&S("isolateGlobalState should be called before MobX is running any reactions"),Ou=!0,Da&&(--Ra().__mobxInstanceCount===0&&(Ra().__mobxGlobals=void 0),Wt=new Ma)}function Yl(m,E){m.observers.add(E),m.lowestObserverState>E.dependenciesState&&(m.lowestObserverState=E.dependenciesState)}function Mo(m,E){m.observers.delete(E),m.observers.size===0&&xu(m)}function xu(m){m.isPendingUnobservation===!1&&(m.isPendingUnobservation=!0,Wt.pendingUnobservations.push(m))}function Kr(){Wt.inBatch++}function no(){if(--Wt.inBatch===0){Wi();for(var m=Wt.pendingUnobservations,E=0;E<m.length;E++){var A=m[E];A.isPendingUnobservation=!1,A.observers.size===0&&(A.isBeingObserved&&(A.isBeingObserved=!1,A.onBecomeUnobserved()),A instanceof di&&A.suspend())}Wt.pendingUnobservations=[]}}function Tu(m){var E=Wt.trackingDerivation;return E!==null?(E.runId!==m.lastAccessedBy&&(m.lastAccessedBy=E.runId,E.newObserving[E.unboundDepsCount++]=m,m.isBeingObserved||(m.isBeingObserved=!0,m.onBecomeObserved())),!0):(m.observers.size===0&&Wt.inBatch>0&&xu(m),!1)}function Kl(m){m.lowestObserverState!==Qt.STALE&&(m.lowestObserverState=Qt.STALE,m.observers.forEach(function(E){E.dependenciesState===Qt.UP_TO_DATE&&(E.isTracing!==$r.NONE&&Ia(E,m),E.onBecomeStale()),E.dependenciesState=Qt.STALE}))}function Zl(m){m.lowestObserverState!==Qt.STALE&&(m.lowestObserverState=Qt.STALE,m.observers.forEach(function(E){E.dependenciesState===Qt.POSSIBLY_STALE?E.dependenciesState=Qt.STALE:E.dependenciesState===Qt.UP_TO_DATE&&(m.lowestObserverState=Qt.UP_TO_DATE)}))}function Jl(m){m.lowestObserverState===Qt.UP_TO_DATE&&(m.lowestObserverState=Qt.POSSIBLY_STALE,m.observers.forEach(function(E){E.dependenciesState===Qt.UP_TO_DATE&&(E.dependenciesState=Qt.POSSIBLY_STALE,E.isTracing!==$r.NONE&&Ia(E,m),E.onBecomeStale())}))}function Ia(m,E){if(console.log("[mobx.trace] '"+m.name+"' is invalidated due to a change in: '"+E.name+"'"),m.isTracing===$r.BREAK){var A=[];Au(Lu(m),A,1),new Function(`debugger;
/*
Tracing '`+m.name+`'

You are entering this break point because derivation '`+m.name+"' is being traced and '"+E.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(m instanceof di?m.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+A.join(`
`)+`
*/
    `)()}}function Au(m,E,A){if(E.length>=1e3){E.push("(and many more)");return}E.push(""+new Array(A).join("	")+m.name),m.dependencies&&m.dependencies.forEach(function(B){return Au(B,E,A+1)})}var Ko=function(){function m(E,A,B,J){E===void 0&&(E="Reaction@"+y()),J===void 0&&(J=!1),this.name=E,this.onInvalidate=A,this.errorHandler=B,this.requiresObservable=J,this.observing=[],this.newObserving=[],this.dependenciesState=Qt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+y(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=$r.NONE}return m.prototype.onBecomeStale=function(){this.schedule()},m.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Wt.pendingReactions.push(this),Wi())},m.prototype.isScheduled=function(){return this._isScheduled},m.prototype.runReaction=function(){if(!this.isDisposed){if(Kr(),this._isScheduled=!1,or(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Zr()}catch(E){this.reportExceptionInDerivation(E)}}no()}},m.prototype.track=function(E){if(!this.isDisposed){Kr(),this._isRunning=!0;var A=_r(this,E,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Oe(this),Mt(A)&&this.reportExceptionInDerivation(A.cause),no()}},m.prototype.reportExceptionInDerivation=function(E){var A=this;if(this.errorHandler){this.errorHandler(E,this);return}if(Wt.disableErrorBoundaries)throw E;var B="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Wt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(B,E),Wt.globalReactionErrorHandlers.forEach(function(J){return J(E,A)})},m.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Kr(),Oe(this),no()))},m.prototype.getDisposer=function(){var E=this.dispose.bind(this);return E[k]=this,E},m.prototype.toString=function(){return"Reaction["+this.name+"]"},m.prototype.trace=function(E){E===void 0&&(E=!1),yi(this,E)},m}(),_s=100,ws=function(m){return m()};function Wi(){Wt.inBatch>0||Wt.isRunningReactions||ws(Pu)}function Pu(){Wt.isRunningReactions=!0;for(var m=Wt.pendingReactions,E=0;m.length>0;){++E===_s&&(console.error("Reaction doesn't converge to a stable state after "+_s+" iterations."+(" Probably there is a cycle in the reactive function: "+m[0])),m.splice(0));for(var A=m.splice(0),B=0,J=A.length;B<J;B++)A[B].runReaction()}Wt.isRunningReactions=!1}var Ca=ye("Reaction",Ko);function Ql(m){var E=ws;ws=function(A){return m(function(){return E(A)})}}function Zr(){return!1}function _u(m){}function ql(m){}function wu(m){}function Nu(m){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function ef(){S(!1)}function Mu(m){return function(E,A,B){if(B){if(B.value)return{value:No(m,B.value),enumerable:!1,configurable:!0,writable:!0};var J=B.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return No(m,J.call(this))}}}return tf(m).apply(this,arguments)}}function tf(m){return function(E,A,B){Object.defineProperty(E,A,{configurable:!0,enumerable:!1,get:function(){},set:function(J){W(this,A,un(m,J))}})}}function oo(m,E,A,B){return B===!0?(Ns(m,E,A.value),null):A?{configurable:!0,enumerable:!1,get:function(){return Ns(this,E,A.value||A.initializer.call(this)),this[E]},set:ef}:{enumerable:!1,configurable:!0,set:function(J){Ns(this,E,J)},get:function(){}}}var un=function(E,A,B,J){if(arguments.length===1&&typeof E=="function")return No(E.name||"<unnamed action>",E);if(arguments.length===2&&typeof A=="function")return No(E,A);if(arguments.length===1&&typeof E=="string")return Mu(E);if(J===!0)W(E,A,No(E.name||A,B.value,this));else return Mu(A).apply(null,arguments)};un.bound=oo;function La(m,E){var A=typeof m=="string"?m:m.name||"<unnamed action>",B=typeof m=="function"?m:E;return Eu(A,B,this,void 0)}function rf(m){return typeof m=="function"&&m.isMobxAction===!0}function Ns(m,E,A){W(m,E,No(E,A.bind(m)))}function co(m,E){E===void 0&&(E=g);var A=E&&E.name||m.name||"Autorun@"+y(),B=!E.scheduler&&!E.delay,J;if(B)J=new Ko(A,function(){this.track(Et)},E.onError,E.requiresObservable);else{var pe=pi(E),Xe=!1;J=new Ko(A,function(){Xe||(Xe=!0,pe(function(){Xe=!1,J.isDisposed||J.track(Et)}))},E.onError,E.requiresObservable)}function Et(){m(J)}return J.schedule(),J.getDisposer()}var Ru=function(m){return m()};function pi(m){return m.scheduler?m.scheduler:m.delay?function(E){return setTimeout(E,m.delay)}:Ru}function nf(m,E,A){A===void 0&&(A=g);var B=A.name||"Reaction@"+y(),J=un(B,A.onError?Zo(A.onError,E):E),pe=!A.scheduler&&!A.delay,Xe=pi(A),Et=!0,Yt=!1,Tr,wr=A.compareStructural?Ke.structural:A.equals||Ke.default,Ur=new Ko(B,function(){Et||pe?Hr():Yt||(Yt=!0,Xe(Hr))},A.onError,A.requiresObservable);function Hr(){if(Yt=!1,!Ur.isDisposed){var nn=!1;Ur.track(function(){var Sn=m(Ur);nn=Et||!wr(Tr,Sn),Tr=Sn}),Et&&A.fireImmediately&&J(Tr,Ur),!Et&&nn===!0&&J(Tr,Ur),Et&&(Et=!1)}}return Ur.schedule(),Ur.getDisposer()}function Zo(m,E){return function(){try{return E.apply(this,arguments)}catch(A){m.call(this,A)}}}function of(m,E,A){return Du("onBecomeObserved",m,E,A)}function Ms(m,E,A){return Du("onBecomeUnobserved",m,E,A)}function Du(m,E,A,B){var J=typeof B=="function"?Nn(E,A):Nn(E),pe=typeof B=="function"?B:A,Xe=m+"Listeners";J[Xe]?J[Xe].add(pe):J[Xe]=new Set([pe]);var Et=J[m];return typeof Et!="function"?S(!1):function(){var Yt=J[Xe];Yt&&(Yt.delete(pe),Yt.size===0&&delete J[Xe])}}function af(m){var E=m.enforceActions,A=m.computedRequiresReaction,B=m.computedConfigurable,J=m.disableErrorBoundaries,pe=m.reactionScheduler,Xe=m.reactionRequiresObservable,Et=m.observableRequiresReaction;if(m.isolateGlobalState===!0&&Su(),E!==void 0){var Yt=void 0;switch(E){case!0:case"observed":Yt=!0;break;case!1:case"never":Yt=!1;break;case"strict":case"always":Yt="strict";break;default:S("Invalid value for 'enforceActions': '"+E+"', expected 'never', 'always' or 'observed'")}Wt.enforceActions=Yt,Wt.allowStateChanges=!(Yt===!0||Yt==="strict")}A!==void 0&&(Wt.computedRequiresReaction=!!A),Xe!==void 0&&(Wt.reactionRequiresObservable=!!Xe),Et!==void 0&&(Wt.observableRequiresReaction=!!Et,Wt.allowStateReads=!Wt.observableRequiresReaction),B!==void 0&&(Wt.computedConfigurable=!!B),J!==void 0&&(J===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Wt.disableErrorBoundaries=!!J),pe&&Ql(pe)}function Rs(m,E,A,B){B=Xt(B);var J=Iu(B);return tt(m),Bs(m,B.name,J.enhancer),E&&Cu(m,E,A,J),m}function Iu(m){return m.defaultDecorator||(m.deep===!1?Rr:j)}function Cu(m,E,A,B){var J,pe,Xe,Et;Kr();try{var Et=D(E);try{for(var Yt=Ct(Et),Tr=Yt.next();!Tr.done;Tr=Yt.next()){var Xe=Tr.value,wr=Object.getOwnPropertyDescriptor(E,Xe),Ur=A&&Xe in A?A[Xe]:wr.get?eo:B,Hr=Ur(m,Xe,wr,!0);Hr&&Object.defineProperty(m,Xe,Hr)}}catch(Sn){J={error:Sn}}finally{try{Tr&&!Tr.done&&(pe=Yt.return)&&pe.call(Yt)}finally{if(J)throw J.error}}}finally{no()}}function Lu(m,E){return Ro(Nn(m,E))}function Ro(m){var E={name:m.name};return m.observing&&m.observing.length>0&&(E.dependencies=N(m.observing).map(Ro)),E}var sf=0;function ju(){this.message="FLOW_CANCELLED"}ju.prototype=Object.create(Error.prototype);function ja(m){arguments.length!==1&&S("Flow expects 1 argument and cannot be used as decorator");var E=m.name||"<unnamed flow>";return function(){var A=this,B=arguments,J=++sf,pe=un(E+" - runid: "+J+" - init",m).apply(A,B),Xe,Et=void 0,Yt=new Promise(function(Tr,wr){var Ur=0;Xe=wr;function Hr(Vr){Et=void 0;var Wn;try{Wn=un(E+" - runid: "+J+" - yield "+Ur++,pe.next).call(pe,Vr)}catch(qo){return wr(qo)}Sn(Wn)}function nn(Vr){Et=void 0;var Wn;try{Wn=un(E+" - runid: "+J+" - yield "+Ur++,pe.throw).call(pe,Vr)}catch(qo){return wr(qo)}Sn(Wn)}function Sn(Vr){if(Vr&&typeof Vr.then=="function"){Vr.then(Sn,wr);return}return Vr.done?Tr(Vr.value):(Et=Promise.resolve(Vr.value),Et.then(Hr,nn))}Hr(void 0)});return Yt.cancel=un(E+" - runid: "+J+" - cancel",function(){try{Et&&Ba(Et);var Tr=pe.return(void 0),wr=Promise.resolve(Tr.value);wr.then(w,w),Ba(wr),Xe(new ju)}catch(Ur){Xe(Ur)}}),Yt}}function Ba(m){typeof m.cancel=="function"&&m.cancel()}function Ds(m,E){if(m==null)return!1;if(E!==void 0){if(kn(m)===!1||!m[k].values.has(E))return!1;var A=Nn(m,E);return hi(A)}return hi(m)}function Bu(m){return arguments.length>1?S(!1):Ds(m)}function uf(m,E){return typeof E!="string"?S(!1):Ds(m,E)}function Do(m,E){return m==null?!1:E!==void 0?kn(m)?m[k].values.has(E):!1:kn(m)||!!m[k]||V(m)||Ca(m)||hi(m)}function Io(m){return arguments.length!==1&&S(!1),Do(m)}function Gn(m){return kn(m)?m[k].getKeys():dn(m)||Bn(m)?Array.from(m.keys()):ao(m)?m.map(function(E,A){return A}):S(!1)}function Fa(m){return kn(m)?Gn(m).map(function(E){return m[E]}):dn(m)?Gn(m).map(function(E){return m.get(E)}):Bn(m)?Array.from(m.values()):ao(m)?m.slice():S(!1)}function Fu(m){return kn(m)?Gn(m).map(function(E){return[E,m[E]]}):dn(m)?Gn(m).map(function(E){return[E,m.get(E)]}):Bn(m)?Array.from(m.entries()):ao(m)?m.map(function(E,A){return[A,E]}):S(!1)}function Is(m,E,A){if(arguments.length===2&&!Bn(m)){Kr();var B=E;try{for(var J in B)Is(m,J,B[J])}finally{no()}return}if(kn(m)){var pe=m[k],Xe=pe.values.get(E);Xe?pe.write(E,A):pe.addObservableProp(E,A,pe.defaultEnhancer)}else if(dn(m))m.set(E,A);else if(Bn(m))m.add(E);else if(ao(m))typeof E!="number"&&(E=parseInt(E,10)),x(E>=0,"Not a valid index: '"+E+"'"),Kr(),E>=m.length&&(m.length=E+1),m[E]=A,no();else return S(!1)}function lf(m,E,A,B){return typeof A=="function"?ff(m,E,A,B):Ga(m,E,A)}function Ga(m,E,A){return Qo(m).observe(E,A)}function ff(m,E,A,B){return Qo(m,E).observe(A,B)}var cf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function vi(m,E,A,B){return B.detectCycles&&m.set(E,A),A}function Co(m,E,A){if(!E.recurseEverything&&!Io(m)||typeof m!="object")return m;if(m===null)return null;if(m instanceof Date)return m;if(Vi(m))return Co(m.get(),E,A);Io(m)&&Gn(m);var B=E.detectCycles===!0;if(B&&m!==null&&A.has(m))return A.get(m);if(ao(m)||Array.isArray(m)){var J=vi(A,m,[],E),pe=m.map(function(nn){return Co(nn,E,A)});J.length=pe.length;for(var Xe=0,Et=pe.length;Xe<Et;Xe++)J[Xe]=pe[Xe];return J}if(Bn(m)||Object.getPrototypeOf(m)===Set.prototype)if(E.exportMapsAsObjects===!1){var Yt=vi(A,m,new Set,E);return m.forEach(function(nn){Yt.add(Co(nn,E,A))}),Yt}else{var Tr=vi(A,m,[],E);return m.forEach(function(nn){Tr.push(Co(nn,E,A))}),Tr}if(dn(m)||Object.getPrototypeOf(m)===Map.prototype)if(E.exportMapsAsObjects===!1){var wr=vi(A,m,new Map,E);return m.forEach(function(nn,Sn){wr.set(Sn,Co(nn,E,A))}),wr}else{var Ur=vi(A,m,{},E);return m.forEach(function(nn,Sn){Ur[Sn]=Co(nn,E,A)}),Ur}var Hr=vi(A,m,{},E);return L(m).forEach(function(nn){Hr[nn]=Co(m[nn],E,A)}),Hr}function df(m,E){typeof E=="boolean"&&(E={detectCycles:E}),E||(E=cf),E.detectCycles=E.detectCycles===void 0?E.recurseEverything===!0:E.detectCycles===!0;var A;return E.detectCycles&&(A=new Map),Co(m,E,A)}function yi(){for(var m=[],E=0;E<arguments.length;E++)m[E]=arguments[E];var A=!1;typeof m[m.length-1]=="boolean"&&(A=m.pop());var B=hf(m);if(!B)return S(!1);B.isTracing===$r.NONE&&console.log("[mobx.trace] '"+B.name+"' tracing enabled"),B.isTracing=A?$r.BREAK:$r.LOG}function hf(m){switch(m.length){case 0:return Wt.trackingDerivation;case 1:return Nn(m[0]);case 2:return Nn(m[0],m[1])}}function ho(m,E){E===void 0&&(E=void 0),Kr();try{return m.apply(E)}finally{no()}}function po(m,E,A){return arguments.length===1||E&&typeof E=="object"?gi(m,E):Yi(m,E,A||{})}function Yi(m,E,A){var B;typeof A.timeout=="number"&&(B=setTimeout(function(){if(!pe[k].isDisposed){pe();var Xe=new Error("WHEN_TIMEOUT");if(A.onError)A.onError(Xe);else throw Xe}},A.timeout)),A.name=A.name||"When@"+y();var J=No(A.name+"-effect",E),pe=co(function(Xe){m()&&(Xe.dispose(),B&&clearTimeout(B),J())},A);return pe}function gi(m,E){var A,B=new Promise(function(J,pe){var Xe=Yi(m,J,Vt(Vt({},E),{onError:pe}));A=function(){Xe(),pe("WHEN_CANCELLED")}});return B.cancel=A,B}function Ki(m){return m[k]}function xo(m){return typeof m=="string"||typeof m=="number"||typeof m=="symbol"}var Jo={has:function(m,E){if(E===k||E==="constructor"||E===Ut)return!0;var A=Ki(m);return xo(E)?A.has(E):E in m},get:function(m,E){if(E===k||E==="constructor"||E===Ut)return m[E];var A=Ki(m),B=A.values.get(E);if(B instanceof te){var J=B.get();return J===void 0&&A.has(E),J}return xo(E)&&A.has(E),m[E]},set:function(m,E,A){return xo(E)?(Is(m,E,A),!0):!1},deleteProperty:function(m,E){if(!xo(E))return!1;var A=Ki(m);return A.remove(E),!0},ownKeys:function(m){var E=Ki(m);return E.keysAtom.reportObserved(),Reflect.ownKeys(m)},preventExtensions:function(m){return S("Dynamic observable objects cannot be frozen"),!1}};function $n(m){var E=new Proxy(m,Jo);return m[k].proxy=E,E}function Vn(m){return m.interceptors!==void 0&&m.interceptors.length>0}function Zi(m,E){var A=m.interceptors||(m.interceptors=[]);return A.push(E),T(function(){var B=A.indexOf(E);B!==-1&&A.splice(B,1)})}function vo(m,E){var A=Ne();try{for(var B=bt(m.interceptors||[]),J=0,pe=B.length;J<pe&&(E=B[J](E),x(!E||E.type,"Intercept handlers should return nothing or a change object"),!!E);J++);return E}finally{ht(A)}}function io(m){return m.changeListeners!==void 0&&m.changeListeners.length>0}function mi(m,E){var A=m.changeListeners||(m.changeListeners=[]);return A.push(E),T(function(){var B=A.indexOf(E);B!==-1&&A.splice(B,1)})}function jn(m,E){var A=Ne(),B=m.changeListeners;if(B){B=B.slice();for(var J=0,pe=B.length;J<pe;J++)B[J](E);ht(A)}}var pf=1e4,Gu={get:function(m,E){return E===k?m[k]:E==="length"?m[k].getArrayLength():typeof E=="number"?To.get.call(m,E):typeof E=="string"&&!isNaN(E)?To.get.call(m,parseInt(E)):To.hasOwnProperty(E)?To[E]:m[E]},set:function(m,E,A){return E==="length"&&m[k].setArrayLength(A),typeof E=="number"&&To.set.call(m,E,A),typeof E=="symbol"||isNaN(E)?m[E]=A:To.set.call(m,parseInt(E),A),!0},preventExtensions:function(m){return S("Observable arrays cannot be frozen"),!1}};function qr(m,E,A,B){A===void 0&&(A="ObservableArray@"+y()),B===void 0&&(B=!1);var J=new Cs(A,E,B);he(J.values,k,J);var pe=new Proxy(J.values,Gu);if(J.proxy=pe,m&&m.length){var Xe=ci(!0);J.spliceWithArray(0,0,m),$i(Xe)}return pe}var Cs=function(){function m(E,A,B){this.owned=B,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new te(E||"ObservableArray@"+y()),this.enhancer=function(J,pe){return A(J,pe,E+"[..]")}}return m.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},m.prototype.dehanceValues=function(E){return this.dehancer!==void 0&&E.length>0?E.map(this.dehancer):E},m.prototype.intercept=function(E){return Zi(this,E)},m.prototype.observe=function(E,A){return A===void 0&&(A=!1),A&&E({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),mi(this,E)},m.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},m.prototype.setArrayLength=function(E){if(typeof E!="number"||E<0)throw new Error("[mobx.array] Out of range: "+E);var A=this.values.length;if(E!==A)if(E>A){for(var B=new Array(E-A),J=0;J<E-A;J++)B[J]=void 0;this.spliceWithArray(A,0,B)}else this.spliceWithArray(E,A-E)},m.prototype.updateArrayLength=function(E,A){if(E!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=A},m.prototype.spliceWithArray=function(E,A,B){var J=this;fr(this.atom);var pe=this.values.length;if(E===void 0?E=0:E>pe?E=pe:E<0&&(E=Math.max(0,pe+E)),arguments.length===1?A=pe-E:A==null?A=0:A=Math.max(0,Math.min(A,pe-E)),B===void 0&&(B=p),Vn(this)){var Xe=vo(this,{object:this.proxy,type:"splice",index:E,removedCount:A,added:B});if(!Xe)return p;A=Xe.removedCount,B=Xe.added}B=B.length===0?B:B.map(function(Yt){return J.enhancer(Yt,void 0)});var Et=this.spliceItemsIntoValues(E,A,B);return(A!==0||B.length!==0)&&this.notifyArraySplice(E,B,Et),this.dehanceValues(Et)},m.prototype.spliceItemsIntoValues=function(E,A,B){var J;if(B.length<pf)return(J=this.values).splice.apply(J,bt([E,A],B));var pe=this.values.slice(E,E+A);return this.values=this.values.slice(0,E).concat(B,this.values.slice(E+A)),pe},m.prototype.notifyArrayChildUpdate=function(E,A,B){var J=!this.owned&&Zr(),pe=io(this),Xe=pe||J?{object:this.proxy,type:"update",index:E,newValue:A,oldValue:B}:null;this.atom.reportChanged(),pe&&jn(this,Xe)},m.prototype.notifyArraySplice=function(E,A,B){var J=!this.owned&&Zr(),pe=io(this),Xe=pe||J?{object:this.proxy,type:"splice",index:E,removed:B,added:A,removedCount:B.length,addedCount:A.length}:null;this.atom.reportChanged(),pe&&jn(this,Xe)},m}(),To={intercept:function(m){return this[k].intercept(m)},observe:function(m,E){E===void 0&&(E=!1);var A=this[k];return A.observe(m,E)},clear:function(){return this.splice(0)},replace:function(m){var E=this[k];return E.spliceWithArray(0,E.values.length,m)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(m,E){for(var A=[],B=2;B<arguments.length;B++)A[B-2]=arguments[B];var J=this[k];switch(arguments.length){case 0:return[];case 1:return J.spliceWithArray(m);case 2:return J.spliceWithArray(m,E)}return J.spliceWithArray(m,E,A)},spliceWithArray:function(m,E,A){var B=this[k];return B.spliceWithArray(m,E,A)},push:function(){for(var m=[],E=0;E<arguments.length;E++)m[E]=arguments[E];var A=this[k];return A.spliceWithArray(A.values.length,0,m),A.values.length},pop:function(){return this.splice(Math.max(this[k].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var m=[],E=0;E<arguments.length;E++)m[E]=arguments[E];var A=this[k];return A.spliceWithArray(0,0,m),A.values.length},reverse:function(){var m=this.slice();return m.reverse.apply(m,arguments)},sort:function(m){var E=this.slice();return E.sort.apply(E,arguments)},remove:function(m){var E=this[k],A=E.dehanceValues(E.values).indexOf(m);return A>-1?(this.splice(A,1),!0):!1},get:function(m){var E=this[k];if(E){if(m<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[m]);console.warn("[mobx.array] Attempt to read an array index ("+m+") that is out of bounds ("+E.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(m,E){var A=this[k],B=A.values;if(m<B.length){fr(A.atom);var J=B[m];if(Vn(A)){var pe=vo(A,{type:"update",object:A.proxy,index:m,newValue:E});if(!pe)return;E=pe.newValue}E=A.enhancer(E,J);var Xe=E!==J;Xe&&(B[m]=E,A.notifyArrayChildUpdate(m,E,J))}else if(m===B.length)A.spliceWithArray(m,0,[E]);else throw new Error("[mobx.array] Index out of bounds, "+m+" is larger than "+B.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(m){typeof Array.prototype[m]=="function"&&(To[m]=function(){var E=this[k];E.atom.reportObserved();var A=E.dehanceValues(E.values);return A[m].apply(A,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(m){typeof Array.prototype[m]=="function"&&(To[m]=function(E,A){var B=this,J=this[k];J.atom.reportObserved();var pe=J.dehanceValues(J.values);return pe[m](function(Xe,Et){return E.call(A,Xe,Et,B)},A)})}),["reduce","reduceRight"].forEach(function(m){To[m]=function(){var E=this,A=this[k];A.atom.reportObserved();var B=arguments[0];return arguments[0]=function(J,pe,Xe){return pe=A.dehanceValue(pe),B(J,pe,Xe,E)},A.values[m].apply(A.values,arguments)}});var yo=ye("ObservableArrayAdministration",Cs);function ao(m){return R(m)&&yo(m[k])}var Ji,Lo={},Qi=function(){function m(E,A,B){if(A===void 0&&(A=nr),B===void 0&&(B="ObservableMap@"+y()),this.enhancer=A,this.name=B,this[Ji]=Lo,this._keysAtom=Z(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(E)}return m.prototype._has=function(E){return this._data.has(E)},m.prototype.has=function(E){var A=this;if(!Wt.trackingDerivation)return this._has(E);var B=this._hasMap.get(E);if(!B){var J=B=new Yo(this._has(E),Jt,this.name+"."+Q(E)+"?",!1);this._hasMap.set(E,J),Ms(J,function(){return A._hasMap.delete(E)})}return B.get()},m.prototype.set=function(E,A){var B=this._has(E);if(Vn(this)){var J=vo(this,{type:B?"update":"add",object:this,newValue:A,name:E});if(!J)return this;A=J.newValue}return B?this._updateValue(E,A):this._addValue(E,A),this},m.prototype.delete=function(E){var A=this;if(fr(this._keysAtom),Vn(this)){var B=vo(this,{type:"delete",object:this,name:E});if(!B)return!1}if(this._has(E)){var J=Zr(),pe=io(this),B=pe||J?{type:"delete",object:this,oldValue:this._data.get(E).value,name:E}:null;return ho(function(){A._keysAtom.reportChanged(),A._updateHasMapEntry(E,!1);var Et=A._data.get(E);Et.setNewValue(void 0),A._data.delete(E)}),pe&&jn(this,B),!0}return!1},m.prototype._updateHasMapEntry=function(E,A){var B=this._hasMap.get(E);B&&B.setNewValue(A)},m.prototype._updateValue=function(E,A){var B=this._data.get(E);if(A=B.prepareNewValue(A),A!==Wt.UNCHANGED){var J=Zr(),pe=io(this),Xe=pe||J?{type:"update",object:this,oldValue:B.value,name:E,newValue:A}:null;B.setNewValue(A),pe&&jn(this,Xe)}},m.prototype._addValue=function(E,A){var B=this;fr(this._keysAtom),ho(function(){var Et=new Yo(A,B.enhancer,B.name+"."+Q(E),!1);B._data.set(E,Et),A=Et.value,B._updateHasMapEntry(E,!0),B._keysAtom.reportChanged()});var J=Zr(),pe=io(this),Xe=pe||J?{type:"add",object:this,name:E,newValue:A}:null;pe&&jn(this,Xe)},m.prototype.get=function(E){return this.has(E)?this.dehanceValue(this._data.get(E).get()):this.dehanceValue(void 0)},m.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},m.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},m.prototype.values=function(){var E=this,A=this.keys();return qi({next:function(){var B=A.next(),J=B.done,pe=B.value;return{done:J,value:J?void 0:E.get(pe)}}})},m.prototype.entries=function(){var E=this,A=this.keys();return qi({next:function(){var B=A.next(),J=B.done,pe=B.value;return{done:J,value:J?void 0:[pe,E.get(pe)]}}})},m.prototype[Ji=k,Symbol.iterator]=function(){return this.entries()},m.prototype.forEach=function(E,A){var B,J;try{for(var pe=Ct(this),Xe=pe.next();!Xe.done;Xe=pe.next()){var Et=Ge(Xe.value,2),Yt=Et[0],Tr=Et[1];E.call(A,Tr,Yt,this)}}catch(wr){B={error:wr}}finally{try{Xe&&!Xe.done&&(J=pe.return)&&J.call(pe)}finally{if(B)throw B.error}}},m.prototype.merge=function(E){var A=this;return dn(E)&&(E=E.toJS()),ho(function(){var B=ci(!0);try{I(E)?L(E).forEach(function(J){return A.set(J,E[J])}):Array.isArray(E)?E.forEach(function(J){var pe=Ge(J,2),Xe=pe[0],Et=pe[1];return A.set(Xe,Et)}):ce(E)?(E.constructor!==Map&&S("Cannot initialize from classes that inherit from Map: "+E.constructor.name),E.forEach(function(J,pe){return A.set(pe,J)})):E!=null&&S("Cannot initialize map from "+E)}finally{$i(B)}}),this},m.prototype.clear=function(){var E=this;ho(function(){we(function(){var A,B;try{for(var J=Ct(E.keys()),pe=J.next();!pe.done;pe=J.next()){var Xe=pe.value;E.delete(Xe)}}catch(Et){A={error:Et}}finally{try{pe&&!pe.done&&(B=J.return)&&B.call(J)}finally{if(A)throw A.error}}})})},m.prototype.replace=function(E){var A=this;return ho(function(){var B,J,pe,Xe,Et=$(E),Yt=new Map,Tr=!1;try{for(var wr=Ct(A._data.keys()),Ur=wr.next();!Ur.done;Ur=wr.next()){var Hr=Ur.value;if(!Et.has(Hr)){var nn=A.delete(Hr);if(nn)Tr=!0;else{var Sn=A._data.get(Hr);Yt.set(Hr,Sn)}}}}catch(ei){B={error:ei}}finally{try{Ur&&!Ur.done&&(J=wr.return)&&J.call(wr)}finally{if(B)throw B.error}}try{for(var Vr=Ct(Et.entries()),Wn=Vr.next();!Wn.done;Wn=Vr.next()){var qo=Ge(Wn.value,2),Hr=qo[0],Sn=qo[1],$a=A._data.has(Hr);if(A.set(Hr,Sn),A._data.has(Hr)){var Hu=A._data.get(Hr);Yt.set(Hr,Hu),$a||(Tr=!0)}}}catch(ei){pe={error:ei}}finally{try{Wn&&!Wn.done&&(Xe=Vr.return)&&Xe.call(Vr)}finally{if(pe)throw pe.error}}if(!Tr)if(A._data.size!==Yt.size)A._keysAtom.reportChanged();else for(var ea=A._data.keys(),Xu=Yt.keys(),zs=ea.next(),Si=Xu.next();!zs.done;){if(zs.value!==Si.value){A._keysAtom.reportChanged();break}zs=ea.next(),Si=Xu.next()}A._data=Yt}),this},Object.defineProperty(m.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),m.prototype.toPOJO=function(){var E,A,B={};try{for(var J=Ct(this),pe=J.next();!pe.done;pe=J.next()){var Xe=Ge(pe.value,2),Et=Xe[0],Yt=Xe[1];B[typeof Et=="symbol"?Et:Q(Et)]=Yt}}catch(Tr){E={error:Tr}}finally{try{pe&&!pe.done&&(A=J.return)&&A.call(J)}finally{if(E)throw E.error}}return B},m.prototype.toJS=function(){return new Map(this)},m.prototype.toJSON=function(){return this.toPOJO()},m.prototype.toString=function(){var E=this;return this.name+"[{ "+Array.from(this.keys()).map(function(A){return Q(A)+": "+(""+E.get(A))}).join(", ")+" }]"},m.prototype.observe=function(E,A){return mi(this,E)},m.prototype.intercept=function(E){return Zi(this,E)},m}(),dn=ye("ObservableMap",Qi),bi,ka={},Ls=function(){function m(E,A,B){if(A===void 0&&(A=nr),B===void 0&&(B="ObservableSet@"+y()),this.name=B,this[bi]=ka,this._data=new Set,this._atom=Z(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(J,pe){return A(J,pe,B)},E&&this.replace(E)}return m.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},m.prototype.clear=function(){var E=this;ho(function(){we(function(){var A,B;try{for(var J=Ct(E._data.values()),pe=J.next();!pe.done;pe=J.next()){var Xe=pe.value;E.delete(Xe)}}catch(Et){A={error:Et}}finally{try{pe&&!pe.done&&(B=J.return)&&B.call(J)}finally{if(A)throw A.error}}})})},m.prototype.forEach=function(E,A){var B,J;try{for(var pe=Ct(this),Xe=pe.next();!Xe.done;Xe=pe.next()){var Et=Xe.value;E.call(A,Et,Et,this)}}catch(Yt){B={error:Yt}}finally{try{Xe&&!Xe.done&&(J=pe.return)&&J.call(pe)}finally{if(B)throw B.error}}},Object.defineProperty(m.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),m.prototype.add=function(E){var A=this;if(fr(this._atom),Vn(this)){var B=vo(this,{type:"add",object:this,newValue:E});if(!B)return this}if(!this.has(E)){ho(function(){A._data.add(A.enhancer(E,void 0)),A._atom.reportChanged()});var J=Zr(),pe=io(this),B=pe||J?{type:"add",object:this,newValue:E}:null;pe&&jn(this,B)}return this},m.prototype.delete=function(E){var A=this;if(Vn(this)){var B=vo(this,{type:"delete",object:this,oldValue:E});if(!B)return!1}if(this.has(E)){var J=Zr(),pe=io(this),B=pe||J?{type:"delete",object:this,oldValue:E}:null;return ho(function(){A._atom.reportChanged(),A._data.delete(E)}),pe&&jn(this,B),!0}return!1},m.prototype.has=function(E){return this._atom.reportObserved(),this._data.has(this.dehanceValue(E))},m.prototype.entries=function(){var E=0,A=Array.from(this.keys()),B=Array.from(this.values());return qi({next:function(){var J=E;return E+=1,J<B.length?{value:[A[J],B[J]],done:!1}:{done:!0}}})},m.prototype.keys=function(){return this.values()},m.prototype.values=function(){this._atom.reportObserved();var E=this,A=0,B=Array.from(this._data.values());return qi({next:function(){return A<B.length?{value:E.dehanceValue(B[A++]),done:!1}:{done:!0}}})},m.prototype.replace=function(E){var A=this;return Bn(E)&&(E=E.toJS()),ho(function(){var B=ci(!0);try{Array.isArray(E)?(A.clear(),E.forEach(function(J){return A.add(J)})):xe(E)?(A.clear(),E.forEach(function(J){return A.add(J)})):E!=null&&S("Cannot initialize set from "+E)}finally{$i(B)}}),this},m.prototype.observe=function(E,A){return mi(this,E)},m.prototype.intercept=function(E){return Zi(this,E)},m.prototype.toJS=function(){return new Set(this)},m.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},m.prototype[bi=k,Symbol.iterator]=function(){return this.values()},m}(),Bn=ye("ObservableSet",Ls),js=function(){function m(E,A,B,J){A===void 0&&(A=new Map),this.target=E,this.values=A,this.name=B,this.defaultEnhancer=J,this.keysAtom=new te(B+".keys")}return m.prototype.read=function(E){return this.values.get(E).get()},m.prototype.write=function(E,A){var B=this.target,J=this.values.get(E);if(J instanceof di){J.set(A);return}if(Vn(this)){var pe=vo(this,{type:"update",object:this.proxy||B,name:E,newValue:A});if(!pe)return;A=pe.newValue}if(A=J.prepareNewValue(A),A!==Wt.UNCHANGED){var Xe=io(this),Et=Zr(),pe=Xe||Et?{type:"update",object:this.proxy||B,oldValue:J.value,name:E,newValue:A}:null;J.setNewValue(A),Xe&&jn(this,pe)}},m.prototype.has=function(E){var A=this.pendingKeys||(this.pendingKeys=new Map),B=A.get(E);if(B)return B.get();var J=!!this.values.get(E);return B=new Yo(J,Jt,this.name+"."+Q(E)+"?",!1),A.set(E,B),B.get()},m.prototype.addObservableProp=function(E,A,B){B===void 0&&(B=this.defaultEnhancer);var J=this.target;if(Vn(this)){var pe=vo(this,{object:this.proxy||J,name:E,type:"add",newValue:A});if(!pe)return;A=pe.newValue}var Xe=new Yo(A,B,this.name+"."+Q(E),!1);this.values.set(E,Xe),A=Xe.value,Object.defineProperty(J,E,vf(E)),this.notifyPropertyAddition(E,A)},m.prototype.addComputedProp=function(E,A,B){var J=this.target;B.name=B.name||this.name+"."+Q(A),this.values.set(A,new di(B)),(E===J||ge(E,A))&&Object.defineProperty(E,A,za(A))},m.prototype.remove=function(E){if(this.values.has(E)){var A=this.target;if(Vn(this)){var B=vo(this,{object:this.proxy||A,name:E,type:"remove"});if(!B)return}try{Kr();var J=io(this),pe=Zr(),Xe=this.values.get(E),Et=Xe&&Xe.get();if(Xe&&Xe.set(void 0),this.keysAtom.reportChanged(),this.values.delete(E),this.pendingKeys){var Yt=this.pendingKeys.get(E);Yt&&Yt.set(!1)}delete this.target[E];var B=J||pe?{type:"remove",object:this.proxy||A,oldValue:Et,name:E}:null;J&&jn(this,B)}finally{no()}}},m.prototype.illegalAccess=function(E,A){console.warn("Property '"+A+"' of '"+E+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},m.prototype.observe=function(E,A){return mi(this,E)},m.prototype.intercept=function(E){return Zi(this,E)},m.prototype.notifyPropertyAddition=function(E,A){var B=io(this),J=Zr(),pe=B||J?{type:"add",object:this.proxy||this.target,name:E,newValue:A}:null;if(B&&jn(this,pe),this.pendingKeys){var Xe=this.pendingKeys.get(E);Xe&&Xe.set(!0)}this.keysAtom.reportChanged()},m.prototype.getKeys=function(){var E,A;this.keysAtom.reportObserved();var B=[];try{for(var J=Ct(this.values),pe=J.next();!pe.done;pe=J.next()){var Xe=Ge(pe.value,2),Et=Xe[0],Yt=Xe[1];Yt instanceof Yo&&B.push(Et)}}catch(Tr){E={error:Tr}}finally{try{pe&&!pe.done&&(A=J.return)&&A.call(J)}finally{if(E)throw E.error}}return B},m}();function Bs(m,E,A){if(E===void 0&&(E=""),A===void 0&&(A=nr),Object.prototype.hasOwnProperty.call(m,k))return m[k];I(m)||(E=(m.constructor.name||"ObservableObject")+"@"+y()),E||(E="ObservableObject@"+y());var B=new js(m,new Map,Q(E),A);return W(m,k,B),B}var ku=Object.create(null),Uu=Object.create(null);function vf(m){return ku[m]||(ku[m]={configurable:!0,enumerable:!0,get:function(){return this[k].read(m)},set:function(E){this[k].write(m,E)}})}function Ua(m){var E=m[k];return E||(tt(m),m[k])}function za(m){return Uu[m]||(Uu[m]={configurable:Wt.computedConfigurable,enumerable:!1,get:function(){return Ua(this).read(m)},set:function(E){Ua(this).write(m,E)}})}var Fs=ye("ObservableObjectAdministration",js);function kn(m){return R(m)?(tt(m),Fs(m[k])):!1}function Nn(m,E){if(typeof m=="object"&&m!==null){if(ao(m))return E!==void 0&&S(!1),m[k].atom;if(Bn(m))return m[k];if(dn(m)){var A=m;if(E===void 0)return A._keysAtom;var B=A._data.get(E)||A._hasMap.get(E);return B||S(!1),B}if(tt(m),E&&!m[k]&&m[E],kn(m)){if(!E)return S(!1);var B=m[k].values.get(E);return B||S(!1),B}if(V(m)||hi(m)||Ca(m))return m}else if(typeof m=="function"&&Ca(m[k]))return m[k];return S(!1)}function Qo(m,E){if(m||S("Expecting some object"),E!==void 0)return Qo(Nn(m,E));if(V(m)||hi(m)||Ca(m)||dn(m)||Bn(m))return m;if(tt(m),m[k])return m[k];S(!1)}function Gs(m,E){var A;return E!==void 0?A=Nn(m,E):kn(m)||dn(m)||Bn(m)?A=Qo(m):A=Nn(m),A.name}var Ha=Object.prototype.toString;function Ei(m,E,A){return A===void 0&&(A=-1),Oi(m,E,A)}function Oi(m,E,A,B,J){if(m===E)return m!==0||1/m===1/E;if(m==null||E==null)return!1;if(m!==m)return E!==E;var pe=typeof m;if(pe!=="function"&&pe!=="object"&&typeof E!="object")return!1;var Xe=Ha.call(m);if(Xe!==Ha.call(E))return!1;switch(Xe){case"[object RegExp]":case"[object String]":return""+m==""+E;case"[object Number]":return+m!=+m?+E!=+E:+m==0?1/+m===1/E:+m==+E;case"[object Date]":case"[object Boolean]":return+m==+E;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(m)===Symbol.valueOf.call(E);case"[object Map]":case"[object Set]":A>=0&&A++;break}m=ks(m),E=ks(E);var Et=Xe==="[object Array]";if(!Et){if(typeof m!="object"||typeof E!="object")return!1;var Yt=m.constructor,Tr=E.constructor;if(Yt!==Tr&&!(typeof Yt=="function"&&Yt instanceof Yt&&typeof Tr=="function"&&Tr instanceof Tr)&&"constructor"in m&&"constructor"in E)return!1}if(A===0)return!1;A<0&&(A=-1),B=B||[],J=J||[];for(var wr=B.length;wr--;)if(B[wr]===m)return J[wr]===E;if(B.push(m),J.push(E),Et){if(wr=m.length,wr!==E.length)return!1;for(;wr--;)if(!Oi(m[wr],E[wr],A-1,B,J))return!1}else{var Ur=Object.keys(m),Hr=void 0;if(wr=Ur.length,Object.keys(E).length!==wr)return!1;for(;wr--;)if(Hr=Ur[wr],!(zu(E,Hr)&&Oi(m[Hr],E[Hr],A-1,B,J)))return!1}return B.pop(),J.pop(),!0}function ks(m){return ao(m)?m.slice():ce(m)||dn(m)||xe(m)||Bn(m)?Array.from(m.entries()):m}function zu(m,E){return Object.prototype.hasOwnProperty.call(m,E)}function qi(m){return m[Symbol.iterator]=Xa,m}function Xa(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");try{}catch{var Us=Ra();typeof l>"u"&&(Us.process={}),Us.process.env={}}(function(){function m(){}if(m.name!=="testCodeMinification"&&!1)var E})(),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Nu,extras:{getDebugName:Gs},$mobx:k})}).call(this,o(155),o(82))},function(i,u,o){o.d(u,"a",function(){return ge}),o.d(u,"b",function(){return he}),o.d(u,"c",function(){return bt}),o.d(u,"d",function(){return Ut}),o.d(u,"e",function(){return I}),o.d(u,"f",function(){return W}),o.d(u,"g",function(){return I}),o.d(u,"h",function(){return Ge}),o.d(u,"i",function(){return c}),o.d(u,"j",function(){return Ct}),o.d(u,"k",function(){return D});var l,c,h,p,g,y,S,x={},T=[],w=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function N(ee,se){for(var be in se)ee[be]=se[be];return ee}function R(ee){var se=ee.parentNode;se&&se.removeChild(ee)}function I(ee,se,be){var Ue,tt,He,Lt={};for(He in se)He=="key"?Ue=se[He]:He=="ref"?tt=se[He]:Lt[He]=se[He];if(arguments.length>2&&(Lt.children=arguments.length>3?l.call(arguments,2):be),typeof ee=="function"&&ee.defaultProps!=null)for(He in ee.defaultProps)Lt[He]===void 0&&(Lt[He]=ee.defaultProps[He]);return $(ee,Lt,Ue,tt,null)}function $(ee,se,be,Ue,tt){var He={type:ee,props:se,key:be,ref:Ue,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:tt??++h};return tt==null&&c.vnode!=null&&c.vnode(He),He}function W(){return{current:null}}function he(ee){return ee.children}function ge(ee,se){this.props=ee,this.context=se}function ye(ee,se){if(se==null)return ee.__?ye(ee.__,ee.__.__k.indexOf(ee)+1):null;for(var be;se<ee.__k.length;se++)if((be=ee.__k[se])!=null&&be.__e!=null)return be.__e;return typeof ee.type=="function"?ye(ee):null}function ce(ee){var se,be;if((ee=ee.__)!=null&&ee.__c!=null){for(ee.__e=ee.__c.base=null,se=0;se<ee.__k.length;se++)if((be=ee.__k[se])!=null&&be.__e!=null){ee.__e=ee.__c.base=be.__e;break}return ce(ee)}}function xe(ee){(!ee.__d&&(ee.__d=!0)&&p.push(ee)&&!L.__r++||y!==c.debounceRendering)&&((y=c.debounceRendering)||g)(L)}function L(){for(var ee;L.__r=p.length;)ee=p.sort(function(se,be){return se.__v.__b-be.__v.__b}),p=[],ee.some(function(se){var be,Ue,tt,He,Lt,nr;se.__d&&(Lt=(He=(be=se).__v).__e,(nr=be.__P)&&(Ue=[],(tt=N({},He)).__v=He.__v+1,Re(nr,He,tt,be.__n,nr.ownerSVGElement!==void 0,He.__h!=null?[Lt]:null,Ue,Lt??ye(He),He.__h),_e(Ue,He),He.__e!=Lt&&ce(He)))})}function Q(ee,se,be,Ue,tt,He,Lt,nr,tr,Jt){var rt,Er,ur,Xt,j,Qr,Rr,kr=Ue&&Ue.__k||T,Be=kr.length;for(be.__k=[],rt=0;rt<se.length;rt++)if((Xt=be.__k[rt]=(Xt=se[rt])==null||typeof Xt=="boolean"?null:typeof Xt=="string"||typeof Xt=="number"||typeof Xt=="bigint"?$(null,Xt,null,null,Xt):Array.isArray(Xt)?$(he,{children:Xt},null,null,null):Xt.__b>0?$(Xt.type,Xt.props,Xt.key,null,Xt.__v):Xt)!=null){if(Xt.__=be,Xt.__b=be.__b+1,(ur=kr[rt])===null||ur&&Xt.key==ur.key&&Xt.type===ur.type)kr[rt]=void 0;else for(Er=0;Er<Be;Er++){if((ur=kr[Er])&&Xt.key==ur.key&&Xt.type===ur.type){kr[Er]=void 0;break}ur=null}Re(ee,Xt,ur=ur||x,tt,He,Lt,nr,tr,Jt),j=Xt.__e,(Er=Xt.ref)&&ur.ref!=Er&&(Rr||(Rr=[]),ur.ref&&Rr.push(ur.ref,null,Xt),Rr.push(Er,Xt.__c||j,Xt)),j!=null?(Qr==null&&(Qr=j),typeof Xt.type=="function"&&Xt.__k===ur.__k?Xt.__d=tr=U(Xt,tr,ee):tr=k(ee,Xt,ur,kr,j,tr),typeof be.type=="function"&&(be.__d=tr)):tr&&ur.__e==tr&&tr.parentNode!=ee&&(tr=ye(ur))}for(be.__e=Qr,rt=Be;rt--;)kr[rt]!=null&&(typeof be.type=="function"&&kr[rt].__e!=null&&kr[rt].__e==be.__d&&(be.__d=ye(Ue,rt+1)),Nt(kr[rt],kr[rt]));if(Rr)for(rt=0;rt<Rr.length;rt++)gt(Rr[rt],Rr[++rt],Rr[++rt])}function U(ee,se,be){for(var Ue,tt=ee.__k,He=0;tt&&He<tt.length;He++)(Ue=tt[He])&&(Ue.__=ee,se=typeof Ue.type=="function"?U(Ue,se,be):k(be,Ue,Ue,tt,Ue.__e,se));return se}function D(ee,se){return se=se||[],ee==null||typeof ee=="boolean"||(Array.isArray(ee)?ee.some(function(be){D(be,se)}):se.push(ee)),se}function k(ee,se,be,Ue,tt,He){var Lt,nr,tr;if(se.__d!==void 0)Lt=se.__d,se.__d=void 0;else if(be==null||tt!=He||tt.parentNode==null)e:if(He==null||He.parentNode!==ee)ee.appendChild(tt),Lt=null;else{for(nr=He,tr=0;(nr=nr.nextSibling)&&tr<Ue.length;tr+=2)if(nr==tt)break e;ee.insertBefore(tt,He),Lt=He}return Lt!==void 0?Lt:tt.nextSibling}function te(ee,se,be,Ue,tt){var He;for(He in be)He==="children"||He==="key"||He in se||Z(ee,He,null,be[He],Ue);for(He in se)tt&&typeof se[He]!="function"||He==="children"||He==="key"||He==="value"||He==="checked"||be[He]===se[He]||Z(ee,He,se[He],be[He],Ue)}function V(ee,se,be){se[0]==="-"?ee.setProperty(se,be):ee[se]=be==null?"":typeof be!="number"||w.test(se)?be:be+"px"}function Z(ee,se,be,Ue,tt){var He;e:if(se==="style")if(typeof be=="string")ee.style.cssText=be;else{if(typeof Ue=="string"&&(ee.style.cssText=Ue=""),Ue)for(se in Ue)be&&se in be||V(ee.style,se,"");if(be)for(se in be)Ue&&be[se]===Ue[se]||V(ee.style,se,be[se])}else if(se[0]==="o"&&se[1]==="n")He=se!==(se=se.replace(/Capture$/,"")),se=se.toLowerCase()in ee?se.toLowerCase().slice(2):se.slice(2),ee.l||(ee.l={}),ee.l[se+He]=be,be?Ue||ee.addEventListener(se,He?Ae:le,He):ee.removeEventListener(se,He?Ae:le,He);else if(se!=="dangerouslySetInnerHTML"){if(tt)se=se.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(se!=="href"&&se!=="list"&&se!=="form"&&se!=="tabIndex"&&se!=="download"&&se in ee)try{ee[se]=be??"";break e}catch{}typeof be=="function"||(be!=null&&(be!==!1||se[0]==="a"&&se[1]==="r")?ee.setAttribute(se,be):ee.removeAttribute(se))}}function le(ee){this.l[ee.type+!1](c.event?c.event(ee):ee)}function Ae(ee){this.l[ee.type+!0](c.event?c.event(ee):ee)}function Re(ee,se,be,Ue,tt,He,Lt,nr,tr){var Jt,rt,Er,ur,Xt,j,Qr,Rr,kr,Be,Xr,zr=se.type;if(se.constructor!==void 0)return null;be.__h!=null&&(tr=be.__h,nr=se.__e=be.__e,se.__h=null,He=[nr]),(Jt=c.__b)&&Jt(se);try{e:if(typeof zr=="function"){if(Rr=se.props,kr=(Jt=zr.contextType)&&Ue[Jt.__c],Be=Jt?kr?kr.props.value:Jt.__:Ue,be.__c?Qr=(rt=se.__c=be.__c).__=rt.__E:("prototype"in zr&&zr.prototype.render?se.__c=rt=new zr(Rr,Be):(se.__c=rt=new ge(Rr,Be),rt.constructor=zr,rt.render=Vt),kr&&kr.sub(rt),rt.props=Rr,rt.state||(rt.state={}),rt.context=Be,rt.__n=Ue,Er=rt.__d=!0,rt.__h=[]),rt.__s==null&&(rt.__s=rt.state),zr.getDerivedStateFromProps!=null&&(rt.__s==rt.state&&(rt.__s=N({},rt.__s)),N(rt.__s,zr.getDerivedStateFromProps(Rr,rt.__s))),ur=rt.props,Xt=rt.state,Er)zr.getDerivedStateFromProps==null&&rt.componentWillMount!=null&&rt.componentWillMount(),rt.componentDidMount!=null&&rt.__h.push(rt.componentDidMount);else{if(zr.getDerivedStateFromProps==null&&Rr!==ur&&rt.componentWillReceiveProps!=null&&rt.componentWillReceiveProps(Rr,Be),!rt.__e&&rt.shouldComponentUpdate!=null&&rt.shouldComponentUpdate(Rr,rt.__s,Be)===!1||se.__v===be.__v){rt.props=Rr,rt.state=rt.__s,se.__v!==be.__v&&(rt.__d=!1),rt.__v=se,se.__e=be.__e,se.__k=be.__k,se.__k.forEach(function(Dr){Dr&&(Dr.__=se)}),rt.__h.length&&Lt.push(rt);break e}rt.componentWillUpdate!=null&&rt.componentWillUpdate(Rr,rt.__s,Be),rt.componentDidUpdate!=null&&rt.__h.push(function(){rt.componentDidUpdate(ur,Xt,j)})}rt.context=Be,rt.props=Rr,rt.state=rt.__s,(Jt=c.__r)&&Jt(se),rt.__d=!1,rt.__v=se,rt.__P=ee,Jt=rt.render(rt.props,rt.state,rt.context),rt.state=rt.__s,rt.getChildContext!=null&&(Ue=N(N({},Ue),rt.getChildContext())),Er||rt.getSnapshotBeforeUpdate==null||(j=rt.getSnapshotBeforeUpdate(ur,Xt)),Xr=Jt!=null&&Jt.type===he&&Jt.key==null?Jt.props.children:Jt,Q(ee,Array.isArray(Xr)?Xr:[Xr],se,be,Ue,tt,He,Lt,nr,tr),rt.base=se.__e,se.__h=null,rt.__h.length&&Lt.push(rt),Qr&&(rt.__E=rt.__=null),rt.__e=!1}else He==null&&se.__v===be.__v?(se.__k=be.__k,se.__e=be.__e):se.__e=Ke(be.__e,se,be,Ue,tt,He,Lt,tr);(Jt=c.diffed)&&Jt(se)}catch(Dr){se.__v=null,(tr||He!=null)&&(se.__e=nr,se.__h=!!tr,He[He.indexOf(nr)]=null),c.__e(Dr,se,be)}}function _e(ee,se){c.__c&&c.__c(se,ee),ee.some(function(be){try{ee=be.__h,be.__h=[],ee.some(function(Ue){Ue.call(be)})}catch(Ue){c.__e(Ue,be.__v)}})}function Ke(ee,se,be,Ue,tt,He,Lt,nr){var tr,Jt,rt,Er=be.props,ur=se.props,Xt=se.type,j=0;if(Xt==="svg"&&(tt=!0),He!=null){for(;j<He.length;j++)if((tr=He[j])&&"setAttribute"in tr==!!Xt&&(Xt?tr.localName===Xt:tr.nodeType===3)){ee=tr,He[j]=null;break}}if(ee==null){if(Xt===null)return document.createTextNode(ur);ee=tt?document.createElementNS("http://www.w3.org/2000/svg",Xt):document.createElement(Xt,ur.is&&ur),He=null,nr=!1}if(Xt===null)Er===ur||nr&&ee.data===ur||(ee.data=ur);else{if(He=He&&l.call(ee.childNodes),Jt=(Er=be.props||x).dangerouslySetInnerHTML,rt=ur.dangerouslySetInnerHTML,!nr){if(He!=null)for(Er={},j=0;j<ee.attributes.length;j++)Er[ee.attributes[j].name]=ee.attributes[j].value;(rt||Jt)&&(rt&&(Jt&&rt.__html==Jt.__html||rt.__html===ee.innerHTML)||(ee.innerHTML=rt&&rt.__html||""))}if(te(ee,ur,Er,tt,nr),rt)se.__k=[];else if(j=se.props.children,Q(ee,Array.isArray(j)?j:[j],se,be,Ue,tt&&Xt!=="foreignObject",He,Lt,He?He[0]:be.__k&&ye(be,0),nr),He!=null)for(j=He.length;j--;)He[j]!=null&&R(He[j]);nr||("value"in ur&&(j=ur.value)!==void 0&&(j!==Er.value||j!==ee.value||Xt==="progress"&&!j)&&Z(ee,"value",j,Er.value,!1),"checked"in ur&&(j=ur.checked)!==void 0&&j!==ee.checked&&Z(ee,"checked",j,Er.checked,!1))}return ee}function gt(ee,se,be){try{typeof ee=="function"?ee(se):ee.current=se}catch(Ue){c.__e(Ue,be)}}function Nt(ee,se,be){var Ue,tt;if(c.unmount&&c.unmount(ee),(Ue=ee.ref)&&(Ue.current&&Ue.current!==ee.__e||gt(Ue,null,se)),(Ue=ee.__c)!=null){if(Ue.componentWillUnmount)try{Ue.componentWillUnmount()}catch(He){c.__e(He,se)}Ue.base=Ue.__P=null}if(Ue=ee.__k)for(tt=0;tt<Ue.length;tt++)Ue[tt]&&Nt(Ue[tt],se,typeof ee.type!="function");be||ee.__e==null||R(ee.__e),ee.__e=ee.__d=void 0}function Vt(ee,se,be){return this.constructor(ee,be)}function Ct(ee,se,be){var Ue,tt,He;c.__&&c.__(ee,se),tt=(Ue=typeof be=="function")?null:be&&be.__k||se.__k,He=[],Re(se,ee=(!Ue&&be||se).__k=I(he,null,[ee]),tt||x,x,se.ownerSVGElement!==void 0,!Ue&&be?[be]:tt?null:se.firstChild?l.call(se.childNodes):null,He,!Ue&&be?be:tt?tt.__e:se.firstChild,Ue),_e(He,ee)}function Ge(ee,se){Ct(ee,se,Ge)}function bt(ee,se,be){var Ue,tt,He,Lt=N({},ee.props);for(He in se)He=="key"?Ue=se[He]:He=="ref"?tt=se[He]:Lt[He]=se[He];return arguments.length>2&&(Lt.children=arguments.length>3?l.call(arguments,2):be),$(ee.type,Lt,Ue||ee.key,tt||ee.ref,null)}function Ut(ee,se){var be={__c:se="__cC"+S++,__:ee,Consumer:function(Ue,tt){return Ue.children(tt)},Provider:function(Ue){var tt,He;return this.getChildContext||(tt=[],(He={})[se]=this,this.getChildContext=function(){return He},this.shouldComponentUpdate=function(Lt){this.props.value!==Lt.value&&tt.some(xe)},this.sub=function(Lt){tt.push(Lt);var nr=Lt.componentWillUnmount;Lt.componentWillUnmount=function(){tt.splice(tt.indexOf(Lt),1),nr&&nr.call(Lt)}}),Ue.children}};return be.Provider.__=be.Consumer.contextType=be}l=T.slice,c={__e:function(ee,se){for(var be,Ue,tt;se=se.__;)if((be=se.__c)&&!be.__)try{if((Ue=be.constructor)&&Ue.getDerivedStateFromError!=null&&(be.setState(Ue.getDerivedStateFromError(ee)),tt=be.__d),be.componentDidCatch!=null&&(be.componentDidCatch(ee),tt=be.__d),tt)return be.__E=be}catch(He){ee=He}throw ee}},h=0,ge.prototype.setState=function(ee,se){var be;be=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=N({},this.state),typeof ee=="function"&&(ee=ee(N({},be),this.props)),ee&&N(be,ee),ee!=null&&this.__v&&(se&&this.__h.push(se),xe(this))},ge.prototype.forceUpdate=function(ee){this.__v&&(this.__e=!0,ee&&this.__h.push(ee),xe(this))},ge.prototype.render=he,p=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,L.__r=0,S=0},function(i,u,o){var l=o(116),c=o(44),h=o(178);l||c(Object.prototype,"toString",h,{unsafe:!0})},function(i,u,o){var l=o(39),c=o(83),h=o(71),p=o(56),g=o(111),y="Array Iterator",S=p.set,x=p.getterFor(y);i.exports=g(Array,"Array",function(T,w){S(this,{type:y,target:l(T),index:0,kind:w})},function(){var T=x(this),w=T.target,N=T.kind,R=T.index++;return!w||R>=w.length?(T.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:R,done:!1}:N=="values"?{value:w[R],done:!1}:{value:[R,w[R]],done:!1}},"values"),h.Arguments=h.Array,c("keys"),c("values"),c("entries")},function(i,u,o){var l=o(7),c=o(147),h=o(148),p=o(3),g=o(57),y=o(27),S=y("iterator"),x=y("toStringTag"),T=p.values,w=function(R,I){if(R){if(R[S]!==T)try{g(R,S,T)}catch{R[S]=T}if(R[x]||g(R,x,I),c[I]){for(var $ in p)if(R[$]!==p[$])try{g(R,$,p[$])}catch{R[$]=p[$]}}}};for(var N in c)w(l[N]&&l[N].prototype,N);w(h,"DOMTokenList")},function(i,u,o){var l=o(16),c=o(7),h=o(46),p=o(77),g=o(35),y=o(15),S=o(65),x=o(36),T=o(109),w=o(18),N=o(34),R=o(99),I=o(28),$=o(33),W=o(58),he=o(88),ge=o(32),ye=o(38),ce=o(39),xe=o(87),L=o(40),Q=o(72),U=o(54),D=o(67),k=o(73),te=o(139),V=o(112),Z=o(51),le=o(37),Ae=o(93),Re=o(101),_e=o(44),Ke=o(84),gt=o(91),Nt=o(70),Vt=o(85),Ct=o(27),Ge=o(149),bt=o(150),Ut=o(74),ee=o(56),se=o(75).forEach,be=gt("hidden"),Ue="Symbol",tt="prototype",He=Ct("toPrimitive"),Lt=ee.set,nr=ee.getterFor(Ue),tr=Object[tt],Jt=c.Symbol,rt=Jt&&Jt[tt],Er=c.TypeError,ur=c.QObject,Xt=h("JSON","stringify"),j=Z.f,Qr=le.f,Rr=te.f,kr=Ae.f,Be=y([].push),Xr=Ke("symbols"),zr=Ke("op-symbols"),Dr=Ke("string-to-symbol-registry"),On=Ke("symbol-to-string-registry"),eo=Ke("wks"),Dn=!ur||!ur[tt]||!ur[tt].findChild,to=x&&w(function(){return U(Qr({},"a",{get:function(){return Qr(this,"a",{value:7}).a}})).a!=7})?function(we,Ne,ht){var _t=j(tr,Ne);_t&&delete tr[Ne],Qr(we,Ne,ht),_t&&we!==tr&&Qr(tr,Ne,_t)}:Qr,Qt=function(we,Ne){var ht=Xr[we]=U(rt);return Lt(ht,{type:Ue,tag:we,description:Ne}),x||(ht.description=Ne),ht},$r=function(Ne,ht,_t){Ne===tr&&$r(zr,ht,_t),ge(Ne);var Kt=xe(ht);return ge(_t),N(Xr,Kt)?(_t.enumerable?(N(Ne,be)&&Ne[be][Kt]&&(Ne[be][Kt]=!1),_t=U(_t,{enumerable:Q(0,!1)})):(N(Ne,be)||Qr(Ne,be,Q(1,{})),Ne[be][Kt]=!0),to(Ne,Kt,_t)):Qr(Ne,Kt,_t)},In=function(Ne,ht){ge(Ne);var _t=ce(ht),Kt=D(_t).concat(_r(_t));return se(Kt,function(Br){(!x||g(or,_t,Br))&&$r(Ne,Br,_t[Br])}),Ne},Mt=function(Ne,ht){return ht===void 0?U(Ne):In(U(Ne),ht)},or=function(Ne){var ht=xe(Ne),_t=g(kr,this,ht);return this===tr&&N(Xr,ht)&&!N(zr,ht)?!1:_t||!N(this,ht)||!N(Xr,ht)||N(this,be)&&this[be][ht]?_t:!0},vr=function(Ne,ht){var _t=ce(Ne),Kt=xe(ht);if(!(_t===tr&&N(Xr,Kt)&&!N(zr,Kt))){var Br=j(_t,Kt);return Br&&N(Xr,Kt)&&!(N(_t,be)&&_t[be][Kt])&&(Br.enumerable=!0),Br}},fr=function(Ne){var ht=Rr(ce(Ne)),_t=[];return se(ht,function(Kt){!N(Xr,Kt)&&!N(Nt,Kt)&&Be(_t,Kt)}),_t},_r=function(Ne){var ht=Ne===tr,_t=Rr(ht?zr:ce(Ne)),Kt=[];return se(_t,function(Br){N(Xr,Br)&&(!ht||N(tr,Br))&&Be(Kt,Xr[Br])}),Kt};if(T||(Jt=function(){if(W(rt,this))throw Er("Symbol is not a constructor");var Ne=!arguments.length||arguments[0]===void 0?void 0:L(arguments[0]),ht=Vt(Ne),_t=function(Kt){this===tr&&g(_t,zr,Kt),N(this,be)&&N(this[be],ht)&&(this[be][ht]=!1),to(this,ht,Q(1,Kt))};return x&&Dn&&to(tr,ht,{configurable:!0,set:_t}),Qt(ht,Ne)},rt=Jt[tt],_e(rt,"toString",function(){return nr(this).tag}),_e(Jt,"withoutSetter",function(we){return Qt(Vt(we),we)}),Ae.f=or,le.f=$r,Z.f=vr,k.f=te.f=fr,V.f=_r,Ge.f=function(we){return Qt(Ct(we),we)},x&&(Qr(rt,"description",{configurable:!0,get:function(){return nr(this).description}}),S||_e(tr,"propertyIsEnumerable",or,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!T,sham:!T},{Symbol:Jt}),se(D(eo),function(we){bt(we)}),l({target:Ue,stat:!0,forced:!T},{for:function(we){var Ne=L(we);if(N(Dr,Ne))return Dr[Ne];var ht=Jt(Ne);return Dr[Ne]=ht,On[ht]=Ne,ht},keyFor:function(Ne){if(!he(Ne))throw Er(Ne+" is not a symbol");if(N(On,Ne))return On[Ne]},useSetter:function(){Dn=!0},useSimple:function(){Dn=!1}}),l({target:"Object",stat:!0,forced:!T,sham:!x},{create:Mt,defineProperty:$r,defineProperties:In,getOwnPropertyDescriptor:vr}),l({target:"Object",stat:!0,forced:!T},{getOwnPropertyNames:fr,getOwnPropertySymbols:_r}),l({target:"Object",stat:!0,forced:w(function(){V.f(1)})},{getOwnPropertySymbols:function(Ne){return V.f(ye(Ne))}}),Xt){var re=!T||w(function(){var we=Jt();return Xt([we])!="[null]"||Xt({a:we})!="{}"||Xt(Object(we))!="{}"});l({target:"JSON",stat:!0,forced:re},{stringify:function(Ne,ht,_t){var Kt=Re(arguments),Br=ht;if(!(!$(ht)&&Ne===void 0||he(Ne)))return R(ht)||(ht=function(Cn,Ln){if(I(Br)&&(Ln=g(Br,this,Cn,Ln)),!he(Ln))return Ln}),Kt[1]=ht,p(Xt,null,Kt)}})}if(!rt[He]){var Oe=rt.valueOf;_e(rt,He,function(we){return g(Oe,this)})}Ut(Jt,Ue),Nt[be]=!0},function(i,u,o){var l=o(146).charAt,c=o(40),h=o(56),p=o(111),g="String Iterator",y=h.set,S=h.getterFor(g);p(String,"String",function(x){y(this,{type:g,string:c(x),index:0})},function(){var T=S(this),w=T.string,N=T.index,R;return N>=w.length?{value:void 0,done:!0}:(R=l(w,N),T.index+=R.length,{value:R,done:!1})})},function(i,u,o){(function(l){var c=function(h){return h&&h.Math==Math&&h};i.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof l=="object"&&l)||function(){return this}()||Function("return this")()}).call(this,o(82))},function(i,u,o){var l=o(16),c=o(36),h=o(7),p=o(15),g=o(34),y=o(28),S=o(58),x=o(40),T=o(37).f,w=o(134),N=h.Symbol,R=N&&N.prototype;if(c&&y(N)&&(!("description"in R)||N().description!==void 0)){var I={},$=function(){var Q=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),U=S(R,this)?new N(Q):Q===void 0?N():N(Q);return Q===""&&(I[U]=!0),U};w($,N),$.prototype=R,R.constructor=$;var W=String(N("test"))=="Symbol(test)",he=p(R.toString),ge=p(R.valueOf),ye=/^Symbol\((.*)\)[^)]+$/,ce=p("".replace),xe=p("".slice);T(R,"description",{configurable:!0,get:function(){var Q=ge(this),U=he(Q);if(g(I,Q))return"";var D=W?xe(U,7,-1):ce(U,ye,"$1");return D===""?void 0:D}}),l({global:!0,forced:!0},{Symbol:$})}},function(i,u,o){var l=o(150);l("iterator")},function(i,u,o){o.d(u,"a",function(){return l.a}),o.d(u,"c",function(){return l.e}),o.d(u,"h",function(){return xe}),o.d(u,"i",function(){return W}),o.d(u,"j",function(){return I}),o.d(u,"b",function(){return _e}),o.d(u,"e",function(){return Vt}),o.d(u,"f",function(){return Ke}),o.d(u,"g",function(){return or});var l=o(1),c,h,p,g=0,y=[],S=l.i.__b,x=l.i.__r,T=l.i.diffed,w=l.i.__c,N=l.i.unmount;function R(re,Oe){l.i.__h&&l.i.__h(h,re,g||Oe),g=0;var we=h.__H||(h.__H={__:[],__h:[]});return re>=we.__.length&&we.__.push({}),we.__[re]}function I(re){return g=1,$(le,re)}function $(re,Oe,we){var Ne=R(c++,2);return Ne.t=re,Ne.__c||(Ne.__=[we?we(Oe):le(void 0,Oe),function(ht){var _t=Ne.t(Ne.__[0],ht);Ne.__[0]!==_t&&(Ne.__=[_t,Ne.__[1]],Ne.__c.setState({}))}],Ne.__c=h),Ne.__}function W(re,Oe){var we=R(c++,3);!l.i.__s&&Z(we.__H,Oe)&&(we.__=re,we.__H=Oe,h.__H.__h.push(we))}function he(re,Oe){var we=R(c++,4);!l.i.__s&&Z(we.__H,Oe)&&(we.__=re,we.__H=Oe,h.__h.push(we))}function ge(re){return g=5,ce(function(){return{current:re}},[])}function ye(re,Oe,we){g=6,he(function(){typeof re=="function"?re(Oe()):re&&(re.current=Oe())},we==null?we:we.concat(re))}function ce(re,Oe){var we=R(c++,7);return Z(we.__H,Oe)&&(we.__=re(),we.__H=Oe,we.__h=re),we.__}function xe(re,Oe){return g=8,ce(function(){return re},Oe)}function L(re){var Oe=h.context[re.__c],we=R(c++,9);return we.c=re,Oe?(we.__==null&&(we.__=!0,Oe.sub(h)),Oe.props.value):re.__}function Q(re,Oe){l.i.useDebugValue&&l.i.useDebugValue(Oe?Oe(re):re)}function U(){var re;for(y.sort(function(Oe,we){return Oe.__v.__b-we.__v.__b});re=y.pop();)if(re.__P)try{re.__H.__h.forEach(te),re.__H.__h.forEach(V),re.__H.__h=[]}catch(Oe){re.__H.__h=[],l.i.__e(Oe,re.__v)}}l.i.__b=function(re){h=null,S&&S(re)},l.i.__r=function(re){x&&x(re),c=0;var Oe=(h=re.__c).__H;Oe&&(Oe.__h.forEach(te),Oe.__h.forEach(V),Oe.__h=[])},l.i.diffed=function(re){T&&T(re);var Oe=re.__c;Oe&&Oe.__H&&Oe.__H.__h.length&&(y.push(Oe)!==1&&p===l.i.requestAnimationFrame||((p=l.i.requestAnimationFrame)||k)(U)),h=null},l.i.__c=function(re,Oe){Oe.some(function(we){try{we.__h.forEach(te),we.__h=we.__h.filter(function(Ne){return!Ne.__||V(Ne)})}catch(Ne){Oe.some(function(ht){ht.__h&&(ht.__h=[])}),Oe=[],l.i.__e(Ne,we.__v)}}),w&&w(re,Oe)},l.i.unmount=function(re){N&&N(re);var Oe,we=re.__c;we&&we.__H&&(we.__H.__.forEach(function(Ne){try{te(Ne)}catch(ht){Oe=ht}}),Oe&&l.i.__e(Oe,we.__v))};var D=typeof requestAnimationFrame=="function";function k(re){var Oe,we=function(){clearTimeout(Ne),D&&cancelAnimationFrame(Oe),setTimeout(re)},Ne=setTimeout(we,100);D&&(Oe=requestAnimationFrame(we))}function te(re){var Oe=h,we=re.__c;typeof we=="function"&&(re.__c=void 0,we()),h=Oe}function V(re){var Oe=h;re.__c=re.__(),h=Oe}function Z(re,Oe){return!re||re.length!==Oe.length||Oe.some(function(we,Ne){return we!==re[Ne]})}function le(re,Oe){return typeof Oe=="function"?Oe(re):Oe}function Ae(re,Oe){for(var we in Oe)re[we]=Oe[we];return re}function Re(re,Oe){for(var we in re)if(we!=="__source"&&!(we in Oe))return!0;for(var Ne in Oe)if(Ne!=="__source"&&re[Ne]!==Oe[Ne])return!0;return!1}function _e(re){this.props=re}function Ke(re,Oe){function we(ht){var _t=this.props.ref,Kt=_t==ht.ref;return!Kt&&_t&&(_t.call?_t(null):_t.current=null),Oe?!Oe(this.props,ht)||!Kt:Re(this.props,ht)}function Ne(ht){return this.shouldComponentUpdate=we,Object(l.e)(re,ht)}return Ne.displayName="Memo("+(re.displayName||re.name)+")",Ne.prototype.isReactComponent=!0,Ne.__f=!0,Ne}(_e.prototype=new l.a).isPureReactComponent=!0,_e.prototype.shouldComponentUpdate=function(re,Oe){return Re(this.props,re)||Re(this.state,Oe)};var gt=l.i.__b;l.i.__b=function(re){re.type&&re.type.__f&&re.ref&&(re.props.ref=re.ref,re.ref=null),gt&&gt(re)};var Nt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Vt(re){function Oe(we,Ne){var ht=Ae({},we);return delete ht.ref,re(ht,!(Ne=we.ref||Ne)||typeof Ne=="object"&&!("current"in Ne)?null:Ne)}return Oe.$$typeof=Nt,Oe.render=Oe,Oe.prototype.isReactComponent=Oe.__f=!0,Oe.displayName="ForwardRef("+(re.displayName||re.name)+")",Oe}var Ct=function(re,Oe){return re==null?null:Object(l.k)(Object(l.k)(re).map(Oe))},Ge={map:Ct,forEach:Ct,count:function(re){return re?Object(l.k)(re).length:0},only:function(re){var Oe=Object(l.k)(re);if(Oe.length!==1)throw"Children.only";return Oe[0]},toArray:l.k},bt=l.i.__e;l.i.__e=function(re,Oe,we){if(re.then){for(var Ne,ht=Oe;ht=ht.__;)if((Ne=ht.__c)&&Ne.__c)return Oe.__e==null&&(Oe.__e=we.__e,Oe.__k=we.__k),Ne.__c(re,Oe)}bt(re,Oe,we)};var Ut=l.i.unmount;function ee(re,Oe,we){return re&&(re.__c&&re.__c.__H&&(re.__c.__H.__.forEach(function(Ne){typeof Ne.__c=="function"&&Ne.__c()}),re.__c.__H=null),(re=Ae({},re)).__c!=null&&(re.__c.__P===we&&(re.__c.__P=Oe),re.__c=null),re.__k=re.__k&&re.__k.map(function(Ne){return ee(Ne,Oe,we)})),re}function se(re,Oe,we){return re&&(re.__v=null,re.__k=re.__k&&re.__k.map(function(Ne){return se(Ne,Oe,we)}),re.__c&&re.__c.__P===Oe&&(re.__e&&we.insertBefore(re.__e,re.__d),re.__c.__e=!0,re.__c.__P=we)),re}function be(){this.__u=0,this.t=null,this.__b=null}function Ue(re){var Oe=re.__.__c;return Oe&&Oe.__e&&Oe.__e(re)}function tt(re){var Oe,we,Ne;function ht(_t){if(Oe||(Oe=re()).then(function(Kt){we=Kt.default||Kt},function(Kt){Ne=Kt}),Ne)throw Ne;if(!we)throw Oe;return Object(l.e)(we,_t)}return ht.displayName="Lazy",ht.__f=!0,ht}function He(){this.u=null,this.o=null}l.i.unmount=function(re){var Oe=re.__c;Oe&&Oe.__R&&Oe.__R(),Oe&&re.__h===!0&&(re.type=null),Ut&&Ut(re)},(be.prototype=new l.a).__c=function(re,Oe){var we=Oe.__c,Ne=this;Ne.t==null&&(Ne.t=[]),Ne.t.push(we);var ht=Ue(Ne.__v),_t=!1,Kt=function(){_t||(_t=!0,we.__R=null,ht?ht(Br):Br())};we.__R=Kt;var Br=function(){if(!--Ne.__u){if(Ne.state.__e){var Ln=Ne.state.__e;Ne.__v.__k[0]=se(Ln,Ln.__c.__P,Ln.__c.__O)}var Xi;for(Ne.setState({__e:Ne.__b=null});Xi=Ne.t.pop();)Xi.forceUpdate()}},Cn=Oe.__h===!0;Ne.__u++||Cn||Ne.setState({__e:Ne.__b=Ne.__v.__k[0]}),re.then(Kt,Kt)},be.prototype.componentWillUnmount=function(){this.t=[]},be.prototype.render=function(re,Oe){if(this.__b){if(this.__v.__k){var we=document.createElement("div"),Ne=this.__v.__k[0].__c;this.__v.__k[0]=ee(this.__b,we,Ne.__O=Ne.__P)}this.__b=null}var ht=Oe.__e&&Object(l.e)(l.b,null,re.fallback);return ht&&(ht.__h=null),[Object(l.e)(l.b,null,Oe.__e?null:re.children),ht]};var Lt=function(re,Oe,we){if(++we[1]===we[0]&&re.o.delete(Oe),re.props.revealOrder&&(re.props.revealOrder[0]!=="t"||!re.o.size))for(we=re.u;we;){for(;we.length>3;)we.pop()();if(we[1]<we[0])break;re.u=we=we[2]}};function nr(re){return this.getChildContext=function(){return re.context},re.children}function tr(re){var Oe=this,we=re.i;Oe.componentWillUnmount=function(){Object(l.j)(null,Oe.l),Oe.l=null,Oe.i=null},Oe.i&&Oe.i!==we&&Oe.componentWillUnmount(),re.__v?(Oe.l||(Oe.i=we,Oe.l={nodeType:1,parentNode:we,childNodes:[],appendChild:function(Ne){this.childNodes.push(Ne),Oe.i.appendChild(Ne)},insertBefore:function(Ne,ht){this.childNodes.push(Ne),Oe.i.appendChild(Ne)},removeChild:function(Ne){this.childNodes.splice(this.childNodes.indexOf(Ne)>>>1,1),Oe.i.removeChild(Ne)}}),Object(l.j)(Object(l.e)(nr,{context:Oe.context},re.__v),Oe.l)):Oe.l&&Oe.componentWillUnmount()}function Jt(re,Oe){return Object(l.e)(tr,{__v:re,i:Oe})}(He.prototype=new l.a).__e=function(re){var Oe=this,we=Ue(Oe.__v),Ne=Oe.o.get(re);return Ne[0]++,function(ht){var _t=function(){Oe.props.revealOrder?(Ne.push(ht),Lt(Oe,re,Ne)):ht()};we?we(_t):_t()}},He.prototype.render=function(re){this.u=null,this.o=new Map;var Oe=Object(l.k)(re.children);re.revealOrder&&re.revealOrder[0]==="b"&&Oe.reverse();for(var we=Oe.length;we--;)this.o.set(Oe[we],this.u=[1,0,this.u]);return re.children},He.prototype.componentDidUpdate=He.prototype.componentDidMount=function(){var re=this;this.o.forEach(function(Oe,we){Lt(re,we,Oe)})};var rt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Er=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ur=typeof document<"u",Xt=function(re){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(re)};function j(re,Oe,we){return Oe.__k==null&&(Oe.textContent=""),Object(l.j)(re,Oe),typeof we=="function"&&we(),re?re.__c:null}function Qr(re,Oe,we){return Object(l.h)(re,Oe),typeof we=="function"&&we(),re?re.__c:null}l.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(re){Object.defineProperty(l.a.prototype,re,{configurable:!0,get:function(){return this["UNSAFE_"+re]},set:function(Oe){Object.defineProperty(this,re,{configurable:!0,writable:!0,value:Oe})}})});var Rr=l.i.event;function kr(){}function Be(){return this.cancelBubble}function Xr(){return this.defaultPrevented}l.i.event=function(re){return Rr&&(re=Rr(re)),re.persist=kr,re.isPropagationStopped=Be,re.isDefaultPrevented=Xr,re.nativeEvent=re};var zr,Dr={configurable:!0,get:function(){return this.class}},On=l.i.vnode;l.i.vnode=function(re){var Oe=re.type,we=re.props,Ne=we;if(typeof Oe=="string"){var ht=Oe.indexOf("-")===-1;for(var _t in Ne={},we){var Kt=we[_t];ur&&_t==="children"&&Oe==="noscript"||_t==="value"&&"defaultValue"in we&&Kt==null||(_t==="defaultValue"&&"value"in we&&we.value==null?_t="value":_t==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(_t)?_t="ondblclick":/^onchange(textarea|input)/i.test(_t+Oe)&&!Xt(we.type)?_t="oninput":/^onfocus$/i.test(_t)?_t="onfocusin":/^onblur$/i.test(_t)?_t="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(_t)?_t=_t.toLowerCase():ht&&Er.test(_t)?_t=_t.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),Ne[_t]=Kt)}Oe=="select"&&Ne.multiple&&Array.isArray(Ne.value)&&(Ne.value=Object(l.k)(we.children).forEach(function(Br){Br.props.selected=Ne.value.indexOf(Br.props.value)!=-1})),Oe=="select"&&Ne.defaultValue!=null&&(Ne.value=Object(l.k)(we.children).forEach(function(Br){Br.props.selected=Ne.multiple?Ne.defaultValue.indexOf(Br.props.value)!=-1:Ne.defaultValue==Br.props.value})),re.props=Ne,we.class!=we.className&&(Dr.enumerable="className"in we,we.className!=null&&(Ne.class=we.className),Object.defineProperty(Ne,"className",Dr))}re.$$typeof=rt,On&&On(re)};var eo=l.i.__r;l.i.__r=function(re){eo&&eo(re),zr=re.__c};var Dn={ReactCurrentDispatcher:{current:{readContext:function(re){return zr.__n[re.__c].props.value}}}};function to(re){return l.e.bind(null,re)}function Qt(re){return!!re&&re.$$typeof===rt}function $r(re){return Qt(re)?l.c.apply(null,arguments):re}function In(re){return!!re.__k&&(Object(l.j)(null,re),!0)}function Mt(re){return re&&(re.base||re.nodeType===1&&re)||null}var or=function(re,Oe){return re(Oe)},vr=function(re,Oe){return re(Oe)},fr=l.b,_r={useState:I,useReducer:$,useEffect:W,useLayoutEffect:he,useRef:ge,useImperativeHandle:ye,useMemo:ce,useCallback:xe,useContext:L,useDebugValue:Q,version:"17.0.2",Children:Ge,render:j,hydrate:Qr,unmountComponentAtNode:In,createPortal:Jt,createElement:l.e,createContext:l.d,createFactory:to,cloneElement:$r,createRef:l.f,Fragment:l.b,isValidElement:Qt,findDOMNode:Mt,Component:l.a,PureComponent:_e,memo:Ke,forwardRef:Vt,flushSync:vr,unstable_batchedUpdates:or,StrictMode:fr,Suspense:be,SuspenseList:He,lazy:tt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Dn};u.d=_r},function(i,u,o){var l=o(7),c=o(147),h=o(148),p=o(179),g=o(57),y=function(x){if(x&&x.forEach!==p)try{g(x,"forEach",p)}catch{x.forEach=p}};for(var S in c)c[S]&&y(l[S]&&l[S].prototype);y(h)},function(i,u,o){var l=o(16),c=o(97);l({target:"Object",stat:!0},{setPrototypeOf:c})},function(i,u,o){var l=o(16),c=o(18),h=o(38),p=o(96),g=o(137),y=c(function(){p(1)});l({target:"Object",stat:!0,forced:y,sham:!g},{getPrototypeOf:function(x){return p(h(x))}})},function(i,u,o){var l=o(16),c=o(46),h=o(77),p=o(199),g=o(157),y=o(32),S=o(33),x=o(54),T=o(18),w=c("Reflect","construct"),N=Object.prototype,R=[].push,I=T(function(){function he(){}return!(w(function(){},[],he)instanceof he)}),$=!T(function(){w(function(){})}),W=I||$;l({target:"Reflect",stat:!0,forced:W,sham:W},{construct:function(ge,ye){g(ge),y(ye);var ce=arguments.length<3?ge:g(arguments[2]);if($&&!I)return w(ge,ye,ce);if(ge==ce){switch(ye.length){case 0:return new ge;case 1:return new ge(ye[0]);case 2:return new ge(ye[0],ye[1]);case 3:return new ge(ye[0],ye[1],ye[2]);case 4:return new ge(ye[0],ye[1],ye[2],ye[3])}var xe=[null];return h(R,xe,ye),new(h(p,ge,xe))}var L=ce.prototype,Q=x(S(L)?L:N),U=h(ge,Q,ye);return S(U)?U:Q}})},function(i,u){var o=Function.prototype,l=o.bind,c=o.call,h=l&&l.bind(c);i.exports=l?function(p){return p&&h(c,p)}:function(p){return p&&function(){return c.apply(p,arguments)}}},function(i,u,o){var l=o(7),c=o(51).f,h=o(57),p=o(44),g=o(108),y=o(134),S=o(95);i.exports=function(x,T){var w=x.target,N=x.global,R=x.stat,I,$,W,he,ge,ye;if(N?$=l:R?$=l[w]||g(w,{}):$=(l[w]||{}).prototype,$)for(W in T){if(ge=T[W],x.noTargetGet?(ye=c($,W),he=ye&&ye.value):he=$[W],I=S(N?W:w+(R?".":"#")+W,x.forced),!I&&he!==void 0){if(typeof ge==typeof he)continue;y(ge,he)}(x.sham||he&&he.sham)&&h(ge,"sham",!0),p($,W,ge,x)}}},function(i,u,o){var l=o(16),c=o(7),h=o(99),p=o(100),g=o(33),y=o(68),S=o(43),x=o(39),T=o(61),w=o(27),N=o(76),R=o(101),I=N("slice"),$=w("species"),W=c.Array,he=Math.max;l({target:"Array",proto:!0,forced:!I},{slice:function(ye,ce){var xe=x(this),L=S(xe),Q=y(ye,L),U=y(ce===void 0?L:ce,L),D,k,te;if(h(xe)&&(D=xe.constructor,p(D)&&(D===W||h(D.prototype))?D=void 0:g(D)&&(D=D[$],D===null&&(D=void 0)),D===W||D===void 0))return R(xe,Q,U);for(k=new(D===void 0?W:D)(he(U-Q,0)),te=0;Q<U;Q++,te++)Q in xe&&T(k,te,xe[Q]);return k.length=te,k}})},function(i,u){i.exports=function(o){try{return!!o()}catch{return!0}}},function(i,u,o){var l=o(16),c=o(102);l({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(i,u,o){var l=o(16),c=o(38),h=o(67),p=o(18),g=p(function(){h(1)});l({target:"Object",stat:!0,forced:g},{keys:function(S){return h(c(S))}})},function(i,u,o){var l=o(16),c=o(18),h=o(39),p=o(51).f,g=o(36),y=c(function(){p(1)}),S=!g||y;l({target:"Object",stat:!0,forced:S,sham:!g},{getOwnPropertyDescriptor:function(T,w){return p(h(T),w)}})},function(i,u,o){var l=o(16),c=o(75).filter,h=o(76),p=h("filter");l({target:"Array",proto:!0,forced:!p},{filter:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){var l=o(36),c=o(94).EXISTS,h=o(15),p=o(37).f,g=Function.prototype,y=h(g.toString),S=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=h(S.exec),T="name";l&&!c&&p(g,T,{configurable:!0,get:function(){try{return x(S,y(this))[1]}catch{return""}}})},function(i,u,o){var l=o(16),c=o(36),h=o(135),p=o(39),g=o(51),y=o(61);l({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(x){for(var T=p(x),w=g.f,N=h(T),R={},I=0,$,W;N.length>I;)W=w(T,$=N[I++]),W!==void 0&&y(R,$,W);return R}})},function(i,u,o){var l=o(16),c=o(182),h=o(118),p=!h(function(g){Array.from(g)});l({target:"Array",stat:!0,forced:p},{from:c})},,function(i,u,o){var l=o(7),c=o(84),h=o(34),p=o(85),g=o(109),y=o(128),S=c("wks"),x=l.Symbol,T=x&&x.for,w=y?x:x&&x.withoutSetter||p;i.exports=function(N){if(!h(S,N)||!(g||typeof S[N]=="string")){var R="Symbol."+N;g&&h(x,N)?S[N]=x[N]:y&&T?S[N]=T(R):S[N]=w(R)}return S[N]}},function(i,u){i.exports=function(o){return typeof o=="function"}},function(i,u,o){var l=o(16),c=o(7),h=o(18),p=o(99),g=o(33),y=o(38),S=o(43),x=o(61),T=o(119),w=o(76),N=o(27),R=o(66),I=N("isConcatSpreadable"),$=9007199254740991,W="Maximum allowed index exceeded",he=c.TypeError,ge=R>=51||!h(function(){var L=[];return L[I]=!1,L.concat()[0]!==L}),ye=w("concat"),ce=function(L){if(!g(L))return!1;var Q=L[I];return Q!==void 0?!!Q:p(L)},xe=!ge||!ye;l({target:"Array",proto:!0,forced:xe},{concat:function(Q){var U=y(this),D=T(U,0),k=0,te,V,Z,le,Ae;for(te=-1,Z=arguments.length;te<Z;te++)if(Ae=te===-1?U:arguments[te],ce(Ae)){if(le=S(Ae),k+le>$)throw he(W);for(V=0;V<le;V++,k++)V in Ae&&x(D,k,Ae[V])}else{if(k>=$)throw he(W);x(D,k++,Ae)}return D.length=k,D}})},function(i,u,o){var l=o(16),c=o(198);l({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(i,u,o){var l=o(105),c=typeof self=="object"&&self&&self.Object===Object&&self,h=l.a||c||Function("return this")();u.a=h},function(i,u,o){var l=o(7),c=o(33),h=l.String,p=l.TypeError;i.exports=function(g){if(c(g))return g;throw p(h(g)+" is not an object")}},function(i,u,o){var l=o(28);i.exports=function(c){return typeof c=="object"?c!==null:l(c)}},function(i,u,o){var l=o(15),c=o(38),h=l({}.hasOwnProperty);i.exports=Object.hasOwn||function(g,y){return h(c(g),y)}},function(i,u){var o=Function.prototype.call;i.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},function(i,u,o){var l=o(18);i.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(i,u,o){var l=o(7),c=o(36),h=o(129),p=o(32),g=o(87),y=l.TypeError,S=Object.defineProperty;u.f=c?S:function(T,w,N){if(p(T),w=g(w),p(N),h)try{return S(T,w,N)}catch{}if("get"in N||"set"in N)throw y("Accessors not supported");return"value"in N&&(T[w]=N.value),T}},function(i,u,o){var l=o(7),c=o(45),h=l.Object;i.exports=function(p){return h(c(p))}},function(i,u,o){var l=o(81),c=o(45);i.exports=function(h){return l(c(h))}},function(i,u,o){var l=o(7),c=o(98),h=l.String;i.exports=function(p){if(c(p)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return h(p)}},function(i,u,o){var l=o(16),c=o(75).map,h=o(76),p=h("map");l({target:"Array",proto:!0,forced:!p},{map:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){(function(l){o.d(u,"d",function(){return p}),o.d(u,"c",function(){return g}),o.d(u,"b",function(){return y}),o.d(u,"a",function(){return x});var c=o(10),h=function(T,w){var N=typeof Symbol=="function"&&T[Symbol.iterator];if(!N)return T;var R=N.call(T),I,$=[],W;try{for(;(w===void 0||w-- >0)&&!(I=R.next()).done;)$.push(I.value)}catch(he){W={error:he}}finally{try{I&&!I.done&&(N=R.return)&&N.call(R)}finally{if(W)throw W.error}}return $};function p(){var T=h(Object(c.j)(0),2),w=T[1],N=Object(c.h)(function(){w(function(R){return R+1})},[]);return N}function g(T){if(!T||typeof T!="object")return!1;var w=Object.getPrototypeOf(T);return!w||w===Object.prototype}function y(T){return typeof Symbol=="function"?Symbol.for(T):"__$mobx-react "+T+"__"}var S={};function x(){return typeof window<"u"?window:typeof l<"u"?l:typeof self<"u"?self:S}}).call(this,o(82))},function(i,u,o){var l=o(90);i.exports=function(c){return l(c.length)}},function(i,u,o){var l=o(7),c=o(28),h=o(34),p=o(57),g=o(108),y=o(92),S=o(56),x=o(94).CONFIGURABLE,T=S.get,w=S.enforce,N=String(String).split("String");(i.exports=function(R,I,$,W){var he=W?!!W.unsafe:!1,ge=W?!!W.enumerable:!1,ye=W?!!W.noTargetGet:!1,ce=W&&W.name!==void 0?W.name:I,xe;if(c($)&&(String(ce).slice(0,7)==="Symbol("&&(ce="["+String(ce).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!h($,"name")||x&&$.name!==ce)&&p($,"name",ce),xe=w($),xe.source||(xe.source=N.join(typeof ce=="string"?ce:""))),R===l){ge?R[I]=$:g(I,$);return}else he?!ye&&R[I]&&(ge=!0):delete R[I];ge?R[I]=$:p(R,I,$)})(Function.prototype,"toString",function(){return c(this)&&T(this).source||y(this)})},function(i,u,o){var l=o(7),c=l.TypeError;i.exports=function(h){if(h==null)throw c("Can't call method on "+h);return h}},function(i,u,o){var l=o(7),c=o(28),h=function(p){return c(p)?p:void 0};i.exports=function(p,g){return arguments.length<2?h(l[p]):l[p]&&l[p][g]}},function(i,u,o){var l=o(16),c=o(35),h=o(33),p=o(32),g=o(200),y=o(51),S=o(96);function x(T,w){var N=arguments.length<3?T:arguments[2],R,I;if(p(T)===N)return T[w];if(R=y.f(T,w),R)return g(R)?R.value:R.get===void 0?void 0:c(R.get,N);if(h(I=S(T)))return x(I,w,N)}l({target:"Reflect",stat:!0},{get:x})},function(i,u,o){(function(l){var c=o(31),h=o(165),p=a&&!a.nodeType&&a,g=p&&typeof l=="object"&&l&&!l.nodeType&&l,y=g&&g.exports===p,S=y?c.a.Buffer:void 0,x=S?S.isBuffer:void 0,T=x||h.a;u.a=T}).call(this,o(121)(i))},function(i,u,o){(function(l){var c=o(105),h=a&&!a.nodeType&&a,p=h&&typeof l=="object"&&l&&!l.nodeType&&l,g=p&&p.exports===h,y=g&&c.a.process,S=function(){try{var x=p&&p.require&&p.require("util").types;return x||y&&y.binding&&y.binding("util")}catch{}}();u.a=S}).call(this,o(121)(i))},function(i,u,o){var l=o(15),c=l({}.toString),h=l("".slice);i.exports=function(p){return h(c(p),8,-1)}},function(i,u,o){var l=o(36),c=o(35),h=o(93),p=o(72),g=o(39),y=o(87),S=o(34),x=o(129),T=Object.getOwnPropertyDescriptor;u.f=l?T:function(N,R){if(N=g(N),R=y(R),x)try{return T(N,R)}catch{}if(S(N,R))return p(!c(h.f,N,R),N[R])}},function(i,u,o){var l=o(16),c=o(213).entries;l({target:"Object",stat:!0},{entries:function(p){return c(p)}})},function(i,u,o){var l=o(46);i.exports=l("navigator","userAgent")||""},function(i,u,o){var l=o(32),c=o(168),h=o(110),p=o(70),g=o(133),y=o(86),S=o(91),x=">",T="<",w="prototype",N="script",R=S("IE_PROTO"),I=function(){},$=function(ce){return T+N+x+ce+T+"/"+N+x},W=function(ce){ce.write($("")),ce.close();var xe=ce.parentWindow.Object;return ce=null,xe},he=function(){var ce=y("iframe"),xe="java"+N+":",L;return ce.style.display="none",g.appendChild(ce),ce.src=String(xe),L=ce.contentWindow.document,L.open(),L.write($("document.F=Object")),L.close(),L.F},ge,ye=function(){try{ge=new ActiveXObject("htmlfile")}catch{}ye=typeof document<"u"?document.domain&&ge?W(ge):he():W(ge);for(var ce=h.length;ce--;)delete ye[w][h[ce]];return ye()};p[R]=!0,i.exports=Object.create||function(xe,L){var Q;return xe!==null?(I[w]=l(xe),Q=new I,I[w]=null,Q[R]=xe):Q=ye(),L===void 0?Q:c(Q,L)}},function(i,u,o){var l=o(7),c=o(28),h=o(89),p=l.TypeError;i.exports=function(g){if(c(g))return g;throw p(h(g)+" is not a function")}},function(i,u,o){var l=o(170),c=o(7),h=o(15),p=o(33),g=o(57),y=o(34),S=o(107),x=o(91),T=o(70),w="Object already initialized",N=c.TypeError,R=c.WeakMap,I,$,W,he=function(U){return W(U)?$(U):I(U,{})},ge=function(U){return function(D){var k;if(!p(D)||(k=$(D)).type!==U)throw N("Incompatible receiver, "+U+" required");return k}};if(l||S.state){var ye=S.state||(S.state=new R),ce=h(ye.get),xe=h(ye.has),L=h(ye.set);I=function(U,D){if(xe(ye,U))throw new N(w);return D.facade=U,L(ye,U,D),D},$=function(U){return ce(ye,U)||{}},W=function(U){return xe(ye,U)}}else{var Q=x("state");T[Q]=!0,I=function(U,D){if(y(U,Q))throw new N(w);return D.facade=U,g(U,Q,D),D},$=function(U){return y(U,Q)?U[Q]:{}},W=function(U){return y(U,Q)}}i.exports={set:I,get:$,has:W,enforce:he,getterFor:ge}},function(i,u,o){var l=o(36),c=o(37),h=o(72);i.exports=l?function(p,g,y){return c.f(p,g,h(1,y))}:function(p,g,y){return p[g]=y,p}},function(i,u,o){var l=o(15);i.exports=l({}.isPrototypeOf)},function(i,u,o){var l=o(55);i.exports=function(c,h){var p=c[h];return p==null?void 0:l(p)}},function(i,u,o){var l=o(173),c=o(177);l("Map",function(h){return function(){return h(this,arguments.length?arguments[0]:void 0)}},c)},function(i,u,o){var l=o(87),c=o(37),h=o(72);i.exports=function(p,g,y){var S=l(g);S in p?c.f(p,S,h(0,y)):p[S]=y}},function(i,u,o){var l=o(15),c=o(55),h=l(l.bind);i.exports=function(p,g){return c(p),g===void 0?p:h?h(p,g):function(){return p.apply(g,arguments)}}},function(i,u,o){var l=o(16),c=o(15),h=o(81),p=o(39),g=o(120),y=c([].join),S=h!=Object,x=g("join",",");l({target:"Array",proto:!0,forced:S||!x},{join:function(w){return y(p(this),w===void 0?",":w)}})},function(i,u,o){var l=o(16),c=o(214),h=o(83);l({target:"Array",proto:!0},{fill:c}),h("fill")},function(i,u){i.exports=!1},function(i,u,o){var l=o(7),c=o(53),h=l.process,p=l.Deno,g=h&&h.versions||p&&p.version,y=g&&g.v8,S,x;y&&(S=y.split("."),x=S[0]>0&&S[0]<4?1:+(S[0]+S[1])),!x&&c&&(S=c.match(/Edge\/(\d+)/),(!S||S[1]>=74)&&(S=c.match(/Chrome\/(\d+)/),S&&(x=+S[1]))),i.exports=x},function(i,u,o){var l=o(131),c=o(110);i.exports=Object.keys||function(p){return l(p,c)}},function(i,u,o){var l=o(69),c=Math.max,h=Math.min;i.exports=function(p,g){var y=l(p);return y<0?c(y+g,0):h(y,g)}},function(i,u){var o=Math.ceil,l=Math.floor;i.exports=function(c){var h=+c;return h!==h||h===0?0:(h>0?l:o)(h)}},function(i,u){i.exports={}},function(i,u){i.exports={}},function(i,u){i.exports=function(o,l){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:l}}},function(i,u,o){var l=o(131),c=o(110),h=c.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(g){return l(g,h)}},function(i,u,o){var l=o(37).f,c=o(34),h=o(27),p=h("toStringTag");i.exports=function(g,y,S){g&&!c(g=S?g:g.prototype,p)&&l(g,p,{configurable:!0,value:y})}},function(i,u,o){var l=o(62),c=o(15),h=o(81),p=o(38),g=o(43),y=o(119),S=c([].push),x=function(T){var w=T==1,N=T==2,R=T==3,I=T==4,$=T==6,W=T==7,he=T==5||$;return function(ge,ye,ce,xe){for(var L=p(ge),Q=h(L),U=l(ye,ce),D=g(Q),k=0,te=xe||y,V=w?te(ge,D):N||W?te(ge,0):void 0,Z,le;D>k;k++)if((he||k in Q)&&(Z=Q[k],le=U(Z,k,L),T))if(w)V[k]=le;else if(le)switch(T){case 3:return!0;case 5:return Z;case 6:return k;case 2:S(V,Z)}else switch(T){case 4:return!1;case 7:S(V,Z)}return $?-1:R||I?I:V}};i.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(i,u,o){var l=o(18),c=o(27),h=o(66),p=c("species");i.exports=function(g){return h>=51||!l(function(){var y=[],S=y.constructor={};return S[p]=function(){return{foo:1}},y[g](Boolean).foo!==1})}},function(i,u){var o=Function.prototype,l=o.apply,c=o.bind,h=o.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(c?h.bind(l):function(){return h.apply(l,arguments)})},function(i,u,o){var l=o(77),c=o(35),h=o(15),p=o(122),g=o(154),y=o(32),S=o(45),x=o(156),T=o(123),w=o(90),N=o(40),R=o(59),I=o(113),$=o(124),W=o(102),he=o(151),ge=o(18),ye=he.UNSUPPORTED_Y,ce=4294967295,xe=Math.min,L=[].push,Q=h(/./.exec),U=h(L),D=h("".slice),k=!ge(function(){var te=/(?:)/,V=te.exec;te.exec=function(){return V.apply(this,arguments)};var Z="ab".split(te);return Z.length!==2||Z[0]!=="a"||Z[1]!=="b"});p("split",function(te,V,Z){var le;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?le=function(Ae,Re){var _e=N(S(this)),Ke=Re===void 0?ce:Re>>>0;if(Ke===0)return[];if(Ae===void 0)return[_e];if(!g(Ae))return c(V,_e,Ae,Ke);for(var gt=[],Nt=(Ae.ignoreCase?"i":"")+(Ae.multiline?"m":"")+(Ae.unicode?"u":"")+(Ae.sticky?"y":""),Vt=0,Ct=new RegExp(Ae.source,Nt+"g"),Ge,bt,Ut;(Ge=c(W,Ct,_e))&&(bt=Ct.lastIndex,!(bt>Vt&&(U(gt,D(_e,Vt,Ge.index)),Ge.length>1&&Ge.index<_e.length&&l(L,gt,I(Ge,1)),Ut=Ge[0].length,Vt=bt,gt.length>=Ke)));)Ct.lastIndex===Ge.index&&Ct.lastIndex++;return Vt===_e.length?(Ut||!Q(Ct,""))&&U(gt,""):U(gt,D(_e,Vt)),gt.length>Ke?I(gt,0,Ke):gt}:"0".split(void 0,0).length?le=function(Ae,Re){return Ae===void 0&&Re===0?[]:c(V,this,Ae,Re)}:le=V,[function(Re,_e){var Ke=S(this),gt=Re==null?void 0:R(Re,te);return gt?c(gt,Re,Ke,_e):c(le,N(Ke),Re,_e)},function(Ae,Re){var _e=y(this),Ke=N(Ae),gt=Z(le,_e,Ke,Re,le!==V);if(gt.done)return gt.value;var Nt=x(_e,RegExp),Vt=_e.unicode,Ct=(_e.ignoreCase?"i":"")+(_e.multiline?"m":"")+(_e.unicode?"u":"")+(ye?"g":"y"),Ge=new Nt(ye?"^(?:"+_e.source+")":_e,Ct),bt=Re===void 0?ce:Re>>>0;if(bt===0)return[];if(Ke.length===0)return $(Ge,Ke)===null?[Ke]:[];for(var Ut=0,ee=0,se=[];ee<Ke.length;){Ge.lastIndex=ye?0:ee;var be=$(Ge,ye?D(Ke,ee):Ke),Ue;if(be===null||(Ue=xe(w(Ge.lastIndex+(ye?ee:0)),Ke.length))===Ut)ee=T(Ke,ee,Vt);else{if(U(se,D(Ke,Ut,ee)),se.length===bt)return se;for(var tt=1;tt<=be.length-1;tt++)if(U(se,be[tt]),se.length===bt)return se;ee=Ut=Ue}}return U(se,D(Ke,Ut)),se}]},!k,ye)},function(i,u,o){var l=o(36),c=o(7),h=o(15),p=o(95),g=o(44),y=o(34),S=o(143),x=o(58),T=o(88),w=o(130),N=o(18),R=o(73).f,I=o(51).f,$=o(37).f,W=o(196),he=o(159).trim,ge="Number",ye=c[ge],ce=ye.prototype,xe=c.TypeError,L=h("".slice),Q=h("".charCodeAt),U=function(le){var Ae=w(le,"number");return typeof Ae=="bigint"?Ae:D(Ae)},D=function(le){var Ae=w(le,"number"),Re,_e,Ke,gt,Nt,Vt,Ct,Ge;if(T(Ae))throw xe("Cannot convert a Symbol value to a number");if(typeof Ae=="string"&&Ae.length>2){if(Ae=he(Ae),Re=Q(Ae,0),Re===43||Re===45){if(_e=Q(Ae,2),_e===88||_e===120)return NaN}else if(Re===48){switch(Q(Ae,1)){case 66:case 98:Ke=2,gt=49;break;case 79:case 111:Ke=8,gt=55;break;default:return+Ae}for(Nt=L(Ae,2),Vt=Nt.length,Ct=0;Ct<Vt;Ct++)if(Ge=Q(Nt,Ct),Ge<48||Ge>gt)return NaN;return parseInt(Nt,Ke)}}return+Ae};if(p(ge,!ye(" 0o1")||!ye("0b1")||ye("+0x1"))){for(var k=function(Ae){var Re=arguments.length<1?0:ye(U(Ae)),_e=this;return x(ce,_e)&&N(function(){W(_e)})?S(Object(Re),_e,k):Re},te=l?R(ye):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),V=0,Z;te.length>V;V++)y(ye,Z=te[V])&&!y(k,Z)&&$(k,Z,I(ye,Z));k.prototype=ce,ce.constructor=k,g(c,ge,k)}},function(i,u,o){var l=o(16);l({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(i,u,o){var l=o(7),c=o(15),h=o(18),p=o(50),g=l.Object,y=c("".split);i.exports=h(function(){return!g("z").propertyIsEnumerable(0)})?function(S){return p(S)=="String"?y(S,""):g(S)}:g},function(i,u){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},function(i,u,o){var l=o(27),c=o(54),h=o(37),p=l("unscopables"),g=Array.prototype;g[p]==null&&h.f(g,p,{configurable:!0,value:c(null)}),i.exports=function(y){g[p][y]=!0}},function(i,u,o){var l=o(65),c=o(107);(i.exports=function(h,p){return c[h]||(c[h]=p!==void 0?p:{})})("versions",[]).push({version:"3.19.3",mode:l?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(i,u,o){var l=o(15),c=0,h=Math.random(),p=l(1 .toString);i.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+p(++c+h,36)}},function(i,u,o){var l=o(7),c=o(33),h=l.document,p=c(h)&&c(h.createElement);i.exports=function(g){return p?h.createElement(g):{}}},function(i,u,o){var l=o(130),c=o(88);i.exports=function(h){var p=l(h,"string");return c(p)?p:p+""}},function(i,u,o){var l=o(7),c=o(46),h=o(28),p=o(58),g=o(128),y=l.Object;i.exports=g?function(S){return typeof S=="symbol"}:function(S){var x=c("Symbol");return h(x)&&p(x.prototype,y(S))}},function(i,u,o){var l=o(7),c=l.String;i.exports=function(h){try{return c(h)}catch{return"Object"}}},function(i,u,o){var l=o(69),c=Math.min;i.exports=function(h){return h>0?c(l(h),9007199254740991):0}},function(i,u,o){var l=o(84),c=o(85),h=l("keys");i.exports=function(p){return h[p]||(h[p]=c(p))}},function(i,u,o){var l=o(15),c=o(28),h=o(107),p=l(Function.toString);c(h.inspectSource)||(h.inspectSource=function(g){return p(g)}),i.exports=h.inspectSource},function(i,u,o){var l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,h=c&&!l.call({1:2},1);u.f=h?function(g){var y=c(this,g);return!!y&&y.enumerable}:l},function(i,u,o){var l=o(36),c=o(34),h=Function.prototype,p=l&&Object.getOwnPropertyDescriptor,g=c(h,"name"),y=g&&function(){}.name==="something",S=g&&(!l||l&&p(h,"name").configurable);i.exports={EXISTS:g,PROPER:y,CONFIGURABLE:S}},function(i,u,o){var l=o(18),c=o(28),h=/#|\.prototype\./,p=function(T,w){var N=y[g(T)];return N==x?!0:N==S?!1:c(w)?l(w):!!w},g=p.normalize=function(T){return String(T).replace(h,".").toLowerCase()},y=p.data={},S=p.NATIVE="N",x=p.POLYFILL="P";i.exports=p},function(i,u,o){var l=o(7),c=o(34),h=o(28),p=o(38),g=o(91),y=o(137),S=g("IE_PROTO"),x=l.Object,T=x.prototype;i.exports=y?x.getPrototypeOf:function(w){var N=p(w);if(c(N,S))return N[S];var R=N.constructor;return h(R)&&N instanceof R?R.prototype:N instanceof x?T:null}},function(i,u,o){var l=o(15),c=o(32),h=o(172);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var p=!1,g={},y;try{y=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),y(g,[]),p=g instanceof Array}catch{}return function(x,T){return c(x),h(T),p?y(x,T):x.__proto__=T,x}}():void 0)},function(i,u,o){var l=o(7),c=o(116),h=o(28),p=o(50),g=o(27),y=g("toStringTag"),S=l.Object,x=p(function(){return arguments}())=="Arguments",T=function(w,N){try{return w[N]}catch{}};i.exports=c?p:function(w){var N,R,I;return w===void 0?"Undefined":w===null?"Null":typeof(R=T(N=S(w),y))=="string"?R:x?p(N):(I=p(N))=="Object"&&h(N.callee)?"Arguments":I}},function(i,u,o){var l=o(50);i.exports=Array.isArray||function(h){return l(h)=="Array"}},function(i,u,o){var l=o(15),c=o(18),h=o(28),p=o(98),g=o(46),y=o(92),S=function(){},x=[],T=g("Reflect","construct"),w=/^\s*(?:class|function)\b/,N=l(w.exec),R=!w.exec(S),I=function(W){if(!h(W))return!1;try{return T(S,x,W),!0}catch{return!1}},$=function(W){if(!h(W))return!1;switch(p(W)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return R||!!N(w,y(W))};i.exports=!T||c(function(){var W;return I(I.call)||!I(Object)||!I(function(){W=!0})||W})?$:I},function(i,u,o){var l=o(15);i.exports=l([].slice)},function(i,u,o){var l=o(35),c=o(15),h=o(40),p=o(184),g=o(151),y=o(84),S=o(54),x=o(56).get,T=o(185),w=o(186),N=y("native-string-replace",String.prototype.replace),R=RegExp.prototype.exec,I=R,$=c("".charAt),W=c("".indexOf),he=c("".replace),ge=c("".slice),ye=function(){var Q=/a/,U=/b*/g;return l(R,Q,"a"),l(R,U,"a"),Q.lastIndex!==0||U.lastIndex!==0}(),ce=g.BROKEN_CARET,xe=/()??/.exec("")[1]!==void 0,L=ye||xe||ce||T||w;L&&(I=function(U){var D=this,k=x(D),te=h(U),V=k.raw,Z,le,Ae,Re,_e,Ke,gt;if(V)return V.lastIndex=D.lastIndex,Z=l(I,V,te),D.lastIndex=V.lastIndex,Z;var Nt=k.groups,Vt=ce&&D.sticky,Ct=l(p,D),Ge=D.source,bt=0,Ut=te;if(Vt&&(Ct=he(Ct,"y",""),W(Ct,"g")===-1&&(Ct+="g"),Ut=ge(te,D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&$(te,D.lastIndex-1)!==`
`)&&(Ge="(?: "+Ge+")",Ut=" "+Ut,bt++),le=new RegExp("^(?:"+Ge+")",Ct)),xe&&(le=new RegExp("^"+Ge+"$(?!\\s)",Ct)),ye&&(Ae=D.lastIndex),Re=l(R,Vt?le:D,Ut),Vt?Re?(Re.input=ge(Re.input,bt),Re[0]=ge(Re[0],bt),Re.index=D.lastIndex,D.lastIndex+=Re[0].length):D.lastIndex=0:ye&&Re&&(D.lastIndex=D.global?Re.index+Re[0].length:Ae),xe&&Re&&Re.length>1&&l(N,Re[0],le,function(){for(_e=1;_e<arguments.length-2;_e++)arguments[_e]===void 0&&(Re[_e]=void 0)}),Re&&Nt)for(Re.groups=Ke=S(null),_e=0;_e<Nt.length;_e++)gt=Nt[_e],Ke[gt[0]]=Re[gt[1]];return Re}),i.exports=I},function(i,u,o){var l=o(16),c=o(7),h=o(68),p=o(69),g=o(43),y=o(38),S=o(119),x=o(61),T=o(76),w=T("splice"),N=c.TypeError,R=Math.max,I=Math.min,$=9007199254740991,W="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!w},{splice:function(ge,ye){var ce=y(this),xe=g(ce),L=h(ge,xe),Q=arguments.length,U,D,k,te,V,Z;if(Q===0?U=D=0:Q===1?(U=0,D=xe-L):(U=Q-2,D=I(R(p(ye),0),xe-L)),xe+U-D>$)throw N(W);for(k=S(ce,D),te=0;te<D;te++)V=L+te,V in ce&&x(k,te,ce[V]);if(k.length=D,U<D){for(te=L;te<xe-D;te++)V=te+D,Z=te+U,V in ce?ce[Z]=ce[V]:delete ce[Z];for(te=xe;te>xe-D+U;te--)delete ce[te-1]}else if(U>D)for(te=xe-D;te>L;te--)V=te+D-1,Z=te+U-1,V in ce?ce[Z]=ce[V]:delete ce[Z];for(te=0;te<U;te++)ce[te+L]=arguments[te+2];return ce.length=xe-D+U,k}})},function(i,u,o){var l=o(16),c=o(201),h=o(202);l({target:"String",proto:!0,forced:h("anchor")},{anchor:function(g){return c(this,"a","name",g)}})},function(i,u,o){(function(l){var c=typeof l=="object"&&l&&l.Object===Object&&l;u.a=c}).call(this,o(82))},function(i,u,o){(function(l){var c=o(31),h=a&&!a.nodeType&&a,p=h&&typeof l=="object"&&l&&!l.nodeType&&l,g=p&&p.exports===h,y=g?c.a.Buffer:void 0,S=y?y.allocUnsafe:void 0;function x(T,w){if(w)return T.slice();var N=T.length,R=S?S(N):new T.constructor(N);return T.copy(R),R}u.a=x}).call(this,o(121)(i))},function(i,u,o){var l=o(7),c=o(108),h="__core-js_shared__",p=l[h]||c(h,{});i.exports=p},function(i,u,o){var l=o(7),c=Object.defineProperty;i.exports=function(h,p){try{c(l,h,{value:p,configurable:!0,writable:!0})}catch{l[h]=p}return p}},function(i,u,o){var l=o(66),c=o(18);i.exports=!!Object.getOwnPropertySymbols&&!c(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&l&&l<41})},function(i,u){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(i,u,o){var l=o(16),c=o(35),h=o(65),p=o(94),g=o(28),y=o(171),S=o(96),x=o(97),T=o(74),w=o(57),N=o(44),R=o(27),I=o(71),$=o(136),W=p.PROPER,he=p.CONFIGURABLE,ge=$.IteratorPrototype,ye=$.BUGGY_SAFARI_ITERATORS,ce=R("iterator"),xe="keys",L="values",Q="entries",U=function(){return this};i.exports=function(D,k,te,V,Z,le,Ae){y(te,k,V);var Re=function(ee){if(ee===Z&&Vt)return Vt;if(!ye&&ee in gt)return gt[ee];switch(ee){case xe:return function(){return new te(this,ee)};case L:return function(){return new te(this,ee)};case Q:return function(){return new te(this,ee)}}return function(){return new te(this)}},_e=k+" Iterator",Ke=!1,gt=D.prototype,Nt=gt[ce]||gt["@@iterator"]||Z&&gt[Z],Vt=!ye&&Nt||Re(Z),Ct=k=="Array"&&gt.entries||Nt,Ge,bt,Ut;if(Ct&&(Ge=S(Ct.call(new D)),Ge!==Object.prototype&&Ge.next&&(!h&&S(Ge)!==ge&&(x?x(Ge,ge):g(Ge[ce])||N(Ge,ce,U)),T(Ge,_e,!0,!0),h&&(I[_e]=U))),W&&Z==L&&Nt&&Nt.name!==L&&(!h&&he?w(gt,"name",L):(Ke=!0,Vt=function(){return c(Nt,this)})),Z)if(bt={values:Re(L),keys:le?Vt:Re(xe),entries:Re(Q)},Ae)for(Ut in bt)(ye||Ke||!(Ut in gt))&&N(gt,Ut,bt[Ut]);else l({target:k,proto:!0,forced:ye||Ke},bt);return(!h||Ae)&&gt[ce]!==Vt&&N(gt,ce,Vt,{name:Z}),I[k]=Vt,bt}},function(i,u){u.f=Object.getOwnPropertySymbols},function(i,u,o){var l=o(7),c=o(68),h=o(43),p=o(61),g=l.Array,y=Math.max;i.exports=function(S,x,T){for(var w=h(S),N=c(x,w),R=c(T===void 0?w:T,w),I=g(y(R-N,0)),$=0;N<R;N++,$++)p(I,$,S[N]);return I.length=$,I}},function(i,u,o){var l=o(7),c=o(62),h=o(35),p=o(32),g=o(89),y=o(140),S=o(43),x=o(58),T=o(141),w=o(115),N=o(142),R=l.TypeError,I=function(W,he){this.stopped=W,this.result=he},$=I.prototype;i.exports=function(W,he,ge){var ye=ge&&ge.that,ce=!!(ge&&ge.AS_ENTRIES),xe=!!(ge&&ge.IS_ITERATOR),L=!!(ge&&ge.INTERRUPTED),Q=c(he,ye),U,D,k,te,V,Z,le,Ae=function(_e){return U&&N(U,"normal",_e),new I(!0,_e)},Re=function(_e){return ce?(p(_e),L?Q(_e[0],_e[1],Ae):Q(_e[0],_e[1])):L?Q(_e,Ae):Q(_e)};if(xe)U=W;else{if(D=w(W),!D)throw R(g(W)+" is not iterable");if(y(D)){for(k=0,te=S(W);te>k;k++)if(V=Re(W[k]),V&&x($,V))return V;return new I(!1)}U=T(W,D)}for(Z=U.next;!(le=h(Z,U)).done;){try{V=Re(le.value)}catch(_e){N(U,"throw",_e)}if(typeof V=="object"&&V&&x($,V))return V}return new I(!1)}},function(i,u,o){var l=o(98),c=o(59),h=o(71),p=o(27),g=p("iterator");i.exports=function(y){if(y!=null)return c(y,g)||c(y,"@@iterator")||h[l(y)]}},function(i,u,o){var l=o(27),c=l("toStringTag"),h={};h[c]="z",i.exports=String(h)==="[object z]"},function(i,u,o){var l=o(7),c=o(58),h=l.TypeError;i.exports=function(p,g){if(c(g,p))return p;throw h("Incorrect invocation")}},function(i,u,o){var l=o(27),c=l("iterator"),h=!1;try{var p=0,g={next:function(){return{done:!!p++}},return:function(){h=!0}};g[c]=function(){return this},Array.from(g,function(){throw 2})}catch{}i.exports=function(y,S){if(!S&&!h)return!1;var x=!1;try{var T={};T[c]=function(){return{next:function(){return{done:x=!0}}}},y(T)}catch{}return x}},function(i,u,o){var l=o(180);i.exports=function(c,h){return new(l(c))(h===0?0:h)}},function(i,u,o){var l=o(18);i.exports=function(c,h){var p=[][c];return!!p&&l(function(){p.call(null,h||function(){throw 1},1)})}},function(i,u){i.exports=function(o){if(!o.webpackPolyfill){var l=Object.create(o);l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),Object.defineProperty(l,"exports",{enumerable:!0}),l.webpackPolyfill=1}return l}},function(i,u,o){o(19);var l=o(15),c=o(44),h=o(102),p=o(18),g=o(27),y=o(57),S=g("species"),x=RegExp.prototype;i.exports=function(T,w,N,R){var I=g(T),$=!p(function(){var ye={};return ye[I]=function(){return 7},""[T](ye)!=7}),W=$&&!p(function(){var ye=!1,ce=/a/;return T==="split"&&(ce={},ce.constructor={},ce.constructor[S]=function(){return ce},ce.flags="",ce[I]=/./[I]),ce.exec=function(){return ye=!0,null},ce[I](""),!ye});if(!$||!W||N){var he=l(/./[I]),ge=w(I,""[T],function(ye,ce,xe,L,Q){var U=l(ye),D=ce.exec;return D===h||D===x.exec?$&&!Q?{done:!0,value:he(ce,xe,L)}:{done:!0,value:U(xe,ce,L)}:{done:!1}});c(String.prototype,T,ge[0]),c(x,I,ge[1])}R&&y(x[I],"sham",!0)}},function(i,u,o){var l=o(146).charAt;i.exports=function(c,h,p){return h+(p?l(c,h).length:1)}},function(i,u,o){var l=o(7),c=o(35),h=o(32),p=o(28),g=o(50),y=o(102),S=l.TypeError;i.exports=function(x,T){var w=x.exec;if(p(w)){var N=c(w,x,T);return N!==null&&h(N),N}if(g(x)==="RegExp")return c(y,x,T);throw S("RegExp#exec called on incompatible receiver")}},function(i,u,o){var l=o(77),c=o(35),h=o(15),p=o(122),g=o(18),y=o(32),S=o(28),x=o(69),T=o(90),w=o(40),N=o(45),R=o(123),I=o(59),$=o(197),W=o(124),he=o(27),ge=he("replace"),ye=Math.max,ce=Math.min,xe=h([].concat),L=h([].push),Q=h("".indexOf),U=h("".slice),D=function(Z){return Z===void 0?Z:String(Z)},k=function(){return"a".replace(/./,"$0")==="$0"}(),te=function(){return/./[ge]?/./[ge]("a","$0")==="":!1}(),V=!g(function(){var Z=/./;return Z.exec=function(){var le=[];return le.groups={a:"7"},le},"".replace(Z,"$<a>")!=="7"});p("replace",function(Z,le,Ae){var Re=te?"$":"$0";return[function(Ke,gt){var Nt=N(this),Vt=Ke==null?void 0:I(Ke,ge);return Vt?c(Vt,Ke,Nt,gt):c(le,w(Nt),Ke,gt)},function(_e,Ke){var gt=y(this),Nt=w(_e);if(typeof Ke=="string"&&Q(Ke,Re)===-1&&Q(Ke,"$<")===-1){var Vt=Ae(le,gt,Nt,Ke);if(Vt.done)return Vt.value}var Ct=S(Ke);Ct||(Ke=w(Ke));var Ge=gt.global;if(Ge){var bt=gt.unicode;gt.lastIndex=0}for(var Ut=[];;){var ee=W(gt,Nt);if(ee===null||(L(Ut,ee),!Ge))break;var se=w(ee[0]);se===""&&(gt.lastIndex=R(Nt,T(gt.lastIndex),bt))}for(var be="",Ue=0,tt=0;tt<Ut.length;tt++){ee=Ut[tt];for(var He=w(ee[0]),Lt=ye(ce(x(ee.index),Nt.length),0),nr=[],tr=1;tr<ee.length;tr++)L(nr,D(ee[tr]));var Jt=ee.groups;if(Ct){var rt=xe([He],nr,Lt,Nt);Jt!==void 0&&L(rt,Jt);var Er=w(l(Ke,void 0,rt))}else Er=$(He,Nt,Lt,nr,Jt,Ke);Lt>=Ue&&(be+=U(Nt,Ue,Lt)+Er,Ue=Lt+He.length)}return be+U(Nt,Ue)}]},!V||!k||te)},function(i,u,o){var l=o(50),c=o(7);i.exports=l(c.process)=="process"},function(i,u,o){var l=o(16);l({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(i,u,o){var l=o(109);i.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(i,u,o){var l=o(36),c=o(18),h=o(86);i.exports=!l&&!c(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},function(i,u,o){var l=o(7),c=o(35),h=o(33),p=o(88),g=o(59),y=o(169),S=o(27),x=l.TypeError,T=S("toPrimitive");i.exports=function(w,N){if(!h(w)||p(w))return w;var R=g(w,T),I;if(R){if(N===void 0&&(N="default"),I=c(R,w,N),!h(I)||p(I))return I;throw x("Can't convert object to primitive value")}return N===void 0&&(N="number"),y(w,N)}},function(i,u,o){var l=o(15),c=o(34),h=o(39),p=o(132).indexOf,g=o(70),y=l([].push);i.exports=function(S,x){var T=h(S),w=0,N=[],R;for(R in T)!c(g,R)&&c(T,R)&&y(N,R);for(;x.length>w;)c(T,R=x[w++])&&(~p(N,R)||y(N,R));return N}},function(i,u,o){var l=o(39),c=o(68),h=o(43),p=function(g){return function(y,S,x){var T=l(y),w=h(T),N=c(x,w),R;if(g&&S!=S){for(;w>N;)if(R=T[N++],R!=R)return!0}else for(;w>N;N++)if((g||N in T)&&T[N]===S)return g||N||0;return!g&&-1}};i.exports={includes:p(!0),indexOf:p(!1)}},function(i,u,o){var l=o(46);i.exports=l("document","documentElement")},function(i,u,o){var l=o(34),c=o(135),h=o(51),p=o(37);i.exports=function(g,y){for(var S=c(y),x=p.f,T=h.f,w=0;w<S.length;w++){var N=S[w];l(g,N)||x(g,N,T(y,N))}}},function(i,u,o){var l=o(46),c=o(15),h=o(73),p=o(112),g=o(32),y=c([].concat);i.exports=l("Reflect","ownKeys")||function(x){var T=h.f(g(x)),w=p.f;return w?y(T,w(x)):T}},function(i,u,o){var l=o(18),c=o(28),h=o(54),p=o(96),g=o(44),y=o(27),S=o(65),x=y("iterator"),T=!1,w,N,R;[].keys&&(R=[].keys(),"next"in R?(N=p(p(R)),N!==Object.prototype&&(w=N)):T=!0);var I=w==null||l(function(){var $={};return w[x].call($)!==$});I?w={}:S&&(w=h(w)),c(w[x])||g(w,x,function(){return this}),i.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:T}},function(i,u,o){var l=o(18);i.exports=!l(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(i,u,o){var l=o(16),c=o(15),h=o(70),p=o(33),g=o(34),y=o(37).f,S=o(73),x=o(139),T=o(174),w=o(85),N=o(176),R=!1,I=w("meta"),$=0,W=function(L){y(L,I,{value:{objectID:"O"+$++,weakData:{}}})},he=function(L,Q){if(!p(L))return typeof L=="symbol"?L:(typeof L=="string"?"S":"P")+L;if(!g(L,I)){if(!T(L))return"F";if(!Q)return"E";W(L)}return L[I].objectID},ge=function(L,Q){if(!g(L,I)){if(!T(L))return!0;if(!Q)return!1;W(L)}return L[I].weakData},ye=function(L){return N&&R&&T(L)&&!g(L,I)&&W(L),L},ce=function(){xe.enable=function(){},R=!0;var L=S.f,Q=c([].splice),U={};U[I]=1,L(U).length&&(S.f=function(D){for(var k=L(D),te=0,V=k.length;te<V;te++)if(k[te]===I){Q(k,te,1);break}return k},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},xe=i.exports={enable:ce,fastKey:he,getWeakData:ge,onFreeze:ye};h[I]=!0},function(i,u,o){var l=o(50),c=o(39),h=o(73).f,p=o(113),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(S){try{return h(S)}catch{return p(g)}};i.exports.f=function(x){return g&&l(x)=="Window"?y(x):h(c(x))}},function(i,u,o){var l=o(27),c=o(71),h=l("iterator"),p=Array.prototype;i.exports=function(g){return g!==void 0&&(c.Array===g||p[h]===g)}},function(i,u,o){var l=o(7),c=o(35),h=o(55),p=o(32),g=o(89),y=o(115),S=l.TypeError;i.exports=function(x,T){var w=arguments.length<2?y(x):T;if(h(w))return p(c(w,x));throw S(g(x)+" is not iterable")}},function(i,u,o){var l=o(35),c=o(32),h=o(59);i.exports=function(p,g,y){var S,x;c(p);try{if(S=h(p,"return"),!S){if(g==="throw")throw y;return y}S=l(S,p)}catch(T){x=!0,S=T}if(g==="throw")throw y;if(x)throw S;return c(S),y}},function(i,u,o){var l=o(28),c=o(33),h=o(97);i.exports=function(p,g,y){var S,x;return h&&l(S=g.constructor)&&S!==y&&c(x=S.prototype)&&x!==y.prototype&&h(p,x),p}},function(i,u,o){var l=o(44);i.exports=function(c,h,p){for(var g in h)l(c,g,h[g],p);return c}},function(i,u,o){var l=o(46),c=o(37),h=o(27),p=o(36),g=h("species");i.exports=function(y){var S=l(y),x=c.f;p&&S&&!S[g]&&x(S,g,{configurable:!0,get:function(){return this}})}},function(i,u,o){var l=o(15),c=o(69),h=o(40),p=o(45),g=l("".charAt),y=l("".charCodeAt),S=l("".slice),x=function(T){return function(w,N){var R=h(p(w)),I=c(N),$=R.length,W,he;return I<0||I>=$?T?"":void 0:(W=y(R,I),W<55296||W>56319||I+1===$||(he=y(R,I+1))<56320||he>57343?T?g(R,I):W:T?S(R,I,I+2):(W-55296<<10)+(he-56320)+65536)}};i.exports={codeAt:x(!1),charAt:x(!0)}},function(i,u){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(i,u,o){var l=o(86),c=l("span").classList,h=c&&c.constructor&&c.constructor.prototype;i.exports=h===Object.prototype?void 0:h},function(i,u,o){var l=o(27);u.f=l},function(i,u,o){var l=o(181),c=o(34),h=o(149),p=o(37).f;i.exports=function(g){var y=l.Symbol||(l.Symbol={});c(y,g)||p(y,g,{value:h.f(g)})}},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp,p=l(function(){var S=h("a","y");return S.lastIndex=2,S.exec("abcd")!=null}),g=p||l(function(){return!h("a","y").sticky}),y=p||l(function(){var S=h("^r","gy");return S.lastIndex=2,S.exec("str")!=null});i.exports={BROKEN_CARET:y,MISSED_STICKY:g,UNSUPPORTED_Y:p}},function(i,u,o){var l=o(16),c=o(132).includes,h=o(83);l({target:"Array",proto:!0},{includes:function(g){return c(this,g,arguments.length>1?arguments[1]:void 0)}}),h("includes")},function(i,u,o){var l=o(16),c=o(15),h=o(193),p=o(45),g=o(40),y=o(194),S=c("".indexOf);l({target:"String",proto:!0,forced:!y("includes")},{includes:function(T){return!!~S(g(p(this)),g(h(T)),arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){var l=o(33),c=o(50),h=o(27),p=h("match");i.exports=function(g){var y;return l(g)&&((y=g[p])!==void 0?!!y:c(g)=="RegExp")}},function(i,u){var o=i.exports={},l,c;function h(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=h}catch{l=h}try{typeof clearTimeout=="function"?c=clearTimeout:c=p}catch{c=p}})();function g(W){if(l===setTimeout)return setTimeout(W,0);if((l===h||!l)&&setTimeout)return l=setTimeout,setTimeout(W,0);try{return l(W,0)}catch{try{return l.call(null,W,0)}catch{return l.call(this,W,0)}}}function y(W){if(c===clearTimeout)return clearTimeout(W);if((c===p||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(W);try{return c(W)}catch{try{return c.call(null,W)}catch{return c.call(this,W)}}}var S=[],x=!1,T,w=-1;function N(){!x||!T||(x=!1,T.length?S=T.concat(S):w=-1,S.length&&R())}function R(){if(!x){var W=g(N);x=!0;for(var he=S.length;he;){for(T=S,S=[];++w<he;)T&&T[w].run();w=-1,he=S.length}T=null,x=!1,y(W)}}o.nextTick=function(W){var he=new Array(arguments.length-1);if(arguments.length>1)for(var ge=1;ge<arguments.length;ge++)he[ge-1]=arguments[ge];S.push(new I(W,he)),S.length===1&&!x&&g(R)};function I(W,he){this.fun=W,this.array=he}I.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function $(){}o.on=$,o.addListener=$,o.once=$,o.off=$,o.removeListener=$,o.removeAllListeners=$,o.emit=$,o.prependListener=$,o.prependOnceListener=$,o.listeners=function(W){return[]},o.binding=function(W){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(W){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(i,u,o){var l=o(32),c=o(157),h=o(27),p=h("species");i.exports=function(g,y){var S=l(g).constructor,x;return S===void 0||(x=l(S)[p])==null?y:c(x)}},function(i,u,o){var l=o(7),c=o(100),h=o(89),p=l.TypeError;i.exports=function(g){if(c(g))return g;throw p(h(g)+" is not a constructor")}},function(i,u,o){var l=o(16),c=o(159).trim,h=o(195);l({target:"String",proto:!0,forced:h("trim")},{trim:function(){return c(this)}})},function(i,u,o){var l=o(15),c=o(45),h=o(40),p=o(160),g=l("".replace),y="["+p+"]",S=RegExp("^"+y+y+"*"),x=RegExp(y+y+"*$"),T=function(w){return function(N){var R=h(c(N));return w&1&&(R=g(R,S,"")),w&2&&(R=g(R,x,"")),R}};i.exports={start:T(1),end:T(2),trim:T(3)}},function(i,u){i.exports=`	
\v\f\r \u2028\u2029\uFEFF`},function(i,u,o){var l=o(35),c=o(122),h=o(32),p=o(90),g=o(40),y=o(45),S=o(59),x=o(123),T=o(124);c("match",function(w,N,R){return[function($){var W=y(this),he=$==null?void 0:S($,w);return he?l(he,$,W):new RegExp($)[w](g(W))},function(I){var $=h(this),W=g(I),he=R(N,$,W);if(he.done)return he.value;if(!$.global)return T($,W);var ge=$.unicode;$.lastIndex=0;for(var ye=[],ce=0,xe;(xe=T($,W))!==null;){var L=g(xe[0]);ye[ce]=L,L===""&&($.lastIndex=x(W,p($.lastIndex),ge)),ce++}return ce===0?null:ye}]})},function(i,u,o){var l=o(7),c=o(77),h=o(62),p=o(28),g=o(34),y=o(18),S=o(133),x=o(101),T=o(86),w=o(163),N=o(126),R=l.setImmediate,I=l.clearImmediate,$=l.process,W=l.Dispatch,he=l.Function,ge=l.MessageChannel,ye=l.String,ce=0,xe={},L="onreadystatechange",Q,U,D,k;try{Q=l.location}catch{}var te=function(Ae){if(g(xe,Ae)){var Re=xe[Ae];delete xe[Ae],Re()}},V=function(Ae){return function(){te(Ae)}},Z=function(Ae){te(Ae.data)},le=function(Ae){l.postMessage(ye(Ae),Q.protocol+"//"+Q.host)};(!R||!I)&&(R=function(Re){var _e=x(arguments,1);return xe[++ce]=function(){c(p(Re)?Re:he(Re),void 0,_e)},U(ce),ce},I=function(Re){delete xe[Re]},N?U=function(Ae){$.nextTick(V(Ae))}:W&&W.now?U=function(Ae){W.now(V(Ae))}:ge&&!w?(D=new ge,k=D.port2,D.port1.onmessage=Z,U=h(k.postMessage,k)):l.addEventListener&&p(l.postMessage)&&!l.importScripts&&Q&&Q.protocol!=="file:"&&!y(le)?(U=le,l.addEventListener("message",Z,!1)):L in T("script")?U=function(Ae){S.appendChild(T("script"))[L]=function(){S.removeChild(this),te(Ae)}}:U=function(Ae){setTimeout(V(Ae),0)}),i.exports={set:R,clear:I}},function(i,u,o){var l=o(53);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},function(i,u,o){var l=o(55),c=function(h){var p,g;this.promise=new h(function(y,S){if(p!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");p=y,g=S}),this.resolve=l(p),this.reject=l(g)};i.exports.f=function(h){return new c(h)}},function(i,u,o){function l(){return!1}u.a=l},function(i,u,o){(function(l){o.d(u,"a",function(){return ce});var c=o(0);function h(L){throw new Error("[mobx-utils] "+L)}function p(L,Q){Q===void 0&&(Q="Illegal state"),L||h(Q)}var g=function(L){return L&&L!==Object.prototype&&Object.getOwnPropertyNames(L).concat(g(Object.getPrototypeOf(L))||[])},y=function(L){var Q=g(L),U=Q.filter(function(D,k){return Q.indexOf(D)===k});return U},S=function(L){return y(L).filter(function(Q){return Q!=="constructor"&&!~Q.indexOf("__")})},x="pending",T="fulfilled",w="rejected";function N(L){switch(this.state){case x:return L.pending&&L.pending(this.value);case w:return L.rejected&&L.rejected(this.value);case T:return L.fulfilled?L.fulfilled(this.value):this.value}}function R(L,Q){if(p(arguments.length<=2,"fromPromise expects up to two arguments"),p(typeof L=="function"||typeof L=="object"&&L&&typeof L.then=="function","Please pass a promise or function to fromPromise"),L.isPromiseBasedObservable===!0)return L;typeof L=="function"&&(L=new Promise(L));var U=L;L.then(Object(c.k)("observableFromPromise-resolve",function(k){U.value=k,U.state=T}),Object(c.k)("observableFromPromise-reject",function(k){U.value=k,U.state=w})),U.isPromiseBasedObservable=!0,U.case=N;var D=Q&&Q.state===T?Q.value:void 0;return Object(c.q)(U,{value:D,state:x},{},{deep:!1}),U}(function(L){L.reject=Object(c.k)("fromPromise.reject",function(U){var D=L(Promise.reject(U));return D.state=w,D.value=U,D});function Q(U){U===void 0&&(U=void 0);var D=L(Promise.resolve(U));return D.state=T,D.value=U,D}L.resolve=Object(c.k)("fromPromise.resolve",Q)})(R||(R={}));var I=function(L,Q,U,D){var k=arguments.length,te=k<3?Q:D===null?D=Object.getOwnPropertyDescriptor(Q,U):D,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(L,Q,U,D);else for(var Z=L.length-1;Z>=0;Z--)(V=L[Z])&&(te=(k<3?V(te):k>3?V(Q,U,te):V(Q,U))||te);return k>3&&te&&Object.defineProperty(Q,U,te),te};(function(){function L(Q,U){var D=this;Object(c.G)(function(){D.current=U,D.subscription=Q.subscribe(D)})}return L.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},L.prototype.next=function(Q){this.current=Q},L.prototype.complete=function(){this.dispose()},L.prototype.error=function(Q){this.current=Q,this.dispose()},I([c.C.ref],L.prototype,"current",void 0),I([c.k.bound],L.prototype,"next",null),I([c.k.bound],L.prototype,"complete",null),I([c.k.bound],L.prototype,"error",null),L})();var $=function(){return $=Object.assign||function(L){for(var Q,U=1,D=arguments.length;U<D;U++){Q=arguments[U];for(var k in Q)Object.prototype.hasOwnProperty.call(Q,k)&&(L[k]=Q[k])}return L},$.apply(this,arguments)},W=function(L,Q,U,D){var k=arguments.length,te=k<3?Q:D===null?D=Object.getOwnPropertyDescriptor(Q,U):D,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(L,Q,U,D);else for(var Z=L.length-1;Z>=0;Z--)(V=L[Z])&&(te=(k<3?V(te):k>3?V(Q,U,te):V(Q,U))||te);return k>3&&te&&Object.defineProperty(Q,U,te),te},he=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function L(Q){var U=this;this.model=Q,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(D){return U.localValues.has(D)},p(Object(c.A)(Q),"createViewModel expects an observable object"),S(Q).forEach(function(D){if(!(D===c.a||D==="__mobxDidRunLazyInitializers")){if(p(he.indexOf(D)===-1,"The propertyname "+D+" is reserved and cannot be used with viewModels"),Object(c.w)(Q,D)){var k=Object(c.h)(Q,D).derivation;U.localComputedValues.set(D,Object(c.m)(k.bind(U)))}var te=Object.getOwnPropertyDescriptor(Q,D),V=te?{enumerable:te.enumerable}:{};Object.defineProperty(U,D,$($({},V),{configurable:!0,get:function(){return Object(c.w)(Q,D)?U.localComputedValues.get(D).get():U.isPropertyDirty(D)?U.localValues.get(D):U.model[D]},set:Object(c.k)(function(Z){Z!==U.model[D]?U.localValues.set(D,Z):U.localValues.delete(D)})}))}})}return Object.defineProperty(L.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),L.prototype.submit=function(){var Q=this;Object(c.B)(this.localValues).forEach(function(U){var D=Q.localValues.get(U),k=Q.model[U];Object(c.y)(k)?k.replace(D):Object(c.z)(k)?(k.clear(),k.merge(D)):Object(c.v)(D)||(Q.model[U]=D)}),this.localValues.clear()},L.prototype.reset=function(){this.localValues.clear()},L.prototype.resetProperty=function(Q){this.localValues.delete(Q)},W([c.m],L.prototype,"isDirty",null),W([c.m],L.prototype,"changedValues",null),W([c.k.bound],L.prototype,"submit",null),W([c.k.bound],L.prototype,"reset",null),W([c.k.bound],L.prototype,"resetProperty",null),L})();function ge(L){if(!L)return"ROOT";for(var Q=[];L.parent;)Q.push(L.path),L=L.parent;return Q.reverse().join("/")}function ye(L){return Object(c.A)(L)||Object(c.y)(L)||Object(c.z)(L)}function ce(L,Q){var U=new WeakMap;function D(Z){var le=U.get(Z.object);k(Z,le),Q(Z,ge(le),L)}function k(Z,le){switch(Z.type){case"add":te(Z.newValue,le,Z.name);break;case"update":V(Z.oldValue),te(Z.newValue,le,Z.name||""+Z.index);break;case"remove":case"delete":V(Z.oldValue);break;case"splice":Z.removed.map(V),Z.added.forEach(function(_e,Ke){return te(_e,le,""+(Z.index+Ke))});for(var Ae=Z.index+Z.addedCount;Ae<Z.object.length;Ae++)if(ye(Z.object[Ae])){var Re=U.get(Z.object[Ae]);Re&&(Re.path=""+Ae)}break}}function te(Z,le,Ae){if(ye(Z)){var Re=U.get(Z);if(Re){if(Re.parent!==le||Re.path!==Ae)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+ge(le)+"/"+Ae+"',")+(" but it already exists at '"+ge(Re.parent)+"/"+Re.path+"'"))}else{var _e={parent:le,path:Ae,dispose:Object(c.D)(Z,D)};U.set(Z,_e),Object(c.p)(Z).forEach(function(Ke){var gt=Ke[0],Nt=Ke[1];return te(Nt,_e,gt)})}}}function V(Z){if(ye(Z)){var le=U.get(Z);if(!le)return;U.delete(Z),le.dispose(),Object(c.L)(Z).forEach(V)}}return te(L,void 0,""),function(){V(L)}}var xe=function(){var L=function(Q,U){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,k){D.__proto__=k}||function(D,k){for(var te in k)k.hasOwnProperty(te)&&(D[te]=k[te])},L(Q,U)};return function(Q,U){L(Q,U);function D(){this.constructor=Q}Q.prototype=U===null?Object.create(U):(D.prototype=U.prototype,new D)}}();(function(L){xe(Q,L);function Q(U,D,k){var te=k===void 0?{}:k,V=te.name,Z=V===void 0?"ogm"+(Math.random()*1e3|0):V,le=te.keyToName,Ae=le===void 0?function(Ke){return""+Ke}:le,Re=L.call(this)||this;Re._keyToName=Ae,Re._groupBy=D,Re._ogmInfoKey=Symbol("ogmInfo"+Z),Re._base=U;for(var _e=0;_e<U.length;_e++)Re._addItem(U[_e]);return Re._disposeBaseObserver=Object(c.D)(Re._base,function(Ke){if(Ke.type==="splice")Object(c.J)(function(){for(var gt=0,Nt=Ke.removed;gt<Nt.length;gt++){var Vt=Nt[gt];Re._removeItem(Vt)}for(var Ct=0,Ge=Ke.added;Ct<Ge.length;Ct++){var bt=Ge[Ct];Re._addItem(bt)}});else if(Ke.type==="update")Object(c.J)(function(){Re._removeItem(Ke.oldValue),Re._addItem(Ke.newValue)});else throw new Error("illegal state")}),Re}return Q.prototype.clear=function(){throw new Error("not supported")},Q.prototype.delete=function(U){throw new Error("not supported")},Q.prototype.set=function(U,D){throw new Error("not supported")},Q.prototype.dispose=function(){this._disposeBaseObserver();for(var U=0;U<this._base.length;U++){var D=this._base[U],k=D[this._ogmInfoKey];k.reaction(),delete D[this._ogmInfoKey]}},Q.prototype._getGroupArr=function(U){var D=L.prototype.get.call(this,U);return D===void 0&&(D=Object(c.C)([],{name:"GroupArray["+this._keyToName(U)+"]",deep:!1}),L.prototype.set.call(this,U,D)),D},Q.prototype._removeFromGroupArr=function(U,D){var k=L.prototype.get.call(this,U);k.length===1?L.prototype.delete.call(this,U):(D===k.length-1||(k[D]=k[k.length-1],k[D][this._ogmInfoKey].groupArrIndex=D),k.length--)},Q.prototype._addItem=function(U){var D=this,k=this._groupBy(U),te=this._getGroupArr(k),V={groupByValue:k,groupArrIndex:te.length,reaction:Object(c.F)(function(){return D._groupBy(U)},function(Z,le){var Ae=U[D._ogmInfoKey];D._removeFromGroupArr(Ae.groupByValue,Ae.groupArrIndex);var Re=D._getGroupArr(Z),_e=Re.length;Re.push(U),Ae.groupByValue=Z,Ae.groupArrIndex=_e})};Object.defineProperty(U,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:V}),te.push(U)},Q.prototype._removeItem=function(U){var D=U[this._ogmInfoKey];this._removeFromGroupArr(D.groupByValue,D.groupArrIndex),D.reaction(),delete U[this._ogmInfoKey]},Q})(c.b),Promise.resolve(),typeof queueMicrotask<"u"||typeof l<"u"&&l.nextTick}).call(this,o(155))},function(i,u,o){var l;(function(c,h,p){if(!c)return;for(var g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},y={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},S={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},T,w=1;w<20;++w)g[111+w]="f"+w;for(w=0;w<=9;++w)g[w+96]=w.toString();function N(D,k,te){if(D.addEventListener){D.addEventListener(k,te,!1);return}D.attachEvent("on"+k,te)}function R(D){if(D.type=="keypress"){var k=String.fromCharCode(D.which);return D.shiftKey||(k=k.toLowerCase()),k}return g[D.which]?g[D.which]:y[D.which]?y[D.which]:String.fromCharCode(D.which).toLowerCase()}function I(D,k){return D.sort().join(",")===k.sort().join(",")}function $(D){var k=[];return D.shiftKey&&k.push("shift"),D.altKey&&k.push("alt"),D.ctrlKey&&k.push("ctrl"),D.metaKey&&k.push("meta"),k}function W(D){if(D.preventDefault){D.preventDefault();return}D.returnValue=!1}function he(D){if(D.stopPropagation){D.stopPropagation();return}D.cancelBubble=!0}function ge(D){return D=="shift"||D=="ctrl"||D=="alt"||D=="meta"}function ye(){if(!T){T={};for(var D in g)D>95&&D<112||g.hasOwnProperty(D)&&(T[g[D]]=D)}return T}function ce(D,k,te){return te||(te=ye()[D]?"keydown":"keypress"),te=="keypress"&&k.length&&(te="keydown"),te}function xe(D){return D==="+"?["+"]:(D=D.replace(/\+{2}/g,"+plus"),D.split("+"))}function L(D,k){var te,V,Z,le=[];for(te=xe(D),Z=0;Z<te.length;++Z)V=te[Z],x[V]&&(V=x[V]),k&&k!="keypress"&&S[V]&&(V=S[V],le.push("shift")),ge(V)&&le.push(V);return k=ce(V,le,k),{key:V,modifiers:le,action:k}}function Q(D,k){return D===null||D===h?!1:D===k?!0:Q(D.parentNode,k)}function U(D){var k=this;if(D=D||h,!(k instanceof U))return new U(D);k.target=D,k._callbacks={},k._directMap={};var te={},V,Z=!1,le=!1,Ae=!1;function Re(Ge){Ge=Ge||{};var bt=!1,Ut;for(Ut in te){if(Ge[Ut]){bt=!0;continue}te[Ut]=0}bt||(Ae=!1)}function _e(Ge,bt,Ut,ee,se,be){var Ue,tt,He=[],Lt=Ut.type;if(!k._callbacks[Ge])return[];for(Lt=="keyup"&&ge(Ge)&&(bt=[Ge]),Ue=0;Ue<k._callbacks[Ge].length;++Ue)if(tt=k._callbacks[Ge][Ue],!(!ee&&tt.seq&&te[tt.seq]!=tt.level)&&Lt==tt.action&&(Lt=="keypress"&&!Ut.metaKey&&!Ut.ctrlKey||I(bt,tt.modifiers))){var nr=!ee&&tt.combo==se,tr=ee&&tt.seq==ee&&tt.level==be;(nr||tr)&&k._callbacks[Ge].splice(Ue,1),He.push(tt)}return He}function Ke(Ge,bt,Ut,ee){k.stopCallback(bt,bt.target||bt.srcElement,Ut,ee)||Ge(bt,Ut)===!1&&(W(bt),he(bt))}k._handleKey=function(Ge,bt,Ut){var ee=_e(Ge,bt,Ut),se,be={},Ue=0,tt=!1;for(se=0;se<ee.length;++se)ee[se].seq&&(Ue=Math.max(Ue,ee[se].level));for(se=0;se<ee.length;++se){if(ee[se].seq){if(ee[se].level!=Ue)continue;tt=!0,be[ee[se].seq]=1,Ke(ee[se].callback,Ut,ee[se].combo,ee[se].seq);continue}tt||Ke(ee[se].callback,Ut,ee[se].combo)}var He=Ut.type=="keypress"&&le;Ut.type==Ae&&!ge(Ge)&&!He&&Re(be),le=tt&&Ut.type=="keydown"};function gt(Ge){typeof Ge.which!="number"&&(Ge.which=Ge.keyCode);var bt=R(Ge);if(bt){if(Ge.type=="keyup"&&Z===bt){Z=!1;return}k.handleKey(bt,$(Ge),Ge)}}function Nt(){clearTimeout(V),V=setTimeout(Re,1e3)}function Vt(Ge,bt,Ut,ee){te[Ge]=0;function se(Lt){return function(){Ae=Lt,++te[Ge],Nt()}}function be(Lt){Ke(Ut,Lt,Ge),ee!=="keyup"&&(Z=R(Lt)),setTimeout(Re,10)}for(var Ue=0;Ue<bt.length;++Ue){var tt=Ue+1===bt.length,He=tt?be:se(ee||L(bt[Ue+1]).action);Ct(bt[Ue],He,ee,Ge,Ue)}}function Ct(Ge,bt,Ut,ee,se){k._directMap[Ge+":"+Ut]=bt,Ge=Ge.replace(/\s+/g," ");var be=Ge.split(" "),Ue;if(be.length>1){Vt(Ge,be,bt,Ut);return}Ue=L(Ge,Ut),k._callbacks[Ue.key]=k._callbacks[Ue.key]||[],_e(Ue.key,Ue.modifiers,{type:Ue.action},ee,Ge,se),k._callbacks[Ue.key][ee?"unshift":"push"]({callback:bt,modifiers:Ue.modifiers,action:Ue.action,seq:ee,level:se,combo:Ge})}k._bindMultiple=function(Ge,bt,Ut){for(var ee=0;ee<Ge.length;++ee)Ct(Ge[ee],bt,Ut)},N(D,"keypress",gt),N(D,"keydown",gt),N(D,"keyup",gt)}U.prototype.bind=function(D,k,te){var V=this;return D=D instanceof Array?D:[D],V._bindMultiple.call(V,D,k,te),V},U.prototype.unbind=function(D,k){var te=this;return te.bind.call(te,D,function(){},k)},U.prototype.trigger=function(D,k){var te=this;return te._directMap[D+":"+k]&&te._directMap[D+":"+k]({},D),te},U.prototype.reset=function(){var D=this;return D._callbacks={},D._directMap={},D},U.prototype.stopCallback=function(D,k){var te=this;if((" "+k.className+" ").indexOf(" mousetrap ")>-1||Q(k,te.target))return!1;if("composedPath"in D&&typeof D.composedPath=="function"){var V=D.composedPath()[0];V!==D.target&&(k=V)}return k.tagName=="INPUT"||k.tagName=="SELECT"||k.tagName=="TEXTAREA"||k.isContentEditable},U.prototype.handleKey=function(){var D=this;return D._handleKey.apply(D,arguments)},U.addKeycodes=function(D){for(var k in D)D.hasOwnProperty(k)&&(g[k]=D[k]);T=null},U.init=function(){var D=U(h);for(var k in D)k.charAt(0)!=="_"&&(U[k]=function(te){return function(){return D[te].apply(D,arguments)}}(k))},U.init(),c.Mousetrap=U,i.exports&&(i.exports=U),l=function(){return U}.call(u,o,u,i),l!==p&&(i.exports=l)})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(i,u,o){var l=o(36),c=o(37),h=o(32),p=o(39),g=o(67);i.exports=l?Object.defineProperties:function(S,x){h(S);for(var T=p(x),w=g(x),N=w.length,R=0,I;N>R;)c.f(S,I=w[R++],T[I]);return S}},function(i,u,o){var l=o(7),c=o(35),h=o(28),p=o(33),g=l.TypeError;i.exports=function(y,S){var x,T;if(S==="string"&&h(x=y.toString)&&!p(T=c(x,y))||h(x=y.valueOf)&&!p(T=c(x,y))||S!=="string"&&h(x=y.toString)&&!p(T=c(x,y)))return T;throw g("Can't convert object to primitive value")}},function(i,u,o){var l=o(7),c=o(28),h=o(92),p=l.WeakMap;i.exports=c(p)&&/native code/.test(h(p))},function(i,u,o){var l=o(136).IteratorPrototype,c=o(54),h=o(72),p=o(74),g=o(71),y=function(){return this};i.exports=function(S,x,T,w){var N=x+" Iterator";return S.prototype=c(l,{next:h(+!w,T)}),p(S,N,!1,!0),g[N]=y,S}},function(i,u,o){var l=o(7),c=o(28),h=l.String,p=l.TypeError;i.exports=function(g){if(typeof g=="object"||c(g))return g;throw p("Can't set "+h(g)+" as a prototype")}},function(i,u,o){var l=o(16),c=o(7),h=o(15),p=o(95),g=o(44),y=o(138),S=o(114),x=o(117),T=o(28),w=o(33),N=o(18),R=o(118),I=o(74),$=o(143);i.exports=function(W,he,ge){var ye=W.indexOf("Map")!==-1,ce=W.indexOf("Weak")!==-1,xe=ye?"set":"add",L=c[W],Q=L&&L.prototype,U=L,D={},k=function(_e){var Ke=h(Q[_e]);g(Q,_e,_e=="add"?function(Nt){return Ke(this,Nt===0?0:Nt),this}:_e=="delete"?function(gt){return ce&&!w(gt)?!1:Ke(this,gt===0?0:gt)}:_e=="get"?function(Nt){return ce&&!w(Nt)?void 0:Ke(this,Nt===0?0:Nt)}:_e=="has"?function(Nt){return ce&&!w(Nt)?!1:Ke(this,Nt===0?0:Nt)}:function(Nt,Vt){return Ke(this,Nt===0?0:Nt,Vt),this})},te=p(W,!T(L)||!(ce||Q.forEach&&!N(function(){new L().entries().next()})));if(te)U=ge.getConstructor(he,W,ye,xe),y.enable();else if(p(W,!0)){var V=new U,Z=V[xe](ce?{}:-0,1)!=V,le=N(function(){V.has(1)}),Ae=R(function(_e){new L(_e)}),Re=!ce&&N(function(){for(var _e=new L,Ke=5;Ke--;)_e[xe](Ke,Ke);return!_e.has(-0)});Ae||(U=he(function(_e,Ke){x(_e,Q);var gt=$(new L,_e,U);return Ke!=null&&S(Ke,gt[xe],{that:gt,AS_ENTRIES:ye}),gt}),U.prototype=Q,Q.constructor=U),(le||Re)&&(k("delete"),k("has"),ye&&k("get")),(Re||Z)&&k(xe),ce&&Q.clear&&delete Q.clear}return D[W]=U,l({global:!0,forced:U!=L},D),I(U,W),ce||ge.setStrong(U,W,ye),U}},function(i,u,o){var l=o(18),c=o(33),h=o(50),p=o(175),g=Object.isExtensible,y=l(function(){});i.exports=y||p?function(x){return!c(x)||p&&h(x)=="ArrayBuffer"?!1:g?g(x):!0}:g},function(i,u,o){var l=o(18);i.exports=l(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(i,u,o){var l=o(18);i.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(i,u,o){var l=o(37).f,c=o(54),h=o(144),p=o(62),g=o(117),y=o(114),S=o(111),x=o(145),T=o(36),w=o(138).fastKey,N=o(56),R=N.set,I=N.getterFor;i.exports={getConstructor:function($,W,he,ge){var ye=$(function(U,D){g(U,ce),R(U,{type:W,index:c(null),first:void 0,last:void 0,size:0}),T||(U.size=0),D!=null&&y(D,U[ge],{that:U,AS_ENTRIES:he})}),ce=ye.prototype,xe=I(W),L=function(U,D,k){var te=xe(U),V=Q(U,D),Z,le;return V?V.value=k:(te.last=V={index:le=w(D,!0),key:D,value:k,previous:Z=te.last,next:void 0,removed:!1},te.first||(te.first=V),Z&&(Z.next=V),T?te.size++:U.size++,le!=="F"&&(te.index[le]=V)),U},Q=function(U,D){var k=xe(U),te=w(D),V;if(te!=="F")return k.index[te];for(V=k.first;V;V=V.next)if(V.key==D)return V};return h(ce,{clear:function(){for(var D=this,k=xe(D),te=k.index,V=k.first;V;)V.removed=!0,V.previous&&(V.previous=V.previous.next=void 0),delete te[V.index],V=V.next;k.first=k.last=void 0,T?k.size=0:D.size=0},delete:function(U){var D=this,k=xe(D),te=Q(D,U);if(te){var V=te.next,Z=te.previous;delete k.index[te.index],te.removed=!0,Z&&(Z.next=V),V&&(V.previous=Z),k.first==te&&(k.first=V),k.last==te&&(k.last=Z),T?k.size--:D.size--}return!!te},forEach:function(D){for(var k=xe(this),te=p(D,arguments.length>1?arguments[1]:void 0),V;V=V?V.next:k.first;)for(te(V.value,V.key,this);V&&V.removed;)V=V.previous},has:function(D){return!!Q(this,D)}}),h(ce,he?{get:function(D){var k=Q(this,D);return k&&k.value},set:function(D,k){return L(this,D===0?0:D,k)}}:{add:function(D){return L(this,D=D===0?0:D,D)}}),T&&l(ce,"size",{get:function(){return xe(this).size}}),ye},setStrong:function($,W,he){var ge=W+" Iterator",ye=I(W),ce=I(ge);S($,W,function(xe,L){R(this,{type:ge,target:xe,state:ye(xe),kind:L,last:void 0})},function(){for(var xe=ce(this),L=xe.kind,Q=xe.last;Q&&Q.removed;)Q=Q.previous;return!xe.target||!(xe.last=Q=Q?Q.next:xe.state.first)?(xe.target=void 0,{value:void 0,done:!0}):L=="keys"?{value:Q.key,done:!1}:L=="values"?{value:Q.value,done:!1}:{value:[Q.key,Q.value],done:!1}},he?"entries":"values",!he,!0),x(W)}}},function(i,u,o){var l=o(116),c=o(98);i.exports=l?{}.toString:function(){return"[object "+c(this)+"]"}},function(i,u,o){var l=o(75).forEach,c=o(120),h=c("forEach");i.exports=h?[].forEach:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}},function(i,u,o){var l=o(7),c=o(99),h=o(100),p=o(33),g=o(27),y=g("species"),S=l.Array;i.exports=function(x){var T;return c(x)&&(T=x.constructor,h(T)&&(T===S||c(T.prototype))?T=void 0:p(T)&&(T=T[y],T===null&&(T=void 0))),T===void 0?S:T}},function(i,u,o){var l=o(7);i.exports=l},function(i,u,o){var l=o(7),c=o(62),h=o(35),p=o(38),g=o(183),y=o(140),S=o(100),x=o(43),T=o(61),w=o(141),N=o(115),R=l.Array;i.exports=function($){var W=p($),he=S(this),ge=arguments.length,ye=ge>1?arguments[1]:void 0,ce=ye!==void 0;ce&&(ye=c(ye,ge>2?arguments[2]:void 0));var xe=N(W),L=0,Q,U,D,k,te,V;if(xe&&!(this==R&&y(xe)))for(k=w(W,xe),te=k.next,U=he?new this:[];!(D=h(te,k)).done;L++)V=ce?g(k,ye,[D.value,L],!0):D.value,T(U,L,V);else for(Q=x(W),U=he?new this(Q):R(Q);Q>L;L++)V=ce?ye(W[L],L):W[L],T(U,L,V);return U.length=L,U}},function(i,u,o){var l=o(32),c=o(142);i.exports=function(h,p,g,y){try{return y?p(l(g)[0],g[1]):p(g)}catch(S){c(h,"throw",S)}}},function(i,u,o){var l=o(32);i.exports=function(){var c=l(this),h="";return c.global&&(h+="g"),c.ignoreCase&&(h+="i"),c.multiline&&(h+="m"),c.dotAll&&(h+="s"),c.unicode&&(h+="u"),c.sticky&&(h+="y"),h}},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp;i.exports=l(function(){var p=h(".","s");return!(p.dotAll&&p.exec(`
`)&&p.flags==="s")})},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp;i.exports=l(function(){var p=h("(?<a>b)","g");return p.exec("b").groups.a!=="b"||"b".replace(p,"$<a>c")!=="bc"})},function(i,u,o){var l=o(16),c=o(15),h=o(55),p=o(38),g=o(43),y=o(40),S=o(18),x=o(188),T=o(120),w=o(189),N=o(190),R=o(66),I=o(191),$=[],W=c($.sort),he=c($.push),ge=S(function(){$.sort(void 0)}),ye=S(function(){$.sort(null)}),ce=T("sort"),xe=!S(function(){if(R)return R<70;if(!(w&&w>3)){if(N)return!0;if(I)return I<603;var U="",D,k,te,V;for(D=65;D<76;D++){switch(k=String.fromCharCode(D),D){case 66:case 69:case 70:case 72:te=3;break;case 68:case 71:te=4;break;default:te=2}for(V=0;V<47;V++)$.push({k:k+V,v:te})}for($.sort(function(Z,le){return le.v-Z.v}),V=0;V<$.length;V++)k=$[V].k.charAt(0),U.charAt(U.length-1)!==k&&(U+=k);return U!=="DGBEFHACIJK"}}),L=ge||!ye||!ce||!xe,Q=function(U){return function(D,k){return k===void 0?-1:D===void 0?1:U!==void 0?+U(D,k)||0:y(D)>y(k)?1:-1}};l({target:"Array",proto:!0,forced:L},{sort:function(D){D!==void 0&&h(D);var k=p(this);if(xe)return D===void 0?W(k):W(k,D);var te=[],V=g(k),Z,le;for(le=0;le<V;le++)le in k&&he(te,k[le]);for(x(te,Q(D)),Z=te.length,le=0;le<Z;)k[le]=te[le++];for(;le<V;)delete k[le++];return k}})},function(i,u,o){var l=o(113),c=Math.floor,h=function(y,S){var x=y.length,T=c(x/2);return x<8?p(y,S):g(y,h(l(y,0,T),S),h(l(y,T),S),S)},p=function(y,S){for(var x=y.length,T=1,w,N;T<x;){for(N=T,w=y[T];N&&S(y[N-1],w)>0;)y[N]=y[--N];N!==T++&&(y[N]=w)}return y},g=function(y,S,x,T){for(var w=S.length,N=x.length,R=0,I=0;R<w||I<N;)y[R+I]=R<w&&I<N?T(S[R],x[I])<=0?S[R++]:x[I++]:R<w?S[R++]:x[I++];return y};i.exports=h},function(i,u,o){var l=o(53),c=l.match(/firefox\/(\d+)/i);i.exports=!!c&&+c[1]},function(i,u,o){var l=o(53);i.exports=/MSIE|Trident/.test(l)},function(i,u,o){var l=o(53),c=l.match(/AppleWebKit\/(\d+)\./);i.exports=!!c&&+c[1]},function(i,u,o){var l=o(16),c=o(75).find,h=o(83),p="find",g=!0;p in[]&&Array(1)[p](function(){g=!1}),l({target:"Array",proto:!0,forced:g},{find:function(S){return c(this,S,arguments.length>1?arguments[1]:void 0)}}),h(p)},function(i,u,o){var l=o(7),c=o(154),h=l.TypeError;i.exports=function(p){if(c(p))throw h("The method doesn't accept regular expressions");return p}},function(i,u,o){var l=o(27),c=l("match");i.exports=function(h){var p=/./;try{"/./"[h](p)}catch{try{return p[c]=!1,"/./"[h](p)}catch{}}return!1}},function(i,u,o){var l=o(94).PROPER,c=o(18),h=o(160),p="";i.exports=function(g){return c(function(){return!!h[g]()||p[g]()!==p||l&&h[g].name!==g})}},function(i,u,o){var l=o(15);i.exports=l(1 .valueOf)},function(i,u,o){var l=o(15),c=o(38),h=Math.floor,p=l("".charAt),g=l("".replace),y=l("".slice),S=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;i.exports=function(T,w,N,R,I,$){var W=N+T.length,he=R.length,ge=x;return I!==void 0&&(I=c(I),ge=S),g($,ge,function(ye,ce){var xe;switch(p(ce,0)){case"$":return"$";case"&":return T;case"`":return y(w,0,N);case"'":return y(w,W);case"<":xe=I[y(ce,1,-1)];break;default:var L=+ce;if(L===0)return ye;if(L>he){var Q=h(L/10);return Q===0?ye:Q<=he?R[Q-1]===void 0?p(ce,1):R[Q-1]+p(ce,1):ye}xe=R[L-1]}return xe===void 0?"":xe})}},function(i,u,o){var l=o(36),c=o(15),h=o(35),p=o(18),g=o(67),y=o(112),S=o(93),x=o(38),T=o(81),w=Object.assign,N=Object.defineProperty,R=c([].concat);i.exports=!w||p(function(){if(l&&w({b:1},w(N({},"a",{enumerable:!0,get:function(){N(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var I={},$={},W=Symbol(),he="abcdefghijklmnopqrst";return I[W]=7,he.split("").forEach(function(ge){$[ge]=ge}),w({},I)[W]!=7||g(w({},$)).join("")!=he})?function($,W){for(var he=x($),ge=arguments.length,ye=1,ce=y.f,xe=S.f;ge>ye;)for(var L=T(arguments[ye++]),Q=ce?R(g(L),ce(L)):g(L),U=Q.length,D=0,k;U>D;)k=Q[D++],(!l||h(xe,L,k))&&(he[k]=L[k]);return he}:w},function(i,u,o){var l=o(7),c=o(15),h=o(55),p=o(33),g=o(34),y=o(101),S=l.Function,x=c([].concat),T=c([].join),w={},N=function(R,I,$){if(!g(w,I)){for(var W=[],he=0;he<I;he++)W[he]="a["+he+"]";w[I]=S("C,a","return new C("+T(W,",")+")")}return w[I](R,$)};i.exports=S.bind||function(I){var $=h(this),W=$.prototype,he=y(arguments,1),ge=function(){var ce=x(he,y(arguments));return this instanceof ge?N($,ce.length,ce):$.apply(I,ce)};return p(W)&&(ge.prototype=W),ge}},function(i,u,o){var l=o(34);i.exports=function(c){return c!==void 0&&(l(c,"value")||l(c,"writable"))}},function(i,u,o){var l=o(15),c=o(45),h=o(40),p=/"/g,g=l("".replace);i.exports=function(y,S,x,T){var w=h(c(y)),N="<"+S;return x!==""&&(N+=" "+x+'="'+g(h(T),p,"&quot;")+'"'),N+">"+w+"</"+S+">"}},function(i,u,o){var l=o(18);i.exports=function(c){return l(function(){var h=""[c]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},function(i,u,o){var l=o(16),c=Math.hypot,h=Math.abs,p=Math.sqrt,g=!!c&&c(1/0,NaN)!==1/0;l({target:"Math",stat:!0,forced:g},{hypot:function(S,x){for(var T=0,w=0,N=arguments.length,R=0,I,$;w<N;)I=h(arguments[w++]),R<I?($=R/I,T=T*$*$+1,R=I):I>0?($=I/R,T+=$*$):T+=I;return R===1/0?1/0:R*p(T)}})},function(i,u,o){var l=o(16),c=o(65),h=o(7),p=o(46),g=o(35),y=o(205),S=o(44),x=o(144),T=o(97),w=o(74),N=o(145),R=o(55),I=o(28),$=o(33),W=o(117),he=o(92),ge=o(114),ye=o(118),ce=o(156),xe=o(162).set,L=o(206),Q=o(209),U=o(210),D=o(164),k=o(211),te=o(56),V=o(95),Z=o(27),le=o(212),Ae=o(126),Re=o(66),_e=Z("species"),Ke="Promise",gt=te.getterFor(Ke),Nt=te.set,Vt=te.getterFor(Ke),Ct=y&&y.prototype,Ge=y,bt=Ct,Ut=h.TypeError,ee=h.document,se=h.process,be=D.f,Ue=be,tt=!!(ee&&ee.createEvent&&h.dispatchEvent),He=I(h.PromiseRejectionEvent),Lt="unhandledrejection",nr="rejectionhandled",tr=0,Jt=1,rt=2,Er=1,ur=2,Xt=!1,j,Qr,Rr,kr,Be=V(Ke,function(){var Mt=he(Ge),or=Mt!==String(Ge);if(!or&&Re===66||c&&!bt.finally)return!0;if(Re>=51&&/native code/.test(Mt))return!1;var vr=new Ge(function(re){re(1)}),fr=function(re){re(function(){},function(){})},_r=vr.constructor={};return _r[_e]=fr,Xt=vr.then(function(){})instanceof fr,Xt?!or&&le&&!He:!0}),Xr=Be||!ye(function(Mt){Ge.all(Mt).catch(function(){})}),zr=function(Mt){var or;return $(Mt)&&I(or=Mt.then)?or:!1},Dr=function(Mt,or){if(!Mt.notified){Mt.notified=!0;var vr=Mt.reactions;L(function(){for(var fr=Mt.value,_r=Mt.state==Jt,re=0;vr.length>re;){var Oe=vr[re++],we=_r?Oe.ok:Oe.fail,Ne=Oe.resolve,ht=Oe.reject,_t=Oe.domain,Kt,Br,Cn;try{we?(_r||(Mt.rejection===ur&&to(Mt),Mt.rejection=Er),we===!0?Kt=fr:(_t&&_t.enter(),Kt=we(fr),_t&&(_t.exit(),Cn=!0)),Kt===Oe.promise?ht(Ut("Promise-chain cycle")):(Br=zr(Kt))?g(Br,Kt,Ne,ht):Ne(Kt)):ht(fr)}catch(Ln){_t&&!Cn&&_t.exit(),ht(Ln)}}Mt.reactions=[],Mt.notified=!1,or&&!Mt.rejection&&eo(Mt)})}},On=function(Mt,or,vr){var fr,_r;tt?(fr=ee.createEvent("Event"),fr.promise=or,fr.reason=vr,fr.initEvent(Mt,!1,!0),h.dispatchEvent(fr)):fr={promise:or,reason:vr},!He&&(_r=h["on"+Mt])?_r(fr):Mt===Lt&&U("Unhandled promise rejection",vr)},eo=function(Mt){g(xe,h,function(){var or=Mt.facade,vr=Mt.value,fr=Dn(Mt),_r;if(fr&&(_r=k(function(){Ae?se.emit("unhandledRejection",vr,or):On(Lt,or,vr)}),Mt.rejection=Ae||Dn(Mt)?ur:Er,_r.error))throw _r.value})},Dn=function(Mt){return Mt.rejection!==Er&&!Mt.parent},to=function(Mt){g(xe,h,function(){var or=Mt.facade;Ae?se.emit("rejectionHandled",or):On(nr,or,Mt.value)})},Qt=function(Mt,or,vr){return function(fr){Mt(or,fr,vr)}},$r=function(Mt,or,vr){Mt.done||(Mt.done=!0,vr&&(Mt=vr),Mt.value=or,Mt.state=rt,Dr(Mt,!0))},In=function(Mt,or,vr){if(!Mt.done){Mt.done=!0,vr&&(Mt=vr);try{if(Mt.facade===or)throw Ut("Promise can't be resolved itself");var fr=zr(or);fr?L(function(){var _r={done:!1};try{g(fr,or,Qt(In,_r,Mt),Qt($r,_r,Mt))}catch(re){$r(_r,re,Mt)}}):(Mt.value=or,Mt.state=Jt,Dr(Mt,!1))}catch(_r){$r({done:!1},_r,Mt)}}};if(Be&&(Ge=function(or){W(this,bt),R(or),g(j,this);var vr=gt(this);try{or(Qt(In,vr),Qt($r,vr))}catch(fr){$r(vr,fr)}},bt=Ge.prototype,j=function(or){Nt(this,{type:Ke,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:tr,value:void 0})},j.prototype=x(bt,{then:function(or,vr){var fr=Vt(this),_r=fr.reactions,re=be(ce(this,Ge));return re.ok=I(or)?or:!0,re.fail=I(vr)&&vr,re.domain=Ae?se.domain:void 0,fr.parent=!0,_r[_r.length]=re,fr.state!=tr&&Dr(fr,!1),re.promise},catch:function(Mt){return this.then(void 0,Mt)}}),Qr=function(){var Mt=new j,or=gt(Mt);this.promise=Mt,this.resolve=Qt(In,or),this.reject=Qt($r,or)},D.f=be=function(Mt){return Mt===Ge||Mt===Rr?new Qr(Mt):Ue(Mt)},!c&&I(y)&&Ct!==Object.prototype)){kr=Ct.then,Xt||(S(Ct,"then",function(or,vr){var fr=this;return new Ge(function(_r,re){g(kr,fr,_r,re)}).then(or,vr)},{unsafe:!0}),S(Ct,"catch",bt.catch,{unsafe:!0}));try{delete Ct.constructor}catch{}T&&T(Ct,bt)}l({global:!0,wrap:!0,forced:Be},{Promise:Ge}),w(Ge,Ke,!1,!0),N(Ke),Rr=p(Ke),l({target:Ke,stat:!0,forced:Be},{reject:function(or){var vr=be(this);return g(vr.reject,void 0,or),vr.promise}}),l({target:Ke,stat:!0,forced:c||Be},{resolve:function(or){return Q(c&&this===Rr?Ge:this,or)}}),l({target:Ke,stat:!0,forced:Xr},{all:function(or){var vr=this,fr=be(vr),_r=fr.resolve,re=fr.reject,Oe=k(function(){var we=R(vr.resolve),Ne=[],ht=0,_t=1;ge(or,function(Kt){var Br=ht++,Cn=!1;_t++,g(we,vr,Kt).then(function(Ln){Cn||(Cn=!0,Ne[Br]=Ln,--_t||_r(Ne))},re)}),--_t||_r(Ne)});return Oe.error&&re(Oe.value),fr.promise},race:function(or){var vr=this,fr=be(vr),_r=fr.reject,re=k(function(){var Oe=R(vr.resolve);ge(or,function(we){g(Oe,vr,we).then(fr.resolve,_r)})});return re.error&&_r(re.value),fr.promise}})},function(i,u,o){var l=o(7);i.exports=l.Promise},function(i,u,o){var l=o(7),c=o(62),h=o(51).f,p=o(162).set,g=o(163),y=o(207),S=o(208),x=o(126),T=l.MutationObserver||l.WebKitMutationObserver,w=l.document,N=l.process,R=l.Promise,I=h(l,"queueMicrotask"),$=I&&I.value,W,he,ge,ye,ce,xe,L,Q;$||(W=function(){var U,D;for(x&&(U=N.domain)&&U.exit();he;){D=he.fn,he=he.next;try{D()}catch(k){throw he?ye():ge=void 0,k}}ge=void 0,U&&U.enter()},!g&&!x&&!S&&T&&w?(ce=!0,xe=w.createTextNode(""),new T(W).observe(xe,{characterData:!0}),ye=function(){xe.data=ce=!ce}):!y&&R&&R.resolve?(L=R.resolve(void 0),L.constructor=R,Q=c(L.then,L),ye=function(){Q(W)}):x?ye=function(){N.nextTick(W)}:(p=c(p,l),ye=function(){p(W)})),i.exports=$||function(U){var D={fn:U,next:void 0};ge&&(ge.next=D),he||(he=D,ye()),ge=D}},function(i,u,o){var l=o(53),c=o(7);i.exports=/ipad|iphone|ipod/i.test(l)&&c.Pebble!==void 0},function(i,u,o){var l=o(53);i.exports=/web0s(?!.*chrome)/i.test(l)},function(i,u,o){var l=o(32),c=o(33),h=o(164);i.exports=function(p,g){if(l(p),c(g)&&g.constructor===p)return g;var y=h.f(p),S=y.resolve;return S(g),y.promise}},function(i,u,o){var l=o(7);i.exports=function(c,h){var p=l.console;p&&p.error&&(arguments.length==1?p.error(c):p.error(c,h))}},function(i,u){i.exports=function(o){try{return{error:!1,value:o()}}catch(l){return{error:!0,value:l}}}},function(i,u){i.exports=typeof window=="object"},function(i,u,o){var l=o(36),c=o(15),h=o(67),p=o(39),g=o(93).f,y=c(g),S=c([].push),x=function(T){return function(w){for(var N=p(w),R=h(N),I=R.length,$=0,W=[],he;I>$;)he=R[$++],(!l||y(N,he))&&S(W,T?[he,N[he]]:N[he]);return W}};i.exports={entries:x(!0),values:x(!1)}},function(i,u,o){var l=o(38),c=o(68),h=o(43);i.exports=function(g){for(var y=l(this),S=h(y),x=arguments.length,T=c(x>1?arguments[1]:void 0,S),w=x>2?arguments[2]:void 0,N=w===void 0?S:c(w,S);N>T;)y[T++]=g;return y}},function(i,u,o){o.r(u),o.d(u,"observer",function(){return ui}),o.d(u,"LogicFlow",function(){return Qm}),o.d(u,"h",function(){return Be.g}),o.d(u,"LogicFlowUtil",function(){return l}),o.d(u,"BaseNode",function(){return ba}),o.d(u,"RectNode",function(){return cm}),o.d(u,"CircleNode",function(){return pm}),o.d(u,"PolygonNode",function(){return gm}),o.d(u,"DiamondNode",function(){return Em}),o.d(u,"EllipseNode",function(){return xm}),o.d(u,"TextNode",function(){return Am}),o.d(u,"HtmlNode",function(){return wm}),o.d(u,"BaseEdge",function(){return pc}),o.d(u,"LineEdge",function(){return Bm}),o.d(u,"PolylineEdge",function(){return km}),o.d(u,"BezierEdge",function(){return Hm}),o.d(u,"Arrow",function(){return M2}),o.d(u,"BaseEdgeModel",function(){return hg}),o.d(u,"BezierEdgeModel",function(){return Gg}),o.d(u,"LineEdgeModel",function(){return yg}),o.d(u,"PolylineEdgeModel",function(){return bg}),o.d(u,"BaseNodeModel",function(){return ga}),o.d(u,"CircleNodeModel",function(){return zg}),o.d(u,"DiamondNodeModel",function(){return $g}),o.d(u,"EllipseNodeModel",function(){return Wg}),o.d(u,"PolygonNodeModel",function(){return Zg}),o.d(u,"RectNodeModel",function(){return qg}),o.d(u,"TextNodeModel",function(){return tm}),o.d(u,"HtmlNodeModel",function(){return nm}),o.d(u,"EditConfigModel",function(){return nt}),o.d(u,"GraphModel",function(){return H0}),o.d(u,"SnaplineModel",function(){return HS}),o.d(u,"Keyboard",function(){return Kx}),o.d(u,"get",function(){return xO}),o.d(u,"defaults",function(){return TO}),o.d(u,"ElementState",function(){return ct}),o.d(u,"ModelType",function(){return Ze}),o.d(u,"ElementType",function(){return Ve}),o.d(u,"EventType",function(){return ze});var l={};o.r(l),o.d(l,"createUuid",function(){return ds}),o.d(l,"refreshGraphId",function(){return j1}),o.d(l,"createDrag",function(){return zN}),o.d(l,"StepDrag",function(){return pa});var c=o(0),h=o(10);if(!h.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var p=o(42),g=Object(p.b)("observerBatching");function y(e){e()}function S(e){e||(e=y),Object(c.n)({reactionScheduler:e}),Object(p.a)()[g]=!0}function x(e){return Object(c.t)(e)}function T(e){var r={cleanAt:Date.now()+w,reaction:e};return r}var w=1e4,N=1e4,R=new Set,I;function $(){I===void 0&&(I=setTimeout(ge,N))}function W(e){R.add(e),$()}function he(e){R.delete(e)}function ge(){I=void 0;var e=Date.now();R.forEach(function(r){var t=r.current;t&&e>=t.cleanAt&&(t.reaction.dispose(),r.current=null,R.delete(r))}),R.size>0&&$()}var ye=!1,ce=[];function xe(e){return function(){ye?ce.push(e):e()}}function L(e){ye=!0,ce=[];try{var r=e();ye=!1;var t=ce.length>0?ce:void 0;return h.d.useLayoutEffect(function(){t&&t.forEach(function(s){return s()})},[t]),r}finally{ye=!1}}var Q={};function U(e){return"observer"+e}function D(e,r,t){r===void 0&&(r="observed"),t===void 0&&(t=Q);var s=t.useForceUpdate||p.d,f=s(),d=xe(f),v=h.d.useRef(null);if(!v.current){var b=new c.c(U(r),function(){O.mounted?d():(b.dispose(),v.current=null)}),O=T(b);v.current=O,W(v)}var P=v.current.reaction;return h.d.useDebugValue(P,x),h.d.useEffect(function(){return he(v),v.current?v.current.mounted=!0:(v.current={reaction:new c.c(U(r),function(){d()}),cleanAt:1/0},d()),function(){v.current.reaction.dispose(),v.current=null}},[]),L(function(){var M,F;if(P.track(function(){try{M=e()}catch(Y){F=Y}}),F)throw F;return M})}var k=function(){return k=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(e[f]=r[f])}return e},k.apply(this,arguments)};function te(e,r){var t=k({forwardRef:!1},r),s=e.displayName||e.name,f=function(v,b){return D(function(){return e(v,b)},s)};f.displayName=s;var d;return t.forwardRef?d=Object(h.f)(Object(h.e)(f)):d=Object(h.f)(f),Z(e,d),d.displayName=s,d}var V={$$typeof:!0,render:!0,compare:!0,type:!0};function Z(e,r){Object.keys(e).forEach(function(t){V[t]||Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}function le(e){var r=e.children,t=e.render,s=r||t;return typeof s!="function"?null:D(s)}le.propTypes={children:Ae,render:Ae},le.displayName="Observer";function Ae(e,r,t,s,f){var d=r==="children"?"render":"children",v=typeof e[r]=="function",b=typeof e[d]=="function";return v&&b?new Error("MobX Observer: Do not use children and render in the same time in`"+t):v||b?null:new Error("Invalid prop `"+f+"` of type `"+typeof e[r]+"` supplied to `"+t+"`, expected `function`.")}S(h.g);var Re=0;function _e(e){if(typeof Symbol=="function")return Symbol(e);var r="__$mobx-react "+e+" ("+Re+")";return Re++,r}var Ke={};function gt(e){return Ke[e]||(Ke[e]=_e(e)),Ke[e]}function Nt(e,r){if(Vt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),s=Object.keys(r);if(t.length!==s.length)return!1;for(var f=0;f<t.length;f++)if(!Object.hasOwnProperty.call(r,t[f])||!Vt(e[t[f]],r[t[f]]))return!1;return!0}function Vt(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Ct(e,r,t){Object.hasOwnProperty.call(e,r)?e[r]=t:Object.defineProperty(e,r,{enumerable:!1,configurable:!0,writable:!0,value:t})}var Ge=gt("patchMixins"),bt=gt("patchedDefinition");function Ut(e,r){var t=e[Ge]=e[Ge]||{},s=t[r]=t[r]||{};return s.locks=s.locks||0,s.methods=s.methods||[],s}function ee(e,r){for(var t=this,s=arguments.length,f=new Array(s>2?s-2:0),d=2;d<s;d++)f[d-2]=arguments[d];r.locks++;try{var v;return e!=null&&(v=e.apply(this,f)),v}finally{r.locks--,r.locks===0&&r.methods.forEach(function(b){b.apply(t,f)})}}function se(e,r){var t=function(){for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];ee.call.apply(ee,[this,e,r].concat(d))};return t}function be(e,r,t){var s=Ut(e,r);s.methods.indexOf(t)<0&&s.methods.push(t);var f=Object.getOwnPropertyDescriptor(e,r);if(!(f&&f[bt])){var d=e[r],v=Ue(e,r,f?f.enumerable:void 0,s,d);Object.defineProperty(e,r,v)}}function Ue(e,r,t,s,f){var d,v=se(f,s);return d={},d[bt]=!0,d.get=function(){return v},d.set=function(O){if(this===e)v=se(O,s);else{var P=Ue(this,r,t,s,O);Object.defineProperty(this,r,P)}},d.configurable=!0,d.enumerable=t,d}var tt=c.a||"$mobx",He=gt("isMobXReactObserver"),Lt=gt("isUnmounted"),nr=gt("skipRender"),tr=gt("isForcingUpdate");function Jt(e){var r=e.prototype;if(e[He]){var t=rt(r);console.warn("The provided component class ("+t+`) 
                has already been declared as an observer component.`)}else e[He]=!0;if(r.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==h.b){if(!r.shouldComponentUpdate)r.shouldComponentUpdate=ur;else if(r.shouldComponentUpdate!==ur)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}Xt(r,"props"),Xt(r,"state");var s=r.render;return r.render=function(){return Er.call(this,s)},be(r,"componentWillUnmount",function(){var f;if((f=this.render[tt])===null||f===void 0||f.dispose(),this[Lt]=!0,!this.render[tt]){var d=rt(this);console.warn("The reactive render of an observer class component ("+d+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),e}function rt(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function Er(e){var r=this;Ct(this,nr,!1),Ct(this,tr,!1);var t=rt(this),s=e.bind(this),f=!1,d=new c.c(t+".render()",function(){if(!f&&(f=!0,r[Lt]!==!0)){var b=!0;try{Ct(r,tr,!0),r[nr]||h.a.prototype.forceUpdate.call(r),b=!1}finally{Ct(r,tr,!1),b&&d.dispose()}}});d.reactComponent=this,v[tt]=d,this.render=v;function v(){f=!1;var b=void 0,O=void 0;if(d.track(function(){try{O=Object(c.d)(!1,s)}catch(P){b=P}}),b)throw b;return O}return v.call(this)}function ur(e,r){return this.state!==r?!0:!Nt(this.props,e)}function Xt(e,r){var t=gt("reactProp_"+r+"_valueHolder"),s=gt("reactProp_"+r+"_atomHolder");function f(){return this[s]||Ct(this,s,Object(c.o)("reactive "+r)),this[s]}Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){var v=!1;return c.f&&c.e&&(v=Object(c.f)(!0)),f.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(v),this[t]},set:function(v){!this[tr]&&!Nt(this[t],v)?(Ct(this,t,v),Ct(this,nr,!0),f.call(this).reportChanged(),Ct(this,nr,!1)):Ct(this,t,v)}})}var j=typeof Symbol=="function"&&Symbol.for,Qr=j?Symbol.for("react.forward_ref"):typeof h.e=="function"&&Object(h.e)(function(e){return null}).$$typeof,Rr=j?Symbol.for("react.memo"):typeof h.f=="function"&&Object(h.f)(function(e){return null}).$$typeof;function kr(e){if(e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),Rr&&e.$$typeof===Rr)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Qr&&e.$$typeof===Qr){var r=e.render;if(typeof r!="function")throw new Error("render property of ForwardRef was not a function");return Object(h.e)(function(){var s=arguments;return Object(h.c)(le,null,function(){return r.apply(void 0,s)})})}return typeof e=="function"&&(!e.prototype||!e.prototype.render)&&!e.isReactClass&&!Object.prototype.isPrototypeOf.call(h.a,e)?te(e):Jt(e)}if(!h.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Be=o(1);o(3),o(60),o(2),o(6),o(4),o(11),o(41),o(23),o(20),o(5),o(22),o(21),o(24),o(8),o(9),o(17),o(25),o(19),o(29),o(187),o(192),o(103),o(152),o(153);function Xr(e,r){for(var t=-1,s=e==null?0:e.length,f=Array(s);++t<s;)f[t]=r(e[t],t,e);return f}var zr=Xr;function Dr(){this.__data__=[],this.size=0}var On=Dr;function eo(e,r){return e===r||e!==e&&r!==r}var Dn=eo;function to(e,r){for(var t=e.length;t--;)if(Dn(e[t][0],r))return t;return-1}var Qt=to,$r=Array.prototype,In=$r.splice;function Mt(e){var r=this.__data__,t=Qt(r,e);if(t<0)return!1;var s=r.length-1;return t==s?r.pop():In.call(r,t,1),--this.size,!0}var or=Mt;function vr(e){var r=this.__data__,t=Qt(r,e);return t<0?void 0:r[t][1]}var fr=vr;function _r(e){return Qt(this.__data__,e)>-1}var re=_r;function Oe(e,r){var t=this.__data__,s=Qt(t,e);return s<0?(++this.size,t.push([e,r])):t[s][1]=r,this}var we=Oe;function Ne(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Ne.prototype.clear=On,Ne.prototype.delete=or,Ne.prototype.get=fr,Ne.prototype.has=re,Ne.prototype.set=we;var ht=Ne;function _t(){this.__data__=new ht,this.size=0}var Kt=_t;function Br(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var Cn=Br;function Ln(e){return this.__data__.get(e)}var Xi=Ln;function No(e){return this.__data__.has(e)}var Eu=No,ro=o(31),Ps=ro.a.Symbol,jr=Ps,ci=Object.prototype,$i=ci.hasOwnProperty,Yo=ci.toString,Vi=jr?jr.toStringTag:void 0;function di(e){var r=$i.call(e,Vi),t=e[Vi];try{e[Vi]=void 0;var s=!0}catch{}var f=Yo.call(e);return s&&(r?e[Vi]=t:delete e[Vi]),f}var hi=di,Ma=Object.prototype,Wl=Ma.toString;function Ra(e){return Wl.call(e)}var Da=Ra,Ou="[object Null]",Wt="[object Undefined]",Su=jr?jr.toStringTag:void 0;function Yl(e){return e==null?e===void 0?Wt:Ou:Su&&Su in Object(e)?hi(e):Da(e)}var Mo=Yl;function xu(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Kr=xu,no="[object AsyncFunction]",Tu="[object Function]",Kl="[object GeneratorFunction]",Zl="[object Proxy]";function Jl(e){if(!Kr(e))return!1;var r=Mo(e);return r==Tu||r==Kl||r==no||r==Zl}var Ia=Jl,Au=ro.a["__core-js_shared__"],Ko=Au,_s=function(){var e=/[^.]+$/.exec(Ko&&Ko.keys&&Ko.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ws(e){return!!_s&&_s in e}var Wi=ws,Pu=Function.prototype,Ca=Pu.toString;function Ql(e){if(e!=null){try{return Ca.call(e)}catch{}try{return e+""}catch{}}return""}var Zr=Ql,_u=/[\\^$.*+?()[\]{}|]/g,ql=/^\[object .+?Constructor\]$/,wu=Function.prototype,Nu=Object.prototype,ef=wu.toString,Mu=Nu.hasOwnProperty,tf=RegExp("^"+ef.call(Mu).replace(_u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oo(e){if(!Kr(e)||Wi(e))return!1;var r=Ia(e)?tf:ql;return r.test(Zr(e))}var un=oo;function La(e,r){return e==null?void 0:e[r]}var rf=La;function Ns(e,r){var t=rf(e,r);return un(t)?t:void 0}var co=Ns,Ru=co(ro.a,"Map"),pi=Ru,nf=co(Object,"create"),Zo=nf;function of(){this.__data__=Zo?Zo(null):{},this.size=0}var Ms=of;function Du(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var af=Du,Rs="__lodash_hash_undefined__",Iu=Object.prototype,Cu=Iu.hasOwnProperty;function Lu(e){var r=this.__data__;if(Zo){var t=r[e];return t===Rs?void 0:t}return Cu.call(r,e)?r[e]:void 0}var Ro=Lu,sf=Object.prototype,ju=sf.hasOwnProperty;function ja(e){var r=this.__data__;return Zo?r[e]!==void 0:ju.call(r,e)}var Ba=ja,Ds="__lodash_hash_undefined__";function Bu(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Zo&&r===void 0?Ds:r,this}var uf=Bu;function Do(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Do.prototype.clear=Ms,Do.prototype.delete=af,Do.prototype.get=Ro,Do.prototype.has=Ba,Do.prototype.set=uf;var Io=Do;function Gn(){this.size=0,this.__data__={hash:new Io,map:new(pi||ht),string:new Io}}var Fa=Gn;function Fu(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Is=Fu;function lf(e,r){var t=e.__data__;return Is(r)?t[typeof r=="string"?"string":"hash"]:t.map}var Ga=lf;function ff(e){var r=Ga(this,e).delete(e);return this.size-=r?1:0,r}var cf=ff;function vi(e){return Ga(this,e).get(e)}var Co=vi;function df(e){return Ga(this,e).has(e)}var yi=df;function hf(e,r){var t=Ga(this,e),s=t.size;return t.set(e,r),this.size+=t.size==s?0:1,this}var ho=hf;function po(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}po.prototype.clear=Fa,po.prototype.delete=cf,po.prototype.get=Co,po.prototype.has=yi,po.prototype.set=ho;var Yi=po,gi=200;function Ki(e,r){var t=this.__data__;if(t instanceof ht){var s=t.__data__;if(!pi||s.length<gi-1)return s.push([e,r]),this.size=++t.size,this;t=this.__data__=new Yi(s)}return t.set(e,r),this.size=t.size,this}var xo=Ki;function Jo(e){var r=this.__data__=new ht(e);this.size=r.size}Jo.prototype.clear=Kt,Jo.prototype.delete=Cn,Jo.prototype.get=Xi,Jo.prototype.has=Eu,Jo.prototype.set=xo;var $n=Jo,Vn="__lodash_hash_undefined__";function Zi(e){return this.__data__.set(e,Vn),this}var vo=Zi;function io(e){return this.__data__.has(e)}var mi=io;function jn(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Yi;++r<t;)this.add(e[r])}jn.prototype.add=jn.prototype.push=vo,jn.prototype.has=mi;var pf=jn;function Gu(e,r){for(var t=-1,s=e==null?0:e.length;++t<s;)if(r(e[t],t,e))return!0;return!1}var qr=Gu;function Cs(e,r){return e.has(r)}var To=Cs,yo=1,ao=2;function Ji(e,r,t,s,f,d){var v=t&yo,b=e.length,O=r.length;if(b!=O&&!(v&&O>b))return!1;var P=d.get(e),M=d.get(r);if(P&&M)return P==r&&M==e;var F=-1,Y=!0,ne=t&ao?new pf:void 0;for(d.set(e,r),d.set(r,e);++F<b;){var ve=e[F],Le=r[F];if(s)var Ie=v?s(Le,ve,F,r,e,d):s(ve,Le,F,e,r,d);if(Ie!==void 0){if(Ie)continue;Y=!1;break}if(ne){if(!qr(r,function(Fe,Tt){if(!To(ne,Tt)&&(ve===Fe||f(ve,Fe,t,s,d)))return ne.push(Tt)})){Y=!1;break}}else if(!(ve===Le||f(ve,Le,t,s,d))){Y=!1;break}}return d.delete(e),d.delete(r),Y}var Lo=Ji,Qi=ro.a.Uint8Array,dn=Qi;function bi(e){var r=-1,t=Array(e.size);return e.forEach(function(s,f){t[++r]=[f,s]}),t}var ka=bi;function Ls(e){var r=-1,t=Array(e.size);return e.forEach(function(s){t[++r]=s}),t}var Bn=Ls,js=1,Bs=2,ku="[object Boolean]",Uu="[object Date]",vf="[object Error]",Ua="[object Map]",za="[object Number]",Fs="[object RegExp]",kn="[object Set]",Nn="[object String]",Qo="[object Symbol]",Gs="[object ArrayBuffer]",Ha="[object DataView]",Ei=jr?jr.prototype:void 0,Oi=Ei?Ei.valueOf:void 0;function ks(e,r,t,s,f,d,v){switch(t){case Ha:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Gs:return!(e.byteLength!=r.byteLength||!d(new dn(e),new dn(r)));case ku:case Uu:case za:return Dn(+e,+r);case vf:return e.name==r.name&&e.message==r.message;case Fs:case Nn:return e==r+"";case Ua:var b=ka;case kn:var O=s&js;if(b||(b=Bn),e.size!=r.size&&!O)return!1;var P=v.get(e);if(P)return P==r;s|=Bs,v.set(e,r);var M=Lo(b(e),b(r),s,f,d,v);return v.delete(e),M;case Qo:if(Oi)return Oi.call(e)==Oi.call(r)}return!1}var zu=ks;function qi(e,r){for(var t=-1,s=r.length,f=e.length;++t<s;)e[f+t]=r[t];return e}var Xa=qi,Us=Array.isArray,m=Us;function E(e,r,t){var s=r(e);return m(e)?s:Xa(s,t(e))}var A=E;function B(e,r){for(var t=-1,s=e==null?0:e.length,f=0,d=[];++t<s;){var v=e[t];r(v,t,e)&&(d[f++]=v)}return d}var J=B;function pe(){return[]}var Xe=pe,Et=Object.prototype,Yt=Et.propertyIsEnumerable,Tr=Object.getOwnPropertySymbols,wr=Tr?function(e){return e==null?[]:(e=Object(e),J(Tr(e),function(r){return Yt.call(e,r)}))}:Xe,Ur=wr;function Hr(e,r){for(var t=-1,s=Array(e);++t<e;)s[t]=r(t);return s}var nn=Hr;function Sn(e){return e!=null&&typeof e=="object"}var Vr=Sn,Wn="[object Arguments]";function qo(e){return Vr(e)&&Mo(e)==Wn}var $a=qo,Hu=Object.prototype,ea=Hu.hasOwnProperty,Xu=Hu.propertyIsEnumerable,zs=$a(function(){return arguments}())?$a:function(e){return Vr(e)&&ea.call(e,"callee")&&!Xu.call(e,"callee")},Si=zs,ei=o(48),ry=9007199254740991,ny=/^(?:0|[1-9]\d*)$/;function oy(e,r){var t=typeof e;return r=r??ry,!!r&&(t=="number"||t!="symbol"&&ny.test(e))&&e>-1&&e%1==0&&e<r}var Hs=oy,Xs=9007199254740991;function iy(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xs}var Va=iy,go="[object Arguments]",Wa="[object Array]",Wc="[object Boolean]",Yc="[object Date]",Kc="[object Error]",Zc="[object Function]",Jc="[object Map]",Qc="[object Number]",ay="[object Object]",Ya="[object RegExp]",xn="[object Set]",qc="[object String]",ed="[object WeakMap]",ta="[object ArrayBuffer]",td="[object DataView]",rd="[object Float32Array]",sy="[object Float64Array]",uy="[object Int8Array]",ly="[object Int16Array]",fy="[object Int32Array]",yf="[object Uint8Array]",nd="[object Uint8ClampedArray]",cy="[object Uint16Array]",od="[object Uint32Array]",Jr={};Jr[rd]=Jr[sy]=Jr[uy]=Jr[ly]=Jr[fy]=Jr[yf]=Jr[nd]=Jr[cy]=Jr[od]=!0,Jr[go]=Jr[Wa]=Jr[ta]=Jr[Wc]=Jr[td]=Jr[Yc]=Jr[Kc]=Jr[Zc]=Jr[Jc]=Jr[Qc]=Jr[ay]=Jr[Ya]=Jr[xn]=Jr[qc]=Jr[ed]=!1;function dy(e){return Vr(e)&&Va(e.length)&&!!Jr[Mo(e)]}var $u=dy;function hy(e){return function(r){return e(r)}}var jo=hy,ti=o(49),gf=ti.a&&ti.a.isTypedArray,id=gf?jo(gf):$u,Vu=id,ad=Object.prototype,sd=ad.hasOwnProperty;function ud(e,r){var t=m(e),s=!t&&Si(e),f=!t&&!s&&Object(ei.a)(e),d=!t&&!s&&!f&&Vu(e),v=t||s||f||d,b=v?nn(e.length,String):[],O=b.length;for(var P in e)(r||sd.call(e,P))&&!(v&&(P=="length"||f&&(P=="offset"||P=="parent")||d&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||Hs(P,O)))&&b.push(P);return b}var mf=ud,ld=Object.prototype;function fd(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||ld;return e===t}var Yn=fd;function cd(e,r){return function(t){return e(r(t))}}var dd=cd,ri=dd(Object.keys,Object),bf=ri,ra=Object.prototype,Wu=ra.hasOwnProperty;function hd(e){if(!Yn(e))return bf(e);var r=[];for(var t in Object(e))Wu.call(e,t)&&t!="constructor"&&r.push(t);return r}var pd=hd;function vd(e){return e!=null&&Va(e.length)&&!Ia(e)}var xi=vd;function yd(e){return xi(e)?mf(e):pd(e)}var Ka=yd;function py(e){return A(e,Ka,Ur)}var Ef=py,vy=1,yy=Object.prototype,gy=yy.hasOwnProperty;function my(e,r,t,s,f,d){var v=t&vy,b=Ef(e),O=b.length,P=Ef(r),M=P.length;if(O!=M&&!v)return!1;for(var F=O;F--;){var Y=b[F];if(!(v?Y in r:gy.call(r,Y)))return!1}var ne=d.get(e),ve=d.get(r);if(ne&&ve)return ne==r&&ve==e;var Le=!0;d.set(e,r),d.set(r,e);for(var Ie=v;++F<O;){Y=b[F];var Fe=e[Y],Tt=r[Y];if(s)var Dt=v?s(Tt,Fe,Y,r,e,d):s(Fe,Tt,Y,e,r,d);if(!(Dt===void 0?Fe===Tt||f(Fe,Tt,t,s,d):Dt)){Le=!1;break}Ie||(Ie=Y=="constructor")}if(Le&&!Ie){var ut=e.constructor,Ft=r.constructor;ut!=Ft&&"constructor"in e&&"constructor"in r&&!(typeof ut=="function"&&ut instanceof ut&&typeof Ft=="function"&&Ft instanceof Ft)&&(Le=!1)}return d.delete(e),d.delete(r),Le}var gd=my,md=co(ro.a,"DataView"),Of=md,by=co(ro.a,"Promise"),$s=by,Yu=co(ro.a,"Set"),Sf=Yu,Ey=co(ro.a,"WeakMap"),xf=Ey,bd="[object Map]",Oy="[object Object]",Tf="[object Promise]",Ed="[object Set]",Od="[object WeakMap]",Sd="[object DataView]",Sy=Zr(Of),xy=Zr(pi),Za=Zr($s),Ty=Zr(Sf),Ay=Zr(xf),Ti=Mo;(Of&&Ti(new Of(new ArrayBuffer(1)))!=Sd||pi&&Ti(new pi)!=bd||$s&&Ti($s.resolve())!=Tf||Sf&&Ti(new Sf)!=Ed||xf&&Ti(new xf)!=Od)&&(Ti=function(e){var r=Mo(e),t=r==Oy?e.constructor:void 0,s=t?Zr(t):"";if(s)switch(s){case Sy:return Sd;case xy:return bd;case Za:return Tf;case Ty:return Ed;case Ay:return Od}return r});var na=Ti,Py=1,Af="[object Arguments]",xd="[object Array]",Ku="[object Object]",_y=Object.prototype,Td=_y.hasOwnProperty;function wy(e,r,t,s,f,d){var v=m(e),b=m(r),O=v?xd:na(e),P=b?xd:na(r);O=O==Af?Ku:O,P=P==Af?Ku:P;var M=O==Ku,F=P==Ku,Y=O==P;if(Y&&Object(ei.a)(e)){if(!Object(ei.a)(r))return!1;v=!0,M=!1}if(Y&&!M)return d||(d=new $n),v||Vu(e)?Lo(e,r,t,s,f,d):zu(e,r,O,t,s,f,d);if(!(t&Py)){var ne=M&&Td.call(e,"__wrapped__"),ve=F&&Td.call(r,"__wrapped__");if(ne||ve){var Le=ne?e.value():e,Ie=ve?r.value():r;return d||(d=new $n),f(Le,Ie,t,s,d)}}return Y?(d||(d=new $n),gd(e,r,t,s,f,d)):!1}var Vs=wy;function Ad(e,r,t,s,f){return e===r?!0:e==null||r==null||!Vr(e)&&!Vr(r)?e!==e&&r!==r:Vs(e,r,t,s,Ad,f)}var Ja=Ad,Ny=1,Qa=2;function qa(e,r,t,s){var f=t.length,d=f,v=!s;if(e==null)return!d;for(e=Object(e);f--;){var b=t[f];if(v&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++f<d;){b=t[f];var O=b[0],P=e[O],M=b[1];if(v&&b[2]){if(P===void 0&&!(O in e))return!1}else{var F=new $n;if(s)var Y=s(P,M,O,e,r,F);if(!(Y===void 0?Ja(M,P,Ny|Qa,s,F):Y))return!1}}return!0}var My=qa;function es(e){return e===e&&!Kr(e)}var Pf=es;function ts(e){for(var r=Ka(e),t=r.length;t--;){var s=r[t],f=e[s];r[t]=[s,f,Pf(f)]}return r}var _f=ts;function wf(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}var Zu=wf;function Nf(e){var r=_f(e);return r.length==1&&r[0][2]?Zu(r[0][0],r[0][1]):function(t){return t===e||My(t,e,r)}}var Mf=Nf,Ju="[object Symbol]";function Pd(e){return typeof e=="symbol"||Vr(e)&&Mo(e)==Ju}var Ws=Pd,_d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wd=/^\w*$/;function Nd(e,r){if(m(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Ws(e)?!0:wd.test(e)||!_d.test(e)||r!=null&&e in Object(r)}var Ys=Nd,Rf="Expected a function";function Qu(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Rf);var t=function(){var s=arguments,f=r?r.apply(this,s):s[0],d=t.cache;if(d.has(f))return d.get(f);var v=e.apply(this,s);return t.cache=d.set(f,v)||d,v};return t.cache=new(Qu.Cache||Yi),t}Qu.Cache=Yi;var Md=Qu,Rd=500;function Dd(e){var r=Md(e,function(s){return t.size===Rd&&t.clear(),s}),t=r.cache;return r}var Df=Dd,Id=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cd=/\\(\\)?/g,If=Df(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Id,function(t,s,f,d){r.push(f?d.replace(Cd,"$1"):s||t)}),r}),Cf=If,Ld=1/0,qu=jr?jr.prototype:void 0,Lf=qu?qu.toString:void 0;function jf(e){if(typeof e=="string")return e;if(m(e))return zr(e,jf)+"";if(Ws(e))return Lf?Lf.call(e):"";var r=e+"";return r=="0"&&1/e==-Ld?"-0":r}var Bf=jf;function jd(e){return e==null?"":Bf(e)}var Bd=jd;function Ff(e,r){return m(e)?e:Ys(e,r)?[e]:Cf(Bd(e))}var rs=Ff,Ks=1/0;function Fd(e){if(typeof e=="string"||Ws(e))return e;var r=e+"";return r=="0"&&1/e==-Ks?"-0":r}var Ai=Fd;function ni(e,r){r=rs(r,e);for(var t=0,s=r.length;e!=null&&t<s;)e=e[Ai(r[t++])];return t&&t==s?e:void 0}var oa=ni;function ia(e,r,t){var s=e==null?void 0:oa(e,r);return s===void 0?t:s}var ns=ia;function Zs(e,r){return e!=null&&r in Object(e)}var aa=Zs;function sa(e,r,t){r=rs(r,e);for(var s=-1,f=r.length,d=!1;++s<f;){var v=Ai(r[s]);if(!(d=e!=null&&t(e,v)))break;e=e[v]}return d||++s!=f?d:(f=e==null?0:e.length,!!f&&Va(f)&&Hs(v,f)&&(m(e)||Si(e)))}var ua=sa;function el(e,r){return e!=null&&ua(e,r,aa)}var Js=el,Qs=1,Gf=2;function kf(e,r){return Ys(e)&&Pf(r)?Zu(Ai(e),r):function(t){var s=ns(t,e);return s===void 0&&s===r?Js(t,e):Ja(r,s,Qs|Gf)}}var os=kf;function is(e){return e}var Uf=is;function Ry(e){return function(r){return r==null?void 0:r[e]}}var Gd=Ry;function kd(e){return function(r){return oa(r,e)}}var Ud=kd;function Dy(e){return Ys(e)?Gd(Ai(e)):Ud(e)}var as=Dy;function Iy(e){return typeof e=="function"?e:e==null?Uf:typeof e=="object"?m(e)?os(e[0],e[1]):Mf(e):as(e)}var Cy=Iy;function Ly(e){return function(r,t,s){for(var f=-1,d=Object(r),v=s(r),b=v.length;b--;){var O=v[e?b:++f];if(t(d[O],O,d)===!1)break}return r}}var zd=Ly,jy=zd(),Hd=jy;function By(e,r){return e&&Hd(e,r,Ka)}var Fy=By;function Gy(e,r){return function(t,s){if(t==null)return t;if(!xi(t))return e(t,s);for(var f=t.length,d=r?f:-1,v=Object(t);(r?d--:++d<f)&&s(v[d],d,v)!==!1;);return t}}var ky=Gy,Uy=ky(Fy),zy=Uy;function Hy(e,r){var t=-1,s=xi(e)?Array(e.length):[];return zy(e,function(f,d,v){s[++t]=r(f,d,v)}),s}var Xy=Hy;function zf(e,r){var t=m(e)?zr:Xy;return t(e,Cy(r))}var la=zf,tl=function(){try{var e=co(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fa=tl;function Hf(e,r,t){r=="__proto__"&&fa?fa(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var ss=Hf,rl=Object.prototype,nl=rl.hasOwnProperty;function Xf(e,r,t){var s=e[r];(!(nl.call(e,r)&&Dn(s,t))||t===void 0&&!(r in e))&&ss(e,r,t)}var ca=Xf;function ol(e,r,t,s){var f=!t;t||(t={});for(var d=-1,v=r.length;++d<v;){var b=r[d],O=s?s(t[b],e[b],b,t,e):void 0;O===void 0&&(O=e[b]),f?ss(t,b,O):ca(t,b,O)}return t}var oi=ol;function qs(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var eu=qs,us=Math.max;function tu(e,r,t){return r=us(r===void 0?e.length-1:r,0),function(){for(var s=arguments,f=-1,d=us(s.length-r,0),v=Array(d);++f<d;)v[f]=s[r+f];f=-1;for(var b=Array(r+1);++f<r;)b[f]=s[f];return b[r]=t(v),eu(e,this,b)}}var ls=tu;function Xd(e){return function(){return e}}var ru=Xd,da=fa?function(e,r){return fa(e,"toString",{configurable:!0,enumerable:!1,value:ru(r),writable:!0})}:Uf,$d=da,$f=800,$y=16,Vy=Date.now;function Wy(e){var r=0,t=0;return function(){var s=Vy(),f=$y-(s-t);if(t=s,f>0){if(++r>=$f)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}var Pi=Wy,Vd=Pi($d),Vf=Vd;function Wd(e,r){return Vf(ls(e,r,Uf),e+"")}var Yy=Wd;function Yd(e,r,t){if(!Kr(t))return!1;var s=typeof r;return(s=="number"?xi(t)&&Hs(r,t.length):s=="string"&&r in t)?Dn(t[r],e):!1}var Ky=Yd;function Bo(e){return Yy(function(r,t){var s=-1,f=t.length,d=f>1?t[f-1]:void 0,v=f>2?t[2]:void 0;for(d=e.length>3&&typeof d=="function"?(f--,d):void 0,v&&Ky(t[0],t[1],v)&&(d=f<3?void 0:d,f=1),r=Object(r);++s<f;){var b=t[s];b&&e(r,b,s,d)}return r})}var Wf=Bo,fs=Object.prototype,_i=fs.hasOwnProperty,Kd=Wf(function(e,r){if(Yn(r)||xi(r)){oi(r,Ka(r),e);return}for(var t in r)_i.call(r,t)&&ca(e,t,r[t])}),Mn=Kd;function il(e,r,t,s){if(!Kr(e))return e;r=rs(r,e);for(var f=-1,d=r.length,v=d-1,b=e;b!=null&&++f<d;){var O=Ai(r[f]),P=t;if(O==="__proto__"||O==="constructor"||O==="prototype")return e;if(f!=v){var M=b[O];P=s?s(M,O,b):void 0,P===void 0&&(P=Kr(M)?M:Hs(r[f+1])?[]:{})}ca(b,O,P),b=b[O]}return e}var Zd=il;function Un(e,r,t){for(var s=-1,f=r.length,d={};++s<f;){var v=r[s],b=oa(e,v);t(b,v)&&Zd(d,rs(v,e),b)}return d}var wi=Un;function ln(e,r){return wi(e,r,function(t,s){return Js(e,s)})}var Kn=ln,Yf=jr?jr.isConcatSpreadable:void 0;function Zy(e){return m(e)||Si(e)||!!(Yf&&e&&e[Yf])}var Jy=Zy;function Jd(e,r,t,s,f){var d=-1,v=e.length;for(t||(t=Jy),f||(f=[]);++d<v;){var b=e[d];r>0&&t(b)?r>1?Jd(b,r-1,t,s,f):Xa(f,b):s||(f[f.length]=b)}return f}var Qy=Jd;function Qd(e){var r=e==null?0:e.length;return r?Qy(e,1):[]}var qy=Qd;function eg(e){return Vf(ls(e,void 0,qy),e+"")}var tg=eg,rg=tg(function(e,r){return e==null?{}:Kn(e,r)}),nu=rg,on,Kf,Zf,qd,eh,Jf,th,_,G,q,Ce,Je,De,ke,at,lt,vt,ft;function it(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function St(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function st(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ot(e,r,t){return r&&st(e.prototype,r),t&&st(e,t),e}function Ee(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Me(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var yt={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},xt=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],nt=(on=function(){function e(r){St(this,e),it(this,"isSilentMode",Kf,this),it(this,"stopZoomGraph",Zf,this),it(this,"stopScrollGraph",qd,this),it(this,"stopMoveGraph",eh,this),it(this,"adjustEdge",Jf,this),it(this,"adjustEdgeMiddle",th,this),it(this,"adjustEdgeStartAndEnd",_,this),it(this,"adjustNodePosition",G,this),it(this,"hideAnchors",q,this),it(this,"hoverOutline",Ce,this),it(this,"nodeSelectedOutline",Je,this),it(this,"edgeSelectedOutline",De,this),it(this,"nodeTextEdit",ke,this),it(this,"edgeTextEdit",at,this),it(this,"nodeTextDraggable",lt,this),it(this,"edgeTextDraggable",vt,this),it(this,"autoExpand",ft,this),Ee(this,"multipleSelectKey",""),Ee(this,"defaultConfig",{}),Mn(this,this.getConfigDetail(r))}return Ot(e,[{key:"updateEditConfig",value:function(t){var s=this.getConfigDetail(t);Mn(this,s)}},{key:"getConfigDetail",value:function(t){var s=t.isSilentMode,f=t.textEdit,d={};if(s===!1&&Mn(d,this.defaultConfig),s===!0){var v=nu(yt,xt);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Mn(d,v)}f===!1&&Mn(d,{nodeTextEdit:!1,edgeTextEdit:!1});var b=nu(t,xt);return Mn(d,b)}},{key:"getConfig",value:function(){return nu(this,xt)}}]),e}(),Kf=Me(on.prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zf=Me(on.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qd=Me(on.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eh=Me(on.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jf=Me(on.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),th=Me(on.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=Me(on.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Me(on.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=Me(on.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ce=Me(on.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Je=Me(on.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),De=Me(on.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ke=Me(on.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),at=Me(on.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lt=Me(on.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vt=Me(on.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ft=Me(on.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Me(on.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(on.prototype,"updateEditConfig"),on.prototype),on);o(63);var ct;(function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(ct||(ct={}));var ot;(function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"})(ot||(ot={}));var Ze;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Ze||(Ze={}));var Ve;(function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"})(Ve||(Ve={}));var ze;(function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"})(ze||(ze={}));var At;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(At||(At={}));var ir=9999,mt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(mt||(mt={}));var et,qe,rr,cr,Gt,mr,ar,yr;function Ar(e,r){return Wr(e)||hn(e,r)||vn(e,r)||fn()}function fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vn(e,r){if(e){if(typeof e=="string")return Or(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Or(e,r)}}function Or(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function hn(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function Wr(e){if(Array.isArray(e))return e}function Yr(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function pn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function cn(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function bn(e,r,t){return r&&cn(e.prototype,r),t&&cn(e,t),e}function yn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Fr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var dr=(et=function(){function e(r){pn(this,e),yn(this,"MINI_SCALE_SIZE",.2),yn(this,"MAX_SCALE_SIZE",16),Yr(this,"SCALE_X",qe,this),Yr(this,"SKEW_Y",rr,this),Yr(this,"SKEW_X",cr,this),Yr(this,"SCALE_Y",Gt,this),Yr(this,"TRANSLATE_X",mr,this),Yr(this,"TRANSLATE_Y",ar,this),Yr(this,"ZOOM_SIZE",yr,this),yn(this,"eventCenter",void 0),this.eventCenter=r}return bn(e,[{key:"setZoomMiniSize",value:function(t){this.MINI_SCALE_SIZE=t}},{key:"setZoomMaxSize",value:function(t){this.MAX_SCALE_SIZE=t}},{key:"HtmlPointToCanvasPoint",value:function(t){var s=Ar(t,2),f=s[0],d=s[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(d-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(t){var s=Ar(t,2),f=s[0],d=s[1];return[f*this.SCALE_X+this.TRANSLATE_X,d*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(t,s,f){var d=Ar(t,2),v=d[0],b=d[1];return[v+s/this.SCALE_X,b+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(t,s){return[t/this.SCALE_X,s/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}}},{key:"zoom",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,d=this.SCALE_Y;return t===!0?(f+=this.ZOOM_SIZE,d+=this.ZOOM_SIZE):t===!1?(f-=this.ZOOM_SIZE,d-=this.ZOOM_SIZE):typeof t=="number"&&(f=t,d=t),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(s&&(this.TRANSLATE_X-=(f-this.SCALE_X)*s[0],this.TRANSLATE_Y-=(d-this.SCALE_Y)*s[1]),this.SCALE_X=f,this.SCALE_Y=d,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))}},{key:"emitGraphTransform",value:function(t){this.eventCenter.emit(ze.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(t,s){this.TRANSLATE_X+=t,this.TRANSLATE_Y+=s,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(t,s,f,d){var v=this.CanvasPointToHtmlPoint([t,s]),b=Ar(v,2),O=b[0],P=b[1],M=f/2-O,F=d/2-P;this.TRANSLATE_X+=M,this.TRANSLATE_Y+=F,this.emitGraphTransform("focusOn")}}]),e}(),qe=Fr(et.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),rr=Fr(et.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cr=Fr(et.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gt=Fr(et.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),mr=Fr(et.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ar=Fr(et.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yr=Fr(et.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Fr(et.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"zoom"),et.prototype),Fr(et.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"resetZoom"),et.prototype),Fr(et.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"translate"),et.prototype),Fr(et.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"focusOn"),et.prototype),et);function Tn(e,r){for(var t=-1,s=e==null?0:e.length;++t<s&&r(e[t],t,e)!==!1;);return e}var Ir=Tn;function qt(e,r){return e&&oi(r,Ka(r),e)}var Sr=qt;function Pr(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var an=Pr,Fo=Object.prototype,ha=Fo.hasOwnProperty;function K(e){if(!Kr(e))return an(e);var r=Yn(e),t=[];for(var s in e)s=="constructor"&&(r||!ha.call(e,s))||t.push(s);return t}var je=K;function Pe(e){return xi(e)?mf(e,!0):je(e)}var Rt=Pe;function br(e,r){return e&&oi(r,Rt(r),e)}var H=br,C=o(106);function ie(e,r){var t=-1,s=e.length;for(r||(r=Array(s));++t<s;)r[t]=e[t];return r}var me=ie;function Se(e,r){return oi(e,Ur(e),r)}var ue=Se,ae=dd(Object.getPrototypeOf,Object),fe=ae,X=Object.getOwnPropertySymbols,oe=X?function(e){for(var r=[];e;)Xa(r,Ur(e)),e=fe(e);return r}:Xe,z=oe;function de(e,r){return oi(e,z(e),r)}var Te=de;function Ye(e){return A(e,Rt,z)}var Qe=Ye,$e=Object.prototype,pt=$e.hasOwnProperty;function Ht(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&pt.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var hr=Ht;function kt(e){var r=new e.constructor(e.byteLength);return new dn(r).set(new dn(e)),r}var Zt=kt;function lr(e,r){var t=r?Zt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var Nr=lr,en=/\w*$/;function zn(e){var r=new e.constructor(e.source,en.exec(e));return r.lastIndex=e.lastIndex,r}var Qf=zn,so=jr?jr.prototype:void 0,qf=so?so.valueOf:void 0;function Ao(e){return qf?Object(qf.call(e)):{}}var rh=Ao;function X_(e,r){var t=r?Zt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var uE=X_,$_="[object Boolean]",V_="[object Date]",W_="[object Map]",Y_="[object Number]",K_="[object RegExp]",Z_="[object Set]",J_="[object String]",Q_="[object Symbol]",q_="[object ArrayBuffer]",ew="[object DataView]",tw="[object Float32Array]",rw="[object Float64Array]",nw="[object Int8Array]",ow="[object Int16Array]",iw="[object Int32Array]",aw="[object Uint8Array]",sw="[object Uint8ClampedArray]",uw="[object Uint16Array]",lw="[object Uint32Array]";function fw(e,r,t){var s=e.constructor;switch(r){case q_:return Zt(e);case $_:case V_:return new s(+e);case ew:return Nr(e,t);case tw:case rw:case nw:case ow:case iw:case aw:case sw:case uw:case lw:return uE(e,t);case W_:return new s;case Y_:case J_:return new s(e);case K_:return Qf(e);case Z_:return new s;case Q_:return rh(e)}}var cw=fw,lE=Object.create,dw=function(){function e(){}return function(r){if(!Kr(r))return{};if(lE)return lE(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),hw=dw;function pw(e){return typeof e.constructor=="function"&&!Yn(e)?hw(fe(e)):{}}var fE=pw,vw="[object Map]";function yw(e){return Vr(e)&&na(e)==vw}var gw=yw,cE=ti.a&&ti.a.isMap,mw=cE?jo(cE):gw,bw=mw,Ew="[object Set]";function Ow(e){return Vr(e)&&na(e)==Ew}var Sw=Ow,dE=ti.a&&ti.a.isSet,xw=dE?jo(dE):Sw,Tw=xw,Aw=1,Pw=2,_w=4,hE="[object Arguments]",ww="[object Array]",Nw="[object Boolean]",Mw="[object Date]",Rw="[object Error]",pE="[object Function]",Dw="[object GeneratorFunction]",Iw="[object Map]",Cw="[object Number]",vE="[object Object]",Lw="[object RegExp]",jw="[object Set]",Bw="[object String]",Fw="[object Symbol]",Gw="[object WeakMap]",kw="[object ArrayBuffer]",Uw="[object DataView]",zw="[object Float32Array]",Hw="[object Float64Array]",Xw="[object Int8Array]",$w="[object Int16Array]",Vw="[object Int32Array]",Ww="[object Uint8Array]",Yw="[object Uint8ClampedArray]",Kw="[object Uint16Array]",Zw="[object Uint32Array]",tn={};tn[hE]=tn[ww]=tn[kw]=tn[Uw]=tn[Nw]=tn[Mw]=tn[zw]=tn[Hw]=tn[Xw]=tn[$w]=tn[Vw]=tn[Iw]=tn[Cw]=tn[vE]=tn[Lw]=tn[jw]=tn[Bw]=tn[Fw]=tn[Ww]=tn[Yw]=tn[Kw]=tn[Zw]=!0,tn[Rw]=tn[pE]=tn[Gw]=!1;function nh(e,r,t,s,f,d){var v,b=r&Aw,O=r&Pw,P=r&_w;if(t&&(v=f?t(e,s,f,d):t(e)),v!==void 0)return v;if(!Kr(e))return e;var M=m(e);if(M){if(v=hr(e),!b)return me(e,v)}else{var F=na(e),Y=F==pE||F==Dw;if(Object(ei.a)(e))return Object(C.a)(e,b);if(F==vE||F==hE||Y&&!f){if(v=O||Y?{}:fE(e),!b)return O?Te(e,H(v,e)):ue(e,Sr(v,e))}else{if(!tn[F])return f?e:{};v=cw(e,F,b)}}d||(d=new $n);var ne=d.get(e);if(ne)return ne;d.set(e,v),Tw(e)?e.forEach(function(Ie){v.add(nh(Ie,r,t,Ie,e,d))}):bw(e)&&e.forEach(function(Ie,Fe){v.set(Fe,nh(Ie,r,t,Fe,e,d))});var ve=P?O?Qe:Ef:O?Rt:Ka,Le=M?void 0:ve(e);return Ir(Le||e,function(Ie,Fe){Le&&(Fe=Ie,Ie=e[Fe]),ca(v,Fe,nh(Ie,r,t,Fe,e,d))}),v}var Jw=nh,Qw=1,qw=4;function e1(e){return Jw(e,Qw|qw)}var gn=e1;function t1(e,r,t){(t!==void 0&&!Dn(e[r],t)||t===void 0&&!(r in e))&&ss(e,r,t)}var ng=t1;function r1(e){return Vr(e)&&xi(e)}var n1=r1,o1="[object Object]",i1=Function.prototype,a1=Object.prototype,yE=i1.toString,s1=a1.hasOwnProperty,u1=yE.call(Object);function l1(e){if(!Vr(e)||Mo(e)!=o1)return!1;var r=fe(e);if(r===null)return!0;var t=s1.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&yE.call(t)==u1}var f1=l1;function c1(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var og=c1;function d1(e){return oi(e,Rt(e))}var h1=d1;function p1(e,r,t,s,f,d,v){var b=og(e,t),O=og(r,t),P=v.get(O);if(P){ng(e,t,P);return}var M=d?d(b,O,t+"",e,r,v):void 0,F=M===void 0;if(F){var Y=m(O),ne=!Y&&Object(ei.a)(O),ve=!Y&&!ne&&Vu(O);M=O,Y||ne||ve?m(b)?M=b:n1(b)?M=me(b):ne?(F=!1,M=Object(C.a)(O,!0)):ve?(F=!1,M=uE(O,!0)):M=[]:f1(O)||Si(O)?(M=b,Si(b)?M=h1(b):(!Kr(b)||Ia(b))&&(M=fE(O))):F=!1}F&&(v.set(O,M),f(M,O,s,d,v),v.delete(O)),ng(e,t,M)}var v1=p1;function gE(e,r,t,s,f){e!==r&&Hd(r,function(d,v){if(f||(f=new $n),Kr(d))v1(e,r,v,t,gE,s,f);else{var b=s?s(og(e,v),d,v+"",e,r,f):void 0;b===void 0&&(b=d),ng(e,v,b)}},Rt)}var y1=gE,g1=Wf(function(e,r,t){y1(e,r,t)}),mE=g1,m1={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},bE=function(r){var t=gn(m1);return r&&(t=mE(t,r)),t};o(78),o(158);function b1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function EE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function E1(e,r,t){return r&&EE(e.prototype,r),t&&EE(e,t),e}function O1(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var S1="*",x1=function(){function e(){b1(this,e),O1(this,"_events",{})}return E1(e,[{key:"on",value:function(t,s,f){var d=this;return t==null||t.split(",").forEach(function(v){v=v.trim(),d._events[v]||(d._events[v]=[]),d._events[v].push({callback:s,once:!!f})}),this}},{key:"once",value:function(t,s){var f=this;t==null||t.split(",").forEach(function(d){return d=d.trim(),f.on(d,s,!0)})}},{key:"emit",value:function(t,s){var f=this;t==null||t.split(",").forEach(function(d){var v=f._events[d]||[],b=f._events[S1]||[],O=function(M){for(var F=M.length,Y=0;Y<F;Y++)if(M[Y]){var ne=M[Y],ve=ne.callback,Le=ne.once;Le&&(M.splice(Y,1),M.length===0&&delete f._events[d],F--,Y--),ve.apply(f,[s])}};O(v),O(b)})}},{key:"off",value:function(t,s){var f=this;return t||(this._events={}),t.split(",").forEach(function(d){if(!s)delete f._events[d];else{for(var v=f._events[d]||[],b=v.length,O=0;O<b;O++)v[O].callback===s&&(v.splice(O,1),b--,O--);v.length===0&&delete f._events[d]}}),this}},{key:"getEvents",value:function(){return this._events}}]),e}();function cs(e,r){return r*Math.round(e/r)||e}function OE(e,r){return e%r}function ig(e,r){return _1(e)||P1(e,r)||A1(e,r)||T1()}function T1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A1(e,r){if(e){if(typeof e=="string")return SE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return SE(e,r)}}function SE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function P1(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function _1(e){if(Array.isArray(e))return e}var ag=function(r,t,s){var f=ig(r,2),d=f[0],v=f[1],b=ig(t,2),O=b[0],P=b[1],M=ig(s,2),F=M[0],Y=M[1];return d>O&&d<F&&v>P&&v<Y},xE=function(r,t){var s=t.multipleSelectKey,f=!1;switch(s){case"meta":f=r.metaKey;break;case"alt":f=r.altKey;break;case"shift":f=r.shiftKey;break;case"ctrl":f=r.ctrlKey;break;default:f=!1;break}return f};o(79),o(161),o(125),o(80),o(30),o(12),o(13),o(14),o(47);var oh,w1=new Uint8Array(16);function N1(){if(!oh&&(oh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!oh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oh(w1)}var M1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function R1(e){return typeof e=="string"&&M1.test(e)}for(var D1=R1,Hn=[],sg=0;sg<256;++sg)Hn.push((sg+256).toString(16).substr(1));function I1(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Hn[e[r+0]]+Hn[e[r+1]]+Hn[e[r+2]]+Hn[e[r+3]]+"-"+Hn[e[r+4]]+Hn[e[r+5]]+"-"+Hn[e[r+6]]+Hn[e[r+7]]+"-"+Hn[e[r+8]]+Hn[e[r+9]]+"-"+Hn[e[r+10]]+Hn[e[r+11]]+Hn[e[r+12]]+Hn[e[r+13]]+Hn[e[r+14]]+Hn[e[r+15]]).toLowerCase();if(!D1(t))throw TypeError("Stringified UUID is invalid");return t}var C1=I1;function L1(e,r,t){e=e||{};var s=e.random||(e.rng||N1)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,r){t=t||0;for(var f=0;f<16;++f)r[t+f]=s[f];return r}return C1(s)}var ug=L1,ds=function(){var r=ug();return r},j1=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=r.nodes.reduce(function(f,d){return f[d.id]=t+ug(),d.id=f[d.id],f},{});return r.edges.forEach(function(f){f.id=t+ug(),f.sourceNodeId=s[f.sourceNodeId],f.targetNodeId=s[f.targetNodeId]}),r};o(104),o(203);var B1=function(r,t,s,f){var d=(t.y-r.y)*(f.x-s.x)-(r.x-t.x)*(s.y-f.y);if(d===0)return!1;var v=((t.x-r.x)*(f.x-s.x)*(s.y-r.y)+(t.y-r.y)*(f.x-s.x)*r.x-(f.y-s.y)*(t.x-r.x)*s.x)/d,b=-((t.y-r.y)*(f.y-s.y)*(s.x-r.x)+(t.x-r.x)*(f.y-s.y)*r.y-(f.x-s.x)*(t.y-r.y)*s.y)/d;return(v-r.x)*(v-t.x)<=0&&(b-r.y)*(b-t.y)<=0&&(v-s.x)*(v-f.x)<=0&&(b-s.y)*(b-f.y)<=0?{x:v,y:b}:!1},ec=function(r,t,s){var f=r.x,d=r.y;return(f-t.x)*(f-s.x)<=0&&(d-t.y)*(d-s.y)<=0};function ih(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ih=function(t){return typeof t}:ih=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(e)}function TE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function AE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?TE(Object(t),!0).forEach(function(s){F1(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function F1(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var lg=function(r){var t=r.anchors;return t},ah=function(r,t){for(var s=t.nodes,f,d=s.length-1;d>=0;d--){var v=s[d],b=U1(r,v);if(b){var O=v.getTargetAnchor(r);if(O){var P={node:v,anchorIndex:O.index,anchor:O.anchor};(!f||G1(v,f.node,t))&&(f=P)}}}return f},G1=function(r,t,s){return r.zIndex>t.zIndex||s.nodesMap[r.id].index>s.nodesMap[t.id].index},k1=function(r,t){for(var s=lg(t),f,d=Number.MAX_SAFE_INTEGER,v=0;v<s.length;v++){var b=Ni(r.x,r.y,s[v].x,s[v].y);b<d&&(d=b,f={index:v,anchor:AE(AE({},s[v]),{},{x:s[v].x,y:s[v].y,id:s[v].id})})}return f},Ni=function(r,t,s,f){return Math.hypot(r-s,t-f)},hs=function(r,t){var s=!1,f=0,d=Po(t);return r.x>=d.minX-f&&r.x<=d.maxX+f&&r.y>=d.minY-f&&r.y<=d.maxY+f&&(s=!0),s},U1=function(r,t){var s=!1,f=5,d=Po(t);return r.x>=d.minX-f&&r.x<=d.maxX+f&&r.y>=d.minY-f&&r.y<=d.maxY+f&&(s=!0),s},Po=function(r){var t=r.x,s=r.y,f=r.width,d=r.height,v={minX:t-f/2,minY:s-d/2,maxX:t+f/2,maxY:s+d/2,x:t,y:s,width:f,height:d,centerX:t,centerY:s};return v},z1=function(r){var t=r,s=t.x,f=t.y,d=t.width,v=t.height,b=t.radius,O=[{x:s-d/2+b,y:f-v/2+b,r:b},{x:s+d/2-b,y:f-v/2+b,r:b},{x:s-d/2+b,y:f+v/2-b,r:b},{x:s+d/2-b,y:f+v/2-b,r:b}];return O},PE=function(r,t,s){var f=z1(s),d,v=Number.MAX_SAFE_INTEGER;f.forEach(function(O){var P=Ni(r.x,r.y,O.x,O.y);P<v&&(v=P,d=O)});var b=fg(r,t,d);return b},fg=function(r,t,s){var f,d=s,v=d.x,b=d.y,O=d.r;if(t===At.HORIZONTAL){var P=v-Math.sqrt(O*O-(r.y-b)*(r.y-b)),M=v+Math.sqrt(O*O-(r.y-b)*(r.y-b)),F=Math.abs(P-r.x)<Math.abs(M-r.x)?P:M;f={x:F,y:r.y}}else if(t===At.VERTICAL){var Y=b-Math.sqrt(O*O-(r.x-v)*(r.x-v)),ne=b+Math.sqrt(O*O-(r.x-v)*(r.x-v)),ve=Math.abs(Y-r.y)<Math.abs(ne-r.y)?Y:ne;f={x:r.x,y:ve}}return f},_E=function(r,t){var s=t,f=!1,d={minX:s.x-s.width/2+s.radius,maxX:s.x+s.width/2-s.radius,minY:s.y-s.height/2+s.radius,maxY:s.y+s.height/2-s.radius},v=s.x,b=s.y,O=s.width,P=s.height;return r.y===b+P/2||r.y===b-P/2?f=r.x>d.minX&&r.x<d.maxX:(r.x===v+O/2||r.x===v-O/2)&&(f=r.y>d.minY&&r.y<d.maxY),f},wE=function(r,t,s){var f,d=s,v=d.x,b=d.y,O=d.rx,P=d.ry;if(t===At.HORIZONTAL){var M=v-Math.sqrt(O*O-(r.y-b)*(r.y-b)*O*O/(P*P)),F=v+Math.sqrt(O*O-(r.y-b)*(r.y-b)*O*O/(P*P)),Y=Math.abs(M-r.x)<Math.abs(F-r.x)?M:F;f={x:Y,y:r.y}}else if(t===At.VERTICAL){var ne=b-Math.sqrt(P*P-(r.x-v)*(r.x-v)*P*P/(O*O)),ve=b+Math.sqrt(P*P-(r.x-v)*(r.x-v)*P*P/(O*O)),Le=Math.abs(ne-r.y)<Math.abs(ve-r.y)?ne:ve;f={x:r.x,y:Le}}return f},sh=function(r,t,s){for(var f=s,d=f.pointsPosition,v=Number.MAX_SAFE_INTEGER,b,O=[],P=0;P<d.length;P++)O.push({start:d[P],end:d[(P+1)%d.length]});return O.forEach(function(M){var F=M.start,Y=M.end,ne=F,ve=Y;F.x>Y.x&&(ne=Y,ve=F);var Le={x:r.x,y:r.y};if(ne.x===ve.x&&t===At.HORIZONTAL&&(Le={x:ne.x,y:r.y}),ne.y===ve.y&&t===At.VERTICAL&&(Le={x:r.x,y:ne.y}),ne.x!==ve.x&&ne.y!==ve.y){var Ie=(ve.y-ne.y)/(ve.x-ne.x),Fe=(ne.x*ve.y-ve.x*ne.y)/(ne.x-ve.x);t===At.HORIZONTAL?Le={x:(r.y-Fe)/Ie,y:r.y}:t===At.VERTICAL&&(Le={x:r.x,y:Ie*r.x+Fe})}var Tt=ec(Le,F,Y);if(Tt){var Dt=Ni(Le.x,Le.y,r.x,r.y);Dt<v&&(v=Dt,b=Le)}}),b},H1=function(r){var t=nu(r,["id","type","x","y","text","properties","virtual"]);return t},NE=function(r,t,s,f){var d=r.x,v=r.y;return t.x>r.x?d=r.x+s/2:t.x<r.x&&(d=r.x-s/2),t.y>r.y?v=r.y+f/2:t.y<r.y&&(v=r.y-f/2),{x:d,y:v}},ME=function(r){var t=r.rows,s=r.style,f=r.rowsLength,d=r.className,v=document.createElement("div");v.style.fontSize=s.fontSize,v.style.width=s.width,v.className=d,v.style.lineHeight=s.lineHeight,v.style.padding=s.padding,s.fontFamily&&(v.style.fontFamily=s.fontFamily),f>1?t.forEach(function(O){var P=document.createElement("div");P.textContent=O,v.appendChild(P)}):v.textContent=t,document.body.appendChild(v);var b=v.clientHeight;return document.body.removeChild(v),b},cg=function(r){var t=r.rows,s=r.rowsLength,f=r.fontSize,d=0;return t&&t.forEach(function(v){var b=O0(v);d=b>d?b:d}),{width:Math.ceil(d/2)*f+f/4,height:s*(f+2)+f/4}},uh=function(r){return ih(r)!=="object"?{isAllPass:!!r,msg:r?"":""}:r},Zn=function(r){try{return JSON.parse(JSON.stringify(r))}catch{return r}},X1=1e3,$1=999,dg=function(){return++X1},V1=function(){return--$1},dt,RE,DE,IE,CE,LE,jE,BE,FE,GE,kE,UE,zE,HE,XE,$E,VE,WE,YE,KE,ZE;function JE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function mo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?JE(Object(t),!0).forEach(function(s){Go(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):JE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function An(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function W1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function QE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Y1(e,r,t){return r&&QE(e.prototype,r),t&&QE(e,t),e}function Go(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function pr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var hg=(dt=function(){function e(r,t){W1(this,e),Go(this,"id",""),An(this,"type",RE,this),An(this,"sourceNodeId",DE,this),An(this,"targetNodeId",IE,this),An(this,"startPoint",CE,this),An(this,"endPoint",LE,this),An(this,"text",jE,this),An(this,"properties",BE,this),An(this,"points",FE,this),An(this,"pointsList",GE,this),An(this,"isSelected",kE,this),An(this,"isHovered",UE,this),An(this,"isHitable",zE,this),An(this,"draggable",HE,this),An(this,"visible",XE,this),Go(this,"virtual",!1),An(this,"isAnimation",$E,this),An(this,"isShowAdjustPoint",VE,this),Go(this,"graphModel",void 0),An(this,"zIndex",WE,this),Go(this,"BaseType",Ve.EDGE),Go(this,"modelType",Ze.EDGE),An(this,"state",YE,this),Go(this,"additionStateData",void 0),Go(this,"sourceAnchorId",""),Go(this,"targetAnchorId",""),Go(this,"menu",void 0),Go(this,"customTextPosition",!1),An(this,"style",KE,this),An(this,"arrowConfig",ZE,this),this.graphModel=t,this.initEdgeData(r),this.setAttributes()}return Y1(e,[{key:"initEdgeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var s=this.graphModel.idGenerator,f=s&&s(t.type),d=this.createId();t.id=d||f||ds()}this.arrowConfig.markerEnd="url(#marker-end-".concat(t.id,")");var v=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=v,Mn(this,BN(t));var b=this.graphModel.overlapMode;b===mt.INCREASE&&(this.zIndex=t.zIndex||dg()),this.setAnchors(),this.initPoints(),this.formatText(t)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return mo(mo({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return mo({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.edgeText;return gn(t)}},{key:"getEdgeAnimationStyle",value:function(){var t=this.graphModel.theme.edgeAnimation;return gn(t)}},{key:"getArrowStyle",value:function(){var t=this.getEdgeStyle(),s=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,d=this.isAnimation?s.stroke:t.stroke;return mo(mo({},t),{},{fill:d,stroke:d},f)}},{key:"getOutlineStyle",value:function(){var t=this.graphModel,s=t.theme.outline;return gn(s)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var t,s;return(t=this.graphModel)===null||t===void 0||(s=t.nodesMap[this.sourceNodeId])===null||s===void 0?void 0:s.model}},{key:"targetNode",get:function(){var t,s;return(t=this.graphModel)===null||t===void 0||(s=t.nodesMap[this.targetNodeId])===null||s===void 0?void 0:s.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(t,s){var f,d,v=lg(t);return v.forEach(function(b){var O=T0(b,s);(d===void 0||O<d)&&(d=O,f=b)}),f}},{key:"getEndAnchor",value:function(t){var s=this,f,d,v=lg(t);return v.forEach(function(b){var O=T0(b,s.startPoint);(d===void 0||O<d)&&(d=O,f=b)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var t=this.text,s=t.x,f=t.y,d=t.value,v={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return d&&(v.text={x:s,y:f,value:d}),this.graphModel.overlapMode===mt.INCREASE&&(v.zIndex=this.zIndex),v}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(t,s){this.properties[t]=Zn(s),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=mo(mo({},this.properties),Zn(t)),this.setAttributes()}},{key:"changeEdgeId",value:function(t){var s=this.arrowConfig,f=s.markerEnd,d=s.markerStart;d&&d==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t}},{key:"setStyle",value:function(t,s){this.style=mo(mo({},this.style),{},Go({},t,Zn(s)))}},{key:"setStyles",value:function(t){this.style=mo(mo({},this.style),Zn(t))}},{key:"updateStyles",value:function(t){this.style=mo({},Zn(t))}},{key:"formatText",value:function(t){var s=this.textPosition,f=s.x,d=s.y;if(!t.text||typeof t.text=="string"){this.text={value:t.text||"",x:f,y:d,draggable:this.text.draggable,editable:this.text.editable};return}Object.prototype.toString.call(t.text)==="[object Object]"&&(this.text={x:t.text.x||f,y:t.text.y||d,value:t.text.value||"",draggable:this.text.draggable,editable:this.text.editable})}},{key:"resetTextPosition",value:function(){var t=this.textPosition,s=t.x,f=t.y;this.text.x=s,this.text.y=f}},{key:"moveText",value:function(t,s){if(this.text){var f=this.text,d=f.x,v=f.y,b=f.value,O=f.draggable,P=f.editable;this.text={value:b,draggable:O,x:d+t,y:v+s,editable:P}}}},{key:"setText",value:function(t){t&&Mn(this.text,t)}},{key:"updateText",value:function(t){this.text=mo(mo({},this.text),{},{value:t})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){var s=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:s.x,y:s.y}),this.targetAnchorId||(this.targetAnchorId=s.id)}}},{key:"setSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSelected=t}},{key:"setHovered",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHovered=t}},{key:"setHitable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHitable=t}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(t,s){this.state=t,this.additionStateData=s}},{key:"updateStartPoint",value:function(t){this.startPoint=t}},{key:"moveStartPoint",value:function(t,s){this.startPoint.x+=t,this.startPoint.y+=s}},{key:"updateEndPoint",value:function(t){this.endPoint=t}},{key:"moveEndPoint",value:function(t,s){this.endPoint.x+=t,this.endPoint.y+=s}},{key:"setZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=t}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(t){Mn(this,t)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(t){var s=t.startPoint,f=t.endPoint;this.updateStartPoint({x:s.x,y:s.y}),this.updateEndPoint({x:f.x,y:f.y})}}]),e}(),RE=pr(dt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),DE=pr(dt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IE=pr(dt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),CE=pr(dt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),LE=pr(dt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jE=pr(dt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),BE=pr(dt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),FE=pr(dt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),GE=pr(dt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kE=pr(dt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),UE=pr(dt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zE=pr(dt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),HE=pr(dt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),XE=pr(dt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$E=pr(dt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),VE=pr(dt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),WE=pr(dt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),YE=pr(dt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),KE=pr(dt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ZE=pr(dt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:""}}}),pr(dt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"sourceNode"),dt.prototype),pr(dt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"targetNode"),dt.prototype),pr(dt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"textPosition"),dt.prototype),pr(dt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setProperty"),dt.prototype),pr(dt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"deleteProperty"),dt.prototype),pr(dt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setProperties"),dt.prototype),pr(dt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"changeEdgeId"),dt.prototype),pr(dt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setStyle"),dt.prototype),pr(dt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setStyles"),dt.prototype),pr(dt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateStyles"),dt.prototype),pr(dt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"formatText"),dt.prototype),pr(dt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"resetTextPosition"),dt.prototype),pr(dt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveText"),dt.prototype),pr(dt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setText"),dt.prototype),pr(dt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateText"),dt.prototype),pr(dt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setAnchors"),dt.prototype),pr(dt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setSelected"),dt.prototype),pr(dt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setHovered"),dt.prototype),pr(dt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setHitable"),dt.prototype),pr(dt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"openEdgeAnimation"),dt.prototype),pr(dt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"closeEdgeAnimation"),dt.prototype),pr(dt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setElementState"),dt.prototype),pr(dt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateStartPoint"),dt.prototype),pr(dt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveStartPoint"),dt.prototype),pr(dt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateEndPoint"),dt.prototype),pr(dt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveEndPoint"),dt.prototype),pr(dt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setZIndex"),dt.prototype),pr(dt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"initPoints"),dt.prototype),pr(dt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateAttributes"),dt.prototype),pr(dt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"getAdjustStart"),dt.prototype),pr(dt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"getAdjustEnd"),dt.prototype),pr(dt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateAfterAdjustStartAndEnd"),dt.prototype),dt),pg=hg;function lh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lh=function(t){return typeof t}:lh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}function qE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function e0(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?qE(Object(t),!0).forEach(function(s){n0(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function K1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Z1(e,r,t){return r&&t0(e.prototype,r),t&&t0(e,t),e}function fh(){return typeof Reflect<"u"&&Reflect.get?fh=Reflect.get:fh=function(r,t,s){var f=J1(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},fh.apply(this,arguments)}function J1(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=al(e),e!==null););return e}function Q1(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&vg(e,r)}function vg(e,r){return vg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},vg(e,r)}function q1(e){var r=tN();return function(){var s=al(e),f;if(r){var d=al(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return eN(this,f)}}function eN(e,r){if(r&&(lh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r0(e)}function r0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function al(e){return al=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},al(e)}function n0(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var yg=function(e){Q1(t,e);var r=q1(t);function t(){var s;K1(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),n0(r0(s),"modelType",Ze.LINE_EDGE),s}return Z1(t,[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line,d=fh(al(t.prototype),"getEdgeStyle",this).call(this);return e0(e0({},d),gn(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}]),t}(pg);function ch(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ch=function(t){return typeof t}:ch=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}var xr,o0;function rN(e,r){return aN(e)||iN(e,r)||oN(e,r)||nN()}function nN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oN(e,r){if(e){if(typeof e=="string")return i0(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i0(e,r)}}function i0(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function iN(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function aN(e){if(Array.isArray(e))return e}function a0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function s0(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?a0(Object(t),!0).forEach(function(s){mg(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function sN(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function uN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function lN(e,r,t){return r&&u0(e.prototype,r),t&&u0(e,t),e}function sl(){return typeof Reflect<"u"&&Reflect.get?sl=Reflect.get:sl=function(r,t,s){var f=fN(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},sl.apply(this,arguments)}function fN(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ps(e),e!==null););return e}function cN(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&gg(e,r)}function gg(e,r){return gg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},gg(e,r)}function dN(e){var r=pN();return function(){var s=ps(e),f;if(r){var d=ps(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return hN(this,f)}}function hN(e,r){if(r&&(ch(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tc(e)}function tc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ps(e){return ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ps(e)}function mg(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function uo(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var bg=(xr=function(e){cN(t,e);var r=dN(t);function t(){var s;uN(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),mg(tc(s),"modelType",Ze.POLYLINE_EDGE),mg(tc(s),"draggingPointList",void 0),sN(tc(s),"dbClickPosition",o0,tc(s)),s}return lN(t,[{key:"initEdgeData",value:function(f){this.offset=30,sl(ps(t.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline,d=sl(ps(t.prototype),"getEdgeStyle",this).call(this);return s0(s0({},d),gn(f))}},{key:"getTextPosition",value:function(){var f,d=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!d){var v=this.dbClickPosition,b=v.x,O=v.y;return{x:b,y:O}}var P=ul(this.points),M=IN(P),F=rN(M,2),Y=F[0],ne=F[1];return{x:(Y.x+ne.x)/2,y:(Y.y+ne.y)/2}}},{key:"getAfterAnchor",value:function(f,d,v){var b,O;return v.forEach(function(P){var M;f===At.HORIZONTAL?M=Math.abs(d.y-P.y):f===At.VERTICAL&&(M=Math.abs(d.x-P.x)),(!O||O>M)&&(O=M,b=P)}),b}},{key:"getCrossPoint",value:function(f,d,v){var b;return f===At.HORIZONTAL?b={x:v.x,y:d.y}:f===At.VERTICAL&&(b={x:d.x,y:v.y}),b}},{key:"removeCrossPoints",value:function(f,d,v){var b=v.map(function(Pt){return Pt});if(f===1){var O=b[f],P=b[d],M=b[f-1],F=g0(M,O,this.sourceNode);if(F){var Y=m0(O,P,this.sourceNode);if(Y){var ne=b0(O,P,this.sourceNode);ne&&(b[f]=ne,b.splice(f-1,1),f--,d--)}}else{var ve=this.sourceNode.anchors;ve.forEach(function(Pt){if(Pt.x===M.x&&Pt.x===O.x||Pt.y===M.y&&Pt.y===O.y){var er=Ni(Pt.x,Pt.y,O.x,O.y),wt=Ni(M.x,M.y,O.x,O.y);er<wt&&(b[f-1]=Pt)}})}}if(d===v.length-2){var Le=b[f],Ie=b[d],Fe=b[d+1],Tt=g0(Ie,Fe,this.targetNode);if(Tt){var Dt=m0(Le,Ie,this.targetNode);if(Dt){var ut=b0(Le,Ie,this.targetNode);ut&&(b[d]=ut,b.splice(d+1,1))}}else{var Ft=this.targetNode.anchors;Ft.forEach(function(Pt){if(Pt.x===Fe.x&&Pt.x===Ie.x||Pt.y===Fe.y&&Pt.y===Ie.y){var er=Ni(Pt.x,Pt.y,Ie.x,Ie.y),wt=Ni(Fe.x,Fe.y,Ie.x,Ie.y);er<wt&&(b[d+1]=Pt)}})}}return b}},{key:"getDraggingPoints",value:function(f,d,v,b,O){var P=O.map(function(Y){return Y}),M=this.getAfterAnchor(f,v,b),F=this.getCrossPoint(f,v,M);return d==="start"?(P.unshift(F),P.unshift(M)):(P.push(F),P.push(M)),P}},{key:"updateCrossPoints",value:function(f){var d=f.map(function(ut){return ut}),v=f[0],b=f[1],O=f[d.length-2],P=f[d.length-1],M=this.sourceNode,F=this.targetNode,Y=M.modelType,ne=F.modelType,ve=mh(v,b),Le=d[0];switch(Y){case Ze.RECT_NODE:if(M.radius!==0){var Ie=_E(v,M);Ie||(Le=PE(v,ve,M))}break;case Ze.CIRCLE_NODE:Le=fg(v,ve,M);break;case Ze.ELLIPSE_NODE:Le=wE(v,ve,M);break;case Ze.DIAMOND_NODE:Le=sh(v,ve,M);break;case Ze.POLYGON_NODE:Le=sh(v,ve,M);break}d[0]=Le;var Fe=mh(O,P),Tt=d[d.length-1];switch(ne){case Ze.RECT_NODE:if(F.radius!==0){var Dt=_E(P,F);Dt||(Tt=PE(P,Fe,F))}break;case Ze.CIRCLE_NODE:Tt=fg(P,Fe,F);break;case Ze.ELLIPSE_NODE:Tt=wE(P,Fe,F);break;case Ze.DIAMOND_NODE:Tt=sh(P,Fe,F);break;case Ze.POLYGON_NODE:Tt=sh(P,Fe,F);break}return d[d.length-1]=Tt,d}},{key:"getData",value:function(){var f=sl(ps(t.prototype),"getData",this).call(this),d=this.pointsList.map(function(v){var b=v.x,O=v.y;return{x:b,y:O}});return Object.assign({},f,{pointsList:d})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=y0({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(d){return"".concat(d.x,",").concat(d.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,d){this.startPoint.x+=f,this.startPoint.y+=d,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveEndPoint",value:function(f,d){this.endPoint.x+=f,this.endPoint.y+=d,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,d){this.isDragging=!0;var v=f.start,b=f.end,O=f.startIndex,P=f.endIndex,M=f.direction,F=this.pointsList,Y=F;return M===At.HORIZONTAL?(F[O]={x:v.x,y:v.y+d.y},F[P]={x:b.x,y:b.y+d.y},Y=this.pointsList.map(function(ne){return ne})):M===At.VERTICAL&&(F[O]={x:v.x+d.x,y:v.y},F[P]={x:b.x+d.x,y:b.y},Y=this.pointsList.map(function(ne){return ne})),this.updatePointsAfterDrag(Y),this.draggingPointList=Y,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},F[O]),end:Object.assign({},F[P]),startIndex:O,endIndex:P,direction:M}}},{key:"dragAppend",value:function(f,d){this.isDragging=!0;var v=f.start,b=f.end,O=f.startIndex,P=f.endIndex,M=f.direction,F=this.pointsList;if(M===At.HORIZONTAL){F[O]={x:v.x,y:v.y+d.y},F[P]={x:b.x,y:b.y+d.y};var Y=this.pointsList.map(function(Cr){return Cr});if(O!==0&&P!==this.pointsList.length-1&&(Y=this.removeCrossPoints(O,P,Y)),O===0){var ne={x:v.x,y:v.y+d.y},ve=hs(ne,this.sourceNode);if(!ve){var Le=this.sourceNode.anchors;Y=this.getDraggingPoints(M,"start",ne,Le,Y)}}if(P===this.pointsList.length-1){var Ie={x:b.x,y:b.y+d.y},Fe=hs(Ie,this.targetNode);if(!Fe){var Tt=this.targetNode.anchors;Y=this.getDraggingPoints(M,"end",Ie,Tt,Y)}}this.updatePointsAfterDrag(Y),this.draggingPointList=Y}else if(M===At.VERTICAL){F[O]={x:v.x+d.x,y:v.y},F[P]={x:b.x+d.x,y:b.y};var Dt=this.pointsList.map(function(Cr){return Cr});if(O!==0&&P!==this.pointsList.length-1&&(Dt=this.removeCrossPoints(O,P,Dt)),O===0){var ut={x:v.x+d.x,y:v.y},Ft=hs(ut,this.sourceNode);if(!Ft){var Pt=this.sourceNode.anchors;Dt=this.getDraggingPoints(M,"start",ut,Pt,Dt)}}if(P===this.pointsList.length-1){var er={x:b.x+d.x,y:b.y},wt=hs(er,this.targetNode);if(!wt){var gr=this.targetNode.anchors;Dt=this.getDraggingPoints(M,"end",er,gr,Dt)}}this.updatePointsAfterDrag(Dt),this.draggingPointList=Dt}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},F[O]),end:Object.assign({},F[P]),startIndex:O,endIndex:P,direction:M}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=v0(ul(this.points));this.pointsList=f.map(function(b){return b}),this.draggingPointList=[];var d=f[0];this.startPoint=Object.assign({},d);var v=f[f.length-1];this.endPoint=Object.assign({},v)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var d=this.updateCrossPoints(f);this.points=d.map(function(v){return"".concat(v.x,",").concat(v.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var d=f.startPoint,v=f.endPoint,b=f.sourceNode,O=f.targetNode,P=y0({x:d.x,y:d.y},{x:v.x,y:v.y},b,O,this.offset||0);this.pointsList=P,this.initPoints()}}]),t}(pg),o0=uo(xr.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo(xr.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"initPoints"),xr.prototype),uo(xr.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updatePoints"),xr.prototype),uo(xr.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateStartPoint"),xr.prototype),uo(xr.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"moveStartPoint"),xr.prototype),uo(xr.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateEndPoint"),xr.prototype),uo(xr.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"moveEndPoint"),xr.prototype),uo(xr.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendStart"),xr.prototype),uo(xr.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendSimple"),xr.prototype),uo(xr.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppend"),xr.prototype),uo(xr.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendEnd"),xr.prototype),uo(xr.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updatePointsAfterDrag"),xr.prototype),uo(xr.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"getAdjustStart"),xr.prototype),uo(xr.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"getAdjustEnd"),xr.prototype),uo(xr.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateAfterAdjustStartAndEnd"),xr.prototype),xr),rc=function(r){var t=r.start,s=r.end,f=r.offset,d=r.verticalLength,v=r.type,b={leftX:0,leftY:0,rightX:0,rightY:0},O=Math.atan((s.y-t.y)/(s.x-t.x)),P=Math.atan(f/d),M=Math.sqrt(d*d+f*f);return v==="start"?s.x>=t.x?(b.leftX=t.x+M*Math.sin(O+P),b.leftY=t.y-M*Math.cos(O+P),b.rightX=t.x-M*Math.sin(O-P),b.rightY=t.y+M*Math.cos(O-P)):(b.leftX=t.x-M*Math.sin(O+P),b.leftY=t.y+M*Math.cos(O+P),b.rightX=t.x+M*Math.sin(O-P),b.rightY=t.y-M*Math.cos(O-P)):v==="end"&&(s.x>=t.x?(b.leftX=s.x+M*Math.sin(O-P),b.leftY=s.y-M*Math.cos(O-P),b.rightX=s.x-M*Math.sin(O+P),b.rightY=s.y+M*Math.cos(O+P)):(b.leftX=s.x-M*Math.sin(O-P),b.leftY=s.y+M*Math.cos(O-P),b.rightX=s.x+M*Math.sin(O+P),b.rightY=s.y-M*Math.cos(O+P))),b};function l0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function dh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?l0(Object(t),!0).forEach(function(s){vN(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function vN(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function yN(e){return bN(e)||mN(e)||f0(e)||gN()}function gN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bN(e){if(Array.isArray(e))return Og(e)}function hh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hh=function(t){return typeof t}:hh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hh(e)}function Eg(e,r){return SN(e)||ON(e,r)||f0(e,r)||EN()}function EN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0(e,r){if(e){if(typeof e=="string")return Og(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Og(e,r)}}function Og(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function ON(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function SN(e){if(Array.isArray(e))return e}var xN=function(r,t){return Math.abs(r.centerX-t.centerX)*2<r.width+t.width&&Math.abs(r.centerY-t.centerY)*2<r.height+t.height},Sg=function(r){var t=[],s={};return r.forEach(function(f){var d="".concat(f.x,"-").concat(f.y);f.id=d,s[d]=f}),Object.keys(s).forEach(function(f){t.push(s[f])}),t},ph=function(r,t){return r.width===0&&r.height===0?r:{centerX:r.centerX,centerY:r.centerY,minX:r.minX-t,minY:r.minY-t,maxX:r.maxX+t,maxY:r.maxY+t,height:r.height+2*t,width:r.width+2*t}},TN=function(r,t){var s=Math.abs(r.x-t.centerX),f=Math.abs(r.y-t.centerY);return s/t.width>f/t.height?At.HORIZONTAL:At.VERTICAL},vh=function(r,t){var s=TN(t,r);return s===At.HORIZONTAL?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},c0=function(r,t){var s=Math.min(r.minX,t.minX),f=Math.min(r.minY,t.minY),d=Math.max(r.maxX,t.maxX),v=Math.max(r.maxY,t.maxY);return{centerX:(s+d)/2,centerY:(f+v)/2,minX:s,minY:f,maxX:d,maxY:v,height:v-f,width:d-s}},nc=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=[],f=[];r.forEach(function(F){s.push(F.x),f.push(F.y)});var d=Math.min.apply(Math,s),v=Math.max.apply(Math,s),b=Math.min.apply(Math,f),O=Math.max.apply(Math,f),P=v-d,M=O-b;return t&&(P+=t,M+=t),{centerX:(d+v)/2,centerY:(b+O)/2,maxX:v,maxY:O,minX:d,minY:b,x:(d+v)/2,y:(b+O)/2,height:M,width:P}},yh=function(r){var t=r.minX,s=r.minY,f=r.maxX,d=r.maxY;return[{x:t,y:s},{x:f,y:s},{x:f,y:d},{x:t,y:d}]},gh=function(r,t){var s=r.x,f=r.y;return s<t.minX||s>t.maxX||f<t.minY||f>t.maxY},AN=function(r,t){return t<r.minX||t>r.maxX?[]:[{x:t,y:r.minY},{x:t,y:r.maxY}]},PN=function(r,t){return t<r.minY||t>r.maxY?[]:[{x:r.minX,y:t},{x:r.maxX,y:t}]},_N=function(r,t){return AN(r,t.x).concat(PN(r,t.y))},xg=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},wN=function(r,t){var s=-2,f=0;return t.forEach(function(d){d&&(r.x===d.x&&(f+=s),r.y===d.y&&(f+=s))}),f},d0=function(r,t,s,f,d){return xg(r,t)+xg(r,s)+wN(r,[t,s,f,d])},NN=function e(r,t,s,f,d){d||(d=0),r.unshift(t[f]),s[f]&&s[f]!==f&&d<=100&&e(r,t,s,s[f],d+1)},MN=function(r,t){var s=r.indexOf(t);s>-1&&r.splice(s,1)},oc=function(r,t,s,f){var d=t.x-r.x,v=t.y-r.y,b=f.x-s.x,O=f.y-s.y,P=(-v*(r.x-s.x)+d*(r.y-s.y))/(-b*v+d*O),M=(b*(r.y-s.y)-O*(r.x-s.x))/(-b*v+d*O);return P>=0&&P<=1&&M>=0&&M<=1},h0=function(r,t,s){if(s.width===0&&s.height===0)return!1;var f=yh(s),d=Eg(f,4),v=d[0],b=d[1],O=d[2],P=d[3];return oc(r,t,v,b)||oc(r,t,v,P)||oc(r,t,b,O)||oc(r,t,O,P)},RN=function(r,t,s,f){var d=[];return r.forEach(function(v){v!==t&&(v.x===t.x||v.y===t.y)&&!h0(v,t,s)&&!h0(v,t,f)&&d.push(v)}),Sg(d)},DN=function(r,t,s,f,d,v,b){var O=[],P=[t],M={},F={},Y={};F[t.id]=0,Y[t.id]=d0(t,s,t);var ne={};r.forEach(function(Ie){ne[Ie.id]=Ie});for(var ve=function(){var Fe=void 0,Tt=1/0;if(P.forEach(function(ut){Y[ut.id]<Tt&&(Tt=Y[ut.id],Fe=ut)}),Fe===s){var Dt=[];return NN(Dt,ne,M,s.id),{v:Dt}}MN(P,Fe),O.push(Fe),RN(r,Fe,f,d).forEach(function(ut){if(O.indexOf(ut)===-1){P.indexOf(ut)===-1&&P.push(ut);var Ft=Y[Fe.id]+xg(Fe,ut);F[ut.id]&&Ft>=F[ut.id]||(M[ut.id]=Fe.id,F[ut.id]=Ft,Y[ut.id]=F[ut.id]+d0(ut,s,t,v,b))}})};P.length;){var Le=ve();if(hh(Le)==="object")return Le.v}return[t,s]},p0=function(r){var t=Po(r);return t},v0=function(r){for(var t=1;t<r.length-1;){var s=r[t-1],f=r[t],d=r[t+1];s.x===f.x&&f.x===d.x||s.y===f.y&&f.y===d.y?r.splice(t,1):t++}return r},y0=function(r,t,s,f,d){var v=p0(s),b=p0(f),O=ph(v,d),P=ph(b,d),M=vh(O,r),F=vh(P,t);if(xN(O,P)){var Y=CN(r,t,M,F);return[r,M].concat(yN(Y),[F,t])}var ne=nc([M,F]),ve=c0(O,ne),Le=c0(P,ne),Ie=[];Ie=Ie.concat(yh(ve)),Ie=Ie.concat(yh(Le));var Fe={x:(r.x+t.x)/2,y:(r.y+t.y)/2};[ne,ve,Le].forEach(function(Dt){Ie=Ie.concat(_N(Dt,Fe).filter(function(ut){return gh(ut,O)&&gh(ut,P)}))}),[{x:M.x,y:F.y},{x:F.x,y:M.y}].forEach(function(Dt){gh(Dt,O)&&gh(Dt,P)&&Ie.push(Dt)}),Ie.unshift(M),Ie.push(F),Ie=Sg(Ie);var Tt=DN(Ie,M,F,v,b,r,t);return Tt.unshift(r),Tt.push(t),Tt.length>2&&(Tt=v0(Tt)),Sg(Tt)},IN=function(r){var t;if(r.length===1)t=[r[0],r[0]];else if(r.length>=2){for(var s=r[0],f=r[1],d=Ni(s.x,s.y,f.x,f.y),v=1;v<r.length-1;v++){var b=r[v],O=r[v+1],P=Ni(b.x,b.y,O.x,O.y);P>d&&(d=P,s=b,f=O)}t=[s,f]}return t},g0=function(r,t,s){var f=hs(r,s),d=hs(t,s);return f&&d},m0=function(r,t,s){var f=hs(r,s),d=hs(t,s),v=f&&d,b=f||d;return!v&&b},b0=function(r,t,s){for(var f,d,v=Po(s),b=yh(v),O=0;O<b.length;O++){var P=oc(r,t,b[O],b[(O+1)%b.length]);P&&(d=[b[O],b[(O+1)%b.length]])}return d&&(f=B1(r,t,d[0],d[1])),f},mh=function(r,t){var s;return r.x===t.x?s=At.VERTICAL:r.y===t.y&&(s=At.HORIZONTAL),s},ul=function(r){var t=r.split(" "),s=[];return t&&t.forEach(function(f){var d=f.split(","),v=Eg(d,2),b=v[0],O=v[1];s.push({x:Number(b),y:Number(O)})}),s},CN=function(r,t,s,f){var d=[],v=mh(r,s),b=mh(t,f);if(v===b)r.y===s.y?(d.push({x:s.x,y:(s.y+f.y)/2}),d.push({x:f.x,y:(s.y+f.y)/2})):(d.push({x:(s.x+f.x)/2,y:s.y}),d.push({x:(s.x+f.x)/2,y:f.y}));else{var O={x:s.x,y:f.y},P=ec(O,r,s),M=ec(O,t,f);if(P||M)O={x:f.x,y:s.y};else{var F=E0(O,r,s),Y=E0(O,t,f);F&&Y&&(O={x:f.x,y:s.y})}d.push(O)}return d},E0=function(r,t,s){return r.x===t.x&&r.x===s.x||r.y===t.y&&r.y===s.y},O0=function(r){if(!r)return 0;for(var t=0,s=0;s<r.length;s++){var f=r.charCodeAt(s);r.match(/[A-Z]/)?t+=1.5:f>=1&&f<=126||f>=65376&&f<=65439?t+=1:t+=2}return t},LN=function(r){var t=r.start,s=r.end,f;if(t.x===s.x&&t.y===s.y)f="";else{var d={start:t,end:s,offset:10,verticalLength:5},v=rc(dh(dh({},d),{},{type:"start"})),b=rc(dh(dh({},d),{},{type:"end"}));f="M".concat(v.leftX," ").concat(v.leftY,` 
    L`).concat(v.rightX," ").concat(v.rightY,` 
    L`).concat(b.rightX," ").concat(b.rightY,`
    L`).concat(b.leftX," ").concat(b.leftY," z")}return{d:f,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},S0=function(r){var t=r.start,s=r.end,f=r.sourceNode,d=r.targetNode,v=r.offset,b=Po(f),O=Po(d),P=ph(b,v),M=ph(O,v),F=vh(P,t),Y=vh(M,s);return{sNext:F,ePre:Y}},bh=function(r){var t=r.replace(/M/g,"").replace(/C/g,",").split(","),s=Eh(t[0]),f=Eh(t[1]),d=Eh(t[2]),v=Eh(t[3]);return[s,f,d,v]},Eh=function(r){var t=r.replace(/(^\s*)/g,"").split(" "),s=Eg(t,2),f=s[0],d=s[1];return{x:+f,y:+d}},jN=function(r){var t=bh(r);return[t[2],t[3]]},x0=function(r,t){for(var s=r.x,f=r.y,d=ul(t),v=Number.MAX_SAFE_INTEGER,b,O=[],P=0;P<d.length;P++)O.push({start:d[P],end:d[(P+1)%d.length]});if(O.forEach(function(ne){var ve=ne.start,Le=ne.end;if(ve.x===Le.x){var Ie={x:ve.x,y:f},Fe=ec(Ie,ve,Le);if(Fe){var Tt=Math.abs(ve.x-s);Tt<v&&(v=Tt,b=Ie)}}else if(ve.y===Le.y){var Dt={x:s,y:ve.y},ut=ec(Dt,ve,Le);if(ut){var Ft=Math.abs(ve.y-f);Ft<v&&(v=Ft,b=Dt)}}}),!b){var M=O[0],F=M.start,Y=M.end;b={x:F.x+(Y.x-F.x)/2,y:F.y+(Y.y-F.y)/2}}return b},BN=function(r){return nu(r,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},T0=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))};function FN(e,r){return typeof r!="function"?function(t,s,f){return Object.assign({type:e.edgeType},f)}:function(t,s,f){var d=r(t,s,f);return d?typeof d=="string"?Object.assign({},f,{type:d}):Object.assign({type:d},f):{type:e.edgeType}}}o(204);function GN(){}var ll=GN;function kN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function A0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function UN(e,r,t){return r&&A0(e.prototype,r),t&&A0(e,t),e}function Pn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Mi=window.document,P0=0;function zN(e){var r=e.onDragStart,t=r===void 0?ll:r,s=e.onDragging,f=s===void 0?ll:s,d=e.onDragEnd,v=d===void 0?ll:d,b=e.step,O=b===void 0?1:b,P=e.isStopPropagation,M=P===void 0?!0:P,F=!1,Y=!1,ne=0,ve=0,Le=0,Ie=0;function Fe(ut){if(M&&ut.stopPropagation(),!!Y&&(F=!0,Le+=ut.clientX-ne,Ie+=ut.clientY-ve,ne=ut.clientX,ve=ut.clientY,Math.abs(Le)>O||Math.abs(Ie)>O)){var Ft=Le%O,Pt=Ie%O,er=Le-Ft,wt=Ie-Pt;Le=Ft,Ie=Pt,f({deltaX:er,deltaY:wt,event:ut})}}function Tt(ut){if(M&&ut.stopPropagation(),Y=!1,Mi.removeEventListener("mousemove",Fe,!1),Mi.removeEventListener("mouseup",Tt,!1),!!F)return F=!1,v({event:ut})}function Dt(ut){if(ut.button===P0)return M&&ut.stopPropagation(),Y=!0,ne=ut.clientX,ve=ut.clientY,Mi.addEventListener("mousemove",Fe,!1),Mi.addEventListener("mouseup",Tt,!1),t({event:ut})}return Dt}var pa=function(){function e(r){var t=this,s=r.onDragStart,f=s===void 0?ll:s,d=r.onDragging,v=d===void 0?ll:d,b=r.onDragEnd,O=b===void 0?ll:b,P=r.eventType,M=P===void 0?"":P,F=r.eventCenter,Y=F===void 0?null:F,ne=r.step,ve=ne===void 0?1:ne,Le=r.isStopPropagation,Ie=Le===void 0?!0:Le,Fe=r.model,Tt=Fe===void 0?null:Fe,Dt=r.data,ut=Dt===void 0?null:Dt;kN(this,e),Pn(this,"onDragStart",void 0),Pn(this,"onDragging",void 0),Pn(this,"onDragEnd",void 0),Pn(this,"step",void 0),Pn(this,"isStopPropagation",void 0),Pn(this,"isDragging",!1),Pn(this,"isStartDragging",!1),Pn(this,"startX",0),Pn(this,"startY",0),Pn(this,"sumDeltaX",0),Pn(this,"sumDeltaY",0),Pn(this,"eventType",void 0),Pn(this,"eventCenter",void 0),Pn(this,"model",void 0),Pn(this,"data",void 0),Pn(this,"startTime",void 0),Pn(this,"handleMouseDown",function(Ft){var Pt,er;if(Ft.button===P0){t.isStopPropagation&&Ft.stopPropagation(),t.isStartDragging=!0,t.startX=Ft.clientX,t.startY=Ft.clientY,Mi.addEventListener("mousemove",t.handleMouseMove,!1),Mi.addEventListener("mouseup",t.handleMouseUp,!1);var wt=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();(er=t.eventCenter)===null||er===void 0||er.emit(ze["".concat(t.eventType,"_MOUSEDOWN")],{e:Ft,data:t.data||wt}),t.startTime=new Date().getTime()}}),Pn(this,"handleMouseMove",function(Ft){if(t.isStopPropagation&&Ft.stopPropagation(),!!t.isStartDragging&&(t.sumDeltaX+=Ft.clientX-t.startX,t.sumDeltaY+=Ft.clientY-t.startY,t.startX=Ft.clientX,t.startY=Ft.clientY,t.step<=1||Math.abs(t.sumDeltaX)>t.step||Math.abs(t.sumDeltaY)>t.step)){var Pt,er=t.sumDeltaX%t.step,wt=t.sumDeltaY%t.step,gr=t.sumDeltaX-er,Cr=t.sumDeltaY-wt;t.sumDeltaX=er,t.sumDeltaY=wt;var _n=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();if(!t.isDragging){var Fn;(Fn=t.eventCenter)===null||Fn===void 0||Fn.emit(ze["".concat(t.eventType,"_DRAGSTART")],{e:Ft,data:t.data||_n}),t.onDragStart({event:Ft})}t.isDragging=!0,Promise.resolve().then(function(){var qn,Eo;t.onDragging({deltaX:gr,deltaY:Cr,event:Ft}),(qn=t.eventCenter)===null||qn===void 0||qn.emit(ze["".concat(t.eventType,"_MOUSEMOVE")],{e:Ft,data:t.data||_n}),(Eo=t.eventCenter)===null||Eo===void 0||Eo.emit(ze["".concat(t.eventType,"_DRAG")],{e:Ft,data:t.data||_n})})}}),Pn(this,"handleMouseUp",function(Ft){t.isStartDragging=!1,t.isStopPropagation&&Ft.stopPropagation(),Promise.resolve().then(function(){var Pt,er,wt;Mi.removeEventListener("mousemove",t.handleMouseMove,!1),Mi.removeEventListener("mouseup",t.handleMouseUp,!1);var gr=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();(er=t.eventCenter)===null||er===void 0||er.emit(ze["".concat(t.eventType,"_MOUSEUP")],{e:Ft,data:t.data||gr}),t.isDragging&&(t.isDragging=!1,t.onDragEnd({event:Ft}),(wt=t.eventCenter)===null||wt===void 0||wt.emit(ze["".concat(t.eventType,"_DROP")],{e:Ft,data:t.data||gr}))})}),Pn(this,"cancelDrag",function(){Mi.removeEventListener("mousemove",t.handleMouseMove,!1),Mi.removeEventListener("mouseup",t.handleMouseUp,!1),t.onDragEnd({event:null}),t.isDragging=!1}),this.onDragStart=f,this.onDragging=v,this.onDragEnd=O,this.step=ve,this.isStopPropagation=Ie,this.eventType=M,this.eventCenter=Y,this.model=Tt,this.data=ut}return UN(e,[{key:"setStep",value:function(t){this.step=t}}]),e}(),_0={node:!1,edge:!1},HN={node:!0,edge:!0},XN=function(r){return!r||typeof r=="boolean"?gn(r===!0?HN:_0):mE(gn(_0),r)},We,w0,N0,M0,R0,D0,I0,C0,L0,j0,B0,F0,G0;function k0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Oh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?k0(Object(t),!0).forEach(function(s){Ri(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function ic(e,r){return WN(e)||VN(e,r)||U0(e,r)||$N()}function $N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VN(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function WN(e){if(Array.isArray(e))return e}function fl(e){return ZN(e)||KN(e)||U0(e)||YN()}function YN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U0(e,r){if(e){if(typeof e=="string")return Tg(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Tg(e,r)}}function KN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZN(e){if(Array.isArray(e))return Tg(e)}function Tg(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function ac(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ac=function(t){return typeof t}:ac=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac(e)}function ko(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function JN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function z0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function QN(e,r,t){return r&&z0(e.prototype,r),t&&z0(e,t),e}function Ri(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function sr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Sh=200,H0=(We=function(){function e(r){JN(this,e),Ri(this,"rootEl",void 0),ko(this,"width",w0,this),ko(this,"height",N0,this),Ri(this,"theme",void 0),Ri(this,"eventCenter",void 0),Ri(this,"modelMap",new Map),Ri(this,"topElement",void 0),Ri(this,"animation",void 0),Ri(this,"idGenerator",void 0),Ri(this,"edgeGenerator",void 0),Ri(this,"nodeMoveRules",[]),ko(this,"edgeType",M0,this),ko(this,"nodes",R0,this),ko(this,"edges",D0,this),ko(this,"overlapMode",I0,this),ko(this,"background",C0,this),ko(this,"transformModel",L0,this),ko(this,"editConfigModel",j0,this),ko(this,"gridSize",B0,this),ko(this,"partial",F0,this),ko(this,"fakerNode",G0,this);var t=r.container,s=r.background,f=s===void 0?{}:s,d=r.grid,v=r.idGenerator,b=r.edgeGenerator,O=r.animation;this.background=f,ac(d)==="object"&&(this.gridSize=d.size),this.rootEl=t,this.editConfigModel=new nt(r),this.eventCenter=new x1,this.transformModel=new dr(this.eventCenter),this.theme=bE(r.style),this.edgeType=r.edgeType||"polyline",this.width=r.width,this.height=r.height,this.animation=XN(O),this.partial=r.partial,this.overlapMode=r.overlapMode||0,this.idGenerator=v,this.edgeGenerator=FN(this,b),this.width=r.width||this.rootEl.getBoundingClientRect().width,this.height=r.height||this.rootEl.getBoundingClientRect().height,this.flowId=ds()}return QN(e,[{key:"nodesMap",get:function(){return this.nodes.reduce(function(t,s,f){return t[s.id]={index:f,model:s},t},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(t,s,f){return t[s.id]={index:f,model:s},t},{})}},{key:"modelsMap",get:function(){return[].concat(fl(this.nodes),fl(this.edges)).reduce(function(t,s){return t[s.id]=s,t},{})}},{key:"sortElements",get:function(){var t=[];this.nodes.forEach(function(O){return t.push(O)}),this.edges.forEach(function(O){return t.push(O)}),t=t.sort(function(O,P){return O.zIndex-P.zIndex});for(var s=[],f=[-Sh,-Sh],d=[this.width+Sh,this.height+Sh],v=0;v<t.length;v++){var b=t[v];b.visible&&(!this.partial||b.isSelected||this.isElementInArea(b,f,d,!1,!1))&&s.push(b)}return s}},{key:"textEditElement",get:function(){var t=this.nodes.find(function(f){return f.state===ct.TEXT_EDIT}),s=this.edges.find(function(f){return f.state===ct.TEXT_EDIT});return t||s}},{key:"selectElements",get:function(){var t=new Map;return this.nodes.forEach(function(s){s.isSelected&&t.set(s.id,s)}),this.edges.forEach(function(s){s.isSelected&&t.set(s.id,s)}),t}},{key:"getAreaElement",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,b=[],O=[];this.nodes.forEach(function(F){return O.push(F)}),this.edges.forEach(function(F){return O.push(F)});for(var P=0;P<O.length;P++){var M=O[P];(!v||M.visible)&&this.isElementInArea(M,t,s,f,d)&&b.push(M)}return b}},{key:"getModel",value:function(t){return this.modelMap.get(t)}},{key:"getNodeModelById",value:function(t){var s;return this.fakerNode&&t===this.fakerNode.id?this.fakerNode:(s=this.nodesMap[t])===null||s===void 0?void 0:s.model}},{key:"getPointByClient",value:function(t){var s=t.x,f=t.y,d=this.rootEl.getBoundingClientRect(),v={x:s-d.left,y:f-d.top},b=this.transformModel.HtmlPointToCanvasPoint([v.x,v.y]),O=ic(b,2),P=O[0],M=O[1];return{domOverlayPosition:v,canvasOverlayPosition:{x:P,y:M}}}},{key:"isElementInArea",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;if(t.BaseType===Ve.NODE){t=t;for(var b=Po(t),O=b.minX,P=b.minY,M=b.maxX,F=b.maxY,Y=[{x:O,y:P},{x:M,y:P},{x:M,y:F},{x:O,y:F}],ne=v,ve=0;ve<Y.length;ve++){var Le=Y[ve],Ie=Le.x,Fe=Le.y,Tt=this.transformModel.CanvasPointToHtmlPoint([Ie,Fe]),Dt=ic(Tt,2);if(Ie=Dt[0],Fe=Dt[1],ag([Ie,Fe],s,f)!==v){ne=!v;break}}return ne}if(t.BaseType===Ve.EDGE){t=t;var ut=t,Ft=ut.startPoint,Pt=ut.endPoint,er=this.transformModel.CanvasPointToHtmlPoint([Ft.x,Ft.y]),wt=this.transformModel.CanvasPointToHtmlPoint([Pt.x,Pt.y]),gr=ag(er,s,f),Cr=ag(wt,s,f);return d?gr&&Cr:gr||Cr}return!1}},{key:"graphDataToModel",value:function(t){var s=this;(!this.width||!this.height)&&this.resize(),this.nodes=la(t.nodes,function(f){var d=s.getModel(f.type);if(!d)throw new Error("".concat(f.type,""));var v=f.x,b=f.y;return v&&b&&(f.x=cs(v,s.gridSize),f.y=cs(b,s.gridSize),ac(f.text)==="object"&&(f.text.x-=OE(v,s.gridSize),f.text.y-=OE(b,s.gridSize))),new d(f,s)}),this.edges=la(t.edges,function(f){var d=s.getModel(f.type);if(!d)throw new Error("".concat(f.type,""));return new d(f,s)})}},{key:"modelToGraphData",value:function(){var t=[];this.edges.forEach(function(f){var d=f.getData();d&&!f.virtual&&t.push(d)});var s=[];return this.nodes.forEach(function(f){var d=f.getData();d&&!f.virtual&&s.push(d)}),{nodes:s,edges:t}}},{key:"modelToHistoryData",value:function(){for(var t=!1,s=[],f=0;f<this.nodes.length;f++){var d=this.nodes[f];if(d.isDragging){t=!0;break}else s.push(d.getHistoryData())}if(t)return!1;for(var v=!1,b=[],O=0;O<this.edges.length;O++){var P=this.edges[O];if(P.isDragging){v=!0;break}else b.push(P.getHistoryData())}return v?!1:{nodes:s,edges:b}}},{key:"getEdgeModelById",value:function(t){var s;return(s=this.edgesMap[t])===null||s===void 0?void 0:s.model}},{key:"getElement",value:function(t){return this.modelsMap[t]}},{key:"getNodeEdges",value:function(t){for(var s=[],f=0;f<this.edges.length;f++){var d=this.edges[f],v=this.edges[f].sourceNodeId===t,b=this.edges[f].targetNodeId===t;(v||b)&&s.push(d)}return s}},{key:"getSelectElements",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,s=this.selectElements,f={nodes:[],edges:[]};return s.forEach(function(d){if(d.BaseType===Ve.NODE&&f.nodes.push(d.getData()),d.BaseType===Ve.EDGE){var v=d.getData(),b=s.get(v.sourceNodeId)&&s.get(v.targetNodeId);(t||b)&&f.edges.push(v)}}),f}},{key:"updateAttributes",value:function(t,s){var f=this.getElement(t);f.updateAttributes(s)}},{key:"changeNodeId",value:function(t,s){return s||(s=ds()),this.nodesMap[s]?(console.warn("".concat(s,", ")),""):this.nodesMap[t]?(this.edges.forEach(function(f){f.sourceNodeId===t&&(f.sourceNodeId=s),f.targetNodeId===t&&(f.targetNodeId=s)}),this.nodesMap[t].model.id=s,s):(console.warn("".concat(s,", ")),"")}},{key:"changeEdgeId",value:function(t,s){return s||(s=ds()),this.edgesMap[s]?(console.warn(": ".concat(s,", ")),""):this.edgesMap[t]?(this.edges.forEach(function(f){f.id===t&&f.changeEdgeId(s)}),s):(console.warn(": ".concat(s,", ")),"")}},{key:"setFakerNode",value:function(t){this.fakerNode=t}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(t,s){return this.modelMap.set(t,s)}},{key:"toFront",value:function(t){var s,f,d=((s=this.nodesMap[t])===null||s===void 0?void 0:s.model)||((f=this.edgesMap[t])===null||f===void 0?void 0:f.model);if(d){if(this.overlapMode===mt.DEFAULT){var v;(v=this.topElement)===null||v===void 0||v.setZIndex(),d.setZIndex(ir),this.topElement=d}this.overlapMode===mt.INCREASE&&this.setElementZIndex(t,"top")}}},{key:"setElementZIndex",value:function(t,s){var f,d,v=((f=this.nodesMap[t])===null||f===void 0?void 0:f.model)||((d=this.edgesMap[t])===null||d===void 0?void 0:d.model);if(v){var b;typeof s=="number"&&(b=s),s==="top"&&(b=dg()),s==="bottom"&&(b=V1()),v.setZIndex(b)}}},{key:"deleteNode",value:function(t){var s=this.nodesMap[t].model.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(ze.NODE_DELETE,{data:s})}},{key:"addNode",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.NODE_ADD,f=Zn(t);f.id&&this.nodesMap[t.id]&&delete f.id;var d=this.getModel(f.type);if(!d)throw new Error("".concat(f.type,""));f.x=cs(f.x,this.gridSize),f.y=cs(f.y,this.gridSize);var v=new d(f,this);this.nodes.push(v);var b=v.getData();return this.eventCenter.emit(s,{data:b}),v}},{key:"cloneNode",value:function(t){var s=this.getNodeModelById(t),f=s.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var d=this.addNode(f);return d.setSelected(!0),s.setSelected(!1),d.getData()}},{key:"moveNode",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,v=this.nodesMap[t];if(!v){console.warn("id".concat(t,""));return}var b=v.model,O=b.getMoveDistance(s,f,d),P=ic(O,2);s=P[0],f=P[1],this.moveEdge(t,s,f)}},{key:"moveNode2Coordinate",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,v=this.nodesMap[t];if(!v){console.warn("id".concat(t,""));return}var b=v.model,O=b.x,P=b.y,M=s-O,F=f-P;this.moveNode(t,M,F,d)}},{key:"editText",value:function(t){this.setElementStateById(t,ct.TEXT_EDIT)}},{key:"addEdge",value:function(t){var s=Zn(t),f=s.type;f||(f=this.edgeType),s.id&&this.edgesMap[s.id]&&delete s.id;var d=this.getModel(f);if(!d)throw new Error("".concat(f,""));var v=new d(Oh(Oh({},s),{},{type:f}),this),b=v.getData();return this.edges.push(v),this.eventCenter.emit(ze.EDGE_ADD,{data:b}),v}},{key:"moveEdge",value:function(t,s,f){for(var d=0;d<this.edges.length;d++){var v=this.edges[d],b=v.textPosition,O=b.x,P=b.y,M=this.edges[d].sourceNodeId===t,F=this.edges[d].targetNodeId===t;if(M&&v.moveStartPoint(s,f),F&&v.moveEndPoint(s,f),M||F){var Y;if(v.customTextPosition===!0)v.resetTextPosition();else if(v.modelType===Ze.POLYLINE_EDGE&&(Y=v.text)!==null&&Y!==void 0&&Y.value){var ne=v.text,ve=x0(ne,v.points);v.moveText(ve.x-ne.x,ve.y-ne.y)}else{var Le=v.textPosition,Ie=Le.x,Fe=Le.y;v.moveText(Ie-O,Fe-P)}}}}},{key:"deleteEdgeBySourceAndTarget",value:function(t,s){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===t&&this.edges[f].targetNodeId===s){var d=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(ze.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeById",value:function(t){var s=this.edgesMap[t];if(s){var f=this.edgesMap[t].index,d=this.edgesMap[t].model.getData();this.edges.splice(f,1),this.eventCenter.emit(ze.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeBySource",value:function(t){for(var s=0;s<this.edges.length;s++)if(this.edges[s].sourceNodeId===t){var f=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(ze.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(t){for(var s=0;s<this.edges.length;s++)if(this.edges[s].targetNodeId===t){var f=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(ze.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(t,s,f){this.nodes.forEach(function(d){d.id===t?d.setElementState(s,f):d.setElementState(ct.DEFAULT)}),this.edges.forEach(function(d){d.id===t?d.setElementState(s,f):d.setElementState(ct.DEFAULT)})}},{key:"updateText",value:function(t,s){this.nodes.forEach(function(f){f.id===t&&f.updateText(s)}),this.edges.forEach(function(f){f.id===t&&f.updateText(s)})}},{key:"selectNodeById",value:function(t){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f||this.clearSelectElements();var d=(s=this.nodesMap[t])===null||s===void 0?void 0:s.model;d==null||d.setSelected(!0)}},{key:"selectEdgeById",value:function(t){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f||this.clearSelectElements();var d=(s=this.edgesMap[t])===null||s===void 0?void 0:s.model;d==null||d.setSelected(!0)}},{key:"selectElementById",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s||this.clearSelectElements();var f=this.getElement(t);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){if(this.selectElements.forEach(function(s){s==null||s.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===mt.DEFAULT){var t;(t=this.topElement)===null||t===void 0||t.setZIndex()}}},{key:"moveNodes",value:function(t,s,f){for(var d=this,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,b=t.reduce(function(Ie,Fe){var Tt=d.nodesMap[Fe].model,Dt=Tt.getMoveDistance(s,f,v);return Ie[Fe]=Dt,Ie},{}),O=0;O<this.edges.length;O++){var P=this.edges[O],M=b[P.sourceNodeId],F=void 0,Y=void 0;if(M){var ne=ic(M,2);F=ne[0],Y=ne[1],P.moveStartPoint(F,Y)}var ve=b[P.sourceNodeId];if(ve){var Le=ic(ve,2);F=Le[0],Y=Le[1],P.moveEndPoint(F,Y)}(M||ve)&&P.moveText(F,Y)}}},{key:"addNodeMoveRules",value:function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)}},{key:"setDefaultEdgeType",value:function(t){this.edgeType=t}},{key:"changeNodeType",value:function(t,s){var f=this.getNodeModelById(t);if(!f){console.warn("id".concat(t,""));return}var d=f.getData();d.type=s;var v=this.getModel(s);if(!v)throw new Error("".concat(s,""));var b=new v(d,this);this.nodes.splice(this.nodesMap[t].index,1,b);var O=this.getNodeEdges(t);O.forEach(function(P){if(P.sourceNodeId===t){var M=NE(b,P.startPoint,b.width,b.height);P.updateStartPoint(M)}if(P.targetNodeId===t){var F=NE(b,P.endPoint,b.width,b.height);P.updateEndPoint(F)}})}},{key:"changeEdgeType",value:function(t,s){var f=this.getEdgeModelById(t);if(!f){console.warn("id".concat(t,""));return}if(f.type!==s){var d=f.getData();d.type=s;var v=this.getModel(s);if(!v)throw new Error("".concat(s,""));delete d.pointsList;var b=new v(d,this);this.edges.splice(this.edgesMap[t].index,1,b)}}},{key:"getNodeIncomingEdge",value:function(t){var s=[];return this.edges.forEach(function(f){f.targetNodeId===t&&s.push(f)}),s}},{key:"getNodeOutgoingEdge",value:function(t){var s=[];return this.edges.forEach(function(f){f.sourceNodeId===t&&s.push(f)}),s}},{key:"getNodeIncomingNode",value:function(t){var s=this,f=[];return this.edges.forEach(function(d){d.targetNodeId===t&&f.push(s.nodesMap[d.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(t){var s=this,f=[];return this.edges.forEach(function(d){d.sourceNodeId===t&&f.push(s.nodesMap[d.targetNodeId].model)}),f}},{key:"setTheme",value:function(t){this.theme=bE(Oh(Oh({},this.theme),t))}},{key:"resize",value:function(t,s){this.width=t||this.rootEl.getBoundingClientRect().width,this.height=s||this.rootEl.getBoundingClientRect().height,(!this.width||!this.height)&&console.warn("containerDOM@see https://github.com/didi/LogicFlow/issues/675")}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var t=this.nodes,s=[],f=[];t.forEach(function(ne){var ve=ne.x,Le=ne.y,Ie=ne.width,Fe=ne.height,Tt=ne.getNodeStyle(),Dt=Tt.strokeWidth,ut=Dt===void 0?0:Dt;s=s.concat([ve+Ie/2+ut,ve-Ie/2-ut]),f=f.concat([Le+Fe/2+ut,Le-Fe/2-ut])});var d=Math.min.apply(Math,fl(s)),v=Math.max.apply(Math,fl(s)),b=Math.min.apply(Math,fl(f)),O=Math.max.apply(Math,fl(f)),P=v-d||0,M=O-b||0,F=d+P/2,Y=b+M/2;return{virtualRectWidth:P,virtualRectHeight:M,virtualRectCenterPositionX:F,virtualRectCenterPositionY:Y}}},{key:"translateCenter",value:function(){var t=this.nodes,s=this.width,f=this.height,d=this.rootEl,v=this.transformModel;if(t.length){var b=s||d.clientWidth,O=f||d.clientHeight,P=this.getVirtualRectSize(),M=P.virtualRectCenterPositionX,F=P.virtualRectCenterPositionY;v.focusOn(M,F,b,O)}}},{key:"fitView",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,d=this.width,v=this.height,b=this.rootEl,O=this.transformModel;if(f.length){var P=d||b.clientWidth,M=v||b.clientHeight,F=this.getVirtualRectSize(),Y=F.virtualRectWidth,ne=F.virtualRectHeight,ve=F.virtualRectCenterPositionX,Le=F.virtualRectCenterPositionY,Ie=(Y+s)/P,Fe=(ne+t)/M,Tt=0;Tt=1/Math.max(Ie,Fe);var Dt=[P/2,M/2];O.zoom(Tt,Dt),O.focusOn(ve,Le,P,M)}}},{key:"openEdgeAnimation",value:function(t){var s=this.getEdgeModelById(t);s.openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(t){var s=this.getEdgeModelById(t);s.closeEdgeAnimation()}}]),e}(),w0=sr(We.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N0=sr(We.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M0=sr(We.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R0=sr(We.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D0=sr(We.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I0=sr(We.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.DEFAULT}}),C0=sr(We.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L0=sr(We.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j0=sr(We.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B0=sr(We.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F0=sr(We.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G0=sr(We.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr(We.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"nodesMap"),We.prototype),sr(We.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"edgesMap"),We.prototype),sr(We.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"modelsMap"),We.prototype),sr(We.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"sortElements"),We.prototype),sr(We.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"textEditElement"),We.prototype),sr(We.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"selectElements"),We.prototype),sr(We.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setFakerNode"),We.prototype),sr(We.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"removeFakerNode"),We.prototype),sr(We.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setModel"),We.prototype),sr(We.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"toFront"),We.prototype),sr(We.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setElementZIndex"),We.prototype),sr(We.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteNode"),We.prototype),sr(We.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"addNode"),We.prototype),sr(We.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"cloneNode"),We.prototype),sr(We.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNode"),We.prototype),sr(We.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNode2Coordinate"),We.prototype),sr(We.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"editText"),We.prototype),sr(We.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"addEdge"),We.prototype),sr(We.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveEdge"),We.prototype),sr(We.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeBySourceAndTarget"),We.prototype),sr(We.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeById"),We.prototype),sr(We.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeBySource"),We.prototype),sr(We.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeByTarget"),We.prototype),sr(We.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setElementStateById"),We.prototype),sr(We.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"updateText"),We.prototype),sr(We.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectNodeById"),We.prototype),sr(We.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectEdgeById"),We.prototype),sr(We.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectElementById"),We.prototype),sr(We.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"clearSelectElements"),We.prototype),sr(We.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNodes"),We.prototype),sr(We.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setDefaultEdgeType"),We.prototype),sr(We.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"changeNodeType"),We.prototype),sr(We.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"changeEdgeType"),We.prototype),sr(We.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeIncomingEdge"),We.prototype),sr(We.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeOutgoingEdge"),We.prototype),sr(We.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeIncomingNode"),We.prototype),sr(We.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeOutgoingNode"),We.prototype),sr(We.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setTheme"),We.prototype),sr(We.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"resize"),We.prototype),sr(We.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"clearData"),We.prototype),sr(We.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"translateCenter"),We.prototype),sr(We.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"fitView"),We.prototype),sr(We.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"openEdgeAnimation"),We.prototype),sr(We.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"closeEdgeAnimation"),We.prototype),We),qN=H0;function xh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xh=function(t){return typeof t}:xh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(e)}var X0;function Ag(){return Ag=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ag.apply(this,arguments)}function eM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function tM(e,r,t){return r&&$0(e.prototype,r),t&&$0(e,t),e}function rM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Pg(e,r)}function Pg(e,r){return Pg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Pg(e,r)}function nM(e){var r=iM();return function(){var s=Th(e),f;if(r){var d=Th(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return oM(this,f)}}function oM(e,r){if(r&&(xh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Di(e)}function Di(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Th(e)}function va(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var aM=ui(X0=function(e){rM(t,e);var r=nM(t);function t(s){var f;eM(this,t),f=r.call(this),va(Di(f),"stepDrag",void 0),va(Di(f),"stepScrollX",0),va(Di(f),"stepScrollY",0),va(Di(f),"onDragging",function(O){var P=O.deltaX,M=O.deltaY;f.setState({isDragging:!0});var F=f.props.graphModel,Y=F.transformModel,ne=F.editConfigModel;ne.stopMoveGraph||Y.translate(P,M)}),va(Di(f),"onDragEnd",function(){f.setState({isDragging:!1})}),va(Di(f),"zoomHandler",function(O){var P=f.props,M=P.graphModel,F=M.editConfigModel,Y=M.transformModel,ne=M.gridSize,ve=P.graphModel,Le=O.deltaX,Ie=O.deltaY;if(!F.stopScrollGraph&&O.ctrlKey!==!0){if(O.preventDefault(),f.stepScrollX+=Le,f.stepScrollY+=Ie,Math.abs(f.stepScrollX)>=ne){var Fe=f.stepScrollX%ne,Tt=f.stepScrollX-Fe;Y.translate(-Tt*Y.SCALE_X,0),f.stepScrollX=Fe}if(Math.abs(f.stepScrollY)>=ne){var Dt=f.stepScrollY%ne,ut=f.stepScrollY-Dt;Y.translate(0,-ut*Y.SCALE_Y),f.stepScrollY=Dt}return}if(!F.stopZoomGraph){O.preventDefault();var Ft=ve.getPointByClient({x:O.clientX,y:O.clientY}),Pt=Ft.canvasOverlayPosition,er=Pt.x,wt=Pt.y;Y.zoom(O.deltaY<0,[er,wt])}}),va(Di(f),"clickHandler",function(O){var P=O.target;if(P.getAttribute("name")==="canvas-overlay"){var M=f.props.graphModel,F=M.selectElements;F.size>0&&M.clearSelectElements(),M.eventCenter.emit(ze.BLANK_CLICK,{e:O})}}),va(Di(f),"handleContextMenu",function(O){var P=O.target;if(P.getAttribute("name")==="canvas-overlay"){O.preventDefault();var M=f.props.graphModel,F=M.getPointByClient({x:O.clientX,y:O.clientY});M.eventCenter.emit(ze.BLANK_CONTEXTMENU,{e:O,position:F})}}),va(Di(f),"mouseDownHandler",function(O){var P=f.props.graphModel,M=P.eventCenter,F=P.editConfigModel,Y=P.transformModel.SCALE_X,ne=P.gridSize,ve=O.target,Le=!F.adjustEdge&&!F.adjustNodePosition;(ve.getAttribute("name")==="canvas-overlay"||Le)&&(F.stopMoveGraph?M.emit(ze.BLANK_MOUSEDOWN,{e:O}):(f.stepDrag.setStep(ne*Y),f.stepDrag.handleMouseDown(O)),f.clickHandler(O))});var d=s.graphModel,v=d.gridSize,b=d.eventCenter;return f.stepDrag=new pa({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:v,eventType:"BLANK",isStopPropagation:!1,eventCenter:b,model:null}),f.state={isDragging:!1},f}return tM(t,[{key:"render",value:function(){var f=this.props.graphModel.transformModel,d=f.getTransformStyle(),v=d.transform,b=this.props,O=b.children,P=b.dnd,M=this.state.isDragging;return Object(Be.g)("svg",Ag({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:M?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},P.eventMap()),Object(Be.g)("g",{transform:v},O))}}]),t}(Be.a))||X0,sM=aM;function Ah(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ah=function(t){return typeof t}:Ah=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}var V0;function uM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function W0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function lM(e,r,t){return r&&W0(e.prototype,r),t&&W0(e,t),e}function fM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&_g(e,r)}function _g(e,r){return _g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},_g(e,r)}function cM(e){var r=pM();return function(){var s=Ph(e),f;if(r){var d=Ph(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return dM(this,f)}}function dM(e,r){if(r&&(Ah(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hM(e)}function hM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ph(e)}var vM=ui(V0=function(e){fM(t,e);var r=cM(t);function t(){return uM(this,t),r.apply(this,arguments)}return lM(t,[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,d=f.tool,v=f.graphModel,b=d.getTools(),O=b.map(function(P){return Object(Be.g)(P,{graphModel:v,logicFlow:d.instance})});return d.components=O,O}},{key:"triggerToolRender",value:function(){var f=this.props,d=f.tool,v=f.graphModel,b=document.querySelector("#ToolOverlay_".concat(v.flowId)),O=d.getInstance();O.components.forEach(function(P){return P(O,b)}),O.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Be.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}]),t}(Be.a))||V0;function _h(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_h=function(t){return typeof t}:_h=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function yM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Y0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function gM(e,r,t){return r&&Y0(e.prototype,r),t&&Y0(e,t),e}function mM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&wg(e,r)}function wg(e,r){return wg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},wg(e,r)}function bM(e){var r=SM();return function(){var s=wh(e),f;if(r){var d=wh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return EM(this,f)}}function EM(e,r){if(r&&(_h(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OM(e)}function OM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wh(e)}var xM=function(e){mM(t,e);var r=bM(t);function t(){return yM(this,t),r.apply(this,arguments)}return gM(t,[{key:"render",value:function(){var f=this.props.background;return Object(Be.g)("div",{className:"lf-background"},Object(Be.g)("div",{style:f,className:"lf-background-area"}))}}]),t}(Be.a);function Nh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nh=function(t){return typeof t}:Nh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh(e)}var K0;function TM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Z0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function AM(e,r,t){return r&&Z0(e.prototype,r),t&&Z0(e,t),e}function PM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ng(e,r)}function Ng(e,r){return Ng=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Ng(e,r)}function _M(e){var r=NM();return function(){var s=Mh(e),f;if(r){var d=Mh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return wM(this,f)}}function wM(e,r){if(r&&(Nh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J0(e)}function J0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mh(e){return Mh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mh(e)}function MM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Q0=ui(K0=function(e){PM(t,e);var r=_M(t);function t(){var s;TM(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),MM(J0(s),"id",ds()),s}return AM(t,[{key:"renderDot",value:function(){var f=this.props,d=f.config,v=d.color,b=d.thickness,O=b===void 0?2:b,P=f.size,M=f.visible,F=Math.min(Math.max(2,O),P/2),Y=1;return M||(Y=0),Object(Be.g)("rect",{width:F,height:F,rx:F/2,ry:F/2,fill:v,opacity:Y})}},{key:"renderMesh",value:function(){var f=this.props,d=f.config,v=d.color,b=d.thickness,O=b===void 0?1:b,P=f.size,M=f.visible,F=Math.min(Math.max(1,O),P/2),Y="M ".concat(P," 0 H0 M0 0 V0 ").concat(P),ne=1;return M||(ne=0),Object(Be.g)("path",{d:Y,stroke:v,strokeWidth:F,opacity:ne})}},{key:"render",value:function(){var f=this.props,d=f.type,v=f.size,b=f.graphModel.transformModel,O=b.SCALE_X,P=b.SKEW_Y,M=b.SKEW_X,F=b.SCALE_Y,Y=b.TRANSLATE_X,ne=b.TRANSLATE_Y,ve=[O,P,M,F,Y,ne].join(","),Le="matrix(".concat(ve,")");return Object(Be.g)("div",{className:"lf-grid"},Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Be.g)("defs",null,Object(Be.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:Le,x:"0",y:"0",width:v,height:v},d==="dot"&&this.renderDot(),d==="mesh"&&this.renderMesh())),Object(Be.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}]),t}(Be.a))||K0;Q0.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},o(52);function Rh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rh=function(t){return typeof t}:Rh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rh(e)}function RM(e,r){return LM(e)||CM(e,r)||IM(e,r)||DM()}function DM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IM(e,r){if(e){if(typeof e=="string")return q0(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return q0(e,r)}}function q0(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function CM(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function LM(e){if(Array.isArray(e))return e}function jM(e){var r={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(t){var s=RM(t,2),f=s[0],d=s[1];if(f==="style")r[f]=d;else{var v=Rh(d);v!=="object"&&(r[f]=d)}}),Object(Be.g)("line",r)}var cl=jM;function Dh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dh=function(t){return typeof t}:Dh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(e)}var eO;function tO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Ih(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?tO(Object(t),!0).forEach(function(s){BM(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function BM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function rO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function GM(e,r,t){return r&&rO(e.prototype,r),t&&rO(e,t),e}function kM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Mg(e,r)}function Mg(e,r){return Mg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Mg(e,r)}function UM(e){var r=XM();return function(){var s=Ch(e),f;if(r){var d=Ch(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return zM(this,f)}}function zM(e,r){if(r&&(Dh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HM(e)}function HM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ch(e){return Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ch(e)}var $M=ui(eO=function(e){kM(t,e);var r=UM(t);function t(){return FM(this,t),r.apply(this,arguments)}return GM(t,[{key:"render",value:function(){var f=this.props.snaplineModel,d=f.position,v=f.isShowHorizontal,b=f.isShowVertical,O=f.getStyle(),P=d.x,M=P===void 0?0:P,F=d.y,Y=F===void 0?0:F,ne=Ih(Ih({x1:-1e5,y1:Y,x2:1e5,y2:Y},O),{},{stroke:v?O.stroke:"none"}),ve=Ih(Ih({x1:M,y1:-1e5,x2:M,y2:1e5},O),{},{stroke:b?O.stroke:"none"});return Object(Be.g)("g",{className:"lf-snapline"},Object(Be.g)(cl,ne),Object(Be.g)(cl,ve))}}]),t}(Be.a))||eO;function Lh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lh=function(t){return typeof t}:Lh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lh(e)}function VM(e,r){return ZM(e)||KM(e,r)||YM(e,r)||WM()}function WM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YM(e,r){if(e){if(typeof e=="string")return nO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nO(e,r)}}function nO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function KM(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function ZM(e){if(Array.isArray(e))return e}function vs(e){var r=e.x,t=e.y,s=e.width,f=e.height,d=e.className,v=e.radius,b=r-s/2,O=t-f/2,P={};return Object.entries(e).forEach(function(M){var F=VM(M,2),Y=F[0],ne=F[1],ve=Lh(ne);ve!=="object"&&(P[Y]=ne)}),d?P.className="lf-basic-shape ".concat(d):P.className="lf-basic-shape",v&&(P.rx=v,P.ry=v),P.x=b,P.y=O,Object(Be.g)("rect",P)}vs.defaultProps={className:"",radius:""};function jh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jh=function(t){return typeof t}:jh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}var oO;function dl(){return dl=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},dl.apply(this,arguments)}function iO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function aO(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?iO(Object(t),!0).forEach(function(s){JM(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function JM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function QM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function sO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function qM(e,r,t){return r&&sO(e.prototype,r),t&&sO(e,t),e}function eR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Rg(e,r)}function Rg(e,r){return Rg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Rg(e,r)}function tR(e){var r=oR();return function(){var s=Bh(e),f;if(r){var d=Bh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return rR(this,f)}}function rR(e,r){if(r&&(jh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nR(e)}function nR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bh(e){return Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bh(e)}var iR=ui(oO=function(e){eR(t,e);var r=tR(t);function t(){return QM(this,t),r.apply(this,arguments)}return qM(t,[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,d=f.nodes,v=f.editConfigModel,b=v.hoverOutline,O=v.nodeSelectedOutline,P=[];return d.forEach(function(M){if(M.isHovered||M.isSelected){var F=M.isHovered,Y=M.isSelected,ne=M.x,ve=M.y,Le=M.width,Ie=M.height;if(O&&Y||b&&F){var Fe=M.getOutlineStyle(),Tt={};if(Object.keys(Fe).forEach(function(ut){ut!=="hover"&&(Tt[ut]=Fe[ut])}),F){var Dt=Fe.hover;Tt=aO(aO({},Tt),Dt)}P.push(Object(Be.g)(vs,dl({className:"lf-outline-node",x:ne,y:ve,width:Le+10,height:Ie+10},Tt)))}}}),P}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,d=f.edges,v=f.editConfigModel,b=v.edgeSelectedOutline,O=v.hoverOutline,P=[],M=0;M<d.length;M++){var F=d[M];(b&&F.isSelected||O&&F.isHovered)&&(F.modelType===Ze.LINE_EDGE?P.push(this.getLineOutline(F)):F.modelType===Ze.POLYLINE_EDGE?P.push(this.getPolylineOutline(F)):F.modelType===Ze.BEZIER_EDGE&&P.push(this.getBezierOutline(F)))}return P}},{key:"getLineOutline",value:function(f){var d=f.startPoint,v=f.endPoint,b=(d.x+v.x)/2,O=(d.y+v.y)/2,P=Math.abs(d.x-v.x)+10,M=Math.abs(d.y-v.y)+10,F=f.getOutlineStyle();return Object(Be.g)(vs,dl({className:"lf-outline-edge",x:b,y:O,width:P,height:M},F))}},{key:"getPolylineOutline",value:function(f){var d=f.points,v=ul(d),b=nc(v,8),O=b.x,P=b.y,M=b.width,F=b.height,Y=f.getOutlineStyle();return Object(Be.g)(vs,dl({className:"lf-outline",x:O,y:P,width:M,height:F},Y))}},{key:"getBezierOutline",value:function(f){var d=f.path,v=bh(d),b=nc(v,8),O=b.x,P=b.y,M=b.width,F=b.height,Y=f.getOutlineStyle();return Object(Be.g)(vs,dl({className:"lf-outline",x:O,y:P,width:M,height:F},Y))}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}]),t}(Be.a))||oO;function Fh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fh=function(t){return typeof t}:Fh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fh(e)}function aR(e,r){return fR(e)||lR(e,r)||uR(e,r)||sR()}function sR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uR(e,r){if(e){if(typeof e=="string")return uO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uO(e,r)}}function uO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function lR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function fR(e){if(Array.isArray(e))return e}function sc(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.r,v=d===void 0?4:d,b=e.className,O={cx:t,cy:f,r:v,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(P){var M=aR(P,2),F=M[0],Y=M[1],ne=Fh(Y);ne!=="object"&&(O[F]=Y)}),b?O.className="lf-basic-shape ".concat(b):O.className="lf-basic-shape",Object(Be.g)("circle",O)}function Gh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gh=function(t){return typeof t}:Gh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}var lO;function cR(e,r){return vR(e)||pR(e,r)||hR(e,r)||dR()}function dR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hR(e,r){if(e){if(typeof e=="string")return fO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fO(e,r)}}function fO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function pR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function vR(e){if(Array.isArray(e))return e}function uc(){return uc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},uc.apply(this,arguments)}function cO(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function dO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function hO(e,r,t){return r&&dO(e.prototype,r),t&&dO(e,t),e}function pO(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Dg(e,r)}function Dg(e,r){return Dg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Dg(e,r)}function vO(e){var r=gR();return function(){var s=Uh(e),f;if(r){var d=Uh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return yR(this,f)}}function yR(e,r){if(r&&(Gh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kh(e)}function kh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Uh(e)}function Ig(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var yO=function(e){pO(t,e);var r=vO(t);function t(){var s;return cO(this,t),s=r.call(this),Ig(kh(s),"dragHandler",void 0),Ig(kh(s),"onDragging",function(f){var d=f.event,v=s.props,b=v.graphModel,O=v.bezierModel,P=v.type,M=b.getPointByClient({x:d.clientX,y:d.clientY}),F=M.canvasOverlayPosition,Y=F.x,ne=F.y;O.updateAdjustAnchor({x:Y,y:ne},P)}),Ig(kh(s),"onDragEnd",function(){var f=s.props.bezierModel;f.isDragging=!1}),s.dragHandler=new pa({onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return hO(t,[{key:"render",value:function(){var f=this,d=this.props.position,v=d.x,b=d.y,O=this.props.bezierModel,P=O.getEdgeStyle(),M=P.adjustAnchor;return Object(Be.g)(sc,uc({className:"lf-bezier-adjust-anchor",x:v,y:b},M,{onMouseDown:function(Y){f.dragHandler.handleMouseDown(Y)}}))}}]),t}(Be.a),mR=ui(lO=function(e){pO(t,e);var r=vO(t);function t(){return cO(this,t),r.apply(this,arguments)}return hO(t,[{key:"getBezierAdjust",value:function(f,d){var v=f.path,b=f.id,O=bh(v),P=cR(O,4),M=P[0],F=P[1],Y=P[2],ne=P[3],ve=f.getEdgeStyle(),Le=ve.adjustLine,Ie=[];return Ie.push(Object(Be.g)(cl,uc({x1:M.x,y1:M.y,x2:F.x,y2:F.y},Le))),Ie.push(Object(Be.g)(yO,{position:F,bezierModel:f,graphModel:d,key:"".concat(b,"_ePre"),type:"sNext"})),Ie.push(Object(Be.g)(cl,uc({x1:ne.x,y1:ne.y,x2:Y.x,y2:Y.y},Le))),Ie.push(Object(Be.g)(yO,{position:Y,bezierModel:f,graphModel:d,key:"".concat(b,"_sNext"),type:"ePre"})),Ie}},{key:"selectedBezierEdge",value:function(){for(var f=this.props.graphModel,d=f.edges,v=[],b=0;b<d.length;b++){var O=d[b];O.isSelected&&O.modelType===Ze.BEZIER_EDGE&&O.draggable&&v.push(this.getBezierAdjust(O,f))}return v}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),t}(Be.a))||lO;function zh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zh=function(t){return typeof t}:zh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}var gO;function bR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function mO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ER(e,r,t){return r&&mO(e.prototype,r),t&&mO(e,t),e}function OR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Cg(e,r)}function Cg(e,r){return Cg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Cg(e,r)}function SR(e){var r=AR();return function(){var s=Hh(e),f;if(r){var d=Hh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return xR(this,f)}}function xR(e,r){if(r&&(zh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TR(e)}function TR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Hh(e)}var PR=ui(gO=function(e){OR(t,e);var r=SR(t);function t(){return bR(this,t),r.apply(this,arguments)}return ER(t,[{key:"render",value:function(){var f=this.props.graphModel.transformModel,d=f.getTransformStyle(),v=d.transform,b=this.props.children;return Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Be.g)("g",{transform:v},b))}}]),t}(Be.a))||gO;function Xh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xh=function(t){return typeof t}:Xh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}var bO;function Lg(){return Lg=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Lg.apply(this,arguments)}function _R(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function EO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function wR(e,r,t){return r&&EO(e.prototype,r),t&&EO(e,t),e}function NR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&jg(e,r)}function jg(e,r){return jg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},jg(e,r)}function MR(e){var r=IR();return function(){var s=$h(e),f;if(r){var d=$h(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return RR(this,f)}}function RR(e,r){if(r&&(Xh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DR(e)}function DR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $h(e){return $h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$h(e)}var CR=ui(bO=function(e){NR(t,e);var r=MR(t);function t(){return _R(this,t),r.apply(this,arguments)}return wR(t,[{key:"getComponent",value:function(f,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",b=this.props.getView,O=b(f.type);return Object(Be.g)(O,{key:f.id,model:f,graphModel:d,overlay:v})}},{key:"render",value:function(){var f=this,d=this.props,v=d.graphModel,b=d.tool,O=d.options,P=d.dnd,M=d.snaplineModel,F={};O.width&&(F.width="".concat(v.width,"px")),O.height&&(F.height="".concat(v.height,"px"));var Y=O.grid,ne=v.fakerNode,ve=v.editConfigModel,Le=ve.adjustEdge;return Object(Be.g)("div",{className:"lf-graph","flow-id":v.flowId,style:F},Object(Be.g)(sM,{graphModel:v,dnd:P},Object(Be.g)("g",{className:"lf-base"},la(v.sortElements,function(Ie){return f.getComponent(Ie,v)})),ne?this.getComponent(ne,v):""),Object(Be.g)(PR,{graphModel:v},Object(Be.g)(iR,{graphModel:v}),Le?Object(Be.g)(mR,{graphModel:v}):"",O.snapline!==!1?Object(Be.g)($M,{snaplineModel:M}):""),Object(Be.g)(vM,{graphModel:v,tool:b}),O.background&&Object(Be.g)(xM,{background:O.background}),O.grid&&Object(Be.g)(Q0,Lg({},Y,{graphModel:v})))}}]),t}(Be.a))||bO,LR=CR;function OO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Vh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?OO(Object(t),!0).forEach(function(s){ya(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function jR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function SO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function BR(e,r,t){return r&&SO(e.prototype,r),t&&SO(e,t),e}function ya(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var FR=function(){function e(r){var t=this;jR(this,e),ya(this,"nodeConfig",void 0),ya(this,"lf",void 0),ya(this,"fakerNode",void 0),ya(this,"stopDrag",function(){t.nodeConfig=null,window.document.removeEventListener("mouseup",t.stopDrag)}),ya(this,"dragEnter",function(f){!t.nodeConfig||t.fakerNode||(t.fakerNode=t.lf.createFakerNode(Vh(Vh({},t.nodeConfig),t.clientToLocalPoint({x:f.clientX,y:f.clientY}))))}),ya(this,"onDragOver",function(f){if(f.preventDefault(),t.fakerNode){var d=t.clientToLocalPoint({x:f.clientX,y:f.clientY}),v=d.x,b=d.y;t.fakerNode.moveTo(v,b);var O=t.fakerNode.getData();t.lf.setNodeSnapLine(O),t.lf.graphModel.eventCenter.emit(ze.NODE_DND_DRAG,{data:O})}return!1}),ya(this,"onDragLeave",function(){t.fakerNode&&(t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakerNode(),t.fakerNode=null)}),ya(this,"onDrop",function(f){if(!(!t.lf.graphModel||!f||!t.nodeConfig)){var d=t.lf.addNode(Vh(Vh({},t.nodeConfig),t.clientToLocalPoint({x:f.clientX,y:f.clientY})),ze.NODE_DND_ADD);f.preventDefault(),f.stopPropagation(),t.nodeConfig=null,t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakerNode(),t.fakerNode=null,d.getData()}});var s=r.lf;this.lf=s}return BR(e,[{key:"clientToLocalPoint",value:function(t){var s=t.x,f=t.y,d=ns(this.lf.options,["grid","size"]),v=this.lf.graphModel.getPointByClient({x:s,y:f}),b=v.canvasOverlayPosition,O=b.x,P=b.y;return{x:cs(O,d),y:cs(P,d)}}},{key:"startDrag",value:function(t){this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}]),e}();function xO(e){var r=e.container,t=e.grid,s=e.width,f=e.height;if(!r)throw new Error(" container ");if(typeof s=="string"||typeof f=="string")throw new Error("widthheight");return t&&(e.grid=Mn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},t)),Mn({},TO,e)}var TO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function Wh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wh=function(t){return typeof t}:Wh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(e)}var Gr,AO;function Bg(e,r){return zR(e)||UR(e,r)||kR(e,r)||GR()}function GR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kR(e,r){if(e){if(typeof e=="string")return PO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return PO(e,r)}}function PO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function UR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function zR(e){if(Array.isArray(e))return e}function _O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Yh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?_O(Object(t),!0).forEach(function(s){NO(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_O(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function HR(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function XR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function wO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function $R(e,r,t){return r&&wO(e.prototype,r),t&&wO(e,t),e}function hl(){return typeof Reflect<"u"&&Reflect.get?hl=Reflect.get:hl=function(r,t,s){var f=VR(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},hl.apply(this,arguments)}function VR(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ys(e),e!==null););return e}function WR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Fg(e,r)}function Fg(e,r){return Fg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Fg(e,r)}function YR(e){var r=ZR();return function(){var s=ys(e),f;if(r){var d=ys(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return KR(this,f)}}function KR(e,r){if(r&&(Wh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kh(e)}function Kh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ys(e){return ys=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ys(e)}function NO(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ii(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Gg=(Gr=function(e){WR(t,e);var r=YR(t);function t(){var s;XR(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),NO(Kh(s),"modelType",Ze.BEZIER_EDGE),HR(Kh(s),"path",AO,Kh(s)),s}return $R(t,[{key:"initEdgeData",value:function(f){this.offset=100,hl(ys(t.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier,d=hl(ys(t.prototype),"getEdgeStyle",this).call(this);return Yh(Yh({},d),gn(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,d=0;return this.pointsList.forEach(function(v){var b=v.x,O=v.y;f+=b,d+=O}),{x:f/this.pointsList.length,y:d/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=hl(ys(t.prototype),"getData",this).call(this),d=this.pointsList.map(function(v){var b=v.x,O=v.y;return{x:b,y:O}});return Yh(Yh({},f),{},{pointsList:d})}},{key:"getControls",value:function(){var f=this.startPoint,d=this.endPoint,v=S0({start:f,end:d,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return v}},{key:"getPath",value:function(f){var d=Bg(f,4),v=d[0],b=d[1],O=d[2],P=d[3];return"M ".concat(v.x," ").concat(v.y,`
    C `).concat(b.x," ").concat(b.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(P.x," ").concat(P.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),d=f.sNext,v=f.ePre;this.updatePath(d,v)}},{key:"updatePath",value:function(f,d){var v={x:this.startPoint.x,y:this.startPoint.y},b={x:this.endPoint.x,y:this.endPoint.y};if(!f||!d){var O=this.getControls();f=O.sNext,d=O.ePre}this.pointsList=[v,f,d,b],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,d){this.startPoint.x+=f,this.startPoint.y+=d;var v=Bg(this.pointsList,3),b=v[1],O=v[2];b.x+=f,b.y+=d,this.updatePath(b,O)}},{key:"moveEndPoint",value:function(f,d){this.endPoint.x+=f,this.endPoint.y+=d;var v=Bg(this.pointsList,3),b=v[1],O=v[2];O.x+=f,O.y+=d,this.updatePath(b,O)}},{key:"updateAdjustAnchor",value:function(f,d){d==="sNext"?this.pointsList[1]=f:d==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var d=f.startPoint,v=f.endPoint,b=f.sourceNode,O=f.targetNode,P=S0({start:d,end:v,sourceNode:b,targetNode:O,offset:this.offset}),M=P.sNext,F=P.ePre;this.pointsList=[d,M,F,v],this.initPoints()}}]),t}(pg),AO=ii(Gr.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ii(Gr.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"initPoints"),Gr.prototype),ii(Gr.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updatePoints"),Gr.prototype),ii(Gr.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateStartPoint"),Gr.prototype),ii(Gr.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateEndPoint"),Gr.prototype),ii(Gr.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"moveStartPoint"),Gr.prototype),ii(Gr.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"moveEndPoint"),Gr.prototype),ii(Gr.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateAdjustAnchor"),Gr.prototype),ii(Gr.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"getAdjustStart"),Gr.prototype),ii(Gr.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"getAdjustEnd"),Gr.prototype),ii(Gr.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateAfterAdjustStartAndEnd"),Gr.prototype),Gr);function JR(e){return e==null}var QR=JR,Bt,MO,RO,DO,IO,CO,LO,jO,BO,FO,GO,kO,UO,zO,HO,XO,$O,VO,WO,YO;function Zh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zh=function(t){return typeof t}:Zh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(e)}function qR(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=eD(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var s=0,f=function(){};return{s:f,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(P){throw P},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,v=!1,b;return{s:function(){t=t.call(e)},n:function(){var P=t.next();return d=P.done,P},e:function(P){v=!0,b=P},f:function(){try{!d&&t.return!=null&&t.return()}finally{if(v)throw b}}}}function eD(e,r){if(e){if(typeof e=="string")return KO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KO(e,r)}}function KO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function ZO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function lo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ZO(Object(t),!0).forEach(function(s){bo(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Rn(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function tD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function JO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function rD(e,r,t){return r&&JO(e.prototype,r),t&&JO(e,t),e}function bo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Mr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var ga=(Bt=function(){function e(r,t){tD(this,e),bo(this,"id",""),Rn(this,"type",MO,this),Rn(this,"x",RO,this),Rn(this,"y",DO,this),Rn(this,"text",IO,this),Rn(this,"properties",CO,this),Rn(this,"_width",LO,this),Rn(this,"_height",jO,this),Rn(this,"anchorsOffset",BO,this),Rn(this,"isSelected",FO,this),Rn(this,"isHovered",GO,this),Rn(this,"isShowAnchor",kO,this),Rn(this,"isDragging",UO,this),Rn(this,"isHitable",zO,this),Rn(this,"draggable",HO,this),Rn(this,"visible",XO,this),bo(this,"virtual",!1),bo(this,"graphModel",void 0),Rn(this,"zIndex",$O,this),Rn(this,"state",VO,this),Rn(this,"autoToFront",WO,this),Rn(this,"style",YO,this),bo(this,"BaseType",Ve.NODE),bo(this,"modelType",Ze.NODE),bo(this,"additionStateData",void 0),bo(this,"targetRules",[]),bo(this,"sourceRules",[]),bo(this,"moveRules",[]),bo(this,"hasSetTargetRules",!1),bo(this,"hasSetSourceRules",!1),this.graphModel=t,this.initNodeData(r),this.setAttributes()}return rD(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var s=this.graphModel.idGenerator,f=s&&s(t.type),d=this.createId();t.id=d||f||ds()}this.formatText(t),Mn(this,H1(t));var v=this.graphModel.overlapMode;v===mt.INCREASE&&(this.zIndex=t.zIndex||dg())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(t){t.text||(t.text={value:"",x:t.x,y:t.y,draggable:!1,editable:!0}),t.text&&typeof t.text=="string"?t.text={value:t.text,x:t.x,y:t.y,draggable:!1,editable:!0}:t.text&&t.text.editable===void 0&&(t.text.editable=!0)}},{key:"getData",value:function(){var t=this.text,s=t.x,f=t.y,d=t.value,v=this.properties;Object(c.x)(v)&&(v=Object(c.I)(v));var b={id:this.id,type:this.type,x:this.x,y:this.y,properties:v};return this.graphModel.overlapMode===mt.INCREASE&&(b.zIndex=this.zIndex),d&&(b.text={x:s,y:f,value:d}),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getNodeStyle",value:function(){return lo(lo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.nodeText;return gn(t)}},{key:"getAnchorStyle",value:function(t){var s=this.graphModel.theme.anchor;return gn(s)}},{key:"getAnchorLineStyle",value:function(t){var s=this.graphModel.theme.anchorLine;return gn(s)}},{key:"getOutlineStyle",value:function(){var t=this.graphModel.theme.outline;return gn(t)}},{key:"isAllowConnectedAsSource",value:function(t,s,f,d){var v=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var b=!0,O,P=0;P<v.length;P++){var M=v[P];if(!M.validate.call(this,this,t,s,f,d)){b=!1,O=M.message;break}}return{isAllPass:b,msg:O}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(t,s,f,d){var v=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var b=!0,O,P=0;P<v.length;P++){var M=v[P];if(!M.validate.call(this,t,this,s,f,d)){b=!1,O=M.message;break}}return{isAllPass:b,msg:O}}},{key:"isAllowMoveNode",value:function(t,s){var f=!0,d=!0,v=this.moveRules.concat(this.graphModel.nodeMoveRules),b=qR(v),O;try{for(b.s();!(O=b.n()).done;){var P=O.value,M=P(this,t,s);if(!M)return!1;if(Zh(M)==="object"){var F=M;if(F.x===!1&&F.y===!1)return!1;f=f&&F.x,d=d&&F.y}}}catch(Y){b.e(Y)}finally{b.f()}return{x:f,y:d}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var t=this.anchorsOffset,s=this.id,f=this.x,d=this.y;return t&&t.length>0?t.map(function(v,b){return v.length?(v=v,{id:"".concat(s,"_").concat(b),x:f+v[0],y:d+v[1]}):(v=v,lo(lo({},v),{},{x:f+v.x,y:d+v.y,id:v.id||"".concat(s,"_").concat(b)}))}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(t){return k1(t,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(t){if(!QR(t))for(var s=0;s<this.anchors.length;s++){var f=this.anchors[s];if(f.id===t)return f}}},{key:"addNodeMoveRules",value:function(t){this.moveRules.includes(t)||this.moveRules.push(t)}},{key:"move",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=!1,v=!1;if(f)d=!0,v=!0;else{var b=this.isAllowMoveNode(t,s);typeof b=="boolean"?(d=b,v=b):(d=b.x,v=b.y)}if(d){var O=this.x+t;this.x=O,this.text&&this.moveText(t,0)}if(v){var P=this.y+s;this.y=P,this.text&&this.moveText(0,s)}return d||v}},{key:"getMoveDistance",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=!1,v=!1,b=0,O=0;if(f)d=!0,v=!0;else{var P=this.isAllowMoveNode(t,s);typeof P=="boolean"?(d=P,v=P):(d=P.x,v=P.y)}if(d&&t){var M=this.x+t;this.x=M,this.text&&this.moveText(t,0),b=t}if(v&&s){var F=this.y+s;this.y=F,this.text&&this.moveText(0,s),O=s}return[b,O]}},{key:"moveTo",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=t-this.x,v=s-this.y;return!f&&!this.isAllowMoveNode(d,v)?!1:(this.text&&this.text&&this.moveText(d,v),this.x=t,this.y=s,!0)}},{key:"moveText",value:function(t,s){var f=this.text,d=f.x,v=f.y,b=f.value,O=f.draggable,P=f.editable;this.text={value:b,editable:P,draggable:O,x:d+t,y:v+s}}},{key:"updateText",value:function(t){this.text=lo(lo({},this.text),{},{value:t})}},{key:"setSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSelected=t}},{key:"setHovered",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHovered=t,this.setIsShowAnchor(t)}},{key:"setIsShowAnchor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isShowAnchor=t}},{key:"setHitable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHitable=t}},{key:"setElementState",value:function(t,s){this.state=t,this.additionStateData=s}},{key:"setProperty",value:function(t,s){this.properties=lo(lo({},this.properties),{},bo({},t,Zn(s))),this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=lo(lo({},this.properties),Zn(t)),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setStyle",value:function(t,s){this.style=lo(lo({},this.style),{},bo({},t,Zn(s)))}},{key:"setStyles",value:function(t){this.style=lo(lo({},this.style),Zn(t))}},{key:"updateStyles",value:function(t){this.style=lo({},Zn(t))}},{key:"setZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=t}},{key:"updateAttributes",value:function(t){Mn(this,t)}}]),e}(),MO=Mr(Bt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),RO=Mr(Bt.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),DO=Mr(Bt.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),IO=Mr(Bt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),CO=Mr(Bt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),LO=Mr(Bt.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),jO=Mr(Bt.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),BO=Mr(Bt.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),FO=Mr(Bt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),GO=Mr(Bt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kO=Mr(Bt.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),UO=Mr(Bt.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zO=Mr(Bt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),HO=Mr(Bt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),XO=Mr(Bt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$O=Mr(Bt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),VO=Mr(Bt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),WO=Mr(Bt.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),YO=Mr(Bt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Mr(Bt.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(Bt.prototype,"incoming"),Bt.prototype),Mr(Bt.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(Bt.prototype,"outgoing"),Bt.prototype),Mr(Bt.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"addNodeMoveRules"),Bt.prototype),Mr(Bt.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"move"),Bt.prototype),Mr(Bt.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"getMoveDistance"),Bt.prototype),Mr(Bt.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"moveTo"),Bt.prototype),Mr(Bt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"moveText"),Bt.prototype),Mr(Bt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateText"),Bt.prototype),Mr(Bt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setSelected"),Bt.prototype),Mr(Bt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setHovered"),Bt.prototype),Mr(Bt.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setIsShowAnchor"),Bt.prototype),Mr(Bt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setHitable"),Bt.prototype),Mr(Bt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setElementState"),Bt.prototype),Mr(Bt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setProperty"),Bt.prototype),Mr(Bt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setProperties"),Bt.prototype),Mr(Bt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"deleteProperty"),Bt.prototype),Mr(Bt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setStyle"),Bt.prototype),Mr(Bt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setStyles"),Bt.prototype),Mr(Bt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateStyles"),Bt.prototype),Mr(Bt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setZIndex"),Bt.prototype),Mr(Bt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateAttributes"),Bt.prototype),Bt);function Jh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jh=function(t){return typeof t}:Jh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}var ma,QO;function qO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function eS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?qO(Object(t),!0).forEach(function(s){rS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function nD(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function oD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function tS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function iD(e,r,t){return r&&tS(e.prototype,r),t&&tS(e,t),e}function Qh(){return typeof Reflect<"u"&&Reflect.get?Qh=Reflect.get:Qh=function(r,t,s){var f=aD(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},Qh.apply(this,arguments)}function aD(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=pl(e),e!==null););return e}function sD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&kg(e,r)}function kg(e,r){return kg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},kg(e,r)}function uD(e){var r=fD();return function(){var s=pl(e),f;if(r){var d=pl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return lD(this,f)}}function lD(e,r){if(r&&(Jh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qh(e)}function qh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pl(e){return pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pl(e)}function rS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ug(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var zg=(ma=function(e){sD(t,e);var r=uD(t);function t(){var s;oD(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),rS(qh(s),"modelType",Ze.CIRCLE_NODE),nD(qh(s),"r",QO,qh(s)),s}return iD(t,[{key:"width",get:function(){return this.r*2}},{key:"height",get:function(){return this.r*2}},{key:"getNodeStyle",value:function(){var f=Qh(pl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.circle;return eS(eS({},f),gn(d))}},{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.r;return[{x:f,y:d-v,id:"".concat(this.id,"_0")},{x:f+v,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+v,id:"".concat(this.id,"_2")},{x:f-v,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ga),QO=Ug(ma.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Ug(ma.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ma.prototype,"width"),ma.prototype),Ug(ma.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ma.prototype,"height"),ma.prototype),ma);o(127);function ep(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ep=function(t){return typeof t}:ep=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}var Jn,nS,oS;function Hg(e,r){return pD(e)||hD(e,r)||dD(e,r)||cD()}function cD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dD(e,r){if(e){if(typeof e=="string")return iS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return iS(e,r)}}function iS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function hD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function pD(e){if(Array.isArray(e))return e}function aS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function sS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?aS(Object(t),!0).forEach(function(s){fS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function uS(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function vD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function lS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function yD(e,r,t){return r&&lS(e.prototype,r),t&&lS(e,t),e}function tp(){return typeof Reflect<"u"&&Reflect.get?tp=Reflect.get:tp=function(r,t,s){var f=gD(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},tp.apply(this,arguments)}function gD(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=yl(e),e!==null););return e}function mD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Xg(e,r)}function Xg(e,r){return Xg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Xg(e,r)}function bD(e){var r=OD();return function(){var s=yl(e),f;if(r){var d=yl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return ED(this,f)}}function ED(e,r){if(r&&(ep(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vl(e)}function vl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yl(e){return yl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yl(e)}function fS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function gl(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var $g=(Jn=function(e){mD(t,e);var r=bD(t);function t(){var s;vD(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),fS(vl(s),"modelType",Ze.DIAMOND_NODE),uS(vl(s),"rx",nS,vl(s)),uS(vl(s),"ry",oS,vl(s)),s}return yD(t,[{key:"getNodeStyle",value:function(){var f=tp(yl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.diamond;return sS(sS({},f),gn(d))}},{key:"points",get:function(){var f=this.x,d=this.y,v=this.rx,b=this.ry;return[[f,d-b],[f+v,d],[f,d+b],[f-v,d]]}},{key:"pointsPosition",get:function(){var f=this.points.map(function(d){return{x:d[0],y:d[1]}});return f}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Hg(v,1),O=b[0];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Hg(v,2),O=b[1];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(d,v){var b=Hg(d,2),O=b[0],P=b[1];return{x:O,y:P,id:"".concat(f.id,"_").concat(v)}})}}]),t}(ga),nS=gl(Jn.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),oS=gl(Jn.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),gl(Jn.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"points"),Jn.prototype),gl(Jn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"pointsPosition"),Jn.prototype),gl(Jn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"width"),Jn.prototype),gl(Jn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"height"),Jn.prototype),Jn);function rp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rp=function(t){return typeof t}:rp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}var Ii,cS,dS;function hS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function pS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?hS(Object(t),!0).forEach(function(s){gS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function vS(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function SD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function yS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function xD(e,r,t){return r&&yS(e.prototype,r),t&&yS(e,t),e}function np(){return typeof Reflect<"u"&&Reflect.get?np=Reflect.get:np=function(r,t,s){var f=TD(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},np.apply(this,arguments)}function TD(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=bl(e),e!==null););return e}function AD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Vg(e,r)}function Vg(e,r){return Vg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Vg(e,r)}function PD(e){var r=wD();return function(){var s=bl(e),f;if(r){var d=bl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return _D(this,f)}}function _D(e,r){if(r&&(rp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ml(e)}function ml(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bl(e){return bl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},bl(e)}function gS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function op(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Wg=(Ii=function(e){AD(t,e);var r=PD(t);function t(){var s;SD(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),gS(ml(s),"modelType",Ze.ELLIPSE_NODE),vS(ml(s),"rx",cS,ml(s)),vS(ml(s),"ry",dS,ml(s)),s}return xD(t,[{key:"getNodeStyle",value:function(){var f=np(bl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.ellipse;return pS(pS({},f),gn(d))}},{key:"width",get:function(){return this.rx*2}},{key:"height",get:function(){return this.ry*2}},{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.rx,b=this.ry;return[{x:f,y:d-b,id:"".concat(this.id,"_0")},{x:f+v,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b,id:"".concat(this.id,"_2")},{x:f-v,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ga),cS=op(Ii.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),dS=op(Ii.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),op(Ii.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ii.prototype,"width"),Ii.prototype),op(Ii.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ii.prototype,"height"),Ii.prototype),Ii);function ip(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ip=function(t){return typeof t}:ip=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}var Uo,mS;function Yg(e,r){return DD(e)||RD(e,r)||MD(e,r)||ND()}function ND(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MD(e,r){if(e){if(typeof e=="string")return bS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bS(e,r)}}function bS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function RD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function DD(e){if(Array.isArray(e))return e}function ES(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function OS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ES(Object(t),!0).forEach(function(s){xS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ES(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function ID(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function CD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function SS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function LD(e,r,t){return r&&SS(e.prototype,r),t&&SS(e,t),e}function ap(){return typeof Reflect<"u"&&Reflect.get?ap=Reflect.get:ap=function(r,t,s){var f=jD(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},ap.apply(this,arguments)}function jD(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=El(e),e!==null););return e}function BD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Kg(e,r)}function Kg(e,r){return Kg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Kg(e,r)}function FD(e){var r=kD();return function(){var s=El(e),f;if(r){var d=El(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return GD(this,f)}}function GD(e,r){if(r&&(ip(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sp(e)}function sp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function El(e){return El=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},El(e)}function xS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function up(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Zg=(Uo=function(e){BD(t,e);var r=FD(t);function t(){var s;CD(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),xS(sp(s),"modelType",Ze.POLYGON_NODE),ID(sp(s),"points",mS,sp(s)),s}return LD(t,[{key:"getNodeStyle",value:function(){var f=ap(El(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.polygon;return OS(OS({},f),gn(d))}},{key:"pointsPosition",get:function(){var f=this.x,d=this.y,v=this.width,b=this.height,O=this.points.map(function(P){return{x:P[0]+f-v/2,y:P[1]+d-b/2}});return O}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Yg(v,1),O=b[0];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Yg(v,2),O=b[1];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"getDefaultAnchor",value:function(){var f=this,d=this.x,v=this.y,b=this.width,O=this.height,P=this.points;return P.map(function(M,F){var Y=Yg(M,2),ne=Y[0],ve=Y[1];return{x:d+ne-b/2,y:v+ve-O/2,id:"".concat(f.id,"_").concat(F)}})}}]),t}(ga),mS=up(Uo.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),up(Uo.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"pointsPosition"),Uo.prototype),up(Uo.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"width"),Uo.prototype),up(Uo.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"height"),Uo.prototype),Uo);function lp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lp=function(t){return typeof t}:lp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}var Jg,TS;function AS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function PS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?AS(Object(t),!0).forEach(function(s){wS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function UD(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function zD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _S(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function HD(e,r,t){return r&&_S(e.prototype,r),t&&_S(e,t),e}function fp(){return typeof Reflect<"u"&&Reflect.get?fp=Reflect.get:fp=function(r,t,s){var f=XD(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},fp.apply(this,arguments)}function XD(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Ol(e),e!==null););return e}function $D(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Qg(e,r)}function Qg(e,r){return Qg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Qg(e,r)}function VD(e){var r=YD();return function(){var s=Ol(e),f;if(r){var d=Ol(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return WD(this,f)}}function WD(e,r){if(r&&(lp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cp(e)}function cp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ol(e){return Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ol(e)}function wS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function KD(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var qg=(Jg=function(e){$D(t,e);var r=VD(t);function t(){var s;zD(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),wS(cp(s),"modelType",Ze.RECT_NODE),UD(cp(s),"radius",TS,cp(s)),s}return HD(t,[{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.width,b=this.height;return[{x:f,y:d-b/2,id:"".concat(this.id,"_0")},{x:f+v/2,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b/2,id:"".concat(this.id,"_2")},{x:f-v/2,y:d,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=fp(Ol(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.rect;return PS(PS({},f),gn(d))}}]),t}(ga),TS=KD(Jg.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Jg);function dp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dp=function(t){return typeof t}:dp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}var gs;function NS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function MS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?NS(Object(t),!0).forEach(function(s){IS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):NS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function ZD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function RS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function JD(e,r,t){return r&&RS(e.prototype,r),t&&RS(e,t),e}function hp(){return typeof Reflect<"u"&&Reflect.get?hp=Reflect.get:hp=function(r,t,s){var f=QD(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},hp.apply(this,arguments)}function QD(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Sl(e),e!==null););return e}function qD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&em(e,r)}function em(e,r){return em=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},em(e,r)}function eI(e){var r=rI();return function(){var s=Sl(e),f;if(r){var d=Sl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return tI(this,f)}}function tI(e,r){if(r&&(dp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DS(e)}function DS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sl(e){return Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sl(e)}function IS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function CS(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var tm=(gs=function(e){qD(t,e);var r=eI(t);function t(){var s;ZD(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),IS(DS(s),"modelType",Ze.TEXT_NODE),s}return JD(t,[{key:"getTextStyle",value:function(){var f=hp(Sl(t.prototype),"getTextStyle",this).call(this),d=this.graphModel.theme.text;return MS(MS({},f),gn(d))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),d=this.getTextStyle(),v=d.fontSize,b=cg({rows:f,fontSize:v,rowsLength:f.length}),O=b.width;return O}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),d=this.getTextStyle(),v=d.fontSize,b=cg({rows:f,fontSize:v,rowsLength:f.length}),O=b.height;return O}}]),t}(ga),CS(gs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(gs.prototype,"width"),gs.prototype),CS(gs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(gs.prototype,"height"),gs.prototype),gs);function pp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pp=function(t){return typeof t}:pp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function nI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function LS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function oI(e,r,t){return r&&LS(e.prototype,r),t&&LS(e,t),e}function iI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&rm(e,r)}function rm(e,r){return rm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},rm(e,r)}function aI(e){var r=uI();return function(){var s=vp(e),f;if(r){var d=vp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return sI(this,f)}}function sI(e,r){if(r&&(pp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jS(e)}function jS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vp(e){return vp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vp(e)}function lI(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var nm=function(e){iI(t,e);var r=aI(t);function t(){var s;nI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),lI(jS(s),"modelType",Ze.HTML_NODE),s}return oI(t,[{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.width,b=this.height;return[{x:f,y:d-b/2,id:"".concat(this.id,"_0")},{x:f+v/2,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b/2,id:"".concat(this.id,"_2")},{x:f-v/2,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ga),ai,BS,FS,GS;function kS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function fI(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?kS(Object(t),!0).forEach(function(s){zS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function om(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function cI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function US(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function dI(e,r,t){return r&&US(e.prototype,r),t&&US(e,t),e}function zS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function lc(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var HS=(ai=function(){function e(r){cI(this,e),zS(this,"graphModel",void 0),om(this,"isShowHorizontal",BS,this),om(this,"isShowVertical",FS,this),om(this,"position",GS,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=r}return dI(e,[{key:"getStyle",value:function(){return fI({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(t,s){for(var f=t.x,d=t.y,v=!1,b=!1,O=0;O<s.length;O++){var P=s[O];if(P.id!==t.id&&(f===P.x&&(v=!0),d===P.y&&(b=!0),v&&b))break}return{isShowVertical:v,isShowHorizontal:b,position:{x:f,y:d}}}},{key:"getHorizontalSnapline",value:function(t,s){var f=!1,d,v=t.id,b;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)b=Po(O);else{var P=this.graphModel.getNodeModelById(v);b=Po(P)}}for(var M=0;M<s.length;M++){var F=s[M];if(F.id!==t.id){var Y=Po(F);if(Y.minY===b.minY||Y.maxY===b.minY){f=!0,d=b.minY;break}if(Y.minY===b.maxY||Y.maxY===b.maxY){f=!0,d=b.maxY;break}}}return Mn({isShowHorizontal:f,position:{y:d}})}},{key:"getVerticalSnapline",value:function(t,s){var f=!1,d,v=t.id,b;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)b=Po(O);else{var P=this.graphModel.getNodeModelById(v);b=Po(P)}}for(var M=0;M<s.length;M++){var F=s[M];if(F.id!==t.id){var Y=Po(F);if(Y.minX===b.minX||Y.maxX===b.minX){f=!0,d=b.minX;break}if(Y.minX===b.maxX||Y.maxX===b.maxX){f=!0,d=b.maxX;break}}}return Mn({isShowVertical:f,position:{x:d}})}},{key:"getSnapLinePosition",value:function(t,s){var f=this.getCenterSnapLine(t,s),d=f.isShowHorizontal,v=f.isShowVertical;if(!d){var b=this.getHorizontalSnapline(t,s);b.isShowHorizontal&&(f.isShowHorizontal=b.isShowHorizontal,f.position.y=b.position.y)}if(!v){var O=this.getVerticalSnapline(t,s);O.isShowVertical&&(f.isShowVertical=O.isShowVertical,f.position.x=O.position.x)}return f}},{key:"setSnaplineInfo",value:function(t){var s=t.isShowHorizontal,f=t.isShowVertical,d=t.position;this.position=d,this.isShowHorizontal=s,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(t){var s=this.graphModel.nodes,f=this.getSnapLinePosition(t,s);this.setSnaplineInfo(f)}}]),e}(),BS=lc(ai.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FS=lc(ai.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GS=lc(ai.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lc(ai.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(ai.prototype,"clearSnapline"),ai.prototype),lc(ai.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(ai.prototype,"setNodeSnapLine"),ai.prototype),ai),fc=new Map,XS=function(r){var t=ds();function s(){r();var d=fc.get(t);if(d){var v=window.requestAnimationFrame(s);fc.set(t,v)}}var f=window.requestAnimationFrame(s);return fc.set(t,f),t},yp=function(r){var t=fc.get(r);t&&(window.cancelAnimationFrame(t),fc.delete(r))};function gp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gp=function(t){return typeof t}:gp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function cc(){return cc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cc.apply(this,arguments)}function $S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function mp(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?$S(Object(t),!0).forEach(function(s){Li(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$S(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function hI(e,r){return gI(e)||yI(e,r)||vI(e,r)||pI()}function pI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vI(e,r){if(e){if(typeof e=="string")return VS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VS(e,r)}}function VS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function yI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function gI(e){if(Array.isArray(e))return e}function mI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function WS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function bI(e,r,t){return r&&WS(e.prototype,r),t&&WS(e,t),e}function EI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&im(e,r)}function im(e,r){return im=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},im(e,r)}function OI(e){var r=xI();return function(){var s=bp(e),f;if(r){var d=bp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return SI(this,f)}}function SI(e,r){if(r&&(gp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}function Ci(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bp(e){return bp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},bp(e)}function Li(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var TI=function(e){EI(t,e);var r=OI(t);function t(){var s;return mI(this,t),s=r.call(this),Li(Ci(s),"preTargetNode",void 0),Li(Ci(s),"sourceRuleResults",void 0),Li(Ci(s),"targetRuleResults",void 0),Li(Ci(s),"dragHandler",void 0),Li(Ci(s),"t",void 0),Li(Ci(s),"onDragStart",function(f){var d=f.event,v=s.props,b=v.anchorData,O=v.nodeModel,P=v.graphModel,M=P.overlapMode;P.selectNodeById(O.id),M!==mt.INCREASE&&O.autoToFront&&P.toFront(O.id),P.eventCenter.emit(ze.ANCHOR_DRAGSTART,{data:b,e:d,nodeModel:O}),s.setState({startX:b.x,startY:b.y,endX:b.x,endY:b.y})}),Li(Ci(s),"onDragging",function(f){var d=f.event,v=s.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData,M=b.transformModel,F=b.eventCenter,Y=b.width,ne=b.height,ve=b.editConfigModel,Le=ve.autoExpand,Ie=ve.stopMoveGraph,Fe=d.clientX,Tt=d.clientY,Dt=b.getPointByClient({x:Fe,y:Tt}),ut=Dt.domOverlayPosition,Ft=ut.x,Pt=ut.y,er=Dt.canvasOverlayPosition,wt=er.x,gr=er.y;s.t&&yp(s.t);var Cr=[],_n=10;Ft<10?Cr=[_n,0]:Ft+10>Y?Cr=[-_n,0]:Pt<10?Cr=[0,_n]:Pt+10>ne&&(Cr=[0,-_n]),s.setState({endX:wt,endY:gr,dragging:!0}),s.moveAnchorEnd(wt,gr),Cr.length>0&&!Ie&&Le&&(s.t=XS(function(){var Fn=Cr,qn=hI(Fn,2),Eo=qn[0],su=qn[1];M.translate(Eo,su);var Al=s.state,Es=Al.endX,Pl=Al.endY;s.setState({endX:Es-Eo,endY:Pl-su}),s.moveAnchorEnd(Es-Eo,Pl-su)})),F.emit(ze.ANCHOR_DRAG,{data:P,e:d,nodeModel:O})}),Li(Ci(s),"onDragEnd",function(f){var d=f.event;s.t&&yp(s.t),s.checkEnd(d),s.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),s.sourceRuleResults.clear(),s.targetRuleResults.clear();var v=s.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData;b.eventCenter.emit(ze.ANCHOR_DRAGEND,{data:P,e:d,nodeModel:O})}),Li(Ci(s),"checkEnd",function(f){var d=s.props,v=d.graphModel,b=d.nodeModel,O=d.anchorData,P=O.x,M=O.y,F=O.id;v.edgeType;var Y=s.state,ne=Y.endX,ve=Y.endY,Le=Y.dragging,Ie=ah({x:ne,y:ve},v);if(s.preTargetNode&&s.preTargetNode.state!==ct.DEFAULT&&s.preTargetNode.setElementState(ct.DEFAULT),!!Le&&Ie&&Ie.node){var Fe=Ie.node,Tt=Ie.anchor.id,Dt="".concat(b.id,"_").concat(Fe.id,"_").concat(Tt,"_").concat(F),ut=s.sourceRuleResults.get(Dt)||{},Ft=ut.isAllPass,Pt=ut.msg,er=s.targetRuleResults.get(Dt)||{},wt=er.isAllPass,gr=er.msg;if(Ft&&wt){Fe.setElementState(ct.DEFAULT);var Cr=v.edgeGenerator(b.getData(),v.getNodeModelById(Ie.node.id).getData()),_n=v.addEdge(mp(mp({},Cr),{},{sourceNodeId:b.id,sourceAnchorId:F,startPoint:{x:P,y:M},targetNodeId:Ie.node.id,targetAnchorId:Ie.anchor.id,endPoint:{x:Ie.anchor.x,y:Ie.anchor.y}})),Fn=s.props.anchorData;v.eventCenter.emit(ze.ANCHOR_DROP,{data:Fn,e:f,nodeModel:b,edgeModel:_n})}else{var qn=Fe.getData();v.eventCenter.emit(ze.CONNECTION_NOT_ALLOWED,{data:qn,msg:gr||Pt})}}}),s.sourceRuleResults=new Map,s.targetRuleResults=new Map,s.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},s.dragHandler=new pa({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return bI(t,[{key:"getAnchorShape",value:function(){var f=this.props,d=f.anchorData,v=f.style,b=f.node,O=b.getAnchorShape(d);if(O)return O;var P=d.x,M=d.y,F=mp(mp({},v),v.hover);return Object(Be.g)("g",null,Object(Be.g)(sc,cc({className:"lf-node-anchor-hover"},F,{x:P,y:M})),Object(Be.g)(sc,cc({className:"lf-node-anchor"},v,{x:P,y:M})))}},{key:"moveAnchorEnd",value:function(f,d){var v=this.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData,M=ah({x:f,y:d},b);if(M){var F=M.node,Y=M.anchor.id;if(this.preTargetNode&&this.preTargetNode!==M.node&&this.preTargetNode.setElementState(ct.DEFAULT),P.id===Y)return;this.preTargetNode=F;var ne="".concat(O.id,"_").concat(F.id,"_").concat(Y,"_").concat(P.id);if(!this.targetRuleResults.has(ne)){var ve=M.anchor,Le=O.isAllowConnectedAsSource(F,P,ve),Ie=F.isAllowConnectedAsTarget(O,P,ve);this.sourceRuleResults.set(ne,uh(Le)),this.targetRuleResults.set(ne,uh(Ie))}var Fe=this.sourceRuleResults.get(ne),Tt=Fe.isAllPass,Dt=this.targetRuleResults.get(ne),ut=Dt.isAllPass;Tt&&ut?F.setElementState(ct.ALLOW_CONNECT):F.setElementState(ct.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==ct.DEFAULT&&this.preTargetNode.setElementState(ct.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,d=f.startX,v=f.startY,b=f.endX,O=f.endY,P=Ni(d,v,b,O);return P>10}},{key:"render",value:function(){var f=this,d=this.state,v=d.startX,b=d.startY,O=d.endX,P=d.endY,M=this.props,F=M.anchorData.edgeAddable,Y=M.edgeStyle;return Object(Be.g)("g",{className:"lf-anchor"},Object(Be.g)("g",{onMouseDown:function(ve){F!==!1&&f.dragHandler.handleMouseDown(ve)}},this.getAnchorShape()),this.isShowLine()&&Object(Be.g)(cl,cc({x1:v,y1:b,x2:O,y2:P},Y,{"pointer-events":"none"})))}}]),t}(Be.a),AI=TI;o(64);function YS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function PI(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?YS(Object(t),!0).forEach(function(s){_I(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):YS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function _I(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ep(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ep=function(t){return typeof t}:Ep=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function wI(e,r){return DI(e)||RI(e,r)||MI(e,r)||NI()}function NI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MI(e,r){if(e){if(typeof e=="string")return KS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KS(e,r)}}function KS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function RI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function DI(e){if(Array.isArray(e))return e}function ZS(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.value,v=e.fontSize,b=e.fill,O=b===void 0?"currentColor":b,P=e.overflowMode,M=P===void 0?"default":P,F=e.textWidth,Y=F===void 0?"":F,ne=e.model,ve={textAnchor:"middle","dominant-baseline":"middle",x:t,y:f,fill:O};if(Object.entries(e).forEach(function(ut){var Ft=wI(ut,2),Pt=Ft[0],er=Ft[1],wt=Ep(er);wt!=="object"&&(ve[Pt]=er)}),d){var Le=String(d).split(/[\r\n]/g),Ie=Le.length;if(M!=="default"){var Fe=ne.BaseType,Tt=ne.modelType;if(Fe===Ve.NODE&&Tt!==Ze.TEXT_NODE||Fe===Ve.EDGE&&Y)return II(e)}if(Ie>1){var Dt=Le.map(function(ut,Ft){var Pt=v+2,er=(Ft-(Ie-1)/2)*Pt;return Object(Be.g)("tspan",{className:"lf-text-tspan",x:t,y:f+er},ut)});return Object(Be.g)("text",ve,Dt)}return Object(Be.g)("text",ve,d)}}function II(e){var r=e.value,t=e.fontSize,s=e.model,f=e.fontFamily,d=f===void 0?"":f,v=e.lineHeight,b=e.wrapPadding,O=b===void 0?"0, 0":b,P=e.overflowMode,M=e.x,F=e.y,Y=s.width,ne=s.textHeight,ve=e.textWidth||Y,Le=String(r).split(/[\r\n]/g),Ie=Le.length,Fe=ME({rows:Le,style:{fontSize:"".concat(t,"px"),width:"".concat(ve,"px"),fontFamily:d,lineHeight:v,padding:O},rowsLength:Ie,className:"lf-get-text-height"}),Tt=s.height>Fe?s.height:Fe;ne&&(Tt=ne);var Dt=P==="ellipsis";return Object(Be.g)("g",null,Object(Be.g)("foreignObject",{width:ve,height:Tt,x:M-ve/2,y:F-Tt/2},Object(Be.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Tt,width:ve,padding:O}},Object(Be.g)("div",{className:Dt?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Dt?Le.join(""):"",style:PI({},e)},Le.map(function(ut){return Object(Be.g)("div",{className:"lf-node-text--auto-wrap-inner"},ut)})))))}function Op(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Op=function(t){return typeof t}:Op=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function am(){return am=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},am.apply(this,arguments)}function CI(e,r){return FI(e)||BI(e,r)||jI(e,r)||LI()}function LI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jI(e,r){if(e){if(typeof e=="string")return JS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return JS(e,r)}}function JS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function BI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function FI(e){if(Array.isArray(e))return e}function GI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function QS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function kI(e,r,t){return r&&QS(e.prototype,r),t&&QS(e,t),e}function UI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&sm(e,r)}function sm(e,r){return sm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},sm(e,r)}function zI(e){var r=XI();return function(){var s=Sp(e),f;if(r){var d=Sp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return HI(this,f)}}function HI(e,r){if(r&&(Op(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ms(e)}function ms(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sp(e){return Sp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sp(e)}function ou(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var qS=function(e){UI(t,e);var r=zI(t);function t(s){var f;GI(this,t),f=r.call(this),ou(ms(f),"dragHandler",void 0),ou(ms(f),"sumDeltaX",0),ou(ms(f),"sumDeltaY",0),ou(ms(f),"stepDrag",void 0),ou(ms(f),"onDragging",function(b){var O=b.deltaX,P=b.deltaY,M=f.props,F=M.model,Y=M.graphModel.transformModel,ne=Y.fixDeltaXY(O,P),ve=CI(ne,2),Le=ve[0],Ie=ve[1];F.moveText(Le,Ie)}),ou(ms(f),"dblClickHandler",function(){var b=f.props.editable;if(b){var O=f.props.model;O.setElementState(ct.TEXT_EDIT)}}),ou(ms(f),"mouseDownHandle",function(b){var O=f.props,P=O.draggable,M=O.graphModel.editConfigModel.nodeTextDraggable;(P||M)&&f.stepDrag.handleMouseDown(b)});var d=s.model,v=s.draggable;return f.stepDrag=new pa({onDragging:f.onDragging,step:1,model:d,isStopPropagation:v}),f}return kI(t,[{key:"getShape",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=d.text,O=v.editConfigModel,P=b.value,M=b.x,F=b.y,Y=b.editable,ne=b.draggable,ve={x:M,y:F,className:"",value:P};Y?ve.className="lf-element-text":ne||O.nodeTextDraggable?ve.className="lf-text-draggable":ve.className="lf-text-disabled";var Le=d.getTextStyle();return Object(Be.g)(ZS,am({},ve,Le,{model:d}))}},{key:"render",value:function(){var f=this.props.model.text;if(f)return Object(Be.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}]),t}(Be.a),$I=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function xp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xp=function(t){return typeof t}:xp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function Tp(e,r){return KI(e)||YI(e,r)||WI(e,r)||VI()}function VI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WI(e,r){if(e){if(typeof e=="string")return ex(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ex(e,r)}}function ex(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function YI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function KI(e){if(Array.isArray(e))return e}function ZI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function tx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function JI(e,r,t){return r&&tx(e.prototype,r),t&&tx(e,t),e}function QI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&um(e,r)}function um(e,r){return um=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},um(e,r)}function qI(e){var r=tC();return function(){var s=Ap(e),f;if(r){var d=Ap(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return eC(this,f)}}function eC(e,r){if(r&&(xp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qn(e)}function Qn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ap(e){return Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ap(e)}function fo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ba=function(e){QI(t,e);var r=qI(t);function t(s){var f;ZI(this,t),f=r.call(this),fo(Qn(f),"t",void 0),fo(Qn(f),"moveOffset",void 0),fo(Qn(f),"stepDrag",void 0),fo(Qn(f),"contextMenuTime",void 0),fo(Qn(f),"startTime",void 0),fo(Qn(f),"clickTimer",void 0),fo(Qn(f),"onDragStart",function(P){var M=P.event,F=M.clientX,Y=M.clientY,ne=f.props,ve=ne.model,Le=ne.graphModel,Ie=Le.getPointByClient({x:F,y:Y}),Fe=Ie.canvasOverlayPosition,Tt=Fe.x,Dt=Fe.y;f.moveOffset={x:ve.x-Tt,y:ve.y-Dt}}),fo(Qn(f),"onDragging",function(P){var M=P.event,F=f.props,Y=F.model,ne=F.graphModel,ve=ne.editConfigModel,Le=ve.stopMoveGraph,Ie=ve.autoExpand,Fe=ne.transformModel,Tt=ne.width,Dt=ne.height,ut=ne.gridSize;Y.isDragging=!0;var Ft=M.clientX,Pt=M.clientY,er=ne.getPointByClient({x:Ft,y:Pt}),wt=er.canvasOverlayPosition,gr=wt.x,Cr=wt.y,_n=Fe.CanvasPointToHtmlPoint([gr,Cr]),Fn=Tp(_n,2),qn=Fn[0],Eo=Fn[1];if(gr=gr+f.moveOffset.x,Cr=Cr+f.moveOffset.y,gr=cs(gr,ut),Cr=cs(Cr,ut),!Tt||!Dt){ne.moveNode2Coordinate(Y.id,gr,Cr);return}var su=qn<0||Eo<0||qn>Tt||Eo>Dt;if(!(Ie&&!Le&&su)){var Al=Fe.CanvasPointToHtmlPoint([gr-Y.width/2,Cr-Y.height/2]),Es=Tp(Al,2),Pl=Es[0],qm=Es[1],Hj=Fe.CanvasPointToHtmlPoint([gr+Y.width/2,Cr+Y.height/2]),eT=Tp(Hj,2),Xj=eT[0],$j=eT[1],hv=Math.max(ut,20),_l=[];Pl<0?_l=[hv,0]:Xj>ne.width?_l=[-hv,0]:qm<0?_l=[0,hv]:$j>ne.height&&(_l=[0,-hv]),f.t&&yp(f.t),_l.length>0&&!Le&&Ie?f.t=XS(function(){var Vj=_l,tT=Tp(Vj,2),rT=tT[0],nT=tT[1];Fe.translate(rT,nT),ne.moveNode(Y.id,-rT/Fe.SCALE_X,-nT/Fe.SCALE_X)}):ne.moveNode2Coordinate(Y.id,gr,Cr)}}),fo(Qn(f),"onDragEnd",function(){f.t&&yp(f.t);var P=f.props.model;P.isDragging=!1}),fo(Qn(f),"handleClick",function(P){if(f.startTime){var M=new Date().getTime()-f.startTime;if(!(M>200)){var F=f.props,Y=F.model,ne=F.graphModel,ve=Y.getData(),Le=ne.getPointByClient({x:P.clientX,y:P.clientY}),Ie={data:ve,e:P,position:Le,isSelected:!1,isMultiple:!1},Fe=P.button===2,Tt=P.detail===2;if(!Fe){var Dt=ne.editConfigModel,ut=xE(P,Dt);Ie.isMultiple=ut,Y.isSelected&&!Tt&&ut?(Ie.isSelected=!1,Y.setSelected(!1)):(ne.selectNodeById(Y.id,ut),Ie.isSelected=!0,f.toFront()),Tt?(Dt.nodeTextEdit&&Y.text.editable&&(Y.setSelected(!1),ne.setElementStateById(Y.id,ct.TEXT_EDIT)),ne.eventCenter.emit(ze.NODE_DBCLICK,Ie)):(ne.eventCenter.emit(ze.ELEMENT_CLICK,Ie),ne.eventCenter.emit(ze.NODE_CLICK,Ie))}}}}),fo(Qn(f),"handleContextMenu",function(P){P.preventDefault();var M=f.props,F=M.model,Y=M.graphModel,ne=F.getData(),ve=Y.getPointByClient({x:P.clientX,y:P.clientY});Y.setElementStateById(F.id,ct.SHOW_MENU,ve.domOverlayPosition),F.isSelected||Y.selectNodeById(F.id),Y.eventCenter.emit(ze.NODE_CONTEXTMENU,{data:ne,e:P,position:ve}),f.toFront()}),fo(Qn(f),"handleMouseDown",function(P){var M=f.props,F=M.model,Y=M.graphModel;f.startTime=new Date().getTime();var ne=Y.editConfigModel;ne.adjustNodePosition&&F.draggable&&f.stepDrag&&f.stepDrag.handleMouseDown(P)}),fo(Qn(f),"setHoverON",function(P){var M=f.props,F=M.model,Y=M.graphModel;if(!F.isHovered){var ne=F.getData();F.setHovered(!0),Y.eventCenter.emit(ze.NODE_MOUSEENTER,{data:ne,e:P})}}),fo(Qn(f),"setHoverOFF",function(P){var M=f.props,F=M.model,Y=M.graphModel,ne=F.getData();F.isHovered&&(F.setHovered(!1),Y.eventCenter.emit(ze.NODE_MOUSELEAVE,{data:ne,e:P}))}),fo(Qn(f),"onMouseOut",function(P){$I&&f.setHoverOFF(P)});var d=s.graphModel,v=d.gridSize,b=d.eventCenter,O=s.model;return f.stepDrag=new pa({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:v,eventType:"NODE",isStopPropagation:!1,eventCenter:b,model:O}),f}return JI(t,[{key:"getAnchorShape",value:function(f){return null}},{key:"getAnchors",value:function(){var f=this,d=this.props,v=d.model,b=d.graphModel,O=v.isSelected,P=v.isHitable,M=v.isDragging,F=v.isShowAnchor;return P&&(O||F)&&!M?la(v.anchors,function(Y,ne){var ve=v.getAnchorLineStyle(Y),Le=v.getAnchorStyle(Y);return Object(Be.g)(AI,{anchorData:Y,node:f,style:Le,edgeStyle:ve,anchorIndex:ne,nodeModel:v,graphModel:b,setHoverOFF:f.setHoverOFF})}):[]}},{key:"getText",value:function(){var f=this.props,d=f.model,v=f.graphModel;if(d.state===ct.TEXT_EDIT)return"";if(d.text){var b=v.editConfigModel,O=!1;return(d.text.draggable||b.nodeTextDraggable)&&(O=!0),Object(Be.g)(qS,{editable:b.nodeTextEdit&&d.text.editable,model:d,graphModel:v,draggable:O})}}},{key:"getStateClassName",value:function(){var f=this.props.model,d=f.state,v=f.isDragging,b=f.isSelected,O="lf-node";switch(d){case ct.ALLOW_CONNECT:O+=" lf-node-allow";break;case ct.NOT_ALLOW_CONNECT:O+=" lf-node-not-allow";break;default:O+=" lf-node-default";break}return v&&(O+=" lf-isDragging"),b&&(O+=" lf-node-selected"),O}},{key:"toFront",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=v.overlapMode;b!==mt.INCREASE&&d.autoToFront&&v.toFront(d.id)}},{key:"render",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=v.editConfigModel,O=b.hideAnchors,P=b.adjustNodePosition,M=v.gridSize,F=v.transformModel.SCALE_X,Y=d.isHitable,ne=d.draggable,ve=Object(Be.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),O?null:this.getAnchors()),Le;return Y?(P&&ne&&this.stepDrag.setStep(M*F),Le=Object(Be.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},ve)):Le=Object(Be.g)("g",{className:this.getStateClassName()},ve),Le}}],[{key:"getModel",value:function(f){return f}}]),t}(Be.a);function Pp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pp=function(t){return typeof t}:Pp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function lm(){return lm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},lm.apply(this,arguments)}function rC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function rx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function nC(e,r,t){return r&&rx(e.prototype,r),t&&rx(e,t),e}function oC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&fm(e,r)}function fm(e,r){return fm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},fm(e,r)}function iC(e){var r=uC();return function(){var s=_p(e),f;if(r){var d=_p(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return aC(this,f)}}function aC(e,r){if(r&&(Pp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sC(e)}function sC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _p(e){return _p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_p(e)}var cm=function(e){oC(t,e);var r=iC(t);function t(){return rC(this,t),r.apply(this,arguments)}return nC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)(vs,lm({},d,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}]),t}(ba);function wp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wp=function(t){return typeof t}:wp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function dm(){return dm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},dm.apply(this,arguments)}function lC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function nx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function fC(e,r,t){return r&&nx(e.prototype,r),t&&nx(e,t),e}function cC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&hm(e,r)}function hm(e,r){return hm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},hm(e,r)}function dC(e){var r=vC();return function(){var s=Np(e),f;if(r){var d=Np(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return hC(this,f)}}function hC(e,r){if(r&&(wp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pC(e)}function pC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Np(e){return Np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Np(e)}var pm=function(e){cC(t,e);var r=dC(t);function t(){return lC(this,t),r.apply(this,arguments)}return fC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.r,O=f.getNodeStyle();return Object(Be.g)(sc,dm({},O,{x:d,y:v,r:b}))}}]),t}(ba);function Mp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mp=function(t){return typeof t}:Mp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function yC(e,r){return EC(e)||bC(e,r)||mC(e,r)||gC()}function gC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mC(e,r){if(e){if(typeof e=="string")return ox(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ox(e,r)}}function ox(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function bC(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function EC(e){if(Array.isArray(e))return e}function ix(e){var r=e.points,t=e.className,s={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(f){var d=yC(f,2),v=d[0],b=d[1],O=Mp(b);O!=="object"&&(s[v]=b)}),t?s.className="lf-basic-shape ".concat(t):s.className="lf-basic-shape",s.points=r.map(function(f){return f.join(",")}).join(" "),Object(Be.g)("polygon",s)}function Rp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rp=function(t){return typeof t}:Rp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function vm(){return vm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},vm.apply(this,arguments)}function OC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ax(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function SC(e,r,t){return r&&ax(e.prototype,r),t&&ax(e,t),e}function xC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&ym(e,r)}function ym(e,r){return ym=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},ym(e,r)}function TC(e){var r=_C();return function(){var s=Dp(e),f;if(r){var d=Dp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return AC(this,f)}}function AC(e,r){if(r&&(Rp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PC(e)}function PC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dp(e){return Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Dp(e)}var gm=function(e){xC(t,e);var r=TC(t);function t(){return OC(this,t),r.apply(this,arguments)}return SC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.width,O=f.height,P=f.points,M=f.getNodeStyle(),F={transform:"matrix(1 0 0 1 ".concat(d-b/2," ").concat(v-O/2,")")};return Object(Be.g)("g",F,Object(Be.g)(ix,vm({},M,{points:P,x:d,y:v})))}}]),t}(ba);function Ip(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ip=function(t){return typeof t}:Ip=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function mm(){return mm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},mm.apply(this,arguments)}function wC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function sx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function NC(e,r,t){return r&&sx(e.prototype,r),t&&sx(e,t),e}function MC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&bm(e,r)}function bm(e,r){return bm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},bm(e,r)}function RC(e){var r=CC();return function(){var s=Cp(e),f;if(r){var d=Cp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return DC(this,f)}}function DC(e,r){if(r&&(Ip(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IC(e)}function IC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cp(e){return Cp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Cp(e)}var Em=function(e){MC(t,e);var r=RC(t);function t(){return wC(this,t),r.apply(this,arguments)}return NC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)("g",null,Object(Be.g)(ix,mm({},d,{points:f.points,x:f.x,y:f.y})))}}]),t}(ba);function Lp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lp=function(t){return typeof t}:Lp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function LC(e,r){return GC(e)||FC(e,r)||BC(e,r)||jC()}function jC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BC(e,r){if(e){if(typeof e=="string")return ux(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ux(e,r)}}function ux(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function FC(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function GC(e){if(Array.isArray(e))return e}function kC(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.rx,v=d===void 0?4:d,b=e.ry,O=b===void 0?4:b,P=e.className,M={cx:t,cy:f,rx:v,ry:O,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(F){var Y=LC(F,2),ne=Y[0],ve=Y[1],Le=Lp(ve);Le!=="object"&&(M[ne]=ve)}),P?M.className="lf-basic-shape ".concat(P):M.className="lf-basic-shape",Object(Be.g)("ellipse",M)}function jp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jp=function(t){return typeof t}:jp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function Om(){return Om=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Om.apply(this,arguments)}function UC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function lx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function zC(e,r,t){return r&&lx(e.prototype,r),t&&lx(e,t),e}function HC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Sm(e,r)}function Sm(e,r){return Sm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Sm(e,r)}function XC(e){var r=WC();return function(){var s=Bp(e),f;if(r){var d=Bp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return $C(this,f)}}function $C(e,r){if(r&&(jp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VC(e)}function VC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bp(e)}var xm=function(e){HC(t,e);var r=XC(t);function t(){return UC(this,t),r.apply(this,arguments)}return zC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)(kC,Om({},d,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}]),t}(ba);function Fp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fp=function(t){return typeof t}:Fp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function fx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function cx(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?fx(Object(t),!0).forEach(function(s){YC(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function YC(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function KC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function dx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ZC(e,r,t){return r&&dx(e.prototype,r),t&&dx(e,t),e}function JC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Tm(e,r)}function Tm(e,r){return Tm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Tm(e,r)}function QC(e){var r=tL();return function(){var s=Gp(e),f;if(r){var d=Gp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return qC(this,f)}}function qC(e,r){if(r&&(Fp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eL(e)}function eL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gp(e){return Gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Gp(e)}var Am=function(e){JC(t,e);var r=QC(t);function t(){return KC(this,t),r.apply(this,arguments)}return ZC(t,[{key:"getBackground",value:function(){var f=this.props.model,d=f.getTextStyle(),v=f.text;if(v&&v.value&&d.background&&d.background.fill!=="transparent"){var b=v.x,O=v.y,P=f.width,M=f.height,F=cx(cx({},d.background),{},{x:b,y:O-1,width:P,height:M});return Object(Be.g)(vs,F)}}},{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getBackground())}}]),t}(ba);function kp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kp=function(t){return typeof t}:kp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function Pm(){return Pm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Pm.apply(this,arguments)}function rL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function hx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function nL(e,r,t){return r&&hx(e.prototype,r),t&&hx(e,t),e}function oL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&_m(e,r)}function _m(e,r){return _m=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},_m(e,r)}function iL(e){var r=sL();return function(){var s=Up(e),f;if(r){var d=Up(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return aL(this,f)}}function aL(e,r){if(r&&(kp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dc(e)}function dc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Up(e)}function zp(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var wm=function(e){oL(t,e);var r=iL(t);function t(){var s;rL(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),zp(dc(s),"ref",void 0),zp(dc(s),"currentProperties",void 0),zp(dc(s),"preProperties",void 0),zp(dc(s),"setRef",function(b){s.ref=b}),s}return nL(t,[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!(this.preProperties&&this.preProperties===this.currentProperties))return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.height,O=f.width,P=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Be.g)("foreignObject",Pm({},P,{x:d-O/2,y:v-b/2,width:O,height:b,ref:this.setRef}))}}]),t}(ba);function Hp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hp=function(t){return typeof t}:Hp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function Nm(){return Nm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Nm.apply(this,arguments)}function px(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function iu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?px(Object(t),!0).forEach(function(s){Dm(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):px(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function uL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function vx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function lL(e,r,t){return r&&vx(e.prototype,r),t&&vx(e,t),e}function fL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Mm(e,r)}function Mm(e,r){return Mm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Mm(e,r)}function cL(e){var r=hL();return function(){var s=Xp(e),f;if(r){var d=Xp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return dL(this,f)}}function dL(e,r){if(r&&(Hp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rm(e)}function Rm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xp(e)}function Dm(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var pL=function(e){fL(t,e);var r=cL(t);function t(s){var f;return uL(this,t),f=r.call(this,s),Dm(Rm(f),"setHoverON",function(){f.setState({isHovered:!0})}),Dm(Rm(f),"setHoverOFF",function(){f.setState({isHovered:!1})}),f.state={isHovered:!1},f}return lL(t,[{key:"getBackground",value:function(){var f=this.props.model,d=f.getTextStyle(),v=f.text,b=d.background||{},O=this.state.isHovered;if(O&&d.hover&&d.hover.background&&(b=iu(iu({},b),d.hover.background)),v&&v.value&&b.fill!=="transparent"){var P=d.fontSize,M=d.overflowMode,F=d.lineHeight,Y=d.wrapPadding,ne=d.textWidth,ve=v.value,Le=v.x,Ie=v.y,Fe=String(ve).split(/[\r\n]/g),Tt=Fe.length,Dt;if(M==="autoWrap"&&ne){var ut=ME({rows:Fe,style:{fontSize:"".concat(P,"px"),width:"".concat(ne,"px"),lineHeight:F,padding:Y},rowsLength:Tt,className:"lf-get-text-height"});Dt=iu(iu({},b),{},{x:Le-1,y:Ie-1,width:ne,height:ut})}else{Fe&&Fe.forEach(function(gr){O0(gr)});var Ft=cg({rows:Fe,fontSize:P,rowsLength:Tt}),Pt=Ft.width,er=Ft.height;if(typeof b.wrapPadding=="string"){var wt=b.wrapPadding.split(",").filter(function(gr){return gr.trim()}).map(function(gr){return parseFloat(gr.trim())});wt.length>0&&wt.length<=4&&(wt.length===1?wt=[wt[0],wt[0],wt[0],wt[0]]:wt.length===2?wt=[wt[0],wt[1],wt[0],wt[1]]:wt.length===3&&(wt=[wt[0],wt[1],wt[2],wt[1]]),Pt+=wt[1]+wt[3],er+=wt[0]+wt[2],Le=Le+(wt[1]-wt[3])/2,Ie=Ie+(wt[2]-wt[0])/2)}Dt=iu(iu({},b),{},{x:Le-1,y:Ie-1,width:Pt,height:er})}return Object(Be.g)(vs,Dt)}}},{key:"getShape",value:function(){var f=this.props.model,d=f.text,v=d.value,b=d.x,O=d.y;if(v){var P=f.getTextStyle(),M=iu({x:b,y:O,className:"lf-element-text",value:v},P);return Object(Be.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Be.g)(ZS,Nm({},M,{model:f})))}}}]),t}(qS);function $p(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$p=function(t){return typeof t}:$p=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function yx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Ea(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?yx(Object(t),!0).forEach(function(s){wo(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function vL(e,r){return bL(e)||mL(e,r)||gL(e,r)||yL()}function yL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gL(e,r){if(e){if(typeof e=="string")return gx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gx(e,r)}}function gx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function mL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function bL(e){if(Array.isArray(e))return e}function EL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function mx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function OL(e,r,t){return r&&mx(e.prototype,r),t&&mx(e,t),e}function SL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Im(e,r)}function Im(e,r){return Im=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Im(e,r)}function xL(e){var r=AL();return function(){var s=Vp(e),f;if(r){var d=Vp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return TL(this,f)}}function TL(e,r){if(r&&($p(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _o(e)}function _o(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vp(e)}function wo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ji;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(ji||(ji={}));var bx=function(e){SL(t,e);var r=xL(t);function t(s){var f;EL(this,t),f=r.call(this),wo(_o(f),"stepDragData",void 0),wo(_o(f),"stepDrag",void 0),wo(_o(f),"oldEdge",void 0),wo(_o(f),"preTargetNode",void 0),wo(_o(f),"targetRuleResults",void 0),wo(_o(f),"sourceRuleResults",void 0),wo(_o(f),"handleMouseDown",function(P){f.stepDrag&&f.stepDrag.handleMouseDown(P)}),wo(_o(f),"onDragStart",function(){var P=f.props,M=P.x,F=P.y,Y=P.edgeModel,ne=Y.startPoint,ve=Y.endPoint,Le=Y.pointsList;f.oldEdge={startPoint:ne,endPoint:ve,pointsList:Le},f.setState({endX:M,endY:F,dragging:!0})}),wo(_o(f),"onDragging",function(P){var M=P.deltaX,F=P.deltaY,Y=f.state,ne=Y.endX,ve=Y.endY,Le=f.props,Ie=Le.graphModel,Fe=Le.type,Tt=Ie.transformModel,Dt=Ie.editConfigModel,ut=Tt.moveCanvasPointByHtml([ne,ve],M,F),Ft=vL(ut,2),Pt=Ft[0],er=Ft[1];f.setState({endX:Pt,endY:er,dragging:!0});var wt=f.props.edgeModel,gr=ah({x:ne,y:ve},Ie);if(gr&&gr.node&&f.isAllowAdjust(gr)){var Cr,_n=wt.startPoint,Fn=wt.endPoint,qn=wt.sourceNode,Eo=wt.targetNode;Fe===ji.SOURCE?Cr={startPoint:{x:gr.anchor.x,y:gr.anchor.y},endPoint:{x:Fn.x,y:Fn.y},sourceNode:gr.node,targetNode:Eo}:Fe===ji.TARGET&&(Cr={startPoint:{x:_n.x,y:_n.y},endPoint:{x:gr.anchor.x,y:gr.anchor.y},sourceNode:qn,targetNode:gr.node}),wt.updateAfterAdjustStartAndEnd(Cr)}else Fe===ji.SOURCE?wt.updateStartPoint({x:Pt,y:er}):Fe===ji.TARGET&&wt.updateEndPoint({x:Pt,y:er});wt.text.value&&Dt.adjustEdge&&wt.setText(Object.assign({},wt.text,wt.textPosition))}),wo(_o(f),"onDragEnd",function(P){var M=P.event;try{var F;f.setState({dragging:!1});var Y=f.props,ne=Y.graphModel,ve=Y.edgeModel,Le=Y.type,Ie=f.state,Fe=Ie.endX,Tt=Ie.endY,Dt=Ie.dragging,ut=ah({x:Fe,y:Tt},ne);if(!Dt)return;var Ft=!1,Pt;if(ut&&ut.node&&f.isAllowAdjust(ut)){var er,wt=ve.getData();if(Pt=Ea(Ea({},wt),{},{sourceAnchorId:"",targetAnchorId:"",text:(wt==null||(er=wt.text)===null||er===void 0?void 0:er.value)||""}),Le===ji.SOURCE){var gr=ne.edgeGenerator(ne.getNodeModelById(ut.node.id).getData(),ne.getNodeModelById(ve.targetNodeId).getData(),Pt);Pt=Ea(Ea({},gr),{},{sourceNodeId:ut.node.id,sourceAnchorId:ut.anchor.id,startPoint:{x:ut.anchor.x,y:ut.anchor.y},targetNodeId:ve.targetNodeId,endPoint:Ea({},ve.endPoint)}),ve.sourceNodeId===ut.node.id&&ve.sourceAnchorId===ut.anchor.id&&(Ft=!0)}else if(Le===ji.TARGET){var Cr=ne.edgeGenerator(ne.getNodeModelById(ve.sourceNodeId).getData(),ne.getNodeModelById(ut.node.id).getData(),Pt);Pt=Ea(Ea({},Cr),{},{sourceNodeId:ve.sourceNodeId,startPoint:Ea({},ve.startPoint),targetNodeId:ut.node.id,targetAnchorId:ut.anchor.id,endPoint:{x:ut.anchor.x,y:ut.anchor.y}}),ve.targetNodeId===ut.node.id&&ve.targetAnchorId===ut.anchor.id&&(Ft=!0)}}else Ft=!0;if(Ft)f.recoveryEdge();else{ne.deleteEdgeById(ve.id);var _n=ne.addEdge(Ea({},Pt));ne.eventCenter.emit(ze.EDGE_EXCHANGE_NODE,{data:{newEdge:_n.getData(),oldEdge:ve.getData()}})}(F=f.preTargetNode)===null||F===void 0||F.setElementState(ct.DEFAULT)}finally{var Fn=f.props.graphModel;Fn.eventCenter.emit(ze.ADJUST_POINT_DRAGEND,{e:M,data:f.stepDragData})}}),wo(_o(f),"recoveryEdge",function(){var P=f.props.edgeModel,M=f.oldEdge,F=M.startPoint,Y=M.endPoint,ne=M.pointsList;P.updateStartPoint(F),P.updateEndPoint(Y),P.modelType!==Ze.LINE_EDGE&&(P.pointsList=ne,P.initPoints())}),wo(_o(f),"getAdjustPointStyle",function(){var P=f.props,M=P.graphModel.theme;P.edgeModel;var F=M.edgeAdjust;return F}),f.state={dragging:!1,endX:0,endY:0},f.targetRuleResults=new Map,f.sourceRuleResults=new Map;var d=s.type,v=s.edgeModel,b=s.graphModel,O=b.eventCenter;return f.stepDragData={type:d,edgeData:v.getData()},f.stepDrag=new pa({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:f.stepDragData}),f}return OL(t,[{key:"isAllowAdjust",value:function(f){var d=this.props,v=d.edgeModel,b=v.id,O=v.sourceNode,P=v.targetNode,M=v.sourceAnchorId,F=v.targetAnchorId,Y=d.type,ne=null,ve=null,Le=null,Ie=null;if(Y===ji.SOURCE?(ne=f.node,ve=P,Le=f.anchor,Ie=P.getAnchorInfo(F)):(ne=O,ve=f.node,Ie=f.anchor,Le=O.getAnchorInfo(M)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(ct.DEFAULT),this.preTargetNode=f.node,Ie.id===Le.id)return!1;var Fe="".concat(ne.id,"_").concat(ve.id,"_").concat(Le.id,"_").concat(Ie.id);if(!this.targetRuleResults.has(Fe)){var Tt=ne.isAllowConnectedAsSource(ve,Le,Ie,b),Dt=ve.isAllowConnectedAsTarget(ne,Le,Ie,b);this.sourceRuleResults.set(Fe,uh(Tt)),this.targetRuleResults.set(Fe,uh(Dt))}var ut=this.sourceRuleResults.get(Fe),Ft=ut.isAllPass,Pt=this.targetRuleResults.get(Fe),er=Pt.isAllPass,wt=Ft&&er?ct.ALLOW_CONNECT:ct.NOT_ALLOW_CONNECT;return Y===ji.SOURCE?ne.setElementState(wt):ve.setElementState(wt),Ft&&er}},{key:"render",value:function(){var f=this.props,d=f.x,v=f.y,b=f.getAdjustPointShape,O=this.state.dragging;return Object(Be.g)("g",{pointerEvents:O?"none":"",onMouseDown:this.handleMouseDown},b(d,v,O))}}]),t}(Be.a);function Wp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wp=function(t){return typeof t}:Wp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function hc(){return hc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},hc.apply(this,arguments)}function PL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ex(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _L(e,r,t){return r&&Ex(e.prototype,r),t&&Ex(e,t),e}function wL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Cm(e,r)}function Cm(e,r){return Cm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Cm(e,r)}function NL(e){var r=RL();return function(){var s=Yp(e),f;if(r){var d=Yp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return ML(this,f)}}function ML(e,r){if(r&&(Wp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zo(e)}function zo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yp(e){return Yp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yp(e)}function si(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var pc=function(e){wL(t,e);var r=NL(t);function t(){var s;PL(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),si(zo(s),"startTime",void 0),si(zo(s),"contextMenuTime",void 0),si(zo(s),"clickTimer",void 0),si(zo(s),"textRef",Object(Be.f)()),si(zo(s),"getAdjustPointShape",function(b,O){var P=s.props.model,M=P.getAdjustPointStyle();return Object(Be.g)(sc,hc({className:"lf-edge-adjust-point"},M,{x:b,y:O}))}),si(zo(s),"handleHover",function(b,O){var P=s.props,M=P.model,F=P.graphModel.eventCenter;M.setHovered(b);var Y=b?ze.EDGE_MOUSEENTER:ze.EDGE_MOUSELEAVE,ne=M.getData();F.emit(Y,{data:ne,e:O})}),si(zo(s),"setHoverON",function(b){var O=s.props.model.isHovered;O||(s.textRef&&s.textRef.current.setHoverON(),s.handleHover(!0,b))}),si(zo(s),"setHoverOFF",function(b){var O=s.props.model.isHovered;O&&(s.textRef&&s.textRef.current.setHoverOFF(),s.handleHover(!1,b))}),si(zo(s),"handleContextMenu",function(b){b.preventDefault(),s.contextMenuTime=new Date().getTime(),s.clickTimer&&clearTimeout(s.clickTimer);var O=s.props,P=O.model,M=O.graphModel,F=M.getPointByClient({x:b.clientX,y:b.clientY});M.setElementStateById(P.id,ct.SHOW_MENU,F.domOverlayPosition),s.toFront(),P.isSelected||M.selectEdgeById(P.id);var Y=P==null?void 0:P.getData();M.eventCenter.emit(ze.EDGE_CONTEXTMENU,{data:Y,e:b,position:F})}),si(zo(s),"handleMouseDown",function(b){b.stopPropagation(),s.startTime=new Date().getTime()}),si(zo(s),"handleMouseUp",function(b){if(s.startTime){var O=new Date().getTime()-s.startTime;if(!(O>200)){var P=b.button===2;if(!P){var M=b.detail===2,F=s.props,Y=F.model,ne=F.graphModel,ve=Y==null?void 0:Y.getData(),Le=ne.getPointByClient({x:b.clientX,y:b.clientY});if(M){var Ie=ne.editConfigModel,Fe=ne.textEditElement;if(Fe&&Fe.id===Y.id&&ne.setElementStateById(Y.id,ct.DEFAULT),Ie.edgeTextEdit&&Y.text.editable&&ne.setElementStateById(Y.id,ct.TEXT_EDIT),Y.modelType===Ze.POLYLINE_EDGE){var Tt=Y,Dt=ne.getPointByClient({x:b.x,y:b.y}),ut=Dt.canvasOverlayPosition,Ft=ut.x,Pt=ut.y,er=x0({x:Ft,y:Pt},Tt.points);Tt.dbClickPosition=er}ne.eventCenter.emit(ze.EDGE_DBCLICK,{data:ve,e:b,position:Le})}else ne.eventCenter.emit(ze.ELEMENT_CLICK,{data:ve,e:b,position:Le}),ne.eventCenter.emit(ze.EDGE_CLICK,{data:ve,e:b,position:Le});var wt=ne.editConfigModel;ne.selectEdgeById(Y.id,xE(b,wt)),s.toFront()}}}}),s}return _L(t,[{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,d=f.model,v=f.graphModel;if(d.state===ct.TEXT_EDIT)return null;var b=!1,O=v.editConfigModel;return(d.text.draggable||O.edgeTextDraggable)&&(b=!0),Object(Be.g)(pL,{ref:this.textRef,editable:O.edgeTextEdit&&d.text.editable,model:d,graphModel:v,draggable:b})}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b=f.isSelected,O=this.state,P=O.hover;return{start:d,end:v,hover:P,isSelected:b}}},{key:"getArrowStyle",value:function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null}},{key:"getArrow",value:function(){var f=this.props.model,d=f.id,v=f.getArrowStyle(),b=v.refY,O=b===void 0?0:b,P=v.refX,M=P===void 0?2:P;return Object(Be.g)("g",null,Object(Be.g)("defs",null,Object(Be.g)("marker",{id:"marker-start-".concat(d),refX:-M,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Be.g)("marker",{id:"marker-end-".concat(d),refX:M,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model,d=f.getArrowStyle(),v=d.stroke,b=d.strokeWidth,O=d.offset,P=d.verticalLength;return Object(Be.g)("path",{stroke:v,fill:v,strokeWidth:b,d:"M 0 0 L ".concat(O," -").concat(P," L ").concat(O," ").concat(P," Z")})}},{key:"getEndArrow",value:function(){var f=this.props.model,d=f.getArrowStyle(),v=d.stroke,b=d.strokeWidth,O=d.offset,P=d.verticalLength;return Object(Be.g)("path",{stroke:v,fill:v,strokeWidth:b,transform:"rotate(180)",d:"M 0 0 L ".concat(O," -").concat(P," L ").concat(O," ").concat(P," Z")})}},{key:"getAdjustPoints",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=d.getAdjustStart(),O=d.getAdjustEnd();return Object(Be.g)("g",null,Object(Be.g)(bx,hc({type:"SOURCE"},b,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:d,graphModel:v})),Object(Be.g)(bx,hc({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:d,graphModel:v})))}},{key:"getAnimation",value:function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")}},{key:"getAppendWidth",value:function(){return Object(Be.g)("g",null)}},{key:"getAppend",value:function(){return Object(Be.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,d=f.graphModel,v=f.model,b=d.overlapMode;b!==mt.INCREASE&&d.toFront(v.id)}},{key:"render",value:function(){var f=this.props,d=f.model,v=d.isSelected,b=d.isHitable,O=d.isShowAdjustPoint,P=f.graphModel;return P.animation,Object(Be.g)("g",null,Object(Be.g)("g",{className:["lf-edge",!b&&"pointer-none",v&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&v?this.getAdjustPoints():"")}}]),t}(Be.a);function Kp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kp=function(t){return typeof t}:Kp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function DL(e,r){return jL(e)||LL(e,r)||CL(e,r)||IL()}function IL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CL(e,r){if(e){if(typeof e=="string")return Ox(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ox(e,r)}}function Ox(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function LL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function jL(e){if(Array.isArray(e))return e}function BL(e){var r={d:""};return Object.entries(e).forEach(function(t){var s=DL(t,2),f=s[0],d=s[1],v=Kp(d);(f==="style"||v!=="object")&&(r[f]=d)}),Object(Be.g)("path",r)}var vc=BL;function Zp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zp=function(t){return typeof t}:Zp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(e)}function Lm(){return Lm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Lm.apply(this,arguments)}function FL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Sx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function GL(e,r,t){return r&&Sx(e.prototype,r),t&&Sx(e,t),e}function kL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&jm(e,r)}function jm(e,r){return jm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},jm(e,r)}function UL(e){var r=XL();return function(){var s=Jp(e),f;if(r){var d=Jp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return zL(this,f)}}function zL(e,r){if(r&&(Zp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HL(e)}function HL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jp(e){return Jp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jp(e)}var Bm=function(e){kL(t,e);var r=UL(t);function t(){return FL(this,t),r.apply(this,arguments)}return GL(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b=f.isAnimation,O=f.arrowConfig,P=f.getEdgeStyle(),M=f.getEdgeAnimationStyle(),F=M.strokeDasharray,Y=M.stroke,ne=M.strokeDashoffset,ve=M.animationName,Le=M.animationDuration,Ie=M.animationIterationCount,Fe=M.animationTimingFunction,Tt=M.animationDirection;return Object(Be.g)(cl,Lm({},P,{x1:d.x,y1:d.y,x2:v.x,y2:v.y},O,b?{strokeDasharray:F,stroke:Y,style:{strokeDashoffset:ne,animationName:ve,animationDuration:Le,animationIterationCount:Ie,animationTimingFunction:Fe,animationDirection:Tt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b={start:d,end:v},O=LN(b),P=O.d,M=O.strokeWidth,F=O.fill,Y=O.strokeDasharray,ne=O.stroke;return Object(Be.g)(vc,{d:P,fill:F,strokeWidth:M,stroke:ne,strokeDasharray:Y})}}]),t}(pc);function Qp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qp=function(t){return typeof t}:Qp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(e)}function $L(e,r){return KL(e)||YL(e,r)||WL(e,r)||VL()}function VL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WL(e,r){if(e){if(typeof e=="string")return xx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xx(e,r)}}function xx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function YL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function KL(e){if(Array.isArray(e))return e}function ZL(e){var r={points:"",fill:"none"};return Object.entries(e).forEach(function(t){var s=$L(t,2),f=s[0],d=s[1];if(f==="style")r[f]=d;else{var v=Qp(d);v!=="object"&&(r[f]=d)}}),Object(Be.g)("polyline",r)}var JL=ZL;function qp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qp=function(t){return typeof t}:qp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function Tx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function ev(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Tx(Object(t),!0).forEach(function(s){Sa(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Fm(){return Fm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Fm.apply(this,arguments)}function QL(e,r){return r2(e)||t2(e,r)||e2(e,r)||qL()}function qL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e2(e,r){if(e){if(typeof e=="string")return Ax(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ax(e,r)}}function Ax(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function t2(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function r2(e){if(Array.isArray(e))return e}function n2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Px(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function o2(e,r,t){return r&&Px(e.prototype,r),t&&Px(e,t),e}function i2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Gm(e,r)}function Gm(e,r){return Gm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Gm(e,r)}function a2(e){var r=u2();return function(){var s=tv(e),f;if(r){var d=tv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return s2(this,f)}}function s2(e,r){if(r&&(qp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oa(e)}function Oa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tv(e)}function Sa(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var km=function(e){i2(t,e);var r=a2(t);function t(){var s;return n2(this,t),s=r.call(this),Sa(Oa(s),"drag",void 0),Sa(Oa(s),"isDragging",void 0),Sa(Oa(s),"isShowAdjustPointTemp",void 0),Sa(Oa(s),"appendInfo",void 0),Sa(Oa(s),"onDragStart",function(){var f=s.props.model;f.dragAppendStart(),s.isShowAdjustPointTemp=f.isShowAdjustPoint,f.isShowAdjustPoint=!1}),Sa(Oa(s),"onDragging",function(f){var d=f.deltaX,v=f.deltaY,b=s.props,O=b.model,P=b.graphModel;s.isDragging=!0;var M=P.transformModel,F=P.editConfigModel,Y=M.fixDeltaXY(d,v),ne=QL(Y,2),ve=ne[0],Le=ne[1],Ie=O,Fe=F.adjustEdgeMiddle;Fe?s.appendInfo=Ie.dragAppendSimple(s.appendInfo,{x:ve,y:Le}):s.appendInfo=Ie.dragAppend(s.appendInfo,{x:ve,y:Le})}),Sa(Oa(s),"onDragEnd",function(){var f=s.props,d=f.model,v=f.graphModel.eventCenter,b=d;b.dragAppendEnd(),s.isDragging=!1,b.isShowAdjustPoint=s.isShowAdjustPointTemp,s.appendInfo=void 0,v.emit(ze.EDGE_ADJUST,{data:b.getData()})}),Sa(Oa(s),"beforeDragStart",function(f,d){d.dragAble&&s.drag.handleMouseDown(f),s.appendInfo=d}),s.drag=new pa({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd,isStopPropagation:!1}),s}return o2(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.points,v=f.isAnimation,b=f.arrowConfig,O=f.getEdgeStyle(),P=f.getEdgeAnimationStyle(),M=P.strokeDasharray,F=P.stroke,Y=P.strokeDashoffset,ne=P.animationName,ve=P.animationDuration,Le=P.animationIterationCount,Ie=P.animationTimingFunction,Fe=P.animationDirection;return Object(Be.g)(JL,Fm({points:d},O,b,v?{strokeDasharray:M,stroke:F,style:{strokeDashoffset:Y,animationName:ne,animationDuration:ve,animationIterationCount:Le,animationTimingFunction:Ie,animationDirection:Fe}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=f.points,v=f.isSelected,b=this.state,O=b.hover,P={start:null,end:null,hover:O,isSelected:v},M=ul(d);return M.length>=2&&(P.start=M[M.length-2],P.end=M[M.length-1]),P}},{key:"getAppendAttributes",value:function(f){var d=f.start,v=f.end,b;if(d.x===v.x&&d.y===v.y)b="";else{var O={start:d,end:v,offset:10,verticalLength:5},P=rc(ev(ev({},O),{},{type:"start"})),M=rc(ev(ev({},O),{},{type:"end"}));b="M".concat(P.leftX," ").concat(P.leftY,` 
      L`).concat(P.rightX," ").concat(P.rightY,` 
      L`).concat(M.rightX," ").concat(M.rightY,`
      L`).concat(M.leftX," ").concat(M.leftY," z")}return{d:b,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var d=this.getAppendAttributes(f),v=d.d,b=d.strokeWidth,O=d.fill,P=d.strokeDasharray,M=d.stroke;return Object(Be.g)(vc,{d:v,fill:O,strokeWidth:b,stroke:M,strokeDasharray:P})}},{key:"getAppendWidth",value:function(){for(var f=this,d=this.props,v=d.model,b=d.graphModel,O=v.pointsList,P=v.draggable,M=[],F=O.length,Y=function(Le){var Ie="lf-polyline-append",Fe={start:{x:O[Le].x,y:O[Le].y},end:{x:O[Le+1].x,y:O[Le+1].y},startIndex:Le,endIndex:Le+1,direction:"",dragAble:!0},Tt=Object(Be.g)("g",{className:Ie},f.getAppendShape(Fe)),Dt=b.editConfigModel,ut=Dt.adjustEdge,Ft=Dt.adjustEdgeMiddle;if(ut&&P){var Pt=Fe.startIndex,er=Fe.endIndex,wt=Ft&&(Pt===0||er===F-1);Fe.dragAble=!wt,Fe.start.x===Fe.end.x?(Fe.dragAble&&(Ie+="-ew-resize"),Fe.direction=At.VERTICAL):Fe.start.y===Fe.end.y&&(Fe.dragAble&&(Ie+="-ns-resize"),Fe.direction=At.HORIZONTAL),Tt=Object(Be.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Cr){return f.beforeDragStart(Cr,Fe)}},Object(Be.g)("g",{className:Ie},f.getAppendShape(Fe)))}M.push(Tt)},ne=0;ne<F-1;ne++)Y(ne);return Object(Be.g)("g",null,M)}}]),t}(pc);function rv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rv=function(t){return typeof t}:rv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}function l2(e,r){return h2(e)||d2(e,r)||c2(e,r)||f2()}function f2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c2(e,r){if(e){if(typeof e=="string")return _x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _x(e,r)}}function _x(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function d2(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function h2(e){if(Array.isArray(e))return e}function Um(){return Um=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Um.apply(this,arguments)}function p2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function wx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function v2(e,r,t){return r&&wx(e.prototype,r),t&&wx(e,t),e}function y2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&zm(e,r)}function zm(e,r){return zm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},zm(e,r)}function g2(e){var r=E2();return function(){var s=nv(e),f;if(r){var d=nv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return m2(this,f)}}function m2(e,r){if(r&&(rv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b2(e)}function b2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nv(e){return nv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nv(e)}var Hm=function(e){y2(t,e);var r=g2(t);function t(){return p2(this,t),r.apply(this,arguments)}return v2(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.getEdgeStyle(),v=f.path,b=f.isAnimation,O=f.arrowConfig,P=f.getEdgeAnimationStyle(),M=P.strokeDasharray,F=P.stroke,Y=P.strokeDashoffset,ne=P.animationName,ve=P.animationDuration,Le=P.animationIterationCount,Ie=P.animationTimingFunction,Fe=P.animationDirection;return Object(Be.g)(vc,Um({d:v},d,O,b?{strokeDasharray:M,stroke:F,style:{strokeDashoffset:Y,animationName:ne,animationDuration:ve,animationIterationCount:Le,animationTimingFunction:Ie,animationDirection:Fe}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Be.g)(vc,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=this.state,v=d.hover,b=f,O=b.path,P=b.isSelected,M=jN(O),F=l2(M,2),Y=F[0],ne=F[1],ve={start:Y,end:ne,hover:v,isSelected:P};return ve}}]),t}(pc);function ov(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ov=function(t){return typeof t}:ov=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}function Nx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function O2(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Nx(Object(t),!0).forEach(function(s){S2(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Nx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function S2(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function x2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Mx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function T2(e,r,t){return r&&Mx(e.prototype,r),t&&Mx(e,t),e}function A2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Xm(e,r)}function Xm(e,r){return Xm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Xm(e,r)}function P2(e){var r=N2();return function(){var s=iv(e),f;if(r){var d=iv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return _2(this,f)}}function _2(e,r){if(r&&(ov(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w2(e)}function w2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iv(e)}var M2=function(e){A2(t,e);var r=P2(t);function t(){return x2(this,t),r.apply(this,arguments)}return T2(t,[{key:"getArrowAttributes",value:function(){var f=this.props,d=f.arrowInfo,v=f.style,b=d.start,O=d.end,P={start:b,end:O,offset:v.offset,verticalLength:v.verticalLength,type:"end"},M=rc(P),F=M.leftX,Y=M.leftY,ne=M.rightX,ve=M.rightY;return O2({d:"M".concat(F," ").concat(Y," L").concat(O.x," ").concat(O.y," L").concat(ne," ").concat(ve," z")},v)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),d=f.d,v=f.strokeWidth,b=f.stroke,O=f.fill;return Object(Be.g)(vc,{d,fill:O,strokeWidth:v,stroke:b})}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-arrow"},this.getShape())}}]),t}(Be.a);function R2(e,r){return Ja(e,r)}var Rx=R2;function D2(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var I2=D2,C2=function(){return ro.a.Date.now()},$m=C2,L2=/\s/;function j2(e){for(var r=e.length;r--&&L2.test(e.charAt(r)););return r}var B2=j2,F2=/^\s+/;function G2(e){return e&&e.slice(0,B2(e)+1).replace(F2,"")}var k2=G2,Dx=0/0,U2=/^[-+]0x[0-9a-f]+$/i,z2=/^0b[01]+$/i,H2=/^0o[0-7]+$/i,X2=parseInt;function $2(e){if(typeof e=="number")return e;if(Ws(e))return Dx;if(Kr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Kr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=k2(e);var t=z2.test(e);return t||H2.test(e)?X2(e.slice(2),t?2:8):U2.test(e)?Dx:+e}var Ix=$2,V2="Expected a function",W2=Math.max,Y2=Math.min;function K2(e,r,t){var s,f,d,v,b,O,P=0,M=!1,F=!1,Y=!0;if(typeof e!="function")throw new TypeError(V2);r=Ix(r)||0,Kr(t)&&(M=!!t.leading,F="maxWait"in t,d=F?W2(Ix(t.maxWait)||0,r):d,Y="trailing"in t?!!t.trailing:Y);function ne(Pt){var er=s,wt=f;return s=f=void 0,P=Pt,v=e.apply(wt,er),v}function ve(Pt){return P=Pt,b=setTimeout(Fe,r),M?ne(Pt):v}function Le(Pt){var er=Pt-O,wt=Pt-P,gr=r-er;return F?Y2(gr,d-wt):gr}function Ie(Pt){var er=Pt-O,wt=Pt-P;return O===void 0||er>=r||er<0||F&&wt>=d}function Fe(){var Pt=$m();if(Ie(Pt))return Tt(Pt);b=setTimeout(Fe,Le(Pt))}function Tt(Pt){return b=void 0,Y&&s?ne(Pt):(s=f=void 0,v)}function Dt(){b!==void 0&&clearTimeout(b),P=0,s=O=f=b=void 0}function ut(){return b===void 0?v:Tt($m())}function Ft(){var Pt=$m(),er=Ie(Pt);if(s=arguments,f=this,O=Pt,er){if(b===void 0)return ve(O);if(F)return clearTimeout(b),b=setTimeout(Fe,r),ne(O)}return b===void 0&&(b=setTimeout(Fe,r)),v}return Ft.cancel=Dt,Ft.flush=ut,Ft}var Z2=K2,J2=o(166);function Q2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Cx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function q2(e,r,t){return r&&Cx(e.prototype,r),t&&Cx(e,t),e}function bs(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ej=function(){function e(r){Q2(this,e),bs(this,"undos",[]),bs(this,"redos",[]),bs(this,"callbacks",[]),bs(this,"stopWatch",null),bs(this,"curData",null),bs(this,"maxSize",50),bs(this,"waitTime",100),bs(this,"eventCenter",void 0),this.eventCenter=r}return q2(e,[{key:"add",value:function(t){Rx(I2(this.undos),t)||(this.undos.push(t),Rx(this.curData,t)||(this.redos=[]),this.eventCenter.emit(ze.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var s=this.undos.pop();return this.curData=gn(s),s}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=gn(t),t}}},{key:"watch",value:function(t){var s=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=Object(J2.a)(t,Z2(function(){var f=t.modelToHistoryData();f&&s.add(f)},this.waitTime))}}]),e}(),tj=ej;function av(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?av=function(t){return typeof t}:av=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}var Lx,jx,Bx;function rj(e,r){return aj(e)||ij(e,r)||oj(e,r)||nj()}function nj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oj(e,r){if(e){if(typeof e=="string")return Fx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fx(e,r)}}function Fx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function ij(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function aj(e){if(Array.isArray(e))return e}function Gx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function xl(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Gx(Object(t),!0).forEach(function(s){au(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function sj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function kx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function uj(e,r,t){return r&&kx(e.prototype,r),t&&kx(e,t),e}function lj(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Vm(e,r)}function Vm(e,r){return Vm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Vm(e,r)}function fj(e){var r=dj();return function(){var s=sv(e),f;if(r){var d=sv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return cj(this,f)}}function cj(e,r){if(r&&(av(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tl(e)}function Tl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},sv(e)}function au(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Wm=ui(Lx=(Bx=jx=function(e){lj(t,e);var r=fj(t);function t(){var s;return sj(this,t),s=r.call(this),au(Tl(s),"ref",Object(Be.f)()),au(Tl(s),"__prevText",{type:"",text:"",id:""}),au(Tl(s),"keyupHandler",function(f){var d=s.props.graphModel.textEditElement;f.key==="Enter"&&f.altKey&&d.setElementState(0)}),au(Tl(s),"inputHandler",function(f){var d=f.target,v=d.innerText,b=s.props.graphModel.textEditElement;s.__prevText={type:b.type,text:v.replace(/(\r\n)+$|(\n)+$/,""),id:b.id}}),au(Tl(s),"keydownHandler",function(f){f.stopPropagation()}),s.state={style:{left:0,top:0}},s}return uj(t,[{key:"componentDidUpdate",value:function(){var f=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var d=this.__prevText,v=d.text,b=d.id;f.updateText(b,v),f.eventCenter.emit(ze.TEXT_UPDATE,xl({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(f){if(window.getSelection!==void 0&&document.createRange!==void 0){var d=document.createRange();d.selectNodeContents(f),d.collapse(!1);var v=window.getSelection();v.removeAllRanges(),v.addRange(d)}}},{key:"render",value:function(){var f,d=this.props.graphModel.textEditElement,v=this.state.style;return d?Object(Be.g)("div",{contentEditable:!0,className:"lf-text-input",style:v,ref:this.ref,key:d.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(f=d.text)===null||f===void 0?void 0:f.value):null}}],[{key:"getDerivedStateFromProps",value:function(f){var d=f.graphModel,v=d.transformModel,b=d.theme,O=d.textEditElement,P;if(O){var M;if(!((M=O.text)!==null&&M!==void 0&&M.value))if(O.BaseType===Ve.EDGE){O=O;var F=O.text,Y=O.textPosition,ne=Y.x,ve=Y.y;F.x=ne,F.y=ve,O.setText(F)}else O=O;var Le={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(O.BaseType===Ve.EDGE){var Ie=b.edgeText,Fe=Ie.overflowMode,Tt=Ie.lineHeight,Dt=Ie.wrapPadding,ut=Ie.textWidth;ut&&Fe==="autoWrap"&&(P=xl(xl({},Le),{},{width:ut,minWidth:ut,lineHeight:Tt,padding:Dt}))}else if(O.BaseType===Ve.NODE){var Ft=b.nodeText,Pt=Ft.overflowMode,er=Ft.lineHeight,wt=Ft.wrapPadding,gr=Ft.textWidth,Cr=O,_n=Cr.width,Fn=Cr.modelType;(Fn!==Ze.TEXT_NODE&&Pt==="autoWrap"||Fn===Ze.TEXT_NODE&&gr)&&(P=xl(xl({},Le),{},{width:gr||_n,minWidth:gr||_n,lineHeight:er,padding:wt}))}var qn=O.text,Eo=qn.x,su=qn.y,Al=v.CanvasPointToHtmlPoint([Eo,su]),Es=rj(Al,2),Pl=Es[0],qm=Es[1];return{style:xl({left:Pl,top:qm},P)}}}}]),t}(Be.a),au(jx,"toolName","textEdit"),Bx))||Lx,hj=function(r){var t=r.x,s=r.y,f=r.width,d=r.height;return{x:t-f/2,y:s-d/2,x1:t+f/2,y1:s+d/2}},pj=function(r){var t=r.startPoint,s=r.endPoint,f=(t.x+s.x)/2,d=(t.y+s.y)/2,v=Math.abs(t.x-s.x)+10,b=Math.abs(t.y-s.y)+10;return{x:f-v/2,y:d-b/2,x1:f+v/2,y1:d+b/2}},vj=function(r){var t=r.points,s=ul(t),f=nc(s,8),d=f.x,v=f.y,b=f.width,O=f.height;return{x:d-b/2,y:v-O/2,x1:d+b/2,y1:v+O/2}},yj=function(r){var t=r.path,s=bh(t),f=nc(s,8),d=f.x,v=f.y,b=f.width,O=f.height;return{x:d-b/2,y:v-O/2,x1:d+b/2,y1:v+O/2}},gj=function(r){if(r.modelType===Ze.LINE_EDGE)return pj(r);if(r.modelType===Ze.POLYLINE_EDGE)return vj(r);if(r.modelType===Ze.BEZIER_EDGE)return yj(r)};function uv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uv=function(t){return typeof t}:uv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(e)}var Ux,zx,Hx;function Xx(e,r){return Ej(e)||bj(e,r)||$x(e,r)||mj()}function mj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bj(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function Ej(e){if(Array.isArray(e))return e}function Oj(e){return Tj(e)||xj(e)||$x(e)||Sj()}function Sj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $x(e,r){if(e){if(typeof e=="string")return Ym(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ym(e,r)}}function xj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tj(e){if(Array.isArray(e))return Ym(e)}function Ym(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function Aj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Vx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Pj(e,r,t){return r&&Vx(e.prototype,r),t&&Vx(e,t),e}function _j(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Km(e,r)}function Km(e,r){return Km=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Km(e,r)}function wj(e){var r=Mj();return function(){var s=lv(e),f;if(r){var d=lv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return Nj(this,f)}}function Nj(e,r){if(r&&(uv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yc(e)}function yc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lv(e){return lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lv(e)}function gc(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Zm=ui(Ux=(Hx=zx=function(e){_j(t,e);var r=wj(t);function t(s){var f;Aj(this,t),f=r.call(this),gc(yc(f),"stepDrag",void 0),gc(yc(f),"handleMouseDown",function(O){f.stepDrag.handleMouseDown(O)}),gc(yc(f),"onDragging",function(O){var P=O.deltaX,M=O.deltaY,F=f.props.graphModel,Y=F.getSelectElements(!0);F.moveNodes(Y.nodes.map(function(ne){return ne.id}),P,M)}),gc(yc(f),"handleContextMenu",function(O){O.preventDefault();var P=f.props,M=P.graphModel,F=P.graphModel,Y=F.eventCenter,ne=F.selectElements,ve=M.getPointByClient({x:O.clientX,y:O.clientY}),Le={nodes:[],edges:[]},Ie=Oj(ne.values());Ie.forEach(function(Fe){Fe.BaseType===Ve.NODE&&Le.nodes.push(Fe.getData()),Fe.BaseType===Ve.EDGE&&Le.edges.push(Fe.getData())}),Y.emit(ze.SELECTION_CONTEXTMENU,{data:Le,e:O,position:ve})});var d=s.graphModel,v=d.gridSize,b=d.eventCenter;return f.stepDrag=new pa({onDragging:f.onDragging,step:v,eventType:"SELECTION",eventCenter:b}),f}return Pj(t,[{key:"render",value:function(){var f=this.props.graphModel,d=f.selectElements,v=f.transformModel;if(!(d.size<=1)){var b=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,M=Number.MIN_SAFE_INTEGER;d.forEach(function(Ie){var Fe={x:0,y:0,x1:0,y1:0};Ie.BaseType===Ve.NODE&&(Fe=hj(Ie)),Ie.BaseType===Ve.EDGE&&(Fe=gj(Ie)),b=Math.min(b,Fe.x),O=Math.min(O,Fe.y),P=Math.max(P,Fe.x1),M=Math.max(M,Fe.y1)});var F=v.CanvasPointToHtmlPoint([b,O]),Y=Xx(F,2);b=Y[0],O=Y[1];var ne=v.CanvasPointToHtmlPoint([P,M]),ve=Xx(ne,2);P=ve[0],M=ve[1];var Le={left:"".concat(b-10,"px"),top:"".concat(O-10,"px"),width:"".concat(P-b+20,"px"),height:"".concat(M-O+20,"px")};return Object(Be.g)("div",{className:"lf-multiple-select",style:Le,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}]),t}(Be.a),gc(zx,"toolName","multipleSelect"),Hx))||Ux;function Rj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Wx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Dj(e,r,t){return r&&Wx(e.prototype,r),t&&Wx(e,t),e}function fv(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ij=function(){function e(r){Rj(this,e),fv(this,"tools",void 0),fv(this,"components",void 0),fv(this,"toolMap",new Map),fv(this,"instance",void 0),this.instance=r,this.isDisabledTool(Wm.toolName)||this.registerTool(Wm.toolName,Wm),this.isDisabledTool(Zm.toolName)||this.registerTool(Zm.toolName,Zm);var t=r.graphModel,s=t.eventCenter;s.on("".concat(ze.GRAPH_TRANSFORM,",").concat(ze.NODE_CLICK,",").concat(ze.BLANK_CLICK," "),function(){var f=t.textEditElement,d=t.editConfigModel,v=d.edgeTextEdit,b=d.nodeTextEdit;(v||b)&&f&&t.textEditElement.setElementState(ct.DEFAULT)})}return Dj(e,[{key:"isDisabledTool",value:function(t){return this.instance.options.disabledTools.indexOf(t)!==-1}},{key:"registerTool",value:function(t,s){this.toolMap.set(t,s)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}]),e}(),Cj=o(167),Lj=o.n(Cj);function jj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Yx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Bj(e,r,t){return r&&Yx(e.prototype,r),t&&Yx(e,t),e}function Jm(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Kx=function(){function e(r){jj(this,e),Jm(this,"mousetrap",void 0),Jm(this,"options",void 0),Jm(this,"target",void 0),r.keyboard||(r.keyboard={enabled:!1}),this.options=r;var t=r.lf;this.target=t.container,this.mousetrap=new Lj.a,r.keyboard.enabled&&this.enable(!0)}return Bj(e,[{key:"initShortcuts",value:function(){var t=this,s=this.options.keyboard.shortcuts;if(s)if(m(s))s.forEach(function(b){var O=b.keys,P=b.callback,M=b.action;return t.on(O,P,M)});else{var f=s.keys,d=s.callback,v=s.action;this.on(f,d,v)}}},{key:"on",value:function(t,s,f){this.mousetrap.bind(this.getKeys(t),s,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(t,s){this.mousetrap.unbind(this.getKeys(t),s)}},{key:"enable",value:function(t){(this.disabled||t)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(t){var s=this;return(Array.isArray(t)?t:[t]).map(function(f){return s.formatKey(f)})}},{key:"formatKey",value:function(t){var s=t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command");return s}}]),e}(),Fj=Kx,Bi=null;function Zx(e,r){return e.x+=r,e.y+=r,e.text&&(e.text.x+=r,e.text.y+=r),e}function Jx(e,r){return e.startPoint&&(e.startPoint.x+=r,e.startPoint.y+=r),e.endPoint&&(e.endPoint.x+=r,e.endPoint.y+=r),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(t){t.x+=r,t.y+=r}),e.text&&(e.text.x+=r,e.text.y+=r),e}var cv=40;function Gj(e,r){var t=e.keyboard,s=t.options.keyboard;t.on(["cmd + c","ctrl + c"],function(){if(s.enabled&&!r.textEditElement){var f=e.options.guards,d=r.getSelectElements(!1),v=f&&f.beforeClone?f.beforeClone(d):!0;return v?(Bi=d,Bi.nodes.forEach(function(b){return Zx(b,cv)}),Bi.edges.forEach(function(b){return Jx(b,cv)}),!1):(Bi=null,!1)}}),t.on(["cmd + v","ctrl + v"],function(){if(s.enabled&&!r.textEditElement){if(Bi&&(Bi.nodes||Bi.edges)){e.clearSelectElements();var f=e.addElements(Bi);if(!f)return;f.nodes.forEach(function(d){return e.selectElementById(d.id,!0)}),f.edges.forEach(function(d){return e.selectElementById(d.id,!0)}),Bi.nodes.forEach(function(d){return Zx(d,cv)}),Bi.edges.forEach(function(d){return Jx(d,cv)})}return!1}}),t.on(["cmd + z","ctrl + z"],function(){if(s.enabled&&!r.textEditElement)return e.undo(),!1}),t.on(["cmd + y","ctrl + y"],function(){if(s.enabled&&!r.textEditElement)return e.redo(),!1}),t.on(["backspace"],function(){if(s.enabled&&!r.textEditElement){var f=r.getSelectElements(!0);return e.clearSelectElements(),f.edges.forEach(function(d){return e.deleteEdge(d.id)}),f.nodes.forEach(function(d){return e.deleteNode(d.id)}),!1}})}function kj(e,r){e.on("node:mousemove",function(t){var s=t.data;r.setNodeSnapLine(s)}),e.on("node:mouseup",function(){r.clearSnapline()})}function dv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dv=function(t){return typeof t}:dv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}function Qx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function mc(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Qx(Object(t),!0).forEach(function(s){En(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Uj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function qx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function zj(e,r,t){return r&&qx(e.prototype,r),t&&qx(e,t),e}function En(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Qm=function(){function e(r){var t=this;Uj(this,e),En(this,"container",void 0),En(this,"width",void 0),En(this,"height",void 0),En(this,"graphModel",void 0),En(this,"history",void 0),En(this,"viewMap",new Map),En(this,"tool",void 0),En(this,"keyboard",void 0),En(this,"dnd",void 0),En(this,"options",void 0),En(this,"snaplineModel",void 0),En(this,"components",[]),En(this,"plugins",void 0),En(this,"extension",{}),En(this,"adapterIn",void 0),En(this,"adapterOut",void 0),En(this,"getView",function(s){return t.viewMap.get(s)}),r=xO(r),this.options=r,this.container=r.container,this.plugins=r.plugins,this.graphModel=new qN(mc({},r)),this.tool=new Ij(this),this.history=new tj(this.graphModel.eventCenter),this.dnd=new FR({lf:this}),this.keyboard=new Fj({lf:this,keyboard:r.keyboard}),r.snapline!==!1&&(this.snaplineModel=new HS(this.graphModel),kj(this.graphModel.eventCenter,this.snaplineModel)),Gj(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(r.disabledPlugins)}return zj(e,[{key:"register",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(typeof t!="string"){this.registerElement(t);return}var d={BaseEdge:pc,BaseEdgeModel:hg,BaseNode:ba,BaseNodeModel:ga,RectNode:cm,RectNodeModel:qg,CircleNode:pm,CircleNodeModel:zg,PolygonNode:gm,PolygonNodeModel:Zg,TextNode:Am,TextNodeModel:tm,LineEdge:Bm,LineEdgeModel:yg,DiamondNode:Em,DiamondNodeModel:$g,PolylineEdge:km,PolylineEdgeModel:bg,BezierEdge:Hm,BezierEdgeModel:Gg,EllipseNode:xm,EllipseNodeModel:Wg,HtmlNode:wm,HtmlNodeModel:nm,h:Be.g,type:t};this.viewMap.forEach(function(M){var F=M.extendKey;F&&(d[F]=M)}),this.graphModel.modelMap.forEach(function(M){var F=M.extendKey;F&&(d[F]=M)});var v=s(d),b=v.view,O=v.model,P=b;f&&!P.isObervered&&(P.isObervered=!0,P=kr(P)),this.setView(t,P),this.graphModel.setModel(t,O)}},{key:"registerElement",value:function(t){var s=t.view;t.isObserverView!==!1&&!s.isObervered&&(s.isObervered=!0,s=kr(s)),this.setView(t.type,s),this.graphModel.setModel(t.type,t.model)}},{key:"batchRegister",value:function(){var t=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];s.forEach(function(f){t.registerElement(f)})}},{key:"defaultRegister",value:function(){this.registerElement({view:cm,model:qg,type:"rect"}),this.registerElement({type:"circle",view:pm,model:zg}),this.registerElement({type:"polygon",view:gm,model:Zg}),this.registerElement({type:"line",view:Bm,model:yg}),this.registerElement({type:"polyline",view:km,model:bg}),this.registerElement({type:"bezier",view:Hm,model:Gg}),this.registerElement({type:"text",view:Am,model:tm}),this.registerElement({type:"ellipse",view:xm,model:Wg}),this.registerElement({type:"diamond",view:Em,model:$g}),this.registerElement({type:"html",view:wm,model:nm})}},{key:"selectElementById",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.graphModel.selectElementById(t,s),!s&&f&&this.graphModel.toFront(t)}},{key:"focusOn",value:function(t){var s=this.graphModel.transformModel,f=t.coordinate,d=t.id;if(!f){var v=this.getNodeModelById(d);v&&(f=v.getData());var b=this.getEdgeModelById(d);b&&(f=b.textPosition)}var O=f,P=O.x,M=O.y;s.focusOn(P,M,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(t){this.graphModel.setTheme(t)}},{key:"resize",value:function(t,s){this.graphModel.resize(t,s),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(t){this.graphModel.setDefaultEdgeType(t)}},{key:"updateText",value:function(t,s){this.graphModel.updateText(t,s)}},{key:"deleteElement",value:function(t){var s,f,d,v=this.getModelById(t);if(!v)return!1;var b=(s={},En(s,Ve.NODE,this.deleteNode),En(s,Ve.EDGE,this.deleteEdge),s),O=v.BaseType;return(f=(d=b[O])===null||d===void 0?void 0:d.call(this,t))!==null&&f!==void 0?f:!1}},{key:"getModelById",value:function(t){return this.graphModel.getElement(t)}},{key:"getDataById",value:function(t){var s;return(s=this.graphModel.getElement(t))===null||s===void 0?void 0:s.getData()}},{key:"changeNodeType",value:function(t,s){this.graphModel.changeNodeType(t,s)}},{key:"changeEdgeType",value:function(t,s){this.graphModel.changeEdgeType(t,s)}},{key:"getNodeEdges",value:function(t){return this.graphModel.getNodeEdges(t)}},{key:"addNode",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.NODE_ADD;return this.graphModel.addNode(t,s)}},{key:"deleteNode",value:function(t){var s=this.graphModel.getNodeModelById(t);if(!s)return!1;var f=s.getData(),d=this.options.guards,v=d&&d.beforeDelete?d.beforeDelete(f):!0;return v&&this.graphModel.deleteNode(t),v}},{key:"cloneNode",value:function(t){var s=this.graphModel.getNodeModelById(t),f=s.getData(),d=this.options.guards,v=d&&d.beforeClone?d.beforeClone(f):!0;if(v)return this.graphModel.cloneNode(t)}},{key:"changeNodeId",value:function(t,s){return this.graphModel.changeNodeId(t,s)}},{key:"getNodeModelById",value:function(t){return this.graphModel.getNodeModelById(t)}},{key:"getNodeDataById",value:function(t){return this.graphModel.getNodeModelById(t).getData()}},{key:"addEdge",value:function(t){return this.graphModel.addEdge(t)}},{key:"deleteEdge",value:function(t){var s=this.options.guards,f=this.graphModel.edgesMap[t];if(!f)return!1;var d=f.model.getData(),v=s&&s.beforeDelete?s.beforeDelete(d):!0;return v&&this.graphModel.deleteEdgeById(t),v}},{key:"deleteEdgeByNodeId",value:function(t){var s=t.sourceNodeId,f=t.targetNodeId;s&&f?this.graphModel.deleteEdgeBySourceAndTarget(s,f):s?this.graphModel.deleteEdgeBySource(s):f&&this.graphModel.deleteEdgeByTarget(f)}},{key:"changeEdgeId",value:function(t,s){return this.graphModel.changeEdgeId(t,s)}},{key:"getEdgeModelById",value:function(t){var s,f=this.graphModel.edgesMap;return(s=f[t])===null||s===void 0?void 0:s.model}},{key:"getEdgeModels",value:function(t){var s=this.graphModel.edges,f=t.sourceNodeId,d=t.targetNodeId;if(f&&d){var v=[];return s.forEach(function(P){P.sourceNodeId===f&&P.targetNodeId===d&&v.push(P)}),v}if(f){var b=[];return s.forEach(function(P){P.sourceNodeId===f&&b.push(P)}),b}if(d){var O=[];return s.forEach(function(P){P.targetNodeId===d&&O.push(P)}),O}return[]}},{key:"getEdgeDataById",value:function(t){var s;return(s=this.getEdgeModelById(t))===null||s===void 0?void 0:s.getData()}},{key:"getNodeIncomingEdge",value:function(t){return this.graphModel.getNodeIncomingEdge(t)}},{key:"getNodeOutgoingEdge",value:function(t){return this.graphModel.getNodeOutgoingEdge(t)}},{key:"getNodeIncomingNode",value:function(t){return this.graphModel.getNodeIncomingNode(t)}},{key:"getNodeOutgoingNode",value:function(t){return this.graphModel.getNodeOutgoingNode(t)}},{key:"editText",value:function(t){this.graphModel.editText(t)}},{key:"setProperties",value:function(t,s){var f;(f=this.graphModel.getElement(t))===null||f===void 0||f.setProperties(Zn(s))}},{key:"deleteProperty",value:function(t,s){var f;(f=this.graphModel.getElement(t))===null||f===void 0||f.deleteProperty(s)}},{key:"getProperties",value:function(t){var s;return(s=this.graphModel.getElement(t))===null||s===void 0?void 0:s.getProperties()}},{key:"toFront",value:function(t){this.graphModel.toFront(t)}},{key:"setElementZIndex",value:function(t,s){return this.graphModel.setElementZIndex(t,s)}},{key:"addElements",value:function(t){for(var s=this,f=t.nodes,d=t.edges,v={},b={nodes:[],edges:[]},O=0;O<f.length;O++){var P=f[O],M=P.id,F=this.addNode(P);if(!F)return;M&&(v[M]=F.id),b.nodes.push(F)}return d.forEach(function(Y){var ne=Y.sourceNodeId,ve=Y.targetNodeId;v[ne]&&(ne=v[ne]),v[ve]&&(ve=v[ve]);var Le=s.graphModel.addEdge(mc(mc({},Y),{},{sourceNodeId:ne,targetNodeId:ve}));b.edges.push(Le)}),b}},{key:"getAreaElement",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return this.graphModel.getAreaElement(t,s,f,d,v).map(function(b){return b.getData()})}},{key:"getSelectElements",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.graphModel.getSelectElements(t)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var t=this.graphModel.modelToGraphData();return this.adapterOut?this.adapterOut(t):t}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(t){this.graphModel.editConfigModel.updateEditConfig(t)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(t,s){return this.graphModel.getPointByClient({x:t,y:s})}},{key:"undo",value:function(){if(this.history.undoAble()){var t=Zn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}},{key:"redo",value:function(){if(this.history.redoAble()){var t=Zn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}},{key:"zoom",value:function(t,s){var f=this.graphModel.transformModel;return f.zoom(t,s)}},{key:"resetZoom",value:function(){var t=this.graphModel.transformModel;t.resetZoom()}},{key:"setZoomMiniSize",value:function(t){var s=this.graphModel.transformModel;s.setZoomMiniSize(t)}},{key:"setZoomMaxSize",value:function(t){var s=this.graphModel.transformModel;s.setZoomMaxSize(t)}},{key:"getTransform",value:function(){var t=this.graphModel.transformModel,s=t.SCALE_X,f=t.SCALE_Y,d=t.TRANSLATE_X,v=t.TRANSLATE_Y;return{SCALE_X:s,SCALE_Y:f,TRANSLATE_X:d,TRANSLATE_Y:v}}},{key:"translate",value:function(t,s){var f=this.graphModel.transformModel;f.translate(t,s)}},{key:"resetTranslate",value:function(){var t=this.graphModel.transformModel,s=t.TRANSLATE_X,f=t.TRANSLATE_Y;this.translate(-s,-f)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(t,s){s===void 0&&(s=t),this.graphModel.fitView(t,s)}},{key:"openEdgeAnimation",value:function(t){this.graphModel.openEdgeAnimation(t)}},{key:"closeEdgeAnimation",value:function(t){this.graphModel.closeEdgeAnimation(t)}},{key:"on",value:function(t,s){this.graphModel.eventCenter.on(t,s)}},{key:"off",value:function(t,s){this.graphModel.eventCenter.off(t,s)}},{key:"once",value:function(t,s){this.graphModel.eventCenter.once(t,s)}},{key:"emit",value:function(t,s){this.graphModel.eventCenter.emit(t,s)}},{key:"installPlugins",value:function(){var t,s=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=(t=this.plugins)!==null&&t!==void 0?t:e.extensions;d.forEach(function(v){var b=v.pluginName||v.name;f.indexOf(b)===-1&&s.installPlugin(v)})}},{key:"installPlugin",value:function(t){if(dv(t)==="object"){var s=t.install,f=t.render;s&&s.call(t,this,e),f&&this.components.push(f.bind(t)),this.extension[t.pluginName]=t;return}var d=t,v=new d({lf:this,LogicFlow:e,options:this.options.pluginsOptions});v.render&&this.components.push(v.render.bind(v)),this.extension[d.pluginName]=v}},{key:"updateAttributes",value:function(t,s){this.graphModel.updateAttributes(t,s)}},{key:"createFakerNode",value:function(t){var s=this.graphModel.modelMap.get(t.type);if(!s){console.warn("".concat(t.type,""));return}var f=new s(mc(mc({},t),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(f),f}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(t){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(t)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(t,s){this.viewMap.set(t,s)}},{key:"renderRawData",value:function(t){this.graphModel.graphDataToModel(Zn(t)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Be.j)(Object(Be.g)(LR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ze.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(t=this.adapterIn(t)),this.renderRawData(t)}}],[{key:"use",value:function(t){var s=t.pluginName;s||(console.warn("".concat(t.name||t.constructor.name,"pluginName!")),s=t.name);var f=this.extensions.get(s);f&&f.destroy&&f.destroy(),this.extensions.set(s,t)}}]),e}();En(Qm,"extensions",new Map);function ui(e){return kr(e)}u.default=Qm}])})})(dB,$t);var VA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),hB=function(n){VA(a,n);function a(i,u){var o=this;return i.id||(i.id="Event_"+zi()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o}return a.prototype.setAttributes=function(){this.r=18},a.prototype.getConnectedTargetRules=function(){var i=n.prototype.getConnectedTargetRules.call(this),u={message:"",validate:function(){return!1}};return i.push(u),i},a.extendKey="StartEventModel",a}($t.CircleNodeModel),pB=function(n){VA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.extendKey="StartEventNode",a}($t.CircleNode),WA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Tv=globalThis&&globalThis.__assign||function(){return Tv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Tv.apply(this,arguments)},vB=function(n){WA(a,n);function a(i,u){var o=this;return i.id||(i.id="Event_"+zi()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o}return a.prototype.setAttributes=function(){this.r=18},a.prototype.getConnectedSourceRules=function(){var i=n.prototype.getConnectedSourceRules.call(this),u={message:"",validate:function(){return!1}};return i.push(u),i},a.extendKey="EndEventModel",a}($t.CircleNodeModel),yB=function(n){WA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},a.prototype.getShape=function(){var i=this.props.model,u=i.getNodeStyle(),o=i.x,l=i.y,c=i.r,h=n.prototype.getShape.call(this);return $t.h("g",{},h,$t.h("circle",Tv(Tv({},u),{cx:o,cy:l,r:c-5})))},a.extendKey="EndEventView",a}($t.CircleNode),YA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Dc=globalThis&&globalThis.__assign||function(){return Dc=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Dc.apply(this,arguments)},gB=function(n){YA(a,n);function a(i,u){var o=this;return i.id||(i.id="Gateway_"+zi()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}return a.extendKey="ExclusiveGatewayModel",a}($t.PolygonNodeModel),mB=function(n){YA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.points,p=i.getNodeStyle();return $t.h("g",{transform:"matrix(1 0 0 1 "+(u-l/2)+" "+(o-c/2)+")"},$t.h("polygon",Dc(Dc({},p),{x:u,y:o,points:h})),$t.h("path",Dc({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},p)))},a.extendKey="ExclusiveGatewayNode",a}($t.PolygonNode),KA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Av=globalThis&&globalThis.__assign||function(){return Av=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Av.apply(this,arguments)},bB=function(n){KA(a,n);function a(i,u){var o=this;return i.id||(i.id="Activity_"+zi()),o=n.call(this,i,u)||this,o}return a.extendKey="UserTaskModel",a}($t.RectNodeModel),EB=function(n){KA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getLabelShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getNodeStyle();return $t.h("svg",{x:u-l/2+5,y:o-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.radius,p=i.getNodeStyle();return $t.h("g",{},[$t.h("rect",Av(Av({},p),{x:u-l/2,y:o-c/2,rx:h,ry:h,width:l,height:c})),this.getLabelShape()])},a.extendKey="UserTaskNode",a}($t.RectNode),ZA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),vb=globalThis&&globalThis.__assign||function(){return vb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},vb.apply(this,arguments)},OB=function(n){ZA(a,n);function a(i,u){var o=this;return i.id||(i.id="Activity_"+zi()),o=n.call(this,i,u)||this,o}return a.extendKey="ServiceTaskModel",a}($t.RectNodeModel),SB=function(n){ZA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getLabelShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getNodeStyle();return $t.h("svg",{x:u-l/2+5,y:o-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.radius,p=i.getNodeStyle();return $t.h("g",{},[$t.h("rect",vb({x:u-l/2,y:o-c/2,rx:h,ry:h,width:l,height:c},p)),this.getLabelShape()])},a.extendKey="ServiceTaskNode",a}($t.RectNode),JA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),QA=function(n){JA(a,n);function a(i,u){var o=this;return i.id||(i.id="Flow_"+zi()),o=n.call(this,i,u)||this,o}return a.extendKey="SequenceFlowModel",a}($t.PolylineEdgeModel),qA=function(n){JA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.extendKey="SequenceFlowEdge",a}($t.PolylineEdge),iT={width:40,height:40},aT={width:40,height:40},sT={width:40,height:40},uT={width:100,height:80},lT={width:100,height:80},xB=new Kj([32,32,1]);function fT(){return xB.next()}var So=function(){};So.ObjTree=function(){return this};So.ObjTree.VERSION="0.23";So.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;So.ObjTree.prototype.attr_prefix="-";So.ObjTree.prototype.parseXML=function(n){var a;if(window.DOMParser){var i=new DOMParser,u=i.parseFromString(n,"application/xml");if(!u)return;a=u.documentElement}else window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(n),a=i.documentElement);if(a)return this.parseDOM(a)};So.ObjTree.prototype.parseHTTP=function(n,a,i){var u={};for(var o in a)u[o]=a[o];if(u.method||(typeof u.postBody>"u"&&typeof u.postbody>"u"&&typeof u.parameters>"u"?u.method="get":u.method="post"),i){u.asynchronous=!0;var l=this,c=i,h=u.onComplete;u.onComplete=function(y){var S;y&&y.responseXML&&y.responseXML.documentElement&&(S=l.parseDOM(y.responseXML.documentElement)),c(S,y),h&&h(y)}}else u.asynchronous=!1;var p;if(typeof HTTP<"u"&&HTTP.Request){u.uri=n;var g=new HTTP.Request(u);g&&(p=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(n,u);g&&(p=g.transport)}if(i)return p;if(p&&p.responseXML&&p.responseXML.documentElement)return this.parseDOM(p.responseXML.documentElement)};So.ObjTree.prototype.parseDOM=function(n){if(n){if(this.__force_array={},this.force_array)for(var a=0;a<this.force_array.length;a++)this.__force_array[this.force_array[a]]=1;var i=this.parseElement(n);if(this.__force_array[n.nodeName]&&(i=[i]),n.nodeType!=11){var u={};u[n.nodeName]=i,i=u}return i}};So.ObjTree.prototype.parseElement=function(n){if(n.nodeType!=7){if(n.nodeType==3||n.nodeType==4){var a=n.nodeValue.match(/[^\x00-\x20]/);return a==null?void 0:n.nodeValue}var i,u={};if(n.attributes&&n.attributes.length){i={};for(var o=0;o<n.attributes.length;o++){var l=n.attributes[o].nodeName;if(typeof l=="string"){var c=n.attributes[o].nodeValue;c&&(l=this.attr_prefix+l,typeof u[l]>"u"&&(u[l]=0),u[l]++,this.addNode(i,l,u[l],c))}}}if(n.childNodes&&n.childNodes.length){var h=!0;i&&(h=!1);for(var o=0;o<n.childNodes.length&&h;o++){var p=n.childNodes[o].nodeType;p==3||p==4||(h=!1)}if(h){i||(i="");for(var o=0;o<n.childNodes.length;o++)i+=n.childNodes[o].nodeValue}else{i||(i={});for(var o=0;o<n.childNodes.length;o++){var l=n.childNodes[o].nodeName;if(typeof l=="string"){var c=this.parseElement(n.childNodes[o]);c&&(typeof u[l]>"u"&&(u[l]=0),u[l]++,this.addNode(i,l,u[l],c))}}}}return i}};So.ObjTree.prototype.addNode=function(n,a,i,u){this.__force_array[a]?(i==1&&(n[a]=[]),n[a][n[a].length]=u):i==1?n[a]=u:i==2?n[a]=[n[a],u]:n[a][n[a].length]=u};So.ObjTree.prototype.writeXML=function(n){var a=this.hash_to_xml(null,n);return this.xmlDecl+a};So.ObjTree.prototype.hash_to_xml=function(n,a){var i=[],u=[];for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o.charAt(0)!=this.attr_prefix?typeof l>"u"||l==null?i[i.length]="<"+o+" />":typeof l=="object"&&l.constructor==Array?i[i.length]=this.array_to_xml(o,l):typeof l=="object"?i[i.length]=this.hash_to_xml(o,l):i[i.length]=this.scalar_to_xml(o,l):u[u.length]=" "+o.substring(1)+'="'+this.xml_escape(l)+'"'}var c=u.join(""),h=i.join("");return typeof n>"u"||n==null||(i.length>0?h.match(/\n/)?h="<"+n+c+`>
`+h+"</"+n+`>
`:h="<"+n+c+">"+h+"</"+n+`>
`:h="<"+n+c+` />
`),h};So.ObjTree.prototype.array_to_xml=function(n,a){for(var i=[],u=0;u<a.length;u++){var o=a[u];typeof o>"u"||o==null?i[i.length]="<"+n+" />":typeof o=="object"&&o.constructor==Array?i[i.length]=this.array_to_xml(n,o):typeof o=="object"?i[i.length]=this.hash_to_xml(n,o):i[i.length]=this.scalar_to_xml(n,o)}return i.join("")};So.ObjTree.prototype.scalar_to_xml=function(n,a){return n=="#text"?this.xml_escape(a):"<"+n+">"+this.xml_escape(a)+"</"+n+`>
`};So.ObjTree.prototype.xml_escape=function(n){return n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var Gv=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},Ui;(function(n){n.START="bpmn:startEvent",n.END="bpmn:endEvent",n.GATEWAY="bpmn:exclusiveGateway",n.USER="bpmn:userTask",n.SYSTEM="bpmn:serviceTask",n.FLOW="bpmn:sequenceFlow"})(Ui||(Ui={}));var eP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"];function yb(n){var a={};return Object.entries(n).forEach(function(i){var u=Gv(i,2),o=u[0],l=u[1];typeof l!="object"?o.indexOf("-")===0?a[o]=l:a["-"+o]=l:a[o]=yb(l)}),a}function Bb(n){var a={};return Object.entries(n).forEach(function(i){var u=Gv(i,2),o=u[0],l=u[1];typeof l=="string"?o.indexOf("-")===0?a[o.substr(1)]=l:a[o]=l:typeof l=="object"?a[o]=Bb(l):a[o]=l}),a}function TB(n,a){var i=new Map;a.nodes.forEach(function(o){var l,c={"-id":o.id};if(!((l=o.text)===null||l===void 0)&&l.value&&(c["-name"]=o.text.value),o.properties){var h=yb(o.properties);Object.assign(c,h)}i.set(o.id,c),n[o.type]?Array.isArray(n[o.type])?n[o.type].push(c):n[o.type]=[n[o.type],c]:n[o.type]=c});var u=a.edges.map(function(o){var l,c,h=i.get(o.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(o.id):h["bpmn:incoming"]=[h["bpmn:incoming"],o.id]:h["bpmn:incoming"]=o.id;var p=i.get(o.sourceNodeId);p["bpmn:outgoing"]?Array.isArray(p["bpmn:outgoing"])?p["bpmn:outgoing"].push(o.id):p["bpmn:outgoing"]=[p["bpmn:outgoing"],o.id]:p["bpmn:outgoing"]=o.id;var g={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((l=o.text)===null||l===void 0)&&l.value&&(g["-name"]=(c=o.text)===null||c===void 0?void 0:c.value),o.properties){var y=yb(o.properties);Object.assign(g,y)}return g});n[Ui.FLOW]=u}function AB(n,a){n["bpmndi:BPMNEdge"]=a.edges.map(function(i){var u,o=i.id,l=i.pointsList.map(function(h){var p=h.x,g=h.y;return{"-x":p,"-y":g}}),c={"-id":o+"_di","-bpmnElement":o,"di:waypoint":l};return!((u=i.text)===null||u===void 0)&&u.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":i.text.x-i.text.value.length*10/2,"-y":i.text.y-7,"-width":i.text.value.length*10,"-height":14}}),c}),n["bpmndi:BPMNShape"]=a.nodes.map(function(i){var u,o=i.id,l=100,c=80,h=i.x,p=i.y,g=vu.shapeConfigMap.get(i.type);g&&(l=g.width,c=g.height),h-=l/2,p-=c/2;var y={"-id":o+"_di","-bpmnElement":o,"dc:Bounds":{"-x":h,"-y":p,"-width":l,"-height":c}};return!((u=i.text)===null||u===void 0)&&u.value&&(y["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":i.text.x-i.text.value.length*10/2,"-y":i.text.y-7,"-width":i.text.value.length*10,"-height":14}}),y})}function PB(n){var a=[],i=[],u=n["bpmn:definitions"];if(u){var o=u["bpmn:process"];Object.keys(o).forEach(function(l){if(l.indexOf("bpmn:")===0){var c=o[l];if(l===Ui.FLOW){var h=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];i=wB(c,h)}else{var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];a=a.concat(_B(c,p,l))}}})}return{nodes:a,edges:i}}function _B(n,a,i){var u=[];if(Array.isArray(n))n.forEach(function(c){var h;Array.isArray(a)?h=a.find(function(g){return g["-bpmnElement"]===c["-id"]}):h=a;var p=cT(h,i,c);u.push(p)});else{var o=void 0;Array.isArray(a)?o=a.find(function(c){return c["-bpmnElement"]===n["-id"]}):o=a;var l=cT(o,i,n);u.push(l)}return u}function cT(n,a,i){var u=Number(n["dc:Bounds"]["-x"]),o=Number(n["dc:Bounds"]["-y"]),l=i["-name"],c=vu.shapeConfigMap.get(a);c&&(u+=c.width/2,o+=c.height/2);var h;Object.entries(i).forEach(function(S){var x=Gv(S,2),T=x[0],w=x[1];eP.indexOf(T)===-1&&(h||(h={}),h[T]=w)}),h&&(h=Bb(h));var p;if(l&&(p={x:u,y:o,value:l},n["bpmndi:BPMNLabel"]&&n["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=n["bpmndi:BPMNLabel"]["dc:Bounds"];p.x=Number(g["-x"])+Number(g["-width"])/2,p.y=Number(g["-y"])+Number(g["-height"])/2}var y={id:n["-bpmnElement"],type:a,x:u,y:o,properties:h};return p&&(y.text=p),y}function wB(n,a){var i=[];if(Array.isArray(n))n.forEach(function(o){var l;Array.isArray(a)?l=a.find(function(c){return c["-bpmnElement"]===o["-id"]}):l=a,i.push(dT(l,o))});else{var u=void 0;Array.isArray(a)?u=a.find(function(o){return o["-bpmnElement"]===n["-id"]}):u=a,i.push(dT(u,n))}return i}function dT(n,a){var i,u=a["-name"];if(u){var o=n["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;u.split(`
`).forEach(function(p){l<p.length&&(l=p.length)}),i={value:u,x:Number(o["-x"])+l*10/2,y:Number(o["-y"])+7}}var c;Object.entries(a).forEach(function(p){var g=Gv(p,2),y=g[0],S=g[1];eP.indexOf(y)===-1&&(c||(c={}),c[y]=S)}),c&&(c=Bb(c));var h={id:a["-id"],type:Ui.FLOW,pointsList:n["di:waypoint"].map(function(p){return{x:Number(p["-x"]),y:Number(p["-y"])}}),sourceNodeId:a["-sourceRef"],targetNodeId:a["-targetRef"],properties:c};return i&&(h.text=i),h}var vu={pluginName:"bpmn-adapter",install:function(n){n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut},shapeConfigMap:new Map,setCustomShape:function(n,a){this.shapeConfigMap.set(n,a)},adapterOut:function(n){var a={"-id":"Process_"+fT(),"-isExecutable":"false"};TB(a,n);var i={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};AB(i,n);var u={"bpmn:definitions":{"-id":"Definitions_"+fT(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://bpmn.io/schema/bpmn","-exporter":"bpmn-js (https://demo.bpmn.io)","-exporterVersion":"7.3.0","bpmn:process":a,"bpmndi:BPMNDiagram":{"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":i}}};return u},adapterIn:function(n){if(n)return PB(n)}};vu.shapeConfigMap.set(Ui.START,{width:iT.width,height:iT.height});vu.shapeConfigMap.set(Ui.END,{width:aT.width,height:aT.height});vu.shapeConfigMap.set(Ui.GATEWAY,{width:sT.width,height:sT.height});vu.shapeConfigMap.set(Ui.SYSTEM,{width:uT.width,height:uT.height});vu.shapeConfigMap.set(Ui.USER,{width:lT.width,height:lT.height});var hT=globalThis&&globalThis.__assign||function(){return hT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},hT.apply(this,arguments)};globalThis&&globalThis.__read;var Ul;(function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"})(Ul||(Ul={}));var NB=function(n,a,i,u){u===void 0&&(u=0);var o=RB(n,a,i);return o<=u};function pT(n){return n*n}function eb(n,a){return pT(n.x-a.x)+pT(n.y-a.y)}var MB=function(n,a,i){var u=eb(a,i);if(u===0)return eb(n,a);var o=((n.x-a.x)*(i.x-a.x)+(n.y-a.y)*(i.y-a.y))/u;return o=Math.max(0,Math.min(1,o)),eb(n,{x:a.x+o*(i.x-a.x),y:a.y+o*(i.y-a.y)})},RB=function(n,a,i){return Math.sqrt(MB(n,a,i))},DB=function(n){var a=n.x,i=n.y,u=n.width,o=n.height,l={minX:a-u/2,minY:i-o/2,maxX:a+u/2,maxY:i+o/2,x:a,y:i,width:u,height:o,centerX:a,centerY:i};return l},IB=function(n,a){var i;return n.x===a.x?i=Ul.VERTICAL:n.y===a.y&&(i=Ul.HORIZONTAL),i},CB=function(n,a,i){var u=DB(n),o=IB(a,i),l=Math.max(a.x,i.x),c=Math.min(a.x,i.x),h=Math.max(a.y,i.y),p=Math.min(a.y,i.y),g=n.x,y=n.y,S=n.width,x=n.height;if(o===Ul.HORIZONTAL){if(l>=u.maxX&&c<=u.minX)return{startCrossPoint:{x:a.x>i.x?g+S/2:g-S/2,y:a.y},endCrossPoint:{x:a.x>i.x?g-S/2:g+S/2,y:a.y}}}else if(o===Ul.VERTICAL&&h>=u.maxY&&p<=u.minY)return{startCrossPoint:{x:a.x,y:a.y>i.y?y+x/2:y-x/2},endCrossPoint:{x:a.x,y:a.y>i.y?y-x/2:y+x/2}}},LB=function(n,a,i){i===void 0&&(i=0);for(var u=n.x,o=n.y,l=a.pointsList,c=0;c<l.length-1;c++)if(NB({x:u,y:o},l[c],l[c+1],i)){var h=CB(n,l[c],l[c+1]);if(h)return{crossIndex:c+1,crossPoints:h}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},jB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},vT=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(jB(arguments[a]));return n},BB=function(){function n(a){var i=a.lf;this._lf=i,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return n.prototype.eventHandler=function(){var a=this;this.dndAdd&&this._lf.on("node:dnd-add",function(i){var u=i.data;a.insetNode(u)}),this.dropAdd&&this._lf.on("node:drop",function(i){for(var u=i.data,o=a._lf.graphModel.edges,l=u.id,c=!0,h=0;h<o.length;h++)if(o[h].sourceNodeId===l||o[h].targetNodeId===l){c=!1;break}c&&a.insetNode(u)})},n.prototype.insetNode=function(a){for(var i=this._lf.graphModel.edges,u=this._lf.getNodeModelById(a.id),o=0;o<i.length;o++){var l=LB(u,i[o],this.deviation),c=l.crossIndex,h=l.crossPoints;if(c>=0){var p=i[o],g=p.sourceNodeId,y=p.targetNodeId,S=p.id,x=p.type,T=p.pointsList,w=pv(T[0]),N=pv(h.startCrossPoint);this._lf.addEdge({type:x,sourceNodeId:g,targetNodeId:a.id,startPoint:w,endPoint:N,pointsList:vT(T.slice(0,c),[h.startCrossPoint])}),this._lf.addEdge({type:x,sourceNodeId:a.id,targetNodeId:y,startPoint:pv(h.endCrossPoint),endPoint:pv(T[T.length-1]),pointsList:vT([h.endCrossPoint],T.slice(c))}),this._lf.deleteEdge(S);break}}},n.pluginName="insertNodeInPolyline",n}(),FB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},GB=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(FB(arguments[a]));return n},kB=function(){function n(a){var i=this,u=a.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"",text:"",onClick:function(){i.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"",text:"",onClick:function(){i.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"",text:"",onClick:function(){i.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"",text:"",onClick:function(){i.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"",text:"",onClick:function(){i.lf.redo()}}],this.lf=u}return n.prototype.render=function(a,i){this.destroy();var u=this.getControlTool();this.toolEl=u,i.appendChild(u),this.domContainer=i},n.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},n.prototype.addItem=function(a){this.controlItems.push(a)},n.prototype.removeItem=function(a){var i=this.controlItems.findIndex(function(u){return u.key===a});return this.controlItems.splice(i,1)[0]},n.prototype.getControlTool=function(){var a=this,i="lf-control-item",u="lf-control-item disabled",o=document.createElement("div"),l=[];return o.className="lf-control",this.controlItems.forEach(function(c){var h=document.createElement("div"),p=document.createElement("i"),g=document.createElement("span");switch(h.className=u,c.onClick&&(h.onclick=c.onClick.bind(null,a.lf)),c.onMouseEnter&&(h.onmouseenter=c.onMouseEnter.bind(null,a.lf)),c.onMouseLeave&&(h.onmouseleave=c.onMouseLeave.bind(null,a.lf)),p.className=c.iconClass,g.className="lf-control-text",g.title=c.title,g.innerText=c.text,h.append(p,g),c.text){case"":a.lf.on("history:change",function(y){var S=y.data.undoAble;h.className=S?i:u});break;case"":a.lf.on("history:change",function(y){var S=y.data.redoAble;h.className=S?i:u});break;default:h.className=i;break}l.push(h)}),o.append.apply(o,GB(l)),o},n.pluginName="control",n}(),UB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},zB=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(UB(arguments[a]));return n},bc="lf:defaultNodeMenu",Ec="lf:defaultEdgeMenu",Oc="lf:defaultGraphMenu",yT="lf:defaultSelectionMenu",HB=function(){function n(a){var i=this,u=a.lf;this.__menuDOM=document.createElement("ul"),this.lf=u,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){i.setMenuConfig(o)},this.lf.addMenuConfig=function(o){i.addMenuConfig(o)},this.lf.setMenuByType=function(o){i.setMenuByType(o)}}return n.prototype.init=function(){var a=this,i=[{text:"",callback:function(l){a.lf.deleteNode(l.id)}},{text:"",callback:function(l){a.lf.graphModel.editText(l.id)}},{text:"",callback:function(l){a.lf.cloneNode(l.id)}}];this.menuTypeMap.set(bc,i);var u=[{text:"",callback:function(l){a.lf.deleteEdge(l.id)}},{text:"",callback:function(l){a.lf.graphModel.editText(l.id)}}];this.menuTypeMap.set(Ec,u),this.menuTypeMap.set(Oc,[]);var o=[{text:"",callback:function(l){a.lf.clearSelectElements(),l.edges.forEach(function(c){return a.lf.deleteEdge(c.id)}),l.nodes.forEach(function(c){return a.lf.deleteNode(c.id)})}}];this.menuTypeMap.set(yT,o)},n.prototype.render=function(a,i){var u=this;this.__container=i,this.__currentData=null,this.__menuDOM.className="lf-menu",i.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(o){o.stopPropagation();for(var l=o.target;Array.from(l.classList).indexOf("lf-menu-item")===-1&&Array.from(l.classList).indexOf("lf-menu")===-1;)l=l.parentElement;Array.from(l.classList).indexOf("lf-menu-item")>-1?(l.onclickCallback(u.__currentData),u.__menuDOM.style.display="none",u.__currentData=null):console.warn("")},!0),this.lf.on("node:contextmenu",function(o){var l=o.data,c=o.position,h=c.domOverlayPosition,p=h.x,g=h.y,y=l.id,S=u.lf.graphModel.getNodeModelById(y),x=[],T=u.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?x=S.menu:T?x=T:x=u.menuTypeMap.get(bc),u.__currentData=l,u.showMenu(p,g,x)}),this.lf.on("edge:contextmenu",function(o){var l=o.data,c=o.position,h=c.domOverlayPosition,p=h.x,g=h.y,y=l.id,S=u.lf.graphModel.getEdgeModelById(y),x=[],T=u.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?x=S.menu:T?x=T:x=u.menuTypeMap.get(Ec),u.__currentData=l,u.showMenu(p,g,x)}),this.lf.on("blank:contextmenu",function(o){var l=o.position,c=u.menuTypeMap.get(Oc),h=l.domOverlayPosition,p=h.x,g=h.y;u.showMenu(p,g,c)}),this.lf.on("selection:contextmenu",function(o){var l=o.data,c=o.position,h=u.menuTypeMap.get(yT),p=c.domOverlayPosition,g=p.x,y=p.y;u.__currentData=l,u.showMenu(g,y,h)}),this.lf.on("node:mousedown",function(){u.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){u.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){u.__menuDOM.style.display="none"})},n.prototype.destroy=function(){var a;(a=this===null||this===void 0?void 0:this.__container)===null||a===void 0||a.removeChild(this.__menuDOM),this.__menuDOM=null},n.prototype.showMenu=function(a,i,u){if(!(!u||!u.length)){var o=this.__menuDOM;o.innerHTML="",o.append.apply(o,zB(this.__getMenuDom(u))),o.children.length&&(o.style.display="block",o.style.top=i+"px",o.style.left=a+"px")}},n.prototype.setMenuByType=function(a){!a.type||!a.menu||this.menuTypeMap.set(a.type,a.menu)},n.prototype.__getMenuDom=function(a){var i=[];return a&&a.length>0&&a.forEach(function(u){var o=document.createElement("li");if(u.className?o.className="lf-menu-item "+u.className:o.className="lf-menu-item",u.icon===!0){var l=document.createElement("span");l.className="lf-menu-item-icon",o.appendChild(l)}var c=document.createElement("span");c.className="lf-menu-item-text",u.text&&(c.innerText=u.text),o.appendChild(c),o.onclickCallback=u.callback,i.push(o)}),i},n.prototype.setMenuConfig=function(a){a&&(a.nodeMenu!==void 0&&this.menuTypeMap.set(bc,a.nodeMenu?a.nodeMenu:[]),a.edgeMenu!==void 0&&this.menuTypeMap.set(Ec,a.edgeMenu?a.edgeMenu:[]),a.graphMenu!==void 0&&this.menuTypeMap.set(Oc,a.graphMenu?a.graphMenu:[]))},n.prototype.addMenuConfig=function(a){if(a){if(Array.isArray(a.nodeMenu)){var i=this.menuTypeMap.get(bc);this.menuTypeMap.set(bc,i.concat(a.nodeMenu))}if(Array.isArray(a.edgeMenu)){var i=this.menuTypeMap.get(Ec);this.menuTypeMap.set(Ec,i.concat(a.edgeMenu))}if(Array.isArray(a.graphMenu)){var i=this.menuTypeMap.get(Oc);this.menuTypeMap.set(Oc,i.concat(a.graphMenu))}}},n.prototype.changeMenuItem=function(a,i){if(a==="add")this.addMenuConfig(i);else if(a==="reset")this.setMenuConfig(i);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},n.pluginName="menu",n}();globalThis&&globalThis.__read;var XB=function(){function n(a){var i=this,u=a.lf;this.lf=u,this.lf.setPatternItems=function(o){i.setPatternItems(o)}}return n.prototype.render=function(a,i){var u=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=i;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(o){u.panelEl.appendChild(u.createDndItem(o))}),i.appendChild(this.panelEl),this.domContainer=i},n.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},n.prototype.setPatternItems=function(a){this.shapeList=a,this.domContainer&&this.render(this.lf,this.domContainer)},n.prototype.createDndItem=function(a){var i=this,u=document.createElement("div");u.className=a.className?"lf-dnd-item "+a.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",a.icon&&(o.style.backgroundImage="url("+a.icon+")"),u.appendChild(o),a.label){var l=document.createElement("div");l.innerText=a.label,l.className="lf-dnd-text",u.appendChild(l)}return u.onmousedown=function(){a.type&&i.lf.dnd.startDrag({type:a.type,properties:a.properties,text:a.text}),a.callback&&a.callback(i.lf,i.domContainer)},u.ondblclick=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:c,data:a})},u.onclick=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:c,data:a})},u.oncontextmenu=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:c,data:a})},u},n.pluginName="dndPanel",n}(),$B=function(){function n(a){var i=this,u=a.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(l){var c=i.lf.getPointByClient(l.clientX,l.clientY).domOverlayPosition,h=c.x,p=c.y;i.endPoint={x:h,y:p};var g=i.startPoint,y=g.x,S=g.y,x=i.wrapper.style,T=y,w=S,N=h-y,R=p-S;h<y&&(T=h,N=y-h),p<S&&(w=p,R=S-p),x.left=T+"px",x.top=w+"px",x.width=N+"px",x.height=R+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",i.__draw),document.removeEventListener("mouseup",i.__drawOff),i.wrapper.oncontextmenu=null,i.__domContainer.removeChild(i.wrapper);var l=i.startPoint,c=l.x,h=l.y,p=i.endPoint,g=p.x,y=p.y;if(!(Math.abs(g-c)<10&&Math.abs(y-h)<10)){var S=[Math.min(c,g),Math.min(h,y)],x=[Math.max(c,g),Math.max(h,y)],T=i.lf.graphModel.getAreaElement(S,x,i.isWholeEdge,i.isWholeNode,!0),w=i.lf.graphModel.group;T.forEach(function(N){(!w||!w.getNodeGroup(N.id))&&i.lf.selectElementById(N.id,!0)}),i.lf.emit("selection:selected",T)}},this.lf=u;var o=u.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,u.openSelectionSelect=function(){i.openSelectionSelect()},u.closeSelectionSelect=function(){i.closeSelectionSelect()}}return n.prototype.render=function(a,i){var u=this;this.__domContainer=i,a.on("blank:mousedown",function(o){var l=o.e,c=a.getEditConfig();if(!(!c.stopMoveGraph||u.__disabled)){var h=l.button===2;if(!h){var p=a.getPointByClient(l.clientX,l.clientY).domOverlayPosition,g=p.x,y=p.y;u.startPoint={x:g,y},u.endPoint={x:g,y};var S=document.createElement("div");S.className="lf-selection-select",S.oncontextmenu=function(T){T.preventDefault()},S.style.top=u.startPoint.y+"px",S.style.left=u.startPoint.x+"px",i.appendChild(S),u.wrapper=S,document.addEventListener("mousemove",u.__draw),document.addEventListener("mouseup",u.__drawOff)}}})},n.prototype.setSelectionSense=function(a,i){a===void 0&&(a=!0),i===void 0&&(i=!0),this.isWholeEdge=a,this.isWholeNode=i},n.prototype.openSelectionSelect=function(){var a=this.lf.getEditConfig().stopMoveGraph;a||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},n.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},n.prototype.open=function(){this.__disabled=!1},n.prototype.close=function(){this.__disabled=!0},n.pluginName="selectionSelect",n}(),VB=globalThis&&globalThis.__values||function(n){var a=typeof Symbol=="function"&&Symbol.iterator,i=a&&n[a],u=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&u>=n.length&&(n=void 0),{value:n&&n[u++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},WB=function(){function n(a){var i=this,u=a.lf,o=a.LogicFlow,l=a.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(c,h){i.setView(),i.isShow||i.createMiniMap(c,h),i.isShow=!0},this.hide=function(){i.isShow&&i.removeMiniMap(),i.isShow=!1},this.reset=function(){i.lf.resetTranslate(),i.lf.resetZoom(),i.hide(),i.show()},this.startDrag=function(c){document.addEventListener("mousemove",i.drag),document.addEventListener("mouseup",i.drop),i.startPosition={x:c.x,y:c.y}},this.moveViewport=function(c,h){var p=i.viewport.style;i.viewPortTop=c,i.viewPortLeft=h,p.top=i.viewPortTop+"px",p.left=i.viewPortLeft+"px"},this.drag=function(c){i.dragging=!0;var h=i.viewPortTop+c.y-i.startPosition.y,p=i.viewPortLeft+c.x-i.startPosition.x;i.moveViewport(h,p),i.startPosition={x:c.x,y:c.y};var g=(i.viewPortLeft+i.viewPortWidth/2)/i.viewPortScale,y=(i.viewPortTop+i.viewPortHeight/2)/i.viewPortScale;i.lf.focusOn({coordinate:{x:g+i.resetDataX,y:y+i.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",i.drag),document.removeEventListener("mouseup",i.drop);var c=i.viewPortTop,h=i.viewPortLeft;i.viewPortLeft>i.width&&(h=i.width-i.viewPortWidth),i.viewPortTop>i.height&&(c=i.height-i.viewPortHeight),i.viewPortLeft<-i.width&&(h=0),i.viewPortTop<-i.height&&(c=0),i.moveViewport(c,h)},this.mapClick=function(c){if(i.dragging)i.dragging=!1;else{var h=c.layerX,p=c.layerY,g=h,y=p,S=i.lf.getGraphRawData(),x=i.getBounds(S),T=x.left,w=x.top,N=T+g/i.viewPortScale,R=w+y/i.viewPortScale;i.lf.focusOn({coordinate:{x:N,y:R}})}},this.lf=u,l&&l.MiniMap&&this.setOption(l),this.miniMapWidth=u.graphModel.width,this.miniMapHeight=u.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return n.prototype.render=function(a,i){var u=this;this.container=i,this.lf.on("history:change",function(){u.isShow&&u.setView()}),this.lf.on("graph:transform",uB(function(){u.isShow&&!u.dragging&&u.setView()},300))},n.prototype.init=function(a){this.disabledPlugins=this.disabledPlugins.concat(a.disabledPlugins||[])},n.prototype.setOption=function(a){var i=a.MiniMap,u=i.width,o=u===void 0?150:u,l=i.height,c=l===void 0?220:l,h=i.isShowHeader,p=h===void 0?!0:h,g=i.isShowCloseIcon,y=g===void 0?!0:g,S=i.leftPosition,x=S===void 0?0:S,T=i.topPosition,w=T===void 0?0:T,N=i.rightPosition,R=i.bottomPosition;this.width=o,this.height=c,this.isShowHeader=p,this.isShowCloseIcon=y,this.viewPortWidth=o,this.leftPosition=x,this.topPosition=w,this.rightPosition=N,this.bottomPosition=R},n.prototype.initMiniMap=function(){var a=document.createElement("div");a.className="lf-mini-map-graph",a.style.width=this.width+4+"px",a.style.height=this.height+"px",this.lfMap=new this.LogicFlow({width:this.lf.graphModel.width,height:this.lf.graphModel.width*this.height/this.width,container:a,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(i){return i},this.lfMap.adapterOut=function(i){return i},this.miniMapWrap=a,this.createViewPort(),a.addEventListener("click",this.mapClick)},n.prototype.createMiniMap=function(a,i){var u=document.createElement("div");u.appendChild(this.miniMapWrap),typeof a<"u"||typeof i<"u"?(u.style.left=(a||0)+"px",u.style.top=(i||0)+"px"):(typeof this.rightPosition<"u"?u.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(u.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?u.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(u.style.top=this.topPosition+"px")),u.style.position="absolute",u.className="lf-mini-map",this.isShowCloseIcon||u.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||u.classList.add("lf-mini-map-no-header"),this.container.appendChild(u),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=n.headerTitle,u.appendChild(o);var l=document.createElement("span");l.className="lf-mini-map-close",l.addEventListener("click",this.hide),u.appendChild(l),this.miniMapContainer=u},n.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},n.prototype.getBounds=function(a){var i=0,u=this.miniMapWidth,o=0,l=this.miniMapHeight,c=a.nodes;return c&&c.length>0&&c.forEach(function(h){var p=h.x,g=h.y,y=h.width,S=y===void 0?200:y,x=h.height,T=x===void 0?200:x,w=p-S/2,N=p+S/2,R=g-T/2,I=g+T/2;i=w<i?w:i,u=N>u?N:u,o=R<o?R:o,l=I>l?I:l}),{left:i,top:o,bottom:l,right:u}},n.prototype.resetData=function(a){var i=a.nodes,u=a.edges,o=0,l=0;return i&&i.length>0&&(i.forEach(function(c){var h=c.x,p=c.y,g=c.width,y=g===void 0?200:g,S=c.height,x=S===void 0?200:S,T=h-y/2,w=p-x/2;o=T<o?T:o,l=w<l?w:l}),(o<0||l<0)&&(this.resetDataX=o,this.resetDataY=l,i.forEach(function(c){c.x=c.x-o,c.y=c.y-l,c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l)}),u.forEach(function(c){c.startPoint&&(c.startPoint.x=c.startPoint.x-o,c.startPoint.y=c.startPoint.y-l),c.endPoint&&(c.endPoint.x=c.endPoint.x-o,c.endPoint.y=c.endPoint.y-l),c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l),c.pointsList&&c.pointsList.forEach(function(h){h.x=h.x-o,h.y=h.y-l})}))),a},n.prototype.setView=function(){var a,i,u=this.lf.getGraphRawData(),o=this.resetData(u),l=this.lf.viewMap,c=this.lf.graphModel.modelMap,h=this.lfMap.viewMap;try{for(var p=VB(l.keys()),g=p.next();!g.done;g=p.next()){var y=g.value;h.has(y)||(this.lfMap.setView(y,l.get(y)),this.lfMap.graphModel.modelMap.set(y,c.get(y)))}}catch(he){a={error:he}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}this.lfMap.render(o);var S=this.getBounds(o),x=S.left,T=S.top,w=S.right,N=S.bottom,R=this.width/(w-x),I=this.height/(N-T),$=this.miniMapWrap.firstChild.style,W=Math.min(R,I);$.transform="matrix("+W+", 0, 0, "+W+", 0, 0)",$.transformOrigin="left top",$.height=N-Math.min(T,0)+"px",$.width=w-Math.min(x,0)+"px",this.viewPortScale=W,this.setViewPort(W,{left:x,top:T,right:w,bottom:N})},n.prototype.setViewPort=function(a,i){var u=i.left,o=i.right;i.top,i.bottom;var l=this.viewport.style;l.width=this.viewPortWidth+"px",l.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var c=this.lf.getTransform(),h=c.TRANSLATE_X,p=c.TRANSLATE_Y,g=c.SCALE_X,y=c.SCALE_Y,S=o-u,x=this.width/(S/this.lf.graphModel.width),T=this.width*(x/this.width),w=this.lf.graphModel.width/this.lf.graphModel.height,N=T/w,R=this.lf.getGraphRawData(),I=this.getBounds(R),$=I.left,W=I.top,he=$,ge=W;he+=h/g,ge+=p/y,this.viewPortTop=ge>0?0:-ge*a,this.viewPortLeft=he>0?0:-he*a,this.viewPortWidth=T,this.viewPortHeight=N,l.top=this.viewPortTop+"px",l.left=this.viewPortLeft+"px",l.width=T/g+"px",l.height=N/y+"px"},n.prototype.createViewPort=function(){var a=document.createElement("div");a.className="lf-minimap-viewport",a.addEventListener("mousedown",this.startDrag),this.viewport=a},n.pluginName="miniMap",n.width=150,n.height=220,n.viewPortWidth=150,n.viewPortHeight=75,n.isShowHeader=!0,n.isShowCloseIcon=!0,n.leftPosition=0,n.topPosition=0,n.rightPosition=null,n.bottomPosition=null,n.headerTitle="",n}();function YB(n){if(n.length<=1)return!1;for(var a=0,i=n.length-1;a!==i&&a+1!==i&&i-1!==a;)a++,i--;return a===i?[--a,i]:[a,i]}var tP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Cl=globalThis&&globalThis.__assign||function(){return Cl=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Cl.apply(this,arguments)},xa=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};(function(n){tP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.pointFilter=function(i){for(var u=i,o=1;o<u.length-1;){var l=xa(u[o-1],2),c=l[0],h=l[1],p=xa(u[o],2),g=p[0],y=p[1],S=xa(u[o+1],2),x=S[0],T=S[1];c===g&&g===x||h===y&&y===T?u.splice(o,1):o++}return u},a.prototype.getEdge=function(){var i=this.props.model,u=i.points,o=i.isAnimation,l=i.arrowConfig,c=i.radius,h=c===void 0?5:c,p=i.getEdgeStyle(),g=i.getEdgeAnimationStyle(),y=this.pointFilter(u.split(" ").map(function(Ct){return Ct.split(",").map(function(Ge){return Number(Ge)})})),S=YB(y);if(S){var x=xa(S,2),T=x[0],w=x[1],N=y[T],R=y[w],I=N.some(function(Ct,Ge){return Ct===R[Ge]});if(!I){var $=(R[1]-N[1])/2,W=[R[0],R[1]-$],he=[N[0],N[1]+$];y.splice(T+1,0,he,W)}}for(var ge=xa(y[0],2),ye=ge[0],ce=ge[1],xe="M"+ye+" "+ce,L=1;L<y.length-1;L++){var Q=xa(y[L-1],2),U=Q[0],D=Q[1],k=xa(y[L],2),te=k[0],V=k[1],Z=xa(y[L+1],2),le=Z[0],Ae=Z[1];if(te===U&&V!==D){var Re=V>D?V-h:V+h;xe=xe+" L "+te+" "+Re}if(V===D&&te!==U){var _e=te>U?te-h:te+h;xe=xe+" L "+_e+" "+V}if(xe=xe+" Q "+te+" "+V,te===le&&V!==Ae){var Re=V>Ae?V-h:V+h;xe=xe+" "+te+" "+Re}if(V===Ae&&te!==le){var _e=te>le?te-h:te+h;xe=xe+" "+_e+" "+V}}var Ke=xa(y[y.length-1],2),gt=Ke[0],Nt=Ke[1];xe=xe+" L "+gt+" "+Nt;var Vt=Cl(Cl(Cl({d:xe,style:o?g:{}},p),l),{fill:"none"});return $t.h("path",Cl({d:xe},Vt))},a})($t.PolylineEdge);(function(n){tP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a})($t.PolylineEdgeModel);var Fb,wn,rP,fu,gT,nP,gb,oP={},iP=[],KB=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ss(n,a){for(var i in a)n[i]=a[i];return n}function aP(n){var a=n.parentNode;a&&a.removeChild(n)}function Ic(n,a,i){var u,o,l,c={};for(l in a)l=="key"?u=a[l]:l=="ref"?o=a[l]:c[l]=a[l];if(arguments.length>2&&(c.children=arguments.length>3?Fb.call(arguments,2):i),typeof n=="function"&&n.defaultProps!=null)for(l in n.defaultProps)c[l]===void 0&&(c[l]=n.defaultProps[l]);return bv(n,c,u,o,null)}function bv(n,a,i,u,o){var l={type:n,props:a,key:i,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++rP};return o==null&&wn.vnode!=null&&wn.vnode(l),l}function Gb(n){return n.children}function jl(n,a){this.props=n,this.context=a}function Lc(n,a){if(a==null)return n.__?Lc(n.__,n.__.__k.indexOf(n)+1):null;for(var i;a<n.__k.length;a++)if((i=n.__k[a])!=null&&i.__e!=null)return i.__e;return typeof n.type=="function"?Lc(n):null}function sP(n){var a,i;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,a=0;a<n.__k.length;a++)if((i=n.__k[a])!=null&&i.__e!=null){n.__e=n.__c.base=i.__e;break}return sP(n)}}function mT(n){(!n.__d&&(n.__d=!0)&&fu.push(n)&&!Pv.__r++||gT!==wn.debounceRendering)&&((gT=wn.debounceRendering)||nP)(Pv)}function Pv(){var n,a,i,u,o,l,c,h;for(fu.sort(gb);n=fu.shift();)n.__d&&(a=fu.length,u=void 0,o=void 0,c=(l=(i=n).__v).__e,(h=i.__P)&&(u=[],(o=Ss({},l)).__v=l.__v+1,dP(h,l,o,i.__n,h.ownerSVGElement!==void 0,l.__h!=null?[c]:null,u,c??Lc(l),l.__h),JB(u,l),l.__e!=c&&sP(l)),fu.length>a&&fu.sort(gb));Pv.__r=0}function uP(n,a,i,u,o,l,c,h,p,g){var y,S,x,T,w,N,R,I=u&&u.__k||iP,$=I.length;for(i.__k=[],y=0;y<a.length;y++)if((T=i.__k[y]=(T=a[y])==null||typeof T=="boolean"||typeof T=="function"?null:typeof T=="string"||typeof T=="number"||typeof T=="bigint"?bv(null,T,null,null,T):Array.isArray(T)?bv(Gb,{children:T},null,null,null):T.__b>0?bv(T.type,T.props,T.key,T.ref?T.ref:null,T.__v):T)!=null){if(T.__=i,T.__b=i.__b+1,(x=I[y])===null||x&&T.key==x.key&&T.type===x.type)I[y]=void 0;else for(S=0;S<$;S++){if((x=I[S])&&T.key==x.key&&T.type===x.type){I[S]=void 0;break}x=null}dP(n,T,x=x||oP,o,l,c,h,p,g),w=T.__e,(S=T.ref)&&x.ref!=S&&(R||(R=[]),x.ref&&R.push(x.ref,null,T),R.push(S,T.__c||w,T)),w!=null?(N==null&&(N=w),typeof T.type=="function"&&T.__k===x.__k?T.__d=p=lP(T,p,n):p=fP(n,T,x,I,w,p),typeof i.type=="function"&&(i.__d=p)):p&&x.__e==p&&p.parentNode!=n&&(p=Lc(x))}for(i.__e=N,y=$;y--;)I[y]!=null&&(typeof i.type=="function"&&I[y].__e!=null&&I[y].__e==i.__d&&(i.__d=cP(u).nextSibling),pP(I[y],I[y]));if(R)for(y=0;y<R.length;y++)hP(R[y],R[++y],R[++y])}function lP(n,a,i){for(var u,o=n.__k,l=0;o&&l<o.length;l++)(u=o[l])&&(u.__=n,a=typeof u.type=="function"?lP(u,a,i):fP(i,u,u,o,u.__e,a));return a}function fP(n,a,i,u,o,l){var c,h,p;if(a.__d!==void 0)c=a.__d,a.__d=void 0;else if(i==null||o!=l||o.parentNode==null)e:if(l==null||l.parentNode!==n)n.appendChild(o),c=null;else{for(h=l,p=0;(h=h.nextSibling)&&p<u.length;p+=1)if(h==o)break e;n.insertBefore(o,l),c=l}return c!==void 0?c:o.nextSibling}function cP(n){var a,i,u;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(a=n.__k.length-1;a>=0;a--)if((i=n.__k[a])&&(u=cP(i)))return u}return null}function ZB(n,a,i,u,o){var l;for(l in i)l==="children"||l==="key"||l in a||_v(n,l,null,i[l],u);for(l in a)o&&typeof a[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||i[l]===a[l]||_v(n,l,a[l],i[l],u)}function bT(n,a,i){a[0]==="-"?n.setProperty(a,i??""):n[a]=i==null?"":typeof i!="number"||KB.test(a)?i:i+"px"}function _v(n,a,i,u,o){var l;e:if(a==="style")if(typeof i=="string")n.style.cssText=i;else{if(typeof u=="string"&&(n.style.cssText=u=""),u)for(a in u)i&&a in i||bT(n.style,a,"");if(i)for(a in i)u&&i[a]===u[a]||bT(n.style,a,i[a])}else if(a[0]==="o"&&a[1]==="n")l=a!==(a=a.replace(/Capture$/,"")),a=a.toLowerCase()in n?a.toLowerCase().slice(2):a.slice(2),n.l||(n.l={}),n.l[a+l]=i,i?u||n.addEventListener(a,l?OT:ET,l):n.removeEventListener(a,l?OT:ET,l);else if(a!=="dangerouslySetInnerHTML"){if(o)a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!=="width"&&a!=="height"&&a!=="href"&&a!=="list"&&a!=="form"&&a!=="tabIndex"&&a!=="download"&&a in n)try{n[a]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&a[4]!=="-"?n.removeAttribute(a):n.setAttribute(a,i))}}function ET(n){return this.l[n.type+!1](wn.event?wn.event(n):n)}function OT(n){return this.l[n.type+!0](wn.event?wn.event(n):n)}function dP(n,a,i,u,o,l,c,h,p){var g,y,S,x,T,w,N,R,I,$,W,he,ge,ye,ce,xe=a.type;if(a.constructor!==void 0)return null;i.__h!=null&&(p=i.__h,h=a.__e=i.__e,a.__h=null,l=[h]),(g=wn.__b)&&g(a);try{e:if(typeof xe=="function"){if(R=a.props,I=(g=xe.contextType)&&u[g.__c],$=g?I?I.props.value:g.__:u,i.__c?N=(y=a.__c=i.__c).__=y.__E:("prototype"in xe&&xe.prototype.render?a.__c=y=new xe(R,$):(a.__c=y=new jl(R,$),y.constructor=xe,y.render=qB),I&&I.sub(y),y.props=R,y.state||(y.state={}),y.context=$,y.__n=u,S=y.__d=!0,y.__h=[],y._sb=[]),y.__s==null&&(y.__s=y.state),xe.getDerivedStateFromProps!=null&&(y.__s==y.state&&(y.__s=Ss({},y.__s)),Ss(y.__s,xe.getDerivedStateFromProps(R,y.__s))),x=y.props,T=y.state,y.__v=a,S)xe.getDerivedStateFromProps==null&&y.componentWillMount!=null&&y.componentWillMount(),y.componentDidMount!=null&&y.__h.push(y.componentDidMount);else{if(xe.getDerivedStateFromProps==null&&R!==x&&y.componentWillReceiveProps!=null&&y.componentWillReceiveProps(R,$),!y.__e&&y.shouldComponentUpdate!=null&&y.shouldComponentUpdate(R,y.__s,$)===!1||a.__v===i.__v){for(a.__v!==i.__v&&(y.props=R,y.state=y.__s,y.__d=!1),y.__e=!1,a.__e=i.__e,a.__k=i.__k,a.__k.forEach(function(L){L&&(L.__=a)}),W=0;W<y._sb.length;W++)y.__h.push(y._sb[W]);y._sb=[],y.__h.length&&c.push(y);break e}y.componentWillUpdate!=null&&y.componentWillUpdate(R,y.__s,$),y.componentDidUpdate!=null&&y.__h.push(function(){y.componentDidUpdate(x,T,w)})}if(y.context=$,y.props=R,y.__P=n,he=wn.__r,ge=0,"prototype"in xe&&xe.prototype.render){for(y.state=y.__s,y.__d=!1,he&&he(a),g=y.render(y.props,y.state,y.context),ye=0;ye<y._sb.length;ye++)y.__h.push(y._sb[ye]);y._sb=[]}else do y.__d=!1,he&&he(a),g=y.render(y.props,y.state,y.context),y.state=y.__s;while(y.__d&&++ge<25);y.state=y.__s,y.getChildContext!=null&&(u=Ss(Ss({},u),y.getChildContext())),S||y.getSnapshotBeforeUpdate==null||(w=y.getSnapshotBeforeUpdate(x,T)),ce=g!=null&&g.type===Gb&&g.key==null?g.props.children:g,uP(n,Array.isArray(ce)?ce:[ce],a,i,u,o,l,c,h,p),y.base=a.__e,a.__h=null,y.__h.length&&c.push(y),N&&(y.__E=y.__=null),y.__e=!1}else l==null&&a.__v===i.__v?(a.__k=i.__k,a.__e=i.__e):a.__e=QB(i.__e,a,i,u,o,l,c,p);(g=wn.diffed)&&g(a)}catch(L){a.__v=null,(p||l!=null)&&(a.__e=h,a.__h=!!p,l[l.indexOf(h)]=null),wn.__e(L,a,i)}}function JB(n,a){wn.__c&&wn.__c(a,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(u){u.call(i)})}catch(u){wn.__e(u,i.__v)}})}function QB(n,a,i,u,o,l,c,h){var p,g,y,S=i.props,x=a.props,T=a.type,w=0;if(T==="svg"&&(o=!0),l!=null){for(;w<l.length;w++)if((p=l[w])&&"setAttribute"in p==!!T&&(T?p.localName===T:p.nodeType===3)){n=p,l[w]=null;break}}if(n==null){if(T===null)return document.createTextNode(x);n=o?document.createElementNS("http://www.w3.org/2000/svg",T):document.createElement(T,x.is&&x),l=null,h=!1}if(T===null)S===x||h&&n.data===x||(n.data=x);else{if(l=l&&Fb.call(n.childNodes),g=(S=i.props||oP).dangerouslySetInnerHTML,y=x.dangerouslySetInnerHTML,!h){if(l!=null)for(S={},w=0;w<n.attributes.length;w++)S[n.attributes[w].name]=n.attributes[w].value;(y||g)&&(y&&(g&&y.__html==g.__html||y.__html===n.innerHTML)||(n.innerHTML=y&&y.__html||""))}if(ZB(n,x,S,o,h),y)a.__k=[];else if(w=a.props.children,uP(n,Array.isArray(w)?w:[w],a,i,u,o&&T!=="foreignObject",l,c,l?l[0]:i.__k&&Lc(i,0),h),l!=null)for(w=l.length;w--;)l[w]!=null&&aP(l[w]);h||("value"in x&&(w=x.value)!==void 0&&(w!==n.value||T==="progress"&&!w||T==="option"&&w!==S.value)&&_v(n,"value",w,S.value,!1),"checked"in x&&(w=x.checked)!==void 0&&w!==n.checked&&_v(n,"checked",w,S.checked,!1))}return n}function hP(n,a,i){try{typeof n=="function"?n(a):n.current=a}catch(u){wn.__e(u,i)}}function pP(n,a,i){var u,o;if(wn.unmount&&wn.unmount(n),(u=n.ref)&&(u.current&&u.current!==n.__e||hP(u,null,a)),(u=n.__c)!=null){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(l){wn.__e(l,a)}u.base=u.__P=null,n.__c=void 0}if(u=n.__k)for(o=0;o<u.length;o++)u[o]&&pP(u[o],a,i||typeof n.type!="function");i||n.__e==null||aP(n.__e),n.__=n.__e=n.__d=void 0}function qB(n,a,i){return this.constructor(n,i)}Fb=iP.slice,wn={__e:function(n,a,i,u){for(var o,l,c;a=a.__;)if((o=a.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(n)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,u||{}),c=o.__d),c)return o.__E=o}catch(h){n=h}throw n}},rP=0,jl.prototype.setState=function(n,a){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ss({},this.state),typeof n=="function"&&(n=n(Ss({},i),this.props)),n&&Ss(i,n),n!=null&&this.__v&&(a&&this._sb.push(a),mT(this))},jl.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),mT(this))},jl.prototype.render=Gb,fu=[],nP=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,gb=function(n,a){return n.__v.__b-a.__v.__b},Pv.__r=0;var Cc=globalThis&&globalThis.__assign||function(){return Cc=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Cc.apply(this,arguments)};function kb(n){var a=n.x,i=n.y,u=n.width,o=n.height,l=n.radius,c=n.className,h=a-u/2,p=i-o/2,g=Cc(Cc({width:10,height:10,cx:0,cy:0,rx:l||0,ry:l||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},n),{x:h,y:p});return $t.h("rect",Cc({},g))}kb.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Ll;(function(n){n.NODE="node",n.CIRCLE_NODE="circle-node",n.POLYGON_NODE="polygon-node",n.RECT_NODE="rect-node",n.HTML_NODE="html-node",n.TEXT_NODE="text-node",n.ELLIPSE_NODE="ellipse-node",n.DIAMOND_NODE="diamond-node",n.EDGE="edge",n.LINE_EDGE="line-edge",n.POLYLINE_EDGE="polyline-edge",n.BEZIER_EDGE="bezier-edge",n.GRAPH="graph"})(Ll||(Ll={}));function Ev(n){var a=n.x,i=n.y,u=n.width,o=n.height;return{minX:a-u/2,minY:i-o/2,maxX:a+u/2,maxY:i+o/2}}function ST(n){var a=Ev(n),i=n.radius,u=a.minX,o=a.minY,l=a.maxX,c=a.maxY;return[{x:u+i,y:o+i},{x:l-i,y:o+i},{x:l-i,y:c-i},{x:u+i,y:c-i}]}function xT(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=a.x,l=a.y,c={x:o,y:l},h=i.radius,p=Ev(i),g=Ev(u);if(o===p.minX){c.x=g.minX;var y=(l-i.y)/(i.height/2-h);y?c.y=u.y+(u.height/2-h)*y:c.y=u.y}else if(o===p.maxX){c.x=g.maxX;var y=(l-i.y)/(i.height/2-h);y?c.y=u.y+(u.height/2-h)*y:c.y=u.y}else if(l===p.minY){c.y=g.minY;var y=(o-i.x)/(i.width/2-h);y?c.x=u.x+(u.width/2-h)*y:c.x=u.x}else if(l===p.maxY){c.y=g.maxY;var y=(o-i.x)/(i.width/2-h);y?c.x=u.x+(u.width/2-h)*y:c.x=u.x}else{var S=ST(i),x=ST(u),T=Ev(i),w=T.minX,N=T.minY,R=T.maxX,I=T.maxY,$=-1;if(o-w<h&&l-N<h?$=0:R-o<h&&l-N<h?$=1:R-o<h&&I-l<h?$=2:o-w<h&&N-l<h&&($=3),$>-1){var W=Math.atan2(l-S[$].y,o-S[$].x);c.x=x[$].x+h*Math.cos(W),c.y=x[$].y+h*Math.sin(W)}}return c}function TT(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=u.rx,l=u.ry,c=a,h=(a.y-i.y)/(a.x-i.x),p=o,g=l,y,S;return h>=1/0?(y=0,S=g):h<=-1/0?(y=0,S=-g):a.x-i.x>0?(y=p*g/Math.sqrt(g*g+p*p*h*h),S=p*g*h/Math.sqrt(g*g+p*p*h*h)):(y=-(p*g)/Math.sqrt(g*g+p*p*h*h),S=-(p*g*h)/Math.sqrt(g*g+p*p*h*h)),c={x:y+u.x,y:S+u.y},c}function AT(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=a,l,c,h=a.x-i.x,p=a.y-i.y,g=i.rx,y=i.ry,S=Math.sqrt((g-Math.abs(h))*(g-Math.abs(h))+p*p)/Math.sqrt(g*g+y*y),x=u.rx,T=u.ry,w=Math.sqrt((x*x+T*T)*S*S*(x*x/(x*x+T*T))),N=w*(T/x);return h>=0?l=x-w:l=w-x,p>0?c=N:c=-N,o={x:l+u.x,y:c+u.y},o}var e3=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),cu=globalThis&&globalThis.__assign||function(){return cu=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},cu.apply(this,arguments)},t3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},r3=$t.LogicFlowUtil.StepDrag,n3=function(n){e3(a,n);function a(i){var u=n.call(this)||this;return u.updatePosition=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.x,g=h.y;u.nodeModel.x=p+l/2,u.nodeModel.y=g+c/2,u.nodeModel.moveText(l/2,c/2)},u.getResize=function(o){var l=o.index,c=o.deltaX,h=o.deltaY,p=o.width,g=o.height,y=o.PCTResizeInfo,S=o.pct,x=S===void 0?1:S,T={width:p,height:g,deltaX:c,deltaY:h};if(y){var w=4,N=0,R=0;switch(l){case 0:R=(c*-1-h)/w;break;case 1:R=(c-h)/w;break;case 2:R=(c+h)/w;break;case 3:R=(c*-1+h)/w;break}R!==0&&(N=Math.round(R/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+N,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.hightPCT=Math.max(Math.min(y.ResizePCT.hightPCT+N,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var I=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),$=Math.round(y.ResizePCT.hightPCT*y.ResizeBasis.basisHeight/100);switch(l){case 0:c=p-I,h=g-$;break;case 1:c=I-p,h=g-$;break;case 2:c=I-p,h=$-g;break;case 3:c=p-I,h=$-g;break}return T.width=I,T.height=$,T.deltaX=c/x,T.deltaY=h/x,T}switch(l){case 0:T.width=p-c*x,T.height=g-h*x;break;case 1:T.width=p+c*x,T.height=g-h*x;break;case 2:T.width=p+c*x,T.height=g+h*x;break;case 3:T.width=p-c*x,T.height=g+h*x;break}return T},u.updateRect=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,g=h.x,y=h.y,S=h.width,x=h.height,T=h.radius,w=h.PCTResizeInfo,N=u.index,R=u.getResize({index:N,deltaX:l,deltaY:c,width:S,height:x,PCTResizeInfo:w,pct:1}),I=u.nodeModel,$=I.minWidth,W=I.minHeight,he=I.maxWidth,ge=I.maxHeight;if(R.width<$||R.width>he||R.height<W||R.height>ge){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:R.deltaX,deltaY:R.deltaY}),u.nodeModel.width=R.width,u.nodeModel.height=R.height,u.nodeModel.setProperties({nodeSize:{width:R.width,height:R.height}});var ye=u.getNodeEdges(p),ce={x:g,y,width:S,height:x,radius:T},xe={x:u.nodeModel.x,y:u.nodeModel.y,width:u.nodeModel.width,height:u.nodeModel.height,radius:T},L={point:"",beforeNode:ce,afterNode:xe},Q;ye.sourceEdges.forEach(function(U){L.point=U.startPoint,Q=xT(L),U.updateStartPoint(Q)}),ye.targetEdges.forEach(function(U){L.point=U.endPoint,Q=xT(L),U.updateEndPoint(Q)}),u.eventEmit({beforeNode:ce,afterNode:xe})},u.updateEllipse=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,g=h.rx,y=h.ry,S=h.x,x=h.y,T=h.PCTResizeInfo,w=u.index,N=g,R=y,I=u.getResize({index:w,deltaX:l,deltaY:c,width:N,height:R,PCTResizeInfo:T,pct:1/2}),$=u.nodeModel,W=$.minWidth,he=$.minHeight,ge=$.maxWidth,ye=$.maxHeight;if(I.width<W/2||I.width>ge/2||I.height<he/2||I.height>ye/2){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:I.deltaX,deltaY:I.deltaY}),u.nodeModel.rx=I.width,u.nodeModel.ry=I.height,u.nodeModel.setProperties({nodeSize:{rx:I.width,ry:I.height}});var ce=u.getNodeEdges(p),xe={x:S,y:x},L={rx:I.width,ry:I.height,x:u.nodeModel.x,y:u.nodeModel.y},Q={point:{},beforeNode:xe,afterNode:L},U;ce.sourceEdges.forEach(function(D){Q.point=D.startPoint,U=TT(Q),D.updateStartPoint(U)}),ce.targetEdges.forEach(function(D){Q.point=D.endPoint,U=TT(Q),D.updateEndPoint(U)}),u.eventEmit({beforeNode:cu(cu({},xe),{rx:g,ry:y}),afterNode:L})},u.updateDiamond=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,g=h.rx,y=h.ry,S=h.x,x=h.y,T=h.PCTResizeInfo,w=u.index,N=g,R=y,I=u.getResize({index:w,deltaX:l,deltaY:c,width:N,height:R,PCTResizeInfo:T,pct:1/2}),$=u.nodeModel,W=$.minWidth,he=$.minHeight,ge=$.maxWidth,ye=$.maxHeight;if(I.width<W/2||I.width>ge/2||I.height<he/2||I.height>ye/2){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:I.deltaX,deltaY:I.deltaY}),u.nodeModel.rx=I.width,u.nodeModel.ry=I.height,u.nodeModel.setProperties({nodeSize:{rx:I.width,ry:I.height}});var ce={x:S,y:x,rx:g,ry:y},xe={rx:I.width,ry:I.height,x:u.nodeModel.x,y:u.nodeModel.y},L={point:{},beforeNode:ce,afterNode:xe},Q,U=u.getNodeEdges(p);U.sourceEdges.forEach(function(D){L.point=D.startPoint,Q=AT(L),D.updateStartPoint(Q)}),U.targetEdges.forEach(function(D){L.point=D.endPoint,Q=AT(L),D.updateEndPoint(Q)}),u.eventEmit({beforeNode:ce,afterNode:xe})},u.eventEmit=function(o){var l=o.beforeNode,c=o.afterNode,h=u.nodeModel,p=h.id,g=h.modelType,y=h.type,S=cu({id:p,modelType:g,type:y},l),x=cu({id:p,modelType:g,type:y},c);u.graphModel.eventCenter.emit("node:resize",{oldNodeSize:S,newNodeSize:x})},u.onDragging=function(o){var l,c=o.deltaX,h=o.deltaY,p=u.graphModel.transformModel,g=u.nodeModel.modelType;l=t3(p.fixDeltaXY(c,h),2),c=l[0],h=l[1],g===Ll.RECT_NODE||g===Ll.HTML_NODE?u.updateRect({deltaX:c,deltaY:h}):g===Ll.ELLIPSE_NODE?u.updateEllipse({deltaX:c,deltaY:h}):g===Ll.DIAMOND_NODE&&u.updateDiamond({deltaX:c,deltaY:h})},u.onDragEnd=function(){var o=u.graphModel.gridSize,l=o===void 0?1:o,c=l*Math.round(u.nodeModel.x/l),h=l*Math.round(u.nodeModel.y/l);u.nodeModel.moveTo(c,h)},u.index=i.index,u.nodeModel=i.model,u.graphModel=i.graphModel,u.state={},u.dragHandler=new r3({onDragging:u.onDragging,onDragEnd:u.onDragEnd,step:1}),u}return a.prototype.getNodeEdges=function(i){for(var u=this.graphModel,o=u.edges,l=[],c=[],h=0;h<o.length;h++){var p=o[h];p.sourceNodeId===i?l.push(p):o[h].targetNodeId===i&&c.push(p)}return{sourceEdges:l,targetEdges:c}},a.prototype.render=function(){var i=this.props,u=i.x,o=i.y,l=i.index,c=i.model,h=c.getControlPointStyle();return Ic("g",{className:"lf-resize-control-"+l},Ic(kb,cu({className:"lf-node-control"},{x:u,y:o},h,{onMouseDown:this.dragHandler.handleMouseDown})))},a}(jl),o3=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),wv=globalThis&&globalThis.__assign||function(){return wv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},wv.apply(this,arguments)},kv=function(n){o3(a,n);function a(){var i=n.call(this)||this;return i.state={},i}return a.prototype.getResizeControl=function(){var i=this.props,u=i.model,o=i.graphModel,l=u.x,c=u.y,h=u.width,p=u.height,g={minX:l-h/2,minY:c-p/2,maxX:l+h/2,maxY:c+p/2},y=g.minX,S=g.minY,x=g.maxX,T=g.maxY,w=[{x:y,y:S},{x,y:S},{x,y:T},{x:y,y:T}];return w.map(function(N,R){return Ic(n3,wv({index:R},N,{model:u,graphModel:o}))})},a.prototype.getGroupSolid=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getResizeOutlineStyle();return Ic(kb,wv({fill:"none"},h,{x:u,y:o,width:l,height:c}))},a.prototype.render=function(){return Ic("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},a}(jl),vP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),i3=function(n){vP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.resize=function(i,u){console.log(i,u)},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a}($t.RectNodeModel),a3=function(n){vP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(kv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a}($t.RectNode),Uv={type:"rect",view:a3,model:i3},yP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();(function(n){yP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.EllipseNodeModel);(function(n){yP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(kv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u.isSelected&&!o?this.getControlGroup():"")},a})($t.EllipseNode);var mb=globalThis&&globalThis.__assign||function(){return mb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},mb.apply(this,arguments)};function s3(n){var a=n.fillOpacity,i=a===void 0?1:a,u=n.strokeWidth,o=u===void 0?1:u,l=n.strokeOpacity,c=l===void 0?1:l,h=n.fill,p=h===void 0?"transparent":h,g=n.stroke,y=g===void 0?"#000":g,S=n.points,x=n.className,T=x===void 0?"lf-basic-shape":x,w={fill:p,fillOpacity:i,strokeWidth:o,stroke:y,strokeOpacity:c,points:"",className:T};return w.points=S.map(function(N){return N.join(",")}).join(" "),$t.h("polygon",mb({},w))}var gP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),bb=globalThis&&globalThis.__assign||function(){return bb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},bb.apply(this,arguments)};(function(n){gP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.DiamondNodeModel);(function(n){gP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(kv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){var i=this.props.model,u=i.points,o=i.getNodeStyle();return $t.h("g",null,$t.h(s3,bb({},o,{points:u})))},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a})($t.DiamondNode);var mP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();(function(n){mP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.HtmlNodeModel);(function(n){mP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(kv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a})($t.HtmlNode);var bP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Nv=globalThis&&globalThis.__assign||function(){return Nv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Nv.apply(this,arguments)},u3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},PT=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(u3(arguments[a]));return n},_T=500,wT=300,l3=-1e4,f3=function(n){bP(a,n);function a(){var i=n!==null&&n.apply(this,arguments)||this;return i.isGroup=!0,i.unfoldedWidth=_T,i.unfoldedHight=wT,i}return a.prototype.initNodeData=function(i){var u=this;n.prototype.initNodeData.call(this,i);var o=[];Array.isArray(i.children)&&(o=i.children),this.children=new Set(o),this.width=_T,this.height=wT,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=l3,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){u.isFolded&&u.foldGroup(u.isFolded)})},a.prototype.getResizeOutlineStyle=function(){var i=n.prototype.getResizeOutlineStyle.call(this);return i.stroke="none",i},a.prototype.foldGroup=function(i){var u=this;this.setProperty("isFolded",i),this.isFolded=i,i?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var o=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(l){var c=u.graphModel.getElement(l);c.isGroup&&!c.isFolded&&c.foldGroup(i),c.visible=!i,o=o.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(i,o)},a.prototype.getAnchorStyle=function(i){var u=n.prototype.getAnchorStyle.call(this,i);return u.stroke="transparent",u.fill="transparent",u.hover.fill="transparent",u.hover.stroke="transparent",u},a.prototype.foldEdge=function(i,u){var o=this;u.forEach(function(l,c){var h=l.id,p=l.sourceNodeId,g=l.targetNodeId,y=l.startPoint,S=l.endPoint,x=l.type,T=l.properties,w=l.text,N={id:h+"__"+c,sourceNodeId:p,targetNodeId:g,startPoint:y,endPoint:S,type:x,properties:T,text:w==null?void 0:w.value};l.virtual&&o.graphModel.deleteEdgeById(l.id);var R=o.graphModel.group.getNodeGroup(g);R||(R=o.graphModel.getNodeModelById(g));var I=o.graphModel.group.getNodeGroup(p);I||(I=o.graphModel.getNodeModelById(p)),i&&l.visible!==!1&&(o.children.has(p)||o.id===p?(N.startPoint=void 0,N.sourceNodeId=o.id):(N.endPoint=void 0,N.targetNodeId=o.id),(R.id!==o.id||I.id!==o.id)&&o.createVirtualEdge(N),l.visible=!1),!i&&l.visible===!1&&(R&&R.isGroup&&R.isFolded?(N.targetNodeId=R.id,N.endPoint=void 0,o.createVirtualEdge(N)):I&&I.isGroup&&I.isFolded?(N.sourceNodeId=I.id,N.startPoint=void 0,o.createVirtualEdge(N)):l.visible=!0)})},a.prototype.createVirtualEdge=function(i){i.pointsList=void 0;var u=this.graphModel.addEdge(i);u.virtual=!0,u.text.editable=!1,u.isFoldedEdge=!0},a.prototype.isInRange=function(i){var u=i.x1,o=i.y1,l=i.x2,c=i.y2;return u>=this.x-this.width/2&&l<=this.x+this.width/2&&o>=this.y-this.height/2&&c<=this.y+this.height/2},a.prototype.isAllowMoveTo=function(i){var u=i.x1,o=i.y1,l=i.x2,c=i.y2;return{x:u>=this.x-this.width/2&&l<=this.x+this.width/2,y:o>=this.y-this.height/2&&c<=this.y+this.height/2}},a.prototype.setAllowAppendChild=function(i){this.setProperty("groupAddable",i)},a.prototype.addChild=function(i){this.children.add(i)},a.prototype.removeChild=function(i){this.children.delete(i)},a.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},a.prototype.getData=function(){var i=n.prototype.getData.call(this);i.children=PT(this.children);var u=i.properties;return delete u.groupAddable,delete u.isFolded,i},a.prototype.getHistoryData=function(){var i=n.prototype.getData.call(this);i.children=PT(this.children),i.isGroup=!0;var u=i.properties;return delete u.groupAddable,u.isFolded&&(i.x=i.x+this.unfoldedWidth/2-this.foldedWidth/2,i.y=i.y+this.unfoldedHight/2-this.foldedHeight/2),i},a.prototype.isAllowAppendIn=function(i){return!0},a.prototype.toBack=function(){this.zIndex--},a}(Uv.model),c3=function(n){bP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props.model,u=i.resizable,o=i.properties;return u&&!o.isFolded?n.prototype.getControlGroup.call(this):null},a.prototype.getAddableShape=function(){var i=this.props.model,u=i.width,o=i.height,l=i.x,c=i.y,h=i.radius,p=i.properties;if(!p.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,y=this.props.model.getAddableOutlineStyle(),S=u+g+8,x=o+g+8;return $t.h("rect",Nv(Nv({},y),{width:S,height:x,x:l-S/2,y:c-x/2,rx:h,ry:h}))},a.prototype.getFoldIcon=function(){var i=this.props.model,u=i.x-i.width/2+5,o=i.y-i.height/2+5;if(!i.foldable)return null;var l=$t.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:i.properties.isFolded?"M "+(u+3)+","+(o+6)+" "+(u+11)+","+(o+6)+" M"+(u+7)+","+(o+2)+" "+(u+7)+","+(o+10):"M "+(u+3)+","+(o+6)+" "+(u+11)+","+(o+6)+" "});return $t.h("g",{},[$t.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:i.x-i.width/2+5,y:i.y-i.height/2+5,onClick:function(){i.foldGroup(!i.properties.isFolded)}}),l])},a.prototype.getResizeShape=function(){return $t.h("g",{},[this.getAddableShape(),n.prototype.getResizeShape.call(this),this.getFoldIcon()])},a}(Uv.view);const Ub={type:"group",view:c3,model:f3};var d3=-1e3,NT=-1e4,h3=function(){function n(a){var i=this,u=a.lf;this.topGroupZIndex=NT,this.nodeGroupMap=new Map,this.graphRendered=function(o){o&&o.nodes&&o.nodes.forEach(function(l){l.children&&l.children.forEach(function(c){i.nodeGroupMap.set(c,l.id)})})},this.appendNodeToGroup=function(o){var l=o.data,c=i.nodeGroupMap.get(l.id);if(c){var h=i.lf.getNodeModelById(c);h.removeChild(l.id),i.nodeGroupMap.delete(l.id),h.setAllowAppendChild(!1)}var p=i.lf.getNodeModelById(l.id),g=p.getBounds(),y=i.getGroup(g,l);if(y){var S=y.isAllowAppendIn(l);if(!S){i.lf.emit("group:not-allowed",{group:y.getData(),node:l});return}y.addChild(l.id),i.nodeGroupMap.set(l.id,y.id),y.setAllowAppendChild(!1),p.isGroup&&(l.children.forEach(function(x){i.nodeGroupMap.set(x,l.id)}),i.nodeSelected({data:l,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(o){var l=o.data;l.children&&l.children.forEach(function(p){i.nodeGroupMap.delete(p),i.lf.deleteNode(p)});var c=i.nodeGroupMap.get(l.id);if(c){var h=i.lf.getNodeModelById(c);h.removeChild(l.id),i.nodeGroupMap.delete(l.id)}},this.setActiveGroup=function(o){var l=o.data,c=i.lf.getNodeModelById(l.id),h=c.getBounds(),p=i.getGroup(h,l);if(i.activeGroup&&i.activeGroup.setAllowAppendChild(!1),!(!p||c.isGroup&&p.id===l.id)){var g=p.isAllowAppendIn(l);g&&(i.activeGroup=p,i.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(o){var l=o.data,c=o.isMultiple,h=o.isSelected,p=i.lf.getNodeModelById(l.id);if(i.toFrontGroup(p),i.topGroupZIndex>d3){i.topGroupZIndex=NT;for(var g=i.lf.graphModel.nodes.filter(function(N){return N.isGroup}).sort(function(N,R){return N.zIndex-R.zIndex}),y=0,S=0;S<g.length;S++){var x=g[S];x.zIndex!==y&&(i.topGroupZIndex++,y=x.zIndex),x.setZIndex(i.topGroupZIndex)}}if(c&&h)if(p.isGroup)p.children.forEach(function(N){var R=i.lf.graphModel.getElement(N);R.setSelected(!1)});else{var T=i.nodeGroupMap.get(l.id);if(T){var w=i.lf.getNodeModelById(T);w.isSelected&&p.setSelected(!1)}}},this.toFrontGroup=function(o){!o||!o.isGroup||(i.topGroupZIndex++,o.setZIndex(i.topGroupZIndex),o.children&&o.children.forEach(function(l){var c=i.lf.getNodeModelById(l);i.toFrontGroup(c)}))},u.register(Ub),this.lf=u,u.graphModel.addNodeMoveRules(function(o,l,c){if(o.isGroup){var h=i.getNodeAllChild(o);return u.graphModel.moveNodes(h,l,c,!0),!0}var p=u.getNodeModelById(i.nodeGroupMap.get(o.id));if(p&&p.isRestrict){var g=o.getBounds(),y=g.x1,S=g.y1,x=g.x2,T=g.y2,w=p.isAllowMoveTo({x1:y+l,y1:S+c,x2:x+l,y2:T+c});return w}return!0}),u.graphModel.group=this,u.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),u.on("node:delete",this.deleteGroupChild),u.on("node:dnd-drag,node:drag",this.setActiveGroup),u.on("node:click",this.nodeSelected),u.on("graph:rendered",this.graphRendered)}return n.prototype.getNodeAllChild=function(a){var i=this,u=[];return a.children&&a.children.forEach(function(o){u.push(o);var l=i.lf.getNodeModelById(o);l.isGroup&&(u=u.concat(i.getNodeAllChild(l)))}),u},n.prototype.getGroup=function(a,i){var u=this.lf.graphModel.nodes,o=u.filter(function(h){return h.isGroup&&h.isInRange(a)&&h.id!==i.id});if(o.length!==0){if(o.length===1)return o[0];for(var l=o[o.length-1],c=o.length-2;c>=0;c--)o[c].zIndex>l.zIndex&&(l=o[c]);return l}},n.prototype.getNodeGroup=function(a){var i=this.nodeGroupMap.get(a);if(i)return this.lf.getNodeModelById(i)},n.pluginName="group",n}(),p3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var MT=globalThis&&globalThis.__assign||function(){return MT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},MT.apply(this,arguments)},RT=globalThis&&globalThis.__assign||function(){return RT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},RT.apply(this,arguments)},v3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;class y3 extends $t.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class g3 extends $t.HtmlNode{}class m3 extends hB{}class b3 extends pB{}class E3 extends vB{}class O3 extends yB{getShape(){const a=this.props.model,i=a.getNodeStyle(),{x:u,y:o,r:l}=a;return $t.h("circle",{...i,cx:u,cy:o,r:l,strokeWidth:5})}}class S3 extends gB{constructor(a,i){const{id:u,text:o,x:l,y:c}=a;a.id=u||`Gateway_${zi()}`,a.text=o||{value:o||"",x:l,y:c+40},super(a,i),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class x3 extends mB{getShape(){const{model:a}=this.props,{x:i,y:u,width:o,height:l,points:c}=a,h=a.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${i-o/2} ${u-l/2})`},$t.h("polygon",{...h,x:i,y:u,points:c}),$t.h("line",{...h,x1:15,y1:15,x2:35,y2:35}),$t.h("line",{...h,x1:35,y1:15,x2:15,y2:35}))}}class T3 extends $t.PolygonNodeModel{constructor(a,i){const{id:u,text:o,x:l,y:c}=a;a.id=u||`Gateway_${zi()}`,a.text=o||{value:o||"",x:l,y:c+40},super(a,i),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class A3 extends $t.PolygonNode{getShape(){const{model:a}=this.props,{x:i,y:u,width:o,height:l,points:c}=a,h=a.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${i-o/2} ${u-l/2})`},$t.h("polygon",{...h,x:i,y:u,points:c}),$t.h("line",{...h,x1:10,y1:25,x2:40,y2:25}),$t.h("line",{...h,x1:25,y1:10,x2:25,y2:40}))}}class P3 extends bB{}class _3 extends EB{}class w3 extends OB{isAllowConnectedAsSource(){return!1}}class N3 extends SB{}class M3 extends QA{getTextPosition(){const{x:a,y:i}=this.text;return a&&i?{x:a,y:i}:this.dbClickPosition||{x:0,y:0}}}class R3 extends qA{}const D3=Uv.model,I3=Uv.view;class C3 extends D3{createId(){return`Note_${zi()}`}initNodeData(a){super.initNodeData(a),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const a=super.getNodeStyle();return a.strokeDasharray="3 3",a.fill="transparent",a}}class L3 extends I3{}class j3 extends QA{getEdgeStyle(){const a=super.getEdgeStyle();return a.strokeDasharray="3 3",a}getTextPosition(){const{x:a,y:i}=this.text;return a&&i?{x:a,y:i}:this.dbClickPosition||{x:0,y:0}}}class B3 extends qA{}const F3=Ub.model;class G3 extends F3{createId(){return`Group_${zi()}`}initNodeData(a){super.initNodeData(a),this.resizable=!0,this.foldable=!0}addChild(a){var i,u;super.addChild(a),(u=(i=this.graphModel.nodesMap[a])==null?void 0:i.model)==null||u.setProperty("groupKey",this.id)}removeChild(a){var i,u;super.removeChild(a),(u=(i=this.graphModel.nodesMap[a])==null?void 0:i.model)==null||u.deleteProperty("groupKey")}}class k3 extends Ub.view{}class EP extends h3{constructor({lf:a}){super({lf:a}),a.register({type:"group",model:G3,view:k3}),a.off("node:delete",this.deleteGroupChild),a.on("node:delete",({data:i})=>{i.children&&i.children.forEach(u=>{this.nodeGroupMap.delete(u),this.lf.deleteNode(u)})})}}const U3=[{type:"process",model:y3,view:g3},{type:"startEvent",model:m3,view:b3},{type:"endEvent",model:E3,view:O3},{type:"exclusiveGateway",model:S3,view:x3},{type:"parallelGateway",model:T3,view:A3},{type:"userTask",model:P3,view:_3},{type:"serviceTask",model:w3,view:N3},{type:"sequenceFlow",model:M3,view:R3},{type:"note",model:C3,view:L3},{type:"noteFlow",model:j3,view:B3}];class zb{constructor({lf:a}){a.batchRegister(U3),a.setDefaultEdgeType("sequenceFlow")}}Ho(zb,"pluginName","bpmnExtend");class z3 extends kB{constructor({lf:a}){super({lf:a}),this.addItem({key:"clear",iconClass:"lf-control-clear",title:"",text:"",onClick:()=>a.clearData()}),this.addItem({key:"edit",iconClass:"lf-control-edit",title:"",text:"",onClick:()=>a.emit("custom:edit-click",{})}),this.addItem({key:"mini-map",iconClass:"lf-control-mini-map",title:"",text:"",onClick:()=>{const{isShow:i,show:u,hide:o}=a.extension.miniMap??{};i?o():u()}})}}class H3{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(a){return this.init(a),this.execute(!0)}init(a){this.nodes=a.nodes||[],this.edges=a.edges||[],this.combos=a.combos||[],this.comboEdges=a.comboEdges||[],this.hiddenNodes=a.hiddenNodes||[],this.hiddenEdges=a.hiddenEdges||[],this.hiddenCombos=a.hiddenCombos||[],this.vedges=a.vedges||[]}execute(a){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(a){a&&Object.assign(this,a)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const X3=n=>typeof n=="string",DT=Array.isArray,Mv=n=>typeof n=="number",OP=n=>n!==null&&typeof n=="object",Rv=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const a=[];return n.forEach(i=>{a.push(i)}),a.map(i=>Rv(i))}if(typeof n=="object"&&Object.keys(n).length){const a=Object.assign({},n);return Object.keys(a).forEach(i=>{a[i]=Rv(a[i])}),a}return n},wl=(n,a)=>{const i=n[a];return OP(i)?i.cell:i},IT=(n,a,i)=>{let u;return i?u=i:Mv(n)?u=()=>n:u=()=>a,u},$3=(n,a)=>{if(n!=="next"&&n!=="prev")return a},CT=n=>{n.prev.next=n.next,n.next.prev=n.prev,delete n.next,delete n.prev};let V3=class{constructor(){const a={};a.prev=a,a.next=a.prev,this.shortcut=a}dequeue(){const a=this.shortcut,i=a.prev;if(i&&i!==a)return CT(i),i}enqueue(a){const i=this.shortcut;a.prev&&a.next&&CT(a),a.next=i.next,i.next.prev=a,i.next=a,a.prev=i}toString(){const a=[],i=this.shortcut;let u=i.prev;for(;u!==i;)a.push(JSON.stringify(u,$3)),u=u==null?void 0:u.prev;return`[${a.join(", ")}]`}};var Bl;(function(n){n.DEFAULT_EDGE_NAME="\0",n.GRAPH_NODE="\0",n.EDGE_KEY_DELIM=""})(Bl||(Bl={}));function LT(n,a){var i=n.get(a)||0;n.set(a,i+1)}function jT(n,a){var i=n.get(a);i!==void 0&&(i=i-1,i>0?n.set(a,i):n.delete(a))}function SP(n,a,i,u){var o=String(a),l=String(i);if(!n&&o>l){var c=o;o=l,l=c}return o+Bl.EDGE_KEY_DELIM+l+Bl.EDGE_KEY_DELIM+(u===void 0?Bl.DEFAULT_EDGE_NAME:u)}function BT(n,a,i,u){var o=String(a),l=String(i),c={v:a,w:i};if(!n&&o>l){var h=c.v;c.v=c.w,c.w=h}return u!==void 0&&(c.name=u),c}function tb(n,a){return SP(n,a.v,a.w,a.name)}function FT(n){return typeof n=="function"}var W3=function(a){return a.nodes().map(function(i){var u=a.node(i),o=a.parent(i),l={id:i,value:u,parent:o};return l.value===void 0&&delete l.value,l.parent===void 0&&delete l.parent,l})},Y3=function(a){return a.edges().map(function(i){var u=a.edge(i),o={v:i.v,w:i.w,value:u,name:i.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},K3=function(a){var i={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:W3(a),edges:Y3(a),value:a.graph()};return i.value===void 0&&delete i.value,i},Z3=function(a){var i=new Xl(a.options);return a.value!==void 0&&i.setGraph(a.value),a.nodes.forEach(function(u){i.setNode(u.id,u.value),u.parent&&i.setParent(u.id,u.parent)}),a.edges.forEach(function(u){i.setEdge(u.v,u.w,u.value,u.name)}),i};function GT(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);a&&(u=u.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,u)}return i}function kT(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?GT(Object(i),!0).forEach(function(u){J3(n,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):GT(Object(i)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(i,u))})}return n}function J3(n,a,i){return a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function Q3(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function UT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function q3(n,a,i){return a&&UT(n.prototype,a),i&&UT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}var eF={compound:!1,multigraph:!1,directed:!0},Xl=function(){function n(){var a=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Q3(this,n),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Bl.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return a.directed},this.isMultigraph=function(){return a.multigraph},this.isCompound=function(){return a.compound},this.setGraph=function(o){return a.label=o,a},this.graph=function(){return a.label},this.setDefaultNodeLabel=function(o){return FT(o)?a.defaultNodeLabelFn=o:a.defaultNodeLabelFn=function(){return o},a},this.nodeCount=function(){return a.nodeCountNum},this.node=function(o){return a.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(a.nodesLabelMap.keys())},this.sources=function(){return a.nodes().filter(function(o){var l;return!(!((l=a.inEdgesMap.get(o))===null||l===void 0)&&l.size)})},this.sinks=function(){return a.nodes().filter(function(o){var l;return!(!((l=a.outEdgesMap.get(o))===null||l===void 0)&&l.size)})},this.setNodes=function(o,l){return o.map(function(c){return a.setNode(c,l)}),a},this.hasNode=function(o){return a.nodesLabelMap.has(o)},this.checkCompound=function(){if(!a.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(a.isCompound()){var l,c=(l=a.parentMap)===null||l===void 0?void 0:l.get(o);if(c!==a.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(o){var l=a.parentMap.get(o);a.childrenMap.get(l).delete(o)},this.setParent=function(o,l){var c,h;a.checkCompound();for(var p=l===void 0?a.GRAPH_NODE:l,g=a.parent(p);g;){if(o===g)throw new Error("Setting "+l+" as parent of "+o+" would create a cycle");g=a.parent(g)}l&&a.setNode(l),a.setNode(o),a.removeFromParentsChildList(o),(c=a.parentMap)===null||c===void 0||c.set(o,p);var y=a.childrenMap.get(p);return y.set(o,!0),(h=a.childrenMap)===null||h===void 0||h.set(p,y),a},this.children=function(o){var l=o===void 0?a.GRAPH_NODE:o;if(a.isCompound()){var c,h=(c=a.childrenMap)===null||c===void 0?void 0:c.get(l);return h?Array.from(h.keys()):void 0}if(l===a.GRAPH_NODE)return a.nodes();if(o&&a.hasNode(o))return[]},this.predecessors=function(o){var l=a.predecessorsMap.get(o);return l?Array.from(l.keys()):void 0},this.successors=function(o){var l=a.successorsMap.get(o);return l?Array.from(l.keys()):void 0},this.neighbors=function(o){var l;if(a.hasNode(o))return Array.from(new Set((l=a.predecessors(o))===null||l===void 0?void 0:l.concat(a.successors(o))))},this.isLeaf=function(o){var l;if(a.isDirected()){var c;return!(!((c=a.successors(o))===null||c===void 0)&&c.length)}return!(!((l=a.neighbors(o))===null||l===void 0)&&l.length)},this.filterNodes=function(o){var l=a.directed,c=a.multigraph,h=a.compound,p=new n({directed:l,multigraph:c,compound:h});if(p.setGraph(a.graph()),a.nodes().forEach(function(y){o(y)&&p.setNode(y,a.node(y))}),a.edges().forEach(function(y){p.hasNode(y.v)&&p.hasNode(y.w)&&p.setEdgeObj(y,a.edge(y))}),h){var g=function(S){for(var x=a.parent(S);x!==void 0&&!p.hasNode(x);)x=a.parent(x);return x};p.nodes().forEach(function(y){p.setParent(y,g(y))})}return p},this.setDefaultEdgeLabel=function(o){return FT(o)?a.defaultEdgeLabelFn=o:a.defaultEdgeLabelFn=function(){return o},a},this.edgeCount=function(){return a.edgeCountNum},this.setEdgeObj=function(o,l){return a.setEdge(o.v,o.w,l,o.name)},this.setPath=function(o,l){return o.reduce(function(c,h){return a.setEdge(c,h,l),h}),a},this.edgeFromArgs=function(o,l,c){return a.edge({v:o,w:l,name:c})},this.edge=function(o){return a.edgesLabelsMap.get(tb(a.isDirected(),o))},this.hasEdge=function(o,l,c){return a.edgesLabelsMap.has(tb(a.isDirected(),{v:o,w:l,name:c}))},this.removeEdgeObj=function(o){var l=o.v,c=o.w,h=o.name;return a.removeEdge(l,c,h)},this.edges=function(){return Array.from(a.edgesMap.values())},this.inEdges=function(o,l){var c=a.inEdgesMap.get(o);if(c)return Array.from(c.values()).filter(function(h){return!l||h.v===l})},this.outEdges=function(o,l){var c=a.outEdgesMap.get(o);if(c)return Array.from(c.values()).filter(function(h){return!l||h.w===l})},this.nodeEdges=function(o,l){var c;if(a.hasNode(o))return(c=a.inEdges(o,l))===null||c===void 0?void 0:c.concat(a.outEdges(o,l))},this.toJSON=function(){return K3(a)},this.nodeInDegree=function(o){var l=a.inEdgesMap.get(o);return l?l.size:0},this.nodeOutDegree=function(o){var l=a.outEdgesMap.get(o);return l?l.size:0},this.nodeDegree=function(o){return a.nodeInDegree(o)+a.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var u=kT(kT({},eF),i);this.compound=u.compound,this.directed=u.directed,this.multigraph=u.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return q3(n,[{key:"setNode",value:function(i,u){var o=this.nodesLabelMap,l=this.defaultNodeLabelFn,c=this.isCompound,h=this.parentMap,p=this.childrenMap,g=this.inEdgesMap,y=this.outEdgesMap,S=this.predecessorsMap,x=this.successorsMap;if(o.has(i))return u!==void 0&&o.set(i,u),this;if(o.set(i,u||l(i)),c()){var T;h==null||h.set(i,this.GRAPH_NODE),p==null||p.set(i,new Map),p!=null&&p.has(this.GRAPH_NODE)||p==null||p.set(this.GRAPH_NODE,new Map),p==null||(T=p.get(this.GRAPH_NODE))===null||T===void 0||T.set(i,!0)}return[g,y,S,x].forEach(function(w){return w.set(i,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(i){var u=this;if(this.hasNode(i)){var o=function(R){u.removeEdge(R.v,R.w,R.name)},l=this.inEdgesMap,c=this.outEdgesMap,h=this.predecessorsMap,p=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var y,S,x;this.removeFromParentsChildList(i),(y=this.parentMap)===null||y===void 0||y.delete(i),(S=this.children(i))===null||S===void 0||S.forEach(function(N){return u.setParent(N)}),(x=this.childrenMap)===null||x===void 0||x.delete(i)}var T=l.get(i),w=c.get(i);Array.from(T.values()).forEach(function(N){return o(N)}),Array.from(w.values()).forEach(function(N){return o(N)}),g.delete(i),l.delete(i),c.delete(i),h.delete(i),p.delete(i),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(i,u,o,l){var c,h,p=BT(this.isDirected(),i,u,l),g=tb(this.isDirected(),p),y=p.v,S=p.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,o),this;if(l!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(y),this.setNode(S),this.edgesLabelsMap.set(g,o||this.defaultEdgeLabelFn(y,S,l)),Object.freeze(p),this.edgesMap.set(g,p);var x=this.predecessorsMap.get(S),T=this.successorsMap.get(y);return LT(x,y),LT(T,S),(c=this.inEdgesMap.get(S))===null||c===void 0||c.set(g,p),(h=this.outEdgesMap.get(y))===null||h===void 0||h.set(g,p),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(i,u,o){var l=SP(this.isDirected(),i,u,o),c=this.edgesMap.get(l);if(c){var h=BT(this.isDirected(),i,u,o),p=h.v,g=h.w;this.edgesLabelsMap.delete(l),this.edgesMap.delete(l);var y=this.predecessorsMap.get(g),S=this.successorsMap.get(p);jT(y,p),jT(S,g),this.inEdgesMap.get(g).delete(l),this.outEdgesMap.get(p).delete(l),this.edgeCountNum-=1}return this}}]),n}();Xl.fromJSON=Z3;function zT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function tF(n,a,i){return a&&zT(n.prototype,a),i&&zT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function rF(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var xP=tF(function n(){var a=this;rF(this,n),this.arr=[],this.keyIndice=new Map,this.size=function(){return a.arr.length},this.keys=function(){return a.arr.map(function(i){return i.key})},this.has=function(i){return a.keyIndice.has(i)},this.priority=function(i){var u=a.keyIndice.get(i);if(u!==void 0)return a.arr[u].priority},this.swap=function(i,u){var o=a.arr,l=a.keyIndice,c=[o[i],o[u]],h=c[0],p=c[1];o[i]=p,o[u]=h,l.set(h.key,u),l.set(p.key,i)},this.innerDecrease=function(i){for(var u=a.arr,o=u[i].priority,l,c=i;c!==0;){var h;if(l=c>>1,((h=u[l])===null||h===void 0?void 0:h.priority)<o)break;a.swap(c,l),c=l}},this.heapify=function(i){var u=a.arr,o=i<<1,l=o+1,c=i;o<u.length&&(c=u[o].priority<u[c].priority?o:c,l<u.length&&(c=u[l].priority<u[c].priority?l:c),c!==i&&(a.swap(i,c),a.heapify(c)))},this.min=function(){if(a.size()===0)throw new Error("Queue underflow");return a.arr[0].key},this.add=function(i,u){var o=a.keyIndice,l=a.arr;if(!o.has(i)){var c=l.length;return o.set(i,c),l.push({key:i,priority:u}),a.innerDecrease(c),!0}return!1},this.removeMin=function(){a.swap(0,a.arr.length-1);var i=a.arr.pop();return a.keyIndice.delete(i.key),a.heapify(0),i.key},this.decrease=function(i,u){if(!a.has(i))throw new Error("There's no key named ".concat(i));var o=a.keyIndice.get(i);if(u>a.arr[o].priority)throw new Error("New priority is greater than current priority.Key: ".concat(i," Old: + ").concat(a.arr[o].priority," New: ").concat(u));a.arr[o].priority=u,a.innerDecrease(o)}}),nF=function(a,i){var u=new Xl,o=new Map,l=new xP,c;function h(y){var S=y.v===c?y.w:y.v,x=l.priority(S);if(x!==void 0){var T=i(y);T<x&&(o.set(S,c),l.decrease(S,T))}}if(a.nodeCount()===0)return u;a.nodes().forEach(function(y){l.add(y,Number.POSITIVE_INFINITY),u.setNode(y)}),l.decrease(a.nodes()[0],0);for(var p=!1;l.size()>0;){var g;if(c=l.removeMin(),o.has(c))u.setEdge(c,o.get(c));else{if(p)throw new Error("Input graph is not connected: "+a.graph());p=!0}(g=a.nodeEdges(c))===null||g===void 0||g.forEach(h)}return u},oF=function(a){var i=new Set,u=[],o=a.nodes();return o.forEach(function(l){for(var c=[],h=[l];h.length>0;){var p=h.pop();if(!i.has(p)){var g,y;i.add(p),c.push(p),(g=a.successors(p))===null||g===void 0||g.forEach(function(S){return h.push(S)}),(y=a.predecessors(p))===null||y===void 0||y.forEach(function(S){return h.push(S)})}}c.length&&u.push(c)}),u},iF=function n(a,i,u,o,l,c){o.includes(i)||(o.push(i),u||c.push(i),l(i).forEach(function(h){return n(a,h,u,o,l,c)}),u&&c.push(i))},Hb=function(a,i,u){var o=Array.isArray(i)?i:[i],l=function(g){return a.isDirected()?a.successors(g):a.neighbors(g)},c=[],h=[];return o.forEach(function(p){if(a.hasNode(p))iF(a,p,u==="post",h,l,c);else throw new Error("Graph does not have node: "+p)}),c};function aF(n,a){return fF(n)||lF(n,a)||uF(n,a)||sF()}function sF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uF(n,a){if(n){if(typeof n=="string")return HT(n,a);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return HT(n,a)}}function HT(n,a){(a==null||a>n.length)&&(a=n.length);for(var i=0,u=new Array(a);i<a;i++)u[i]=n[i];return u}function lF(n,a){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var u=[],o=!0,l=!1,c,h;try{for(i=i.call(n);!(o=(c=i.next()).done)&&(u.push(c.value),!(a&&u.length===a));o=!0);}catch(p){l=!0,h=p}finally{try{!o&&i.return!=null&&i.return()}finally{if(l)throw h}}return u}}function fF(n){if(Array.isArray(n))return n}var cF=function(){return 1},TP=function(a,i,u,o){return dF(a,i,u||cF,o||function(l){return a.outEdges(l)})},dF=function(a,i,u,o){var l=new Map,c=new xP,h,p,g=function(x){var T=x.v!==h?x.v:x.w,w=l.get(T),N=u(x),R=p.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+N);R<w.distance&&(w.distance=R,w.predecessor=h,c.decrease(T,R))};for(a.nodes().forEach(function(S){var x=S===i?0:Number.POSITIVE_INFINITY;l.set(S,{distance:x}),c.add(S,x)});c.size()>0&&(h=c.removeMin(),p=l.get(h),!(p&&p.distance===Number.POSITIVE_INFINITY));)o(h).forEach(g);var y={};return Array.from(l.entries()).forEach(function(S){var x=aF(S,2),T=x[0],w=x[1];return y[String(T)]=w,y}),y},hF=function(a,i,u){var o={};return a.nodes().forEach(function(l){return o[String(l)]=TP(a,l,i,u),o}),o},AP=function(a){var i=0,u=[],o=new Map,l=[];function c(h){var p,g={onStack:!0,lowlink:i,index:i};if(o.set(h,g),i+=1,u.push(h),(p=a.successors(h))===null||p===void 0||p.forEach(function(T){var w;if(o.has(T)){if(!((w=o.get(T))===null||w===void 0)&&w.onStack){var R=o.get(T);g.lowlink=Math.min(g.lowlink,R.index)}}else{c(T);var N=o.get(T);g.lowlink=Math.min(g.lowlink,N.lowlink)}}),g.lowlink===g.index){var y=[],S;do{S=u.pop();var x=o.get(S);x.onStack=!1,y.push(S)}while(h!==S);l.push(y)}}return a.nodes().forEach(function(h){o.has(h)||c(h)}),l},pF=function(a){return AP(a).filter(function(i){return i.length>1||i.length===1&&a.hasEdge(i[0],i[0])})};function Eb(n){return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Eb(n)}function XT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function vF(n,a,i){return a&&XT(n.prototype,a),i&&XT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function yF(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function gF(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&jc(n,a)}function mF(n){var a=PP();return function(){var u=Bc(n),o;if(a){var l=Bc(this).constructor;o=Reflect.construct(u,arguments,l)}else o=u.apply(this,arguments);return bF(this,o)}}function bF(n,a){if(a&&(Eb(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EF(n)}function EF(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ob(n){var a=typeof Map=="function"?new Map:void 0;return Ob=function(u){if(u===null||!OF(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(u))return a.get(u);a.set(u,o)}function o(){return Ov(u,arguments,Bc(this).constructor)}return o.prototype=Object.create(u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),jc(o,u)},Ob(n)}function Ov(n,a,i){return PP()?Ov=Reflect.construct:Ov=function(o,l,c){var h=[null];h.push.apply(h,l);var p=Function.bind.apply(o,h),g=new p;return c&&jc(g,c.prototype),g},Ov.apply(null,arguments)}function PP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function OF(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function jc(n,a){return jc=Object.setPrototypeOf||function(u,o){return u.__proto__=o,u},jc(n,a)}function Bc(n){return Bc=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bc(n)}var Sb=function(n){gF(i,n);var a=mF(i);function i(){return yF(this,i),a.apply(this,arguments)}return vF(i)}(Ob(Error));function _P(n){var a=new Set,i=new Set,u=[];function o(l){if(i.has(l))throw new Sb;if(!a.has(l)){var c;i.add(l),a.add(l),(c=n.predecessors(l))===null||c===void 0||c.forEach(o),i.delete(l),u.push(l)}}if(n.sinks().forEach(o),a.size!==n.nodeCount())throw new Sb;return u}var SF=function(a){try{_P(a)}catch(i){if(i instanceof Sb)return!1;throw i}return!0},xF=function(a,i){return Hb(a,i,"post")},TF=function(a,i){return Hb(a,i,"pre")},AF=function(){return 1};function PF(n,a,i){return _F(n,a||AF,i||function(u){return n.outEdges(u)})}function _F(n,a,i){var u={},o=n.nodes();return o.forEach(function(l){var c=String(l);u[c]={},u[c][c]={distance:0},o.forEach(function(h){l!==h&&(u[c][String(h)]={distance:Number.POSITIVE_INFINITY})}),i(l).forEach(function(h){var p=h.v===l?h.w:h.v,g=a(h);u[c][String(p)]={distance:g,predecessor:l}})}),o.forEach(function(l){var c=String(l),h=u[c];o.forEach(function(p){var g=String(p),y=u[g];o.forEach(function(S){var x=String(S),T=y[c],w=h[x],N=y[x],R=T.distance+w.distance;R<N.distance&&(N.distance=R,N.predecessor=w.predecessor)})})}),u}const wF=Object.freeze(Object.defineProperty({__proto__:null,components:oF,dfs:Hb,dijkstra:TP,dijkstraAll:hF,findCycles:pF,floydWarshall:PF,isAcyclic:SF,postorder:xF,preorder:TF,prim:nF,tarjan:AP,topsort:_P},Symbol.toStringTag,{value:"Module"}));class NF extends V3{}class MF extends Xl{}const RF=()=>1,DF=(n,a)=>{var i;if(n.nodeCount()<=1)return[];const u=CF(n,a||RF);return(i=IF(u.graph,u.buckets,u.zeroIdx).map(l=>n.outEdges(l.v,l.w)))===null||i===void 0?void 0:i.flat()},IF=(n,a,i)=>{let u=[];const o=a[a.length-1],l=a[0];let c;for(;n.nodeCount();){for(;c=l.dequeue();)rb(n,a,i,c);for(;c=o.dequeue();)rb(n,a,i,c);if(n.nodeCount()){for(let h=a.length-2;h>0;--h)if(c=a[h].dequeue(),c){u=u.concat(rb(n,a,i,c,!0));break}}}return u},rb=(n,a,i,u,o)=>{var l,c;const h=[];return(l=n.inEdges(u.v))===null||l===void 0||l.forEach(p=>{const g=n.edge(p),y=n.node(p.v);o&&h.push({v:p.v,w:p.w,in:0,out:0}),y.out===void 0&&(y.out=0),y.out-=g,xb(a,i,y)}),(c=n.outEdges(u.v))===null||c===void 0||c.forEach(p=>{const g=n.edge(p),y=p.w,S=n.node(y);S.in===void 0&&(S.in=0),S.in-=g,xb(a,i,S)}),n.removeNode(u.v),o?h:void 0},CF=(n,a)=>{const i=new MF;let u=0,o=0;n.nodes().forEach(p=>{i.setNode(p,{v:p,in:0,out:0})}),n.edges().forEach(p=>{const g=i.edge(p)||0,y=(a==null?void 0:a(p))||1,S=g+y;i.setEdge(p.v,p.w,S),o=Math.max(o,i.node(p.v).out+=y),u=Math.max(u,i.node(p.w).in+=y)});const l=[],c=o+u+3;for(let p=0;p<c;p++)l.push(new NF);const h=u+1;return i.nodes().forEach(p=>{xb(l,h,i.node(p))}),{buckets:l,zeroIdx:h,graph:i}},xb=(n,a,i)=>{i.out?i.in?n[i.out-i.in+a].enqueue(i):n[n.length-1].enqueue(i):n[0].enqueue(i)},LF=n=>{const a=u=>o=>{var l;return((l=u.edge(o))===null||l===void 0?void 0:l.weight)||1},i=n.graph().acyclicer==="greedy"?DF(n,a(n)):jF(n);i==null||i.forEach(u=>{const o=n.edge(u);n.removeEdgeObj(u),o.forwardName=u.name,o.reversed=!0,n.setEdge(u.w,u.v,o,`rev-${Math.random()}`)})},jF=n=>{const a=[],i={},u={},o=l=>{var c;u[l]||(u[l]=!0,i[l]=!0,(c=n.outEdges(l))===null||c===void 0||c.forEach(h=>{i[h.w]?a.push(h):o(h.w)}),delete i[l])};return n.nodes().forEach(o),a},BF=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i.reversed){n.removeEdgeObj(a);const u=i.forwardName;delete i.reversed,delete i.forwardName,n.setEdge(a.w,a.v,i,u)}})},$T={run:LF,undo:BF};class _a extends Xl{}const FF=(n,a)=>Number(n)-Number(a),$l=(n,a,i,u)=>{let o;do o=`${u}${Math.random()}`;while(n.hasNode(o));return i.dummy=a,n.setNode(o,i),o},GF=n=>{const a=new _a().setGraph(n.graph());return n.nodes().forEach(i=>{a.setNode(i,n.node(i))}),n.edges().forEach(i=>{const u=a.edgeFromArgs(i.v,i.w)||{weight:0,minlen:1},o=n.edge(i);a.setEdge(i.v,i.w,{weight:u.weight+o.weight,minlen:Math.max(u.minlen,o.minlen)})}),a},wP=n=>{const a=new _a({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(i=>{var u;!((u=n.children(i))===null||u===void 0)&&u.length||a.setNode(i,n.node(i))}),n.edges().forEach(i=>{a.setEdgeObj(i,n.edge(i))}),a},kF=(n,a)=>n==null?void 0:n.reduce((i,u,o)=>(i[u]=a[o],i),{}),VT=(n,a)=>{const i=Number(n.x),u=Number(n.y),o=Number(a.x)-i,l=Number(a.y)-u;let c=Number(n.width)/2,h=Number(n.height)/2;if(!o&&!l)return{x:0,y:0};let p,g;return Math.abs(l)*c>Math.abs(o)*h?(l<0&&(h=-h),p=h*o/l,g=h):(o<0&&(c=-c),p=c,g=c*l/o),{x:i+p,y:u+g}},Fc=n=>{const a=[],i=NP(n)+1;for(let u=0;u<i;u++)a.push([]);n.nodes().forEach(u=>{const o=n.node(u);if(!o)return;const l=o.rank;l!==void 0&&a[l]&&a[l].push(u)});for(let u=0;u<i;u++)a[u]=a[u].sort((o,l)=>{var c,h;return FF((c=n.node(o))===null||c===void 0?void 0:c.order,(h=n.node(l))===null||h===void 0?void 0:h.order)});return a},UF=n=>{const a=n.nodes().filter(u=>{var o;return((o=n.node(u))===null||o===void 0?void 0:o.rank)!==void 0}).map(u=>n.node(u).rank),i=Math.min(...a);n.nodes().forEach(u=>{const o=n.node(u);o.hasOwnProperty("rank")&&i!==1/0&&(o.rank-=i)})},zF=n=>{const a=n.nodes(),i=a.filter(h=>{var p;return((p=n.node(h))===null||p===void 0?void 0:p.rank)!==void 0}).map(h=>n.node(h).rank),u=Math.min(...i),o=[];a.forEach(h=>{var p;const g=(((p=n.node(h))===null||p===void 0?void 0:p.rank)||0)-u;o[g]||(o[g]=[]),o[g].push(h)});let l=0;const c=n.graph().nodeRankFactor||0;for(let h=0;h<o.length;h++){const p=o[h];p===void 0?h%c!==0&&(l-=1):l&&(p==null||p.forEach(g=>{const y=n.node(g);y&&(y.rank=y.rank||0,y.rank+=l)}))}},WT=(n,a,i,u)=>{const o={width:0,height:0};return Mv(i)&&Mv(u)&&(o.rank=i,o.order=u),$l(n,"border",o,a)},NP=n=>{let a;return n.nodes().forEach(i=>{var u;const o=(u=n.node(i))===null||u===void 0?void 0:u.rank;o!==void 0&&(a===void 0||o>a)&&(a=o)}),a||(a=0),a},HF=(n,a)=>{const i={lhs:[],rhs:[]};return n==null||n.forEach(u=>{a(u)?i.lhs.push(u):i.rhs.push(u)}),i},MP=(n,a)=>{const i=Date.now();try{return a()}finally{console.log(`${n} time: ${Date.now()-i}ms`)}},RP=(n,a)=>a(),Xb=(n,a)=>n.reduce((i,u)=>{const o=a(i),l=a(u);return o>l?u:i}),XF=n=>{n.graph().dummyChains=[],n.edges().forEach(a=>$F(n,a))},$F=(n,a)=>{let i=a.v,u=n.node(i).rank;const o=a.w,l=n.node(o).rank,c=a.name,h=n.edge(a),p=h.labelRank;if(l===u+1)return;n.removeEdgeObj(a);const g=n.graph();let y,S,x;for(x=0,++u;u<l;++x,++u)h.points=[],S={edgeLabel:h,width:0,height:0,edgeObj:a,rank:u},y=$l(n,"edge",S,"_d"),u===p&&(S.width=h.width,S.height=h.height,S.dummy="edge-label",S.labelpos=h.labelpos),n.setEdge(i,y,{weight:h.weight},c),x===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(y)),i=y;n.setEdge(i,o,{weight:h.weight},c)},VF=n=>{var a;(a=n.graph().dummyChains)===null||a===void 0||a.forEach(i=>{let u=n.node(i);const o=u.edgeLabel;let l;u.edgeObj&&n.setEdgeObj(u.edgeObj,o);let c=i;for(;u.dummy;)l=n.successors(c)[0],n.removeNode(c),o.points.push({x:u.x,y:u.y}),u.dummy==="edge-label"&&(o.x=u.x,o.y=u.y,o.width=u.width,o.height=u.height),c=l,u=n.node(c)})},YT={run:XF,undo:VF},DP=n=>{var a;const i={},u=o=>{var l;const c=n.node(o);if(!c)return 0;if(i[o])return c.rank;i[o]=!0;let h;return(l=n.outEdges(o))===null||l===void 0||l.forEach(p=>{const g=u(p.w),y=n.edge(p).minlen,S=g-y;S&&(h===void 0||S<h)&&(h=S)}),h||(h=0),c.rank=h,h};(a=n.sources())===null||a===void 0||a.forEach(o=>u(o))},WF=n=>{var a;const i={};let u;const o=h=>{var p;const g=n.node(h);if(!g)return 0;if(i[h])return g.rank;i[h]=!0;let y;return(p=n.outEdges(h))===null||p===void 0||p.forEach(S=>{const x=o(S.w),T=n.edge(S).minlen,w=x-T;w&&(y===void 0||w<y)&&(y=w)}),y||(y=0),(u===void 0||y<u)&&(u=y),g.rank=y,y};(a=n.sources())===null||a===void 0||a.forEach(h=>{n.node(h)&&o(h)}),u===void 0&&(u=0);const l={},c=(h,p)=>{var g;const y=n.node(h),S=isNaN(y.layer)?p:y.layer;(y.rank===void 0||y.rank<S)&&(y.rank=S),!l[h]&&(l[h]=!0,(g=n.outEdges(h))===null||g===void 0||g.map(x=>{c(x.w,S+n.edge(x).minlen)}))};n.nodes().forEach(h=>{const p=n.node(h);p&&(isNaN(p.layer)?p.rank-=u:c(h,p.layer))})},xs=(n,a)=>n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen,YF=n=>{const a=new _a({directed:!1}),i=n.nodes()[0],u=n.nodeCount();a.setNode(i,{});let o,l;for(;KF(a,n)<u;)o=IP(a,n),l=a.hasNode(o.v)?xs(n,o):-xs(n,o),CP(a,n,l);return a},KF=(n,a)=>{const i=u=>{a.nodeEdges(u).forEach(o=>{const l=o.v,c=u===l?o.w:l;!n.hasNode(c)&&!xs(a,o)&&(n.setNode(c,{}),n.setEdge(u,c,{}),i(c))})};return n.nodes().forEach(i),n.nodeCount()},ZF=n=>{const a=new _a({directed:!1}),i=n.nodes()[0],u=n.nodes().filter(c=>!!n.node(c)).length;a.setNode(i,{});let o,l;for(;JF(a,n)<u;)o=IP(a,n),l=a.hasNode(o.v)?xs(n,o):-xs(n,o),CP(a,n,l);return a},JF=(n,a)=>{const i=u=>{var o;(o=a.nodeEdges(u))===null||o===void 0||o.forEach(l=>{const c=l.v,h=u===c?l.w:c;!n.hasNode(h)&&(a.node(h).layer!==void 0||!xs(a,l))&&(n.setNode(h,{}),n.setEdge(u,h,{}),i(h))})};return n.nodes().forEach(i),n.nodeCount()},IP=(n,a)=>Xb(a.edges(),i=>n.hasNode(i.v)!==n.hasNode(i.w)?xs(a,i):1/0),CP=(n,a,i)=>{n.nodes().forEach(u=>{a.node(u).rank||(a.node(u).rank=0),a.node(u).rank+=i})},{preorder:QF,postorder:qF}=wF,e4=n=>{const a=GF(n);DP(a);const i=YF(a);jP(i),LP(i,a);let u,o;for(;u=n4(i);)o=o4(i,a,u),i4(i,a,u,o)},LP=(n,a)=>{let i=qF(n,n.nodes());i=i==null?void 0:i.slice(0,(i==null?void 0:i.length)-1),i==null||i.forEach(u=>{t4(n,a,u)})},t4=(n,a,i)=>{const o=n.node(i).parent;n.edgeFromArgs(i,o).cutvalue=r4(n,a,i)},r4=(n,a,i)=>{var u;const l=n.node(i).parent;let c=!0,h=a.edgeFromArgs(i,l),p=0;return h||(c=!1,h=a.edgeFromArgs(l,i)),p=h.weight,(u=a.nodeEdges(i))===null||u===void 0||u.forEach(g=>{const y=g.v===i,S=y?g.w:g.v;if(S!==l){const x=y===c,T=a.edge(g).weight;if(p+=x?T:-T,s4(n,i,S)){const w=n.edgeFromArgs(i,S).cutvalue;p+=x?-w:w}}}),p},jP=(n,a=n.nodes()[0])=>{BP(n,{},1,a)},BP=(n,a,i,u,o)=>{var l;const c=i;let h=i;const p=n.node(u);return a[u]=!0,(l=n.neighbors(u))===null||l===void 0||l.forEach(g=>{a[g]||(h=BP(n,a,h,g,u))}),p.low=c,p.lim=h++,o?p.parent=o:delete p.parent,h},n4=n=>n.edges().find(a=>n.edge(a).cutvalue<0),o4=(n,a,i)=>{let u=i.v,o=i.w;a.hasEdge(u,o)||(u=i.w,o=i.v);const l=n.node(u),c=n.node(o);let h=l,p=!1;l.lim>c.lim&&(h=c,p=!0);const g=a.edges().filter(y=>p===KT(n,n.node(y.v),h)&&p!==KT(n,n.node(y.w),h));return Xb(g,y=>xs(a,y))},i4=(n,a,i,u)=>{const o=i.v,l=i.w;n.removeEdge(o,l),n.setEdge(u.v,u.w,{}),jP(n),LP(n,a),a4(n,a)},a4=(n,a)=>{const i=n.nodes().find(o=>{var l;return!(!((l=a.node(o))===null||l===void 0)&&l.parent)});let u=QF(n,i);u=u==null?void 0:u.slice(1),u==null||u.forEach(o=>{const l=n.node(o).parent;let c=a.edgeFromArgs(o,l),h=!1;c||(c=a.edgeFromArgs(l,o),h=!0),a.node(o).rank=a.node(l).rank+(h?c.minlen:-c.minlen)})},s4=(n,a,i)=>n.hasEdge(a,i),KT=(n,a,i)=>i.low<=a.lim&&a.lim<=i.lim,u4=n=>{switch(n.graph().ranker){case"network-simplex":f4(n);break;case"tight-tree":ZT(n);break;case"longest-path":l4(n);break;default:ZT(n)}},l4=DP,ZT=n=>{WF(n),ZF(n)},f4=n=>{e4(n)},c4=n=>{var a;const i={};let u=0;const o=l=>{var c;const h=u;(c=n.children(l))===null||c===void 0||c.forEach(o),i[l]={low:h,lim:u++}};return(a=n.children())===null||a===void 0||a.forEach(o),i},d4=(n,a,i,u)=>{const o=[],l=[],c=Math.min(a[i].low,a[u].low),h=Math.max(a[i].lim,a[u].lim);let p,g;p=i;do p=n.parent(p),o.push(p);while(p&&(a[p].low>c||h>a[p].lim));for(g=p,p=u;p&&p!==g;)l.push(p),p=n.parent(p);return{lca:g,path:o.concat(l.reverse())}},h4=n=>{var a;const i=c4(n);(a=n.graph().dummyChains)===null||a===void 0||a.forEach(u=>{var o,l;let c=u,h=n.node(c);const p=h.edgeObj;if(!p)return;const g=d4(n,i,p.v,p.w),y=g.path,S=g.lca;let x=0,T=y[x],w=!0;for(;c!==p.w;){if(h=n.node(c),w){for(;T!==S&&((o=n.node(T))===null||o===void 0?void 0:o.maxRank)<h.rank;)x++,T=y[x];T===S&&(w=!1)}if(!w){for(;x<y.length-1&&((l=n.node(y[x+1]))===null||l===void 0?void 0:l.minRank)<=h.rank;)x++;T=y[x]}n.setParent(c,T),c=n.successors(c)[0]}})},p4=n=>{var a;const i=$l(n,"root",{},"_root"),u=v4(n);let o=Math.max(...Object.values(u));Math.abs(o)===1/0&&(o=1);const l=o-1,c=2*l+1;n.graph().nestingRoot=i,n.edges().forEach(p=>{n.edge(p).minlen*=c});const h=y4(n)+1;(a=n.children())===null||a===void 0||a.forEach(p=>{FP(n,i,c,h,l,u,p)}),n.graph().nodeRankFactor=c},FP=(n,a,i,u,o,l,c)=>{const h=n.children(c);if(!(h!=null&&h.length)){c!==a&&n.setEdge(a,c,{weight:0,minlen:i});return}const p=WT(n,"_bt"),g=WT(n,"_bb"),y=n.node(c);n.setParent(p,c),y.borderTop=p,n.setParent(g,c),y.borderBottom=g,h==null||h.forEach(S=>{FP(n,a,i,u,o,l,S);const x=n.node(S),T=x.borderTop?x.borderTop:S,w=x.borderBottom?x.borderBottom:S,N=x.borderTop?u:2*u,R=T!==w?1:o-l[c]+1;n.setEdge(p,T,{minlen:R,weight:N,nestingEdge:!0}),n.setEdge(w,g,{minlen:R,weight:N,nestingEdge:!0})}),n.parent(c)||n.setEdge(a,p,{weight:0,minlen:o+l[c]})},v4=n=>{var a;const i={},u=(o,l)=>{const c=n.children(o);c==null||c.forEach(h=>u(h,l+1)),i[o]=l};return(a=n.children())===null||a===void 0||a.forEach(o=>u(o,1)),i},y4=n=>{let a=0;return n.edges().forEach(i=>{a+=n.edge(i).weight}),a},g4=n=>{const a=n.graph();a.nestingRoot&&n.removeNode(a.nestingRoot),delete a.nestingRoot,n.edges().forEach(i=>{n.edge(i).nestingEdge&&n.removeEdgeObj(i)})},JT={run:p4,cleanup:g4},m4=n=>{var a;const i=u=>{const o=n.children(u),l=n.node(u);if(o!=null&&o.length&&o.forEach(c=>i(c)),l.hasOwnProperty("minRank")){l.borderLeft=[],l.borderRight=[];for(let c=l.minRank,h=l.maxRank+1;c<h;c+=1)QT(n,"borderLeft","_bl",u,l,c),QT(n,"borderRight","_br",u,l,c)}};(a=n.children())===null||a===void 0||a.forEach(u=>i(u))},QT=(n,a,i,u,o,l)=>{const c={rank:l,borderType:a,width:0,height:0},h=o[a][l-1],p=$l(n,"border",c,i);o[a][l]=p,n.setParent(p,u),h&&n.setEdge(h,p,{weight:1})},b4=n=>{var a;const i=(a=n.graph().rankdir)===null||a===void 0?void 0:a.toLowerCase();(i==="lr"||i==="rl")&&GP(n)},E4=n=>{var a;const i=(a=n.graph().rankdir)===null||a===void 0?void 0:a.toLowerCase();(i==="bt"||i==="rl")&&O4(n),(i==="lr"||i==="rl")&&(S4(n),GP(n))},GP=n=>{n.nodes().forEach(a=>{qT(n.node(a))}),n.edges().forEach(a=>{qT(n.edge(a))})},qT=n=>{const a=n.width;n.width=n.height,n.height=a},O4=n=>{n.nodes().forEach(a=>{nb(n.node(a))}),n.edges().forEach(a=>{var i;const u=n.edge(a);(i=u.points)===null||i===void 0||i.forEach(o=>nb(o)),u.hasOwnProperty("y")&&nb(u)})},nb=n=>{n!=null&&n.y&&(n.y=-n.y)},S4=n=>{n.nodes().forEach(a=>{ob(n.node(a))}),n.edges().forEach(a=>{var i;const u=n.edge(a);(i=u.points)===null||i===void 0||i.forEach(o=>ob(o)),u.hasOwnProperty("x")&&ob(u)})},ob=n=>{const a=n.x;n.x=n.y,n.y=a},eA={adjust:b4,undo:E4},tA=n=>{const a={},i=n.nodes().filter(y=>{var S;return!(!((S=n.children(y))===null||S===void 0)&&S.length)}),u=i.map(y=>n.node(y).rank),o=Math.max(...u),l=[];for(let y=0;y<o+1;y++)l.push([]);const c=y=>{var S;if(a.hasOwnProperty(y))return;a[y]=!0;const x=n.node(y);isNaN(x.rank)||l[x.rank].push(y),(S=n.successors(y))===null||S===void 0||S.forEach(T=>c(T))},h=i.sort((y,S)=>n.node(y).rank-n.node(S).rank),g=h.filter(y=>n.node(y).fixorder!==void 0).sort((y,S)=>n.node(y).fixorder-n.node(S).fixorder);return g==null||g.forEach(y=>{isNaN(n.node(y).rank)||l[n.node(y).rank].push(y),a[y]=!0}),h==null||h.forEach(c),l},x4=(n,a,i)=>{const u=kF(i,i.map((y,S)=>S)),l=a.map(y=>{var S;const x=(S=n.outEdges(y))===null||S===void 0?void 0:S.map(T=>({pos:u[T.w]||0,weight:n.edge(T).weight}));return x==null?void 0:x.sort((T,w)=>T.pos-w.pos)}).flat().filter(y=>y!==void 0);let c=1;for(;c<i.length;)c<<=1;const h=2*c-1;c-=1;const p=Array(h).fill(0,0,h);let g=0;return l==null||l.forEach(y=>{if(y){let S=y.pos+c;p[S]+=y.weight;let x=0;for(;S>0;)S%2&&(x+=p[S+1]),S=S-1>>1,p[S]+=y.weight;g+=y.weight*x}}),g},rA=(n,a)=>{let i=0;for(let u=1;u<(a==null?void 0:a.length);u+=1)i+=x4(n,a[u-1],a[u]);return i},T4=(n,a,i)=>{const u=A4(n),o=new _a({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(l=>n.node(l));return n.nodes().forEach(l=>{var c;const h=n.node(l),p=n.parent(l);(h.rank===a||h.minRank<=a&&a<=h.maxRank)&&(o.setNode(l),o.setParent(l,p||u),(c=n[i](l))===null||c===void 0||c.forEach(g=>{const y=g.v===l?g.w:g.v,S=o.edgeFromArgs(y,l),x=S!==void 0?S.weight:0;o.setEdge(y,l,{weight:n.edge(g).weight+x})}),h.hasOwnProperty("minRank")&&o.setNode(l,{borderLeft:h.borderLeft[a],borderRight:h.borderRight[a]}))}),o},A4=n=>{let a;for(;n.hasNode(a=`_root${Math.random()}`););return a},P4=(n,a,i)=>{const u={};let o;i==null||i.forEach(l=>{let c=n.parent(l),h,p;for(;c;){if(h=n.parent(c),h?(p=u[h],u[h]=c):(p=o,o=c),p&&p!==c){a.setEdge(p,c);return}c=h}})},_4=(n,a)=>a.map(i=>{const u=n.inEdges(i);if(!(u!=null&&u.length))return{v:i};{const o={sum:0,weight:0};return u==null||u.forEach(l=>{const c=n.edge(l),h=n.node(l.v);o.sum+=c.weight*h.order,o.weight+=c.weight}),{v:i,barycenter:o.sum/o.weight,weight:o.weight}}}),w4=(n,a)=>{var i,u,o;const l={};n==null||n.forEach((h,p)=>{l[h.v]={i:p,indegree:0,in:[],out:[],vs:[h.v]};const g=l[h.v];h.barycenter!==void 0&&(g.barycenter=h.barycenter,g.weight=h.weight)}),(i=a.edges())===null||i===void 0||i.forEach(h=>{const p=l[h.v],g=l[h.w];p!==void 0&&g!==void 0&&(g.indegree++,p.out.push(l[h.w]))});const c=(o=(u=Object.values(l)).filter)===null||o===void 0?void 0:o.call(u,h=>!h.indegree);return N4(c)},N4=n=>{var a,i;const u=[],o=p=>g=>{g.merged||(g.barycenter===void 0||p.barycenter===void 0||g.barycenter>=p.barycenter)&&M4(p,g)},l=p=>g=>{g.in.push(p),--g.indegree===0&&n.push(g)};for(;n!=null&&n.length;){const p=n.pop();u.push(p),(a=p.in.reverse())===null||a===void 0||a.forEach(g=>o(p)(g)),(i=p.out)===null||i===void 0||i.forEach(g=>l(p)(g))}const c=u.filter(p=>!p.merged),h=["vs","i","barycenter","weight"];return c.map(p=>{const g={};return h==null||h.forEach(y=>{p[y]!==void 0&&(g[y]=p[y])}),g})},M4=(n,a)=>{var i;let u=0,o=0;n.weight&&(u+=n.barycenter*n.weight,o+=n.weight),a.weight&&(u+=a.barycenter*a.weight,o+=a.weight),n.vs=(i=a.vs)===null||i===void 0?void 0:i.concat(n.vs),n.barycenter=u/o,n.weight=o,n.i=Math.min(a.i,n.i),a.merged=!0},R4=(n,a,i,u)=>{const o=HF(n,x=>{const T=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return u?!T&&x.hasOwnProperty("barycenter"):T||x.hasOwnProperty("barycenter")}),l=o.lhs,c=o.rhs.sort((x,T)=>-x.i- -T.i),h=[];let p=0,g=0,y=0;l==null||l.sort(D4(!!a,!!i)),y=nA(h,c,y),l==null||l.forEach(x=>{var T;y+=(T=x.vs)===null||T===void 0?void 0:T.length,h.push(x.vs),p+=x.barycenter*x.weight,g+=x.weight,y=nA(h,c,y)});const S={vs:h.flat()};return g&&(S.barycenter=p/g,S.weight=g),S},nA=(n,a,i)=>{let u=i,o;for(;a.length&&(o=a[a.length-1]).i<=u;)a.pop(),n==null||n.push(o.vs),u++;return u},D4=(n,a)=>(i,u)=>{if(i.fixorder!==void 0&&u.fixorder!==void 0)return i.fixorder-u.fixorder;if(i.barycenter<u.barycenter)return-1;if(i.barycenter>u.barycenter)return 1;if(a&&i.order!==void 0&&u.order!==void 0){if(i.order<u.order)return-1;if(i.order>u.order)return 1}return n?u.i-i.i:i.i-u.i},kP=(n,a,i,u,o,l)=>{var c,h,p,g;let y=n.children(a);const S=n.node(a),x=S?S.borderLeft:void 0,T=S?S.borderRight:void 0,w={};x&&(y=y==null?void 0:y.filter($=>$!==x&&$!==T));const N=_4(n,y||[]);N==null||N.forEach($=>{var W;if(!((W=n.children($.v))===null||W===void 0)&&W.length){const he=kP(n,$.v,i,u,l);w[$.v]=he,he.hasOwnProperty("barycenter")&&C4($,he)}});const R=w4(N,i);I4(R,w),(c=R.filter($=>$.vs.length>0))===null||c===void 0||c.forEach($=>{const W=n.node($.vs[0]);W&&($.fixorder=W.fixorder,$.order=W.order)});const I=R4(R,u,o,l);if(x&&(I.vs=[x,I.vs,T].flat(),!((h=n.predecessors(x))===null||h===void 0)&&h.length)){const $=n.node(((p=n.predecessors(x))===null||p===void 0?void 0:p[0])||""),W=n.node(((g=n.predecessors(T))===null||g===void 0?void 0:g[0])||"");I.hasOwnProperty("barycenter")||(I.barycenter=0,I.weight=0),I.barycenter=(I.barycenter*I.weight+$.order+W.order)/(I.weight+2),I.weight+=2}return I},I4=(n,a)=>{n==null||n.forEach(i=>{var u;const o=(u=i.vs)===null||u===void 0?void 0:u.map(l=>a[l]?a[l].vs:l);i.vs=o.flat()})},C4=(n,a)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+a.barycenter*a.weight)/(n.weight+a.weight),n.weight+=a.weight):(n.barycenter=a.barycenter,n.weight=a.weight)},L4=(n,a)=>{const i=NP(n),u=[],o=[];for(let y=1;y<i+1;y++)u.push(y);for(let y=i-1;y>-1;y--)o.push(y);const l=oA(n,u,"inEdges"),c=oA(n,o,"outEdges");let h=tA(n);ib(n,h);let p=Number.POSITIVE_INFINITY,g;for(let y=0,S=0;S<4;++y,++S){iA(y%2?l:c,y%4>=2,!1,a),h=Fc(n);const x=rA(n,h);x<p&&(S=0,g=Rv(h),p=x)}h=tA(n),ib(n,h);for(let y=0,S=0;S<4;++y,++S){iA(y%2?l:c,y%4>=2,!0,a),h=Fc(n);const x=rA(n,h);x<p&&(S=0,g=Rv(h),p=x)}ib(n,g)},oA=(n,a,i)=>a.map(u=>T4(n,u,i)),iA=(n,a,i,u)=>{const o=new _a;n==null||n.forEach(l=>{var c;const h=l.graph().root,p=kP(l,h,o,a,i,u);for(let g=0;g<((c=p.vs)===null||c===void 0?void 0:c.length);g++){const y=l.node(p.vs[g]);y&&(y.order=g)}P4(l,o,p.vs)})},ib=(n,a)=>{a==null||a.forEach(i=>{i==null||i.forEach((u,o)=>{n.node(u).order=o})})};class j4 extends Xl{}const B4=(n,a)=>{const i={},u=(o,l)=>{let c=0,h=0;const p=o.length,g=l==null?void 0:l[(l==null?void 0:l.length)-1];return l==null||l.forEach((y,S)=>{var x;const T=G4(n,y),w=T?n.node(T).order:p;(T||y===g)&&((x=l.slice(h,S+1))===null||x===void 0||x.forEach(N=>{var R;(R=n.predecessors(N))===null||R===void 0||R.forEach(I=>{var $;const W=n.node(I),he=W.order;(he<c||w<he)&&!(W.dummy&&(!(($=n.node(N))===null||$===void 0)&&$.dummy))&&UP(i,I,N)})}),h=S+1,c=w)}),l};return a!=null&&a.length&&a.reduce(u),i},F4=(n,a)=>{const i={};function u(h,p,g,y,S){var x,T;let w;for(let N=p;N<g;N++)w=h[N],!((x=n.node(w))===null||x===void 0)&&x.dummy&&((T=n.predecessors(w))===null||T===void 0||T.forEach(R=>{const I=n.node(R);I.dummy&&(I.order<y||I.order>S)&&UP(i,R,w)}))}function o(h){return JSON.stringify(h.slice(1))}function l(h,p){const g=o(h);p.get(g)||(u(...h),p.set(g,!0))}const c=(h,p)=>{let g=-1,y,S=0;const x=new Map;return p==null||p.forEach((T,w)=>{var N;if(((N=n.node(T))===null||N===void 0?void 0:N.dummy)==="border"){const R=n.predecessors(T)||[];R.length&&(y=n.node(R[0]).order,l([p,S,w,g,y],x),S=w,g=y)}l([p,S,p.length,y,h.length],x)}),p};return a!=null&&a.length&&a.reduce(c),i},G4=(n,a)=>{var i,u;if(!((i=n.node(a))===null||i===void 0)&&i.dummy)return(u=n.predecessors(a))===null||u===void 0?void 0:u.find(o=>n.node(o).dummy)},UP=(n,a,i)=>{let u=a,o=i;if(u>o){const c=u;u=o,o=c}let l=n[u];l||(n[u]=l={}),l[o]=!0},k4=(n,a,i)=>{let u=a,o=i;if(u>o){const l=a;u=o,o=l}return!!n[u]},U4=(n,a,i,u)=>{const o={},l={},c={};return a==null||a.forEach(h=>{h==null||h.forEach((p,g)=>{o[p]=p,l[p]=p,c[p]=g})}),a==null||a.forEach(h=>{let p=-1;h==null||h.forEach(g=>{let y=u(g);if(y.length){y=y.sort((x,T)=>c[x]-c[T]);const S=(y.length-1)/2;for(let x=Math.floor(S),T=Math.ceil(S);x<=T;++x){const w=y[x];l[g]===g&&p<c[w]&&!k4(i,g,w)&&(l[w]=g,l[g]=o[g]=o[w],p=c[w])}}})}),{root:o,align:l}},z4=(n,a,i,u,o)=>{var l;const c={},h=H4(n,a,i,o),p=o?"borderLeft":"borderRight",g=(x,T)=>{let w=h.nodes(),N=w.pop();const R={};for(;N;)R[N]?x(N):(R[N]=!0,w.push(N),w=w.concat(T(N))),N=w.pop()},y=x=>{c[x]=(h.inEdges(x)||[]).reduce((T,w)=>Math.max(T,(c[w.v]||0)+h.edge(w)),0)},S=x=>{const T=(h.outEdges(x)||[]).reduce((N,R)=>Math.min(N,(c[R.w]||0)-h.edge(R)),Number.POSITIVE_INFINITY),w=n.node(x);T!==Number.POSITIVE_INFINITY&&w.borderType!==p&&(c[x]=Math.max(c[x],T))};return g(y,h.predecessors.bind(h)),g(S,h.successors.bind(h)),(l=Object.values(u))===null||l===void 0||l.forEach(x=>{c[x]=c[i[x]]}),c},H4=(n,a,i,u)=>{const o=new j4,l=n.graph(),c=W4(l.nodesep,l.edgesep,u);return a==null||a.forEach(h=>{let p;h==null||h.forEach(g=>{const y=i[g];if(o.setNode(y),p){const S=i[p],x=o.edgeFromArgs(S,y);o.setEdge(S,y,Math.max(c(n,g,p),x||0))}p=g})}),o},X4=(n,a)=>Xb(Object.values(a),i=>{var u;let o=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;return(u=Object.keys(i))===null||u===void 0||u.forEach(c=>{const h=i[c],p=Y4(n,c)/2;o=Math.max(h+p,o),l=Math.min(h-p,l)}),o-l});function $4(n,a){const i=Object.values(a),u=Math.min(...i),o=Math.max(...i);["u","d"].forEach(l=>{["l","r"].forEach(c=>{const h=l+c,p=n[h];let g;if(p===a)return;const y=Object.values(p);g=c==="l"?u-Math.min(...y):o-Math.max(...y),g&&(n[h]={},Object.keys(p).forEach(S=>{n[h][S]=p[S]+g}))})})}const V4=(n,a)=>{const i={};return Object.keys(n.ul).forEach(u=>{if(a)i[u]=n[a.toLowerCase()][u];else{const o=Object.values(n).map(l=>l[u]);i[u]=(o[0]+o[1])/2}}),i},W4=(n,a,i)=>(u,o,l)=>{const c=u.node(o),h=u.node(l);let p=0,g;if(p+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(p+=i?g:-g),g=0,p+=(c.dummy?a:n)/2,p+=(h.dummy?a:n)/2,p+=h.width/2,h.labelpos)switch((h.labelpos||"").toLowerCase()){case"l":g=h.width/2;break;case"r":g=-h.width/2;break}return g&&(p+=i?g:-g),g=0,p},Y4=(n,a)=>n.node(a).width||0,K4=n=>{const a=Fc(n),i=n.graph().ranksep;let u=0;a==null||a.forEach(o=>{const l=o.map(h=>n.node(h).height),c=Math.max(...l,0);o==null||o.forEach(h=>{n.node(h).y=u+c/2}),u+=c+i})},Z4=n=>{const a=Fc(n),i=Object.assign(B4(n,a),F4(n,a)),u={};let o=[];["u","d"].forEach(c=>{o=c==="u"?a:Object.values(a).reverse(),["l","r"].forEach(h=>{h==="r"&&(o=o.map(S=>Object.values(S).reverse()));const p=(c==="u"?n.predecessors:n.successors).bind(n),g=U4(n,o,i,p),y=z4(n,o,g.root,g.align,h==="r");h==="r"&&Object.keys(y).forEach(S=>y[S]=-y[S]),u[c+h]=y})});const l=X4(n,u);return l&&$4(u,l),V4(u,n.graph().align)},J4=n=>{var a;const i=wP(n);K4(i);const u=Z4(i);(a=Object.keys(u))===null||a===void 0||a.forEach(o=>{i.node(o).x=u[o]})},Q4=(n,a)=>{const u=n.nodes().filter(c=>{var h;return!(!((h=n.children(c))===null||h===void 0)&&h.length)}).map(c=>n.node(c).rank),o=Math.max(...u),l=[];for(let c=0;c<o+1;c++)l[c]=[];a==null||a.forEach(c=>{const h=n.node(c);!h||h!=null&&h.dummy||isNaN(h.rank)||(h.fixorder=l[h.rank].length,l[h.rank].push(c))})},q4=(n,a)=>{const i=a&&a.debugTiming?MP:RP;i("layout",()=>{a&&!a.keepNodeOrder&&a.prevGraph&&i("  inheritOrder",()=>{tG(n,a.prevGraph)});const u=i("  buildLayoutGraph",()=>lG(n));a&&a.edgeLabelSpace===!1||i("  makeSpaceForEdgeLabels",()=>{fG(u)});try{i("  runLayout",()=>{eG(u,i,a)})}catch(o){if(o.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,o);return}throw o}i("  updateInputGraph",()=>{rG(n,u)})})},eG=(n,a,i)=>{a("    removeSelfEdges",()=>{bG(n)}),a("    acyclic",()=>{$T.run(n)}),a("    nestingGraph.run",()=>{JT.run(n)}),a("    rank",()=>{u4(wP(n))}),a("    injectEdgeLabelProxies",()=>{cG(n)}),a("    removeEmptyRanks",()=>{zF(n)}),a("    nestingGraph.cleanup",()=>{JT.cleanup(n)}),a("    normalizeRanks",()=>{UF(n)}),a("    assignRankMinMax",()=>{dG(n)}),a("    removeEdgeLabelProxies",()=>{hG(n)}),a("    normalize.run",()=>{YT.run(n)}),a("    parentDummyChains",()=>{h4(n)}),a("    addBorderSegments",()=>{m4(n)}),i&&i.keepNodeOrder&&a("    initDataOrder",()=>{Q4(n,i.nodeOrder)}),a("    order",()=>{L4(n,i==null?void 0:i.keepNodeOrder)}),a("    insertSelfEdges",()=>{EG(n)}),a("    adjustCoordinateSystem",()=>{eA.adjust(n)}),a("    position",()=>{J4(n)}),a("    positionSelfEdges",()=>{OG(n)}),a("    removeBorderNodes",()=>{mG(n)}),a("    normalize.undo",()=>{YT.undo(n)}),a("    fixupEdgeLabelCoords",()=>{yG(n)}),a("    undoCoordinateSystem",()=>{eA.undo(n)}),a("    translateGraph",()=>{pG(n)}),a("    assignNodeIntersects",()=>{vG(n)}),a("    reversePoints",()=>{gG(n)}),a("    acyclic.undo",()=>{$T.undo(n)})},tG=(n,a)=>{n.nodes().forEach(i=>{const u=n.node(i),o=a.node(i);o!==void 0?(u.fixorder=o._order,delete o._order):delete u.fixorder})},rG=(n,a)=>{n.nodes().forEach(i=>{var u;const o=n.node(i);if(o){const l=a.node(i);o.x=l.x,o.y=l.y,o._order=l.order,o._rank=l.rank,!((u=a.children(i))===null||u===void 0)&&u.length&&(o.width=l.width,o.height=l.height)}}),n.edges().forEach(i=>{const u=n.edge(i),o=a.edge(i);u.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(u.x=o.x,u.y=o.y)}),n.graph().width=a.graph().width,n.graph().height=a.graph().height},nG=["nodesep","edgesep","ranksep","marginx","marginy"],oG={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ab=["acyclicer","ranker","rankdir","align"],iG=["width","height","layer","fixorder"],aG={width:0,height:0},sG=["minlen","weight","width","height","labeloffset"],uG={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},sb=["labelpos"],lG=n=>{const a=new _a({multigraph:!0,compound:!0}),i=lb(n.graph()),u={};return ab==null||ab.forEach(o=>{i[o]!==void 0&&(u[o]=i[o])}),a.setGraph(Object.assign({},oG,ub(i,nG),u)),n.nodes().forEach(o=>{const l=lb(n.node(o)),c=Object.assign(Object.assign({},aG),l),h=ub(c,iG);a.setNode(o,h),a.setParent(o,n.parent(o))}),n.edges().forEach(o=>{const l=lb(n.edge(o)),c={};sb==null||sb.forEach(h=>{l[h]!==void 0&&(c[h]=l[h])}),a.setEdgeObj(o,Object.assign({},uG,ub(l,sG),c))}),a},fG=n=>{const a=n.graph();a.ranksep||(a.ranksep=0),a.ranksep/=2,n.nodes().forEach(i=>{const u=n.node(i);isNaN(u.layer)||u.layer||(u.layer=0)}),n.edges().forEach(i=>{var u;const o=n.edge(i);o.minlen*=2,((u=o.labelpos)===null||u===void 0?void 0:u.toLowerCase())!=="c"&&(a.rankdir==="TB"||a.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})},cG=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i.width&&i.height){const u=n.node(a.v),o=n.node(a.w),l={e:a,rank:(o.rank-u.rank)/2+u.rank};$l(n,"edge-proxy",l,"_ep")}})},dG=n=>{let a=0;n.nodes().forEach(i=>{var u,o;const l=n.node(i);l.borderTop&&(l.minRank=(u=n.node(l.borderTop))===null||u===void 0?void 0:u.rank,l.maxRank=(o=n.node(l.borderBottom))===null||o===void 0?void 0:o.rank,a=Math.max(a,l.maxRank||-1/0))}),n.graph().maxRank=a},hG=n=>{n.nodes().forEach(a=>{const i=n.node(a);i.dummy==="edge-proxy"&&(n.edge(i.e).labelRank=i.rank,n.removeNode(a))})},pG=n=>{let a,i=0,u,o=0;const l=n.graph(),c=l.marginx||0,h=l.marginy||0,p=g=>{if(!g)return;const y=g.x,S=g.y,x=g.width,T=g.height;!isNaN(y)&&!isNaN(x)&&(a===void 0&&(a=y-x/2),a=Math.min(a,y-x/2),i=Math.max(i,y+x/2)),!isNaN(S)&&!isNaN(T)&&(u===void 0&&(u=S-T/2),u=Math.min(u,S-T/2),o=Math.max(o,S+T/2))};n.nodes().forEach(g=>{p(n.node(g))}),n.edges().forEach(g=>{const y=n.edge(g);y!=null&&y.hasOwnProperty("x")&&p(y)}),a-=c,u-=h,n.nodes().forEach(g=>{const y=n.node(g);y&&(y.x-=a,y.y-=u)}),n.edges().forEach(g=>{var y;const S=n.edge(g);(y=S.points)===null||y===void 0||y.forEach(x=>{x.x-=a,x.y-=u}),S.hasOwnProperty("x")&&(S.x-=a),S.hasOwnProperty("y")&&(S.y-=u)}),l.width=i-a+c,l.height=o-u+h},vG=n=>{n.edges().forEach(a=>{const i=n.edge(a),u=n.node(a.v),o=n.node(a.w);let l,c;i.points?(l=i.points[0],c=i.points[i.points.length-1]):(i.points=[],l=o,c=u),i.points.unshift(VT(u,l)),i.points.push(VT(o,c))})},yG=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i!=null&&i.hasOwnProperty("x"))switch((i.labelpos==="l"||i.labelpos==="r")&&(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset;break}})},gG=n=>{n.edges().forEach(a=>{var i;const u=n.edge(a);u.reversed&&((i=u.points)===null||i===void 0||i.reverse())})},mG=n=>{n.nodes().forEach(a=>{var i,u,o;if(!((i=n.children(a))===null||i===void 0)&&i.length){const l=n.node(a),c=n.node(l.borderTop),h=n.node(l.borderBottom),p=n.node(l.borderLeft[((u=l.borderLeft)===null||u===void 0?void 0:u.length)-1]),g=n.node(l.borderRight[((o=l.borderRight)===null||o===void 0?void 0:o.length)-1]);l.width=Math.abs((g==null?void 0:g.x)-(p==null?void 0:p.x))||10,l.height=Math.abs((h==null?void 0:h.y)-(c==null?void 0:c.y))||10,l.x=((p==null?void 0:p.x)||0)+l.width/2,l.y=((c==null?void 0:c.y)||0)+l.height/2}}),n.nodes().forEach(a=>{var i;((i=n.node(a))===null||i===void 0?void 0:i.dummy)==="border"&&n.removeNode(a)})},bG=n=>{n.edges().forEach(a=>{if(a.v===a.w){const i=n.node(a.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:a,label:n.edge(a)}),n.removeEdgeObj(a)}})},EG=n=>{const a=Fc(n);a==null||a.forEach(i=>{let u=0;i==null||i.forEach((o,l)=>{var c;const h=n.node(o);h.order=l+u,(c=h.selfEdges)===null||c===void 0||c.forEach(p=>{$l(n,"selfedge",{width:p.label.width,height:p.label.height,rank:h.rank,order:l+ ++u,e:p.e,label:p.label},"_se")}),delete h.selfEdges})})},OG=n=>{n.nodes().forEach(a=>{const i=n.node(a);if(i.dummy==="selfedge"){const u=n.node(i.e.v),o=u.x+u.width/2,l=u.y,c=i.x-o,h=u.height/2;n.setEdgeObj(i.e,i.label),n.removeNode(a),i.label.points=[{x:o+2*c/3,y:l-h},{x:o+5*c/6,y:l-h},{y:l,x:o+c},{x:o+5*c/6,y:l+h},{x:o+2*c/3,y:l+h}],i.label.x=i.x,i.label.y=i.y}})},ub=(n,a)=>{const i={};return a==null||a.forEach(u=>{n[u]!==void 0&&(i[u]=+n[u])}),i},lb=(n={})=>{const a={};return Object.keys(n).forEach(i=>{a[i.toLowerCase()]=n[i]}),a},SG={layout:q4,util:{time:MP,notime:RP}};class xG extends H3{constructor(a){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=i=>{const u=this,{nodes:o}=u,l=o.find(c=>c.id===i);return l?l.layout!==!1:!0},this.updateCfg(a)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var a,i,u;const o=this,{nodes:l,nodeSize:c,rankdir:h,combos:p,begin:g,radial:y,comboEdges:S=[],vedges:x=[]}=o;if(!l)return;const T=o.edges||[],w=new _a({multigraph:!0,compound:!0});o.nodeMap={};const N={};l.forEach(L=>{o.nodeMap[L.id]=L,L.comboId&&(N[L.comboId]=N[L.comboId]||[],N[L.comboId].push(L.id))});let R;c?DT(c)?R=()=>c:R=()=>[c,c]:R=L=>L.size?DT(L.size)?L.size:OP(L.size)?[L.size.width||40,L.size.height||40]:[L.size,L.size]:[40,40];const I=IT(o.ranksep,50,o.ranksepFunc),$=IT(o.nodesep,50,o.nodesepFunc);let W=$,he=I;(h==="LR"||h==="RL")&&(W=I,he=$),w.setDefaultEdgeLabel(()=>({})),w.setGraph(o);const ge={};this.sortByCombo&&p&&p.forEach(L=>{if(ge[L.id]=L,L.collapsed){const Q=R(L),U=he(L),D=W(L),k=Q[0]+2*D,te=Q[1]+2*U;w.setNode(L.id,{width:k,height:te})}L.parentId&&(ge[L.parentId]||w.setNode(L.parentId,{}),w.setParent(L.id,L.parentId))}),l.filter(L=>L.layout!==!1).forEach(L=>{const Q=R(L),U=he(L),D=W(L),k=Q[0]+2*D,te=Q[1]+2*U,V=L.layer;Mv(V)?w.setNode(L.id,{width:k,height:te,layer:V}):w.setNode(L.id,{width:k,height:te}),this.sortByCombo&&L.comboId&&(ge[L.comboId]||(ge[L.comboId]={id:L.comboId},w.setNode(L.comboId,{})),w.setParent(L.id,L.comboId))}),T.forEach(L=>{const Q=wl(L,"source"),U=wl(L,"target");this.layoutNode(Q)&&this.layoutNode(U)&&w.setEdge(Q,U,{weight:L.weight||1})}),(a=S==null?void 0:S.concat(x||[]))===null||a===void 0||a.forEach(L=>{var Q,U;const{source:D,target:k}=L,te=!((Q=ge[D])===null||Q===void 0)&&Q.collapsed?[D]:N[D]||[D],V=!((U=ge[k])===null||U===void 0)&&U.collapsed?[k]:N[k]||[k];te.forEach(Z=>{V.forEach(le=>{w.setEdge(Z,le,{weight:L.weight||1})})})});let ye;!((i=o.preset)===null||i===void 0)&&i.nodes&&(ye=new _a({multigraph:!0,compound:!0}),o.preset.nodes.forEach(L=>{ye==null||ye.setNode(L.id,L)})),SG.layout(w,{prevGraph:ye,edgeLabelSpace:o.edgeLabelSpace,keepNodeOrder:!!o.nodeOrder,nodeOrder:o.nodeOrder});const ce=[0,0];if(g){let L=1/0,Q=1/0;w.nodes().forEach(U=>{const D=w.node(U);L>D.x&&(L=D.x),Q>D.y&&(Q=D.y)}),w.edges().forEach(U=>{var D;(D=w.edge(U).points)===null||D===void 0||D.forEach(te=>{L>te.x&&(L=te.x),Q>te.y&&(Q=te.y)})}),ce[0]=g[0]-L,ce[1]=g[1]-Q}const xe=h==="LR"||h==="RL";if(y){const{focusNode:L,ranksep:Q,getRadialPos:U}=this,D=X3(L)?L:L==null?void 0:L.id,k=D?(u=w.node(D))===null||u===void 0?void 0:u._rank:0,te=[],V=xe?"y":"x",Z=xe?"height":"width";let le=1/0,Ae=-1/0;w.nodes().forEach(Ge=>{const bt=w.node(Ge),Ut=l.findIndex(Ue=>Ue.id===Ge);if(!l[Ut])return;const ee=$(l[Ut]);if(k===0)te[bt._rank]||(te[bt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),te[bt._rank].nodes.push(Ge),te[bt._rank].totalWidth+=ee*2+bt[Z],te[bt._rank].maxSize<Math.max(bt.width,bt.height)&&(te[bt._rank].maxSize=Math.max(bt.width,bt.height));else{const Ue=bt._rank-k;if(Ue===0)te[Ue]||(te[Ue]={nodes:[],totalWidth:0,maxSize:-1/0}),te[Ue].nodes.push(Ge),te[Ue].totalWidth+=ee*2+bt[Z],te[Ue].maxSize<Math.max(bt.width,bt.height)&&(te[Ue].maxSize=Math.max(bt.width,bt.height));else{const tt=Math.abs(Ue);te[tt]||(te[tt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),te[tt].totalWidth+=ee*2+bt[Z],te[tt].maxSize<Math.max(bt.width,bt.height)&&(te[tt].maxSize=Math.max(bt.width,bt.height)),Ue<0?te[tt].left.push(Ge):te[tt].right.push(Ge)}}const se=bt[V]-bt[Z]/2-ee,be=bt[V]+bt[Z]/2+ee;se<le&&(le=se),be>Ae&&(Ae=be)});let Re=Q||50;const _e={},Ke=(Ae-le)/.9,gt=[(le+Ae-Ke)*.5,(le+Ae+Ke)*.5],Nt=(Ge,bt,Ut=-1/0,ee=[0,1])=>{let se=Ut;return Ge.forEach(be=>{const Ue=w.node(be);_e[be]=bt;const{x:tt,y:He}=U(Ue[V],gt,Ke,bt,ee),Lt=l.findIndex(tr=>tr.id===be);if(!l[Lt])return;l[Lt].x=tt+ce[0],l[Lt].y=He+ce[1],l[Lt]._order=Ue._order;const nr=I(l[Lt]);se<nr&&(se=nr)}),se};let Vt=!0;const Ct=0;te.forEach(Ge=>{var bt,Ut,ee,se,be,Ue,tt;if(!(!((bt=Ge==null?void 0:Ge.nodes)===null||bt===void 0)&&bt.length)&&!(!((Ut=Ge==null?void 0:Ge.left)===null||Ut===void 0)&&Ut.length)&&!(!((ee=Ge==null?void 0:Ge.right)===null||ee===void 0)&&ee.length))return;if(Vt&&Ge.nodes.length===1){const Lt=l.findIndex(nr=>nr.id===Ge.nodes[0]);if(Lt<=-1)return;l[Lt].x=ce[0],l[Lt].y=ce[1],_e[Ge.nodes[0]]=0,Re=I(l[Lt]),Vt=!1;return}Re=Math.max(Re,Ge.totalWidth/(2*Math.PI));let He=-1/0;if(k===0||!((se=Ge.nodes)===null||se===void 0)&&se.length)He=Nt(Ge.nodes,Re,He,[0,1]);else{const Lt=((be=Ge.left)===null||be===void 0?void 0:be.length)/(((Ue=Ge.left)===null||Ue===void 0?void 0:Ue.length)+((tt=Ge.right)===null||tt===void 0?void 0:tt.length));He=Nt(Ge.left,Re,He,[0,Lt]),He=Nt(Ge.right,Re,He,[Lt+.05,1])}Re+=He,Vt=!1,Ct-Ge.maxSize}),w.edges().forEach(Ge=>{var bt,Ut,ee;const se=w.edge(Ge),be=T.findIndex(Ue=>{const tt=wl(Ue,"source"),He=wl(Ue,"target");return tt===Ge.v&&He===Ge.w});if(!(be<=-1)&&o.edgeLabelSpace&&o.controlPoints&&T[be].type!=="loop"){const Ue=V==="x"?"y":"x",tt=(bt=se==null?void 0:se.points)===null||bt===void 0?void 0:bt.slice(1,se.points.length-1),He=[],Lt=(Ut=w.node(Ge.v))===null||Ut===void 0?void 0:Ut[Ue],nr=Lt-((ee=w.node(Ge.w))===null||ee===void 0?void 0:ee[Ue]),tr=_e[Ge.v],Jt=tr-_e[Ge.w];tt==null||tt.forEach(rt=>{const Er=(rt[Ue]-Lt)/nr*Jt+tr,ur=U(rt[V],gt,Ke,Er);He.push({x:ur.x+ce[0],y:ur.y+ce[1]})}),T[be].controlPoints=He}})}else{const L=new Set,U=h==="BT"||h==="RL"?(V,Z)=>Z-V:(V,Z)=>V-Z;w.nodes().forEach(V=>{const Z=w.node(V);if(!Z)return;let le=this.nodeMap[V];le||(le=p==null?void 0:p.find(Ae=>Ae.id===V)),le&&(le.x=Z.x+ce[0],le.y=Z.y+ce[1],le._order=Z._order,L.add(xe?le.x:le.y))});const D=Array.from(L).sort(U),k=xe?(V,Z)=>V.x!==Z.x:(V,Z)=>V.y!==Z.y,te=xe?(V,Z,le)=>{const Ae=Math.max(Z.y,le.y),Re=Math.min(Z.y,le.y);return V.filter(_e=>_e.y<=Ae&&_e.y>=Re)}:(V,Z,le)=>{const Ae=Math.max(Z.x,le.x),Re=Math.min(Z.x,le.x);return V.filter(_e=>_e.x<=Ae&&_e.x>=Re)};w.edges().forEach(V=>{const Z=w.edge(V),le=T.findIndex(Ae=>{const Re=wl(Ae,"source"),_e=wl(Ae,"target");return Re===V.v&&_e===V.w});if(!(le<=-1)&&o.edgeLabelSpace&&o.controlPoints&&T[le].type!=="loop"){const Ae=o.nodeMap[V.v],Re=o.nodeMap[V.w];T[le].controlPoints=TG(Z==null?void 0:Z.points,Ae,Re,D,xe,k,te),T[le].controlPoints.forEach(_e=>{_e.x+=ce[0],_e.y+=ce[1]})}})}return o.onLayoutEnd&&o.onLayoutEnd(),{nodes:l,edges:T}}getRadialPos(a,i,u,o,l=[0,1]){let c=(a-i[0])/u;c=c*(l[1]-l[0])+l[0];const h=c*2*Math.PI;return{x:Math.cos(h)*o,y:Math.sin(h)*o}}getType(){return"dagre"}}const TG=(n,a,i,u,o,l,c)=>{let h=(n==null?void 0:n.slice(1,n.length-1))||[];if(a&&i){let{x:p,y:g}=a,{x:y,y:S}=i;if(o&&(p=a.y,g=a.x,y=i.y,S=i.x),S!==g&&p!==y){const x=u.indexOf(g),T=u[x+1];if(T){const R=h[0],I=o?{x:(g+T)/2,y:(R==null?void 0:R.y)||y}:{x:(R==null?void 0:R.x)||y,y:(g+T)/2};(!R||l(R,I))&&h.unshift(I)}const w=u.indexOf(S),N=Math.abs(w-x);if(N===1)h=c(h,a,i),h.length||h.push(o?{x:(g+S)/2,y:p}:{x:p,y:(g+S)/2});else if(N>1){const R=u[w-1];if(R){const I=h[h.length-1],$=o?{x:(S+R)/2,y:(I==null?void 0:I.y)||y}:{x:(I==null?void 0:I.x)||p,y:(S+R)/2};(!I||l(I,$))&&h.push($)}}}}return h};var aA,sA,uA,lA;(function(n){n[n.META=0]="META",n[n.NODE=1]="NODE",n[n.BRIDGE=2]="BRIDGE"})(aA||(aA={})),function(n){n[n.INCLUDE=0]="INCLUDE",n[n.EXCLUDE=1]="EXCLUDE",n[n.UNSPECIFIED=2]="UNSPECIFIED"}(sA||(sA={})),function(n){n[n.META=0]="META",n[n.CORE=1]="CORE",n[n.BRIDGE=2]="BRIDGE"}(uA||(uA={})),function(n){n[n.META=0]="META",n[n.OP=1]="OP",n[n.SERIES=2]="SERIES"}(lA||(lA={}));var vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $b(n,a){return n(a={exports:{}},a.exports),a.exports}var AG=function(){this.__data__=[],this.size=0},Vl=function(n,a){return n===a||n!=n&&a!=a},zv=function(n,a){for(var i=n.length;i--;)if(Vl(n[i][0],a))return i;return-1},PG=Array.prototype.splice,_G=function(n){var a=this.__data__,i=zv(a,n);return!(i<0)&&(i==a.length-1?a.pop():PG.call(a,i,1),--this.size,!0)},wG=function(n){var a=this.__data__,i=zv(a,n);return i<0?void 0:a[i][1]},NG=function(n){return zv(this.__data__,n)>-1},MG=function(n,a){var i=this.__data__,u=zv(i,n);return u<0?(++this.size,i.push([n,a])):i[u][1]=a,this};function Nl(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Nl.prototype.clear=AG,Nl.prototype.delete=_G,Nl.prototype.get=wG,Nl.prototype.has=NG,Nl.prototype.set=MG;var Hv=Nl,RG=function(){this.__data__=new Hv,this.size=0},DG=function(n){var a=this.__data__,i=a.delete(n);return this.size=a.size,i},IG=function(n){return this.__data__.get(n)},CG=function(n){return this.__data__.has(n)},zP=typeof vv=="object"&&vv&&vv.Object===Object&&vv,LG=typeof self=="object"&&self&&self.Object===Object&&self,fi=zP||LG||Function("return this")(),Wo=fi.Symbol,HP=Object.prototype,jG=HP.hasOwnProperty,BG=HP.toString,Sc=Wo?Wo.toStringTag:void 0,FG=function(n){var a=jG.call(n,Sc),i=n[Sc];try{n[Sc]=void 0;var u=!0}catch{}var o=BG.call(n);return u&&(a?n[Sc]=i:delete n[Sc]),o},GG=Object.prototype.toString,kG=function(n){return GG.call(n)},fA=Wo?Wo.toStringTag:void 0,Ts=function(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":fA&&fA in Object(n)?FG(n):kG(n)},Oo=function(n){var a=typeof n;return n!=null&&(a=="object"||a=="function")},cA,Hc=function(n){if(!Oo(n))return!1;var a=Ts(n);return a=="[object Function]"||a=="[object GeneratorFunction]"||a=="[object AsyncFunction]"||a=="[object Proxy]"},fb=fi["__core-js_shared__"],dA=(cA=/[^.]+$/.exec(fb&&fb.keys&&fb.keys.IE_PROTO||""))?"Symbol(src)_1."+cA:"",UG=function(n){return!!dA&&dA in n},zG=Function.prototype.toString,yu=function(n){if(n!=null){try{return zG.call(n)}catch{}try{return n+""}catch{}}return""},HG=/^\[object .+?Constructor\]$/,XG=Function.prototype,$G=Object.prototype,VG=XG.toString,WG=$G.hasOwnProperty,YG=RegExp("^"+VG.call(WG).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),KG=function(n){return!(!Oo(n)||UG(n))&&(Hc(n)?YG:HG).test(yu(n))},ZG=function(n,a){return n==null?void 0:n[a]},gu=function(n,a){var i=ZG(n,a);return KG(i)?i:void 0},Gc=gu(fi,"Map"),kc=gu(Object,"create"),JG=function(){this.__data__=kc?kc(null):{},this.size=0},QG=function(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a},qG=Object.prototype.hasOwnProperty,e5=function(n){var a=this.__data__;if(kc){var i=a[n];return i==="__lodash_hash_undefined__"?void 0:i}return qG.call(a,n)?a[n]:void 0},t5=Object.prototype.hasOwnProperty,r5=function(n){var a=this.__data__;return kc?a[n]!==void 0:t5.call(a,n)},n5=function(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=kc&&a===void 0?"__lodash_hash_undefined__":a,this};function Ml(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Ml.prototype.clear=JG,Ml.prototype.delete=QG,Ml.prototype.get=e5,Ml.prototype.has=r5,Ml.prototype.set=n5;var hA=Ml,o5=function(){this.size=0,this.__data__={hash:new hA,map:new(Gc||Hv),string:new hA}},i5=function(n){var a=typeof n;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null},Xv=function(n,a){var i=n.__data__;return i5(a)?i[typeof a=="string"?"string":"hash"]:i.map},a5=function(n){var a=Xv(this,n).delete(n);return this.size-=a?1:0,a},s5=function(n){return Xv(this,n).get(n)},u5=function(n){return Xv(this,n).has(n)},l5=function(n,a){var i=Xv(this,n),u=i.size;return i.set(n,a),this.size+=i.size==u?0:1,this};function Rl(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Rl.prototype.clear=o5,Rl.prototype.delete=a5,Rl.prototype.get=s5,Rl.prototype.has=u5,Rl.prototype.set=l5;var $v=Rl,f5=function(n,a){var i=this.__data__;if(i instanceof Hv){var u=i.__data__;if(!Gc||u.length<199)return u.push([n,a]),this.size=++i.size,this;i=this.__data__=new $v(u)}return i.set(n,a),this.size=i.size,this};function Dl(n){var a=this.__data__=new Hv(n);this.size=a.size}Dl.prototype.clear=RG,Dl.prototype.delete=DG,Dl.prototype.get=IG,Dl.prototype.has=CG,Dl.prototype.set=f5;var Fl=Dl,Vb=function(n,a){for(var i=-1,u=n==null?0:n.length;++i<u&&a(n[i],i,n)!==!1;);return n},Dv=function(){try{var n=gu(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Vv=function(n,a,i){a=="__proto__"&&Dv?Dv(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i},c5=Object.prototype.hasOwnProperty,Wv=function(n,a,i){var u=n[a];c5.call(n,a)&&Vl(u,i)&&(i!==void 0||a in n)||Vv(n,a,i)},Xc=function(n,a,i,u){var o=!i;i||(i={});for(var l=-1,c=a.length;++l<c;){var h=a[l],p=u?u(i[h],n[h],h,i,n):void 0;p===void 0&&(p=n[h]),o?Vv(i,h,p):Wv(i,h,p)}return i},d5=function(n,a){for(var i=-1,u=Array(n);++i<n;)u[i]=a(i);return u},li=function(n){return n!=null&&typeof n=="object"},pA=function(n){return li(n)&&Ts(n)=="[object Arguments]"},XP=Object.prototype,h5=XP.hasOwnProperty,p5=XP.propertyIsEnumerable,zl=pA(function(){return arguments}())?pA:function(n){return li(n)&&h5.call(n,"callee")&&!p5.call(n,"callee")},mn=Array.isArray,v5=function(){return!1},du=$b(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i?fi.Buffer:void 0,l=(o?o.isBuffer:void 0)||v5;n.exports=l}),y5=/^(?:0|[1-9]\d*)$/,Yv=function(n,a){var i=typeof n;return!!(a=a??9007199254740991)&&(i=="number"||i!="symbol"&&y5.test(n))&&n>-1&&n%1==0&&n<a},Wb=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991},sn={};sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object Boolean]"]=sn["[object DataView]"]=sn["[object Date]"]=sn["[object Error]"]=sn["[object Function]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object WeakMap]"]=!1;var g5=function(n){return li(n)&&Wb(n.length)&&!!sn[Ts(n)]},Kv=function(n){return function(a){return n(a)}},Hl=$b(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i&&zP.process,l=function(){try{var c=u&&u.require&&u.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();n.exports=l}),vA=Hl&&Hl.isTypedArray,$c=vA?Kv(vA):g5,m5=Object.prototype.hasOwnProperty,$P=function(n,a){var i=mn(n),u=!i&&zl(n),o=!i&&!u&&du(n),l=!i&&!u&&!o&&$c(n),c=i||u||o||l,h=c?d5(n.length,String):[],p=h.length;for(var g in n)!a&&!m5.call(n,g)||c&&(g=="length"||o&&(g=="offset"||g=="parent")||l&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||Yv(g,p))||h.push(g);return h},b5=Object.prototype,Zv=function(n){var a=n&&n.constructor;return n===(typeof a=="function"&&a.prototype||b5)},VP=function(n,a){return function(i){return n(a(i))}},E5=VP(Object.keys,Object),O5=Object.prototype.hasOwnProperty,Yb=function(n){if(!Zv(n))return E5(n);var a=[];for(var i in Object(n))O5.call(n,i)&&i!="constructor"&&a.push(i);return a},wa=function(n){return n!=null&&Wb(n.length)&&!Hc(n)},As=function(n){return wa(n)?$P(n):Yb(n)},S5=function(n,a){return n&&Xc(a,As(a),n)},x5=function(n){var a=[];if(n!=null)for(var i in Object(n))a.push(i);return a},T5=Object.prototype.hasOwnProperty,A5=function(n){if(!Oo(n))return x5(n);var a=Zv(n),i=[];for(var u in n)(u!="constructor"||!a&&T5.call(n,u))&&i.push(u);return i},mu=function(n){return wa(n)?$P(n,!0):A5(n)},P5=function(n,a){return n&&Xc(a,mu(a),n)},WP=$b(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i?fi.Buffer:void 0,l=o?o.allocUnsafe:void 0;n.exports=function(c,h){if(h)return c.slice();var p=c.length,g=l?l(p):new c.constructor(p);return c.copy(g),g}}),YP=function(n,a){var i=-1,u=n.length;for(a||(a=Array(u));++i<u;)a[i]=n[i];return a},KP=function(n,a){for(var i=-1,u=n==null?0:n.length,o=0,l=[];++i<u;){var c=n[i];a(c,i,n)&&(l[o++]=c)}return l},ZP=function(){return[]},_5=Object.prototype.propertyIsEnumerable,yA=Object.getOwnPropertySymbols,Kb=yA?function(n){return n==null?[]:(n=Object(n),KP(yA(n),function(a){return _5.call(n,a)}))}:ZP,w5=function(n,a){return Xc(n,Kb(n),a)},Zb=function(n,a){for(var i=-1,u=a.length,o=n.length;++i<u;)n[o+i]=a[i];return n},Jv=VP(Object.getPrototypeOf,Object),JP=Object.getOwnPropertySymbols?function(n){for(var a=[];n;)Zb(a,Kb(n)),n=Jv(n);return a}:ZP,N5=function(n,a){return Xc(n,JP(n),a)},QP=function(n,a,i){var u=a(n);return mn(n)?u:Zb(u,i(n))},Tb=function(n){return QP(n,As,Kb)},M5=function(n){return QP(n,mu,JP)},Ab=gu(fi,"DataView"),Pb=gu(fi,"Promise"),Gl=gu(fi,"Set"),_b=gu(fi,"WeakMap"),R5=yu(Ab),D5=yu(Gc),I5=yu(Pb),C5=yu(Gl),L5=yu(_b),lu=Ts;(Ab&&lu(new Ab(new ArrayBuffer(1)))!="[object DataView]"||Gc&&lu(new Gc)!="[object Map]"||Pb&&lu(Pb.resolve())!="[object Promise]"||Gl&&lu(new Gl)!="[object Set]"||_b&&lu(new _b)!="[object WeakMap]")&&(lu=function(n){var a=Ts(n),i=a=="[object Object]"?n.constructor:void 0,u=i?yu(i):"";if(u)switch(u){case R5:return"[object DataView]";case D5:return"[object Map]";case I5:return"[object Promise]";case C5:return"[object Set]";case L5:return"[object WeakMap]"}return a});var hu=lu,j5=Object.prototype.hasOwnProperty,B5=function(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&j5.call(n,"index")&&(i.index=n.index,i.input=n.input),i},Iv=fi.Uint8Array,Jb=function(n){var a=new n.constructor(n.byteLength);return new Iv(a).set(new Iv(n)),a},F5=function(n,a){var i=a?Jb(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)},G5=/\w*$/,k5=function(n){var a=new n.constructor(n.source,G5.exec(n));return a.lastIndex=n.lastIndex,a},gA=Wo?Wo.prototype:void 0,mA=gA?gA.valueOf:void 0,U5=function(n){return mA?Object(mA.call(n)):{}},qP=function(n,a){var i=a?Jb(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)},z5=function(n,a,i){var u=n.constructor;switch(a){case"[object ArrayBuffer]":return Jb(n);case"[object Boolean]":case"[object Date]":return new u(+n);case"[object DataView]":return F5(n,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return qP(n,i);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(n);case"[object RegExp]":return k5(n);case"[object Set]":return new u;case"[object Symbol]":return U5(n)}},bA=Object.create,e_=function(){function n(){}return function(a){if(!Oo(a))return{};if(bA)return bA(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}(),t_=function(n){return typeof n.constructor!="function"||Zv(n)?{}:e_(Jv(n))},H5=function(n){return li(n)&&hu(n)=="[object Map]"},EA=Hl&&Hl.isMap,X5=EA?Kv(EA):H5,$5=function(n){return li(n)&&hu(n)=="[object Set]"},OA=Hl&&Hl.isSet,V5=OA?Kv(OA):$5,rn={};rn["[object Arguments]"]=rn["[object Array]"]=rn["[object ArrayBuffer]"]=rn["[object DataView]"]=rn["[object Boolean]"]=rn["[object Date]"]=rn["[object Float32Array]"]=rn["[object Float64Array]"]=rn["[object Int8Array]"]=rn["[object Int16Array]"]=rn["[object Int32Array]"]=rn["[object Map]"]=rn["[object Number]"]=rn["[object Object]"]=rn["[object RegExp]"]=rn["[object Set]"]=rn["[object String]"]=rn["[object Symbol]"]=rn["[object Uint8Array]"]=rn["[object Uint8ClampedArray]"]=rn["[object Uint16Array]"]=rn["[object Uint32Array]"]=!0,rn["[object Error]"]=rn["[object Function]"]=rn["[object WeakMap]"]=!1;var r_=function n(a,i,u,o,l,c){var h,p=1&i,g=2&i,y=4&i;if(u&&(h=l?u(a,o,l,c):u(a)),h!==void 0)return h;if(!Oo(a))return a;var S=mn(a);if(S){if(h=B5(a),!p)return YP(a,h)}else{var x=hu(a),T=x=="[object Function]"||x=="[object GeneratorFunction]";if(du(a))return WP(a,p);if(x=="[object Object]"||x=="[object Arguments]"||T&&!l){if(h=g||T?{}:t_(a),!p)return g?N5(a,P5(h,a)):w5(a,S5(h,a))}else{if(!rn[x])return l?a:{};h=z5(a,x,p)}}c||(c=new Fl);var w=c.get(a);if(w)return w;c.set(a,h),V5(a)?a.forEach(function(R){h.add(n(R,i,u,R,a,c))}):X5(a)&&a.forEach(function(R,I){h.set(I,n(R,i,u,I,a,c))});var N=S?void 0:(y?g?M5:Tb:g?mu:As)(a);return Vb(N||a,function(R,I){N&&(R=a[I=R]),Wv(h,I,n(R,i,u,I,a,c))}),h},W5=function(n){return r_(n,4)},Qb=function(n){return function(){return n}},qb=function(n){return function(a,i,u){for(var o=-1,l=Object(a),c=u(a),h=c.length;h--;){var p=c[n?h:++o];if(i(l[p],p,l)===!1)break}return a}}(),eE=function(n,a){return n&&qb(n,a,As)},Qv=function(n,a){return function(i,u){if(i==null)return i;if(!wa(i))return n(i,u);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&u(c[l],l,c)!==!1;);return i}}(eE),bu=function(n){return n},n_=function(n){return typeof n=="function"?n:bu},o_=function(n,a){return(mn(n)?Vb:Qv)(n,n_(a))},i_=o_,Y5=function(n,a){var i=[];return Qv(n,function(u,o,l){a(u,o,l)&&i.push(u)}),i},K5=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Z5=function(n){return this.__data__.has(n)};function Sv(n){var a=-1,i=n==null?0:n.length;for(this.__data__=new $v;++a<i;)this.add(n[a])}Sv.prototype.add=Sv.prototype.push=K5,Sv.prototype.has=Z5;var a_=Sv,J5=function(n,a){for(var i=-1,u=n==null?0:n.length;++i<u;)if(a(n[i],i,n))return!0;return!1},s_=function(n,a){return n.has(a)},u_=function(n,a,i,u,o,l){var c=1&i,h=n.length,p=a.length;if(h!=p&&!(c&&p>h))return!1;var g=l.get(n),y=l.get(a);if(g&&y)return g==a&&y==n;var S=-1,x=!0,T=2&i?new a_:void 0;for(l.set(n,a),l.set(a,n);++S<h;){var w=n[S],N=a[S];if(u)var R=c?u(N,w,S,a,n,l):u(w,N,S,n,a,l);if(R!==void 0){if(R)continue;x=!1;break}if(T){if(!J5(a,function(I,$){if(!s_(T,$)&&(w===I||o(w,I,i,u,l)))return T.push($)})){x=!1;break}}else if(w!==N&&!o(w,N,i,u,l)){x=!1;break}}return l.delete(n),l.delete(a),x},Q5=function(n){var a=-1,i=Array(n.size);return n.forEach(function(u,o){i[++a]=[o,u]}),i},tE=function(n){var a=-1,i=Array(n.size);return n.forEach(function(u){i[++a]=u}),i},SA=Wo?Wo.prototype:void 0,cb=SA?SA.valueOf:void 0,q5=function(n,a,i,u,o,l,c){switch(i){case"[object DataView]":if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=a.byteLength||!l(new Iv(n),new Iv(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Vl(+n,+a);case"[object Error]":return n.name==a.name&&n.message==a.message;case"[object RegExp]":case"[object String]":return n==a+"";case"[object Map]":var h=Q5;case"[object Set]":var p=1&u;if(h||(h=tE),n.size!=a.size&&!p)return!1;var g=c.get(n);if(g)return g==a;u|=2,c.set(n,a);var y=u_(h(n),h(a),u,o,l,c);return c.delete(n),y;case"[object Symbol]":if(cb)return cb.call(n)==cb.call(a)}return!1},e8=Object.prototype.hasOwnProperty,t8=function(n,a,i,u,o,l){var c=1&i,h=Tb(n),p=h.length;if(p!=Tb(a).length&&!c)return!1;for(var g=p;g--;){var y=h[g];if(!(c?y in a:e8.call(a,y)))return!1}var S=l.get(n),x=l.get(a);if(S&&x)return S==a&&x==n;var T=!0;l.set(n,a),l.set(a,n);for(var w=c;++g<p;){var N=n[y=h[g]],R=a[y];if(u)var I=c?u(R,N,y,a,n,l):u(N,R,y,n,a,l);if(!(I===void 0?N===R||o(N,R,i,u,l):I)){T=!1;break}w||(w=y=="constructor")}if(T&&!w){var $=n.constructor,W=a.constructor;$==W||!("constructor"in n)||!("constructor"in a)||typeof $=="function"&&$ instanceof $&&typeof W=="function"&&W instanceof W||(T=!1)}return l.delete(n),l.delete(a),T},xA=Object.prototype.hasOwnProperty,r8=function(n,a,i,u,o,l){var c=mn(n),h=mn(a),p=c?"[object Array]":hu(n),g=h?"[object Array]":hu(a),y=(p=p=="[object Arguments]"?"[object Object]":p)=="[object Object]",S=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",x=p==g;if(x&&du(n)){if(!du(a))return!1;c=!0,y=!1}if(x&&!y)return l||(l=new Fl),c||$c(n)?u_(n,a,i,u,o,l):q5(n,a,p,i,u,o,l);if(!(1&i)){var T=y&&xA.call(n,"__wrapped__"),w=S&&xA.call(a,"__wrapped__");if(T||w){var N=T?n.value():n,R=w?a.value():a;return l||(l=new Fl),o(N,R,i,u,l)}}return!!x&&(l||(l=new Fl),t8(n,a,i,u,o,l))},l_=function n(a,i,u,o,l){return a===i||(a==null||i==null||!li(a)&&!li(i)?a!=a&&i!=i:r8(a,i,u,o,n,l))},n8=function(n,a,i,u){var o=i.length,l=o,c=!u;if(n==null)return!l;for(n=Object(n);o--;){var h=i[o];if(c&&h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++o<l;){var p=(h=i[o])[0],g=n[p],y=h[1];if(c&&h[2]){if(g===void 0&&!(p in n))return!1}else{var S=new Fl;if(u)var x=u(g,y,p,n,a,S);if(!(x===void 0?l_(y,g,3,u,S):x))return!1}}return!0},f_=function(n){return n==n&&!Oo(n)},o8=function(n){for(var a=As(n),i=a.length;i--;){var u=a[i],o=n[u];a[i]=[u,o,f_(o)]}return a},c_=function(n,a){return function(i){return i!=null&&i[n]===a&&(a!==void 0||n in Object(i))}},i8=function(n){var a=o8(n);return a.length==1&&a[0][2]?c_(a[0][0],a[0][1]):function(i){return i===n||n8(i,n,a)}},pu=function(n){return typeof n=="symbol"||li(n)&&Ts(n)=="[object Symbol]"},a8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s8=/^\w*$/,rE=function(n,a){if(mn(n))return!1;var i=typeof n;return!(i!="number"&&i!="symbol"&&i!="boolean"&&n!=null&&!pu(n))||s8.test(n)||!a8.test(n)||a!=null&&n in Object(a)};function nE(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError("Expected a function");var i=function(){var u=arguments,o=a?a.apply(this,u):u[0],l=i.cache;if(l.has(o))return l.get(o);var c=n.apply(this,u);return i.cache=l.set(o,c)||l,c};return i.cache=new(nE.Cache||$v),i}nE.Cache=$v;var u8=nE,l8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f8=/\\(\\)?/g,c8=function(n){var a=u8(n,function(u){return i.size===500&&i.clear(),u}),i=a.cache;return a}(function(n){var a=[];return n.charCodeAt(0)===46&&a.push(""),n.replace(l8,function(i,u,o,l){a.push(o?l.replace(f8,"$1"):u||i)}),a}),kl=function(n,a){for(var i=-1,u=n==null?0:n.length,o=Array(u);++i<u;)o[i]=a(n[i],i,n);return o},TA=Wo?Wo.prototype:void 0,AA=TA?TA.toString:void 0,d8=function n(a){if(typeof a=="string")return a;if(mn(a))return kl(a,n)+"";if(pu(a))return AA?AA.call(a):"";var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},d_=function(n){return n==null?"":d8(n)},qv=function(n,a){return mn(n)?n:rE(n,a)?[n]:c8(d_(n))},Vc=function(n){if(typeof n=="string"||pu(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a},ey=function(n,a){for(var i=0,u=(a=qv(a,n)).length;n!=null&&i<u;)n=n[Vc(a[i++])];return i&&i==u?n:void 0},h8=function(n,a,i){var u=n==null?void 0:ey(n,a);return u===void 0?i:u},p8=function(n,a){return n!=null&&a in Object(n)},h_=function(n,a,i){for(var u=-1,o=(a=qv(a,n)).length,l=!1;++u<o;){var c=Vc(a[u]);if(!(l=n!=null&&i(n,c)))break;n=n[c]}return l||++u!=o?l:!!(o=n==null?0:n.length)&&Wb(o)&&Yv(c,o)&&(mn(n)||zl(n))},p_=function(n,a){return n!=null&&h_(n,a,p8)},v8=function(n,a){return rE(n)&&f_(a)?c_(Vc(n),a):function(i){var u=h8(i,n);return u===void 0&&u===a?p_(i,n):l_(a,u,3)}},v_=function(n){return function(a){return a==null?void 0:a[n]}},y8=function(n){return function(a){return ey(a,n)}},g8=function(n){return rE(n)?v_(Vc(n)):y8(n)},Na=function(n){return typeof n=="function"?n:n==null?bu:typeof n=="object"?mn(n)?v8(n[0],n[1]):i8(n):g8(n)},y_=function(n,a){return(mn(n)?KP:Y5)(n,Na(a))},m8=Object.prototype.hasOwnProperty,b8=function(n,a){return n!=null&&m8.call(n,a)},g_=function(n,a){return n!=null&&h_(n,a,b8)},E8=Object.prototype.hasOwnProperty,O8=function(n){if(n==null)return!0;if(wa(n)&&(mn(n)||typeof n=="string"||typeof n.splice=="function"||du(n)||$c(n)||zl(n)))return!n.length;var a=hu(n);if(a=="[object Map]"||a=="[object Set]")return!n.size;if(Zv(n))return!Yb(n).length;for(var i in n)if(E8.call(n,i))return!1;return!0},m_=function(n){return n===void 0},b_=function(n,a){var i=-1,u=wa(n)?Array(n.length):[];return Qv(n,function(o,l,c){u[++i]=a(o,l,c)}),u},E_=function(n,a){return(mn(n)?kl:b_)(n,Na(a))},S8=function(n,a,i,u){var o=-1,l=n==null?0:n.length;for(u&&l&&(i=n[++o]);++o<l;)i=a(i,n[o],o,n);return i},x8=function(n,a,i,u,o){return o(n,function(l,c,h){i=u?(u=!1,l):a(i,l,c,h)}),i},O_=function(n,a,i){var u=mn(n)?S8:x8,o=arguments.length<3;return u(n,Na(a),i,o,Qv)},T8=function(n){return typeof n=="string"||!mn(n)&&li(n)&&Ts(n)=="[object String]"},A8=v_("length"),P8=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),_8=function(n){return P8.test(n)},w8="[\\ud800-\\udfff]",wb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Nb="\\ud83c[\\udffb-\\udfff]",S_="[^\\ud800-\\udfff]",x_="(?:\\ud83c[\\udde6-\\uddff]){2}",T_="[\\ud800-\\udbff][\\udc00-\\udfff]",PA="(?:"+wb+"|"+Nb+")?",N8="[\\ufe0e\\ufe0f]?"+PA+("(?:\\u200d(?:"+[S_,x_,T_].join("|")+")[\\ufe0e\\ufe0f]?"+PA+")*"),M8="(?:"+[S_+wb+"?",wb,x_,T_,w8].join("|")+")",_A=RegExp(Nb+"(?="+Nb+")|"+M8+N8,"g"),R8=function(n){for(var a=_A.lastIndex=0;_A.test(n);)++a;return a},D8=function(n){return _8(n)?R8(n):A8(n)},I8=function(n){if(n==null)return 0;if(wa(n))return T8(n)?D8(n):n.length;var a=hu(n);return a=="[object Map]"||a=="[object Set]"?n.size:Yb(n).length},C8=function(n,a,i){var u=mn(n),o=u||du(n)||$c(n);if(a=Na(a),i==null){var l=n&&n.constructor;i=o?u?new l:[]:Oo(n)&&Hc(l)?e_(Jv(n)):{}}return(o?Vb:eE)(n,function(c,h,p){return a(i,c,h,p)}),i},wA=Wo?Wo.isConcatSpreadable:void 0,L8=function(n){return mn(n)||zl(n)||!!(wA&&n&&n[wA])},oE=function n(a,i,u,o,l){var c=-1,h=a.length;for(u||(u=L8),l||(l=[]);++c<h;){var p=a[c];i>0&&u(p)?i>1?n(p,i-1,u,o,l):Zb(l,p):o||(l[l.length]=p)}return l},j8=function(n,a,i){switch(i.length){case 0:return n.call(a);case 1:return n.call(a,i[0]);case 2:return n.call(a,i[0],i[1]);case 3:return n.call(a,i[0],i[1],i[2])}return n.apply(a,i)},NA=Math.max,A_=function(n,a,i){return a=NA(a===void 0?n.length-1:a,0),function(){for(var u=arguments,o=-1,l=NA(u.length-a,0),c=Array(l);++o<l;)c[o]=u[a+o];o=-1;for(var h=Array(a+1);++o<a;)h[o]=u[o];return h[a]=i(c),j8(n,this,h)}},B8=Dv?function(n,a){return Dv(n,"toString",{configurable:!0,enumerable:!1,value:Qb(a),writable:!0})}:bu,F8=Date.now,P_=function(n){var a=0,i=0;return function(){var u=F8(),o=16-(u-i);if(i=u,o>0){if(++a>=800)return arguments[0]}else a=0;return n.apply(void 0,arguments)}}(B8),ty=function(n,a){return P_(A_(n,a,bu),n+"")},__=function(n,a,i,u){for(var o=n.length,l=i+(u?1:-1);u?l--:++l<o;)if(a(n[l],l,n))return l;return-1},G8=function(n){return n!=n},k8=function(n,a,i){for(var u=i-1,o=n.length;++u<o;)if(n[u]===a)return u;return-1},U8=function(n,a,i){return a==a?k8(n,a,i):__(n,G8,i)},z8=function(n,a){return!!(n!=null&&n.length)&&U8(n,a,0)>-1},H8=function(n,a,i){for(var u=-1,o=n==null?0:n.length;++u<o;)if(i(a,n[u]))return!0;return!1},X8=function(){},$8=Gl&&1/tE(new Gl([,-0]))[1]==1/0?function(n){return new Gl(n)}:X8,V8=function(n,a,i){var u=-1,o=z8,l=n.length,c=!0,h=[],p=h;if(i)c=!1,o=H8;else if(l>=200){var g=a?null:$8(n);if(g)return tE(g);c=!1,o=s_,p=new a_}else p=a?[]:h;e:for(;++u<l;){var y=n[u],S=a?a(y):y;if(y=i||y!==0?y:0,c&&S==S){for(var x=p.length;x--;)if(p[x]===S)continue e;a&&p.push(S),h.push(y)}else o(p,S,i)||(p!==h&&p.push(S),h.push(y))}return h},w_=function(n){return li(n)&&wa(n)},W8=ty(function(n){return V8(oE(n,1,w_,!0))}),Y8=function(n,a){return kl(a,function(i){return n[i]})},Cv,N_=function(n){return n==null?[]:Y8(n,As(n))};try{Cv={clone:W5,constant:Qb,each:i_,filter:y_,has:g_,isArray:mn,isEmpty:O8,isFunction:Hc,isUndefined:m_,keys:As,map:E_,reduce:O_,size:I8,transform:C8,union:W8,values:N_}}catch{}Cv||(Cv=window._);var zt=Cv,iE=Lr;function Lr(n){this._isDirected=!zt.has(n,"directed")||n.directed,this._isMultigraph=!!zt.has(n,"multigraph")&&n.multigraph,this._isCompound=!!zt.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=zt.constant(void 0),this._defaultEdgeLabelFn=zt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function MA(n,a){n[a]?n[a]++:n[a]=1}function RA(n,a){--n[a]||delete n[a]}function Nc(n,a,i,u){var o=""+a,l=""+i;if(!n&&o>l){var c=o;o=l,l=c}return o+""+l+""+(zt.isUndefined(u)?"\0":u)}function K8(n,a,i,u){var o=""+a,l=""+i;if(!n&&o>l){var c=o;o=l,l=c}var h={v:o,w:l};return u&&(h.name=u),h}function db(n,a){return Nc(n,a.v,a.w,a.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(n){return this._label=n,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(n){return zt.isFunction(n)||(n=zt.constant(n)),this._defaultNodeLabelFn=n,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return zt.keys(this._nodes)},Lr.prototype.sources=function(){var n=this;return zt.filter(this.nodes(),function(a){return zt.isEmpty(n._in[a])})},Lr.prototype.sinks=function(){var n=this;return zt.filter(this.nodes(),function(a){return zt.isEmpty(n._out[a])})},Lr.prototype.setNodes=function(n,a){var i=arguments,u=this;return zt.each(n,function(o){i.length>1?u.setNode(o,a):u.setNode(o)}),this},Lr.prototype.setNode=function(n,a){return zt.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=a),this):(this._nodes[n]=arguments.length>1?a:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},Lr.prototype.node=function(n){return this._nodes[n]},Lr.prototype.hasNode=function(n){return zt.has(this._nodes,n)},Lr.prototype.removeNode=function(n){var a=this;if(zt.has(this._nodes,n)){var i=function(u){a.removeEdge(a._edgeObjs[u])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],zt.each(this.children(n),function(u){a.setParent(u)}),delete this._children[n]),zt.each(zt.keys(this._in[n]),i),delete this._in[n],delete this._preds[n],zt.each(zt.keys(this._out[n]),i),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},Lr.prototype.setParent=function(n,a){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(zt.isUndefined(a))a="\0";else{for(var i=a+="";!zt.isUndefined(i);i=this.parent(i))if(i===n)throw new Error("Setting "+a+" as parent of "+n+" would create a cycle");this.setNode(a)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=a,this._children[a][n]=!0,this},Lr.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},Lr.prototype.parent=function(n){if(this._isCompound){var a=this._parent[n];if(a!=="\0")return a}},Lr.prototype.children=function(n){if(zt.isUndefined(n)&&(n="\0"),this._isCompound){var a=this._children[n];if(a)return zt.keys(a)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},Lr.prototype.predecessors=function(n){var a=this._preds[n];if(a)return zt.keys(a)},Lr.prototype.successors=function(n){var a=this._sucs[n];if(a)return zt.keys(a)},Lr.prototype.neighbors=function(n){var a=this.predecessors(n);if(a)return zt.union(a,this.successors(n))},Lr.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},Lr.prototype.filterNodes=function(n){var a=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});a.setGraph(this.graph());var i=this;zt.each(this._nodes,function(l,c){n(c)&&a.setNode(c,l)}),zt.each(this._edgeObjs,function(l){a.hasNode(l.v)&&a.hasNode(l.w)&&a.setEdge(l,i.edge(l))});var u={};function o(l){var c=i.parent(l);return c===void 0||a.hasNode(c)?(u[l]=c,c):c in u?u[c]:o(c)}return this._isCompound&&zt.each(a.nodes(),function(l){a.setParent(l,o(l))}),a},Lr.prototype.setDefaultEdgeLabel=function(n){return zt.isFunction(n)||(n=zt.constant(n)),this._defaultEdgeLabelFn=n,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return zt.values(this._edgeObjs)},Lr.prototype.setPath=function(n,a){var i=this,u=arguments;return zt.reduce(n,function(o,l){return u.length>1?i.setEdge(o,l,a):i.setEdge(o,l),l}),this},Lr.prototype.setEdge=function(){var n,a,i,u,o=!1,l=arguments[0];typeof l=="object"&&l!==null&&"v"in l?(n=l.v,a=l.w,i=l.name,arguments.length===2&&(u=arguments[1],o=!0)):(n=l,a=arguments[1],i=arguments[3],arguments.length>2&&(u=arguments[2],o=!0)),n=""+n,a=""+a,zt.isUndefined(i)||(i=""+i);var c=Nc(this._isDirected,n,a,i);if(zt.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=u),this;if(!zt.isUndefined(i)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(a),this._edgeLabels[c]=o?u:this._defaultEdgeLabelFn(n,a,i);var h=K8(this._isDirected,n,a,i);return n=h.v,a=h.w,Object.freeze(h),this._edgeObjs[c]=h,MA(this._preds[a],n),MA(this._sucs[n],a),this._in[a][c]=h,this._out[n][c]=h,this._edgeCount++,this},Lr.prototype.edge=function(n,a,i){var u=arguments.length===1?db(this._isDirected,arguments[0]):Nc(this._isDirected,n,a,i);return this._edgeLabels[u]},Lr.prototype.hasEdge=function(n,a,i){var u=arguments.length===1?db(this._isDirected,arguments[0]):Nc(this._isDirected,n,a,i);return zt.has(this._edgeLabels,u)},Lr.prototype.removeEdge=function(n,a,i){var u=arguments.length===1?db(this._isDirected,arguments[0]):Nc(this._isDirected,n,a,i),o=this._edgeObjs[u];return o&&(n=o.v,a=o.w,delete this._edgeLabels[u],delete this._edgeObjs[u],RA(this._preds[a],n),RA(this._sucs[n],a),delete this._in[a][u],delete this._out[n][u],this._edgeCount--),this},Lr.prototype.inEdges=function(n,a){var i=this._in[n];if(i){var u=zt.values(i);return a?zt.filter(u,function(o){return o.v===a}):u}},Lr.prototype.outEdges=function(n,a){var i=this._out[n];if(i){var u=zt.values(i);return a?zt.filter(u,function(o){return o.w===a}):u}},Lr.prototype.nodeEdges=function(n,a){var i=this.inEdges(n,a);if(i)return i.concat(this.outEdges(n,a))};var DA={Graph:iE,version:"2.1.8"},Z8={write:function(n){var a={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:J8(n),edges:Q8(n)};return zt.isUndefined(n.graph())||(a.value=zt.clone(n.graph())),a},read:function(n){var a=new iE(n.options).setGraph(n.value);return zt.each(n.nodes,function(i){a.setNode(i.v,i.value),i.parent&&a.setParent(i.v,i.parent)}),zt.each(n.edges,function(i){a.setEdge({v:i.v,w:i.w,name:i.name},i.value)}),a}};function J8(n){return zt.map(n.nodes(),function(a){var i=n.node(a),u=n.parent(a),o={v:a};return zt.isUndefined(i)||(o.value=i),zt.isUndefined(u)||(o.parent=u),o})}function Q8(n){return zt.map(n.edges(),function(a){var i=n.edge(a),u={v:a.v,w:a.w};return zt.isUndefined(a.name)||(u.name=a.name),zt.isUndefined(i)||(u.value=i),u})}var q8=function(n){var a,i={},u=[];function o(l){zt.has(i,l)||(i[l]=!0,a.push(l),zt.each(n.successors(l),o),zt.each(n.predecessors(l),o))}return zt.each(n.nodes(),function(l){a=[],o(l),a.length&&u.push(a)}),u},M_=$o;function $o(){this._arr=[],this._keyIndices={}}$o.prototype.size=function(){return this._arr.length},$o.prototype.keys=function(){return this._arr.map(function(n){return n.key})},$o.prototype.has=function(n){return zt.has(this._keyIndices,n)},$o.prototype.priority=function(n){var a=this._keyIndices[n];if(a!==void 0)return this._arr[a].priority},$o.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},$o.prototype.add=function(n,a){var i=this._keyIndices;if(n=String(n),!zt.has(i,n)){var u=this._arr,o=u.length;return i[n]=o,u.push({key:n,priority:a}),this._decrease(o),!0}return!1},$o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},$o.prototype.decrease=function(n,a){var i=this._keyIndices[n];if(a>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+a);this._arr[i].priority=a,this._decrease(i)},$o.prototype._heapify=function(n){var a=this._arr,i=2*n,u=i+1,o=n;i<a.length&&(o=a[i].priority<a[o].priority?i:o,u<a.length&&(o=a[u].priority<a[o].priority?u:o),o!==n&&(this._swap(n,o),this._heapify(o)))},$o.prototype._decrease=function(n){for(var a,i=this._arr,u=i[n].priority;n!==0&&!(i[a=n>>1].priority<u);)this._swap(n,a),n=a},$o.prototype._swap=function(n,a){var i=this._arr,u=this._keyIndices,o=i[n],l=i[a];i[n]=l,i[a]=o,u[l.key]=n,u[o.key]=a};var R_=function(n,a,i,u){return function(o,l,c,h){var p,g,y={},S=new M_,x=function(T){var w=T.v!==p?T.v:T.w,N=y[w],R=c(T),I=g.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+R);I<N.distance&&(N.distance=I,N.predecessor=p,S.decrease(w,I))};for(o.nodes().forEach(function(T){var w=T===l?0:Number.POSITIVE_INFINITY;y[T]={distance:w},S.add(T,w)});S.size()>0&&(p=S.removeMin(),(g=y[p]).distance!==Number.POSITIVE_INFINITY);)h(p).forEach(x);return y}(n,String(a),i||e6,u||function(o){return n.outEdges(o)})},e6=zt.constant(1),t6=function(n,a,i){return zt.transform(n.nodes(),function(u,o){u[o]=R_(n,o,a,i)},{})},D_=function(n){var a=0,i=[],u={},o=[];function l(c){var h=u[c]={onStack:!0,lowlink:a,index:a++};if(i.push(c),n.successors(c).forEach(function(y){zt.has(u,y)?u[y].onStack&&(h.lowlink=Math.min(h.lowlink,u[y].index)):(l(y),h.lowlink=Math.min(h.lowlink,u[y].lowlink))}),h.lowlink===h.index){var p,g=[];do p=i.pop(),u[p].onStack=!1,g.push(p);while(c!==p);o.push(g)}}return n.nodes().forEach(function(c){zt.has(u,c)||l(c)}),o},r6=function(n){return zt.filter(D_(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})},n6=function(n,a,i){return function(u,o,l){var c={},h=u.nodes();return h.forEach(function(p){c[p]={},c[p][p]={distance:0},h.forEach(function(g){p!==g&&(c[p][g]={distance:Number.POSITIVE_INFINITY})}),l(p).forEach(function(g){var y=g.v===p?g.w:g.v,S=o(g);c[p][y]={distance:S,predecessor:p}})}),h.forEach(function(p){var g=c[p];h.forEach(function(y){var S=c[y];h.forEach(function(x){var T=S[p],w=g[x],N=S[x],R=T.distance+w.distance;R<N.distance&&(N.distance=R,N.predecessor=w.predecessor)})})}),c}(n,a||o6,i||function(u){return n.outEdges(u)})},o6=zt.constant(1),hb=I_;function I_(n){var a={},i={},u=[];if(zt.each(n.sinks(),function o(l){if(zt.has(i,l))throw new Lv;zt.has(a,l)||(i[l]=!0,a[l]=!0,zt.each(n.predecessors(l),o),delete i[l],u.push(l))}),zt.size(a)!==n.nodeCount())throw new Lv;return u}function Lv(){}I_.CycleException=Lv,Lv.prototype=new Error;var IA=function(n,a,i){zt.isArray(a)||(a=[a]);var u=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],l={};return zt.each(a,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);C_(n,c,i==="post",l,u,o)}),o};function C_(n,a,i,u,o,l){zt.has(u,a)||(u[a]=!0,i||l.push(a),zt.each(o(a),function(c){C_(n,c,i,u,o,l)}),i&&l.push(a))}var jv,i6={Graph:DA.Graph,json:Z8,alg:{components:q8,dijkstra:R_,dijkstraAll:t6,findCycles:r6,floydWarshall:n6,isAcyclic:function(n){try{hb(n)}catch(a){if(a instanceof hb.CycleException)return!1;throw a}return!0},postorder:function(n,a){return IA(n,a,"post")},preorder:function(n,a){return IA(n,a,"pre")},prim:function(n,a){var i,u=new iE,o={},l=new M_;function c(p){var g=p.v===i?p.w:p.v,y=l.priority(g);if(y!==void 0){var S=a(p);S<y&&(o[g]=i,l.decrease(g,S))}}if(n.nodeCount()===0)return u;zt.each(n.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),u.setNode(p)}),l.decrease(n.nodes()[0],0);for(var h=!1;l.size()>0;){if(i=l.removeMin(),zt.has(o,i))u.setEdge(i,o[i]);else{if(h)throw new Error("Input graph is not connected: "+n);h=!0}n.nodeEdges(i).forEach(c)}return u},tarjan:D_,topsort:hb},version:DA.version};try{jv=i6}catch{}jv||(jv=window.graphlib);var Hi=jv,a6=function(n){return r_(n,5)},Uc=function(n,a,i){if(!Oo(i))return!1;var u=typeof a;return!!(u=="number"?wa(i)&&Yv(a,i.length):u=="string"&&a in i)&&Vl(i[a],n)},L_=Object.prototype,s6=L_.hasOwnProperty,u6=ty(function(n,a){n=Object(n);var i=-1,u=a.length,o=u>2?a[2]:void 0;for(o&&Uc(a[0],a[1],o)&&(u=1);++i<u;)for(var l=a[i],c=mu(l),h=-1,p=c.length;++h<p;){var g=c[h],y=n[g];(y===void 0||Vl(y,L_[g])&&!s6.call(n,g))&&(n[g]=l[g])}return n}),l6=function(n){return function(a,i,u){var o=Object(a);if(!wa(a)){var l=Na(i);a=As(a),i=function(h){return l(o[h],h,o)}}var c=n(a,i,u);return c>-1?o[l?a[c]:c]:void 0}},f6=/^\s+|\s+$/g,c6=/^[-+]0x[0-9a-f]+$/i,d6=/^0b[01]+$/i,h6=/^0o[0-7]+$/i,p6=parseInt,v6=function(n){if(typeof n=="number")return n;if(pu(n))return NaN;if(Oo(n)){var a=typeof n.valueOf=="function"?n.valueOf():n;n=Oo(a)?a+"":a}if(typeof n!="string")return n===0?n:+n;n=n.replace(f6,"");var i=d6.test(n);return i||h6.test(n)?p6(n.slice(2),i?2:8):c6.test(n)?NaN:+n},xv=function(n){return n?(n=v6(n))===1/0||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:n===0?n:0},y6=function(n){var a=xv(n),i=a%1;return a==a?i?a-i:a:0},g6=Math.max,m6=l6(function(n,a,i){var u=n==null?0:n.length;if(!u)return-1;var o=i==null?0:y6(i);return o<0&&(o=g6(u+o,0)),__(n,Na(a),o)}),j_=function(n){return n!=null&&n.length?oE(n,1):[]},b6=function(n,a){return n==null?n:qb(n,n_(a),mu)},E6=function(n){var a=n==null?0:n.length;return a?n[a-1]:void 0},O6=function(n,a){var i={};return a=Na(a),eE(n,function(u,o,l){Vv(i,o,a(u,o,l))}),i},aE=function(n,a,i){for(var u=-1,o=n.length;++u<o;){var l=n[u],c=a(l);if(c!=null&&(h===void 0?c==c&&!pu(c):i(c,h)))var h=c,p=l}return p},S6=function(n,a){return n>a},x6=function(n){return n&&n.length?aE(n,bu,S6):void 0},Mb=function(n,a,i){(i!==void 0&&!Vl(n[a],i)||i===void 0&&!(a in n))&&Vv(n,a,i)},T6=Function.prototype,A6=Object.prototype,B_=T6.toString,P6=A6.hasOwnProperty,_6=B_.call(Object),w6=function(n){if(!li(n)||Ts(n)!="[object Object]")return!1;var a=Jv(n);if(a===null)return!0;var i=P6.call(a,"constructor")&&a.constructor;return typeof i=="function"&&i instanceof i&&B_.call(i)==_6},Rb=function(n,a){if((a!=="constructor"||typeof n[a]!="function")&&a!="__proto__")return n[a]},N6=function(n){return Xc(n,mu(n))},M6=function(n,a,i,u,o,l,c){var h=Rb(n,i),p=Rb(a,i),g=c.get(p);if(g)Mb(n,i,g);else{var y=l?l(h,p,i+"",n,a,c):void 0,S=y===void 0;if(S){var x=mn(p),T=!x&&du(p),w=!x&&!T&&$c(p);y=p,x||T||w?mn(h)?y=h:w_(h)?y=YP(h):T?(S=!1,y=WP(p,!0)):w?(S=!1,y=qP(p,!0)):y=[]:w6(p)||zl(p)?(y=h,zl(h)?y=N6(h):Oo(h)&&!Hc(h)||(y=t_(p))):S=!1}S&&(c.set(p,y),o(y,p,u,l,c),c.delete(p)),Mb(n,i,y)}},R6=function n(a,i,u,o,l){a!==i&&qb(i,function(c,h){if(l||(l=new Fl),Oo(c))M6(a,i,h,u,n,o,l);else{var p=o?o(Rb(a,h),c,h+"",a,i,l):void 0;p===void 0&&(p=c),Mb(a,h,p)}},mu)},D6=function(n){return ty(function(a,i){var u=-1,o=i.length,l=o>1?i[o-1]:void 0,c=o>2?i[2]:void 0;for(l=n.length>3&&typeof l=="function"?(o--,l):void 0,c&&Uc(i[0],i[1],c)&&(l=o<3?void 0:l,o=1),a=Object(a);++u<o;){var h=i[u];h&&n(a,h,u,l)}return a})}(function(n,a,i){R6(n,a,i)}),F_=function(n,a){return n<a},I6=function(n){return n&&n.length?aE(n,bu,F_):void 0},C6=function(n,a){return n&&n.length?aE(n,Na(a),F_):void 0},L6=function(){return fi.Date.now()},j6=function(n,a,i,u){if(!Oo(n))return n;for(var o=-1,l=(a=qv(a,n)).length,c=l-1,h=n;h!=null&&++o<l;){var p=Vc(a[o]),g=i;if(p==="__proto__"||p==="constructor"||p==="prototype")return n;if(o!=c){var y=h[p];(g=u?u(y,p,h):void 0)===void 0&&(g=Oo(y)?y:Yv(a[o+1])?[]:{})}Wv(h,p,g),h=h[p]}return n},B6=function(n,a,i){for(var u=-1,o=a.length,l={};++u<o;){var c=a[u],h=ey(n,c);i(h,c)&&j6(l,qv(c,n),h)}return l},F6=function(n,a){return B6(n,a,function(i,u){return p_(n,u)})},G6=function(n){return P_(A_(n,void 0,j_),n+"")}(function(n,a){return n==null?{}:F6(n,a)}),k6=Math.ceil,U6=Math.max,z6=function(n,a,i,u){for(var o=-1,l=U6(k6((a-n)/(i||1)),0),c=Array(l);l--;)c[u?l:++o]=n,n+=i;return c},H6=function(n){return function(a,i,u){return u&&typeof u!="number"&&Uc(a,i,u)&&(i=u=void 0),a=xv(a),i===void 0?(i=a,a=0):i=xv(i),u=u===void 0?a<i?1:-1:xv(u),z6(a,i,u,n)}}(),X6=function(n,a){var i=n.length;for(n.sort(a);i--;)n[i]=n[i].value;return n},$6=function(n,a){if(n!==a){var i=n!==void 0,u=n===null,o=n==n,l=pu(n),c=a!==void 0,h=a===null,p=a==a,g=pu(a);if(!h&&!g&&!l&&n>a||l&&c&&p&&!h&&!g||u&&c&&p||!i&&p||!o)return 1;if(!u&&!l&&!g&&n<a||g&&i&&o&&!u&&!l||h&&i&&o||!c&&o||!p)return-1}return 0},V6=function(n,a,i){for(var u=-1,o=n.criteria,l=a.criteria,c=o.length,h=i.length;++u<c;){var p=$6(o[u],l[u]);if(p)return u>=h?p:p*(i[u]=="desc"?-1:1)}return n.index-a.index},W6=function(n,a,i){a=a.length?kl(a,function(l){return mn(l)?function(c){return ey(c,l.length===1?l[0]:l)}:l}):[bu];var u=-1;a=kl(a,Kv(Na));var o=b_(n,function(l,c,h){return{criteria:kl(a,function(p){return p(l)}),index:++u,value:l}});return X6(o,function(l,c){return V6(l,c,i)})},Y6=ty(function(n,a){if(n==null)return[];var i=a.length;return i>1&&Uc(n,a[0],a[1])?a=[]:i>2&&Uc(a[0],a[1],a[2])&&(a=[a[0]]),W6(n,oE(a,1),[])}),K6=0,Z6=function(n){var a=++K6;return d_(n)+a},J6=function(n,a,i){for(var u=-1,o=n.length,l=a.length,c={};++u<o;){var h=u<l?a[u]:void 0;i(c,n[u],h)}return c},Bv,Q6=function(n,a){return J6(n||[],a||[],Wv)};try{Bv={cloneDeep:a6,constant:Qb,defaults:u6,each:i_,filter:y_,find:m6,flatten:j_,forEach:o_,forIn:b6,has:g_,isUndefined:m_,last:E6,map:E_,mapValues:O6,max:x6,merge:D6,min:I6,minBy:C6,now:L6,pick:G6,range:H6,reduce:O_,sortBy:Y6,uniqueId:Z6,values:N_,zipObject:Q6}}catch{}Bv||(Bv=window._);var q6=Bv;Hi.Graph;q6.constant(1);Hi.Graph;Hi.Graph;Hi.alg.preorder;Hi.alg.postorder;Hi.Graph;Hi.Graph;Hi.Graph;Hi.Graph;Hi.Graph;function zc(n){return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},zc(n)}function ek(n,a){if(zc(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var u=i.call(n,a||"default");if(zc(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function tk(n){var a=ek(n,"string");return zc(a)==="symbol"?a:String(a)}function jt(n,a,i){return a=tk(a),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}var rk=typeof wc=="object"&&wc&&wc.Object===Object&&wc,G_=rk,nk=G_,ok=typeof self=="object"&&self&&self.Object===Object&&self,ik=nk||ok||Function("return this")(),ak=ik,sk=ak,uk=sk.Symbol,k_=uk,CA=k_;CA&&CA.toStringTag;var LA=k_;LA&&LA.toStringTag;var Fv={},lk={get exports(){return Fv},set exports(n){Fv=n}};(function(n,a){var i=G_,u=a&&!a.nodeType&&a,o=u&&!0&&n&&!n.nodeType&&n,l=o&&o.exports===u,c=l&&i.process,h=function(){try{var p=o&&o.require&&o.require("util").types;return p||c&&c.binding&&c.binding("util")}catch{}}();n.exports=h})(lk,Fv);var jA=Fv;jA&&jA.isTypedArray;var Db={},fk={get exports(){return Db},set exports(n){Db=n}},Ib={},ck={get exports(){return Ib},set exports(n){Ib=n}};(function(n){function a(i){return n.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n.exports.__esModule=!0,n.exports.default=n.exports,a(i)}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports})(ck);(function(n){var a=Ib.default;function i(){n.exports=i=function(){return u},n.exports.__esModule=!0,n.exports.default=n.exports;var u={},o=Object.prototype,l=o.hasOwnProperty,c=Object.defineProperty||function(V,Z,le){V[Z]=le.value},h=typeof Symbol=="function"?Symbol:{},p=h.iterator||"@@iterator",g=h.asyncIterator||"@@asyncIterator",y=h.toStringTag||"@@toStringTag";function S(V,Z,le){return Object.defineProperty(V,Z,{value:le,enumerable:!0,configurable:!0,writable:!0}),V[Z]}try{S({},"")}catch{S=function(le,Ae,Re){return le[Ae]=Re}}function x(V,Z,le,Ae){var Re=Z&&Z.prototype instanceof N?Z:N,_e=Object.create(Re.prototype),Ke=new D(Ae||[]);return c(_e,"_invoke",{value:xe(V,le,Ke)}),_e}function T(V,Z,le){try{return{type:"normal",arg:V.call(Z,le)}}catch(Ae){return{type:"throw",arg:Ae}}}u.wrap=x;var w={};function N(){}function R(){}function I(){}var $={};S($,p,function(){return this});var W=Object.getPrototypeOf,he=W&&W(W(k([])));he&&he!==o&&l.call(he,p)&&($=he);var ge=I.prototype=N.prototype=Object.create($);function ye(V){["next","throw","return"].forEach(function(Z){S(V,Z,function(le){return this._invoke(Z,le)})})}function ce(V,Z){function le(Re,_e,Ke,gt){var Nt=T(V[Re],V,_e);if(Nt.type!=="throw"){var Vt=Nt.arg,Ct=Vt.value;return Ct&&a(Ct)=="object"&&l.call(Ct,"__await")?Z.resolve(Ct.__await).then(function(Ge){le("next",Ge,Ke,gt)},function(Ge){le("throw",Ge,Ke,gt)}):Z.resolve(Ct).then(function(Ge){Vt.value=Ge,Ke(Vt)},function(Ge){return le("throw",Ge,Ke,gt)})}gt(Nt.arg)}var Ae;c(this,"_invoke",{value:function(_e,Ke){function gt(){return new Z(function(Nt,Vt){le(_e,Ke,Nt,Vt)})}return Ae=Ae?Ae.then(gt,gt):gt()}})}function xe(V,Z,le){var Ae="suspendedStart";return function(Re,_e){if(Ae==="executing")throw new Error("Generator is already running");if(Ae==="completed"){if(Re==="throw")throw _e;return te()}for(le.method=Re,le.arg=_e;;){var Ke=le.delegate;if(Ke){var gt=L(Ke,le);if(gt){if(gt===w)continue;return gt}}if(le.method==="next")le.sent=le._sent=le.arg;else if(le.method==="throw"){if(Ae==="suspendedStart")throw Ae="completed",le.arg;le.dispatchException(le.arg)}else le.method==="return"&&le.abrupt("return",le.arg);Ae="executing";var Nt=T(V,Z,le);if(Nt.type==="normal"){if(Ae=le.done?"completed":"suspendedYield",Nt.arg===w)continue;return{value:Nt.arg,done:le.done}}Nt.type==="throw"&&(Ae="completed",le.method="throw",le.arg=Nt.arg)}}}function L(V,Z){var le=Z.method,Ae=V.iterator[le];if(Ae===void 0)return Z.delegate=null,le==="throw"&&V.iterator.return&&(Z.method="return",Z.arg=void 0,L(V,Z),Z.method==="throw")||le!=="return"&&(Z.method="throw",Z.arg=new TypeError("The iterator does not provide a '"+le+"' method")),w;var Re=T(Ae,V.iterator,Z.arg);if(Re.type==="throw")return Z.method="throw",Z.arg=Re.arg,Z.delegate=null,w;var _e=Re.arg;return _e?_e.done?(Z[V.resultName]=_e.value,Z.next=V.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=void 0),Z.delegate=null,w):_e:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,w)}function Q(V){var Z={tryLoc:V[0]};1 in V&&(Z.catchLoc=V[1]),2 in V&&(Z.finallyLoc=V[2],Z.afterLoc=V[3]),this.tryEntries.push(Z)}function U(V){var Z=V.completion||{};Z.type="normal",delete Z.arg,V.completion=Z}function D(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(Q,this),this.reset(!0)}function k(V){if(V){var Z=V[p];if(Z)return Z.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var le=-1,Ae=function Re(){for(;++le<V.length;)if(l.call(V,le))return Re.value=V[le],Re.done=!1,Re;return Re.value=void 0,Re.done=!0,Re};return Ae.next=Ae}}return{next:te}}function te(){return{value:void 0,done:!0}}return R.prototype=I,c(ge,"constructor",{value:I,configurable:!0}),c(I,"constructor",{value:R,configurable:!0}),R.displayName=S(I,y,"GeneratorFunction"),u.isGeneratorFunction=function(V){var Z=typeof V=="function"&&V.constructor;return!!Z&&(Z===R||(Z.displayName||Z.name)==="GeneratorFunction")},u.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,I):(V.__proto__=I,S(V,y,"GeneratorFunction")),V.prototype=Object.create(ge),V},u.awrap=function(V){return{__await:V}},ye(ce.prototype),S(ce.prototype,g,function(){return this}),u.AsyncIterator=ce,u.async=function(V,Z,le,Ae,Re){Re===void 0&&(Re=Promise);var _e=new ce(x(V,Z,le,Ae),Re);return u.isGeneratorFunction(Z)?_e:_e.next().then(function(Ke){return Ke.done?Ke.value:_e.next()})},ye(ge),S(ge,y,"Generator"),S(ge,p,function(){return this}),S(ge,"toString",function(){return"[object Generator]"}),u.keys=function(V){var Z=Object(V),le=[];for(var Ae in Z)le.push(Ae);return le.reverse(),function Re(){for(;le.length;){var _e=le.pop();if(_e in Z)return Re.value=_e,Re.done=!1,Re}return Re.done=!0,Re}},u.values=k,D.prototype={constructor:D,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(U),!Z)for(var le in this)le.charAt(0)==="t"&&l.call(this,le)&&!isNaN(+le.slice(1))&&(this[le]=void 0)},stop:function(){this.done=!0;var Z=this.tryEntries[0].completion;if(Z.type==="throw")throw Z.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var le=this;function Ae(Vt,Ct){return Ke.type="throw",Ke.arg=Z,le.next=Vt,Ct&&(le.method="next",le.arg=void 0),!!Ct}for(var Re=this.tryEntries.length-1;Re>=0;--Re){var _e=this.tryEntries[Re],Ke=_e.completion;if(_e.tryLoc==="root")return Ae("end");if(_e.tryLoc<=this.prev){var gt=l.call(_e,"catchLoc"),Nt=l.call(_e,"finallyLoc");if(gt&&Nt){if(this.prev<_e.catchLoc)return Ae(_e.catchLoc,!0);if(this.prev<_e.finallyLoc)return Ae(_e.finallyLoc)}else if(gt){if(this.prev<_e.catchLoc)return Ae(_e.catchLoc,!0)}else{if(!Nt)throw new Error("try statement without catch or finally");if(this.prev<_e.finallyLoc)return Ae(_e.finallyLoc)}}}},abrupt:function(Z,le){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var Re=this.tryEntries[Ae];if(Re.tryLoc<=this.prev&&l.call(Re,"finallyLoc")&&this.prev<Re.finallyLoc){var _e=Re;break}}_e&&(Z==="break"||Z==="continue")&&_e.tryLoc<=le&&le<=_e.finallyLoc&&(_e=null);var Ke=_e?_e.completion:{};return Ke.type=Z,Ke.arg=le,_e?(this.method="next",this.next=_e.finallyLoc,w):this.complete(Ke)},complete:function(Z,le){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&le&&(this.next=le),w},finish:function(Z){for(var le=this.tryEntries.length-1;le>=0;--le){var Ae=this.tryEntries[le];if(Ae.finallyLoc===Z)return this.complete(Ae.completion,Ae.afterLoc),U(Ae),w}},catch:function(Z){for(var le=this.tryEntries.length-1;le>=0;--le){var Ae=this.tryEntries[le];if(Ae.tryLoc===Z){var Re=Ae.completion;if(Re.type==="throw"){var _e=Re.arg;U(Ae)}return _e}}throw new Error("illegal catch attempt")},delegateYield:function(Z,le,Ae){return this.delegate={iterator:k(Z),resultName:le,nextLoc:Ae},this.method==="next"&&(this.arg=void 0),w}},u}n.exports=i,n.exports.__esModule=!0,n.exports.default=n.exports})(fk);var pb=Db();try{regeneratorRuntime=pb}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=pb:Function("r","regeneratorRuntime = r")(pb)}var It;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(It||(It={}));var BA;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(BA||(BA={}));var FA;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(FA||(FA={}));var GA;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(GA||(GA={}));var kA;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(kA||(kA={}));var UA={},dk={get exports(){return UA},set exports(n){UA=n}};(function(n,a){(function(i,u){n.exports=u()})(wc,function(){var i=function(_){return _ instanceof Uint8Array||_ instanceof Uint16Array||_ instanceof Uint32Array||_ instanceof Int8Array||_ instanceof Int16Array||_ instanceof Int32Array||_ instanceof Float32Array||_ instanceof Float64Array||_ instanceof Uint8ClampedArray},u=function(_,G){for(var q=Object.keys(G),Ce=0;Ce<q.length;++Ce)_[q[Ce]]=G[q[Ce]];return _},o=`
`;function l(_){return typeof atob<"u"?atob(_):"base64:"+_}function c(_){var G=new Error("(regl) "+_);throw console.error(G),G}function h(_,G){_||c(G)}function p(_){return _?": "+_:""}function g(_,G,q){_ in G||c("unknown parameter ("+_+")"+p(q)+". possible values: "+Object.keys(G).join())}function y(_,G){i(_)||c("invalid parameter type"+p(G)+". must be a typed array")}function S(_,G){switch(G){case"number":return typeof _=="number";case"object":return typeof _=="object";case"string":return typeof _=="string";case"boolean":return typeof _=="boolean";case"function":return typeof _=="function";case"undefined":return typeof _>"u";case"symbol":return typeof _=="symbol"}}function x(_,G,q){S(_,G)||c("invalid parameter type"+p(q)+". expected "+G+", got "+typeof _)}function T(_,G){_>=0&&(_|0)===_||c("invalid parameter type, ("+_+")"+p(G)+". must be a nonnegative integer")}function w(_,G,q){G.indexOf(_)<0&&c("invalid value"+p(q)+". must be one of: "+G)}var N=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function R(_){Object.keys(_).forEach(function(G){N.indexOf(G)<0&&c('invalid regl constructor argument "'+G+'". must be one of '+N)})}function I(_,G){for(_=_+"";_.length<G;)_=" "+_;return _}function $(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function W(_,G){this.number=_,this.line=G,this.errors=[]}function he(_,G,q){this.file=_,this.line=G,this.message=q}function ge(){var _=new Error,G=(_.stack||_).toString(),q=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(G);if(q)return q[1];var Ce=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(G);return Ce?Ce[1]:"unknown"}function ye(){var _=new Error,G=(_.stack||_).toString(),q=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(G);if(q)return q[1];var Ce=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(G);return Ce?Ce[1]:"unknown"}function ce(_,G){var q=_.split(`
`),Ce=1,Je=0,De={unknown:new $,0:new $};De.unknown.name=De[0].name=G||ge(),De.unknown.lines.push(new W(0,""));for(var ke=0;ke<q.length;++ke){var at=q[ke],lt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(at);if(lt)switch(lt[1]){case"line":var vt=/(\d+)(\s+\d+)?/.exec(lt[2]);vt&&(Ce=vt[1]|0,vt[2]&&(Je=vt[2]|0,Je in De||(De[Je]=new $)));break;case"define":var ft=/SHADER_NAME(_B64)?\s+(.*)$/.exec(lt[2]);ft&&(De[Je].name=ft[1]?l(ft[2]):ft[2]);break}De[Je].lines.push(new W(Ce++,at))}return Object.keys(De).forEach(function(it){var St=De[it];St.lines.forEach(function(st){St.index[st.number]=st})}),De}function xe(_){var G=[];return _.split(`
`).forEach(function(q){if(!(q.length<5)){var Ce=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(q);Ce?G.push(new he(Ce[1]|0,Ce[2]|0,Ce[3].trim())):q.length>0&&G.push(new he("unknown",0,q))}}),G}function L(_,G){G.forEach(function(q){var Ce=_[q.file];if(Ce){var Je=Ce.index[q.line];if(Je){Je.errors.push(q),Ce.hasErrors=!0;return}}_.unknown.hasErrors=!0,_.unknown.lines[0].errors.push(q)})}function Q(_,G,q,Ce,Je){if(!_.getShaderParameter(G,_.COMPILE_STATUS)){var De=_.getShaderInfoLog(G),ke=Ce===_.FRAGMENT_SHADER?"fragment":"vertex";le(q,"string",ke+" shader source must be a string",Je);var at=ce(q,Je),lt=xe(De);L(at,lt),Object.keys(at).forEach(function(vt){var ft=at[vt];if(!ft.hasErrors)return;var it=[""],St=[""];function st(Ot,Ee){it.push(Ot),St.push(Ee||"")}st("file number "+vt+": "+ft.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ft.lines.forEach(function(Ot){if(Ot.errors.length>0){st(I(Ot.number,4)+"|  ","background-color:yellow; font-weight:bold"),st(Ot.line+o,"color:red; background-color:yellow; font-weight:bold");var Ee=0;Ot.errors.forEach(function(Me){var yt=Me.message,xt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(yt);if(xt){var nt=xt[1];switch(yt=xt[2],nt){case"assign":nt="=";break}Ee=Math.max(Ot.line.indexOf(nt,Ee),0)}else Ee=0;st(I("| ",6)),st(I("^^^",Ee+3)+o,"font-weight:bold"),st(I("| ",6)),st(yt+o,"font-weight:bold")}),st(I("| ",6)+o)}else st(I(Ot.number,4)+"|  "),st(Ot.line+o,"color:red")}),typeof document<"u"&&!window.chrome?(St[0]=it.join("%c"),console.log.apply(console,St)):console.log(it.join(""))}),h.raise("Error compiling "+ke+" shader, "+at[0].name)}}function U(_,G,q,Ce,Je){if(!_.getProgramParameter(G,_.LINK_STATUS)){var De=_.getProgramInfoLog(G),ke=ce(q,Je),at=ce(Ce,Je),lt='Error linking program with vertex shader, "'+at[0].name+'", and fragment shader "'+ke[0].name+'"';typeof document<"u"?console.log("%c"+lt+o+"%c"+De,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(lt+o+De),h.raise(lt)}}function D(_){_._commandRef=ge()}function k(_,G,q,Ce){D(_);function Je(lt){return lt?Ce.id(lt):0}_._fragId=Je(_.static.frag),_._vertId=Je(_.static.vert);function De(lt,vt){Object.keys(vt).forEach(function(ft){lt[Ce.id(ft)]=!0})}var ke=_._uniformSet={};De(ke,G.static),De(ke,G.dynamic);var at=_._attributeSet={};De(at,q.static),De(at,q.dynamic),_._hasCount="count"in _.static||"count"in _.dynamic||"elements"in _.static||"elements"in _.dynamic}function te(_,G){var q=ye();c(_+" in command "+(G||ge())+(q==="unknown"?"":" called from "+q))}function V(_,G,q){_||te(G,q||ge())}function Z(_,G,q,Ce){_ in G||te("unknown parameter ("+_+")"+p(q)+". possible values: "+Object.keys(G).join(),Ce||ge())}function le(_,G,q,Ce){S(_,G)||te("invalid parameter type"+p(q)+". expected "+G+", got "+typeof _,Ce||ge())}function Ae(_){_()}function Re(_,G,q){_.texture?w(_.texture._texture.internalformat,G,"unsupported texture format for attachment"):w(_.renderbuffer._renderbuffer.format,q,"unsupported renderbuffer format for attachment")}var _e=33071,Ke=9728,gt=9984,Nt=9985,Vt=9986,Ct=9987,Ge=5120,bt=5121,Ut=5122,ee=5123,se=5124,be=5125,Ue=5126,tt=32819,He=32820,Lt=33635,nr=34042,tr=36193,Jt={};Jt[Ge]=Jt[bt]=1,Jt[Ut]=Jt[ee]=Jt[tr]=Jt[Lt]=Jt[tt]=Jt[He]=2,Jt[se]=Jt[be]=Jt[Ue]=Jt[nr]=4;function rt(_,G){return _===He||_===tt||_===Lt?2:_===nr?4:Jt[_]*G}function Er(_){return!(_&_-1)&&!!_}function ur(_,G,q){var Ce,Je=G.width,De=G.height,ke=G.channels;h(Je>0&&Je<=q.maxTextureSize&&De>0&&De<=q.maxTextureSize,"invalid texture shape"),(_.wrapS!==_e||_.wrapT!==_e)&&h(Er(Je)&&Er(De),"incompatible wrap mode for texture, both width and height must be power of 2"),G.mipmask===1?Je!==1&&De!==1&&h(_.minFilter!==gt&&_.minFilter!==Vt&&_.minFilter!==Nt&&_.minFilter!==Ct,"min filter requires mipmap"):(h(Er(Je)&&Er(De),"texture must be a square power of 2 to support mipmapping"),h(G.mipmask===(Je<<1)-1,"missing or incomplete mipmap data")),G.type===Ue&&(q.extensions.indexOf("oes_texture_float_linear")<0&&h(_.minFilter===Ke&&_.magFilter===Ke,"filter not supported, must enable oes_texture_float_linear"),h(!_.genMipmaps,"mipmap generation not supported with float textures"));var at=G.images;for(Ce=0;Ce<16;++Ce)if(at[Ce]){var lt=Je>>Ce,vt=De>>Ce;h(G.mipmask&1<<Ce,"missing mipmap data");var ft=at[Ce];if(h(ft.width===lt&&ft.height===vt,"invalid shape for mip images"),h(ft.format===G.format&&ft.internalformat===G.internalformat&&ft.type===G.type,"incompatible type for mip image"),!ft.compressed)if(ft.data){var it=Math.ceil(rt(ft.type,ke)*lt/ft.unpackAlignment)*ft.unpackAlignment;h(ft.data.byteLength===it*vt,"invalid data for image, buffer size is inconsistent with image format")}else ft.element||ft.copy}else _.genMipmaps||h((G.mipmask&1<<Ce)===0,"extra mipmap data");G.compressed&&h(!_.genMipmaps,"mipmap generation for compressed images not supported")}function Xt(_,G,q,Ce){var Je=_.width,De=_.height,ke=_.channels;h(Je>0&&Je<=Ce.maxTextureSize&&De>0&&De<=Ce.maxTextureSize,"invalid texture shape"),h(Je===De,"cube map must be square"),h(G.wrapS===_e&&G.wrapT===_e,"wrap mode not supported by cube map");for(var at=0;at<q.length;++at){var lt=q[at];h(lt.width===Je&&lt.height===De,"inconsistent cube map face shape"),G.genMipmaps&&(h(!lt.compressed,"can not generate mipmap for compressed textures"),h(lt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var vt=lt.images,ft=0;ft<16;++ft){var it=vt[ft];if(it){var St=Je>>ft,st=De>>ft;h(lt.mipmask&1<<ft,"missing mipmap data"),h(it.width===St&&it.height===st,"invalid shape for mip images"),h(it.format===_.format&&it.internalformat===_.internalformat&&it.type===_.type,"incompatible type for mip image"),it.compressed||(it.data?h(it.data.byteLength===St*st*Math.max(rt(it.type,ke),it.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):it.element||it.copy)}}}}var j=u(h,{optional:Ae,raise:c,commandRaise:te,command:V,parameter:g,commandParameter:Z,constructor:R,type:x,commandType:le,isTypedArray:y,nni:T,oneOf:w,shaderError:Q,linkError:U,callSite:ye,saveCommandRef:D,saveDrawInfo:k,framebufferFormat:Re,guessCommand:ge,texture2D:ur,textureCube:Xt}),Qr=0,Rr=0,kr=5,Be=6;function Xr(_,G){this.id=Qr++,this.type=_,this.data=G}function zr(_){return _.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Dr(_){if(_.length===0)return[];var G=_.charAt(0),q=_.charAt(_.length-1);if(_.length>1&&G===q&&(G==='"'||G==="'"))return['"'+zr(_.substr(1,_.length-2))+'"'];var Ce=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(_);if(Ce)return Dr(_.substr(0,Ce.index)).concat(Dr(Ce[1])).concat(Dr(_.substr(Ce.index+Ce[0].length)));var Je=_.split(".");if(Je.length===1)return['"'+zr(_)+'"'];for(var De=[],ke=0;ke<Je.length;++ke)De=De.concat(Dr(Je[ke]));return De}function On(_){return"["+Dr(_).join("][")+"]"}function eo(_,G){return new Xr(_,On(G+""))}function Dn(_){return typeof _=="function"&&!_._reglType||_ instanceof Xr}function to(_,G){if(typeof _=="function")return new Xr(Rr,_);if(typeof _=="number"||typeof _=="boolean")return new Xr(kr,_);if(Array.isArray(_))return new Xr(Be,_.map((q,Ce)=>to(q,G+"["+Ce+"]")));if(_ instanceof Xr)return _;j(!1,"invalid option type in uniform "+G)}var Qt={DynamicVariable:Xr,define:eo,isDynamic:Dn,unbox:to,accessor:On},$r={next:typeof requestAnimationFrame=="function"?function(_){return requestAnimationFrame(_)}:function(_){return setTimeout(_,16)},cancel:typeof cancelAnimationFrame=="function"?function(_){return cancelAnimationFrame(_)}:clearTimeout},In=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Mt(){var _={"":0},G=[""];return{id:function(q){var Ce=_[q];return Ce||(Ce=_[q]=G.length,G.push(q),Ce)},str:function(q){return G[q]}}}function or(_,G,q){var Ce=document.createElement("canvas");u(Ce.style,{border:0,margin:0,padding:0,top:0,left:0}),_.appendChild(Ce),_===document.body&&(Ce.style.position="absolute",u(_.style,{margin:0,padding:0}));function Je(){var at=window.innerWidth,lt=window.innerHeight;if(_!==document.body){var vt=_.getBoundingClientRect();at=vt.right-vt.left,lt=vt.bottom-vt.top}Ce.width=q*at,Ce.height=q*lt,u(Ce.style,{width:at+"px",height:lt+"px"})}var De;_!==document.body&&typeof ResizeObserver=="function"?(De=new ResizeObserver(function(){setTimeout(Je)}),De.observe(_)):window.addEventListener("resize",Je,!1);function ke(){De?De.disconnect():window.removeEventListener("resize",Je),_.removeChild(Ce)}return Je(),{canvas:Ce,onDestroy:ke}}function vr(_,G){function q(Ce){try{return _.getContext(Ce,G)}catch{return null}}return q("webgl")||q("experimental-webgl")||q("webgl-experimental")}function fr(_){return typeof _.nodeName=="string"&&typeof _.appendChild=="function"&&typeof _.getBoundingClientRect=="function"}function _r(_){return typeof _.drawArrays=="function"||typeof _.drawElements=="function"}function re(_){return typeof _=="string"?_.split():(j(Array.isArray(_),"invalid extension array"),_)}function Oe(_){return typeof _=="string"?(j(typeof document<"u","not supported outside of DOM"),document.querySelector(_)):_}function we(_){var G=_||{},q,Ce,Je,De,ke={},at=[],lt=[],vt=typeof window>"u"?1:window.devicePixelRatio,ft=!1,it=function(Ot){Ot&&j.raise(Ot)},St=function(){};if(typeof G=="string"?(j(typeof document<"u","selector queries only supported in DOM enviroments"),q=document.querySelector(G),j(q,"invalid query string for element")):typeof G=="object"?fr(G)?q=G:_r(G)?(De=G,Je=De.canvas):(j.constructor(G),"gl"in G?De=G.gl:"canvas"in G?Je=Oe(G.canvas):"container"in G&&(Ce=Oe(G.container)),"attributes"in G&&(ke=G.attributes,j.type(ke,"object","invalid context attributes")),"extensions"in G&&(at=re(G.extensions)),"optionalExtensions"in G&&(lt=re(G.optionalExtensions)),"onDone"in G&&(j.type(G.onDone,"function","invalid or missing onDone callback"),it=G.onDone),"profile"in G&&(ft=!!G.profile),"pixelRatio"in G&&(vt=+G.pixelRatio,j(vt>0,"invalid pixel ratio"))):j.raise("invalid arguments to regl"),q&&(q.nodeName.toLowerCase()==="canvas"?Je=q:Ce=q),!De){if(!Je){j(typeof document<"u","must manually specify webgl context outside of DOM environments");var st=or(Ce||document.body,it,vt);if(!st)return null;Je=st.canvas,St=st.onDestroy}ke.premultipliedAlpha===void 0&&(ke.premultipliedAlpha=!0),De=vr(Je,ke)}return De?{gl:De,canvas:Je,container:Ce,extensions:at,optionalExtensions:lt,pixelRatio:vt,profile:ft,onDone:it,onDestroy:St}:(St(),it("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ne(_,G){var q={};function Ce(ke){j.type(ke,"string","extension name must be string");var at=ke.toLowerCase(),lt;try{lt=q[at]=_.getExtension(at)}catch{}return!!lt}for(var Je=0;Je<G.extensions.length;++Je){var De=G.extensions[Je];if(!Ce(De))return G.onDestroy(),G.onDone('"'+De+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return G.optionalExtensions.forEach(Ce),{extensions:q,restore:function(){Object.keys(q).forEach(function(ke){if(q[ke]&&!Ce(ke))throw new Error("(regl): error restoring extension "+ke)})}}}function ht(_,G){for(var q=Array(_),Ce=0;Ce<_;++Ce)q[Ce]=G(Ce);return q}var _t=5120,Kt=5121,Br=5122,Cn=5123,Ln=5124,Xi=5125,No=5126;function Eu(_){for(var G=16;G<=1<<28;G*=16)if(_<=G)return G;return 0}function ro(_){var G,q;return G=(_>65535)<<4,_>>>=G,q=(_>255)<<3,_>>>=q,G|=q,q=(_>15)<<2,_>>>=q,G|=q,q=(_>3)<<1,_>>>=q,G|=q,G|_>>1}function Ps(){var _=ht(8,function(){return[]});function G(De){var ke=Eu(De),at=_[ro(ke)>>2];return at.length>0?at.pop():new ArrayBuffer(ke)}function q(De){_[ro(De.byteLength)>>2].push(De)}function Ce(De,ke){var at=null;switch(De){case _t:at=new Int8Array(G(ke),0,ke);break;case Kt:at=new Uint8Array(G(ke),0,ke);break;case Br:at=new Int16Array(G(2*ke),0,ke);break;case Cn:at=new Uint16Array(G(2*ke),0,ke);break;case Ln:at=new Int32Array(G(4*ke),0,ke);break;case Xi:at=new Uint32Array(G(4*ke),0,ke);break;case No:at=new Float32Array(G(4*ke),0,ke);break;default:return null}return at.length!==ke?at.subarray(0,ke):at}function Je(De){q(De.buffer)}return{alloc:G,free:q,allocType:Ce,freeType:Je}}var jr=Ps();jr.zero=Ps();var ci=3408,$i=3410,Yo=3411,Vi=3412,di=3413,hi=3414,Ma=3415,Wl=33901,Ra=33902,Da=3379,Ou=3386,Wt=34921,Su=36347,Yl=36348,Mo=35661,xu=35660,Kr=34930,no=36349,Tu=34076,Kl=34024,Zl=7936,Jl=7937,Ia=7938,Au=35724,Ko=34047,_s=36063,ws=34852,Wi=3553,Pu=34067,Ca=34069,Ql=33984,Zr=6408,_u=5126,ql=5121,wu=36160,Nu=36053,ef=36064,Mu=16384,tf=function(_,G){var q=1;G.ext_texture_filter_anisotropic&&(q=_.getParameter(Ko));var Ce=1,Je=1;G.webgl_draw_buffers&&(Ce=_.getParameter(ws),Je=_.getParameter(_s));var De=!!G.oes_texture_float;if(De){var ke=_.createTexture();_.bindTexture(Wi,ke),_.texImage2D(Wi,0,Zr,1,1,0,Zr,_u,null);var at=_.createFramebuffer();if(_.bindFramebuffer(wu,at),_.framebufferTexture2D(wu,ef,Wi,ke,0),_.bindTexture(Wi,null),_.checkFramebufferStatus(wu)!==Nu)De=!1;else{_.viewport(0,0,1,1),_.clearColor(1,0,0,1),_.clear(Mu);var lt=jr.allocType(_u,4);_.readPixels(0,0,1,1,Zr,_u,lt),_.getError()?De=!1:(_.deleteFramebuffer(at),_.deleteTexture(ke),De=lt[0]===1),jr.freeType(lt)}}var vt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ft=!0;if(!vt){var it=_.createTexture(),St=jr.allocType(ql,36);_.activeTexture(Ql),_.bindTexture(Pu,it),_.texImage2D(Ca,0,Zr,3,3,0,Zr,ql,St),jr.freeType(St),_.bindTexture(Pu,null),_.deleteTexture(it),ft=!_.getError()}return{colorBits:[_.getParameter($i),_.getParameter(Yo),_.getParameter(Vi),_.getParameter(di)],depthBits:_.getParameter(hi),stencilBits:_.getParameter(Ma),subpixelBits:_.getParameter(ci),extensions:Object.keys(G).filter(function(st){return!!G[st]}),maxAnisotropic:q,maxDrawbuffers:Ce,maxColorAttachments:Je,pointSizeDims:_.getParameter(Wl),lineWidthDims:_.getParameter(Ra),maxViewportDims:_.getParameter(Ou),maxCombinedTextureUnits:_.getParameter(Mo),maxCubeMapSize:_.getParameter(Tu),maxRenderbufferSize:_.getParameter(Kl),maxTextureUnits:_.getParameter(Kr),maxTextureSize:_.getParameter(Da),maxAttributes:_.getParameter(Wt),maxVertexUniforms:_.getParameter(Su),maxVertexTextureUnits:_.getParameter(xu),maxVaryingVectors:_.getParameter(Yl),maxFragmentUniforms:_.getParameter(no),glsl:_.getParameter(Au),renderer:_.getParameter(Jl),vendor:_.getParameter(Zl),version:_.getParameter(Ia),readFloat:De,npotTextureCube:ft}};function oo(_){return!!_&&typeof _=="object"&&Array.isArray(_.shape)&&Array.isArray(_.stride)&&typeof _.offset=="number"&&_.shape.length===_.stride.length&&(Array.isArray(_.data)||i(_.data))}var un=function(_){return Object.keys(_).map(function(G){return _[G]})},La={shape:nf,flatten:pi};function rf(_,G,q){for(var Ce=0;Ce<G;++Ce)q[Ce]=_[Ce]}function Ns(_,G,q,Ce){for(var Je=0,De=0;De<G;++De)for(var ke=_[De],at=0;at<q;++at)Ce[Je++]=ke[at]}function co(_,G,q,Ce,Je,De){for(var ke=De,at=0;at<G;++at)for(var lt=_[at],vt=0;vt<q;++vt)for(var ft=lt[vt],it=0;it<Ce;++it)Je[ke++]=ft[it]}function Ru(_,G,q,Ce,Je){for(var De=1,ke=q+1;ke<G.length;++ke)De*=G[ke];var at=G[q];if(G.length-q===4){var lt=G[q+1],vt=G[q+2],ft=G[q+3];for(ke=0;ke<at;++ke)co(_[ke],lt,vt,ft,Ce,Je),Je+=De}else for(ke=0;ke<at;++ke)Ru(_[ke],G,q+1,Ce,Je),Je+=De}function pi(_,G,q,Ce){var Je=1;if(G.length)for(var De=0;De<G.length;++De)Je*=G[De];else Je=0;var ke=Ce||jr.allocType(q,Je);switch(G.length){case 0:break;case 1:rf(_,G[0],ke);break;case 2:Ns(_,G[0],G[1],ke);break;case 3:co(_,G[0],G[1],G[2],ke,0);break;default:Ru(_,G,0,ke,0)}return ke}function nf(_){for(var G=[],q=_;q.length;q=q[0])G.push(q.length);return G}var Zo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},of=5120,Ms=5122,Du=5124,af=5121,Rs=5123,Iu=5125,Cu=5126,Lu=5126,Ro={int8:of,int16:Ms,int32:Du,uint8:af,uint16:Rs,uint32:Iu,float:Cu,float32:Lu},sf=35048,ju=35040,ja={dynamic:sf,stream:ju,static:35044},Ba=La.flatten,Ds=La.shape,Bu=35044,uf=35040,Do=5121,Io=5126,Gn=[];Gn[5120]=1,Gn[5122]=2,Gn[5124]=4,Gn[5121]=1,Gn[5123]=2,Gn[5125]=4,Gn[5126]=4;function Fa(_){return Zo[Object.prototype.toString.call(_)]|0}function Fu(_,G){for(var q=0;q<G.length;++q)_[q]=G[q]}function Is(_,G,q,Ce,Je,De,ke){for(var at=0,lt=0;lt<q;++lt)for(var vt=0;vt<Ce;++vt)_[at++]=G[Je*lt+De*vt+ke]}function lf(_,G,q,Ce){var Je=0,De={};function ke(Ee){this.id=Je++,this.buffer=_.createBuffer(),this.type=Ee,this.usage=Bu,this.byteLength=0,this.dimension=1,this.dtype=Do,this.persistentData=null,q.profile&&(this.stats={size:0})}ke.prototype.bind=function(){_.bindBuffer(this.type,this.buffer)},ke.prototype.destroy=function(){St(this)};var at=[];function lt(Ee,Me){var yt=at.pop();return yt||(yt=new ke(Ee)),yt.bind(),it(yt,Me,uf,0,1,!1),yt}function vt(Ee){at.push(Ee)}function ft(Ee,Me,yt){Ee.byteLength=Me.byteLength,_.bufferData(Ee.type,Me,yt)}function it(Ee,Me,yt,xt,nt,ct){var ot;if(Ee.usage=yt,Array.isArray(Me)){if(Ee.dtype=xt||Io,Me.length>0){var Ze;if(Array.isArray(Me[0])){ot=Ds(Me);for(var Ve=1,ze=1;ze<ot.length;++ze)Ve*=ot[ze];Ee.dimension=Ve,Ze=Ba(Me,ot,Ee.dtype),ft(Ee,Ze,yt),ct?Ee.persistentData=Ze:jr.freeType(Ze)}else if(typeof Me[0]=="number"){Ee.dimension=nt;var At=jr.allocType(Ee.dtype,Me.length);Fu(At,Me),ft(Ee,At,yt),ct?Ee.persistentData=At:jr.freeType(At)}else i(Me[0])?(Ee.dimension=Me[0].length,Ee.dtype=xt||Fa(Me[0])||Io,Ze=Ba(Me,[Me.length,Me[0].length],Ee.dtype),ft(Ee,Ze,yt),ct?Ee.persistentData=Ze:jr.freeType(Ze)):j.raise("invalid buffer data")}}else if(i(Me))Ee.dtype=xt||Fa(Me),Ee.dimension=nt,ft(Ee,Me,yt),ct&&(Ee.persistentData=new Uint8Array(new Uint8Array(Me.buffer)));else if(oo(Me)){ot=Me.shape;var ir=Me.stride,mt=Me.offset,et=0,qe=0,rr=0,cr=0;ot.length===1?(et=ot[0],qe=1,rr=ir[0],cr=0):ot.length===2?(et=ot[0],qe=ot[1],rr=ir[0],cr=ir[1]):j.raise("invalid shape"),Ee.dtype=xt||Fa(Me.data)||Io,Ee.dimension=qe;var Gt=jr.allocType(Ee.dtype,et*qe);Is(Gt,Me.data,et,qe,rr,cr,mt),ft(Ee,Gt,yt),ct?Ee.persistentData=Gt:jr.freeType(Gt)}else Me instanceof ArrayBuffer?(Ee.dtype=Do,Ee.dimension=nt,ft(Ee,Me,yt),ct&&(Ee.persistentData=new Uint8Array(new Uint8Array(Me)))):j.raise("invalid buffer data")}function St(Ee){G.bufferCount--,Ce(Ee);var Me=Ee.buffer;j(Me,"buffer must not be deleted already"),_.deleteBuffer(Me),Ee.buffer=null,delete De[Ee.id]}function st(Ee,Me,yt,xt){G.bufferCount++;var nt=new ke(Me);De[nt.id]=nt;function ct(Ve){var ze=Bu,At=null,ir=0,mt=0,et=1;return Array.isArray(Ve)||i(Ve)||oo(Ve)||Ve instanceof ArrayBuffer?At=Ve:typeof Ve=="number"?ir=Ve|0:Ve&&(j.type(Ve,"object","buffer arguments must be an object, a number or an array"),"data"in Ve&&(j(At===null||Array.isArray(At)||i(At)||oo(At),"invalid data for buffer"),At=Ve.data),"usage"in Ve&&(j.parameter(Ve.usage,ja,"invalid buffer usage"),ze=ja[Ve.usage]),"type"in Ve&&(j.parameter(Ve.type,Ro,"invalid buffer type"),mt=Ro[Ve.type]),"dimension"in Ve&&(j.type(Ve.dimension,"number","invalid dimension"),et=Ve.dimension|0),"length"in Ve&&(j.nni(ir,"buffer length must be a nonnegative integer"),ir=Ve.length|0)),nt.bind(),At?it(nt,At,ze,mt,et,xt):(ir&&_.bufferData(nt.type,ir,ze),nt.dtype=mt||Do,nt.usage=ze,nt.dimension=et,nt.byteLength=ir),q.profile&&(nt.stats.size=nt.byteLength*Gn[nt.dtype]),ct}function ot(Ve,ze){j(ze+Ve.byteLength<=nt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ve.byteLength+" starting from offset "+ze+" to a buffer of size "+nt.byteLength),_.bufferSubData(nt.type,ze,Ve)}function Ze(Ve,ze){var At=(ze||0)|0,ir;if(nt.bind(),i(Ve)||Ve instanceof ArrayBuffer)ot(Ve,At);else if(Array.isArray(Ve)){if(Ve.length>0)if(typeof Ve[0]=="number"){var mt=jr.allocType(nt.dtype,Ve.length);Fu(mt,Ve),ot(mt,At),jr.freeType(mt)}else if(Array.isArray(Ve[0])||i(Ve[0])){ir=Ds(Ve);var et=Ba(Ve,ir,nt.dtype);ot(et,At),jr.freeType(et)}else j.raise("invalid buffer data")}else if(oo(Ve)){ir=Ve.shape;var qe=Ve.stride,rr=0,cr=0,Gt=0,mr=0;ir.length===1?(rr=ir[0],cr=1,Gt=qe[0],mr=0):ir.length===2?(rr=ir[0],cr=ir[1],Gt=qe[0],mr=qe[1]):j.raise("invalid shape");var ar=Array.isArray(Ve.data)?nt.dtype:Fa(Ve.data),yr=jr.allocType(ar,rr*cr);Is(yr,Ve.data,rr,cr,Gt,mr,Ve.offset),ot(yr,At),jr.freeType(yr)}else j.raise("invalid data for buffer subdata");return ct}return yt||ct(Ee),ct._reglType="buffer",ct._buffer=nt,ct.subdata=Ze,q.profile&&(ct.stats=nt.stats),ct.destroy=function(){St(nt)},ct}function Ot(){un(De).forEach(function(Ee){Ee.buffer=_.createBuffer(),_.bindBuffer(Ee.type,Ee.buffer),_.bufferData(Ee.type,Ee.persistentData||Ee.byteLength,Ee.usage)})}return q.profile&&(G.getTotalBufferSize=function(){var Ee=0;return Object.keys(De).forEach(function(Me){Ee+=De[Me].stats.size}),Ee}),{create:st,createStream:lt,destroyStream:vt,clear:function(){un(De).forEach(St),at.forEach(St)},getBuffer:function(Ee){return Ee&&Ee._buffer instanceof ke?Ee._buffer:null},restore:Ot,_initBuffer:it}}var Ga=0,ff=0,cf=1,vi=1,Co=4,df=4,yi={points:Ga,point:ff,lines:cf,line:vi,triangles:Co,triangle:df,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},hf=0,ho=1,po=4,Yi=5120,gi=5121,Ki=5122,xo=5123,Jo=5124,$n=5125,Vn=34963,Zi=35040,vo=35044;function io(_,G,q,Ce){var Je={},De=0,ke={uint8:gi,uint16:xo};G.oes_element_index_uint&&(ke.uint32=$n);function at(Ot){this.id=De++,Je[this.id]=this,this.buffer=Ot,this.primType=po,this.vertCount=0,this.type=0}at.prototype.bind=function(){this.buffer.bind()};var lt=[];function vt(Ot){var Ee=lt.pop();return Ee||(Ee=new at(q.create(null,Vn,!0,!1)._buffer)),it(Ee,Ot,Zi,-1,-1,0,0),Ee}function ft(Ot){lt.push(Ot)}function it(Ot,Ee,Me,yt,xt,nt,ct){Ot.buffer.bind();var ot;if(Ee){var Ze=ct;!ct&&(!i(Ee)||oo(Ee)&&!i(Ee.data))&&(Ze=G.oes_element_index_uint?$n:xo),q._initBuffer(Ot.buffer,Ee,Me,Ze,3)}else _.bufferData(Vn,nt,Me),Ot.buffer.dtype=ot||gi,Ot.buffer.usage=Me,Ot.buffer.dimension=3,Ot.buffer.byteLength=nt;if(ot=ct,!ct){switch(Ot.buffer.dtype){case gi:case Yi:ot=gi;break;case xo:case Ki:ot=xo;break;case $n:case Jo:ot=$n;break;default:j.raise("unsupported type for element array")}Ot.buffer.dtype=ot}Ot.type=ot,j(ot!==$n||!!G.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ve=xt;Ve<0&&(Ve=Ot.buffer.byteLength,ot===xo?Ve>>=1:ot===$n&&(Ve>>=2)),Ot.vertCount=Ve;var ze=yt;if(yt<0){ze=po;var At=Ot.buffer.dimension;At===1&&(ze=hf),At===2&&(ze=ho),At===3&&(ze=po)}Ot.primType=ze}function St(Ot){Ce.elementsCount--,j(Ot.buffer!==null,"must not double destroy elements"),delete Je[Ot.id],Ot.buffer.destroy(),Ot.buffer=null}function st(Ot,Ee){var Me=q.create(null,Vn,!0),yt=new at(Me._buffer);Ce.elementsCount++;function xt(nt){if(!nt)Me(),yt.primType=po,yt.vertCount=0,yt.type=gi;else if(typeof nt=="number")Me(nt),yt.primType=po,yt.vertCount=nt|0,yt.type=gi;else{var ct=null,ot=vo,Ze=-1,Ve=-1,ze=0,At=0;Array.isArray(nt)||i(nt)||oo(nt)?ct=nt:(j.type(nt,"object","invalid arguments for elements"),"data"in nt&&(ct=nt.data,j(Array.isArray(ct)||i(ct)||oo(ct),"invalid data for element buffer")),"usage"in nt&&(j.parameter(nt.usage,ja,"invalid element buffer usage"),ot=ja[nt.usage]),"primitive"in nt&&(j.parameter(nt.primitive,yi,"invalid element buffer primitive"),Ze=yi[nt.primitive]),"count"in nt&&(j(typeof nt.count=="number"&&nt.count>=0,"invalid vertex count for elements"),Ve=nt.count|0),"type"in nt&&(j.parameter(nt.type,ke,"invalid buffer type"),At=ke[nt.type]),"length"in nt?ze=nt.length|0:(ze=Ve,At===xo||At===Ki?ze*=2:(At===$n||At===Jo)&&(ze*=4))),it(yt,ct,ot,Ze,Ve,ze,At)}return xt}return xt(Ot),xt._reglType="elements",xt._elements=yt,xt.subdata=function(nt,ct){return Me.subdata(nt,ct),xt},xt.destroy=function(){St(yt)},xt}return{create:st,createStream:vt,destroyStream:ft,getElements:function(Ot){return typeof Ot=="function"&&Ot._elements instanceof at?Ot._elements:null},clear:function(){un(Je).forEach(St)}}}var mi=new Float32Array(1),jn=new Uint32Array(mi.buffer),pf=5123;function Gu(_){for(var G=jr.allocType(pf,_.length),q=0;q<_.length;++q)if(isNaN(_[q]))G[q]=65535;else if(_[q]===1/0)G[q]=31744;else if(_[q]===-1/0)G[q]=64512;else{mi[0]=_[q];var Ce=jn[0],Je=Ce>>>31<<15,De=(Ce<<1>>>24)-127,ke=Ce>>13&(1<<10)-1;if(De<-24)G[q]=Je;else if(De<-14){var at=-14-De;G[q]=Je+(ke+(1<<10)>>at)}else De>15?G[q]=Je+31744:G[q]=Je+(De+15<<10)+ke}return G}function qr(_){return Array.isArray(_)||i(_)}var Cs=function(_){return!(_&_-1)&&!!_},To=34467,yo=3553,ao=34067,Ji=34069,Lo=6408,Qi=6406,dn=6407,bi=6409,ka=6410,Ls=32854,Bn=32855,js=36194,Bs=32819,ku=32820,Uu=33635,vf=34042,Ua=6402,za=34041,Fs=35904,kn=35906,Nn=36193,Qo=33776,Gs=33777,Ha=33778,Ei=33779,Oi=35986,ks=35987,zu=34798,qi=35840,Xa=35841,Us=35842,m=35843,E=36196,A=5121,B=5123,J=5125,pe=5126,Xe=10242,Et=10243,Yt=10497,Tr=33071,wr=33648,Ur=10240,Hr=10241,nn=9728,Sn=9729,Vr=9984,Wn=9985,qo=9986,$a=9987,Hu=33170,ea=4352,Xu=4353,zs=4354,Si=34046,ei=3317,ry=37440,ny=37441,oy=37443,Hs=37444,Xs=33984,iy=[Vr,qo,Wn,$a],Va=[0,bi,ka,dn,Lo],go={};go[bi]=go[Qi]=go[Ua]=1,go[za]=go[ka]=2,go[dn]=go[Fs]=3,go[Lo]=go[kn]=4;function Wa(_){return"[object "+_+"]"}var Wc=Wa("HTMLCanvasElement"),Yc=Wa("OffscreenCanvas"),Kc=Wa("CanvasRenderingContext2D"),Zc=Wa("ImageBitmap"),Jc=Wa("HTMLImageElement"),Qc=Wa("HTMLVideoElement"),ay=Object.keys(Zo).concat([Wc,Yc,Kc,Zc,Jc,Qc]),Ya=[];Ya[A]=1,Ya[pe]=4,Ya[Nn]=2,Ya[B]=2,Ya[J]=4;var xn=[];xn[Ls]=2,xn[Bn]=2,xn[js]=2,xn[za]=4,xn[Qo]=.5,xn[Gs]=.5,xn[Ha]=1,xn[Ei]=1,xn[Oi]=.5,xn[ks]=1,xn[zu]=1,xn[qi]=.5,xn[Xa]=.25,xn[Us]=.5,xn[m]=.25,xn[E]=.5;function qc(_){return Array.isArray(_)&&(_.length===0||typeof _[0]=="number")}function ed(_){if(!Array.isArray(_))return!1;var G=_.length;return!(G===0||!qr(_[0]))}function ta(_){return Object.prototype.toString.call(_)}function td(_){return ta(_)===Wc}function rd(_){return ta(_)===Yc}function sy(_){return ta(_)===Kc}function uy(_){return ta(_)===Zc}function ly(_){return ta(_)===Jc}function fy(_){return ta(_)===Qc}function yf(_){if(!_)return!1;var G=ta(_);return ay.indexOf(G)>=0?!0:qc(_)||ed(_)||oo(_)}function nd(_){return Zo[Object.prototype.toString.call(_)]|0}function cy(_,G){var q=G.length;switch(_.type){case A:case B:case J:case pe:var Ce=jr.allocType(_.type,q);Ce.set(G),_.data=Ce;break;case Nn:_.data=Gu(G);break;default:j.raise("unsupported texture type, must specify a typed array")}}function od(_,G){return jr.allocType(_.type===Nn?pe:_.type,G)}function Jr(_,G){_.type===Nn?(_.data=Gu(G),jr.freeType(G)):_.data=G}function dy(_,G,q,Ce,Je,De){for(var ke=_.width,at=_.height,lt=_.channels,vt=ke*at*lt,ft=od(_,vt),it=0,St=0;St<at;++St)for(var st=0;st<ke;++st)for(var Ot=0;Ot<lt;++Ot)ft[it++]=G[q*st+Ce*St+Je*Ot+De];Jr(_,ft)}function $u(_,G,q,Ce,Je,De){var ke;if(typeof xn[_]<"u"?ke=xn[_]:ke=go[_]*Ya[G],De&&(ke*=6),Je){for(var at=0,lt=q;lt>=1;)at+=ke*lt*lt,lt/=2;return at}else return ke*q*Ce}function hy(_,G,q,Ce,Je,De,ke){var at={"don't care":ea,"dont care":ea,nice:zs,fast:Xu},lt={repeat:Yt,clamp:Tr,mirror:wr},vt={nearest:nn,linear:Sn},ft=u({mipmap:$a,"nearest mipmap nearest":Vr,"linear mipmap nearest":Wn,"nearest mipmap linear":qo,"linear mipmap linear":$a},vt),it={none:0,browser:Hs},St={uint8:A,rgba4:Bs,rgb565:Uu,"rgb5 a1":ku},st={alpha:Qi,luminance:bi,"luminance alpha":ka,rgb:dn,rgba:Lo,rgba4:Ls,"rgb5 a1":Bn,rgb565:js},Ot={};G.ext_srgb&&(st.srgb=Fs,st.srgba=kn),G.oes_texture_float&&(St.float32=St.float=pe),G.oes_texture_half_float&&(St.float16=St["half float"]=Nn),G.webgl_depth_texture&&(u(st,{depth:Ua,"depth stencil":za}),u(St,{uint16:B,uint32:J,"depth stencil":vf})),G.webgl_compressed_texture_s3tc&&u(Ot,{"rgb s3tc dxt1":Qo,"rgba s3tc dxt1":Gs,"rgba s3tc dxt3":Ha,"rgba s3tc dxt5":Ei}),G.webgl_compressed_texture_atc&&u(Ot,{"rgb atc":Oi,"rgba atc explicit alpha":ks,"rgba atc interpolated alpha":zu}),G.webgl_compressed_texture_pvrtc&&u(Ot,{"rgb pvrtc 4bppv1":qi,"rgb pvrtc 2bppv1":Xa,"rgba pvrtc 4bppv1":Us,"rgba pvrtc 2bppv1":m}),G.webgl_compressed_texture_etc1&&(Ot["rgb etc1"]=E);var Ee=Array.prototype.slice.call(_.getParameter(To));Object.keys(Ot).forEach(function(K){var je=Ot[K];Ee.indexOf(je)>=0&&(st[K]=je)});var Me=Object.keys(st);q.textureFormats=Me;var yt=[];Object.keys(st).forEach(function(K){var je=st[K];yt[je]=K});var xt=[];Object.keys(St).forEach(function(K){var je=St[K];xt[je]=K});var nt=[];Object.keys(vt).forEach(function(K){var je=vt[K];nt[je]=K});var ct=[];Object.keys(ft).forEach(function(K){var je=ft[K];ct[je]=K});var ot=[];Object.keys(lt).forEach(function(K){var je=lt[K];ot[je]=K});var Ze=Me.reduce(function(K,je){var Pe=st[je];return Pe===bi||Pe===Qi||Pe===bi||Pe===ka||Pe===Ua||Pe===za||G.ext_srgb&&(Pe===Fs||Pe===kn)?K[Pe]=Pe:Pe===Bn||je.indexOf("rgba")>=0?K[Pe]=Lo:K[Pe]=dn,K},{});function Ve(){this.internalformat=Lo,this.format=Lo,this.type=A,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Hs,this.width=0,this.height=0,this.channels=0}function ze(K,je){K.internalformat=je.internalformat,K.format=je.format,K.type=je.type,K.compressed=je.compressed,K.premultiplyAlpha=je.premultiplyAlpha,K.flipY=je.flipY,K.unpackAlignment=je.unpackAlignment,K.colorSpace=je.colorSpace,K.width=je.width,K.height=je.height,K.channels=je.channels}function At(K,je){if(!(typeof je!="object"||!je)){if("premultiplyAlpha"in je&&(j.type(je.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),K.premultiplyAlpha=je.premultiplyAlpha),"flipY"in je&&(j.type(je.flipY,"boolean","invalid texture flip"),K.flipY=je.flipY),"alignment"in je&&(j.oneOf(je.alignment,[1,2,4,8],"invalid texture unpack alignment"),K.unpackAlignment=je.alignment),"colorSpace"in je&&(j.parameter(je.colorSpace,it,"invalid colorSpace"),K.colorSpace=it[je.colorSpace]),"type"in je){var Pe=je.type;j(G.oes_texture_float||!(Pe==="float"||Pe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),j(G.oes_texture_half_float||!(Pe==="half float"||Pe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),j(G.webgl_depth_texture||!(Pe==="uint16"||Pe==="uint32"||Pe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),j.parameter(Pe,St,"invalid texture type"),K.type=St[Pe]}var Rt=K.width,br=K.height,H=K.channels,C=!1;"shape"in je?(j(Array.isArray(je.shape)&&je.shape.length>=2,"shape must be an array"),Rt=je.shape[0],br=je.shape[1],je.shape.length===3&&(H=je.shape[2],j(H>0&&H<=4,"invalid number of channels"),C=!0),j(Rt>=0&&Rt<=q.maxTextureSize,"invalid width"),j(br>=0&&br<=q.maxTextureSize,"invalid height")):("radius"in je&&(Rt=br=je.radius,j(Rt>=0&&Rt<=q.maxTextureSize,"invalid radius")),"width"in je&&(Rt=je.width,j(Rt>=0&&Rt<=q.maxTextureSize,"invalid width")),"height"in je&&(br=je.height,j(br>=0&&br<=q.maxTextureSize,"invalid height")),"channels"in je&&(H=je.channels,j(H>0&&H<=4,"invalid number of channels"),C=!0)),K.width=Rt|0,K.height=br|0,K.channels=H|0;var ie=!1;if("format"in je){var me=je.format;j(G.webgl_depth_texture||!(me==="depth"||me==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),j.parameter(me,st,"invalid texture format");var Se=K.internalformat=st[me];K.format=Ze[Se],me in St&&("type"in je||(K.type=St[me])),me in Ot&&(K.compressed=!0),ie=!0}!C&&ie?K.channels=go[K.format]:C&&!ie?K.channels!==Va[K.format]&&(K.format=K.internalformat=Va[K.channels]):ie&&C&&j(K.channels===go[K.format],"number of channels inconsistent with specified format")}}function ir(K){_.pixelStorei(ry,K.flipY),_.pixelStorei(ny,K.premultiplyAlpha),_.pixelStorei(oy,K.colorSpace),_.pixelStorei(ei,K.unpackAlignment)}function mt(){Ve.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function et(K,je){var Pe=null;if(yf(je)?Pe=je:je&&(j.type(je,"object","invalid pixel data type"),At(K,je),"x"in je&&(K.xOffset=je.x|0),"y"in je&&(K.yOffset=je.y|0),yf(je.data)&&(Pe=je.data)),j(!K.compressed||Pe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),je.copy){j(!Pe,"can not specify copy and data field for the same texture");var Rt=Je.viewportWidth,br=Je.viewportHeight;K.width=K.width||Rt-K.xOffset,K.height=K.height||br-K.yOffset,K.needsCopy=!0,j(K.xOffset>=0&&K.xOffset<Rt&&K.yOffset>=0&&K.yOffset<br&&K.width>0&&K.width<=Rt&&K.height>0&&K.height<=br,"copy texture read out of bounds")}else if(!Pe)K.width=K.width||1,K.height=K.height||1,K.channels=K.channels||4;else if(i(Pe))K.channels=K.channels||4,K.data=Pe,!("type"in je)&&K.type===A&&(K.type=nd(Pe));else if(qc(Pe))K.channels=K.channels||4,cy(K,Pe),K.alignment=1,K.needsFree=!0;else if(oo(Pe)){var H=Pe.data;!Array.isArray(H)&&K.type===A&&(K.type=nd(H));var C=Pe.shape,ie=Pe.stride,me,Se,ue,ae,fe,X;C.length===3?(ue=C[2],X=ie[2]):(j(C.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ue=1,X=1),me=C[0],Se=C[1],ae=ie[0],fe=ie[1],K.alignment=1,K.width=me,K.height=Se,K.channels=ue,K.format=K.internalformat=Va[ue],K.needsFree=!0,dy(K,H,ae,fe,X,Pe.offset)}else if(td(Pe)||rd(Pe)||sy(Pe))td(Pe)||rd(Pe)?K.element=Pe:K.element=Pe.canvas,K.width=K.element.width,K.height=K.element.height,K.channels=4;else if(uy(Pe))K.element=Pe,K.width=Pe.width,K.height=Pe.height,K.channels=4;else if(ly(Pe))K.element=Pe,K.width=Pe.naturalWidth,K.height=Pe.naturalHeight,K.channels=4;else if(fy(Pe))K.element=Pe,K.width=Pe.videoWidth,K.height=Pe.videoHeight,K.channels=4;else if(ed(Pe)){var oe=K.width||Pe[0].length,z=K.height||Pe.length,de=K.channels;qr(Pe[0][0])?de=de||Pe[0][0].length:de=de||1;for(var Te=La.shape(Pe),Ye=1,Qe=0;Qe<Te.length;++Qe)Ye*=Te[Qe];var $e=od(K,Ye);La.flatten(Pe,Te,"",$e),Jr(K,$e),K.alignment=1,K.width=oe,K.height=z,K.channels=de,K.format=K.internalformat=Va[de],K.needsFree=!0}K.type===pe?j(q.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):K.type===Nn&&j(q.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function qe(K,je,Pe){var Rt=K.element,br=K.data,H=K.internalformat,C=K.format,ie=K.type,me=K.width,Se=K.height;ir(K),Rt?_.texImage2D(je,Pe,C,C,ie,Rt):K.compressed?_.compressedTexImage2D(je,Pe,H,me,Se,0,br):K.needsCopy?(Ce(),_.copyTexImage2D(je,Pe,C,K.xOffset,K.yOffset,me,Se,0)):_.texImage2D(je,Pe,C,me,Se,0,C,ie,br||null)}function rr(K,je,Pe,Rt,br){var H=K.element,C=K.data,ie=K.internalformat,me=K.format,Se=K.type,ue=K.width,ae=K.height;ir(K),H?_.texSubImage2D(je,br,Pe,Rt,me,Se,H):K.compressed?_.compressedTexSubImage2D(je,br,Pe,Rt,ie,ue,ae,C):K.needsCopy?(Ce(),_.copyTexSubImage2D(je,br,Pe,Rt,K.xOffset,K.yOffset,ue,ae)):_.texSubImage2D(je,br,Pe,Rt,ue,ae,me,Se,C)}var cr=[];function Gt(){return cr.pop()||new mt}function mr(K){K.needsFree&&jr.freeType(K.data),mt.call(K),cr.push(K)}function ar(){Ve.call(this),this.genMipmaps=!1,this.mipmapHint=ea,this.mipmask=0,this.images=Array(16)}function yr(K,je,Pe){var Rt=K.images[0]=Gt();K.mipmask=1,Rt.width=K.width=je,Rt.height=K.height=Pe,Rt.channels=K.channels=4}function Ar(K,je){var Pe=null;if(yf(je))Pe=K.images[0]=Gt(),ze(Pe,K),et(Pe,je),K.mipmask=1;else if(At(K,je),Array.isArray(je.mipmap))for(var Rt=je.mipmap,br=0;br<Rt.length;++br)Pe=K.images[br]=Gt(),ze(Pe,K),Pe.width>>=br,Pe.height>>=br,et(Pe,Rt[br]),K.mipmask|=1<<br;else Pe=K.images[0]=Gt(),ze(Pe,K),et(Pe,je),K.mipmask=1;ze(K,K.images[0]),K.compressed&&(K.internalformat===Qo||K.internalformat===Gs||K.internalformat===Ha||K.internalformat===Ei)&&j(K.width%4===0&&K.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function fn(K,je){for(var Pe=K.images,Rt=0;Rt<Pe.length;++Rt){if(!Pe[Rt])return;qe(Pe[Rt],je,Rt)}}var vn=[];function Or(){var K=vn.pop()||new ar;Ve.call(K),K.mipmask=0;for(var je=0;je<16;++je)K.images[je]=null;return K}function hn(K){for(var je=K.images,Pe=0;Pe<je.length;++Pe)je[Pe]&&mr(je[Pe]),je[Pe]=null;vn.push(K)}function Wr(){this.minFilter=nn,this.magFilter=nn,this.wrapS=Tr,this.wrapT=Tr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ea}function Yr(K,je){if("min"in je){var Pe=je.min;j.parameter(Pe,ft),K.minFilter=ft[Pe],iy.indexOf(K.minFilter)>=0&&!("faces"in je)&&(K.genMipmaps=!0)}if("mag"in je){var Rt=je.mag;j.parameter(Rt,vt),K.magFilter=vt[Rt]}var br=K.wrapS,H=K.wrapT;if("wrap"in je){var C=je.wrap;typeof C=="string"?(j.parameter(C,lt),br=H=lt[C]):Array.isArray(C)&&(j.parameter(C[0],lt),j.parameter(C[1],lt),br=lt[C[0]],H=lt[C[1]])}else{if("wrapS"in je){var ie=je.wrapS;j.parameter(ie,lt),br=lt[ie]}if("wrapT"in je){var me=je.wrapT;j.parameter(me,lt),H=lt[me]}}if(K.wrapS=br,K.wrapT=H,"anisotropic"in je){var Se=je.anisotropic;j(typeof Se=="number"&&Se>=1&&Se<=q.maxAnisotropic,"aniso samples must be between 1 and "),K.anisotropic=je.anisotropic}if("mipmap"in je){var ue=!1;switch(typeof je.mipmap){case"string":j.parameter(je.mipmap,at,"invalid mipmap hint"),K.mipmapHint=at[je.mipmap],K.genMipmaps=!0,ue=!0;break;case"boolean":ue=K.genMipmaps=je.mipmap;break;case"object":j(Array.isArray(je.mipmap),"invalid mipmap type"),K.genMipmaps=!1,ue=!0;break;default:j.raise("invalid mipmap type")}ue&&!("min"in je)&&(K.minFilter=Vr)}}function pn(K,je){_.texParameteri(je,Hr,K.minFilter),_.texParameteri(je,Ur,K.magFilter),_.texParameteri(je,Xe,K.wrapS),_.texParameteri(je,Et,K.wrapT),G.ext_texture_filter_anisotropic&&_.texParameteri(je,Si,K.anisotropic),K.genMipmaps&&(_.hint(Hu,K.mipmapHint),_.generateMipmap(je))}var cn=0,bn={},yn=q.maxTextureUnits,Fr=Array(yn).map(function(){return null});function dr(K){Ve.call(this),this.mipmask=0,this.internalformat=Lo,this.id=cn++,this.refCount=1,this.target=K,this.texture=_.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wr,ke.profile&&(this.stats={size:0})}function Tn(K){_.activeTexture(Xs),_.bindTexture(K.target,K.texture)}function Ir(){var K=Fr[0];K?_.bindTexture(K.target,K.texture):_.bindTexture(yo,null)}function qt(K){var je=K.texture;j(je,"must not double destroy texture");var Pe=K.unit,Rt=K.target;Pe>=0&&(_.activeTexture(Xs+Pe),_.bindTexture(Rt,null),Fr[Pe]=null),_.deleteTexture(je),K.texture=null,K.params=null,K.pixels=null,K.refCount=0,delete bn[K.id],De.textureCount--}u(dr.prototype,{bind:function(){var K=this;K.bindCount+=1;var je=K.unit;if(je<0){for(var Pe=0;Pe<yn;++Pe){var Rt=Fr[Pe];if(Rt){if(Rt.bindCount>0)continue;Rt.unit=-1}Fr[Pe]=K,je=Pe;break}je>=yn&&j.raise("insufficient number of texture units"),ke.profile&&De.maxTextureUnits<je+1&&(De.maxTextureUnits=je+1),K.unit=je,_.activeTexture(Xs+je),_.bindTexture(K.target,K.texture)}return je},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&qt(this)}});function Sr(K,je){var Pe=new dr(yo);bn[Pe.id]=Pe,De.textureCount++;function Rt(C,ie){var me=Pe.texInfo;Wr.call(me);var Se=Or();return typeof C=="number"?typeof ie=="number"?yr(Se,C|0,ie|0):yr(Se,C|0,C|0):C?(j.type(C,"object","invalid arguments to regl.texture"),Yr(me,C),Ar(Se,C)):yr(Se,1,1),me.genMipmaps&&(Se.mipmask=(Se.width<<1)-1),Pe.mipmask=Se.mipmask,ze(Pe,Se),j.texture2D(me,Se,q),Pe.internalformat=Se.internalformat,Rt.width=Se.width,Rt.height=Se.height,Tn(Pe),fn(Se,yo),pn(me,yo),Ir(),hn(Se),ke.profile&&(Pe.stats.size=$u(Pe.internalformat,Pe.type,Se.width,Se.height,me.genMipmaps,!1)),Rt.format=yt[Pe.internalformat],Rt.type=xt[Pe.type],Rt.mag=nt[me.magFilter],Rt.min=ct[me.minFilter],Rt.wrapS=ot[me.wrapS],Rt.wrapT=ot[me.wrapT],Rt}function br(C,ie,me,Se){j(!!C,"must specify image data");var ue=ie|0,ae=me|0,fe=Se|0,X=Gt();return ze(X,Pe),X.width=0,X.height=0,et(X,C),X.width=X.width||(Pe.width>>fe)-ue,X.height=X.height||(Pe.height>>fe)-ae,j(Pe.type===X.type&&Pe.format===X.format&&Pe.internalformat===X.internalformat,"incompatible format for texture.subimage"),j(ue>=0&&ae>=0&&ue+X.width<=Pe.width&&ae+X.height<=Pe.height,"texture.subimage write out of bounds"),j(Pe.mipmask&1<<fe,"missing mipmap data"),j(X.data||X.element||X.needsCopy,"missing image data"),Tn(Pe),rr(X,yo,ue,ae,fe),Ir(),mr(X),Rt}function H(C,ie){var me=C|0,Se=ie|0||me;if(me===Pe.width&&Se===Pe.height)return Rt;Rt.width=Pe.width=me,Rt.height=Pe.height=Se,Tn(Pe);for(var ue=0;Pe.mipmask>>ue;++ue){var ae=me>>ue,fe=Se>>ue;if(!ae||!fe)break;_.texImage2D(yo,ue,Pe.format,ae,fe,0,Pe.format,Pe.type,null)}return Ir(),ke.profile&&(Pe.stats.size=$u(Pe.internalformat,Pe.type,me,Se,!1,!1)),Rt}return Rt(K,je),Rt.subimage=br,Rt.resize=H,Rt._reglType="texture2d",Rt._texture=Pe,ke.profile&&(Rt.stats=Pe.stats),Rt.destroy=function(){Pe.decRef()},Rt}function Pr(K,je,Pe,Rt,br,H){var C=new dr(ao);bn[C.id]=C,De.cubeCount++;var ie=new Array(6);function me(ae,fe,X,oe,z,de){var Te,Ye=C.texInfo;for(Wr.call(Ye),Te=0;Te<6;++Te)ie[Te]=Or();if(typeof ae=="number"||!ae){var Qe=ae|0||1;for(Te=0;Te<6;++Te)yr(ie[Te],Qe,Qe)}else if(typeof ae=="object")if(fe)Ar(ie[0],ae),Ar(ie[1],fe),Ar(ie[2],X),Ar(ie[3],oe),Ar(ie[4],z),Ar(ie[5],de);else if(Yr(Ye,ae),At(C,ae),"faces"in ae){var $e=ae.faces;for(j(Array.isArray($e)&&$e.length===6,"cube faces must be a length 6 array"),Te=0;Te<6;++Te)j(typeof $e[Te]=="object"&&!!$e[Te],"invalid input for cube map face"),ze(ie[Te],C),Ar(ie[Te],$e[Te])}else for(Te=0;Te<6;++Te)Ar(ie[Te],ae);else j.raise("invalid arguments to cube map");for(ze(C,ie[0]),q.npotTextureCube||j(Cs(C.width)&&Cs(C.height),"your browser does not support non power or two texture dimensions"),Ye.genMipmaps?C.mipmask=(ie[0].width<<1)-1:C.mipmask=ie[0].mipmask,j.textureCube(C,Ye,ie,q),C.internalformat=ie[0].internalformat,me.width=ie[0].width,me.height=ie[0].height,Tn(C),Te=0;Te<6;++Te)fn(ie[Te],Ji+Te);for(pn(Ye,ao),Ir(),ke.profile&&(C.stats.size=$u(C.internalformat,C.type,me.width,me.height,Ye.genMipmaps,!0)),me.format=yt[C.internalformat],me.type=xt[C.type],me.mag=nt[Ye.magFilter],me.min=ct[Ye.minFilter],me.wrapS=ot[Ye.wrapS],me.wrapT=ot[Ye.wrapT],Te=0;Te<6;++Te)hn(ie[Te]);return me}function Se(ae,fe,X,oe,z){j(!!fe,"must specify image data"),j(typeof ae=="number"&&ae===(ae|0)&&ae>=0&&ae<6,"invalid face");var de=X|0,Te=oe|0,Ye=z|0,Qe=Gt();return ze(Qe,C),Qe.width=0,Qe.height=0,et(Qe,fe),Qe.width=Qe.width||(C.width>>Ye)-de,Qe.height=Qe.height||(C.height>>Ye)-Te,j(C.type===Qe.type&&C.format===Qe.format&&C.internalformat===Qe.internalformat,"incompatible format for texture.subimage"),j(de>=0&&Te>=0&&de+Qe.width<=C.width&&Te+Qe.height<=C.height,"texture.subimage write out of bounds"),j(C.mipmask&1<<Ye,"missing mipmap data"),j(Qe.data||Qe.element||Qe.needsCopy,"missing image data"),Tn(C),rr(Qe,Ji+ae,de,Te,Ye),Ir(),mr(Qe),me}function ue(ae){var fe=ae|0;if(fe!==C.width){me.width=C.width=fe,me.height=C.height=fe,Tn(C);for(var X=0;X<6;++X)for(var oe=0;C.mipmask>>oe;++oe)_.texImage2D(Ji+X,oe,C.format,fe>>oe,fe>>oe,0,C.format,C.type,null);return Ir(),ke.profile&&(C.stats.size=$u(C.internalformat,C.type,me.width,me.height,!1,!0)),me}}return me(K,je,Pe,Rt,br,H),me.subimage=Se,me.resize=ue,me._reglType="textureCube",me._texture=C,ke.profile&&(me.stats=C.stats),me.destroy=function(){C.decRef()},me}function an(){for(var K=0;K<yn;++K)_.activeTexture(Xs+K),_.bindTexture(yo,null),Fr[K]=null;un(bn).forEach(qt),De.cubeCount=0,De.textureCount=0}ke.profile&&(De.getTotalTextureSize=function(){var K=0;return Object.keys(bn).forEach(function(je){K+=bn[je].stats.size}),K});function Fo(){for(var K=0;K<yn;++K){var je=Fr[K];je&&(je.bindCount=0,je.unit=-1,Fr[K]=null)}un(bn).forEach(function(Pe){Pe.texture=_.createTexture(),_.bindTexture(Pe.target,Pe.texture);for(var Rt=0;Rt<32;++Rt)if(Pe.mipmask&1<<Rt)if(Pe.target===yo)_.texImage2D(yo,Rt,Pe.internalformat,Pe.width>>Rt,Pe.height>>Rt,0,Pe.internalformat,Pe.type,null);else for(var br=0;br<6;++br)_.texImage2D(Ji+br,Rt,Pe.internalformat,Pe.width>>Rt,Pe.height>>Rt,0,Pe.internalformat,Pe.type,null);pn(Pe.texInfo,Pe.target)})}function ha(){for(var K=0;K<yn;++K){var je=Fr[K];je&&(je.bindCount=0,je.unit=-1,Fr[K]=null),_.activeTexture(Xs+K),_.bindTexture(yo,null),_.bindTexture(ao,null)}}return{create2D:Sr,createCube:Pr,clear:an,getTexture:function(K){return null},restore:Fo,refresh:ha}}var jo=36161,ti=32854,gf=32855,id=36194,Vu=33189,ad=36168,sd=34041,ud=35907,mf=34836,ld=34842,fd=34843,Yn=[];Yn[ti]=2,Yn[gf]=2,Yn[id]=2,Yn[Vu]=2,Yn[ad]=1,Yn[sd]=4,Yn[ud]=4,Yn[mf]=16,Yn[ld]=8,Yn[fd]=6;function cd(_,G,q){return Yn[_]*G*q}var dd=function(_,G,q,Ce,Je){var De={rgba4:ti,rgb565:id,"rgb5 a1":gf,depth:Vu,stencil:ad,"depth stencil":sd};G.ext_srgb&&(De.srgba=ud),G.ext_color_buffer_half_float&&(De.rgba16f=ld,De.rgb16f=fd),G.webgl_color_buffer_float&&(De.rgba32f=mf);var ke=[];Object.keys(De).forEach(function(st){var Ot=De[st];ke[Ot]=st});var at=0,lt={};function vt(st){this.id=at++,this.refCount=1,this.renderbuffer=st,this.format=ti,this.width=0,this.height=0,Je.profile&&(this.stats={size:0})}vt.prototype.decRef=function(){--this.refCount<=0&&ft(this)};function ft(st){var Ot=st.renderbuffer;j(Ot,"must not double destroy renderbuffer"),_.bindRenderbuffer(jo,null),_.deleteRenderbuffer(Ot),st.renderbuffer=null,st.refCount=0,delete lt[st.id],Ce.renderbufferCount--}function it(st,Ot){var Ee=new vt(_.createRenderbuffer());lt[Ee.id]=Ee,Ce.renderbufferCount++;function Me(xt,nt){var ct=0,ot=0,Ze=ti;if(typeof xt=="object"&&xt){var Ve=xt;if("shape"in Ve){var ze=Ve.shape;j(Array.isArray(ze)&&ze.length>=2,"invalid renderbuffer shape"),ct=ze[0]|0,ot=ze[1]|0}else"radius"in Ve&&(ct=ot=Ve.radius|0),"width"in Ve&&(ct=Ve.width|0),"height"in Ve&&(ot=Ve.height|0);"format"in Ve&&(j.parameter(Ve.format,De,"invalid renderbuffer format"),Ze=De[Ve.format])}else typeof xt=="number"?(ct=xt|0,typeof nt=="number"?ot=nt|0:ot=ct):xt?j.raise("invalid arguments to renderbuffer constructor"):ct=ot=1;if(j(ct>0&&ot>0&&ct<=q.maxRenderbufferSize&&ot<=q.maxRenderbufferSize,"invalid renderbuffer size"),!(ct===Ee.width&&ot===Ee.height&&Ze===Ee.format))return Me.width=Ee.width=ct,Me.height=Ee.height=ot,Ee.format=Ze,_.bindRenderbuffer(jo,Ee.renderbuffer),_.renderbufferStorage(jo,Ze,ct,ot),j(_.getError()===0,"invalid render buffer format"),Je.profile&&(Ee.stats.size=cd(Ee.format,Ee.width,Ee.height)),Me.format=ke[Ee.format],Me}function yt(xt,nt){var ct=xt|0,ot=nt|0||ct;return ct===Ee.width&&ot===Ee.height||(j(ct>0&&ot>0&&ct<=q.maxRenderbufferSize&&ot<=q.maxRenderbufferSize,"invalid renderbuffer size"),Me.width=Ee.width=ct,Me.height=Ee.height=ot,_.bindRenderbuffer(jo,Ee.renderbuffer),_.renderbufferStorage(jo,Ee.format,ct,ot),j(_.getError()===0,"invalid render buffer format"),Je.profile&&(Ee.stats.size=cd(Ee.format,Ee.width,Ee.height))),Me}return Me(st,Ot),Me.resize=yt,Me._reglType="renderbuffer",Me._renderbuffer=Ee,Je.profile&&(Me.stats=Ee.stats),Me.destroy=function(){Ee.decRef()},Me}Je.profile&&(Ce.getTotalRenderbufferSize=function(){var st=0;return Object.keys(lt).forEach(function(Ot){st+=lt[Ot].stats.size}),st});function St(){un(lt).forEach(function(st){st.renderbuffer=_.createRenderbuffer(),_.bindRenderbuffer(jo,st.renderbuffer),_.renderbufferStorage(jo,st.format,st.width,st.height)}),_.bindRenderbuffer(jo,null)}return{create:it,clear:function(){un(lt).forEach(ft)},restore:St}},ri=36160,bf=36161,ra=3553,Wu=34069,hd=36064,pd=36096,vd=36128,xi=33306,yd=36053,Ka=36054,py=36055,Ef=36057,vy=36061,yy=36193,gy=5121,my=5126,gd=6407,md=6408,Of=6402,by=[gd,md],$s=[];$s[md]=4,$s[gd]=3;var Yu=[];Yu[gy]=1,Yu[my]=4,Yu[yy]=2;var Sf=32854,Ey=32855,xf=36194,bd=33189,Oy=36168,Tf=34041,Ed=35907,Od=34836,Sd=34842,Sy=34843,xy=[Sf,Ey,xf,Ed,Sd,Sy,Od],Za={};Za[yd]="complete",Za[Ka]="incomplete attachment",Za[Ef]="incomplete dimensions",Za[py]="incomplete, missing attachment",Za[vy]="unsupported";function Ty(_,G,q,Ce,Je,De){var ke={cur:null,next:null,dirty:!1,setFBO:null},at=["rgba"],lt=["rgba4","rgb565","rgb5 a1"];G.ext_srgb&&lt.push("srgba"),G.ext_color_buffer_half_float&&lt.push("rgba16f","rgb16f"),G.webgl_color_buffer_float&&lt.push("rgba32f");var vt=["uint8"];G.oes_texture_half_float&&vt.push("half float","float16"),G.oes_texture_float&&vt.push("float","float32");function ft(mt,et,qe){this.target=mt,this.texture=et,this.renderbuffer=qe;var rr=0,cr=0;et?(rr=et.width,cr=et.height):qe&&(rr=qe.width,cr=qe.height),this.width=rr,this.height=cr}function it(mt){mt&&(mt.texture&&mt.texture._texture.decRef(),mt.renderbuffer&&mt.renderbuffer._renderbuffer.decRef())}function St(mt,et,qe){if(mt)if(mt.texture){var rr=mt.texture._texture,cr=Math.max(1,rr.width),Gt=Math.max(1,rr.height);j(cr===et&&Gt===qe,"inconsistent width/height for supplied texture"),rr.refCount+=1}else{var mr=mt.renderbuffer._renderbuffer;j(mr.width===et&&mr.height===qe,"inconsistent width/height for renderbuffer"),mr.refCount+=1}}function st(mt,et){et&&(et.texture?_.framebufferTexture2D(ri,mt,et.target,et.texture._texture.texture,0):_.framebufferRenderbuffer(ri,mt,bf,et.renderbuffer._renderbuffer.renderbuffer))}function Ot(mt){var et=ra,qe=null,rr=null,cr=mt;typeof mt=="object"&&(cr=mt.data,"target"in mt&&(et=mt.target|0)),j.type(cr,"function","invalid attachment data");var Gt=cr._reglType;return Gt==="texture2d"?(qe=cr,j(et===ra)):Gt==="textureCube"?(qe=cr,j(et>=Wu&&et<Wu+6,"invalid cube map target")):Gt==="renderbuffer"?(rr=cr,et=bf):j.raise("invalid regl object for attachment"),new ft(et,qe,rr)}function Ee(mt,et,qe,rr,cr){if(qe){var Gt=Ce.create2D({width:mt,height:et,format:rr,type:cr});return Gt._texture.refCount=0,new ft(ra,Gt,null)}else{var mr=Je.create({width:mt,height:et,format:rr});return mr._renderbuffer.refCount=0,new ft(bf,null,mr)}}function Me(mt){return mt&&(mt.texture||mt.renderbuffer)}function yt(mt,et,qe){mt&&(mt.texture?mt.texture.resize(et,qe):mt.renderbuffer&&mt.renderbuffer.resize(et,qe),mt.width=et,mt.height=qe)}var xt=0,nt={};function ct(){this.id=xt++,nt[this.id]=this,this.framebuffer=_.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ot(mt){mt.colorAttachments.forEach(it),it(mt.depthAttachment),it(mt.stencilAttachment),it(mt.depthStencilAttachment)}function Ze(mt){var et=mt.framebuffer;j(et,"must not double destroy framebuffer"),_.deleteFramebuffer(et),mt.framebuffer=null,De.framebufferCount--,delete nt[mt.id]}function Ve(mt){var et;_.bindFramebuffer(ri,mt.framebuffer);var qe=mt.colorAttachments;for(et=0;et<qe.length;++et)st(hd+et,qe[et]);for(et=qe.length;et<q.maxColorAttachments;++et)_.framebufferTexture2D(ri,hd+et,ra,null,0);_.framebufferTexture2D(ri,xi,ra,null,0),_.framebufferTexture2D(ri,pd,ra,null,0),_.framebufferTexture2D(ri,vd,ra,null,0),st(pd,mt.depthAttachment),st(vd,mt.stencilAttachment),st(xi,mt.depthStencilAttachment);var rr=_.checkFramebufferStatus(ri);!_.isContextLost()&&rr!==yd&&j.raise("framebuffer configuration not supported, status = "+Za[rr]),_.bindFramebuffer(ri,ke.next?ke.next.framebuffer:null),ke.cur=ke.next,_.getError()}function ze(mt,et){var qe=new ct;De.framebufferCount++;function rr(Gt,mr){var ar;j(ke.next!==qe,"can not update framebuffer which is currently in use");var yr=0,Ar=0,fn=!0,vn=!0,Or=null,hn=!0,Wr="rgba",Yr="uint8",pn=1,cn=null,bn=null,yn=null,Fr=!1;if(typeof Gt=="number")yr=Gt|0,Ar=mr|0||yr;else if(!Gt)yr=Ar=1;else{j.type(Gt,"object","invalid arguments for framebuffer");var dr=Gt;if("shape"in dr){var Tn=dr.shape;j(Array.isArray(Tn)&&Tn.length>=2,"invalid shape for framebuffer"),yr=Tn[0],Ar=Tn[1]}else"radius"in dr&&(yr=Ar=dr.radius),"width"in dr&&(yr=dr.width),"height"in dr&&(Ar=dr.height);("color"in dr||"colors"in dr)&&(Or=dr.color||dr.colors,Array.isArray(Or)&&j(Or.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),Or||("colorCount"in dr&&(pn=dr.colorCount|0,j(pn>0,"invalid color buffer count")),"colorTexture"in dr&&(hn=!!dr.colorTexture,Wr="rgba4"),"colorType"in dr&&(Yr=dr.colorType,hn?(j(G.oes_texture_float||!(Yr==="float"||Yr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),j(G.oes_texture_half_float||!(Yr==="half float"||Yr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Yr==="half float"||Yr==="float16"?(j(G.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wr="rgba16f"):(Yr==="float"||Yr==="float32")&&(j(G.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wr="rgba32f"),j.oneOf(Yr,vt,"invalid color type")),"colorFormat"in dr&&(Wr=dr.colorFormat,at.indexOf(Wr)>=0?hn=!0:lt.indexOf(Wr)>=0?hn=!1:hn?j.oneOf(dr.colorFormat,at,"invalid color format for texture"):j.oneOf(dr.colorFormat,lt,"invalid color format for renderbuffer"))),("depthTexture"in dr||"depthStencilTexture"in dr)&&(Fr=!!(dr.depthTexture||dr.depthStencilTexture),j(!Fr||G.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in dr&&(typeof dr.depth=="boolean"?fn=dr.depth:(cn=dr.depth,vn=!1)),"stencil"in dr&&(typeof dr.stencil=="boolean"?vn=dr.stencil:(bn=dr.stencil,fn=!1)),"depthStencil"in dr&&(typeof dr.depthStencil=="boolean"?fn=vn=dr.depthStencil:(yn=dr.depthStencil,fn=!1,vn=!1))}var Ir=null,qt=null,Sr=null,Pr=null;if(Array.isArray(Or))Ir=Or.map(Ot);else if(Or)Ir=[Ot(Or)];else for(Ir=new Array(pn),ar=0;ar<pn;++ar)Ir[ar]=Ee(yr,Ar,hn,Wr,Yr);j(G.webgl_draw_buffers||Ir.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),j(Ir.length<=q.maxColorAttachments,"too many color attachments, not supported"),yr=yr||Ir[0].width,Ar=Ar||Ir[0].height,cn?qt=Ot(cn):fn&&!vn&&(qt=Ee(yr,Ar,Fr,"depth","uint32")),bn?Sr=Ot(bn):vn&&!fn&&(Sr=Ee(yr,Ar,!1,"stencil","uint8")),yn?Pr=Ot(yn):!cn&&!bn&&vn&&fn&&(Pr=Ee(yr,Ar,Fr,"depth stencil","depth stencil")),j(!!cn+!!bn+!!yn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var an=null;for(ar=0;ar<Ir.length;++ar)if(St(Ir[ar],yr,Ar),j(!Ir[ar]||Ir[ar].texture&&by.indexOf(Ir[ar].texture._texture.format)>=0||Ir[ar].renderbuffer&&xy.indexOf(Ir[ar].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ar+" is invalid"),Ir[ar]&&Ir[ar].texture){var Fo=$s[Ir[ar].texture._texture.format]*Yu[Ir[ar].texture._texture.type];an===null?an=Fo:j(an===Fo,"all color attachments much have the same number of bits per pixel.")}return St(qt,yr,Ar),j(!qt||qt.texture&&qt.texture._texture.format===Of||qt.renderbuffer&&qt.renderbuffer._renderbuffer.format===bd,"invalid depth attachment for framebuffer object"),St(Sr,yr,Ar),j(!Sr||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===Oy,"invalid stencil attachment for framebuffer object"),St(Pr,yr,Ar),j(!Pr||Pr.texture&&Pr.texture._texture.format===Tf||Pr.renderbuffer&&Pr.renderbuffer._renderbuffer.format===Tf,"invalid depth-stencil attachment for framebuffer object"),ot(qe),qe.width=yr,qe.height=Ar,qe.colorAttachments=Ir,qe.depthAttachment=qt,qe.stencilAttachment=Sr,qe.depthStencilAttachment=Pr,rr.color=Ir.map(Me),rr.depth=Me(qt),rr.stencil=Me(Sr),rr.depthStencil=Me(Pr),rr.width=qe.width,rr.height=qe.height,Ve(qe),rr}function cr(Gt,mr){j(ke.next!==qe,"can not resize a framebuffer which is currently in use");var ar=Math.max(Gt|0,1),yr=Math.max(mr|0||ar,1);if(ar===qe.width&&yr===qe.height)return rr;for(var Ar=qe.colorAttachments,fn=0;fn<Ar.length;++fn)yt(Ar[fn],ar,yr);return yt(qe.depthAttachment,ar,yr),yt(qe.stencilAttachment,ar,yr),yt(qe.depthStencilAttachment,ar,yr),qe.width=rr.width=ar,qe.height=rr.height=yr,Ve(qe),rr}return rr(mt,et),u(rr,{resize:cr,_reglType:"framebuffer",_framebuffer:qe,destroy:function(){Ze(qe),ot(qe)},use:function(Gt){ke.setFBO({framebuffer:rr},Gt)}})}function At(mt){var et=Array(6);function qe(cr){var Gt;j(et.indexOf(ke.next)<0,"can not update framebuffer which is currently in use");var mr={color:null},ar=0,yr=null,Ar="rgba",fn="uint8",vn=1;if(typeof cr=="number")ar=cr|0;else if(!cr)ar=1;else{j.type(cr,"object","invalid arguments for framebuffer");var Or=cr;if("shape"in Or){var hn=Or.shape;j(Array.isArray(hn)&&hn.length>=2,"invalid shape for framebuffer"),j(hn[0]===hn[1],"cube framebuffer must be square"),ar=hn[0]}else"radius"in Or&&(ar=Or.radius|0),"width"in Or?(ar=Or.width|0,"height"in Or&&j(Or.height===ar,"must be square")):"height"in Or&&(ar=Or.height|0);("color"in Or||"colors"in Or)&&(yr=Or.color||Or.colors,Array.isArray(yr)&&j(yr.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),yr||("colorCount"in Or&&(vn=Or.colorCount|0,j(vn>0,"invalid color buffer count")),"colorType"in Or&&(j.oneOf(Or.colorType,vt,"invalid color type"),fn=Or.colorType),"colorFormat"in Or&&(Ar=Or.colorFormat,j.oneOf(Or.colorFormat,at,"invalid color format for texture"))),"depth"in Or&&(mr.depth=Or.depth),"stencil"in Or&&(mr.stencil=Or.stencil),"depthStencil"in Or&&(mr.depthStencil=Or.depthStencil)}var Wr;if(yr)if(Array.isArray(yr))for(Wr=[],Gt=0;Gt<yr.length;++Gt)Wr[Gt]=yr[Gt];else Wr=[yr];else{Wr=Array(vn);var Yr={radius:ar,format:Ar,type:fn};for(Gt=0;Gt<vn;++Gt)Wr[Gt]=Ce.createCube(Yr)}for(mr.color=Array(Wr.length),Gt=0;Gt<Wr.length;++Gt){var pn=Wr[Gt];j(typeof pn=="function"&&pn._reglType==="textureCube","invalid cube map"),ar=ar||pn.width,j(pn.width===ar&&pn.height===ar,"invalid cube map shape"),mr.color[Gt]={target:Wu,data:Wr[Gt]}}for(Gt=0;Gt<6;++Gt){for(var cn=0;cn<Wr.length;++cn)mr.color[cn].target=Wu+Gt;Gt>0&&(mr.depth=et[0].depth,mr.stencil=et[0].stencil,mr.depthStencil=et[0].depthStencil),et[Gt]?et[Gt](mr):et[Gt]=ze(mr)}return u(qe,{width:ar,height:ar,color:Wr})}function rr(cr){var Gt,mr=cr|0;if(j(mr>0&&mr<=q.maxCubeMapSize,"invalid radius for cube fbo"),mr===qe.width)return qe;var ar=qe.color;for(Gt=0;Gt<ar.length;++Gt)ar[Gt].resize(mr);for(Gt=0;Gt<6;++Gt)et[Gt].resize(mr);return qe.width=qe.height=mr,qe}return qe(mt),u(qe,{faces:et,resize:rr,_reglType:"framebufferCube",destroy:function(){et.forEach(function(cr){cr.destroy()})}})}function ir(){ke.cur=null,ke.next=null,ke.dirty=!0,un(nt).forEach(function(mt){mt.framebuffer=_.createFramebuffer(),Ve(mt)})}return u(ke,{getFramebuffer:function(mt){if(typeof mt=="function"&&mt._reglType==="framebuffer"){var et=mt._framebuffer;if(et instanceof ct)return et}return null},create:ze,createCube:At,clear:function(){un(nt).forEach(Ze)},restore:ir})}var Ay=5126,Ti=34962;function na(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ay,this.offset=0,this.stride=0,this.divisor=0}function Py(_,G,q,Ce,Je){for(var De=q.maxAttributes,ke=new Array(De),at=0;at<De;++at)ke[at]=new na;var lt=0,vt={},ft={Record:na,scope:{},state:ke,currentVAO:null,targetVAO:null,restore:St()?nt:function(){},createVAO:ct,getVAO:Ot,destroyBuffer:it,setVAO:St()?Ee:Me,clear:St()?yt:function(){}};function it(ot){for(var Ze=0;Ze<ke.length;++Ze){var Ve=ke[Ze];Ve.buffer===ot&&(_.disableVertexAttribArray(Ze),Ve.buffer=null)}}function St(){return G.oes_vertex_array_object}function st(){return G.angle_instanced_arrays}function Ot(ot){return typeof ot=="function"&&ot._vao?ot._vao:null}function Ee(ot){if(ot!==ft.currentVAO){var Ze=St();ot?Ze.bindVertexArrayOES(ot.vao):Ze.bindVertexArrayOES(null),ft.currentVAO=ot}}function Me(ot){if(ot!==ft.currentVAO){if(ot)ot.bindAttrs();else for(var Ze=st(),Ve=0;Ve<ke.length;++Ve){var ze=ke[Ve];ze.buffer?(_.enableVertexAttribArray(Ve),_.vertexAttribPointer(Ve,ze.size,ze.type,ze.normalized,ze.stride,ze.offfset),Ze&&ze.divisor&&Ze.vertexAttribDivisorANGLE(Ve,ze.divisor)):(_.disableVertexAttribArray(Ve),_.vertexAttrib4f(Ve,ze.x,ze.y,ze.z,ze.w))}ft.currentVAO=ot}}function yt(){un(vt).forEach(function(ot){ot.destroy()})}function xt(){this.id=++lt,this.attributes=[];var ot=St();ot?this.vao=ot.createVertexArrayOES():this.vao=null,vt[this.id]=this,this.buffers=[]}xt.prototype.bindAttrs=function(){for(var ot=st(),Ze=this.attributes,Ve=0;Ve<Ze.length;++Ve){var ze=Ze[Ve];ze.buffer?(_.enableVertexAttribArray(Ve),_.bindBuffer(Ti,ze.buffer.buffer),_.vertexAttribPointer(Ve,ze.size,ze.type,ze.normalized,ze.stride,ze.offset),ot&&ze.divisor&&ot.vertexAttribDivisorANGLE(Ve,ze.divisor)):(_.disableVertexAttribArray(Ve),_.vertexAttrib4f(Ve,ze.x,ze.y,ze.z,ze.w))}for(var At=Ze.length;At<De;++At)_.disableVertexAttribArray(At)},xt.prototype.refresh=function(){var ot=St();ot&&(ot.bindVertexArrayOES(this.vao),this.bindAttrs(),ft.currentVAO=this)},xt.prototype.destroy=function(){if(this.vao){var ot=St();this===ft.currentVAO&&(ft.currentVAO=null,ot.bindVertexArrayOES(null)),ot.deleteVertexArrayOES(this.vao),this.vao=null}vt[this.id]&&(delete vt[this.id],Ce.vaoCount-=1)};function nt(){var ot=St();ot&&un(vt).forEach(function(Ze){Ze.refresh()})}function ct(ot){var Ze=new xt;Ce.vaoCount+=1;function Ve(ze){j(Array.isArray(ze),"arguments to vertex array constructor must be an array"),j(ze.length<De,"too many attributes"),j(ze.length>0,"must specify at least one attribute");var At={},ir=Ze.attributes;ir.length=ze.length;for(var mt=0;mt<ze.length;++mt){var et=ze[mt],qe=ir[mt]=new na,rr=et.data||et;if(Array.isArray(rr)||i(rr)||oo(rr)){var cr;Ze.buffers[mt]&&(cr=Ze.buffers[mt],i(rr)&&cr._buffer.byteLength>=rr.byteLength?cr.subdata(rr):(cr.destroy(),Ze.buffers[mt]=null)),Ze.buffers[mt]||(cr=Ze.buffers[mt]=Je.create(et,Ti,!1,!0)),qe.buffer=Je.getBuffer(cr),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1,At[mt]=1}else Je.getBuffer(et)?(qe.buffer=Je.getBuffer(et),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1):Je.getBuffer(et.buffer)?(qe.buffer=Je.getBuffer(et.buffer),qe.size=(+et.size||qe.buffer.dimension)|0,qe.normalized=!!et.normalized||!1,"type"in et?(j.parameter(et.type,Ro,"invalid buffer type"),qe.type=Ro[et.type]):qe.type=qe.buffer.dtype,qe.offset=(et.offset||0)|0,qe.stride=(et.stride||0)|0,qe.divisor=(et.divisor||0)|0,qe.state=1,j(qe.size>=1&&qe.size<=4,"size must be between 1 and 4"),j(qe.offset>=0,"invalid offset"),j(qe.stride>=0&&qe.stride<=255,"stride must be between 0 and 255"),j(qe.divisor>=0,"divisor must be positive"),j(!qe.divisor||!!G.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in et?(j(mt>0,"first attribute must not be a constant"),qe.x=+et.x||0,qe.y=+et.y||0,qe.z=+et.z||0,qe.w=+et.w||0,qe.state=2):j(!1,"invalid attribute spec for location "+mt)}for(var Gt=0;Gt<Ze.buffers.length;++Gt)!At[Gt]&&Ze.buffers[Gt]&&(Ze.buffers[Gt].destroy(),Ze.buffers[Gt]=null);return Ze.refresh(),Ve}return Ve.destroy=function(){for(var ze=0;ze<Ze.buffers.length;++ze)Ze.buffers[ze]&&Ze.buffers[ze].destroy();Ze.buffers.length=0,Ze.destroy()},Ve._vao=Ze,Ve._reglType="vao",Ve(ot)}return ft}var Af=35632,xd=35633,Ku=35718,_y=35721;function Td(_,G,q,Ce){var Je={},De={};function ke(Ee,Me,yt,xt){this.name=Ee,this.id=Me,this.location=yt,this.info=xt}function at(Ee,Me){for(var yt=0;yt<Ee.length;++yt)if(Ee[yt].id===Me.id){Ee[yt].location=Me.location;return}Ee.push(Me)}function lt(Ee,Me,yt){var xt=Ee===Af?Je:De,nt=xt[Me];if(!nt){var ct=G.str(Me);nt=_.createShader(Ee),_.shaderSource(nt,ct),_.compileShader(nt),j.shaderError(_,nt,ct,Ee,yt),xt[Me]=nt}return nt}var vt={},ft=[],it=0;function St(Ee,Me){this.id=it++,this.fragId=Ee,this.vertId=Me,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ce.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function st(Ee,Me,yt){var xt,nt,ct=lt(Af,Ee.fragId),ot=lt(xd,Ee.vertId),Ze=Ee.program=_.createProgram();if(_.attachShader(Ze,ct),_.attachShader(Ze,ot),yt)for(xt=0;xt<yt.length;++xt){var Ve=yt[xt];_.bindAttribLocation(Ze,Ve[0],Ve[1])}_.linkProgram(Ze),j.linkError(_,Ze,G.str(Ee.fragId),G.str(Ee.vertId),Me);var ze=_.getProgramParameter(Ze,Ku);Ce.profile&&(Ee.stats.uniformsCount=ze);var At=Ee.uniforms;for(xt=0;xt<ze;++xt)if(nt=_.getActiveUniform(Ze,xt),nt)if(nt.size>1)for(var ir=0;ir<nt.size;++ir){var mt=nt.name.replace("[0]","["+ir+"]");at(At,new ke(mt,G.id(mt),_.getUniformLocation(Ze,mt),nt))}else at(At,new ke(nt.name,G.id(nt.name),_.getUniformLocation(Ze,nt.name),nt));var et=_.getProgramParameter(Ze,_y);Ce.profile&&(Ee.stats.attributesCount=et);var qe=Ee.attributes;for(xt=0;xt<et;++xt)nt=_.getActiveAttrib(Ze,xt),nt&&at(qe,new ke(nt.name,G.id(nt.name),_.getAttribLocation(Ze,nt.name),nt))}Ce.profile&&(q.getMaxUniformsCount=function(){var Ee=0;return ft.forEach(function(Me){Me.stats.uniformsCount>Ee&&(Ee=Me.stats.uniformsCount)}),Ee},q.getMaxAttributesCount=function(){var Ee=0;return ft.forEach(function(Me){Me.stats.attributesCount>Ee&&(Ee=Me.stats.attributesCount)}),Ee});function Ot(){Je={},De={};for(var Ee=0;Ee<ft.length;++Ee)st(ft[Ee],null,ft[Ee].attributes.map(function(Me){return[Me.location,Me.name]}))}return{clear:function(){var Ee=_.deleteShader.bind(_);un(Je).forEach(Ee),Je={},un(De).forEach(Ee),De={},ft.forEach(function(Me){_.deleteProgram(Me.program)}),ft.length=0,vt={},q.shaderCount=0},program:function(Ee,Me,yt,xt){j.command(Ee>=0,"missing vertex shader",yt),j.command(Me>=0,"missing fragment shader",yt);var nt=vt[Me];nt||(nt=vt[Me]={});var ct=nt[Ee];if(ct&&(ct.refCount++,!xt))return ct;var ot=new St(Me,Ee);return q.shaderCount++,st(ot,yt,xt),ct||(nt[Ee]=ot),ft.push(ot),u(ot,{destroy:function(){if(ot.refCount--,ot.refCount<=0){_.deleteProgram(ot.program);var Ze=ft.indexOf(ot);ft.splice(Ze,1),q.shaderCount--}nt[ot.vertId].refCount<=0&&(_.deleteShader(De[ot.vertId]),delete De[ot.vertId],delete vt[ot.fragId][ot.vertId]),Object.keys(vt[ot.fragId]).length||(_.deleteShader(Je[ot.fragId]),delete Je[ot.fragId],delete vt[ot.fragId])}})},restore:Ot,shader:lt,frag:-1,vert:-1}}var wy=6408,Vs=5121,Ad=3333,Ja=5126;function Ny(_,G,q,Ce,Je,De,ke){function at(ft){var it;G.next===null?(j(Je.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),it=Vs):(j(G.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),it=G.next.colorAttachments[0].texture._texture.type,De.oes_texture_float?(j(it===Vs||it===Ja,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),it===Ja&&j(ke.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):j(it===Vs,"Reading from a framebuffer is only allowed for the type 'uint8'"));var St=0,st=0,Ot=Ce.framebufferWidth,Ee=Ce.framebufferHeight,Me=null;i(ft)?Me=ft:ft&&(j.type(ft,"object","invalid arguments to regl.read()"),St=ft.x|0,st=ft.y|0,j(St>=0&&St<Ce.framebufferWidth,"invalid x offset for regl.read"),j(st>=0&&st<Ce.framebufferHeight,"invalid y offset for regl.read"),Ot=(ft.width||Ce.framebufferWidth-St)|0,Ee=(ft.height||Ce.framebufferHeight-st)|0,Me=ft.data||null),Me&&(it===Vs?j(Me instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):it===Ja&&j(Me instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),j(Ot>0&&Ot+St<=Ce.framebufferWidth,"invalid width for read pixels"),j(Ee>0&&Ee+st<=Ce.framebufferHeight,"invalid height for read pixels"),q();var yt=Ot*Ee*4;return Me||(it===Vs?Me=new Uint8Array(yt):it===Ja&&(Me=Me||new Float32Array(yt))),j.isTypedArray(Me,"data buffer for regl.read() must be a typedarray"),j(Me.byteLength>=yt,"data buffer for regl.read() too small"),_.pixelStorei(Ad,4),_.readPixels(St,st,Ot,Ee,wy,it,Me),Me}function lt(ft){var it;return G.setFBO({framebuffer:ft.framebuffer},function(){it=at(ft)}),it}function vt(ft){return!ft||!("framebuffer"in ft)?at(ft):lt(ft)}return vt}function Qa(_){return Array.prototype.slice.call(_)}function qa(_){return Qa(_).join("")}function My(){var _=0,G=[],q=[];function Ce(it){for(var St=0;St<q.length;++St)if(q[St]===it)return G[St];var st="g"+_++;return G.push(st),q.push(it),st}function Je(){var it=[];function St(){it.push.apply(it,Qa(arguments))}var st=[];function Ot(){var Ee="v"+_++;return st.push(Ee),arguments.length>0&&(it.push(Ee,"="),it.push.apply(it,Qa(arguments)),it.push(";")),Ee}return u(St,{def:Ot,toString:function(){return qa([st.length>0?"var "+st.join(",")+";":"",qa(it)])}})}function De(){var it=Je(),St=Je(),st=it.toString,Ot=St.toString;function Ee(Me,yt){St(Me,yt,"=",it.def(Me,yt),";")}return u(function(){it.apply(it,Qa(arguments))},{def:it.def,entry:it,exit:St,save:Ee,set:function(Me,yt,xt){Ee(Me,yt),it(Me,yt,"=",xt,";")},toString:function(){return st()+Ot()}})}function ke(){var it=qa(arguments),St=De(),st=De(),Ot=St.toString,Ee=st.toString;return u(St,{then:function(){return St.apply(St,Qa(arguments)),this},else:function(){return st.apply(st,Qa(arguments)),this},toString:function(){var Me=Ee();return Me&&(Me="else{"+Me+"}"),qa(["if(",it,"){",Ot(),"}",Me])}})}var at=Je(),lt={};function vt(it,St){var st=[];function Ot(){var nt="a"+st.length;return st.push(nt),nt}St=St||0;for(var Ee=0;Ee<St;++Ee)Ot();var Me=De(),yt=Me.toString,xt=lt[it]=u(Me,{arg:Ot,toString:function(){return qa(["function(",st.join(),"){",yt(),"}"])}});return xt}function ft(){var it=['"use strict";',at,"return {"];Object.keys(lt).forEach(function(Ot){it.push('"',Ot,'":',lt[Ot].toString(),",")}),it.push("}");var St=qa(it).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),st=Function.apply(null,G.concat(St));return st.apply(null,q)}return{global:at,link:Ce,block:Je,proc:vt,scope:De,cond:ke,compile:ft}}var es="xyzw".split(""),Pf=5121,ts=1,_f=2,wf=0,Zu=1,Nf=2,Mf=3,Ju=4,Pd=5,Ws=6,_d="dither",wd="blend.enable",Nd="blend.color",Ys="blend.equation",Rf="blend.func",Qu="depth.enable",Md="depth.func",Rd="depth.range",Dd="depth.mask",Df="colorMask",Id="cull.enable",Cd="cull.face",If="frontFace",Cf="lineWidth",Ld="polygonOffset.enable",qu="polygonOffset.offset",Lf="sample.alpha",jf="sample.enable",Bf="sample.coverage",jd="stencil.enable",Bd="stencil.mask",Ff="stencil.func",rs="stencil.opFront",Ks="stencil.opBack",Fd="scissor.enable",Ai="scissor.box",ni="viewport",oa="profile",ia="framebuffer",ns="vert",Zs="frag",aa="elements",sa="primitive",ua="count",el="offset",Js="instances",Qs="vao",Gf="Width",kf="Height",os=ia+Gf,is=ia+kf,Uf=ni+Gf,Ry=ni+kf,Gd="drawingBuffer",kd=Gd+Gf,Ud=Gd+kf,Dy=[Rf,Ys,Ff,rs,Ks,Bf,ni,Ai,qu],as=34962,Iy=34963,Cy=35632,Ly=35633,zd=3553,jy=34067,Hd=2884,By=3042,Fy=3024,Gy=2960,ky=2929,Uy=3089,zy=32823,Hy=32926,Xy=32928,zf=5126,la=35664,tl=35665,fa=35666,Hf=5124,ss=35667,rl=35668,nl=35669,Xf=35670,ca=35671,ol=35672,oi=35673,qs=35674,eu=35675,us=35676,tu=35678,ls=35680,Xd=4,ru=1028,da=1029,$d=2304,$f=2305,$y=32775,Vy=32776,Wy=519,Pi=7680,Vd=0,Vf=1,Wd=32774,Yy=513,Yd=36160,Ky=36064,Bo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wf=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],fs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},_i={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Kd={frag:Cy,vert:Ly},Mn={cw:$d,ccw:$f};function il(_){return Array.isArray(_)||i(_)||oo(_)}function Zd(_){return _.sort(function(G,q){return G===ni?-1:q===ni?1:G<q?-1:1})}function Un(_,G,q,Ce){this.thisDep=_,this.contextDep=G,this.propDep=q,this.append=Ce}function wi(_){return _&&!(_.thisDep||_.contextDep||_.propDep)}function ln(_){return new Un(!1,!1,!1,_)}function Kn(_,G){var q=_.type;if(q===wf){var Ce=_.data.length;return new Un(!0,Ce>=1,Ce>=2,G)}else if(q===Ju){var Je=_.data;return new Un(Je.thisDep,Je.contextDep,Je.propDep,G)}else{if(q===Pd)return new Un(!1,!1,!1,G);if(q===Ws){for(var De=!1,ke=!1,at=!1,lt=0;lt<_.data.length;++lt){var vt=_.data[lt];if(vt.type===Zu)at=!0;else if(vt.type===Nf)ke=!0;else if(vt.type===Mf)De=!0;else if(vt.type===wf){De=!0;var ft=vt.data;ft>=1&&(ke=!0),ft>=2&&(at=!0)}else vt.type===Ju&&(De=De||vt.data.thisDep,ke=ke||vt.data.contextDep,at=at||vt.data.propDep)}return new Un(De,ke,at,G)}else return new Un(q===Mf,q===Nf,q===Zu,G)}}var Yf=new Un(!1,!1,!1,function(){});function Zy(_,G,q,Ce,Je,De,ke,at,lt,vt,ft,it,St,st,Ot){var Ee=vt.Record,Me={add:32774,subtract:32778,"reverse subtract":32779};q.ext_blend_minmax&&(Me.min=$y,Me.max=Vy);var yt=q.angle_instanced_arrays,xt=q.webgl_draw_buffers,nt={dirty:!0,profile:Ot.profile},ct={},ot=[],Ze={},Ve={};function ze(H){return H.replace(".","_")}function At(H,C,ie){var me=ze(H);ot.push(H),ct[me]=nt[me]=!!ie,Ze[me]=C}function ir(H,C,ie){var me=ze(H);ot.push(H),Array.isArray(ie)?(nt[me]=ie.slice(),ct[me]=ie.slice()):nt[me]=ct[me]=ie,Ve[me]=C}At(_d,Fy),At(wd,By),ir(Nd,"blendColor",[0,0,0,0]),ir(Ys,"blendEquationSeparate",[Wd,Wd]),ir(Rf,"blendFuncSeparate",[Vf,Vd,Vf,Vd]),At(Qu,ky,!0),ir(Md,"depthFunc",Yy),ir(Rd,"depthRange",[0,1]),ir(Dd,"depthMask",!0),ir(Df,Df,[!0,!0,!0,!0]),At(Id,Hd),ir(Cd,"cullFace",da),ir(If,If,$f),ir(Cf,Cf,1),At(Ld,zy),ir(qu,"polygonOffset",[0,0]),At(Lf,Hy),At(jf,Xy),ir(Bf,"sampleCoverage",[1,!1]),At(jd,Gy),ir(Bd,"stencilMask",-1),ir(Ff,"stencilFunc",[Wy,0,-1]),ir(rs,"stencilOpSeparate",[ru,Pi,Pi,Pi]),ir(Ks,"stencilOpSeparate",[da,Pi,Pi,Pi]),At(Fd,Uy),ir(Ai,"scissor",[0,0,_.drawingBufferWidth,_.drawingBufferHeight]),ir(ni,ni,[0,0,_.drawingBufferWidth,_.drawingBufferHeight]);var mt={gl:_,context:St,strings:G,next:ct,current:nt,draw:it,elements:De,buffer:Je,shader:ft,attributes:vt.state,vao:vt,uniforms:lt,framebuffer:at,extensions:q,timer:st,isBufferArgs:il},et={primTypes:yi,compareFuncs:fs,blendFuncs:Bo,blendEquations:Me,stencilOps:_i,glTypes:Ro,orientationType:Mn};j.optional(function(){mt.isArrayLike=qr}),xt&&(et.backBuffer=[da],et.drawBuffer=ht(Ce.maxDrawbuffers,function(H){return H===0?[0]:ht(H,function(C){return Ky+C})}));var qe=0;function rr(){var H=My(),C=H.link,ie=H.global;H.id=qe++,H.batchId="0";var me=C(mt),Se=H.shared={props:"a0"};Object.keys(mt).forEach(function(oe){Se[oe]=ie.def(me,".",oe)}),j.optional(function(){H.CHECK=C(j),H.commandStr=j.guessCommand(),H.command=C(H.commandStr),H.assert=function(oe,z,de){oe("if(!(",z,"))",this.CHECK,".commandRaise(",C(de),",",this.command,");")},et.invalidBlendCombinations=Wf});var ue=H.next={},ae=H.current={};Object.keys(Ve).forEach(function(oe){Array.isArray(nt[oe])&&(ue[oe]=ie.def(Se.next,".",oe),ae[oe]=ie.def(Se.current,".",oe))});var fe=H.constants={};Object.keys(et).forEach(function(oe){fe[oe]=ie.def(JSON.stringify(et[oe]))}),H.invoke=function(oe,z){switch(z.type){case wf:var de=["this",Se.context,Se.props,H.batchId];return oe.def(C(z.data),".call(",de.slice(0,Math.max(z.data.length+1,4)),")");case Zu:return oe.def(Se.props,z.data);case Nf:return oe.def(Se.context,z.data);case Mf:return oe.def("this",z.data);case Ju:return z.data.append(H,oe),z.data.ref;case Pd:return z.data.toString();case Ws:return z.data.map(function(Te){return H.invoke(oe,Te)})}},H.attribCache={};var X={};return H.scopeAttrib=function(oe){var z=G.id(oe);if(z in X)return X[z];var de=vt.scope[z];de||(de=vt.scope[z]=new Ee);var Te=X[z]=C(de);return Te},H}function cr(H){var C=H.static,ie=H.dynamic,me;if(oa in C){var Se=!!C[oa];me=ln(function(ae,fe){return Se}),me.enable=Se}else if(oa in ie){var ue=ie[oa];me=Kn(ue,function(ae,fe){return ae.invoke(fe,ue)})}return me}function Gt(H,C){var ie=H.static,me=H.dynamic;if(ia in ie){var Se=ie[ia];return Se?(Se=at.getFramebuffer(Se),j.command(Se,"invalid framebuffer object"),ln(function(ae,fe){var X=ae.link(Se),oe=ae.shared;fe.set(oe.framebuffer,".next",X);var z=oe.context;return fe.set(z,"."+os,X+".width"),fe.set(z,"."+is,X+".height"),X})):ln(function(ae,fe){var X=ae.shared;fe.set(X.framebuffer,".next","null");var oe=X.context;return fe.set(oe,"."+os,oe+"."+kd),fe.set(oe,"."+is,oe+"."+Ud),"null"})}else if(ia in me){var ue=me[ia];return Kn(ue,function(ae,fe){var X=ae.invoke(fe,ue),oe=ae.shared,z=oe.framebuffer,de=fe.def(z,".getFramebuffer(",X,")");j.optional(function(){ae.assert(fe,"!"+X+"||"+de,"invalid framebuffer object")}),fe.set(z,".next",de);var Te=oe.context;return fe.set(Te,"."+os,de+"?"+de+".width:"+Te+"."+kd),fe.set(Te,"."+is,de+"?"+de+".height:"+Te+"."+Ud),de})}else return null}function mr(H,C,ie){var me=H.static,Se=H.dynamic;function ue(X){if(X in me){var oe=me[X];j.commandType(oe,"object","invalid "+X,ie.commandStr);var z=!0,de=oe.x|0,Te=oe.y|0,Ye,Qe;return"width"in oe?(Ye=oe.width|0,j.command(Ye>=0,"invalid "+X,ie.commandStr)):z=!1,"height"in oe?(Qe=oe.height|0,j.command(Qe>=0,"invalid "+X,ie.commandStr)):z=!1,new Un(!z&&C&&C.thisDep,!z&&C&&C.contextDep,!z&&C&&C.propDep,function(Ht,hr){var kt=Ht.shared.context,Zt=Ye;"width"in oe||(Zt=hr.def(kt,".",os,"-",de));var lr=Qe;return"height"in oe||(lr=hr.def(kt,".",is,"-",Te)),[de,Te,Zt,lr]})}else if(X in Se){var $e=Se[X],pt=Kn($e,function(Ht,hr){var kt=Ht.invoke(hr,$e);j.optional(function(){Ht.assert(hr,kt+"&&typeof "+kt+'==="object"',"invalid "+X)});var Zt=Ht.shared.context,lr=hr.def(kt,".x|0"),Nr=hr.def(kt,".y|0"),en=hr.def('"width" in ',kt,"?",kt,".width|0:","(",Zt,".",os,"-",lr,")"),zn=hr.def('"height" in ',kt,"?",kt,".height|0:","(",Zt,".",is,"-",Nr,")");return j.optional(function(){Ht.assert(hr,en+">=0&&"+zn+">=0","invalid "+X)}),[lr,Nr,en,zn]});return C&&(pt.thisDep=pt.thisDep||C.thisDep,pt.contextDep=pt.contextDep||C.contextDep,pt.propDep=pt.propDep||C.propDep),pt}else return C?new Un(C.thisDep,C.contextDep,C.propDep,function(Ht,hr){var kt=Ht.shared.context;return[0,0,hr.def(kt,".",os),hr.def(kt,".",is)]}):null}var ae=ue(ni);if(ae){var fe=ae;ae=new Un(ae.thisDep,ae.contextDep,ae.propDep,function(X,oe){var z=fe.append(X,oe),de=X.shared.context;return oe.set(de,"."+Uf,z[2]),oe.set(de,"."+Ry,z[3]),z})}return{viewport:ae,scissor_box:ue(Ai)}}function ar(H,C){var ie=H.static,me=typeof ie[Zs]=="string"&&typeof ie[ns]=="string";if(me){if(Object.keys(C.dynamic).length>0)return null;var Se=C.static,ue=Object.keys(Se);if(ue.length>0&&typeof Se[ue[0]]=="number"){for(var ae=[],fe=0;fe<ue.length;++fe)j(typeof Se[ue[fe]]=="number","must specify all vertex attribute locations when using vaos"),ae.push([Se[ue[fe]]|0,ue[fe]]);return ae}}return null}function yr(H,C,ie){var me=H.static,Se=H.dynamic;function ue(z){if(z in me){var de=G.id(me[z]);j.optional(function(){ft.shader(Kd[z],de,j.guessCommand())});var Te=ln(function(){return de});return Te.id=de,Te}else if(z in Se){var Ye=Se[z];return Kn(Ye,function(Qe,$e){var pt=Qe.invoke($e,Ye),Ht=$e.def(Qe.shared.strings,".id(",pt,")");return j.optional(function(){$e(Qe.shared.shader,".shader(",Kd[z],",",Ht,",",Qe.command,");")}),Ht})}return null}var ae=ue(Zs),fe=ue(ns),X=null,oe;return wi(ae)&&wi(fe)?(X=ft.program(fe.id,ae.id,null,ie),oe=ln(function(z,de){return z.link(X)})):oe=new Un(ae&&ae.thisDep||fe&&fe.thisDep,ae&&ae.contextDep||fe&&fe.contextDep,ae&&ae.propDep||fe&&fe.propDep,function(z,de){var Te=z.shared.shader,Ye;ae?Ye=ae.append(z,de):Ye=de.def(Te,".",Zs);var Qe;fe?Qe=fe.append(z,de):Qe=de.def(Te,".",ns);var $e=Te+".program("+Qe+","+Ye;return j.optional(function(){$e+=","+z.command}),de.def($e+")")}),{frag:ae,vert:fe,progVar:oe,program:X}}function Ar(H,C){var ie=H.static,me=H.dynamic;function Se(){if(aa in ie){var z=ie[aa];il(z)?z=De.getElements(De.create(z,!0)):z&&(z=De.getElements(z),j.command(z,"invalid elements",C.commandStr));var de=ln(function(Ye,Qe){if(z){var $e=Ye.link(z);return Ye.ELEMENTS=$e,$e}return Ye.ELEMENTS=null,null});return de.value=z,de}else if(aa in me){var Te=me[aa];return Kn(Te,function(Ye,Qe){var $e=Ye.shared,pt=$e.isBufferArgs,Ht=$e.elements,hr=Ye.invoke(Qe,Te),kt=Qe.def("null"),Zt=Qe.def(pt,"(",hr,")"),lr=Ye.cond(Zt).then(kt,"=",Ht,".createStream(",hr,");").else(kt,"=",Ht,".getElements(",hr,");");return j.optional(function(){Ye.assert(lr.else,"!"+hr+"||"+kt,"invalid elements")}),Qe.entry(lr),Qe.exit(Ye.cond(Zt).then(Ht,".destroyStream(",kt,");")),Ye.ELEMENTS=kt,kt})}return null}var ue=Se();function ae(){if(sa in ie){var z=ie[sa];return j.commandParameter(z,yi,"invalid primitve",C.commandStr),ln(function(Te,Ye){return yi[z]})}else if(sa in me){var de=me[sa];return Kn(de,function(Te,Ye){var Qe=Te.constants.primTypes,$e=Te.invoke(Ye,de);return j.optional(function(){Te.assert(Ye,$e+" in "+Qe,"invalid primitive, must be one of "+Object.keys(yi))}),Ye.def(Qe,"[",$e,"]")})}else if(ue)return wi(ue)?ue.value?ln(function(Te,Ye){return Ye.def(Te.ELEMENTS,".primType")}):ln(function(){return Xd}):new Un(ue.thisDep,ue.contextDep,ue.propDep,function(Te,Ye){var Qe=Te.ELEMENTS;return Ye.def(Qe,"?",Qe,".primType:",Xd)});return null}function fe(z,de){if(z in ie){var Te=ie[z]|0;return j.command(!de||Te>=0,"invalid "+z,C.commandStr),ln(function(Qe,$e){return de&&(Qe.OFFSET=Te),Te})}else if(z in me){var Ye=me[z];return Kn(Ye,function(Qe,$e){var pt=Qe.invoke($e,Ye);return de&&(Qe.OFFSET=pt,j.optional(function(){Qe.assert($e,pt+">=0","invalid "+z)})),pt})}else if(de&&ue)return ln(function(Qe,$e){return Qe.OFFSET="0",0});return null}var X=fe(el,!0);function oe(){if(ua in ie){var z=ie[ua]|0;return j.command(typeof z=="number"&&z>=0,"invalid vertex count",C.commandStr),ln(function(){return z})}else if(ua in me){var de=me[ua];return Kn(de,function(Qe,$e){var pt=Qe.invoke($e,de);return j.optional(function(){Qe.assert($e,"typeof "+pt+'==="number"&&'+pt+">=0&&"+pt+"===("+pt+"|0)","invalid vertex count")}),pt})}else if(ue)if(wi(ue)){if(ue)return X?new Un(X.thisDep,X.contextDep,X.propDep,function(Qe,$e){var pt=$e.def(Qe.ELEMENTS,".vertCount-",Qe.OFFSET);return j.optional(function(){Qe.assert($e,pt+">=0","invalid vertex offset/element buffer too small")}),pt}):ln(function(Qe,$e){return $e.def(Qe.ELEMENTS,".vertCount")});var Te=ln(function(){return-1});return j.optional(function(){Te.MISSING=!0}),Te}else{var Ye=new Un(ue.thisDep||X.thisDep,ue.contextDep||X.contextDep,ue.propDep||X.propDep,function(Qe,$e){var pt=Qe.ELEMENTS;return Qe.OFFSET?$e.def(pt,"?",pt,".vertCount-",Qe.OFFSET,":-1"):$e.def(pt,"?",pt,".vertCount:-1")});return j.optional(function(){Ye.DYNAMIC=!0}),Ye}return null}return{elements:ue,primitive:ae(),count:oe(),instances:fe(Js,!1),offset:X}}function fn(H,C){var ie=H.static,me=H.dynamic,Se={};return ot.forEach(function(ue){var ae=ze(ue);function fe(X,oe){if(ue in ie){var z=X(ie[ue]);Se[ae]=ln(function(){return z})}else if(ue in me){var de=me[ue];Se[ae]=Kn(de,function(Te,Ye){return oe(Te,Ye,Te.invoke(Ye,de))})}}switch(ue){case Id:case wd:case _d:case jd:case Qu:case Fd:case Ld:case Lf:case jf:case Dd:return fe(function(X){return j.commandType(X,"boolean",ue,C.commandStr),X},function(X,oe,z){return j.optional(function(){X.assert(oe,"typeof "+z+'==="boolean"',"invalid flag "+ue,X.commandStr)}),z});case Md:return fe(function(X){return j.commandParameter(X,fs,"invalid "+ue,C.commandStr),fs[X]},function(X,oe,z){var de=X.constants.compareFuncs;return j.optional(function(){X.assert(oe,z+" in "+de,"invalid "+ue+", must be one of "+Object.keys(fs))}),oe.def(de,"[",z,"]")});case Rd:return fe(function(X){return j.command(qr(X)&&X.length===2&&typeof X[0]=="number"&&typeof X[1]=="number"&&X[0]<=X[1],"depth range is 2d array",C.commandStr),X},function(X,oe,z){j.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===2&&typeof "+z+'[0]==="number"&&typeof '+z+'[1]==="number"&&'+z+"[0]<="+z+"[1]","depth range must be a 2d array")});var de=oe.def("+",z,"[0]"),Te=oe.def("+",z,"[1]");return[de,Te]});case Rf:return fe(function(X){j.commandType(X,"object","blend.func",C.commandStr);var oe="srcRGB"in X?X.srcRGB:X.src,z="srcAlpha"in X?X.srcAlpha:X.src,de="dstRGB"in X?X.dstRGB:X.dst,Te="dstAlpha"in X?X.dstAlpha:X.dst;return j.commandParameter(oe,Bo,ae+".srcRGB",C.commandStr),j.commandParameter(z,Bo,ae+".srcAlpha",C.commandStr),j.commandParameter(de,Bo,ae+".dstRGB",C.commandStr),j.commandParameter(Te,Bo,ae+".dstAlpha",C.commandStr),j.command(Wf.indexOf(oe+", "+de)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+oe+", "+de+")",C.commandStr),[Bo[oe],Bo[de],Bo[z],Bo[Te]]},function(X,oe,z){var de=X.constants.blendFuncs;j.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid blend func, must be an object")});function Te(kt,Zt){var lr=oe.def('"',kt,Zt,'" in ',z,"?",z,".",kt,Zt,":",z,".",kt);return j.optional(function(){X.assert(oe,lr+" in "+de,"invalid "+ue+"."+kt+Zt+", must be one of "+Object.keys(Bo))}),lr}var Ye=Te("src","RGB"),Qe=Te("dst","RGB");j.optional(function(){var kt=X.constants.invalidBlendCombinations;X.assert(oe,kt+".indexOf("+Ye+'+", "+'+Qe+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var $e=oe.def(de,"[",Ye,"]"),pt=oe.def(de,"[",Te("src","Alpha"),"]"),Ht=oe.def(de,"[",Qe,"]"),hr=oe.def(de,"[",Te("dst","Alpha"),"]");return[$e,Ht,pt,hr]});case Ys:return fe(function(X){if(typeof X=="string")return j.commandParameter(X,Me,"invalid "+ue,C.commandStr),[Me[X],Me[X]];if(typeof X=="object")return j.commandParameter(X.rgb,Me,ue+".rgb",C.commandStr),j.commandParameter(X.alpha,Me,ue+".alpha",C.commandStr),[Me[X.rgb],Me[X.alpha]];j.commandRaise("invalid blend.equation",C.commandStr)},function(X,oe,z){var de=X.constants.blendEquations,Te=oe.def(),Ye=oe.def(),Qe=X.cond("typeof ",z,'==="string"');return j.optional(function(){function $e(pt,Ht,hr){X.assert(pt,hr+" in "+de,"invalid "+Ht+", must be one of "+Object.keys(Me))}$e(Qe.then,ue,z),X.assert(Qe.else,z+"&&typeof "+z+'==="object"',"invalid "+ue),$e(Qe.else,ue+".rgb",z+".rgb"),$e(Qe.else,ue+".alpha",z+".alpha")}),Qe.then(Te,"=",Ye,"=",de,"[",z,"];"),Qe.else(Te,"=",de,"[",z,".rgb];",Ye,"=",de,"[",z,".alpha];"),oe(Qe),[Te,Ye]});case Nd:return fe(function(X){return j.command(qr(X)&&X.length===4,"blend.color must be a 4d array",C.commandStr),ht(4,function(oe){return+X[oe]})},function(X,oe,z){return j.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===4","blend.color must be a 4d array")}),ht(4,function(de){return oe.def("+",z,"[",de,"]")})});case Bd:return fe(function(X){return j.commandType(X,"number",ae,C.commandStr),X|0},function(X,oe,z){return j.optional(function(){X.assert(oe,"typeof "+z+'==="number"',"invalid stencil.mask")}),oe.def(z,"|0")});case Ff:return fe(function(X){j.commandType(X,"object",ae,C.commandStr);var oe=X.cmp||"keep",z=X.ref||0,de="mask"in X?X.mask:-1;return j.commandParameter(oe,fs,ue+".cmp",C.commandStr),j.commandType(z,"number",ue+".ref",C.commandStr),j.commandType(de,"number",ue+".mask",C.commandStr),[fs[oe],z,de]},function(X,oe,z){var de=X.constants.compareFuncs;j.optional(function(){function $e(){X.assert(oe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}$e(z+"&&typeof ",z,'==="object"'),$e('!("cmp" in ',z,")||(",z,".cmp in ",de,")")});var Te=oe.def('"cmp" in ',z,"?",de,"[",z,".cmp]",":",Pi),Ye=oe.def(z,".ref|0"),Qe=oe.def('"mask" in ',z,"?",z,".mask|0:-1");return[Te,Ye,Qe]});case rs:case Ks:return fe(function(X){j.commandType(X,"object",ae,C.commandStr);var oe=X.fail||"keep",z=X.zfail||"keep",de=X.zpass||"keep";return j.commandParameter(oe,_i,ue+".fail",C.commandStr),j.commandParameter(z,_i,ue+".zfail",C.commandStr),j.commandParameter(de,_i,ue+".zpass",C.commandStr),[ue===Ks?da:ru,_i[oe],_i[z],_i[de]]},function(X,oe,z){var de=X.constants.stencilOps;j.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid "+ue)});function Te(Ye){return j.optional(function(){X.assert(oe,'!("'+Ye+'" in '+z+")||("+z+"."+Ye+" in "+de+")","invalid "+ue+"."+Ye+", must be one of "+Object.keys(_i))}),oe.def('"',Ye,'" in ',z,"?",de,"[",z,".",Ye,"]:",Pi)}return[ue===Ks?da:ru,Te("fail"),Te("zfail"),Te("zpass")]});case qu:return fe(function(X){j.commandType(X,"object",ae,C.commandStr);var oe=X.factor|0,z=X.units|0;return j.commandType(oe,"number",ae+".factor",C.commandStr),j.commandType(z,"number",ae+".units",C.commandStr),[oe,z]},function(X,oe,z){j.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid "+ue)});var de=oe.def(z,".factor|0"),Te=oe.def(z,".units|0");return[de,Te]});case Cd:return fe(function(X){var oe=0;return X==="front"?oe=ru:X==="back"&&(oe=da),j.command(!!oe,ae,C.commandStr),oe},function(X,oe,z){return j.optional(function(){X.assert(oe,z+'==="front"||'+z+'==="back"',"invalid cull.face")}),oe.def(z,'==="front"?',ru,":",da)});case Cf:return fe(function(X){return j.command(typeof X=="number"&&X>=Ce.lineWidthDims[0]&&X<=Ce.lineWidthDims[1],"invalid line width, must be a positive number between "+Ce.lineWidthDims[0]+" and "+Ce.lineWidthDims[1],C.commandStr),X},function(X,oe,z){return j.optional(function(){X.assert(oe,"typeof "+z+'==="number"&&'+z+">="+Ce.lineWidthDims[0]+"&&"+z+"<="+Ce.lineWidthDims[1],"invalid line width")}),z});case If:return fe(function(X){return j.commandParameter(X,Mn,ae,C.commandStr),Mn[X]},function(X,oe,z){return j.optional(function(){X.assert(oe,z+'==="cw"||'+z+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),oe.def(z+'==="cw"?'+$d+":"+$f)});case Df:return fe(function(X){return j.command(qr(X)&&X.length===4,"color.mask must be length 4 array",C.commandStr),X.map(function(oe){return!!oe})},function(X,oe,z){return j.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===4","invalid color.mask")}),ht(4,function(de){return"!!"+z+"["+de+"]"})});case Bf:return fe(function(X){j.command(typeof X=="object"&&X,ae,C.commandStr);var oe="value"in X?X.value:1,z=!!X.invert;return j.command(typeof oe=="number"&&oe>=0&&oe<=1,"sample.coverage.value must be a number between 0 and 1",C.commandStr),[oe,z]},function(X,oe,z){j.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid sample.coverage")});var de=oe.def('"value" in ',z,"?+",z,".value:1"),Te=oe.def("!!",z,".invert");return[de,Te]})}}),Se}function vn(H,C){var ie=H.static,me=H.dynamic,Se={};return Object.keys(ie).forEach(function(ue){var ae=ie[ue],fe;if(typeof ae=="number"||typeof ae=="boolean")fe=ln(function(){return ae});else if(typeof ae=="function"){var X=ae._reglType;X==="texture2d"||X==="textureCube"?fe=ln(function(oe){return oe.link(ae)}):X==="framebuffer"||X==="framebufferCube"?(j.command(ae.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ue+'"',C.commandStr),fe=ln(function(oe){return oe.link(ae.color[0])})):j.commandRaise('invalid data for uniform "'+ue+'"',C.commandStr)}else qr(ae)?fe=ln(function(oe){var z=oe.global.def("[",ht(ae.length,function(de){return j.command(typeof ae[de]=="number"||typeof ae[de]=="boolean","invalid uniform "+ue,oe.commandStr),ae[de]}),"]");return z}):j.commandRaise('invalid or missing data for uniform "'+ue+'"',C.commandStr);fe.value=ae,Se[ue]=fe}),Object.keys(me).forEach(function(ue){var ae=me[ue];Se[ue]=Kn(ae,function(fe,X){return fe.invoke(X,ae)})}),Se}function Or(H,C){var ie=H.static,me=H.dynamic,Se={};return Object.keys(ie).forEach(function(ue){var ae=ie[ue],fe=G.id(ue),X=new Ee;if(il(ae))X.state=ts,X.buffer=Je.getBuffer(Je.create(ae,as,!1,!0)),X.type=0;else{var oe=Je.getBuffer(ae);if(oe)X.state=ts,X.buffer=oe,X.type=0;else if(j.command(typeof ae=="object"&&ae,"invalid data for attribute "+ue,C.commandStr),"constant"in ae){var z=ae.constant;X.buffer="null",X.state=_f,typeof z=="number"?X.x=z:(j.command(qr(z)&&z.length>0&&z.length<=4,"invalid constant for attribute "+ue,C.commandStr),es.forEach(function(Ht,hr){hr<z.length&&(X[Ht]=z[hr])}))}else{il(ae.buffer)?oe=Je.getBuffer(Je.create(ae.buffer,as,!1,!0)):oe=Je.getBuffer(ae.buffer),j.command(!!oe,'missing buffer for attribute "'+ue+'"',C.commandStr);var de=ae.offset|0;j.command(de>=0,'invalid offset for attribute "'+ue+'"',C.commandStr);var Te=ae.stride|0;j.command(Te>=0&&Te<256,'invalid stride for attribute "'+ue+'", must be integer betweeen [0, 255]',C.commandStr);var Ye=ae.size|0;j.command(!("size"in ae)||Ye>0&&Ye<=4,'invalid size for attribute "'+ue+'", must be 1,2,3,4',C.commandStr);var Qe=!!ae.normalized,$e=0;"type"in ae&&(j.commandParameter(ae.type,Ro,"invalid type for attribute "+ue,C.commandStr),$e=Ro[ae.type]);var pt=ae.divisor|0;"divisor"in ae&&(j.command(pt===0||yt,'cannot specify divisor for attribute "'+ue+'", instancing not supported',C.commandStr),j.command(pt>=0,'invalid divisor for attribute "'+ue+'"',C.commandStr)),j.optional(function(){var Ht=C.commandStr,hr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ae).forEach(function(kt){j.command(hr.indexOf(kt)>=0,'unknown parameter "'+kt+'" for attribute pointer "'+ue+'" (valid parameters are '+hr+")",Ht)})}),X.buffer=oe,X.state=ts,X.size=Ye,X.normalized=Qe,X.type=$e||oe.dtype,X.offset=de,X.stride=Te,X.divisor=pt}}Se[ue]=ln(function(Ht,hr){var kt=Ht.attribCache;if(fe in kt)return kt[fe];var Zt={isStream:!1};return Object.keys(X).forEach(function(lr){Zt[lr]=X[lr]}),X.buffer&&(Zt.buffer=Ht.link(X.buffer),Zt.type=Zt.type||Zt.buffer+".dtype"),kt[fe]=Zt,Zt})}),Object.keys(me).forEach(function(ue){var ae=me[ue];function fe(X,oe){var z=X.invoke(oe,ae),de=X.shared,Te=X.constants,Ye=de.isBufferArgs,Qe=de.buffer;j.optional(function(){X.assert(oe,z+"&&(typeof "+z+'==="object"||typeof '+z+'==="function")&&('+Ye+"("+z+")||"+Qe+".getBuffer("+z+")||"+Qe+".getBuffer("+z+".buffer)||"+Ye+"("+z+'.buffer)||("constant" in '+z+"&&(typeof "+z+'.constant==="number"||'+de.isArrayLike+"("+z+".constant))))",'invalid dynamic attribute "'+ue+'"')});var $e={isStream:oe.def(!1)},pt=new Ee;pt.state=ts,Object.keys(pt).forEach(function(Zt){$e[Zt]=oe.def(""+pt[Zt])});var Ht=$e.buffer,hr=$e.type;oe("if(",Ye,"(",z,")){",$e.isStream,"=true;",Ht,"=",Qe,".createStream(",as,",",z,");",hr,"=",Ht,".dtype;","}else{",Ht,"=",Qe,".getBuffer(",z,");","if(",Ht,"){",hr,"=",Ht,".dtype;",'}else if("constant" in ',z,"){",$e.state,"=",_f,";","if(typeof "+z+'.constant === "number"){',$e[es[0]],"=",z,".constant;",es.slice(1).map(function(Zt){return $e[Zt]}).join("="),"=0;","}else{",es.map(function(Zt,lr){return $e[Zt]+"="+z+".constant.length>"+lr+"?"+z+".constant["+lr+"]:0;"}).join(""),"}}else{","if(",Ye,"(",z,".buffer)){",Ht,"=",Qe,".createStream(",as,",",z,".buffer);","}else{",Ht,"=",Qe,".getBuffer(",z,".buffer);","}",hr,'="type" in ',z,"?",Te.glTypes,"[",z,".type]:",Ht,".dtype;",$e.normalized,"=!!",z,".normalized;");function kt(Zt){oe($e[Zt],"=",z,".",Zt,"|0;")}return kt("size"),kt("offset"),kt("stride"),kt("divisor"),oe("}}"),oe.exit("if(",$e.isStream,"){",Qe,".destroyStream(",Ht,");","}"),$e}Se[ue]=Kn(ae,fe)}),Se}function hn(H,C){var ie=H.static,me=H.dynamic;if(Qs in ie){var Se=ie[Qs];return Se!==null&&vt.getVAO(Se)===null&&(Se=vt.createVAO(Se)),ln(function(ae){return ae.link(vt.getVAO(Se))})}else if(Qs in me){var ue=me[Qs];return Kn(ue,function(ae,fe){var X=ae.invoke(fe,ue);return fe.def(ae.shared.vao+".getVAO("+X+")")})}return null}function Wr(H){var C=H.static,ie=H.dynamic,me={};return Object.keys(C).forEach(function(Se){var ue=C[Se];me[Se]=ln(function(ae,fe){return typeof ue=="number"||typeof ue=="boolean"?""+ue:ae.link(ue)})}),Object.keys(ie).forEach(function(Se){var ue=ie[Se];me[Se]=Kn(ue,function(ae,fe){return ae.invoke(fe,ue)})}),me}function Yr(H,C,ie,me,Se){var ue=H.static,ae=H.dynamic;j.optional(function(){var kt=[ia,ns,Zs,aa,sa,el,ua,Js,oa,Qs].concat(ot);function Zt(lr){Object.keys(lr).forEach(function(Nr){j.command(kt.indexOf(Nr)>=0,'unknown parameter "'+Nr+'"',Se.commandStr)})}Zt(ue),Zt(ae)});var fe=ar(H,C),X=Gt(H),oe=mr(H,X,Se),z=Ar(H,Se),de=fn(H,Se),Te=yr(H,Se,fe);function Ye(kt){var Zt=oe[kt];Zt&&(de[kt]=Zt)}Ye(ni),Ye(ze(Ai));var Qe=Object.keys(de).length>0,$e={framebuffer:X,draw:z,shader:Te,state:de,dirty:Qe,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if($e.profile=cr(H),$e.uniforms=vn(ie,Se),$e.drawVAO=$e.scopeVAO=hn(H),!$e.drawVAO&&Te.program&&!fe&&q.angle_instanced_arrays){var pt=!0,Ht=Te.program.attributes.map(function(kt){var Zt=C.static[kt];return pt=pt&&!!Zt,Zt});if(pt&&Ht.length>0){var hr=vt.getVAO(vt.createVAO(Ht));$e.drawVAO=new Un(null,null,null,function(kt,Zt){return kt.link(hr)}),$e.useVAO=!0}}return fe?$e.useVAO=!0:$e.attributes=Or(C,Se),$e.context=Wr(me),$e}function pn(H,C,ie){var me=H.shared,Se=me.context,ue=H.scope();Object.keys(ie).forEach(function(ae){C.save(Se,"."+ae);var fe=ie[ae],X=fe.append(H,C);Array.isArray(X)?ue(Se,".",ae,"=[",X.join(),"];"):ue(Se,".",ae,"=",X,";")}),C(ue)}function cn(H,C,ie,me){var Se=H.shared,ue=Se.gl,ae=Se.framebuffer,fe;xt&&(fe=C.def(Se.extensions,".webgl_draw_buffers"));var X=H.constants,oe=X.drawBuffer,z=X.backBuffer,de;ie?de=ie.append(H,C):de=C.def(ae,".next"),me||C("if(",de,"!==",ae,".cur){"),C("if(",de,"){",ue,".bindFramebuffer(",Yd,",",de,".framebuffer);"),xt&&C(fe,".drawBuffersWEBGL(",oe,"[",de,".colorAttachments.length]);"),C("}else{",ue,".bindFramebuffer(",Yd,",null);"),xt&&C(fe,".drawBuffersWEBGL(",z,");"),C("}",ae,".cur=",de,";"),me||C("}")}function bn(H,C,ie){var me=H.shared,Se=me.gl,ue=H.current,ae=H.next,fe=me.current,X=me.next,oe=H.cond(fe,".dirty");ot.forEach(function(z){var de=ze(z);if(!(de in ie.state)){var Te,Ye;if(de in ae){Te=ae[de],Ye=ue[de];var Qe=ht(nt[de].length,function(pt){return oe.def(Te,"[",pt,"]")});oe(H.cond(Qe.map(function(pt,Ht){return pt+"!=="+Ye+"["+Ht+"]"}).join("||")).then(Se,".",Ve[de],"(",Qe,");",Qe.map(function(pt,Ht){return Ye+"["+Ht+"]="+pt}).join(";"),";"))}else{Te=oe.def(X,".",de);var $e=H.cond(Te,"!==",fe,".",de);oe($e),de in Ze?$e(H.cond(Te).then(Se,".enable(",Ze[de],");").else(Se,".disable(",Ze[de],");"),fe,".",de,"=",Te,";"):$e(Se,".",Ve[de],"(",Te,");",fe,".",de,"=",Te,";")}}}),Object.keys(ie.state).length===0&&oe(fe,".dirty=false;"),C(oe)}function yn(H,C,ie,me){var Se=H.shared,ue=H.current,ae=Se.current,fe=Se.gl;Zd(Object.keys(ie)).forEach(function(X){var oe=ie[X];if(!(me&&!me(oe))){var z=oe.append(H,C);if(Ze[X]){var de=Ze[X];wi(oe)?z?C(fe,".enable(",de,");"):C(fe,".disable(",de,");"):C(H.cond(z).then(fe,".enable(",de,");").else(fe,".disable(",de,");")),C(ae,".",X,"=",z,";")}else if(qr(z)){var Te=ue[X];C(fe,".",Ve[X],"(",z,");",z.map(function(Ye,Qe){return Te+"["+Qe+"]="+Ye}).join(";"),";")}else C(fe,".",Ve[X],"(",z,");",ae,".",X,"=",z,";")}})}function Fr(H,C){yt&&(H.instancing=C.def(H.shared.extensions,".angle_instanced_arrays"))}function dr(H,C,ie,me,Se){var ue=H.shared,ae=H.stats,fe=ue.current,X=ue.timer,oe=ie.profile;function z(){return typeof performance>"u"?"Date.now()":"performance.now()"}var de,Te;function Ye(kt){de=C.def(),kt(de,"=",z(),";"),typeof Se=="string"?kt(ae,".count+=",Se,";"):kt(ae,".count++;"),st&&(me?(Te=C.def(),kt(Te,"=",X,".getNumPendingQueries();")):kt(X,".beginQuery(",ae,");"))}function Qe(kt){kt(ae,".cpuTime+=",z(),"-",de,";"),st&&(me?kt(X,".pushScopeStats(",Te,",",X,".getNumPendingQueries(),",ae,");"):kt(X,".endQuery();"))}function $e(kt){var Zt=C.def(fe,".profile");C(fe,".profile=",kt,";"),C.exit(fe,".profile=",Zt,";")}var pt;if(oe){if(wi(oe)){oe.enable?(Ye(C),Qe(C.exit),$e("true")):$e("false");return}pt=oe.append(H,C),$e(pt)}else pt=C.def(fe,".profile");var Ht=H.block();Ye(Ht),C("if(",pt,"){",Ht,"}");var hr=H.block();Qe(hr),C.exit("if(",pt,"){",hr,"}")}function Tn(H,C,ie,me,Se){var ue=H.shared;function ae(X){switch(X){case la:case ss:case ca:return 2;case tl:case rl:case ol:return 3;case fa:case nl:case oi:return 4;default:return 1}}function fe(X,oe,z){var de=ue.gl,Te=C.def(X,".location"),Ye=C.def(ue.attributes,"[",Te,"]"),Qe=z.state,$e=z.buffer,pt=[z.x,z.y,z.z,z.w],Ht=["buffer","normalized","offset","stride"];function hr(){C("if(!",Ye,".buffer){",de,".enableVertexAttribArray(",Te,");}");var Zt=z.type,lr;if(z.size?lr=C.def(z.size,"||",oe):lr=oe,C("if(",Ye,".type!==",Zt,"||",Ye,".size!==",lr,"||",Ht.map(function(en){return Ye+"."+en+"!=="+z[en]}).join("||"),"){",de,".bindBuffer(",as,",",$e,".buffer);",de,".vertexAttribPointer(",[Te,lr,Zt,z.normalized,z.stride,z.offset],");",Ye,".type=",Zt,";",Ye,".size=",lr,";",Ht.map(function(en){return Ye+"."+en+"="+z[en]+";"}).join(""),"}"),yt){var Nr=z.divisor;C("if(",Ye,".divisor!==",Nr,"){",H.instancing,".vertexAttribDivisorANGLE(",[Te,Nr],");",Ye,".divisor=",Nr,";}")}}function kt(){C("if(",Ye,".buffer){",de,".disableVertexAttribArray(",Te,");",Ye,".buffer=null;","}if(",es.map(function(Zt,lr){return Ye+"."+Zt+"!=="+pt[lr]}).join("||"),"){",de,".vertexAttrib4f(",Te,",",pt,");",es.map(function(Zt,lr){return Ye+"."+Zt+"="+pt[lr]+";"}).join(""),"}")}Qe===ts?hr():Qe===_f?kt():(C("if(",Qe,"===",ts,"){"),hr(),C("}else{"),kt(),C("}"))}me.forEach(function(X){var oe=X.name,z=ie.attributes[oe],de;if(z){if(!Se(z))return;de=z.append(H,C)}else{if(!Se(Yf))return;var Te=H.scopeAttrib(oe);j.optional(function(){H.assert(C,Te+".state","missing attribute "+oe)}),de={},Object.keys(new Ee).forEach(function(Ye){de[Ye]=C.def(Te,".",Ye)})}fe(H.link(X),ae(X.info.type),de)})}function Ir(H,C,ie,me,Se){for(var ue=H.shared,ae=ue.gl,fe,X=0;X<me.length;++X){var oe=me[X],z=oe.name,de=oe.info.type,Te=ie.uniforms[z],Ye=H.link(oe),Qe=Ye+".location",$e;if(Te){if(!Se(Te))continue;if(wi(Te)){var pt=Te.value;if(j.command(pt!==null&&typeof pt<"u",'missing uniform "'+z+'"',H.commandStr),de===tu||de===ls){j.command(typeof pt=="function"&&(de===tu&&(pt._reglType==="texture2d"||pt._reglType==="framebuffer")||de===ls&&(pt._reglType==="textureCube"||pt._reglType==="framebufferCube")),"invalid texture for uniform "+z,H.commandStr);var Ht=H.link(pt._texture||pt.color[0]._texture);C(ae,".uniform1i(",Qe,",",Ht+".bind());"),C.exit(Ht,".unbind();")}else if(de===qs||de===eu||de===us){j.optional(function(){j.command(qr(pt),"invalid matrix for uniform "+z,H.commandStr),j.command(de===qs&&pt.length===4||de===eu&&pt.length===9||de===us&&pt.length===16,"invalid length for matrix uniform "+z,H.commandStr)});var hr=H.global.def("new Float32Array(["+Array.prototype.slice.call(pt)+"])"),kt=2;de===eu?kt=3:de===us&&(kt=4),C(ae,".uniformMatrix",kt,"fv(",Qe,",false,",hr,");")}else{switch(de){case zf:j.commandType(pt,"number","uniform "+z,H.commandStr),fe="1f";break;case la:j.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2f";break;case tl:j.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3f";break;case fa:j.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4f";break;case Xf:j.commandType(pt,"boolean","uniform "+z,H.commandStr),fe="1i";break;case Hf:j.commandType(pt,"number","uniform "+z,H.commandStr),fe="1i";break;case ca:j.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2i";break;case ss:j.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2i";break;case ol:j.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3i";break;case rl:j.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3i";break;case oi:j.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4i";break;case nl:j.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4i";break}C(ae,".uniform",fe,"(",Qe,",",qr(pt)?Array.prototype.slice.call(pt):pt,");")}continue}else $e=Te.append(H,C)}else{if(!Se(Yf))continue;$e=C.def(ue.uniforms,"[",G.id(z),"]")}de===tu?(j(!Array.isArray($e),"must specify a scalar prop for textures"),C("if(",$e,"&&",$e,'._reglType==="framebuffer"){',$e,"=",$e,".color[0];","}")):de===ls&&(j(!Array.isArray($e),"must specify a scalar prop for cube maps"),C("if(",$e,"&&",$e,'._reglType==="framebufferCube"){',$e,"=",$e,".color[0];","}")),j.optional(function(){function zn(Ao,rh){H.assert(C,Ao,'bad data or missing for uniform "'+z+'".  '+rh)}function Qf(Ao){j(!Array.isArray($e),"must not specify an array type for uniform"),zn("typeof "+$e+'==="'+Ao+'"',"invalid type, expected "+Ao)}function so(Ao,rh){Array.isArray($e)?j($e.length===Ao,"must have length "+Ao):zn(ue.isArrayLike+"("+$e+")&&"+$e+".length==="+Ao,"invalid vector, should have length "+Ao,H.commandStr)}function qf(Ao){j(!Array.isArray($e),"must not specify a value type"),zn("typeof "+$e+'==="function"&&'+$e+'._reglType==="texture'+(Ao===zd?"2d":"Cube")+'"',"invalid texture type",H.commandStr)}switch(de){case Hf:Qf("number");break;case ss:so(2);break;case rl:so(3);break;case nl:so(4);break;case zf:Qf("number");break;case la:so(2);break;case tl:so(3);break;case fa:so(4);break;case Xf:Qf("boolean");break;case ca:so(2);break;case ol:so(3);break;case oi:so(4);break;case qs:so(4);break;case eu:so(9);break;case us:so(16);break;case tu:qf(zd);break;case ls:qf(jy);break}});var Zt=1;switch(de){case tu:case ls:var lr=C.def($e,"._texture");C(ae,".uniform1i(",Qe,",",lr,".bind());"),C.exit(lr,".unbind();");continue;case Hf:case Xf:fe="1i";break;case ss:case ca:fe="2i",Zt=2;break;case rl:case ol:fe="3i",Zt=3;break;case nl:case oi:fe="4i",Zt=4;break;case zf:fe="1f";break;case la:fe="2f",Zt=2;break;case tl:fe="3f",Zt=3;break;case fa:fe="4f",Zt=4;break;case qs:fe="Matrix2fv";break;case eu:fe="Matrix3fv";break;case us:fe="Matrix4fv";break}if(C(ae,".uniform",fe,"(",Qe,","),fe.charAt(0)==="M"){var Nr=Math.pow(de-qs+2,2),en=H.global.def("new Float32Array(",Nr,")");Array.isArray($e)?C("false,(",ht(Nr,function(zn){return en+"["+zn+"]="+$e[zn]}),",",en,")"):C("false,(Array.isArray(",$e,")||",$e," instanceof Float32Array)?",$e,":(",ht(Nr,function(zn){return en+"["+zn+"]="+$e+"["+zn+"]"}),",",en,")")}else Zt>1?C(ht(Zt,function(zn){return Array.isArray($e)?$e[zn]:$e+"["+zn+"]"})):(j(!Array.isArray($e),"uniform value must not be an array"),C($e));C(");")}}function qt(H,C,ie,me){var Se=H.shared,ue=Se.gl,ae=Se.draw,fe=me.draw;function X(){var lr=fe.elements,Nr,en=C;return lr?((lr.contextDep&&me.contextDynamic||lr.propDep)&&(en=ie),Nr=lr.append(H,en)):Nr=en.def(ae,".",aa),Nr&&en("if("+Nr+")"+ue+".bindBuffer("+Iy+","+Nr+".buffer.buffer);"),Nr}function oe(){var lr=fe.count,Nr,en=C;return lr?((lr.contextDep&&me.contextDynamic||lr.propDep)&&(en=ie),Nr=lr.append(H,en),j.optional(function(){lr.MISSING&&H.assert(C,"false","missing vertex count"),lr.DYNAMIC&&H.assert(en,Nr+">=0","missing vertex count")})):(Nr=en.def(ae,".",ua),j.optional(function(){H.assert(en,Nr+">=0","missing vertex count")})),Nr}var z=X();function de(lr){var Nr=fe[lr];return Nr?Nr.contextDep&&me.contextDynamic||Nr.propDep?Nr.append(H,ie):Nr.append(H,C):C.def(ae,".",lr)}var Te=de(sa),Ye=de(el),Qe=oe();if(typeof Qe=="number"){if(Qe===0)return}else ie("if(",Qe,"){"),ie.exit("}");var $e,pt;yt&&($e=de(Js),pt=H.instancing);var Ht=z+".type",hr=fe.elements&&wi(fe.elements);function kt(){function lr(){ie(pt,".drawElementsInstancedANGLE(",[Te,Qe,Ht,Ye+"<<(("+Ht+"-"+Pf+")>>1)",$e],");")}function Nr(){ie(pt,".drawArraysInstancedANGLE(",[Te,Ye,Qe,$e],");")}z?hr?lr():(ie("if(",z,"){"),lr(),ie("}else{"),Nr(),ie("}")):Nr()}function Zt(){function lr(){ie(ue+".drawElements("+[Te,Qe,Ht,Ye+"<<(("+Ht+"-"+Pf+")>>1)"]+");")}function Nr(){ie(ue+".drawArrays("+[Te,Ye,Qe]+");")}z?hr?lr():(ie("if(",z,"){"),lr(),ie("}else{"),Nr(),ie("}")):Nr()}yt&&(typeof $e!="number"||$e>=0)?typeof $e=="string"?(ie("if(",$e,">0){"),kt(),ie("}else if(",$e,"<0){"),Zt(),ie("}")):kt():Zt()}function Sr(H,C,ie,me,Se){var ue=rr(),ae=ue.proc("body",Se);return j.optional(function(){ue.commandStr=C.commandStr,ue.command=ue.link(C.commandStr)}),yt&&(ue.instancing=ae.def(ue.shared.extensions,".angle_instanced_arrays")),H(ue,ae,ie,me),ue.compile().body}function Pr(H,C,ie,me){Fr(H,C),ie.useVAO?ie.drawVAO?C(H.shared.vao,".setVAO(",ie.drawVAO.append(H,C),");"):C(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(C(H.shared.vao,".setVAO(null);"),Tn(H,C,ie,me.attributes,function(){return!0})),Ir(H,C,ie,me.uniforms,function(){return!0}),qt(H,C,C,ie)}function an(H,C){var ie=H.proc("draw",1);Fr(H,ie),pn(H,ie,C.context),cn(H,ie,C.framebuffer),bn(H,ie,C),yn(H,ie,C.state),dr(H,ie,C,!1,!0);var me=C.shader.progVar.append(H,ie);if(ie(H.shared.gl,".useProgram(",me,".program);"),C.shader.program)Pr(H,ie,C,C.shader.program);else{ie(H.shared.vao,".setVAO(null);");var Se=H.global.def("{}"),ue=ie.def(me,".id"),ae=ie.def(Se,"[",ue,"]");ie(H.cond(ae).then(ae,".call(this,a0);").else(ae,"=",Se,"[",ue,"]=",H.link(function(fe){return Sr(Pr,H,C,fe,1)}),"(",me,");",ae,".call(this,a0);"))}Object.keys(C.state).length>0&&ie(H.shared.current,".dirty=true;")}function Fo(H,C,ie,me){H.batchId="a1",Fr(H,C);function Se(){return!0}Tn(H,C,ie,me.attributes,Se),Ir(H,C,ie,me.uniforms,Se),qt(H,C,C,ie)}function ha(H,C,ie,me){Fr(H,C);var Se=ie.contextDep,ue=C.def(),ae="a0",fe="a1",X=C.def();H.shared.props=X,H.batchId=ue;var oe=H.scope(),z=H.scope();C(oe.entry,"for(",ue,"=0;",ue,"<",fe,";++",ue,"){",X,"=",ae,"[",ue,"];",z,"}",oe.exit);function de(Ht){return Ht.contextDep&&Se||Ht.propDep}function Te(Ht){return!de(Ht)}if(ie.needsContext&&pn(H,z,ie.context),ie.needsFramebuffer&&cn(H,z,ie.framebuffer),yn(H,z,ie.state,de),ie.profile&&de(ie.profile)&&dr(H,z,ie,!1,!0),me)ie.useVAO?ie.drawVAO?de(ie.drawVAO)?z(H.shared.vao,".setVAO(",ie.drawVAO.append(H,z),");"):oe(H.shared.vao,".setVAO(",ie.drawVAO.append(H,oe),");"):oe(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(oe(H.shared.vao,".setVAO(null);"),Tn(H,oe,ie,me.attributes,Te),Tn(H,z,ie,me.attributes,de)),Ir(H,oe,ie,me.uniforms,Te),Ir(H,z,ie,me.uniforms,de),qt(H,oe,z,ie);else{var Ye=H.global.def("{}"),Qe=ie.shader.progVar.append(H,z),$e=z.def(Qe,".id"),pt=z.def(Ye,"[",$e,"]");z(H.shared.gl,".useProgram(",Qe,".program);","if(!",pt,"){",pt,"=",Ye,"[",$e,"]=",H.link(function(Ht){return Sr(Fo,H,ie,Ht,2)}),"(",Qe,");}",pt,".call(this,a0[",ue,"],",ue,");")}}function K(H,C){var ie=H.proc("batch",2);H.batchId="0",Fr(H,ie);var me=!1,Se=!0;Object.keys(C.context).forEach(function(Ye){me=me||C.context[Ye].propDep}),me||(pn(H,ie,C.context),Se=!1);var ue=C.framebuffer,ae=!1;ue?(ue.propDep?me=ae=!0:ue.contextDep&&me&&(ae=!0),ae||cn(H,ie,ue)):cn(H,ie,null),C.state.viewport&&C.state.viewport.propDep&&(me=!0);function fe(Ye){return Ye.contextDep&&me||Ye.propDep}bn(H,ie,C),yn(H,ie,C.state,function(Ye){return!fe(Ye)}),(!C.profile||!fe(C.profile))&&dr(H,ie,C,!1,"a1"),C.contextDep=me,C.needsContext=Se,C.needsFramebuffer=ae;var X=C.shader.progVar;if(X.contextDep&&me||X.propDep)ha(H,ie,C,null);else{var oe=X.append(H,ie);if(ie(H.shared.gl,".useProgram(",oe,".program);"),C.shader.program)ha(H,ie,C,C.shader.program);else{ie(H.shared.vao,".setVAO(null);");var z=H.global.def("{}"),de=ie.def(oe,".id"),Te=ie.def(z,"[",de,"]");ie(H.cond(Te).then(Te,".call(this,a0,a1);").else(Te,"=",z,"[",de,"]=",H.link(function(Ye){return Sr(ha,H,C,Ye,2)}),"(",oe,");",Te,".call(this,a0,a1);"))}}Object.keys(C.state).length>0&&ie(H.shared.current,".dirty=true;")}function je(H,C){var ie=H.proc("scope",3);H.batchId="a2";var me=H.shared,Se=me.current;pn(H,ie,C.context),C.framebuffer&&C.framebuffer.append(H,ie),Zd(Object.keys(C.state)).forEach(function(ae){var fe=C.state[ae],X=fe.append(H,ie);qr(X)?X.forEach(function(oe,z){ie.set(H.next[ae],"["+z+"]",oe)}):ie.set(me.next,"."+ae,X)}),dr(H,ie,C,!0,!0),[aa,el,ua,Js,sa].forEach(function(ae){var fe=C.draw[ae];fe&&ie.set(me.draw,"."+ae,""+fe.append(H,ie))}),Object.keys(C.uniforms).forEach(function(ae){var fe=C.uniforms[ae].append(H,ie);Array.isArray(fe)&&(fe="["+fe.join()+"]"),ie.set(me.uniforms,"["+G.id(ae)+"]",fe)}),Object.keys(C.attributes).forEach(function(ae){var fe=C.attributes[ae].append(H,ie),X=H.scopeAttrib(ae);Object.keys(new Ee).forEach(function(oe){ie.set(X,"."+oe,fe[oe])})}),C.scopeVAO&&ie.set(me.vao,".targetVAO",C.scopeVAO.append(H,ie));function ue(ae){var fe=C.shader[ae];fe&&ie.set(me.shader,"."+ae,fe.append(H,ie))}ue(ns),ue(Zs),Object.keys(C.state).length>0&&(ie(Se,".dirty=true;"),ie.exit(Se,".dirty=true;")),ie("a1(",H.shared.context,",a0,",H.batchId,");")}function Pe(H){if(!(typeof H!="object"||qr(H))){for(var C=Object.keys(H),ie=0;ie<C.length;++ie)if(Qt.isDynamic(H[C[ie]]))return!0;return!1}}function Rt(H,C,ie){var me=C.static[ie];if(!me||!Pe(me))return;var Se=H.global,ue=Object.keys(me),ae=!1,fe=!1,X=!1,oe=H.global.def("{}");ue.forEach(function(de){var Te=me[de];if(Qt.isDynamic(Te)){typeof Te=="function"&&(Te=me[de]=Qt.unbox(Te));var Ye=Kn(Te,null);ae=ae||Ye.thisDep,X=X||Ye.propDep,fe=fe||Ye.contextDep}else{switch(Se(oe,".",de,"="),typeof Te){case"number":Se(Te);break;case"string":Se('"',Te,'"');break;case"object":Array.isArray(Te)&&Se("[",Te.join(),"]");break;default:Se(H.link(Te));break}Se(";")}});function z(de,Te){ue.forEach(function(Ye){var Qe=me[Ye];if(Qt.isDynamic(Qe)){var $e=de.invoke(Te,Qe);Te(oe,".",Ye,"=",$e,";")}})}C.dynamic[ie]=new Qt.DynamicVariable(Ju,{thisDep:ae,contextDep:fe,propDep:X,ref:oe,append:z}),delete C.static[ie]}function br(H,C,ie,me,Se){var ue=rr();ue.stats=ue.link(Se),Object.keys(C.static).forEach(function(fe){Rt(ue,C,fe)}),Dy.forEach(function(fe){Rt(ue,H,fe)});var ae=Yr(H,C,ie,me,ue);return an(ue,ae),je(ue,ae),K(ue,ae),u(ue.compile(),{destroy:function(){ae.shader.program.destroy()}})}return{next:ct,current:nt,procs:function(){var H=rr(),C=H.proc("poll"),ie=H.proc("refresh"),me=H.block();C(me),ie(me);var Se=H.shared,ue=Se.gl,ae=Se.next,fe=Se.current;me(fe,".dirty=false;"),cn(H,C),cn(H,ie,null,!0);var X;yt&&(X=H.link(yt)),q.oes_vertex_array_object&&ie(H.link(q.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var oe=0;oe<Ce.maxAttributes;++oe){var z=ie.def(Se.attributes,"[",oe,"]"),de=H.cond(z,".buffer");de.then(ue,".enableVertexAttribArray(",oe,");",ue,".bindBuffer(",as,",",z,".buffer.buffer);",ue,".vertexAttribPointer(",oe,",",z,".size,",z,".type,",z,".normalized,",z,".stride,",z,".offset);").else(ue,".disableVertexAttribArray(",oe,");",ue,".vertexAttrib4f(",oe,",",z,".x,",z,".y,",z,".z,",z,".w);",z,".buffer=null;"),ie(de),yt&&ie(X,".vertexAttribDivisorANGLE(",oe,",",z,".divisor);")}return ie(H.shared.vao,".currentVAO=null;",H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"),Object.keys(Ze).forEach(function(Te){var Ye=Ze[Te],Qe=me.def(ae,".",Te),$e=H.block();$e("if(",Qe,"){",ue,".enable(",Ye,")}else{",ue,".disable(",Ye,")}",fe,".",Te,"=",Qe,";"),ie($e),C("if(",Qe,"!==",fe,".",Te,"){",$e,"}")}),Object.keys(Ve).forEach(function(Te){var Ye=Ve[Te],Qe=nt[Te],$e,pt,Ht=H.block();if(Ht(ue,".",Ye,"("),qr(Qe)){var hr=Qe.length;$e=H.global.def(ae,".",Te),pt=H.global.def(fe,".",Te),Ht(ht(hr,function(kt){return $e+"["+kt+"]"}),");",ht(hr,function(kt){return pt+"["+kt+"]="+$e+"["+kt+"];"}).join("")),C("if(",ht(hr,function(kt){return $e+"["+kt+"]!=="+pt+"["+kt+"]"}).join("||"),"){",Ht,"}")}else $e=me.def(ae,".",Te),pt=me.def(fe,".",Te),Ht($e,");",fe,".",Te,"=",$e,";"),C("if(",$e,"!==",pt,"){",Ht,"}");ie(Ht)}),H.compile()}(),compile:br}}function Jy(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Jd=34918,Qy=34919,Qd=35007,qy=function(_,G){if(!G.ext_disjoint_timer_query)return null;var q=[];function Ce(){return q.pop()||G.ext_disjoint_timer_query.createQueryEXT()}function Je(yt){q.push(yt)}var De=[];function ke(yt){var xt=Ce();G.ext_disjoint_timer_query.beginQueryEXT(Qd,xt),De.push(xt),st(De.length-1,De.length,yt)}function at(){G.ext_disjoint_timer_query.endQueryEXT(Qd)}function lt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var vt=[];function ft(){return vt.pop()||new lt}function it(yt){vt.push(yt)}var St=[];function st(yt,xt,nt){var ct=ft();ct.startQueryIndex=yt,ct.endQueryIndex=xt,ct.sum=0,ct.stats=nt,St.push(ct)}var Ot=[],Ee=[];function Me(){var yt,xt,nt=De.length;if(nt!==0){Ee.length=Math.max(Ee.length,nt+1),Ot.length=Math.max(Ot.length,nt+1),Ot[0]=0,Ee[0]=0;var ct=0;for(yt=0,xt=0;xt<De.length;++xt){var ot=De[xt];G.ext_disjoint_timer_query.getQueryObjectEXT(ot,Qy)?(ct+=G.ext_disjoint_timer_query.getQueryObjectEXT(ot,Jd),Je(ot)):De[yt++]=ot,Ot[xt+1]=ct,Ee[xt+1]=yt}for(De.length=yt,yt=0,xt=0;xt<St.length;++xt){var Ze=St[xt],Ve=Ze.startQueryIndex,ze=Ze.endQueryIndex;Ze.sum+=Ot[ze]-Ot[Ve];var At=Ee[Ve],ir=Ee[ze];ir===At?(Ze.stats.gpuTime+=Ze.sum/1e6,it(Ze)):(Ze.startQueryIndex=At,Ze.endQueryIndex=ir,St[yt++]=Ze)}St.length=yt}}return{beginQuery:ke,endQuery:at,pushScopeStats:st,update:Me,getNumPendingQueries:function(){return De.length},clear:function(){q.push.apply(q,De);for(var yt=0;yt<q.length;yt++)G.ext_disjoint_timer_query.deleteQueryEXT(q[yt]);De.length=0,q.length=0},restore:function(){De.length=0,q.length=0}}},eg=16384,tg=256,rg=1024,nu=34962,on="webglcontextlost",Kf="webglcontextrestored",Zf=1,qd=2,eh=3;function Jf(_,G){for(var q=0;q<_.length;++q)if(_[q]===G)return q;return-1}function th(_){var G=we(_);if(!G)return null;var q=G.gl,Ce=q.getContextAttributes(),Je=q.isContextLost(),De=Ne(q,G);if(!De)return null;var ke=Mt(),at=Jy(),lt=De.extensions,vt=qy(q,lt),ft=In(),it=q.drawingBufferWidth,St=q.drawingBufferHeight,st={tick:0,time:0,viewportWidth:it,viewportHeight:St,framebufferWidth:it,framebufferHeight:St,drawingBufferWidth:it,drawingBufferHeight:St,pixelRatio:G.pixelRatio},Ot={},Ee={elements:null,primitive:4,count:-1,offset:0,instances:-1},Me=tf(q,lt),yt=lf(q,at,G,nt),xt=Py(q,lt,Me,at,yt);function nt(qt){return xt.destroyBuffer(qt)}var ct=io(q,lt,yt,at),ot=Td(q,ke,at,G),Ze=hy(q,lt,Me,function(){At.procs.poll()},st,at,G),Ve=dd(q,lt,Me,at,G),ze=Ty(q,lt,Me,Ze,Ve,at),At=Zy(q,ke,lt,Me,yt,ct,Ze,ze,Ot,xt,ot,Ee,st,vt,G),ir=Ny(q,ze,At.procs.poll,st,Ce,lt,Me),mt=At.next,et=q.canvas,qe=[],rr=[],cr=[],Gt=[G.onDestroy],mr=null;function ar(){if(qe.length===0){vt&&vt.update(),mr=null;return}mr=$r.next(ar),yn();for(var qt=qe.length-1;qt>=0;--qt){var Sr=qe[qt];Sr&&Sr(st,null,0)}q.flush(),vt&&vt.update()}function yr(){!mr&&qe.length>0&&(mr=$r.next(ar))}function Ar(){mr&&($r.cancel(ar),mr=null)}function fn(qt){qt.preventDefault(),Je=!0,Ar(),rr.forEach(function(Sr){Sr()})}function vn(qt){q.getError(),Je=!1,De.restore(),ot.restore(),yt.restore(),Ze.restore(),Ve.restore(),ze.restore(),xt.restore(),vt&&vt.restore(),At.procs.refresh(),yr(),cr.forEach(function(Sr){Sr()})}et&&(et.addEventListener(on,fn,!1),et.addEventListener(Kf,vn,!1));function Or(){qe.length=0,Ar(),et&&(et.removeEventListener(on,fn),et.removeEventListener(Kf,vn)),ot.clear(),ze.clear(),Ve.clear(),Ze.clear(),ct.clear(),yt.clear(),xt.clear(),vt&&vt.clear(),Gt.forEach(function(qt){qt()})}function hn(qt){j(!!qt,"invalid args to regl({...})"),j.type(qt,"object","invalid args to regl({...})");function Sr(Se){var ue=u({},Se);delete ue.uniforms,delete ue.attributes,delete ue.context,delete ue.vao,"stencil"in ue&&ue.stencil.op&&(ue.stencil.opBack=ue.stencil.opFront=ue.stencil.op,delete ue.stencil.op);function ae(fe){if(fe in ue){var X=ue[fe];delete ue[fe],Object.keys(X).forEach(function(oe){ue[fe+"."+oe]=X[oe]})}}return ae("blend"),ae("depth"),ae("cull"),ae("stencil"),ae("polygonOffset"),ae("scissor"),ae("sample"),"vao"in Se&&(ue.vao=Se.vao),ue}function Pr(Se,ue){var ae={},fe={};return Object.keys(Se).forEach(function(X){var oe=Se[X];if(Qt.isDynamic(oe)){fe[X]=Qt.unbox(oe,X);return}else if(ue&&Array.isArray(oe)){for(var z=0;z<oe.length;++z)if(Qt.isDynamic(oe[z])){fe[X]=Qt.unbox(oe,X);return}}ae[X]=oe}),{dynamic:fe,static:ae}}var an=Pr(qt.context||{},!0),Fo=Pr(qt.uniforms||{},!0),ha=Pr(qt.attributes||{},!1),K=Pr(Sr(qt),!1),je={gpuTime:0,cpuTime:0,count:0},Pe=At.compile(K,ha,Fo,an,je),Rt=Pe.draw,br=Pe.batch,H=Pe.scope,C=[];function ie(Se){for(;C.length<Se;)C.push(null);return C}function me(Se,ue){var ae;if(Je&&j.raise("context lost"),typeof Se=="function")return H.call(this,null,Se,0);if(typeof ue=="function")if(typeof Se=="number")for(ae=0;ae<Se;++ae)H.call(this,null,ue,ae);else if(Array.isArray(Se))for(ae=0;ae<Se.length;++ae)H.call(this,Se[ae],ue,ae);else return H.call(this,Se,ue,0);else if(typeof Se=="number"){if(Se>0)return br.call(this,ie(Se|0),Se|0)}else if(Array.isArray(Se)){if(Se.length)return br.call(this,Se,Se.length)}else return Rt.call(this,Se)}return u(me,{stats:je,destroy:function(){Pe.destroy()}})}var Wr=ze.setFBO=hn({framebuffer:Qt.define.call(null,Zf,"framebuffer")});function Yr(qt,Sr){var Pr=0;At.procs.poll();var an=Sr.color;an&&(q.clearColor(+an[0]||0,+an[1]||0,+an[2]||0,+an[3]||0),Pr|=eg),"depth"in Sr&&(q.clearDepth(+Sr.depth),Pr|=tg),"stencil"in Sr&&(q.clearStencil(Sr.stencil|0),Pr|=rg),j(!!Pr,"called regl.clear with no buffer specified"),q.clear(Pr)}function pn(qt){if(j(typeof qt=="object"&&qt,"regl.clear() takes an object as input"),"framebuffer"in qt)if(qt.framebuffer&&qt.framebuffer_reglType==="framebufferCube")for(var Sr=0;Sr<6;++Sr)Wr(u({framebuffer:qt.framebuffer.faces[Sr]},qt),Yr);else Wr(qt,Yr);else Yr(null,qt)}function cn(qt){j.type(qt,"function","regl.frame() callback must be a function"),qe.push(qt);function Sr(){var Pr=Jf(qe,qt);j(Pr>=0,"cannot cancel a frame twice");function an(){var Fo=Jf(qe,an);qe[Fo]=qe[qe.length-1],qe.length-=1,qe.length<=0&&Ar()}qe[Pr]=an}return yr(),{cancel:Sr}}function bn(){var qt=mt.viewport,Sr=mt.scissor_box;qt[0]=qt[1]=Sr[0]=Sr[1]=0,st.viewportWidth=st.framebufferWidth=st.drawingBufferWidth=qt[2]=Sr[2]=q.drawingBufferWidth,st.viewportHeight=st.framebufferHeight=st.drawingBufferHeight=qt[3]=Sr[3]=q.drawingBufferHeight}function yn(){st.tick+=1,st.time=dr(),bn(),At.procs.poll()}function Fr(){Ze.refresh(),bn(),At.procs.refresh(),vt&&vt.update()}function dr(){return(In()-ft)/1e3}Fr();function Tn(qt,Sr){j.type(Sr,"function","listener callback must be a function");var Pr;switch(qt){case"frame":return cn(Sr);case"lost":Pr=rr;break;case"restore":Pr=cr;break;case"destroy":Pr=Gt;break;default:j.raise("invalid event, must be one of frame,lost,restore,destroy")}return Pr.push(Sr),{cancel:function(){for(var an=0;an<Pr.length;++an)if(Pr[an]===Sr){Pr[an]=Pr[Pr.length-1],Pr.pop();return}}}}var Ir=u(hn,{clear:pn,prop:Qt.define.bind(null,Zf),context:Qt.define.bind(null,qd),this:Qt.define.bind(null,eh),draw:hn({}),buffer:function(qt){return yt.create(qt,nu,!1,!1)},elements:function(qt){return ct.create(qt,!1)},texture:Ze.create2D,cube:Ze.createCube,renderbuffer:Ve.create,framebuffer:ze.create,framebufferCube:ze.createCube,vao:xt.createVAO,attributes:Ce,frame:cn,on:Tn,limits:Me,hasExtension:function(qt){return Me.extensions.indexOf(qt.toLowerCase())>=0},read:ir,destroy:Or,_gl:q,_refresh:Fr,poll:function(){yn(),vt&&vt.update()},now:dr,stats:at});return G.onDone(null,Ir),Ir}return th})})(dk);var Ta,xc,Aa,Xo,Tc,Os,Ac,yv,Fi,uu,Xn,Gi,ki,gv;Ta={},jt(Ta,It.POINTS,"points"),jt(Ta,It.LINES,"lines"),jt(Ta,It.LINE_LOOP,"line loop"),jt(Ta,It.LINE_STRIP,"line strip"),jt(Ta,It.TRIANGLES,"triangles"),jt(Ta,It.TRIANGLE_FAN,"triangle fan"),jt(Ta,It.TRIANGLE_STRIP,"triangle strip");xc={},jt(xc,It.STATIC_DRAW,"static"),jt(xc,It.DYNAMIC_DRAW,"dynamic"),jt(xc,It.STREAM_DRAW,"stream");Aa={},jt(Aa,It.BYTE,"int8"),jt(Aa,It.UNSIGNED_INT,"int16"),jt(Aa,It.INT,"int32"),jt(Aa,It.UNSIGNED_BYTE,"uint8"),jt(Aa,It.UNSIGNED_SHORT,"uint16"),jt(Aa,It.UNSIGNED_INT,"uint32"),jt(Aa,It.FLOAT,"float");Xo={},jt(Xo,It.ALPHA,"alpha"),jt(Xo,It.LUMINANCE,"luminance"),jt(Xo,It.LUMINANCE_ALPHA,"luminance alpha"),jt(Xo,It.RGB,"rgb"),jt(Xo,It.RGBA,"rgba"),jt(Xo,It.RGBA4,"rgba4"),jt(Xo,It.RGB5_A1,"rgb5 a1"),jt(Xo,It.RGB565,"rgb565"),jt(Xo,It.DEPTH_COMPONENT,"depth"),jt(Xo,It.DEPTH_STENCIL,"depth stencil");Tc={},jt(Tc,It.DONT_CARE,"dont care"),jt(Tc,It.NICEST,"nice"),jt(Tc,It.FASTEST,"fast");Os={},jt(Os,It.NEAREST,"nearest"),jt(Os,It.LINEAR,"linear"),jt(Os,It.LINEAR_MIPMAP_LINEAR,"mipmap"),jt(Os,It.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),jt(Os,It.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),jt(Os,It.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");Ac={},jt(Ac,It.REPEAT,"repeat"),jt(Ac,It.CLAMP_TO_EDGE,"clamp"),jt(Ac,It.MIRRORED_REPEAT,"mirror");yv={},jt(yv,It.NONE,"none"),jt(yv,It.BROWSER_DEFAULT_WEBGL,"browser");Fi={},jt(Fi,It.NEVER,"never"),jt(Fi,It.ALWAYS,"always"),jt(Fi,It.LESS,"less"),jt(Fi,It.LEQUAL,"lequal"),jt(Fi,It.GREATER,"greater"),jt(Fi,It.GEQUAL,"gequal"),jt(Fi,It.EQUAL,"equal"),jt(Fi,It.NOTEQUAL,"notequal");uu={},jt(uu,It.FUNC_ADD,"add"),jt(uu,It.MIN_EXT,"min"),jt(uu,It.MAX_EXT,"max"),jt(uu,It.FUNC_SUBTRACT,"subtract"),jt(uu,It.FUNC_REVERSE_SUBTRACT,"reverse subtract");Xn={},jt(Xn,It.ZERO,"zero"),jt(Xn,It.ONE,"one"),jt(Xn,It.SRC_COLOR,"src color"),jt(Xn,It.ONE_MINUS_SRC_COLOR,"one minus src color"),jt(Xn,It.SRC_ALPHA,"src alpha"),jt(Xn,It.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),jt(Xn,It.DST_COLOR,"dst color"),jt(Xn,It.ONE_MINUS_DST_COLOR,"one minus dst color"),jt(Xn,It.DST_ALPHA,"dst alpha"),jt(Xn,It.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),jt(Xn,It.CONSTANT_COLOR,"constant color"),jt(Xn,It.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),jt(Xn,It.CONSTANT_ALPHA,"constant alpha"),jt(Xn,It.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),jt(Xn,It.SRC_ALPHA_SATURATE,"src alpha saturate");Gi={},jt(Gi,It.NEVER,"never"),jt(Gi,It.ALWAYS,"always"),jt(Gi,It.LESS,"less"),jt(Gi,It.LEQUAL,"lequal"),jt(Gi,It.GREATER,"greater"),jt(Gi,It.GEQUAL,"gequal"),jt(Gi,It.EQUAL,"equal"),jt(Gi,It.NOTEQUAL,"notequal");ki={},jt(ki,It.ZERO,"zero"),jt(ki,It.KEEP,"keep"),jt(ki,It.REPLACE,"replace"),jt(ki,It.INVERT,"invert"),jt(ki,It.INCR,"increment"),jt(ki,It.DECR,"decrement"),jt(ki,It.INCR_WRAP,"increment wrap"),jt(ki,It.DECR_WRAP,"decrement wrap");gv={},jt(gv,It.FRONT,"front"),jt(gv,It.BACK,"back");var hk=Function.prototype,pk=hk.toString;pk.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class U_{constructor(){Ho(this,"lf");Ho(this,"option")}render(a){this.lf=a}getBytesLength(a){if(!a)return 0;let i=0;for(let u=0;u<a.length;u++){const o=a.charCodeAt(u);a.match(/[A-Z]/)?i+=1.5:o>=1&&o<=126||o>=65376&&o<=65439?i+=1:i+=2}return i}layout(a={}){const{nodes:i,edges:u,gridSize:o}=this.lf.graphModel;let l=40,c=40;o>20&&(l=o*2,c=o*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:l,ranksep:c,begin:[120,120],...a};const p=new xG(this.option).layout({nodes:i.map(y=>({id:y.id,size:{width:y.width,height:y.height},model:y})),edges:u.map(y=>({source:y.sourceNodeId,target:y.targetNodeId,model:y}))}),g={nodes:[],edges:[]};p.nodes.forEach(y=>{const{model:S}=y,x=S.getData();x.x=y.x,x.y=y.y,g.nodes.push(x)}),p.edges.forEach(y=>{const{model:S}=y,x=S.getData();if(x.pointsList=this.calcPointsList(S,g.nodes),x.pointsList){const T=x.pointsList[0],w=x.pointsList[x.pointsList.length-1];x.startPoint={x:T.x,y:T.y},x.endPoint={x:w.x,y:w.y},x.text&&x.text.value&&(x.text={x:w.x-this.getBytesLength(x.text.value)*6-10,y:w.y,value:x.text.value})}else x.startPoint=void 0,x.endPoint=void 0,x.text&&x.text.value&&(x.text=x.text.value);g.edges.push(x)}),this.lf.renderRawData(g)}pointFilter(a){const i=a;let u=1;for(;u<i.length-1;){const o=i[u-1],l=i[u],c=i[u+1];o.x===l.x&&l.x===c.x||o.y===l.y&&l.y===c.y?i.splice(u,1):u++}return i}calcPointsList(a,i){const u=[];if(this.option.rankdir==="LR"&&a.modelType==="polyline-edge"){const o=this.lf.getNodeModelById(a.sourceNodeId),l=this.lf.getNodeModelById(a.targetNodeId),c=i.find(p=>p.id===a.sourceNodeId),h=i.find(p=>p.id===a.targetNodeId);if(c.x<h.x)return u.push({x:c.x+o.width/2,y:c.y}),u.push({x:c.x+o.width/2+(a.offset||50),y:c.y}),u.push({x:c.x+o.width/2+(a.offset||50),y:h.y}),u.push({x:h.x-l.width/2,y:h.y}),this.pointFilter(u);if(c.x>h.x)return c.y>=h.y?(u.push({x:c.x,y:c.y+o.height/2}),u.push({x:c.x,y:c.y+o.height/2+(a.offset||50)}),u.push({x:h.x,y:c.y+o.height/2+(a.offset||50)}),u.push({x:h.x,y:h.y+l.height/2})):(u.push({x:c.x,y:c.y-o.height/2}),u.push({x:c.x,y:c.y-o.height/2-(a.offset||50)}),u.push({x:h.x,y:c.y-o.height/2-(a.offset||50)}),u.push({x:h.x,y:h.y-l.height/2})),this.pointFilter(u)}}}Ho(U_,"pluginName","dagre");class vk extends HB{constructor({lf:a}){super({lf:a});const i={text:"",icon:!0,className:"lf-menu-copy",callback:W=>a.cloneNode(W.id)},u={text:"",icon:!0,className:"lf-menu-delete",callback:W=>{a.deleteNode(W.id),a.deleteEdge(W.id)}},o={text:"",icon:!0,className:"lf-menu-edit",callback:W=>a.graphModel.editText(W.id)},l={text:"",icon:!0,className:"lf-menu-delete",callback:W=>a.updateText(W.id,"")},c={text:"",icon:!0,className:"lf-menu-select",callback(){a.openSelectionSelect(),a.once("selection:selected",a.closeSelectionSelect)}},h={text:"",icon:!0,className:"lf-menu-clear",callback(){a.clearData()}},p={text:"",icon:!0,className:"lf-menu-add",callback:W=>{console.log(" ~ file: menu.ts:66 ~ Menu ~ constructor ~ ele:",W),["endEvent","serviceTask","note"].includes(W.type)?R(W,[g]):R(W,$.nodeMenu)}},g={text:"",icon:!0,className:"lf-menu-back",callback:W=>{R(W,I.nodeMenu)}},y={text:"",icon:!0,className:"lf-menu-user-task",callback:W=>{const{x:he,y:ge}=W,ye=a.addNode({type:"userTask",x:he+200,y:ge});a.addEdge({sourceNodeId:W.id,targetNodeId:ye.id})}},S={text:"",icon:!0,className:"lf-menu-service-task",callback:W=>{const{x:he,y:ge}=W,ye=a.addNode({type:"serviceTask",x:he+200,y:ge});a.addEdge({type:"noteFlow",sourceNodeId:W.id,targetNodeId:ye.id})}},x={text:"",icon:!0,className:"lf-menu-end-event",callback:W=>{const{x:he,y:ge}=W,ye=a.addNode({type:"endEvent",x:he+150,y:ge});a.addEdge({sourceNodeId:W.id,targetNodeId:ye.id})}},T={text:"",icon:!0,className:"lf-menu-exclusive-gateway",callback:W=>{const{x:he,y:ge}=W,ye=a.addNode({type:"exclusiveGateway",x:he+150,y:ge});a.addEdge({sourceNodeId:W.id,targetNodeId:ye.id})}},w={text:"",icon:!0,className:"lf-menu-parallel-gateway",callback:W=>{const{x:he,y:ge}=W,ye=a.addNode({type:"parallelGateway",x:he+150,y:ge});a.addEdge({sourceNodeId:W.id,targetNodeId:ye.id})}},N={text:"",icon:!0,className:"lf-menu-note",callback:W=>{const{x:he,y:ge}=W,ye=a.addNode({type:"note",x:he,y:ge-150});a.addEdge({type:"noteFlow",sourceNodeId:W.id,targetNodeId:ye.id})}},R=(W,he)=>{setTimeout(()=>{this.__currentData=W;const{left:ge,top:ye}=this.__menuDOM.style;this.showMenu(ge,ye,he)})},I={nodeMenu:[p,i,u,o,l],edgeMenu:[u,o,l],graphMenu:[c,h]},$={nodeMenu:[g,y,S,T,w,x,N]};this.setMenuConfig(I)}}class yk extends XB{constructor({lf:a}){super({lf:a}),this.setPatternItems([{label:"",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){a.openSelectionSelect(),a.once("selection:selected",a.closeSelectionSelect)}},{type:"group",label:"",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"",label:"",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"",label:"",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const z_={type:"process",key:"Process",properties:{}};function gk(n){const{id:a,type:i,x:u,y:o,properties:l,children:c,text:h}=n;return{incoming:[],outgoing:[],children:c,type:i,key:a,groupKey:l==null?void 0:l.groupKey,properties:{...l,name:jb(h)?h:(h==null?void 0:h.value)??"",x:u,y:o,text:h}}}function mk(n){const{id:a,type:i,sourceNodeId:u,targetNodeId:o,startPoint:l,endPoint:c,pointsList:h,properties:p,text:g}=n;return{incoming:[u],outgoing:[o],type:i,key:a,groupKey:p==null?void 0:p.groupKey,properties:{...p,name:jb(g)?g:(g==null?void 0:g.value)??"",text:g,startPoint:l,endPoint:c,pointsList:h}}}function bk(n){const{id:a,type:i,properties:u,text:o}=n;return{type:i,key:a,properties:{...u,name:jb(o)?o:(o==null?void 0:o.value)??""}}}function Ek(n){const a=new Map,i={processData:z_,flowElementList:[]};return n.nodes.forEach(u=>{var o;if(u.type==="process")i.processData=bk(u);else{const l=gk(u);(o=i.flowElementList)==null||o.push(l),a.set(u.id,l)}}),n.edges.forEach(u=>{var h;const o=mk(u);a.get(u.sourceNodeId).outgoing.push(o.key),a.get(u.targetNodeId).incoming.push(o.key),(h=i.flowElementList)==null||h.push(o)}),i}function Ok(n){const{incoming:a,outgoing:i,properties:u,key:o,type:l}=n,{text:c,name:h,startPoint:p,endPoint:g,pointsList:y}=u??{},S={id:o,type:l,sourceNodeId:(a==null?void 0:a[0])??"",targetNodeId:(i==null?void 0:i[0])??"",text:c||h,startPoint:p,endPoint:g,pointsList:y,properties:{}},x=["startPoint","endPoint","pointsList","text"];return S.properties=Lb(u,x),S}function Sk(n){const{properties:a,key:i,type:u,children:o}=n,{x:l,y:c,text:h,name:p}=a??{},g={id:i,type:u??"",x:l,y:c,text:h||p,children:o,properties:{}},y=["x","y","text"];return g.properties=Lb(a,y),g}function xk(n){const{properties:a,key:i,type:u}=n,{name:o}=a??{},l={id:i,type:u??"",text:o,x:0,y:0},c=["x","y","text"];return l.properties=Lb(a,c),l}function Tk(n){const{flowElementList:a}=n,i=c=>["sequenceFlow","noteFlow"].includes(c),u=(a==null?void 0:a.filter(c=>!i(c.type)).map(Sk))??[],o=(a==null?void 0:a.filter(c=>i(c.type)).map(Ok))??[];return u.unshift(xk(n.processData??z_)),{nodes:u,edges:o}}class sE{constructor({lf:a}){a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut}adapterOut(a){return Ek(a)}adapterIn(a){return Tk(a)}}Ho(sE,"pluginName","turboAdapter");class H_{constructor({lf:a}){Ho(this,"lf");Ho(this,"container");Ho(this,"__tooltipDOM");Ho(this,"__currentData");Ho(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltip",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=a}render(a,i){this.container=i,i.appendChild(this.__tooltipDOM),a.on("node:mouseenter,edge:mouseenter",({data:u,e:o})=>{var g;const l=(g=this.__tooltips.find(y=>y.id===u.id))==null?void 0:g.content;if(!l)return;this.__tooltipDOM.innerHTML=l;const c=a.getPointByClient(o.x,o.y),{domOverlayPosition:{x:h,y:p}}=c;this.__tooltipDOM.style.top=`${p+10}px`,this.__tooltipDOM.style.left=`${h+10}px`,this.__tooltipDOM.style.display="block"}),a.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(a){this.__tooltips=a}}Ho(H_,"pluginName","tooltip");const Ak=tB("span",null,"JSON",-1),Pk=Cb({__name:"flow-editor",props:{modelValue:null,visible:{type:Boolean}},emits:["confirm"],setup(n,{emit:a}){const u=HA(n),{modelValue:o,visible:l}=u,c=Qj("");function h(){const p=JSON.parse(c.value);o.value=p,a("confirm",p),l.value=!1}return qj(()=>{c.value=JSON.stringify(o.value,null,2)}),(p,g)=>{const y=Pa("el-button"),S=Pa("el-input"),x=Pa("el-drawer");return Il(),Pc(x,{modelValue:Vo(l),"onUpdate:modelValue":g[1]||(g[1]=T=>_c(l)?l.value=T:null)},{header:Mc(()=>[Ak,Rc(y,{type:"primary",onClick:h},{default:Mc(()=>[eB("  ")]),_:1})]),default:Mc(()=>[Rc(S,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=T=>c.value=T),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue"])}}}),jk=Cb({__name:"index",props:{lf:null,initOptions:null,modelValue:null,elementData:null,formOptions:null,formData:null,formOption:null,formDefaults:null,formWidth:null,formOptionFormat:{type:Function},formDataFormat:{type:Function}},setup(n){const a=n,i=Jj(a),{lf:u,graphData:o,formData:l,formOption:c,formDefaults:h,formLoading:p,editorVisible:g,onUpdateFormData:y}=i,S=XA("container");return zA(()=>{var x;u.value=new $t.LogicFlow({container:document.querySelector(`#${S}`),grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[z3,yk,$B,vk,WB,BB,zb,EP,sE,U_],edgeGenerator:(T,w)=>{if(["note","serviceTask"].includes(w.type))return"noteFlow"},...a.initOptions}),(x=u.value)==null||x.setTheme($A),cB(i),mv(o,T=>{var I,$,W;const w=JSON.stringify(T),N=JSON.stringify((I=u.value)==null?void 0:I.getGraphData());w!==N&&(($=u.value)==null||$.render(T),(W=u.value)==null||W.emit("element:click",{isForce:!0}))},{immediate:!0})}),(x,T)=>{const w=Pa("el-main"),N=Pa("el-empty"),R=Pa("el-skeleton"),I=Pa("avue-form"),$=Pa("el-aside"),W=Pa("el-container");return Il(),Pc(W,{class:"lf-container"},{default:Mc(()=>[Rc(w,{id:Vo(S),class:"lf-main"},null,8,["id"]),Rc($,{width:n.formWidth,class:"lf-aside"},{default:Mc(()=>{var he,ge;return[rB(x.$slots,"form-top"),(ge=(he=Vo(c))==null?void 0:he.group)!=null&&ge.length?Vo(p)?(Il(),Pc(R,{key:1})):(Il(),Pc(I,{key:2,modelValue:Vo(l),"onUpdate:modelValue":[T[0]||(T[0]=ye=>_c(l)?l.value=ye:null),Vo(y)],defaults:Vo(h),"onUpdate:defaults":T[1]||(T[1]=ye=>_c(h)?h.value=ye:null),option:Vo(c)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(Il(),Pc(N,{key:0,description:""}))]}),_:3},8,["width"]),Rc(Pk,{modelValue:Vo(o),"onUpdate:modelValue":T[2]||(T[2]=he=>_c(o)?o.value=he:null),visible:Vo(g),"onUpdate:visible":T[3]||(T[3]=he=>_c(g)?g.value=he:null),onConfirm:T[4]||(T[4]=he=>{var ge;return(ge=Vo(u))==null?void 0:ge.render(he)})},null,8,["modelValue","visible"])]),_:3})}}}),_k=["id"],Bk=Cb({__name:"index",props:{lf:null,initOptions:null,modelValue:null,styles:null,tooltips:null},setup(n){const a=n,i=HA(a,void 0,{passive:!0}),{lf:u,modelValue:o}=i,l=XA("container");return zA(()=>{var c;u.value=new $t.LogicFlow({container:document.querySelector(`#${l}`),grid:{type:"dot",size:10},isSilentMode:!0,plugins:[zb,EP,sE,H_],...a.initOptions}),(c=u.value)==null||c.setTheme($A),mv(o,h=>{var p;(p=u.value)==null||p.render(h)},{immediate:!0}),mv(()=>a.styles,h=>{h==null||h.forEach(({id:p,style:g})=>{var y,S;p&&((S=(y=u.value)==null?void 0:y.graphModel)==null||S.updateAttributes(p,{style:g}))})},{immediate:!0}),mv(()=>a.tooltips,h=>{var p,g;(g=(p=u.value)==null?void 0:p.extension.tooltip)==null||g.setTooltips(h??[])},{immediate:!0})}),(c,h)=>(Il(),nB("div",{id:Vo(l),class:"lf-container"},null,8,_k))}});export{zb as B,z3 as C,U_ as D,E3 as E,G3 as G,vk as M,C3 as N,y3 as P,m3 as S,sE as T,P3 as U,jk as _,Bk as a,g3 as b,b3 as c,$A as d,O3 as e,S3 as f,x3 as g,T3 as h,A3 as i,_3 as j,w3 as k,N3 as l,M3 as m,R3 as n,L3 as o,j3 as p,B3 as q,k3 as r,EP as s,yk as t,Ek as u,Tk as v,H_ as w};
