var Vx=Object.defineProperty;var Wx=(r,u,a)=>u in r?Vx(r,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[u]=a;var v0=(r,u,a)=>(Wx(r,typeof u!="symbol"?u+"":u,a),a);import{g as zi,I as Yx}from"./data.4cb21f02.js";import{aE as Ed,aj as fl}from"../composables_use-crud_index.md.79b7ceb4.js";import{u as $x}from"../app.cca9fc56.js";var pg={exports:{}};(function(r,u){(function(a,f){r.exports=f()})(window,function(){return function(a){var f={};function o(p){if(f[p])return f[p].exports;var d=f[p]={i:p,l:!1,exports:{}};return a[p].call(d.exports,d,d.exports,o),d.l=!0,d.exports}return o.m=a,o.c=f,o.d=function(p,d,y){o.o(p,d)||Object.defineProperty(p,d,{enumerable:!0,get:y})},o.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},o.t=function(p,d){if(1&d&&(p=o(p)),8&d||4&d&&typeof p=="object"&&p&&p.__esModule)return p;var y=Object.create(null);if(o.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:p}),2&d&&typeof p!="string")for(var g in p)o.d(y,g,function(E){return p[E]}.bind(null,g));return y},o.n=function(p){var d=p&&p.__esModule?function(){return p.default}:function(){return p};return o.d(d,"a",d),d},o.o=function(p,d){return Object.prototype.hasOwnProperty.call(p,d)},o.p="",o(o.s=215)}([function(a,f,o){o.d(f,"a",function(){return fe}),o.d(f,"b",function(){return Te}),o.d(f,"c",function(){return xt}),o.d(f,"d",function(){return nr}),o.d(f,"e",function(){return z}),o.d(f,"f",function(){return ye}),o.d(f,"g",function(){return z}),o.d(f,"h",function(){return bt}),o.d(f,"i",function(){return d}),o.d(f,"j",function(){return Yt}),o.d(f,"k",function(){return q});var p,d,y,g,E,_,T,P={},A=[],N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function M(ve,de){for(var De in de)ve[De]=de[De];return ve}function L(ve){var de=ve.parentNode;de&&de.removeChild(ve)}function z(ve,de,De){var ot,Tt,lt,rr={};for(lt in de)lt=="key"?ot=de[lt]:lt=="ref"?Tt=de[lt]:rr[lt]=de[lt];if(arguments.length>2&&(rr.children=arguments.length>3?p.call(arguments,2):De),typeof ve=="function"&&ve.defaultProps!=null)for(lt in ve.defaultProps)rr[lt]===void 0&&(rr[lt]=ve.defaultProps[lt]);return $(ve,rr,ot,Tt,null)}function $(ve,de,De,ot,Tt){var lt={type:ve,props:de,key:De,ref:ot,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Tt??++y};return Tt==null&&d.vnode!=null&&d.vnode(lt),lt}function ye(){return{current:null}}function Te(ve){return ve.children}function fe(ve,de){this.props=ve,this.context=de}function ae(ve,de){if(de==null)return ve.__?ae(ve.__,ve.__.__k.indexOf(ve)+1):null;for(var De;de<ve.__k.length;de++)if((De=ve.__k[de])!=null&&De.__e!=null)return De.__e;return typeof ve.type=="function"?ae(ve):null}function pe(ve){var de,De;if((ve=ve.__)!=null&&ve.__c!=null){for(ve.__e=ve.__c.base=null,de=0;de<ve.__k.length;de++)if((De=ve.__k[de])!=null&&De.__e!=null){ve.__e=ve.__c.base=De.__e;break}return pe(ve)}}function W(ve){(!ve.__d&&(ve.__d=!0)&&g.push(ve)&&!F.__r++||_!==d.debounceRendering)&&((_=d.debounceRendering)||E)(F)}function F(){for(var ve;F.__r=g.length;)ve=g.sort(function(de,De){return de.__v.__b-De.__v.__b}),g=[],ve.some(function(de){var De,ot,Tt,lt,rr,pr;de.__d&&(rr=(lt=(De=de).__v).__e,(pr=De.__P)&&(ot=[],(Tt=M({},lt)).__v=lt.__v+1,Re(pr,lt,Tt,De.__n,pr.ownerSVGElement!==void 0,lt.__h!=null?[rr]:null,ot,rr??ae(lt),lt.__h),se(ot,lt),lt.__e!=rr&&pe(lt)))})}function Y(ve,de,De,ot,Tt,lt,rr,pr,ar,Qt){var Ke,Xt,_e,Ft,_r,k,gr,Cr=ot&&ot.__k||A,$r=Cr.length;for(De.__k=[],Ke=0;Ke<de.length;Ke++)if((Ft=De.__k[Ke]=(Ft=de[Ke])==null||typeof Ft=="boolean"?null:typeof Ft=="string"||typeof Ft=="number"||typeof Ft=="bigint"?$(null,Ft,null,null,Ft):Array.isArray(Ft)?$(Te,{children:Ft},null,null,null):Ft.__b>0?$(Ft.type,Ft.props,Ft.key,null,Ft.__v):Ft)!=null){if(Ft.__=De,Ft.__b=De.__b+1,(_e=Cr[Ke])===null||_e&&Ft.key==_e.key&&Ft.type===_e.type)Cr[Ke]=void 0;else for(Xt=0;Xt<$r;Xt++){if((_e=Cr[Xt])&&Ft.key==_e.key&&Ft.type===_e.type){Cr[Xt]=void 0;break}_e=null}Re(ve,Ft,_e=_e||P,Tt,lt,rr,pr,ar,Qt),_r=Ft.__e,(Xt=Ft.ref)&&_e.ref!=Xt&&(gr||(gr=[]),_e.ref&&gr.push(_e.ref,null,Ft),gr.push(Xt,Ft.__c||_r,Ft)),_r!=null?(k==null&&(k=_r),typeof Ft.type=="function"&&Ft.__k===_e.__k?Ft.__d=ar=V(Ft,ar,ve):ar=Oe(ve,Ft,_e,Cr,_r,ar),typeof De.type=="function"&&(De.__d=ar)):ar&&_e.__e==ar&&ar.parentNode!=ve&&(ar=ae(_e))}for(De.__e=k,Ke=$r;Ke--;)Cr[Ke]!=null&&(typeof De.type=="function"&&Cr[Ke].__e!=null&&Cr[Ke].__e==De.__d&&(De.__d=ae(ot,Ke+1)),ft(Cr[Ke],Cr[Ke]));if(gr)for(Ke=0;Ke<gr.length;Ke++)He(gr[Ke],gr[++Ke],gr[++Ke])}function V(ve,de,De){for(var ot,Tt=ve.__k,lt=0;Tt&&lt<Tt.length;lt++)(ot=Tt[lt])&&(ot.__=ve,de=typeof ot.type=="function"?V(ot,de,De):Oe(De,ot,ot,Tt,ot.__e,de));return de}function q(ve,de){return de=de||[],ve==null||typeof ve=="boolean"||(Array.isArray(ve)?ve.some(function(De){q(De,de)}):de.push(ve)),de}function Oe(ve,de,De,ot,Tt,lt){var rr,pr,ar;if(de.__d!==void 0)rr=de.__d,de.__d=void 0;else if(De==null||Tt!=lt||Tt.parentNode==null)e:if(lt==null||lt.parentNode!==ve)ve.appendChild(Tt),rr=null;else{for(pr=lt,ar=0;(pr=pr.nextSibling)&&ar<ot.length;ar+=2)if(pr==Tt)break e;ve.insertBefore(Tt,lt),rr=lt}return rr!==void 0?rr:Tt.nextSibling}function Ge(ve,de,De){de[0]==="-"?ve.setProperty(de,De):ve[de]=De==null?"":typeof De!="number"||N.test(de)?De:De+"px"}function oe(ve,de,De,ot,Tt){var lt;e:if(de==="style")if(typeof De=="string")ve.style.cssText=De;else{if(typeof ot=="string"&&(ve.style.cssText=ot=""),ot)for(de in ot)De&&de in De||Ge(ve.style,de,"");if(De)for(de in De)ot&&De[de]===ot[de]||Ge(ve.style,de,De[de])}else if(de[0]==="o"&&de[1]==="n")lt=de!==(de=de.replace(/Capture$/,"")),de=de.toLowerCase()in ve?de.toLowerCase().slice(2):de.slice(2),ve.l||(ve.l={}),ve.l[de+lt]=De,De?ot||ve.addEventListener(de,lt?Ne:ue,lt):ve.removeEventListener(de,lt?Ne:ue,lt);else if(de!=="dangerouslySetInnerHTML"){if(Tt)de=de.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(de!=="href"&&de!=="list"&&de!=="form"&&de!=="tabIndex"&&de!=="download"&&de in ve)try{ve[de]=De??"";break e}catch{}typeof De=="function"||(De!=null&&(De!==!1||de[0]==="a"&&de[1]==="r")?ve.setAttribute(de,De):ve.removeAttribute(de))}}function ue(ve){this.l[ve.type+!1](d.event?d.event(ve):ve)}function Ne(ve){this.l[ve.type+!0](d.event?d.event(ve):ve)}function Re(ve,de,De,ot,Tt,lt,rr,pr,ar){var Qt,Ke,Xt,_e,Ft,_r,k,gr,Cr,$r,Zr,ur=de.type;if(de.constructor!==void 0)return null;De.__h!=null&&(ar=De.__h,pr=de.__e=De.__e,de.__h=null,lt=[pr]),(Qt=d.__b)&&Qt(de);try{e:if(typeof ur=="function"){if(gr=de.props,Cr=(Qt=ur.contextType)&&ot[Qt.__c],$r=Qt?Cr?Cr.props.value:Qt.__:ot,De.__c?k=(Ke=de.__c=De.__c).__=Ke.__E:("prototype"in ur&&ur.prototype.render?de.__c=Ke=new ur(gr,$r):(de.__c=Ke=new fe(gr,$r),Ke.constructor=ur,Ke.render=Pt),Cr&&Cr.sub(Ke),Ke.props=gr,Ke.state||(Ke.state={}),Ke.context=$r,Ke.__n=ot,Xt=Ke.__d=!0,Ke.__h=[]),Ke.__s==null&&(Ke.__s=Ke.state),ur.getDerivedStateFromProps!=null&&(Ke.__s==Ke.state&&(Ke.__s=M({},Ke.__s)),M(Ke.__s,ur.getDerivedStateFromProps(gr,Ke.__s))),_e=Ke.props,Ft=Ke.state,Xt)ur.getDerivedStateFromProps==null&&Ke.componentWillMount!=null&&Ke.componentWillMount(),Ke.componentDidMount!=null&&Ke.__h.push(Ke.componentDidMount);else{if(ur.getDerivedStateFromProps==null&&gr!==_e&&Ke.componentWillReceiveProps!=null&&Ke.componentWillReceiveProps(gr,$r),!Ke.__e&&Ke.shouldComponentUpdate!=null&&Ke.shouldComponentUpdate(gr,Ke.__s,$r)===!1||de.__v===De.__v){Ke.props=gr,Ke.state=Ke.__s,de.__v!==De.__v&&(Ke.__d=!1),Ke.__v=de,de.__e=De.__e,de.__k=De.__k,de.__k.forEach(function(sn){sn&&(sn.__=de)}),Ke.__h.length&&rr.push(Ke);break e}Ke.componentWillUpdate!=null&&Ke.componentWillUpdate(gr,Ke.__s,$r),Ke.componentDidUpdate!=null&&Ke.__h.push(function(){Ke.componentDidUpdate(_e,Ft,_r)})}Ke.context=$r,Ke.props=gr,Ke.state=Ke.__s,(Qt=d.__r)&&Qt(de),Ke.__d=!1,Ke.__v=de,Ke.__P=ve,Qt=Ke.render(Ke.props,Ke.state,Ke.context),Ke.state=Ke.__s,Ke.getChildContext!=null&&(ot=M(M({},ot),Ke.getChildContext())),Xt||Ke.getSnapshotBeforeUpdate==null||(_r=Ke.getSnapshotBeforeUpdate(_e,Ft)),Zr=Qt!=null&&Qt.type===Te&&Qt.key==null?Qt.props.children:Qt,Y(ve,Array.isArray(Zr)?Zr:[Zr],de,De,ot,Tt,lt,rr,pr,ar),Ke.base=de.__e,de.__h=null,Ke.__h.length&&rr.push(Ke),k&&(Ke.__E=Ke.__=null),Ke.__e=!1}else lt==null&&de.__v===De.__v?(de.__k=De.__k,de.__e=De.__e):de.__e=je(De.__e,de,De,ot,Tt,lt,rr,ar);(Qt=d.diffed)&&Qt(de)}catch(sn){de.__v=null,(ar||lt!=null)&&(de.__e=pr,de.__h=!!ar,lt[lt.indexOf(pr)]=null),d.__e(sn,de,De)}}function se(ve,de){d.__c&&d.__c(de,ve),ve.some(function(De){try{ve=De.__h,De.__h=[],ve.some(function(ot){ot.call(De)})}catch(ot){d.__e(ot,De.__v)}})}function je(ve,de,De,ot,Tt,lt,rr,pr){var ar,Qt,Ke,Xt=De.props,_e=de.props,Ft=de.type,_r=0;if(Ft==="svg"&&(Tt=!0),lt!=null){for(;_r<lt.length;_r++)if((ar=lt[_r])&&"setAttribute"in ar==!!Ft&&(Ft?ar.localName===Ft:ar.nodeType===3)){ve=ar,lt[_r]=null;break}}if(ve==null){if(Ft===null)return document.createTextNode(_e);ve=Tt?document.createElementNS("http://www.w3.org/2000/svg",Ft):document.createElement(Ft,_e.is&&_e),lt=null,pr=!1}if(Ft===null)Xt===_e||pr&&ve.data===_e||(ve.data=_e);else{if(lt=lt&&p.call(ve.childNodes),Qt=(Xt=De.props||P).dangerouslySetInnerHTML,Ke=_e.dangerouslySetInnerHTML,!pr){if(lt!=null)for(Xt={},_r=0;_r<ve.attributes.length;_r++)Xt[ve.attributes[_r].name]=ve.attributes[_r].value;(Ke||Qt)&&(Ke&&(Qt&&Ke.__html==Qt.__html||Ke.__html===ve.innerHTML)||(ve.innerHTML=Ke&&Ke.__html||""))}if(function(k,gr,Cr,$r,Zr){var ur;for(ur in Cr)ur==="children"||ur==="key"||ur in gr||oe(k,ur,null,Cr[ur],$r);for(ur in gr)Zr&&typeof gr[ur]!="function"||ur==="children"||ur==="key"||ur==="value"||ur==="checked"||Cr[ur]===gr[ur]||oe(k,ur,gr[ur],Cr[ur],$r)}(ve,_e,Xt,Tt,pr),Ke)de.__k=[];else if(_r=de.props.children,Y(ve,Array.isArray(_r)?_r:[_r],de,De,ot,Tt&&Ft!=="foreignObject",lt,rr,lt?lt[0]:De.__k&&ae(De,0),pr),lt!=null)for(_r=lt.length;_r--;)lt[_r]!=null&&L(lt[_r]);pr||("value"in _e&&(_r=_e.value)!==void 0&&(_r!==Xt.value||_r!==ve.value||Ft==="progress"&&!_r)&&oe(ve,"value",_r,Xt.value,!1),"checked"in _e&&(_r=_e.checked)!==void 0&&_r!==ve.checked&&oe(ve,"checked",_r,Xt.checked,!1))}return ve}function He(ve,de,De){try{typeof ve=="function"?ve(de):ve.current=de}catch(ot){d.__e(ot,De)}}function ft(ve,de,De){var ot,Tt;if(d.unmount&&d.unmount(ve),(ot=ve.ref)&&(ot.current&&ot.current!==ve.__e||He(ot,null,de)),(ot=ve.__c)!=null){if(ot.componentWillUnmount)try{ot.componentWillUnmount()}catch(lt){d.__e(lt,de)}ot.base=ot.__P=null}if(ot=ve.__k)for(Tt=0;Tt<ot.length;Tt++)ot[Tt]&&ft(ot[Tt],de,typeof ve.type!="function");De||ve.__e==null||L(ve.__e),ve.__e=ve.__d=void 0}function Pt(ve,de,De){return this.constructor(ve,De)}function Yt(ve,de,De){var ot,Tt,lt;d.__&&d.__(ve,de),Tt=(ot=typeof De=="function")?null:De&&De.__k||de.__k,lt=[],Re(de,ve=(!ot&&De||de).__k=z(Te,null,[ve]),Tt||P,P,de.ownerSVGElement!==void 0,!ot&&De?[De]:Tt?null:de.firstChild?p.call(de.childNodes):null,lt,!ot&&De?De:Tt?Tt.__e:de.firstChild,ot),se(lt,ve)}function bt(ve,de){Yt(ve,de,bt)}function xt(ve,de,De){var ot,Tt,lt,rr=M({},ve.props);for(lt in de)lt=="key"?ot=de[lt]:lt=="ref"?Tt=de[lt]:rr[lt]=de[lt];return arguments.length>2&&(rr.children=arguments.length>3?p.call(arguments,2):De),$(ve.type,rr,ot||ve.key,Tt||ve.ref,null)}function nr(ve,de){var De={__c:de="__cC"+T++,__:ve,Consumer:function(ot,Tt){return ot.children(Tt)},Provider:function(ot){var Tt,lt;return this.getChildContext||(Tt=[],(lt={})[de]=this,this.getChildContext=function(){return lt},this.shouldComponentUpdate=function(rr){this.props.value!==rr.value&&Tt.some(W)},this.sub=function(rr){Tt.push(rr);var pr=rr.componentWillUnmount;rr.componentWillUnmount=function(){Tt.splice(Tt.indexOf(rr),1),pr&&pr.call(rr)}}),ot.children}};return De.Provider.__=De.Consumer.contextType=De}p=A.slice,d={__e:function(ve,de){for(var De,ot,Tt;de=de.__;)if((De=de.__c)&&!De.__)try{if((ot=De.constructor)&&ot.getDerivedStateFromError!=null&&(De.setState(ot.getDerivedStateFromError(ve)),Tt=De.__d),De.componentDidCatch!=null&&(De.componentDidCatch(ve),Tt=De.__d),Tt)return De.__E=De}catch(lt){ve=lt}throw ve}},y=0,fe.prototype.setState=function(ve,de){var De;De=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=M({},this.state),typeof ve=="function"&&(ve=ve(M({},De),this.props)),ve&&M(De,ve),ve!=null&&this.__v&&(de&&this.__h.push(de),W(this))},fe.prototype.forceUpdate=function(ve){this.__v&&(this.__e=!0,ve&&this.__h.push(ve),W(this))},fe.prototype.render=Te,g=[],E=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,F.__r=0,T=0},function(a,f,o){(function(p,d){o.d(f,"a",function(){return W}),o.d(f,"b",function(){return bu}),o.d(f,"c",function(){return Co}),o.d(f,"d",function(){return lr}),o.d(f,"e",function(){return _t}),o.d(f,"f",function(){return jt}),o.d(f,"g",function(){return er}),o.d(f,"h",function(){return io}),o.d(f,"i",function(){return Zr}),o.d(f,"j",function(){return Gt}),o.d(f,"k",function(){return Ho}),o.d(f,"l",function(){return pu}),o.d(f,"m",function(){return k}),o.d(f,"n",function(){return _i}),o.d(f,"o",function(){return V}),o.d(f,"p",function(){return Es}),o.d(f,"q",function(){return po}),o.d(f,"r",function(){return Oa}),o.d(f,"s",function(){return oo}),o.d(f,"t",function(){return Vi}),o.d(f,"u",function(){return Ea}),o.d(f,"v",function(){return Hc}),o.d(f,"w",function(){return _s}),o.d(f,"x",function(){return An}),o.d(f,"y",function(){return Ao}),o.d(f,"z",function(){return _n}),o.d(f,"A",function(){return jn}),o.d(f,"B",function(){return ho}),o.d(f,"C",function(){return Qt}),o.d(f,"D",function(){return gu}),o.d(f,"E",function(){return bi}),o.d(f,"F",function(){return mi}),o.d(f,"G",function(){return Uc}),o.d(f,"H",function(){return hs}),o.d(f,"I",function(){return Vc}),o.d(f,"J",function(){return yo}),o.d(f,"K",function(){return xe}),o.d(f,"L",function(){return Gn}),o.d(f,"M",function(){return Os});var y=[];Object.freeze(y);var g={};function E(){return++Wt.mobxGuid}function _(m){throw T(!1,m),"X"}function T(m,b){if(!m)throw new Error("[mobx] "+(b||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(g);function P(m){var b=!1;return function(){if(!b)return b=!0,m.apply(this,arguments)}}var A=function(){};function N(m){return m!==null&&typeof m=="object"}function M(m){if(m===null||typeof m!="object")return!1;var b=Object.getPrototypeOf(m);return b===Object.prototype||b===null}function L(m,b,S){Object.defineProperty(m,b,{enumerable:!1,writable:!0,configurable:!0,value:S})}function z(m,b){var S="isMobX"+m;return b.prototype[S]=!0,function(C){return N(C)&&C[S]===!0}}function $(m){return m instanceof Map}function ye(m){return m instanceof Set}function Te(m){var b=new Set;for(var S in m)b.add(S);return Object.getOwnPropertySymbols(m).forEach(function(C){Object.getOwnPropertyDescriptor(m,C).enumerable&&b.add(C)}),Array.from(b)}function fe(m){return m&&m.toString?m.toString():new String(m).toString()}function ae(m){return m===null?null:typeof m=="object"?""+m:m}var pe=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:Object.getOwnPropertyNames,W=Symbol("mobx administration"),F=function(){function m(b){b===void 0&&(b="Atom@"+E()),this.name=b,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Xt.NOT_TRACKING}return m.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},m.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},m.prototype.reportObserved=function(){return ps(this)},m.prototype.reportChanged=function(){fo(),function(b){b.lowestObserverState!==Xt.STALE&&(b.lowestObserverState=Xt.STALE,b.observers.forEach(function(S){S.dependenciesState===Xt.UP_TO_DATE&&(S.isTracing!==_e.NONE&&zo(S,b),S.onBecomeStale()),S.dependenciesState=Xt.STALE}))}(this),lo()},m.prototype.toString=function(){return this.name},m}(),Y=z("Atom",F);function V(m,b,S){b===void 0&&(b=A),S===void 0&&(S=A);var C,K=new F(m);return b!==A&&gs("onBecomeObserved",K,b,C),S!==A&&bi(K,S),K}var q={identity:function(m,b){return m===b},structural:function(m,b){return Eu(m,b)},default:function(m,b){return Object.is(m,b)},shallow:function(m,b){return Eu(m,b,1)}},Oe=function(m,b){return Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,C){S.__proto__=C}||function(S,C){for(var K in C)C.hasOwnProperty(K)&&(S[K]=C[K])},Oe(m,b)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Ge=function(){return Ge=Object.assign||function(m){for(var b,S=1,C=arguments.length;S<C;S++)for(var K in b=arguments[S])Object.prototype.hasOwnProperty.call(b,K)&&(m[K]=b[K]);return m},Ge.apply(this,arguments)};function oe(m){var b=typeof Symbol=="function"&&m[Symbol.iterator],S=0;return b?b.call(m):{next:function(){return m&&S>=m.length&&(m=void 0),{value:m&&m[S++],done:!m}}}}function ue(m,b){var S=typeof Symbol=="function"&&m[Symbol.iterator];if(!S)return m;var C,K,Ee=S.call(m),ze=[];try{for(;(b===void 0||b-- >0)&&!(C=Ee.next()).done;)ze.push(C.value)}catch(vt){K={error:vt}}finally{try{C&&!C.done&&(S=Ee.return)&&S.call(Ee)}finally{if(K)throw K.error}}return ze}function Ne(){for(var m=[],b=0;b<arguments.length;b++)m=m.concat(ue(arguments[b]));return m}var Re=Symbol("mobx did run lazy initializers"),se=Symbol("mobx pending decorators"),je={},He={};function ft(m,b){var S=b?je:He;return S[m]||(S[m]={configurable:!0,enumerable:b,get:function(){return Pt(this),this[m]},set:function(C){Pt(this),this[m]=C}})}function Pt(m){var b,S;if(m[Re]!==!0){var C=m[se];if(C){L(m,Re,!0);var K=Ne(Object.getOwnPropertySymbols(C),Object.keys(C));try{for(var Ee=oe(K),ze=Ee.next();!ze.done;ze=Ee.next()){var vt=C[ze.value];vt.propertyCreator(m,vt.prop,vt.descriptor,vt.decoratorTarget,vt.decoratorArguments)}}catch(Ut){b={error:Ut}}finally{try{ze&&!ze.done&&(S=Ee.return)&&S.call(Ee)}finally{if(b)throw b.error}}}}}function Yt(m,b){return function(){var S,C=function(K,Ee,ze,vt){if(vt===!0)return b(K,Ee,ze,K,S),null;if(!Object.prototype.hasOwnProperty.call(K,se)){var Ut=K[se];L(K,se,Ge({},Ut))}return K[se][Ee]={prop:Ee,propertyCreator:b,descriptor:ze,decoratorTarget:K,decoratorArguments:S},ft(Ee,m)};return bt(arguments)?(S=y,C.apply(null,arguments)):(S=Array.prototype.slice.call(arguments),C)}}function bt(m){return(m.length===2||m.length===3)&&(typeof m[1]=="string"||typeof m[1]=="symbol")||m.length===4&&m[3]===!0}function xt(m,b,S){return An(m)?m:Array.isArray(m)?Qt.array(m,{name:S}):M(m)?Qt.object(m,void 0,{name:S}):$(m)?Qt.map(m,{name:S}):ye(m)?Qt.set(m,{name:S}):m}function nr(m){return m}function ve(m){T(m);var b=Yt(!0,function(C,K,Ee,ze,vt){var Ut=Ee?Ee.initializer?Ee.initializer.call(C):Ee.value:void 0;Ki(C).addObservableProp(K,Ut,m)}),S=(p!==void 0&&p.env,b);return S.enhancer=m,S}var de={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function De(m){return m==null?de:typeof m=="string"?{name:m,deep:!0,proxy:!0}:m}Object.freeze(de);var ot=ve(xt),Tt=ve(function(m,b,S){return m==null||jn(m)||Ao(m)||_n(m)||Pn(m)?m:Array.isArray(m)?Qt.array(m,{name:S,deep:!1}):M(m)?Qt.object(m,void 0,{name:S,deep:!1}):$(m)?Qt.map(m,{name:S,deep:!1}):ye(m)?Qt.set(m,{name:S,deep:!1}):_(!1)}),lt=ve(nr),rr=ve(function(m,b,S){return Eu(m,b)?b:m});function pr(m){return m.defaultDecorator?m.defaultDecorator.enhancer:m.deep===!1?nr:xt}var ar={box:function(m,b){arguments.length>2&&Ke("box");var S=De(b);return new Ir(m,pr(S),S.name,!0,S.equals)},array:function(m,b){arguments.length>2&&Ke("array");var S=De(b);return Yi(m,pr(S),S.name)},map:function(m,b){arguments.length>2&&Ke("map");var S=De(b);return new bu(m,pr(S),S.name)},set:function(m,b){arguments.length>2&&Ke("set");var S=De(b);return new Sa(m,pr(S),S.name)},object:function(m,b,S){typeof arguments[1]=="string"&&Ke("object");var C=De(S);if(C.proxy===!1)return po({},m,b,C);var K=du(C),Ee=po({},void 0,void 0,C),ze=Yc(Ee);return ms(ze,m,b,K),ze},ref:lt,shallow:Tt,deep:ot,struct:rr},Qt=function(m,b,S){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return ot.apply(null,arguments);if(An(m))return m;var C=M(m)?Qt.object(m,b,S):Array.isArray(m)?Qt.array(m,b):$(m)?Qt.map(m,b):ye(m)?Qt.set(m,b):m;if(C!==m)return C;_(!1)};function Ke(m){_("Expected one or two arguments to observable."+m+". Did you accidentally try to use observable."+m+" as decorator?")}Object.keys(ar).forEach(function(m){return Qt[m]=ar[m]});var Xt,_e,Ft=Yt(!1,function(m,b,S,C,K){var Ee=S.get,ze=S.set,vt=K[0]||{};Ki(m).addComputedProp(m,b,Ge({get:Ee,set:ze,context:m},vt))}),_r=Ft({equals:q.structural}),k=function(m,b,S){if(typeof b=="string"||m!==null&&typeof m=="object"&&arguments.length===1)return Ft.apply(null,arguments);var C=typeof b=="object"?b:{};return C.get=m,C.set=typeof b=="function"?b:C.set,C.name=C.name||m.name||"",new Go(C)};k.struct=_r,function(m){m[m.NOT_TRACKING=-1]="NOT_TRACKING",m[m.UP_TO_DATE=0]="UP_TO_DATE",m[m.POSSIBLY_STALE=1]="POSSIBLY_STALE",m[m.STALE=2]="STALE"}(Xt||(Xt={})),function(m){m[m.NONE=0]="NONE",m[m.LOG=1]="LOG",m[m.BREAK=2]="BREAK"}(_e||(_e={}));var gr=function(m){this.cause=m};function Cr(m){return m instanceof gr}function $r(m){switch(m.dependenciesState){case Xt.UP_TO_DATE:return!1;case Xt.NOT_TRACKING:case Xt.STALE:return!0;case Xt.POSSIBLY_STALE:for(var b=jt(!0),S=ie(),C=m.observing,K=C.length,Ee=0;Ee<K;Ee++){var ze=C[Ee];if(Uo(ze)){if(Wt.disableErrorBoundaries)ze.get();else try{ze.get()}catch{return Le(S),_t(b),!0}if(m.dependenciesState===Xt.STALE)return Le(S),_t(b),!0}}return Vt(m),Le(S),_t(b),!1}}function Zr(){return Wt.trackingDerivation!==null}function ur(m){var b=m.observers.size>0;Wt.computationDepth>0&&b&&_(!1),Wt.allowStateChanges||!b&&Wt.enforceActions!=="strict"||_(!1)}function sn(m,b,S){var C=jt(!0);Vt(m),m.newObserving=new Array(m.observing.length+100),m.unboundDepsCount=0,m.runId=++Wt.runId;var K,Ee=Wt.trackingDerivation;if(Wt.trackingDerivation=m,Wt.disableErrorBoundaries===!0)K=b.call(S);else try{K=b.call(S)}catch(ze){K=new gr(ze)}return Wt.trackingDerivation=Ee,function(ze){for(var vt=ze.observing,Ut=ze.observing=ze.newObserving,Ar=Xt.UP_TO_DATE,sr=0,Gr=ze.unboundDepsCount,Or=0;Or<Gr;Or++)(Ur=Ut[Or]).diffValue===0&&(Ur.diffValue=1,sr!==Or&&(Ut[sr]=Ur),sr++),Ur.dependenciesState>Ar&&(Ar=Ur.dependenciesState);for(Ut.length=sr,ze.newObserving=null,Gr=vt.length;Gr--;)(Ur=vt[Gr]).diffValue===0&&tn(Ur,ze),Ur.diffValue=0;for(;sr--;){var Ur;(Ur=Ut[sr]).diffValue===1&&(Ur.diffValue=0,fs(Ur,ze))}Ar!==Xt.UP_TO_DATE&&(ze.dependenciesState=Ar,ze.onBecomeStale())}(m),_t(C),K}function Q(m){var b=m.observing;m.observing=[];for(var S=b.length;S--;)tn(b[S],m);m.dependenciesState=Xt.NOT_TRACKING}function xe(m){var b=ie();try{return m()}finally{Le(b)}}function ie(){var m=Wt.trackingDerivation;return Wt.trackingDerivation=null,m}function Le(m){Wt.trackingDerivation=m}function jt(m){var b=Wt.allowStateReads;return Wt.allowStateReads=m,b}function _t(m){Wt.allowStateReads=m}function Vt(m){if(m.dependenciesState!==Xt.UP_TO_DATE){m.dependenciesState=Xt.UP_TO_DATE;for(var b=m.observing,S=b.length;S--;)b[S].lowestObserverState=Xt.UP_TO_DATE}}var Tr=0,On=1,kn=Object.getOwnPropertyDescriptor(function(){},"name");kn&&kn.configurable;function pn(m,b,S){var C=function(){return bn(m,b,S||this,arguments)};return C.isMobxAction=!0,C}function bn(m,b,S,C){var K=Gt();try{return b.apply(S,C)}catch(Ee){throw K.error=Ee,Ee}finally{er(K)}}function Gt(m,b,S){var C=0,K=ie();fo();var Ee={prevDerivation:K,prevAllowStateChanges:yr(!0),prevAllowStateReads:jt(!0),notifySpy:!1,startTime:C,actionId:On++,parentActionId:Tr};return Tr=Ee.actionId,Ee}function er(m){Tr!==m.actionId&&_("invalid action stack. did you forget to finish an action?"),Tr=m.parentActionId,m.error!==void 0&&(Wt.suppressReactionErrors=!0),Xr(m.prevAllowStateChanges),_t(m.prevAllowStateReads),lo(),Le(m.prevDerivation),m.notifySpy,Wt.suppressReactionErrors=!1}function lr(m,b){var S,C=yr(m);try{S=b()}finally{Xr(C)}return S}function yr(m){var b=Wt.allowStateChanges;return Wt.allowStateChanges=m,b}function Xr(m){Wt.allowStateChanges=m}var Ir=function(m){function b(S,C,K,Ee,ze){K===void 0&&(K="ObservableValue@"+E()),ze===void 0&&(ze=q.default);var vt=m.call(this,K)||this;return vt.enhancer=C,vt.name=K,vt.equals=ze,vt.hasUnreportedChange=!1,vt.value=C(S,void 0,K),vt}return function(S,C){function K(){this.constructor=S}Oe(S,C),S.prototype=C===null?Object.create(C):(K.prototype=C.prototype,new K)}(b,m),b.prototype.dehanceValue=function(S){return this.dehancer!==void 0?this.dehancer(S):S},b.prototype.set=function(S){this.value,(S=this.prepareNewValue(S))!==Wt.UNCHANGED&&this.setNewValue(S)},b.prototype.prepareNewValue=function(S){if(ur(this),$n(this)){var C=Rr(this,{object:this,type:"update",newValue:S});if(!C)return Wt.UNCHANGED;S=C.newValue}return S=this.enhancer(S,this.value,this.name),this.equals(this.value,S)?Wt.UNCHANGED:S},b.prototype.setNewValue=function(S){var C=this.value;this.value=S,this.reportChanged(),no(this)&&Ln(this,{type:"update",object:this,newValue:S,oldValue:C})},b.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},b.prototype.intercept=function(S){return To(this,S)},b.prototype.observe=function(S,C){return C&&S({object:this,type:"update",newValue:this.value,oldValue:void 0}),Vo(this,S)},b.prototype.toJSON=function(){return this.get()},b.prototype.toString=function(){return this.name+"["+this.value+"]"},b.prototype.valueOf=function(){return ae(this.get())},b.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},b}(F),oi=z("ObservableValue",Ir),Go=function(){function m(b){this.dependenciesState=Xt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Xt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+E(),this.value=new gr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=_e.NONE,T(b.get,"missing option for computed: get"),this.derivation=b.get,this.name=b.name||"ComputedValue@"+E(),b.set&&(this.setter=pn(this.name+"-setter",b.set)),this.equals=b.equals||(b.compareStructural||b.struct?q.structural:q.default),this.scope=b.context,this.requiresReaction=!!b.requiresReaction,this.keepAlive=!!b.keepAlive}return m.prototype.onBecomeStale=function(){(function(b){b.lowestObserverState===Xt.UP_TO_DATE&&(b.lowestObserverState=Xt.POSSIBLY_STALE,b.observers.forEach(function(S){S.dependenciesState===Xt.UP_TO_DATE&&(S.dependenciesState=Xt.POSSIBLY_STALE,S.isTracing!==_e.NONE&&zo(S,b),S.onBecomeStale())}))})(this)},m.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},m.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},m.prototype.get=function(){this.isComputing&&_("Cycle detected in computation "+this.name+": "+this.derivation),Wt.inBatch!==0||this.observers.size!==0||this.keepAlive?(ps(this),$r(this)&&this.trackAndCompute()&&function(S){S.lowestObserverState!==Xt.STALE&&(S.lowestObserverState=Xt.STALE,S.observers.forEach(function(C){C.dependenciesState===Xt.POSSIBLY_STALE?C.dependenciesState=Xt.STALE:C.dependenciesState===Xt.UP_TO_DATE&&(S.lowestObserverState=Xt.UP_TO_DATE)}))}(this)):$r(this)&&(this.warnAboutUntrackedRead(),fo(),this.value=this.computeValue(!1),lo());var b=this.value;if(Cr(b))throw b.cause;return b},m.prototype.peek=function(){var b=this.computeValue(!1);if(Cr(b))throw b.cause;return b},m.prototype.set=function(b){if(this.setter){T(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,b)}finally{this.isRunningSetter=!1}}else T(!1,!1)},m.prototype.trackAndCompute=function(){var b=this.value,S=this.dependenciesState===Xt.NOT_TRACKING,C=this.computeValue(!0),K=S||Cr(b)||Cr(C)||!this.equals(b,C);return K&&(this.value=C),K},m.prototype.computeValue=function(b){var S;if(this.isComputing=!0,Wt.computationDepth++,b)S=sn(this,this.derivation,this.scope);else if(Wt.disableErrorBoundaries===!0)S=this.derivation.call(this.scope);else try{S=this.derivation.call(this.scope)}catch(C){S=new gr(C)}return Wt.computationDepth--,this.isComputing=!1,S},m.prototype.suspend=function(){this.keepAlive||(Q(this),this.value=void 0)},m.prototype.observe=function(b,S){var C=this,K=!0,Ee=void 0;return pu(function(){var ze=C.get();if(!K||S){var vt=ie();b({type:"update",object:C,newValue:ze,oldValue:Ee}),Le(vt)}K=!1,Ee=ze})},m.prototype.warnAboutUntrackedRead=function(){},m.prototype.toJSON=function(){return this.get()},m.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},m.prototype.valueOf=function(){return ae(this.get())},m.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},m}(),Uo=z("ComputedValue",Go),Xi=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Lc={};function cu(){return typeof window<"u"?window:d!==void 0?d:typeof self<"u"?self:Lc}var xo=!0,cs=!1,Wt=function(){var m=cu();return m.__mobxInstanceCount>0&&!m.__mobxGlobals&&(xo=!1),m.__mobxGlobals&&m.__mobxGlobals.version!==new Xi().version&&(xo=!1),xo?m.__mobxGlobals?(m.__mobxInstanceCount+=1,m.__mobxGlobals.UNCHANGED||(m.__mobxGlobals.UNCHANGED={}),m.__mobxGlobals):(m.__mobxInstanceCount=1,m.__mobxGlobals=new Xi):(setTimeout(function(){cs||_("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Xi)}();function fs(m,b){m.observers.add(b),m.lowestObserverState>b.dependenciesState&&(m.lowestObserverState=b.dependenciesState)}function tn(m,b){m.observers.delete(b),m.observers.size===0&&ls(m)}function ls(m){m.isPendingUnobservation===!1&&(m.isPendingUnobservation=!0,Wt.pendingUnobservations.push(m))}function fo(){Wt.inBatch++}function lo(){if(--Wt.inBatch==0){ds();for(var m=Wt.pendingUnobservations,b=0;b<m.length;b++){var S=m[b];S.isPendingUnobservation=!1,S.observers.size===0&&(S.isBeingObserved&&(S.isBeingObserved=!1,S.onBecomeUnobserved()),S instanceof Go&&S.suspend())}Wt.pendingUnobservations=[]}}function ps(m){var b=Wt.trackingDerivation;return b!==null?(b.runId!==m.lastAccessedBy&&(m.lastAccessedBy=b.runId,b.newObserving[b.unboundDepsCount++]=m,m.isBeingObserved||(m.isBeingObserved=!0,m.onBecomeObserved())),!0):(m.observers.size===0&&Wt.inBatch>0&&ls(m),!1)}function zo(m,b){if(m.isTracing===_e.BREAK){var S=[];gi(Vi(m),S,1),new Function(`debugger;
/*
Tracing '`+m.name+`'

You are entering this break point because derivation '`+m.name+"' is being traced and '"+b.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(m instanceof Go?m.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+S.join(`
`)+`
*/
    `)()}}function gi(m,b,S){b.length>=1e3?b.push("(and many more)"):(b.push(""+new Array(S).join("	")+m.name),m.dependencies&&m.dependencies.forEach(function(C){return gi(C,b,S+1)}))}var Co=function(){function m(b,S,C,K){b===void 0&&(b="Reaction@"+E()),K===void 0&&(K=!1),this.name=b,this.onInvalidate=S,this.errorHandler=C,this.requiresObservable=K,this.observing=[],this.newObserving=[],this.dependenciesState=Xt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+E(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=_e.NONE}return m.prototype.onBecomeStale=function(){this.schedule()},m.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Wt.pendingReactions.push(this),ds())},m.prototype.isScheduled=function(){return this._isScheduled},m.prototype.runReaction=function(){if(!this.isDisposed){if(fo(),this._isScheduled=!1,$r(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(b){this.reportExceptionInDerivation(b)}}lo()}},m.prototype.track=function(b){if(!this.isDisposed){fo(),this._isRunning=!0;var S=sn(this,b,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Q(this),Cr(S)&&this.reportExceptionInDerivation(S.cause),lo()}},m.prototype.reportExceptionInDerivation=function(b){var S=this;if(this.errorHandler)this.errorHandler(b,this);else{if(Wt.disableErrorBoundaries)throw b;Wt.suppressReactionErrors,Wt.globalReactionErrorHandlers.forEach(function(C){return C(b,S)})}},m.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(fo(),Q(this),lo()))},m.prototype.getDisposer=function(){var b=this.dispose.bind(this);return b[W]=this,b},m.prototype.toString=function(){return"Reaction["+this.name+"]"},m.prototype.trace=function(b){b===void 0&&(b=!1),function(){for(var S=[],C=0;C<arguments.length;C++)S[C]=arguments[C];var K=!1;typeof S[S.length-1]=="boolean"&&(K=S.pop());var Ee=So(S);if(!Ee)return _(!1);Ee.isTracing,_e.NONE,Ee.isTracing=K?_e.BREAK:_e.LOG}(this,b)},m}(),fu=function(m){return m()};function ds(){Wt.inBatch>0||Wt.isRunningReactions||fu(Bc)}function Bc(){Wt.isRunningReactions=!0;for(var m=Wt.pendingReactions,b=0;m.length>0;){++b==100&&m.splice(0);for(var S=m.splice(0),C=0,K=S.length;C<K;C++)S[C].runReaction()}Wt.isRunningReactions=!1}var _a=z("Reaction",Co);function Fc(m){var b=fu;fu=function(S){return m(function(){return b(S)})}}function hs(m){return function(){}}function Gc(){_(!1)}function ii(m){return function(b,S,C){if(C){if(C.value)return{value:pn(m,C.value),enumerable:!1,configurable:!0,writable:!0};var K=C.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return pn(m,K.call(this))}}}return ys(m).apply(this,arguments)}}function ys(m){return function(b,S,C){Object.defineProperty(b,S,{configurable:!0,enumerable:!1,get:function(){},set:function(K){L(this,S,Ho(m,K))}})}}var Ho=function(m,b,S,C){return arguments.length===1&&typeof m=="function"?pn(m.name||"<unnamed action>",m):arguments.length===2&&typeof b=="function"?pn(m,b):arguments.length===1&&typeof m=="string"?ii(m):C!==!0?ii(b).apply(null,arguments):void L(m,b,pn(m.name||b,S.value,this))};function Uc(m,b){return bn(typeof m=="string"?m:m.name||"<unnamed action>",typeof m=="function"?m:b,this,void 0)}function Ea(m){return typeof m=="function"&&m.isMobxAction===!0}function lu(m,b,S){L(m,b,pn(b,S.bind(m)))}function pu(m,b){b===void 0&&(b=g);var S,C=b&&b.name||m.name||"Autorun@"+E();if(!b.scheduler&&!b.delay)S=new Co(C,function(){this.track(ze)},b.onError,b.requiresObservable);else{var K=vs(b),Ee=!1;S=new Co(C,function(){Ee||(Ee=!0,K(function(){Ee=!1,S.isDisposed||S.track(ze)}))},b.onError,b.requiresObservable)}function ze(){m(S)}return S.schedule(),S.getDisposer()}Ho.bound=function(m,b,S,C){return C===!0?(lu(m,b,S.value),null):S?{configurable:!0,enumerable:!1,get:function(){return lu(this,b,S.value||S.initializer.call(this)),this[b]},set:Gc}:{enumerable:!1,configurable:!0,set:function(K){lu(this,b,K)},get:function(){}}};var zc=function(m){return m()};function vs(m){return m.scheduler?m.scheduler:m.delay?function(b){return setTimeout(b,m.delay)}:zc}function mi(m,b,S){S===void 0&&(S=g);var C,K,Ee,ze=S.name||"Reaction@"+E(),vt=Ho(ze,S.onError?(C=S.onError,K=b,function(){try{return K.apply(this,arguments)}catch(rn){C.call(this,rn)}}):b),Ut=!S.scheduler&&!S.delay,Ar=vs(S),sr=!0,Gr=!1,Or=S.compareStructural?q.structural:S.equals||q.default,Ur=new Co(ze,function(){sr||Ut?ao():Gr||(Gr=!0,Ar(ao))},S.onError,S.requiresObservable);function ao(){if(Gr=!1,!Ur.isDisposed){var rn=!1;Ur.track(function(){var qn=m(Ur);rn=sr||!Or(Ee,qn),Ee=qn}),sr&&S.fireImmediately&&vt(Ee,Ur),sr||rn!==!0||vt(Ee,Ur),sr&&(sr=!1)}}return Ur.schedule(),Ur.getDisposer()}function bi(m,b,S){return gs("onBecomeUnobserved",m,b,S)}function gs(m,b,S,C){var K=typeof C=="function"?oo(b,S):oo(b),Ee=typeof C=="function"?C:S,ze=m+"Listeners";return K[ze]?K[ze].add(Ee):K[ze]=new Set([Ee]),typeof K[m]!="function"?_(!1):function(){var vt=K[ze];vt&&(vt.delete(Ee),vt.size===0&&delete K[ze])}}function _i(m){var b=m.enforceActions,S=m.computedRequiresReaction,C=m.computedConfigurable,K=m.disableErrorBoundaries,Ee=m.reactionScheduler,ze=m.reactionRequiresObservable,vt=m.observableRequiresReaction;if(m.isolateGlobalState===!0&&((Wt.pendingReactions.length||Wt.inBatch||Wt.isRunningReactions)&&_("isolateGlobalState should be called before MobX is running any reactions"),cs=!0,xo&&(--cu().__mobxInstanceCount==0&&(cu().__mobxGlobals=void 0),Wt=new Xi)),b!==void 0){var Ut=void 0;switch(b){case!0:case"observed":Ut=!0;break;case!1:case"never":Ut=!1;break;case"strict":case"always":Ut="strict";break;default:_("Invalid value for 'enforceActions': '"+b+"', expected 'never', 'always' or 'observed'")}Wt.enforceActions=Ut,Wt.allowStateChanges=Ut!==!0&&Ut!=="strict"}S!==void 0&&(Wt.computedRequiresReaction=!!S),ze!==void 0&&(Wt.reactionRequiresObservable=!!ze),vt!==void 0&&(Wt.observableRequiresReaction=!!vt,Wt.allowStateReads=!Wt.observableRequiresReaction),C!==void 0&&(Wt.computedConfigurable=!!C),K!==void 0&&(Wt.disableErrorBoundaries=!!K),Ee&&Fc(Ee)}function po(m,b,S,C){var K=du(C=De(C));return Pt(m),Ki(m,C.name,K.enhancer),b&&ms(m,b,S,K),m}function du(m){return m.defaultDecorator||(m.deep===!1?lt:ot)}function ms(m,b,S,C){var K,Ee;fo();try{var ze=pe(b);try{for(var vt=oe(ze),Ut=vt.next();!Ut.done;Ut=vt.next()){var Ar=Ut.value,sr=Object.getOwnPropertyDescriptor(b,Ar),Gr=(S&&Ar in S?S[Ar]:sr.get?Ft:C)(m,Ar,sr,!0);Gr&&Object.defineProperty(m,Ar,Gr)}}catch(Or){K={error:Or}}finally{try{Ut&&!Ut.done&&(Ee=vt.return)&&Ee.call(vt)}finally{if(K)throw K.error}}}finally{lo()}}function Vi(m,b){return Ei(oo(m,b))}function Ei(m){var b,S,C={name:m.name};return m.observing&&m.observing.length>0&&(C.dependencies=(b=m.observing,S=[],b.forEach(function(K){S.indexOf(K)===-1&&S.push(K)}),S).map(Ei)),C}var hu=0;function yu(){this.message="FLOW_CANCELLED"}function Oa(m){arguments.length!==1&&_("Flow expects 1 argument and cannot be used as decorator");var b=m.name||"<unnamed flow>";return function(){var S,C=this,K=arguments,Ee=++hu,ze=Ho(b+" - runid: "+Ee+" - init",m).apply(C,K),vt=void 0,Ut=new Promise(function(Ar,sr){var Gr=0;function Or(rn){var qn;vt=void 0;try{qn=Ho(b+" - runid: "+Ee+" - yield "+Gr++,ze.next).call(ze,rn)}catch(Zi){return sr(Zi)}ao(qn)}function Ur(rn){var qn;vt=void 0;try{qn=Ho(b+" - runid: "+Ee+" - yield "+Gr++,ze.throw).call(ze,rn)}catch(Zi){return sr(Zi)}ao(qn)}function ao(rn){if(!rn||typeof rn.then!="function")return rn.done?Ar(rn.value):(vt=Promise.resolve(rn.value)).then(Or,Ur);rn.then(ao,sr)}S=sr,Or(void 0)});return Ut.cancel=Ho(b+" - runid: "+Ee+" - cancel",function(){try{vt&&Wi(vt);var Ar=ze.return(void 0),sr=Promise.resolve(Ar.value);sr.then(A,A),Wi(sr),S(new yu)}catch(Gr){S(Gr)}}),Ut}}function Wi(m){typeof m.cancel=="function"&&m.cancel()}function bs(m,b){if(m==null)return!1;if(b!==void 0){if(jn(m)===!1||!m[W].values.has(b))return!1;var S=oo(m,b);return Uo(S)}return Uo(m)}function Hc(m){return arguments.length>1?_(!1):bs(m)}function _s(m,b){return typeof b!="string"?_(!1):bs(m,b)}function Yn(m,b){return m!=null&&(b!==void 0?!!jn(m)&&m[W].values.has(b):jn(m)||!!m[W]||Y(m)||_a(m)||Uo(m))}function An(m){return arguments.length!==1&&_(!1),Yn(m)}function ho(m){return jn(m)?m[W].getKeys():_n(m)||Pn(m)?Array.from(m.keys()):Ao(m)?m.map(function(b,S){return S}):_(!1)}function Gn(m){return jn(m)?ho(m).map(function(b){return m[b]}):_n(m)?ho(m).map(function(b){return m.get(b)}):Pn(m)?Array.from(m.values()):Ao(m)?m.slice():_(!1)}function Es(m){return jn(m)?ho(m).map(function(b){return[b,m[b]]}):_n(m)?ho(m).map(function(b){return[b,m.get(b)]}):Pn(m)?Array.from(m.entries()):Ao(m)?m.map(function(b,S){return[S,b]}):_(!1)}function vu(m,b,S){if(arguments.length!==2||Pn(m))if(jn(m)){var C=m[W],K=C.values.get(b);K?C.write(b,S):C.addObservableProp(b,S,C.defaultEnhancer)}else if(_n(m))m.set(b,S);else if(Pn(m))m.add(b);else{if(!Ao(m))return _(!1);typeof b!="number"&&(b=parseInt(b,10)),T(b>=0,"Not a valid index: '"+b+"'"),fo(),b>=m.length&&(m.length=b+1),m[b]=S,lo()}else{fo();var Ee=b;try{for(var ze in Ee)vu(m,ze,Ee[ze])}finally{lo()}}}function gu(m,b,S,C){return typeof S=="function"?function(K,Ee,ze,vt){return io(K,Ee).observe(ze,vt)}(m,b,S,C):function(K,Ee,ze){return io(K).observe(Ee,ze)}(m,b,S)}yu.prototype=Object.create(Error.prototype);var Xc={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function ai(m,b,S,C){return C.detectCycles&&m.set(b,S),S}function ro(m,b,S){if(!b.recurseEverything&&!An(m)||typeof m!="object")return m;if(m===null)return null;if(m instanceof Date)return m;if(oi(m))return ro(m.get(),b,S);if(An(m)&&ho(m),b.detectCycles===!0&&m!==null&&S.has(m))return S.get(m);if(Ao(m)||Array.isArray(m)){var C=ai(S,m,[],b),K=m.map(function(Or){return ro(Or,b,S)});C.length=K.length;for(var Ee=0,ze=K.length;Ee<ze;Ee++)C[Ee]=K[Ee];return C}if(Pn(m)||Object.getPrototypeOf(m)===Set.prototype){if(b.exportMapsAsObjects===!1){var vt=ai(S,m,new Set,b);return m.forEach(function(Or){vt.add(ro(Or,b,S))}),vt}var Ut=ai(S,m,[],b);return m.forEach(function(Or){Ut.push(ro(Or,b,S))}),Ut}if(_n(m)||Object.getPrototypeOf(m)===Map.prototype){if(b.exportMapsAsObjects===!1){var Ar=ai(S,m,new Map,b);return m.forEach(function(Or,Ur){Ar.set(Ur,ro(Or,b,S))}),Ar}var sr=ai(S,m,{},b);return m.forEach(function(Or,Ur){sr[Ur]=ro(Or,b,S)}),sr}var Gr=ai(S,m,{},b);return Te(m).forEach(function(Or){Gr[Or]=ro(m[Or],b,S)}),Gr}function Vc(m,b){var S;return typeof b=="boolean"&&(b={detectCycles:b}),b||(b=Xc),b.detectCycles=b.detectCycles===void 0?b.recurseEverything===!0:b.detectCycles===!0,b.detectCycles&&(S=new Map),ro(m,b,S)}function So(m){switch(m.length){case 0:return Wt.trackingDerivation;case 1:return oo(m[0]);case 2:return oo(m[0],m[1])}}function yo(m,b){b===void 0&&(b=void 0),fo();try{return m.apply(b)}finally{lo()}}function Os(m,b,S){return arguments.length===1||b&&typeof b=="object"?Wc(m,b):ws(m,b,S||{})}function ws(m,b,S){var C;typeof S.timeout=="number"&&(C=setTimeout(function(){if(!Ee[W].isDisposed){Ee();var ze=new Error("WHEN_TIMEOUT");if(!S.onError)throw ze;S.onError(ze)}},S.timeout)),S.name=S.name||"When@"+E();var K=pn(S.name+"-effect",b),Ee=pu(function(ze){m()&&(ze.dispose(),C&&clearTimeout(C),K())},S);return Ee}function Wc(m,b){var S,C=new Promise(function(K,Ee){var ze=ws(m,K,Ge(Ge({},b),{onError:Ee}));S=function(){ze(),Ee("WHEN_CANCELLED")}});return C.cancel=S,C}function wa(m){return m[W]}function Xo(m){return typeof m=="string"||typeof m=="number"||typeof m=="symbol"}var vo={has:function(m,b){if(b===W||b==="constructor"||b===Re)return!0;var S=wa(m);return Xo(b)?S.has(b):b in m},get:function(m,b){if(b===W||b==="constructor"||b===Re)return m[b];var S=wa(m),C=S.values.get(b);if(C instanceof F){var K=C.get();return K===void 0&&S.has(b),K}return Xo(b)&&S.has(b),m[b]},set:function(m,b,S){return!!Xo(b)&&(vu(m,b,S),!0)},deleteProperty:function(m,b){return!!Xo(b)&&(wa(m).remove(b),!0)},ownKeys:function(m){return wa(m).keysAtom.reportObserved(),Reflect.ownKeys(m)},preventExtensions:function(m){return _("Dynamic observable objects cannot be frozen"),!1}};function Yc(m){var b=new Proxy(m,vo);return m[W].proxy=b,b}function $n(m){return m.interceptors!==void 0&&m.interceptors.length>0}function To(m,b){var S=m.interceptors||(m.interceptors=[]);return S.push(b),P(function(){var C=S.indexOf(b);C!==-1&&S.splice(C,1)})}function Rr(m,b){var S=ie();try{for(var C=Ne(m.interceptors||[]),K=0,Ee=C.length;K<Ee&&(T(!(b=C[K](b))||b.type,"Intercept handlers should return nothing or a change object"),b);K++);return b}finally{Le(S)}}function no(m){return m.changeListeners!==void 0&&m.changeListeners.length>0}function Vo(m,b){var S=m.changeListeners||(m.changeListeners=[]);return S.push(b),P(function(){var C=S.indexOf(b);C!==-1&&S.splice(C,1)})}function Ln(m,b){var S=ie(),C=m.changeListeners;if(C){for(var K=0,Ee=(C=C.slice()).length;K<Ee;K++)C[K](b);Le(S)}}var xa={get:function(m,b){return b===W?m[W]:b==="length"?m[W].getArrayLength():typeof b=="number"?Kn.get.call(m,b):typeof b!="string"||isNaN(b)?Kn.hasOwnProperty(b)?Kn[b]:m[b]:Kn.get.call(m,parseInt(b))},set:function(m,b,S){return b==="length"&&m[W].setArrayLength(S),typeof b=="number"&&Kn.set.call(m,b,S),typeof b=="symbol"||isNaN(b)?m[b]=S:Kn.set.call(m,parseInt(b),S),!0},preventExtensions:function(m){return _("Observable arrays cannot be frozen"),!1}};function Yi(m,b,S,C){S===void 0&&(S="ObservableArray@"+E()),C===void 0&&(C=!1);var K,Ee,ze,vt=new Io(S,b,C);K=vt.values,Ee=W,ze=vt,Object.defineProperty(K,Ee,{enumerable:!1,writable:!1,configurable:!0,value:ze});var Ut=new Proxy(vt.values,xa);if(vt.proxy=Ut,m&&m.length){var Ar=yr(!0);vt.spliceWithArray(0,0,m),Xr(Ar)}return Ut}var Io=function(){function m(b,S,C){this.owned=C,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new F(b||"ObservableArray@"+E()),this.enhancer=function(K,Ee){return S(K,Ee,b+"[..]")}}return m.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},m.prototype.dehanceValues=function(b){return this.dehancer!==void 0&&b.length>0?b.map(this.dehancer):b},m.prototype.intercept=function(b){return To(this,b)},m.prototype.observe=function(b,S){return S===void 0&&(S=!1),S&&b({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Vo(this,b)},m.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},m.prototype.setArrayLength=function(b){if(typeof b!="number"||b<0)throw new Error("[mobx.array] Out of range: "+b);var S=this.values.length;if(b!==S)if(b>S){for(var C=new Array(b-S),K=0;K<b-S;K++)C[K]=void 0;this.spliceWithArray(S,0,C)}else this.spliceWithArray(b,S-b)},m.prototype.updateArrayLength=function(b,S){if(b!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=S},m.prototype.spliceWithArray=function(b,S,C){var K=this;ur(this.atom);var Ee=this.values.length;if(b===void 0?b=0:b>Ee?b=Ee:b<0&&(b=Math.max(0,Ee+b)),S=arguments.length===1?Ee-b:S==null?0:Math.max(0,Math.min(S,Ee-b)),C===void 0&&(C=y),$n(this)){var ze=Rr(this,{object:this.proxy,type:"splice",index:b,removedCount:S,added:C});if(!ze)return y;S=ze.removedCount,C=ze.added}C=C.length===0?C:C.map(function(Ut){return K.enhancer(Ut,void 0)});var vt=this.spliceItemsIntoValues(b,S,C);return S===0&&C.length===0||this.notifyArraySplice(b,C,vt),this.dehanceValues(vt)},m.prototype.spliceItemsIntoValues=function(b,S,C){var K;if(C.length<1e4)return(K=this.values).splice.apply(K,Ne([b,S],C));var Ee=this.values.slice(b,b+S);return this.values=this.values.slice(0,b).concat(C,this.values.slice(b+S)),Ee},m.prototype.notifyArrayChildUpdate=function(b,S,C){var K=!this.owned&&!1,Ee=no(this),ze=Ee||K?{object:this.proxy,type:"update",index:b,newValue:S,oldValue:C}:null;this.atom.reportChanged(),Ee&&Ln(this,ze)},m.prototype.notifyArraySplice=function(b,S,C){var K=!this.owned&&!1,Ee=no(this),ze=Ee||K?{object:this.proxy,type:"splice",index:b,removed:C,added:S,removedCount:C.length,addedCount:S.length}:null;this.atom.reportChanged(),Ee&&Ln(this,ze)},m}(),Kn={intercept:function(m){return this[W].intercept(m)},observe:function(m,b){return b===void 0&&(b=!1),this[W].observe(m,b)},clear:function(){return this.splice(0)},replace:function(m){var b=this[W];return b.spliceWithArray(0,b.values.length,m)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(m,b){for(var S=[],C=2;C<arguments.length;C++)S[C-2]=arguments[C];var K=this[W];switch(arguments.length){case 0:return[];case 1:return K.spliceWithArray(m);case 2:return K.spliceWithArray(m,b)}return K.spliceWithArray(m,b,S)},spliceWithArray:function(m,b,S){return this[W].spliceWithArray(m,b,S)},push:function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];var S=this[W];return S.spliceWithArray(S.values.length,0,m),S.values.length},pop:function(){return this.splice(Math.max(this[W].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];var S=this[W];return S.spliceWithArray(0,0,m),S.values.length},reverse:function(){var m=this.slice();return m.reverse.apply(m,arguments)},sort:function(m){var b=this.slice();return b.sort.apply(b,arguments)},remove:function(m){var b=this[W],S=b.dehanceValues(b.values).indexOf(m);return S>-1&&(this.splice(S,1),!0)},get:function(m){var b=this[W];if(b&&m<b.values.length)return b.atom.reportObserved(),b.dehanceValue(b.values[m])},set:function(m,b){var S=this[W],C=S.values;if(m<C.length){ur(S.atom);var K=C[m];if($n(S)){var Ee=Rr(S,{type:"update",object:S.proxy,index:m,newValue:b});if(!Ee)return;b=Ee.newValue}(b=S.enhancer(b,K))!==K&&(C[m]=b,S.notifyArrayChildUpdate(m,b,K))}else{if(m!==C.length)throw new Error("[mobx.array] Index out of bounds, "+m+" is larger than "+C.length);S.spliceWithArray(m,0,[b])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(m){typeof Array.prototype[m]=="function"&&(Kn[m]=function(){var b=this[W];b.atom.reportObserved();var S=b.dehanceValues(b.values);return S[m].apply(S,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(m){typeof Array.prototype[m]=="function"&&(Kn[m]=function(b,S){var C=this,K=this[W];return K.atom.reportObserved(),K.dehanceValues(K.values)[m](function(Ee,ze){return b.call(S,Ee,ze,C)},S)})}),["reduce","reduceRight"].forEach(function(m){Kn[m]=function(){var b=this,S=this[W];S.atom.reportObserved();var C=arguments[0];return arguments[0]=function(K,Ee,ze){return Ee=S.dehanceValue(Ee),C(K,Ee,ze,b)},S.values[m].apply(S.values,arguments)}});var mu,$i=z("ObservableArrayAdministration",Io);function Ao(m){return N(m)&&$i(m[W])}var xs,$c={},bu=function(){function m(b,S,C){if(S===void 0&&(S=xt),C===void 0&&(C="ObservableMap@"+E()),this.enhancer=S,this.name=C,this[mu]=$c,this._keysAtom=V(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(b)}return m.prototype._has=function(b){return this._data.has(b)},m.prototype.has=function(b){var S=this;if(!Wt.trackingDerivation)return this._has(b);var C=this._hasMap.get(b);if(!C){var K=C=new Ir(this._has(b),nr,this.name+"."+fe(b)+"?",!1);this._hasMap.set(b,K),bi(K,function(){return S._hasMap.delete(b)})}return C.get()},m.prototype.set=function(b,S){var C=this._has(b);if($n(this)){var K=Rr(this,{type:C?"update":"add",object:this,newValue:S,name:b});if(!K)return this;S=K.newValue}return C?this._updateValue(b,S):this._addValue(b,S),this},m.prototype.delete=function(b){var S=this;if(ur(this._keysAtom),$n(this)&&!(K=Rr(this,{type:"delete",object:this,name:b})))return!1;if(this._has(b)){var C=no(this),K=C?{type:"delete",object:this,oldValue:this._data.get(b).value,name:b}:null;return yo(function(){S._keysAtom.reportChanged(),S._updateHasMapEntry(b,!1),S._data.get(b).setNewValue(void 0),S._data.delete(b)}),C&&Ln(this,K),!0}return!1},m.prototype._updateHasMapEntry=function(b,S){var C=this._hasMap.get(b);C&&C.setNewValue(S)},m.prototype._updateValue=function(b,S){var C=this._data.get(b);if((S=C.prepareNewValue(S))!==Wt.UNCHANGED){var K=no(this),Ee=K?{type:"update",object:this,oldValue:C.value,name:b,newValue:S}:null;C.setNewValue(S),K&&Ln(this,Ee)}},m.prototype._addValue=function(b,S){var C=this;ur(this._keysAtom),yo(function(){var ze=new Ir(S,C.enhancer,C.name+"."+fe(b),!1);C._data.set(b,ze),S=ze.value,C._updateHasMapEntry(b,!0),C._keysAtom.reportChanged()});var K=no(this),Ee=K?{type:"add",object:this,name:b,newValue:S}:null;K&&Ln(this,Ee)},m.prototype.get=function(b){return this.has(b)?this.dehanceValue(this._data.get(b).get()):this.dehanceValue(void 0)},m.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},m.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},m.prototype.values=function(){var b=this,S=this.keys();return Aa({next:function(){var C=S.next(),K=C.done,Ee=C.value;return{done:K,value:K?void 0:b.get(Ee)}}})},m.prototype.entries=function(){var b=this,S=this.keys();return Aa({next:function(){var C=S.next(),K=C.done,Ee=C.value;return{done:K,value:K?void 0:[Ee,b.get(Ee)]}}})},m.prototype[mu=W,Symbol.iterator]=function(){return this.entries()},m.prototype.forEach=function(b,S){var C,K;try{for(var Ee=oe(this),ze=Ee.next();!ze.done;ze=Ee.next()){var vt=ue(ze.value,2),Ut=vt[0],Ar=vt[1];b.call(S,Ar,Ut,this)}}catch(sr){C={error:sr}}finally{try{ze&&!ze.done&&(K=Ee.return)&&K.call(Ee)}finally{if(C)throw C.error}}},m.prototype.merge=function(b){var S=this;return _n(b)&&(b=b.toJS()),yo(function(){var C=yr(!0);try{M(b)?Te(b).forEach(function(K){return S.set(K,b[K])}):Array.isArray(b)?b.forEach(function(K){var Ee=ue(K,2),ze=Ee[0],vt=Ee[1];return S.set(ze,vt)}):$(b)?(b.constructor!==Map&&_("Cannot initialize from classes that inherit from Map: "+b.constructor.name),b.forEach(function(K,Ee){return S.set(Ee,K)})):b!=null&&_("Cannot initialize map from "+b)}finally{Xr(C)}}),this},m.prototype.clear=function(){var b=this;yo(function(){xe(function(){var S,C;try{for(var K=oe(b.keys()),Ee=K.next();!Ee.done;Ee=K.next()){var ze=Ee.value;b.delete(ze)}}catch(vt){S={error:vt}}finally{try{Ee&&!Ee.done&&(C=K.return)&&C.call(K)}finally{if(S)throw S.error}}})})},m.prototype.replace=function(b){var S=this;return yo(function(){var C,K,Ee,ze,vt=function(wn){if($(wn)||_n(wn))return wn;if(Array.isArray(wn))return new Map(wn);if(M(wn)){var ja=new Map;for(var si in wn)ja.set(si,wn[si]);return ja}return _("Cannot convert to map from '"+wn+"'")}(b),Ut=new Map,Ar=!1;try{for(var sr=oe(S._data.keys()),Gr=sr.next();!Gr.done;Gr=sr.next()){var Or=Gr.value;if(!vt.has(Or))if(S.delete(Or))Ar=!0;else{var Ur=S._data.get(Or);Ut.set(Or,Ur)}}}catch(wn){C={error:wn}}finally{try{Gr&&!Gr.done&&(K=sr.return)&&K.call(sr)}finally{if(C)throw C.error}}try{for(var ao=oe(vt.entries()),rn=ao.next();!rn.done;rn=ao.next()){var qn=ue(rn.value,2),Zi=(Or=qn[0],Ur=qn[1],S._data.has(Or));if(S.set(Or,Ur),S._data.has(Or)){var Kc=S._data.get(Or);Ut.set(Or,Kc),Zi||(Ar=!0)}}}catch(wn){Ee={error:wn}}finally{try{rn&&!rn.done&&(ze=ao.return)&&ze.call(ao)}finally{if(Ee)throw Ee.error}}if(!Ar)if(S._data.size!==Ut.size)S._keysAtom.reportChanged();else for(var Pa=S._data.keys(),Qi=Ut.keys(),wi=Pa.next(),Ji=Qi.next();!wi.done;){if(wi.value!==Ji.value){S._keysAtom.reportChanged();break}wi=Pa.next(),Ji=Qi.next()}S._data=Ut}),this},Object.defineProperty(m.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),m.prototype.toPOJO=function(){var b,S,C={};try{for(var K=oe(this),Ee=K.next();!Ee.done;Ee=K.next()){var ze=ue(Ee.value,2),vt=ze[0],Ut=ze[1];C[typeof vt=="symbol"?vt:fe(vt)]=Ut}}catch(Ar){b={error:Ar}}finally{try{Ee&&!Ee.done&&(S=K.return)&&S.call(K)}finally{if(b)throw b.error}}return C},m.prototype.toJS=function(){return new Map(this)},m.prototype.toJSON=function(){return this.toPOJO()},m.prototype.toString=function(){var b=this;return this.name+"[{ "+Array.from(this.keys()).map(function(S){return fe(S)+": "+b.get(S)}).join(", ")+" }]"},m.prototype.observe=function(b,S){return Vo(this,b)},m.prototype.intercept=function(b){return To(this,b)},m}(),_n=z("ObservableMap",bu),Oi={},Sa=function(){function m(b,S,C){if(S===void 0&&(S=xt),C===void 0&&(C="ObservableSet@"+E()),this.name=C,this[xs]=Oi,this._data=new Set,this._atom=V(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(K,Ee){return S(K,Ee,C)},b&&this.replace(b)}return m.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},m.prototype.clear=function(){var b=this;yo(function(){xe(function(){var S,C;try{for(var K=oe(b._data.values()),Ee=K.next();!Ee.done;Ee=K.next()){var ze=Ee.value;b.delete(ze)}}catch(vt){S={error:vt}}finally{try{Ee&&!Ee.done&&(C=K.return)&&C.call(K)}finally{if(S)throw S.error}}})})},m.prototype.forEach=function(b,S){var C,K;try{for(var Ee=oe(this),ze=Ee.next();!ze.done;ze=Ee.next()){var vt=ze.value;b.call(S,vt,vt,this)}}catch(Ut){C={error:Ut}}finally{try{ze&&!ze.done&&(K=Ee.return)&&K.call(Ee)}finally{if(C)throw C.error}}},Object.defineProperty(m.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),m.prototype.add=function(b){var S=this;if(ur(this._atom),$n(this)&&!(K=Rr(this,{type:"add",object:this,newValue:b})))return this;if(!this.has(b)){yo(function(){S._data.add(S.enhancer(b,void 0)),S._atom.reportChanged()});var C=no(this),K=C?{type:"add",object:this,newValue:b}:null;C&&Ln(this,K)}return this},m.prototype.delete=function(b){var S=this;if($n(this)&&!(K=Rr(this,{type:"delete",object:this,oldValue:b})))return!1;if(this.has(b)){var C=no(this),K=C?{type:"delete",object:this,oldValue:b}:null;return yo(function(){S._atom.reportChanged(),S._data.delete(b)}),C&&Ln(this,K),!0}return!1},m.prototype.has=function(b){return this._atom.reportObserved(),this._data.has(this.dehanceValue(b))},m.prototype.entries=function(){var b=0,S=Array.from(this.keys()),C=Array.from(this.values());return Aa({next:function(){var K=b;return b+=1,K<C.length?{value:[S[K],C[K]],done:!1}:{done:!0}}})},m.prototype.keys=function(){return this.values()},m.prototype.values=function(){this._atom.reportObserved();var b=this,S=0,C=Array.from(this._data.values());return Aa({next:function(){return S<C.length?{value:b.dehanceValue(C[S++]),done:!1}:{done:!0}}})},m.prototype.replace=function(b){var S=this;return Pn(b)&&(b=b.toJS()),yo(function(){var C=yr(!0);try{Array.isArray(b)||ye(b)?(S.clear(),b.forEach(function(K){return S.add(K)})):b!=null&&_("Cannot initialize set from "+b)}finally{Xr(C)}}),this},m.prototype.observe=function(b,S){return Vo(this,b)},m.prototype.intercept=function(b){return To(this,b)},m.prototype.toJS=function(){return new Set(this)},m.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},m.prototype[xs=W,Symbol.iterator]=function(){return this.values()},m}(),Pn=z("ObservableSet",Sa),Ss=function(){function m(b,S,C,K){S===void 0&&(S=new Map),this.target=b,this.values=S,this.name=C,this.defaultEnhancer=K,this.keysAtom=new F(C+".keys")}return m.prototype.read=function(b){return this.values.get(b).get()},m.prototype.write=function(b,S){var C=this.target,K=this.values.get(b);if(K instanceof Go)K.set(S);else{if($n(this)){if(!(ze=Rr(this,{type:"update",object:this.proxy||C,name:b,newValue:S})))return;S=ze.newValue}if((S=K.prepareNewValue(S))!==Wt.UNCHANGED){var Ee=no(this),ze=Ee?{type:"update",object:this.proxy||C,oldValue:K.value,name:b,newValue:S}:null;K.setNewValue(S),Ee&&Ln(this,ze)}}},m.prototype.has=function(b){var S=this.pendingKeys||(this.pendingKeys=new Map),C=S.get(b);if(C)return C.get();var K=!!this.values.get(b);return C=new Ir(K,nr,this.name+"."+fe(b)+"?",!1),S.set(b,C),C.get()},m.prototype.addObservableProp=function(b,S,C){C===void 0&&(C=this.defaultEnhancer);var K=this.target;if($n(this)){var Ee=Rr(this,{object:this.proxy||K,name:b,type:"add",newValue:S});if(!Ee)return;S=Ee.newValue}var ze=new Ir(S,C,this.name+"."+fe(b),!1);this.values.set(b,ze),S=ze.value,Object.defineProperty(K,b,function(vt){return Wo[vt]||(Wo[vt]={configurable:!0,enumerable:!0,get:function(){return this[W].read(vt)},set:function(Ut){this[W].write(vt,Ut)}})}(b)),this.notifyPropertyAddition(b,S)},m.prototype.addComputedProp=function(b,S,C){var K,Ee,ze,vt=this.target;C.name=C.name||this.name+"."+fe(S),this.values.set(S,new Go(C)),(b===vt||(K=b,Ee=S,!(ze=Object.getOwnPropertyDescriptor(K,Ee))||ze.configurable!==!1&&ze.writable!==!1))&&Object.defineProperty(b,S,function(Ut){return Ta[Ut]||(Ta[Ut]={configurable:Wt.computedConfigurable,enumerable:!1,get:function(){return ko(this).read(Ut)},set:function(Ar){ko(this).write(Ut,Ar)}})}(S))},m.prototype.remove=function(b){if(this.values.has(b)){var S=this.target;if($n(this)&&!(Ut=Rr(this,{object:this.proxy||S,name:b,type:"remove"})))return;try{fo();var C=no(this),K=!1,Ee=this.values.get(b),ze=Ee&&Ee.get();if(Ee&&Ee.set(void 0),this.keysAtom.reportChanged(),this.values.delete(b),this.pendingKeys){var vt=this.pendingKeys.get(b);vt&&vt.set(!1)}delete this.target[b];var Ut=C?{type:"remove",object:this.proxy||S,oldValue:ze,name:b}:null;C&&Ln(this,Ut)}finally{lo()}}},m.prototype.illegalAccess=function(b,S){},m.prototype.observe=function(b,S){return Vo(this,b)},m.prototype.intercept=function(b){return To(this,b)},m.prototype.notifyPropertyAddition=function(b,S){var C=no(this),K=C?{type:"add",object:this.proxy||this.target,name:b,newValue:S}:null;if(C&&Ln(this,K),this.pendingKeys){var Ee=this.pendingKeys.get(b);Ee&&Ee.set(!0)}this.keysAtom.reportChanged()},m.prototype.getKeys=function(){var b,S;this.keysAtom.reportObserved();var C=[];try{for(var K=oe(this.values),Ee=K.next();!Ee.done;Ee=K.next()){var ze=ue(Ee.value,2),vt=ze[0];ze[1]instanceof Ir&&C.push(vt)}}catch(Ut){b={error:Ut}}finally{try{Ee&&!Ee.done&&(S=K.return)&&S.call(K)}finally{if(b)throw b.error}}return C},m}();function Ki(m,b,S){if(b===void 0&&(b=""),S===void 0&&(S=xt),Object.prototype.hasOwnProperty.call(m,W))return m[W];M(m)||(b=(m.constructor.name||"ObservableObject")+"@"+E()),b||(b="ObservableObject@"+E());var C=new Ss(m,new Map,fe(b),S);return L(m,W,C),C}var Wo=Object.create(null),Ta=Object.create(null);function ko(m){var b=m[W];return b||(Pt(m),m[W])}var _u=z("ObservableObjectAdministration",Ss);function jn(m){return!!N(m)&&(Pt(m),_u(m[W]))}function oo(m,b){if(typeof m=="object"&&m!==null){if(Ao(m))return b!==void 0&&_(!1),m[W].atom;if(Pn(m))return m[W];if(_n(m)){var S=m;return b===void 0?S._keysAtom:((C=S._data.get(b)||S._hasMap.get(b))||_(!1),C)}var C;if(Pt(m),b&&!m[W]&&m[b],jn(m))return b?((C=m[W].values.get(b))||_(!1),C):_(!1);if(Y(m)||Uo(m)||_a(m))return m}else if(typeof m=="function"&&_a(m[W]))return m[W];return _(!1)}function io(m,b){return m||_("Expecting some object"),b!==void 0?io(oo(m,b)):Y(m)||Uo(m)||_a(m)||_n(m)||Pn(m)?m:(Pt(m),m[W]?m[W]:void _(!1))}var qi=Object.prototype.toString;function Eu(m,b,S){return S===void 0&&(S=-1),Ou(m,b,S)}function Ou(m,b,S,C,K){if(m===b)return m!==0||1/m==1/b;if(m==null||b==null)return!1;if(m!=m)return b!=b;var Ee=typeof m;if(Ee!=="function"&&Ee!=="object"&&typeof b!="object")return!1;var ze=qi.call(m);if(ze!==qi.call(b))return!1;switch(ze){case"[object RegExp]":case"[object String]":return""+m==""+b;case"[object Number]":return+m!=+m?+b!=+b:+m==0?1/+m==1/b:+m==+b;case"[object Date]":case"[object Boolean]":return+m==+b;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(m)===Symbol.valueOf.call(b);case"[object Map]":case"[object Set]":S>=0&&S++}m=Ts(m),b=Ts(b);var vt=ze==="[object Array]";if(!vt){if(typeof m!="object"||typeof b!="object")return!1;var Ut=m.constructor,Ar=b.constructor;if(Ut!==Ar&&!(typeof Ut=="function"&&Ut instanceof Ut&&typeof Ar=="function"&&Ar instanceof Ar)&&"constructor"in m&&"constructor"in b)return!1}if(S===0)return!1;S<0&&(S=-1),K=K||[];for(var sr=(C=C||[]).length;sr--;)if(C[sr]===m)return K[sr]===b;if(C.push(m),K.push(b),vt){if((sr=m.length)!==b.length)return!1;for(;sr--;)if(!Ou(m[sr],b[sr],S-1,C,K))return!1}else{var Gr=Object.keys(m),Or=void 0;if(sr=Gr.length,Object.keys(b).length!==sr)return!1;for(;sr--;)if(!As(b,Or=Gr[sr])||!Ou(m[Or],b[Or],S-1,C,K))return!1}return C.pop(),K.pop(),!0}function Ts(m){return Ao(m)?m.slice():$(m)||_n(m)||ye(m)||Pn(m)?Array.from(m.entries()):m}function As(m,b){return Object.prototype.hasOwnProperty.call(m,b)}function Aa(m){return m[Symbol.iterator]=ui,m}function ui(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:hs,extras:{getDebugName:function(m,b){return(b!==void 0?oo(m,b):jn(m)||_n(m)||Pn(m)?io(m):oo(m)).name}},$mobx:W})}).call(this,o(155),o(82))},function(a,f,o){var p=o(116),d=o(44),y=o(179);p||d(Object.prototype,"toString",y,{unsafe:!0})},function(a,f,o){var p=o(40),d=o(83),y=o(70),g=o(56),E=o(111),_="Array Iterator",T=g.set,P=g.getterFor(_);a.exports=E(Array,"Array",function(A,N){T(this,{type:_,target:p(A),index:0,kind:N})},function(){var A=P(this),N=A.target,M=A.kind,L=A.index++;return!N||L>=N.length?(A.target=void 0,{value:void 0,done:!0}):M=="keys"?{value:L,done:!1}:M=="values"?{value:N[L],done:!1}:{value:[L,N[L]],done:!1}},"values"),y.Arguments=y.Array,d("keys"),d("values"),d("entries")},function(a,f,o){var p=o(7),d=o(147),y=o(148),g=o(3),E=o(57),_=o(27),T=_("iterator"),P=_("toStringTag"),A=g.values,N=function(L,z){if(L){if(L[T]!==A)try{E(L,T,A)}catch{L[T]=A}if(L[P]||E(L,P,z),d[z]){for(var $ in g)if(L[$]!==g[$])try{E(L,$,g[$])}catch{L[$]=g[$]}}}};for(var M in d)N(p[M]&&p[M].prototype,M);N(y,"DOMTokenList")},function(a,f,o){var p=o(17),d=o(7),y=o(46),g=o(76),E=o(35),_=o(15),T=o(64),P=o(36),A=o(109),N=o(19),M=o(34),L=o(99),z=o(28),$=o(33),ye=o(58),Te=o(88),fe=o(32),ae=o(38),pe=o(40),W=o(87),F=o(41),Y=o(71),V=o(54),q=o(66),Oe=o(72),Ge=o(139),oe=o(112),ue=o(51),Ne=o(37),Re=o(93),se=o(101),je=o(44),He=o(84),ft=o(91),Pt=o(69),Yt=o(85),bt=o(27),xt=o(149),nr=o(150),ve=o(73),de=o(56),De=o(74).forEach,ot=ft("hidden"),Tt="Symbol",lt=bt("toPrimitive"),rr=de.set,pr=de.getterFor(Tt),ar=Object.prototype,Qt=d.Symbol,Ke=Qt&&Qt.prototype,Xt=d.TypeError,_e=d.QObject,Ft=y("JSON","stringify"),_r=ue.f,k=Ne.f,gr=Ge.f,Cr=Re.f,$r=_([].push),Zr=He("symbols"),ur=He("op-symbols"),sn=He("string-to-symbol-registry"),Q=He("symbol-to-string-registry"),xe=He("wks"),ie=!_e||!_e.prototype||!_e.prototype.findChild,Le=P&&N(function(){return V(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a!=7})?function(Gt,er,lr){var yr=_r(ar,er);yr&&delete ar[er],k(Gt,er,lr),yr&&Gt!==ar&&k(ar,er,yr)}:k,jt=function(Gt,er){var lr=Zr[Gt]=V(Ke);return rr(lr,{type:Tt,tag:Gt,description:er}),P||(lr.description=er),lr},_t=function(Gt,er,lr){Gt===ar&&_t(ur,er,lr),fe(Gt);var yr=W(er);return fe(lr),M(Zr,yr)?(lr.enumerable?(M(Gt,ot)&&Gt[ot][yr]&&(Gt[ot][yr]=!1),lr=V(lr,{enumerable:Y(0,!1)})):(M(Gt,ot)||k(Gt,ot,Y(1,{})),Gt[ot][yr]=!0),Le(Gt,yr,lr)):k(Gt,yr,lr)},Vt=function(Gt,er){fe(Gt);var lr=pe(er),yr=q(lr).concat(pn(lr));return De(yr,function(Xr){P&&!E(Tr,lr,Xr)||_t(Gt,Xr,lr[Xr])}),Gt},Tr=function(Gt){var er=W(Gt),lr=E(Cr,this,er);return!(this===ar&&M(Zr,er)&&!M(ur,er))&&(!(lr||!M(this,er)||!M(Zr,er)||M(this,ot)&&this[ot][er])||lr)},On=function(Gt,er){var lr=pe(Gt),yr=W(er);if(lr!==ar||!M(Zr,yr)||M(ur,yr)){var Xr=_r(lr,yr);return!Xr||!M(Zr,yr)||M(lr,ot)&&lr[ot][yr]||(Xr.enumerable=!0),Xr}},kn=function(Gt){var er=gr(pe(Gt)),lr=[];return De(er,function(yr){M(Zr,yr)||M(Pt,yr)||$r(lr,yr)}),lr},pn=function(Gt){var er=Gt===ar,lr=gr(er?ur:pe(Gt)),yr=[];return De(lr,function(Xr){!M(Zr,Xr)||er&&!M(ar,Xr)||$r(yr,Zr[Xr])}),yr};if(A||(Qt=function(){if(ye(Ke,this))throw Xt("Symbol is not a constructor");var Gt=arguments.length&&arguments[0]!==void 0?F(arguments[0]):void 0,er=Yt(Gt),lr=function(yr){this===ar&&E(lr,ur,yr),M(this,ot)&&M(this[ot],er)&&(this[ot][er]=!1),Le(this,er,Y(1,yr))};return P&&ie&&Le(ar,er,{configurable:!0,set:lr}),jt(er,Gt)},je(Ke=Qt.prototype,"toString",function(){return pr(this).tag}),je(Qt,"withoutSetter",function(Gt){return jt(Yt(Gt),Gt)}),Re.f=Tr,Ne.f=_t,ue.f=On,Oe.f=Ge.f=kn,oe.f=pn,xt.f=function(Gt){return jt(bt(Gt),Gt)},P&&(k(Ke,"description",{configurable:!0,get:function(){return pr(this).description}}),T||je(ar,"propertyIsEnumerable",Tr,{unsafe:!0}))),p({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Qt}),De(q(xe),function(Gt){nr(Gt)}),p({target:Tt,stat:!0,forced:!A},{for:function(Gt){var er=F(Gt);if(M(sn,er))return sn[er];var lr=Qt(er);return sn[er]=lr,Q[lr]=er,lr},keyFor:function(Gt){if(!Te(Gt))throw Xt(Gt+" is not a symbol");if(M(Q,Gt))return Q[Gt]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),p({target:"Object",stat:!0,forced:!A,sham:!P},{create:function(Gt,er){return er===void 0?V(Gt):Vt(V(Gt),er)},defineProperty:_t,defineProperties:Vt,getOwnPropertyDescriptor:On}),p({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:kn,getOwnPropertySymbols:pn}),p({target:"Object",stat:!0,forced:N(function(){oe.f(1)})},{getOwnPropertySymbols:function(Gt){return oe.f(ae(Gt))}}),Ft&&p({target:"JSON",stat:!0,forced:!A||N(function(){var Gt=Qt();return Ft([Gt])!="[null]"||Ft({a:Gt})!="{}"||Ft(Object(Gt))!="{}"})},{stringify:function(Gt,er,lr){var yr=se(arguments),Xr=er;if(($(er)||Gt!==void 0)&&!Te(Gt))return L(er)||(er=function(Ir,oi){if(z(Xr)&&(oi=E(Xr,this,Ir,oi)),!Te(oi))return oi}),yr[1]=er,g(Ft,null,yr)}}),!Ke[lt]){var bn=Ke.valueOf;je(Ke,lt,function(Gt){return E(bn,this)})}ve(Qt,Tt),Pt[ot]=!0},function(a,f,o){var p=o(146).charAt,d=o(41),y=o(56),g=o(111),E="String Iterator",_=y.set,T=y.getterFor(E);g(String,"String",function(P){_(this,{type:E,string:d(P),index:0})},function(){var P,A=T(this),N=A.string,M=A.index;return M>=N.length?{value:void 0,done:!0}:(P=p(N,M),A.index+=P.length,{value:P,done:!1})})},function(a,f,o){(function(p){var d=function(y){return y&&y.Math==Math&&y};a.exports=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof p=="object"&&p)||function(){return this}()||Function("return this")()}).call(this,o(82))},function(a,f,o){var p=o(17),d=o(36),y=o(7),g=o(15),E=o(34),_=o(28),T=o(58),P=o(41),A=o(37).f,N=o(134),M=y.Symbol,L=M&&M.prototype;if(d&&_(M)&&(!("description"in L)||M().description!==void 0)){var z={},$=function(){var F=arguments.length<1||arguments[0]===void 0?void 0:P(arguments[0]),Y=T(L,this)?new M(F):F===void 0?M():M(F);return F===""&&(z[Y]=!0),Y};N($,M),$.prototype=L,L.constructor=$;var ye=String(M("test"))=="Symbol(test)",Te=g(L.toString),fe=g(L.valueOf),ae=/^Symbol\((.*)\)[^)]+$/,pe=g("".replace),W=g("".slice);A(L,"description",{configurable:!0,get:function(){var F=fe(this),Y=Te(F);if(E(z,F))return"";var V=ye?W(Y,7,-1):pe(Y,ae,"$1");return V===""?void 0:V}}),p({global:!0,forced:!0},{Symbol:$})}},function(a,f,o){o(150)("iterator")},function(a,f,o){o.d(f,"a",function(){return g.a}),o.d(f,"c",function(){return g.e}),o.d(f,"h",function(){return ae}),o.d(f,"i",function(){return ye}),o.d(f,"j",function(){return z}),o.d(f,"b",function(){return ue}),o.d(f,"e",function(){return je}),o.d(f,"f",function(){return Ne}),o.d(f,"g",function(){return Zr});var p,d,y,g=o(0),E=0,_=[],T=g.i.__b,P=g.i.__r,A=g.i.diffed,N=g.i.__c,M=g.i.unmount;function L(Q,xe){g.i.__h&&g.i.__h(d,Q,E||xe),E=0;var ie=d.__H||(d.__H={__:[],__h:[]});return Q>=ie.__.length&&ie.__.push({}),ie.__[Q]}function z(Q){return E=1,$(Oe,Q)}function $(Q,xe,ie){var Le=L(p++,2);return Le.t=Q,Le.__c||(Le.__=[ie?ie(xe):Oe(void 0,xe),function(jt){var _t=Le.t(Le.__[0],jt);Le.__[0]!==_t&&(Le.__=[_t,Le.__[1]],Le.__c.setState({}))}],Le.__c=d),Le.__}function ye(Q,xe){var ie=L(p++,3);!g.i.__s&&q(ie.__H,xe)&&(ie.__=Q,ie.__H=xe,d.__H.__h.push(ie))}function Te(Q,xe){var ie=L(p++,4);!g.i.__s&&q(ie.__H,xe)&&(ie.__=Q,ie.__H=xe,d.__h.push(ie))}function fe(Q,xe){var ie=L(p++,7);return q(ie.__H,xe)&&(ie.__=Q(),ie.__H=xe,ie.__h=Q),ie.__}function ae(Q,xe){return E=8,fe(function(){return Q},xe)}function pe(){var Q;for(_.sort(function(xe,ie){return xe.__v.__b-ie.__v.__b});Q=_.pop();)if(Q.__P)try{Q.__H.__h.forEach(Y),Q.__H.__h.forEach(V),Q.__H.__h=[]}catch(xe){Q.__H.__h=[],g.i.__e(xe,Q.__v)}}g.i.__b=function(Q){d=null,T&&T(Q)},g.i.__r=function(Q){P&&P(Q),p=0;var xe=(d=Q.__c).__H;xe&&(xe.__h.forEach(Y),xe.__h.forEach(V),xe.__h=[])},g.i.diffed=function(Q){A&&A(Q);var xe=Q.__c;xe&&xe.__H&&xe.__H.__h.length&&(_.push(xe)!==1&&y===g.i.requestAnimationFrame||((y=g.i.requestAnimationFrame)||F)(pe)),d=null},g.i.__c=function(Q,xe){xe.some(function(ie){try{ie.__h.forEach(Y),ie.__h=ie.__h.filter(function(Le){return!Le.__||V(Le)})}catch(Le){xe.some(function(jt){jt.__h&&(jt.__h=[])}),xe=[],g.i.__e(Le,ie.__v)}}),N&&N(Q,xe)},g.i.unmount=function(Q){M&&M(Q);var xe,ie=Q.__c;ie&&ie.__H&&(ie.__H.__.forEach(function(Le){try{Y(Le)}catch(jt){xe=jt}}),xe&&g.i.__e(xe,ie.__v))};var W=typeof requestAnimationFrame=="function";function F(Q){var xe,ie=function(){clearTimeout(Le),W&&cancelAnimationFrame(xe),setTimeout(Q)},Le=setTimeout(ie,100);W&&(xe=requestAnimationFrame(ie))}function Y(Q){var xe=d,ie=Q.__c;typeof ie=="function"&&(Q.__c=void 0,ie()),d=xe}function V(Q){var xe=d;Q.__c=Q.__(),d=xe}function q(Q,xe){return!Q||Q.length!==xe.length||xe.some(function(ie,Le){return ie!==Q[Le]})}function Oe(Q,xe){return typeof xe=="function"?xe(Q):xe}function Ge(Q,xe){for(var ie in xe)Q[ie]=xe[ie];return Q}function oe(Q,xe){for(var ie in Q)if(ie!=="__source"&&!(ie in xe))return!0;for(var Le in xe)if(Le!=="__source"&&Q[Le]!==xe[Le])return!0;return!1}function ue(Q){this.props=Q}function Ne(Q,xe){function ie(jt){var _t=this.props.ref,Vt=_t==jt.ref;return!Vt&&_t&&(_t.call?_t(null):_t.current=null),xe?!xe(this.props,jt)||!Vt:oe(this.props,jt)}function Le(jt){return this.shouldComponentUpdate=ie,Object(g.e)(Q,jt)}return Le.displayName="Memo("+(Q.displayName||Q.name)+")",Le.prototype.isReactComponent=!0,Le.__f=!0,Le}(ue.prototype=new g.a).isPureReactComponent=!0,ue.prototype.shouldComponentUpdate=function(Q,xe){return oe(this.props,Q)||oe(this.state,xe)};var Re=g.i.__b;g.i.__b=function(Q){Q.type&&Q.type.__f&&Q.ref&&(Q.props.ref=Q.ref,Q.ref=null),Re&&Re(Q)};var se=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function je(Q){function xe(ie,Le){var jt=Ge({},ie);return delete jt.ref,Q(jt,!(Le=ie.ref||Le)||typeof Le=="object"&&!("current"in Le)?null:Le)}return xe.$$typeof=se,xe.render=xe,xe.prototype.isReactComponent=xe.__f=!0,xe.displayName="ForwardRef("+(Q.displayName||Q.name)+")",xe}var He=function(Q,xe){return Q==null?null:Object(g.k)(Object(g.k)(Q).map(xe))},ft={map:He,forEach:He,count:function(Q){return Q?Object(g.k)(Q).length:0},only:function(Q){var xe=Object(g.k)(Q);if(xe.length!==1)throw"Children.only";return xe[0]},toArray:g.k},Pt=g.i.__e;g.i.__e=function(Q,xe,ie){if(Q.then){for(var Le,jt=xe;jt=jt.__;)if((Le=jt.__c)&&Le.__c)return xe.__e==null&&(xe.__e=ie.__e,xe.__k=ie.__k),Le.__c(Q,xe)}Pt(Q,xe,ie)};var Yt=g.i.unmount;function bt(Q,xe,ie){return Q&&(Q.__c&&Q.__c.__H&&(Q.__c.__H.__.forEach(function(Le){typeof Le.__c=="function"&&Le.__c()}),Q.__c.__H=null),(Q=Ge({},Q)).__c!=null&&(Q.__c.__P===ie&&(Q.__c.__P=xe),Q.__c=null),Q.__k=Q.__k&&Q.__k.map(function(Le){return bt(Le,xe,ie)})),Q}function xt(Q,xe,ie){return Q&&(Q.__v=null,Q.__k=Q.__k&&Q.__k.map(function(Le){return xt(Le,xe,ie)}),Q.__c&&Q.__c.__P===xe&&(Q.__e&&ie.insertBefore(Q.__e,Q.__d),Q.__c.__e=!0,Q.__c.__P=ie)),Q}function nr(){this.__u=0,this.t=null,this.__b=null}function ve(Q){var xe=Q.__.__c;return xe&&xe.__e&&xe.__e(Q)}function de(){this.u=null,this.o=null}g.i.unmount=function(Q){var xe=Q.__c;xe&&xe.__R&&xe.__R(),xe&&Q.__h===!0&&(Q.type=null),Yt&&Yt(Q)},(nr.prototype=new g.a).__c=function(Q,xe){var ie=xe.__c,Le=this;Le.t==null&&(Le.t=[]),Le.t.push(ie);var jt=ve(Le.__v),_t=!1,Vt=function(){_t||(_t=!0,ie.__R=null,jt?jt(Tr):Tr())};ie.__R=Vt;var Tr=function(){if(!--Le.__u){if(Le.state.__e){var kn=Le.state.__e;Le.__v.__k[0]=xt(kn,kn.__c.__P,kn.__c.__O)}var pn;for(Le.setState({__e:Le.__b=null});pn=Le.t.pop();)pn.forceUpdate()}},On=xe.__h===!0;Le.__u++||On||Le.setState({__e:Le.__b=Le.__v.__k[0]}),Q.then(Vt,Vt)},nr.prototype.componentWillUnmount=function(){this.t=[]},nr.prototype.render=function(Q,xe){if(this.__b){if(this.__v.__k){var ie=document.createElement("div"),Le=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,ie,Le.__O=Le.__P)}this.__b=null}var jt=xe.__e&&Object(g.e)(g.b,null,Q.fallback);return jt&&(jt.__h=null),[Object(g.e)(g.b,null,xe.__e?null:Q.children),jt]};var De=function(Q,xe,ie){if(++ie[1]===ie[0]&&Q.o.delete(xe),Q.props.revealOrder&&(Q.props.revealOrder[0]!=="t"||!Q.o.size))for(ie=Q.u;ie;){for(;ie.length>3;)ie.pop()();if(ie[1]<ie[0])break;Q.u=ie=ie[2]}};function ot(Q){return this.getChildContext=function(){return Q.context},Q.children}function Tt(Q){var xe=this,ie=Q.i;xe.componentWillUnmount=function(){Object(g.j)(null,xe.l),xe.l=null,xe.i=null},xe.i&&xe.i!==ie&&xe.componentWillUnmount(),Q.__v?(xe.l||(xe.i=ie,xe.l={nodeType:1,parentNode:ie,childNodes:[],appendChild:function(Le){this.childNodes.push(Le),xe.i.appendChild(Le)},insertBefore:function(Le,jt){this.childNodes.push(Le),xe.i.appendChild(Le)},removeChild:function(Le){this.childNodes.splice(this.childNodes.indexOf(Le)>>>1,1),xe.i.removeChild(Le)}}),Object(g.j)(Object(g.e)(ot,{context:xe.context},Q.__v),xe.l)):xe.l&&xe.componentWillUnmount()}(de.prototype=new g.a).__e=function(Q){var xe=this,ie=ve(xe.__v),Le=xe.o.get(Q);return Le[0]++,function(jt){var _t=function(){xe.props.revealOrder?(Le.push(jt),De(xe,Q,Le)):jt()};ie?ie(_t):_t()}},de.prototype.render=function(Q){this.u=null,this.o=new Map;var xe=Object(g.k)(Q.children);Q.revealOrder&&Q.revealOrder[0]==="b"&&xe.reverse();for(var ie=xe.length;ie--;)this.o.set(xe[ie],this.u=[1,0,this.u]);return Q.children},de.prototype.componentDidUpdate=de.prototype.componentDidMount=function(){var Q=this;this.o.forEach(function(xe,ie){De(Q,ie,xe)})};var lt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pr=typeof document<"u",ar=function(Q){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Q)};g.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Q){Object.defineProperty(g.a.prototype,Q,{configurable:!0,get:function(){return this["UNSAFE_"+Q]},set:function(xe){Object.defineProperty(this,Q,{configurable:!0,writable:!0,value:xe})}})});var Qt=g.i.event;function Ke(){}function Xt(){return this.cancelBubble}function _e(){return this.defaultPrevented}g.i.event=function(Q){return Qt&&(Q=Qt(Q)),Q.persist=Ke,Q.isPropagationStopped=Xt,Q.isDefaultPrevented=_e,Q.nativeEvent=Q};var Ft,_r={configurable:!0,get:function(){return this.class}},k=g.i.vnode;g.i.vnode=function(Q){var xe=Q.type,ie=Q.props,Le=ie;if(typeof xe=="string"){var jt=xe.indexOf("-")===-1;for(var _t in Le={},ie){var Vt=ie[_t];pr&&_t==="children"&&xe==="noscript"||_t==="value"&&"defaultValue"in ie&&Vt==null||(_t==="defaultValue"&&"value"in ie&&ie.value==null?_t="value":_t==="download"&&Vt===!0?Vt="":/ondoubleclick/i.test(_t)?_t="ondblclick":/^onchange(textarea|input)/i.test(_t+xe)&&!ar(ie.type)?_t="oninput":/^onfocus$/i.test(_t)?_t="onfocusin":/^onblur$/i.test(_t)?_t="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(_t)?_t=_t.toLowerCase():jt&&rr.test(_t)?_t=_t.replace(/[A-Z0-9]/,"-$&").toLowerCase():Vt===null&&(Vt=void 0),Le[_t]=Vt)}xe=="select"&&Le.multiple&&Array.isArray(Le.value)&&(Le.value=Object(g.k)(ie.children).forEach(function(Tr){Tr.props.selected=Le.value.indexOf(Tr.props.value)!=-1})),xe=="select"&&Le.defaultValue!=null&&(Le.value=Object(g.k)(ie.children).forEach(function(Tr){Tr.props.selected=Le.multiple?Le.defaultValue.indexOf(Tr.props.value)!=-1:Le.defaultValue==Tr.props.value})),Q.props=Le,ie.class!=ie.className&&(_r.enumerable="className"in ie,ie.className!=null&&(Le.class=ie.className),Object.defineProperty(Le,"className",_r))}Q.$$typeof=lt,k&&k(Q)};var gr=g.i.__r;g.i.__r=function(Q){gr&&gr(Q),Ft=Q.__c};var Cr={ReactCurrentDispatcher:{current:{readContext:function(Q){return Ft.__n[Q.__c].props.value}}}};function $r(Q){return!!Q&&Q.$$typeof===lt}var Zr=function(Q,xe){return Q(xe)},ur=g.b,sn={useState:z,useReducer:$,useEffect:ye,useLayoutEffect:Te,useRef:function(Q){return E=5,fe(function(){return{current:Q}},[])},useImperativeHandle:function(Q,xe,ie){E=6,Te(function(){typeof Q=="function"?Q(xe()):Q&&(Q.current=xe())},ie==null?ie:ie.concat(Q))},useMemo:fe,useCallback:ae,useContext:function(Q){var xe=d.context[Q.__c],ie=L(p++,9);return ie.c=Q,xe?(ie.__==null&&(ie.__=!0,xe.sub(d)),xe.props.value):Q.__},useDebugValue:function(Q,xe){g.i.useDebugValue&&g.i.useDebugValue(xe?xe(Q):Q)},version:"17.0.2",Children:ft,render:function(Q,xe,ie){return xe.__k==null&&(xe.textContent=""),Object(g.j)(Q,xe),typeof ie=="function"&&ie(),Q?Q.__c:null},hydrate:function(Q,xe,ie){return Object(g.h)(Q,xe),typeof ie=="function"&&ie(),Q?Q.__c:null},unmountComponentAtNode:function(Q){return!!Q.__k&&(Object(g.j)(null,Q),!0)},createPortal:function(Q,xe){return Object(g.e)(Tt,{__v:Q,i:xe})},createElement:g.e,createContext:g.d,createFactory:function(Q){return g.e.bind(null,Q)},cloneElement:function(Q){return $r(Q)?g.c.apply(null,arguments):Q},createRef:g.f,Fragment:g.b,isValidElement:$r,findDOMNode:function(Q){return Q&&(Q.base||Q.nodeType===1&&Q)||null},Component:g.a,PureComponent:ue,memo:Ne,forwardRef:je,flushSync:function(Q,xe){return Q(xe)},unstable_batchedUpdates:Zr,StrictMode:ur,Suspense:nr,SuspenseList:de,lazy:function(Q){var xe,ie,Le;function jt(_t){if(xe||(xe=Q()).then(function(Vt){ie=Vt.default||Vt},function(Vt){Le=Vt}),Le)throw Le;if(!ie)throw xe;return Object(g.e)(ie,_t)}return jt.displayName="Lazy",jt.__f=!0,jt},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Cr};f.d=sn},function(a,f,o){var p=o(7),d=o(147),y=o(148),g=o(180),E=o(57),_=function(P){if(P&&P.forEach!==g)try{E(P,"forEach",g)}catch{P.forEach=g}};for(var T in d)d[T]&&_(p[T]&&p[T].prototype);_(y)},function(a,f,o){o(17)({target:"Object",stat:!0},{setPrototypeOf:o(97)})},function(a,f,o){var p=o(17),d=o(19),y=o(38),g=o(96),E=o(137);p({target:"Object",stat:!0,forced:d(function(){g(1)}),sham:!E},{getPrototypeOf:function(_){return g(y(_))}})},function(a,f,o){var p=o(17),d=o(46),y=o(76),g=o(200),E=o(157),_=o(32),T=o(33),P=o(54),A=o(19),N=d("Reflect","construct"),M=Object.prototype,L=[].push,z=A(function(){function Te(){}return!(N(function(){},[],Te)instanceof Te)}),$=!A(function(){N(function(){})}),ye=z||$;p({target:"Reflect",stat:!0,forced:ye,sham:ye},{construct:function(Te,fe){E(Te),_(fe);var ae=arguments.length<3?Te:E(arguments[2]);if($&&!z)return N(Te,fe,ae);if(Te==ae){switch(fe.length){case 0:return new Te;case 1:return new Te(fe[0]);case 2:return new Te(fe[0],fe[1]);case 3:return new Te(fe[0],fe[1],fe[2]);case 4:return new Te(fe[0],fe[1],fe[2],fe[3])}var pe=[null];return y(L,pe,fe),new(y(g,Te,pe))}var W=ae.prototype,F=P(T(W)?W:M),Y=y(Te,F,fe);return T(Y)?Y:F}})},function(a,f){var o=Function.prototype,p=o.bind,d=o.call,y=p&&p.bind(d);a.exports=p?function(g){return g&&y(d,g)}:function(g){return g&&function(){return d.apply(g,arguments)}}},function(a,f,o){var p=o(17),d=o(7),y=o(99),g=o(100),E=o(33),_=o(67),T=o(43),P=o(40),A=o(61),N=o(27),M=o(75),L=o(101),z=M("slice"),$=N("species"),ye=d.Array,Te=Math.max;p({target:"Array",proto:!0,forced:!z},{slice:function(fe,ae){var pe,W,F,Y=P(this),V=T(Y),q=_(fe,V),Oe=_(ae===void 0?V:ae,V);if(y(Y)&&(pe=Y.constructor,(g(pe)&&(pe===ye||y(pe.prototype))||E(pe)&&(pe=pe[$])===null)&&(pe=void 0),pe===ye||pe===void 0))return L(Y,q,Oe);for(W=new(pe===void 0?ye:pe)(Te(Oe-q,0)),F=0;q<Oe;q++,F++)q in Y&&A(W,F,Y[q]);return W.length=F,W}})},function(a,f,o){var p=o(7),d=o(51).f,y=o(57),g=o(44),E=o(108),_=o(134),T=o(95);a.exports=function(P,A){var N,M,L,z,$,ye=P.target,Te=P.global,fe=P.stat;if(N=Te?p:fe?p[ye]||E(ye,{}):(p[ye]||{}).prototype)for(M in A){if(z=A[M],L=P.noTargetGet?($=d(N,M))&&$.value:N[M],!T(Te?M:ye+(fe?".":"#")+M,P.forced)&&L!==void 0){if(typeof z==typeof L)continue;_(z,L)}(P.sham||L&&L.sham)&&y(z,"sham",!0),g(N,M,z,P)}}},function(a,f,o){var p=o(17),d=o(102);p({target:"RegExp",proto:!0,forced:/./.exec!==d},{exec:d})},function(a,f){a.exports=function(o){try{return!!o()}catch{return!0}}},function(a,f,o){var p=o(17),d=o(38),y=o(66);p({target:"Object",stat:!0,forced:o(19)(function(){y(1)})},{keys:function(g){return y(d(g))}})},function(a,f,o){var p=o(17),d=o(19),y=o(40),g=o(51).f,E=o(36),_=d(function(){g(1)});p({target:"Object",stat:!0,forced:!E||_,sham:!E},{getOwnPropertyDescriptor:function(T,P){return g(y(T),P)}})},function(a,f,o){var p=o(36),d=o(94).EXISTS,y=o(15),g=o(37).f,E=Function.prototype,_=y(E.toString),T=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,P=y(T.exec);p&&!d&&g(E,"name",{configurable:!0,get:function(){try{return P(T,_(this))[1]}catch{return""}}})},function(a,f,o){var p=o(17),d=o(74).filter;p({target:"Array",proto:!0,forced:!o(75)("filter")},{filter:function(y){return d(this,y,arguments.length>1?arguments[1]:void 0)}})},function(a,f,o){var p=o(17),d=o(183);p({target:"Array",stat:!0,forced:!o(118)(function(y){Array.from(y)})},{from:d})},function(a,f,o){var p=o(17),d=o(36),y=o(135),g=o(40),E=o(51),_=o(61);p({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(T){for(var P,A,N=g(T),M=E.f,L=y(N),z={},$=0;L.length>$;)(A=M(N,P=L[$++]))!==void 0&&_(z,P,A);return z}})},,function(a,f,o){var p=o(7),d=o(84),y=o(34),g=o(85),E=o(109),_=o(128),T=d("wks"),P=p.Symbol,A=P&&P.for,N=_?P:P&&P.withoutSetter||g;a.exports=function(M){if(!y(T,M)||!E&&typeof T[M]!="string"){var L="Symbol."+M;E&&y(P,M)?T[M]=P[M]:T[M]=_&&A?A(L):N(L)}return T[M]}},function(a,f){a.exports=function(o){return typeof o=="function"}},function(a,f,o){var p=o(17),d=o(7),y=o(19),g=o(99),E=o(33),_=o(38),T=o(43),P=o(61),A=o(119),N=o(75),M=o(27),L=o(65),z=M("isConcatSpreadable"),$=9007199254740991,ye="Maximum allowed index exceeded",Te=d.TypeError,fe=L>=51||!y(function(){var W=[];return W[z]=!1,W.concat()[0]!==W}),ae=N("concat"),pe=function(W){if(!E(W))return!1;var F=W[z];return F!==void 0?!!F:g(W)};p({target:"Array",proto:!0,forced:!fe||!ae},{concat:function(W){var F,Y,V,q,Oe,Ge=_(this),oe=A(Ge,0),ue=0;for(F=-1,V=arguments.length;F<V;F++)if(pe(Oe=F===-1?Ge:arguments[F])){if(ue+(q=T(Oe))>$)throw Te(ye);for(Y=0;Y<q;Y++,ue++)Y in Oe&&P(oe,ue,Oe[Y])}else{if(ue>=$)throw Te(ye);P(oe,ue++,Oe)}return oe.length=ue,oe}})},function(a,f,o){var p=o(17),d=o(199);p({target:"Object",stat:!0,forced:Object.assign!==d},{assign:d})},function(a,f,o){var p=o(105),d=typeof self=="object"&&self&&self.Object===Object&&self,y=p.a||d||Function("return this")();f.a=y},function(a,f,o){var p=o(7),d=o(33),y=p.String,g=p.TypeError;a.exports=function(E){if(d(E))return E;throw g(y(E)+" is not an object")}},function(a,f,o){var p=o(28);a.exports=function(d){return typeof d=="object"?d!==null:p(d)}},function(a,f,o){var p=o(15),d=o(38),y=p({}.hasOwnProperty);a.exports=Object.hasOwn||function(g,E){return y(d(g),E)}},function(a,f){var o=Function.prototype.call;a.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},function(a,f,o){var p=o(19);a.exports=!p(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(a,f,o){var p=o(7),d=o(36),y=o(129),g=o(32),E=o(87),_=p.TypeError,T=Object.defineProperty;f.f=d?T:function(P,A,N){if(g(P),A=E(A),g(N),y)try{return T(P,A,N)}catch{}if("get"in N||"set"in N)throw _("Accessors not supported");return"value"in N&&(P[A]=N.value),P}},function(a,f,o){var p=o(7),d=o(45),y=p.Object;a.exports=function(g){return y(d(g))}},function(a,f,o){var p=o(17),d=o(74).map;p({target:"Array",proto:!0,forced:!o(75)("map")},{map:function(y){return d(this,y,arguments.length>1?arguments[1]:void 0)}})},function(a,f,o){var p=o(81),d=o(45);a.exports=function(y){return p(d(y))}},function(a,f,o){var p=o(7),d=o(98),y=p.String;a.exports=function(g){if(d(g)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return y(g)}},function(a,f,o){(function(p){o.d(f,"d",function(){return g}),o.d(f,"c",function(){return E}),o.d(f,"b",function(){return _}),o.d(f,"a",function(){return P});var d=o(10),y=function(A,N){var M=typeof Symbol=="function"&&A[Symbol.iterator];if(!M)return A;var L,z,$=M.call(A),ye=[];try{for(;(N===void 0||N-- >0)&&!(L=$.next()).done;)ye.push(L.value)}catch(Te){z={error:Te}}finally{try{L&&!L.done&&(M=$.return)&&M.call($)}finally{if(z)throw z.error}}return ye};function g(){var A=y(Object(d.j)(0),2)[1];return Object(d.h)(function(){A(function(N){return N+1})},[])}function E(A){if(!A||typeof A!="object")return!1;var N=Object.getPrototypeOf(A);return!N||N===Object.prototype}function _(A){return typeof Symbol=="function"?Symbol.for(A):"__$mobx-react "+A+"__"}var T={};function P(){return typeof window<"u"?window:p!==void 0?p:typeof self<"u"?self:T}}).call(this,o(82))},function(a,f,o){var p=o(90);a.exports=function(d){return p(d.length)}},function(a,f,o){var p=o(7),d=o(28),y=o(34),g=o(57),E=o(108),_=o(92),T=o(56),P=o(94).CONFIGURABLE,A=T.get,N=T.enforce,M=String(String).split("String");(a.exports=function(L,z,$,ye){var Te,fe=!!ye&&!!ye.unsafe,ae=!!ye&&!!ye.enumerable,pe=!!ye&&!!ye.noTargetGet,W=ye&&ye.name!==void 0?ye.name:z;d($)&&(String(W).slice(0,7)==="Symbol("&&(W="["+String(W).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!y($,"name")||P&&$.name!==W)&&g($,"name",W),(Te=N($)).source||(Te.source=M.join(typeof W=="string"?W:""))),L!==p?(fe?!pe&&L[z]&&(ae=!0):delete L[z],ae?L[z]=$:g(L,z,$)):ae?L[z]=$:E(z,$)})(Function.prototype,"toString",function(){return d(this)&&A(this).source||_(this)})},function(a,f,o){var p=o(7).TypeError;a.exports=function(d){if(d==null)throw p("Can't call method on "+d);return d}},function(a,f,o){var p=o(7),d=o(28),y=function(g){return d(g)?g:void 0};a.exports=function(g,E){return arguments.length<2?y(p[g]):p[g]&&p[g][E]}},function(a,f,o){var p=o(17),d=o(35),y=o(33),g=o(32),E=o(201),_=o(51),T=o(96);p({target:"Reflect",stat:!0},{get:function P(A,N){var M,L,z=arguments.length<3?A:arguments[2];return g(A)===z?A[N]:(M=_.f(A,N))?E(M)?M.value:M.get===void 0?void 0:d(M.get,z):y(L=T(A))?P(L,N,z):void 0}})},function(a,f,o){(function(p){var d=o(31),y=o(166),g=u&&!u.nodeType&&u,E=g&&typeof p=="object"&&p&&!p.nodeType&&p,_=E&&E.exports===g?d.a.Buffer:void 0,T=(_?_.isBuffer:void 0)||y.a;f.a=T}).call(this,o(121)(a))},function(a,f,o){(function(p){var d=o(105),y=u&&!u.nodeType&&u,g=y&&typeof p=="object"&&p&&!p.nodeType&&p,E=g&&g.exports===y&&d.a.process,_=function(){try{var T=g&&g.require&&g.require("util").types;return T||E&&E.binding&&E.binding("util")}catch{}}();f.a=_}).call(this,o(121)(a))},function(a,f,o){var p=o(15),d=p({}.toString),y=p("".slice);a.exports=function(g){return y(d(g),8,-1)}},function(a,f,o){var p=o(36),d=o(35),y=o(93),g=o(71),E=o(40),_=o(87),T=o(34),P=o(129),A=Object.getOwnPropertyDescriptor;f.f=p?A:function(N,M){if(N=E(N),M=_(M),P)try{return A(N,M)}catch{}if(T(N,M))return g(!d(y.f,N,M),N[M])}},function(a,f,o){var p=o(17),d=o(213).entries;p({target:"Object",stat:!0},{entries:function(y){return d(y)}})},function(a,f,o){var p=o(46);a.exports=p("navigator","userAgent")||""},function(a,f,o){var p,d=o(32),y=o(169),g=o(110),E=o(69),_=o(133),T=o(86),P=o(91),A=P("IE_PROTO"),N=function(){},M=function($){return"<script>"+$+"<\/script>"},L=function($){$.write(M("")),$.close();var ye=$.parentWindow.Object;return $=null,ye},z=function(){try{p=new ActiveXObject("htmlfile")}catch{}var $,ye;z=typeof document<"u"?document.domain&&p?L(p):((ye=T("iframe")).style.display="none",_.appendChild(ye),ye.src="javascript:",($=ye.contentWindow.document).open(),$.write(M("document.F=Object")),$.close(),$.F):L(p);for(var Te=g.length;Te--;)delete z.prototype[g[Te]];return z()};E[A]=!0,a.exports=Object.create||function($,ye){var Te;return $!==null?(N.prototype=d($),Te=new N,N.prototype=null,Te[A]=$):Te=z(),ye===void 0?Te:y(Te,ye)}},function(a,f,o){var p=o(7),d=o(28),y=o(89),g=p.TypeError;a.exports=function(E){if(d(E))return E;throw g(y(E)+" is not a function")}},function(a,f,o){var p,d,y,g=o(171),E=o(7),_=o(15),T=o(33),P=o(57),A=o(34),N=o(107),M=o(91),L=o(69),z="Object already initialized",$=E.TypeError,ye=E.WeakMap;if(g||N.state){var Te=N.state||(N.state=new ye),fe=_(Te.get),ae=_(Te.has),pe=_(Te.set);p=function(F,Y){if(ae(Te,F))throw new $(z);return Y.facade=F,pe(Te,F,Y),Y},d=function(F){return fe(Te,F)||{}},y=function(F){return ae(Te,F)}}else{var W=M("state");L[W]=!0,p=function(F,Y){if(A(F,W))throw new $(z);return Y.facade=F,P(F,W,Y),Y},d=function(F){return A(F,W)?F[W]:{}},y=function(F){return A(F,W)}}a.exports={set:p,get:d,has:y,enforce:function(F){return y(F)?d(F):p(F,{})},getterFor:function(F){return function(Y){var V;if(!T(Y)||(V=d(Y)).type!==F)throw $("Incompatible receiver, "+F+" required");return V}}}},function(a,f,o){var p=o(36),d=o(37),y=o(71);a.exports=p?function(g,E,_){return d.f(g,E,y(1,_))}:function(g,E,_){return g[E]=_,g}},function(a,f,o){var p=o(15);a.exports=p({}.isPrototypeOf)},function(a,f,o){var p=o(55);a.exports=function(d,y){var g=d[y];return g==null?void 0:p(g)}},function(a,f,o){o(174)("Map",function(p){return function(){return p(this,arguments.length?arguments[0]:void 0)}},o(178))},function(a,f,o){var p=o(87),d=o(37),y=o(71);a.exports=function(g,E,_){var T=p(E);T in g?d.f(g,T,y(0,_)):g[T]=_}},function(a,f,o){var p=o(15),d=o(55),y=p(p.bind);a.exports=function(g,E){return d(g),E===void 0?g:y?y(g,E):function(){return g.apply(E,arguments)}}},function(a,f,o){var p=o(17),d=o(15),y=o(81),g=o(40),E=o(120),_=d([].join),T=y!=Object,P=E("join",",");p({target:"Array",proto:!0,forced:T||!P},{join:function(A){return _(g(this),A===void 0?",":A)}})},function(a,f){a.exports=!1},function(a,f,o){var p,d,y=o(7),g=o(53),E=y.process,_=y.Deno,T=E&&E.versions||_&&_.version,P=T&&T.v8;P&&(d=(p=P.split("."))[0]>0&&p[0]<4?1:+(p[0]+p[1])),!d&&g&&(!(p=g.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=g.match(/Chrome\/(\d+)/))&&(d=+p[1]),a.exports=d},function(a,f,o){var p=o(131),d=o(110);a.exports=Object.keys||function(y){return p(y,d)}},function(a,f,o){var p=o(68),d=Math.max,y=Math.min;a.exports=function(g,E){var _=p(g);return _<0?d(_+E,0):y(_,E)}},function(a,f){var o=Math.ceil,p=Math.floor;a.exports=function(d){var y=+d;return y!=y||y===0?0:(y>0?p:o)(y)}},function(a,f){a.exports={}},function(a,f){a.exports={}},function(a,f){a.exports=function(o,p){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:p}}},function(a,f,o){var p=o(131),d=o(110).concat("length","prototype");f.f=Object.getOwnPropertyNames||function(y){return p(y,d)}},function(a,f,o){var p=o(37).f,d=o(34),y=o(27)("toStringTag");a.exports=function(g,E,_){g&&!d(g=_?g:g.prototype,y)&&p(g,y,{configurable:!0,value:E})}},function(a,f,o){var p=o(62),d=o(15),y=o(81),g=o(38),E=o(43),_=o(119),T=d([].push),P=function(A){var N=A==1,M=A==2,L=A==3,z=A==4,$=A==6,ye=A==7,Te=A==5||$;return function(fe,ae,pe,W){for(var F,Y,V=g(fe),q=y(V),Oe=p(ae,pe),Ge=E(q),oe=0,ue=W||_,Ne=N?ue(fe,Ge):M||ye?ue(fe,0):void 0;Ge>oe;oe++)if((Te||oe in q)&&(Y=Oe(F=q[oe],oe,V),A))if(N)Ne[oe]=Y;else if(Y)switch(A){case 3:return!0;case 5:return F;case 6:return oe;case 2:T(Ne,F)}else switch(A){case 4:return!1;case 7:T(Ne,F)}return $?-1:L||z?z:Ne}};a.exports={forEach:P(0),map:P(1),filter:P(2),some:P(3),every:P(4),find:P(5),findIndex:P(6),filterReject:P(7)}},function(a,f,o){var p=o(19),d=o(27),y=o(65),g=d("species");a.exports=function(E){return y>=51||!p(function(){var _=[];return(_.constructor={})[g]=function(){return{foo:1}},_[E](Boolean).foo!==1})}},function(a,f){var o=Function.prototype,p=o.apply,d=o.bind,y=o.call;a.exports=typeof Reflect=="object"&&Reflect.apply||(d?y.bind(p):function(){return y.apply(p,arguments)})},function(a,f,o){var p=o(76),d=o(35),y=o(15),g=o(122),E=o(154),_=o(32),T=o(45),P=o(156),A=o(123),N=o(90),M=o(41),L=o(59),z=o(113),$=o(124),ye=o(102),Te=o(151),fe=o(19),ae=Te.UNSUPPORTED_Y,pe=4294967295,W=Math.min,F=[].push,Y=y(/./.exec),V=y(F),q=y("".slice),Oe=!fe(function(){var Ge=/(?:)/,oe=Ge.exec;Ge.exec=function(){return oe.apply(this,arguments)};var ue="ab".split(Ge);return ue.length!==2||ue[0]!=="a"||ue[1]!=="b"});g("split",function(Ge,oe,ue){var Ne;return Ne="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Re,se){var je=M(T(this)),He=se===void 0?pe:se>>>0;if(He===0)return[];if(Re===void 0)return[je];if(!E(Re))return d(oe,je,Re,He);for(var ft,Pt,Yt,bt=[],xt=(Re.ignoreCase?"i":"")+(Re.multiline?"m":"")+(Re.unicode?"u":"")+(Re.sticky?"y":""),nr=0,ve=new RegExp(Re.source,xt+"g");(ft=d(ye,ve,je))&&!((Pt=ve.lastIndex)>nr&&(V(bt,q(je,nr,ft.index)),ft.length>1&&ft.index<je.length&&p(F,bt,z(ft,1)),Yt=ft[0].length,nr=Pt,bt.length>=He));)ve.lastIndex===ft.index&&ve.lastIndex++;return nr===je.length?!Yt&&Y(ve,"")||V(bt,""):V(bt,q(je,nr)),bt.length>He?z(bt,0,He):bt}:"0".split(void 0,0).length?function(Re,se){return Re===void 0&&se===0?[]:d(oe,this,Re,se)}:oe,[function(Re,se){var je=T(this),He=Re==null?void 0:L(Re,Ge);return He?d(He,Re,je,se):d(Ne,M(je),Re,se)},function(Re,se){var je=_(this),He=M(Re),ft=ue(Ne,je,He,se,Ne!==oe);if(ft.done)return ft.value;var Pt=P(je,RegExp),Yt=je.unicode,bt=(je.ignoreCase?"i":"")+(je.multiline?"m":"")+(je.unicode?"u":"")+(ae?"g":"y"),xt=new Pt(ae?"^(?:"+je.source+")":je,bt),nr=se===void 0?pe:se>>>0;if(nr===0)return[];if(He.length===0)return $(xt,He)===null?[He]:[];for(var ve=0,de=0,De=[];de<He.length;){xt.lastIndex=ae?0:de;var ot,Tt=$(xt,ae?q(He,de):He);if(Tt===null||(ot=W(N(xt.lastIndex+(ae?de:0)),He.length))===ve)de=A(He,de,Yt);else{if(V(De,q(He,ve,de)),De.length===nr)return De;for(var lt=1;lt<=Tt.length-1;lt++)if(V(De,Tt[lt]),De.length===nr)return De;de=ve=ot}}return V(De,q(He,ve)),De}]},!Oe,ae)},function(a,f,o){var p=o(36),d=o(7),y=o(15),g=o(95),E=o(44),_=o(34),T=o(143),P=o(58),A=o(88),N=o(130),M=o(19),L=o(72).f,z=o(51).f,$=o(37).f,ye=o(197),Te=o(159).trim,fe="Number",ae=d.Number,pe=ae.prototype,W=d.TypeError,F=y("".slice),Y=y("".charCodeAt),V=function(Ne){var Re=N(Ne,"number");return typeof Re=="bigint"?Re:q(Re)},q=function(Ne){var Re,se,je,He,ft,Pt,Yt,bt,xt=N(Ne,"number");if(A(xt))throw W("Cannot convert a Symbol value to a number");if(typeof xt=="string"&&xt.length>2){if(xt=Te(xt),(Re=Y(xt,0))===43||Re===45){if((se=Y(xt,2))===88||se===120)return NaN}else if(Re===48){switch(Y(xt,1)){case 66:case 98:je=2,He=49;break;case 79:case 111:je=8,He=55;break;default:return+xt}for(Pt=(ft=F(xt,2)).length,Yt=0;Yt<Pt;Yt++)if((bt=Y(ft,Yt))<48||bt>He)return NaN;return parseInt(ft,je)}}return+xt};if(g(fe,!ae(" 0o1")||!ae("0b1")||ae("+0x1"))){for(var Oe,Ge=function(Ne){var Re=arguments.length<1?0:ae(V(Ne)),se=this;return P(pe,se)&&M(function(){ye(se)})?T(Object(Re),se,Ge):Re},oe=p?L(ae):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ue=0;oe.length>ue;ue++)_(ae,Oe=oe[ue])&&!_(Ge,Oe)&&$(Ge,Oe,z(ae,Oe));Ge.prototype=pe,pe.constructor=Ge,E(d,fe,Ge)}},function(a,f,o){o(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(a,f,o){var p=o(17),d=o(214),y=o(83);p({target:"Array",proto:!0},{fill:d}),y("fill")},function(a,f,o){var p=o(7),d=o(15),y=o(19),g=o(50),E=p.Object,_=d("".split);a.exports=y(function(){return!E("z").propertyIsEnumerable(0)})?function(T){return g(T)=="String"?_(T,""):E(T)}:E},function(a,f){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}a.exports=o},function(a,f,o){var p=o(27),d=o(54),y=o(37),g=p("unscopables"),E=Array.prototype;E[g]==null&&y.f(E,g,{configurable:!0,value:d(null)}),a.exports=function(_){E[g][_]=!0}},function(a,f,o){var p=o(64),d=o(107);(a.exports=function(y,g){return d[y]||(d[y]=g!==void 0?g:{})})("versions",[]).push({version:"3.19.3",mode:p?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(a,f,o){var p=o(15),d=0,y=Math.random(),g=p(1 .toString);a.exports=function(E){return"Symbol("+(E===void 0?"":E)+")_"+g(++d+y,36)}},function(a,f,o){var p=o(7),d=o(33),y=p.document,g=d(y)&&d(y.createElement);a.exports=function(E){return g?y.createElement(E):{}}},function(a,f,o){var p=o(130),d=o(88);a.exports=function(y){var g=p(y,"string");return d(g)?g:g+""}},function(a,f,o){var p=o(7),d=o(46),y=o(28),g=o(58),E=o(128),_=p.Object;a.exports=E?function(T){return typeof T=="symbol"}:function(T){var P=d("Symbol");return y(P)&&g(P.prototype,_(T))}},function(a,f,o){var p=o(7).String;a.exports=function(d){try{return p(d)}catch{return"Object"}}},function(a,f,o){var p=o(68),d=Math.min;a.exports=function(y){return y>0?d(p(y),9007199254740991):0}},function(a,f,o){var p=o(84),d=o(85),y=p("keys");a.exports=function(g){return y[g]||(y[g]=d(g))}},function(a,f,o){var p=o(15),d=o(28),y=o(107),g=p(Function.toString);d(y.inspectSource)||(y.inspectSource=function(E){return g(E)}),a.exports=y.inspectSource},function(a,f,o){var p={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,y=d&&!p.call({1:2},1);f.f=y?function(g){var E=d(this,g);return!!E&&E.enumerable}:p},function(a,f,o){var p=o(36),d=o(34),y=Function.prototype,g=p&&Object.getOwnPropertyDescriptor,E=d(y,"name"),_=E&&function(){}.name==="something",T=E&&(!p||p&&g(y,"name").configurable);a.exports={EXISTS:E,PROPER:_,CONFIGURABLE:T}},function(a,f,o){var p=o(19),d=o(28),y=/#|\.prototype\./,g=function(A,N){var M=_[E(A)];return M==P||M!=T&&(d(N)?p(N):!!N)},E=g.normalize=function(A){return String(A).replace(y,".").toLowerCase()},_=g.data={},T=g.NATIVE="N",P=g.POLYFILL="P";a.exports=g},function(a,f,o){var p=o(7),d=o(34),y=o(28),g=o(38),E=o(91),_=o(137),T=E("IE_PROTO"),P=p.Object,A=P.prototype;a.exports=_?P.getPrototypeOf:function(N){var M=g(N);if(d(M,T))return M[T];var L=M.constructor;return y(L)&&M instanceof L?L.prototype:M instanceof P?A:null}},function(a,f,o){var p=o(15),d=o(32),y=o(173);a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var g,E=!1,_={};try{(g=p(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_,[]),E=_ instanceof Array}catch{}return function(T,P){return d(T),y(P),E?g(T,P):T.__proto__=P,T}}():void 0)},function(a,f,o){var p=o(7),d=o(116),y=o(28),g=o(50),E=o(27)("toStringTag"),_=p.Object,T=g(function(){return arguments}())=="Arguments";a.exports=d?g:function(P){var A,N,M;return P===void 0?"Undefined":P===null?"Null":typeof(N=function(L,z){try{return L[z]}catch{}}(A=_(P),E))=="string"?N:T?g(A):(M=g(A))=="Object"&&y(A.callee)?"Arguments":M}},function(a,f,o){var p=o(50);a.exports=Array.isArray||function(d){return p(d)=="Array"}},function(a,f,o){var p=o(15),d=o(19),y=o(28),g=o(98),E=o(46),_=o(92),T=function(){},P=[],A=E("Reflect","construct"),N=/^\s*(?:class|function)\b/,M=p(N.exec),L=!N.exec(T),z=function($){if(!y($))return!1;try{return A(T,P,$),!0}catch{return!1}};a.exports=!A||d(function(){var $;return z(z.call)||!z(Object)||!z(function(){$=!0})||$})?function($){if(!y($))return!1;switch(g($)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return L||!!M(N,_($))}:z},function(a,f,o){var p=o(15);a.exports=p([].slice)},function(a,f,o){var p,d,y=o(35),g=o(15),E=o(41),_=o(185),T=o(151),P=o(84),A=o(54),N=o(56).get,M=o(186),L=o(187),z=P("native-string-replace",String.prototype.replace),$=RegExp.prototype.exec,ye=$,Te=g("".charAt),fe=g("".indexOf),ae=g("".replace),pe=g("".slice),W=(d=/b*/g,y($,p=/a/,"a"),y($,d,"a"),p.lastIndex!==0||d.lastIndex!==0),F=T.BROKEN_CARET,Y=/()??/.exec("")[1]!==void 0;(W||Y||F||M||L)&&(ye=function(V){var q,Oe,Ge,oe,ue,Ne,Re,se=this,je=N(se),He=E(V),ft=je.raw;if(ft)return ft.lastIndex=se.lastIndex,q=y(ye,ft,He),se.lastIndex=ft.lastIndex,q;var Pt=je.groups,Yt=F&&se.sticky,bt=y(_,se),xt=se.source,nr=0,ve=He;if(Yt&&(bt=ae(bt,"y",""),fe(bt,"g")===-1&&(bt+="g"),ve=pe(He,se.lastIndex),se.lastIndex>0&&(!se.multiline||se.multiline&&Te(He,se.lastIndex-1)!==`
`)&&(xt="(?: "+xt+")",ve=" "+ve,nr++),Oe=new RegExp("^(?:"+xt+")",bt)),Y&&(Oe=new RegExp("^"+xt+"$(?!\\s)",bt)),W&&(Ge=se.lastIndex),oe=y($,Yt?Oe:se,ve),Yt?oe?(oe.input=pe(oe.input,nr),oe[0]=pe(oe[0],nr),oe.index=se.lastIndex,se.lastIndex+=oe[0].length):se.lastIndex=0:W&&oe&&(se.lastIndex=se.global?oe.index+oe[0].length:Ge),Y&&oe&&oe.length>1&&y(z,oe[0],Oe,function(){for(ue=1;ue<arguments.length-2;ue++)arguments[ue]===void 0&&(oe[ue]=void 0)}),oe&&Pt)for(oe.groups=Ne=A(null),ue=0;ue<Pt.length;ue++)Ne[(Re=Pt[ue])[0]]=oe[Re[1]];return oe}),a.exports=ye},function(a,f,o){var p=o(17),d=o(7),y=o(67),g=o(68),E=o(43),_=o(38),T=o(119),P=o(61),A=o(75)("splice"),N=d.TypeError,M=Math.max,L=Math.min,z=9007199254740991,$="Maximum allowed length exceeded";p({target:"Array",proto:!0,forced:!A},{splice:function(ye,Te){var fe,ae,pe,W,F,Y,V=_(this),q=E(V),Oe=y(ye,q),Ge=arguments.length;if(Ge===0?fe=ae=0:Ge===1?(fe=0,ae=q-Oe):(fe=Ge-2,ae=L(M(g(Te),0),q-Oe)),q+fe-ae>z)throw N($);for(pe=T(V,ae),W=0;W<ae;W++)(F=Oe+W)in V&&P(pe,W,V[F]);if(pe.length=ae,fe<ae){for(W=Oe;W<q-ae;W++)Y=W+fe,(F=W+ae)in V?V[Y]=V[F]:delete V[Y];for(W=q;W>q-ae+fe;W--)delete V[W-1]}else if(fe>ae)for(W=q-ae;W>Oe;W--)Y=W+fe-1,(F=W+ae-1)in V?V[Y]=V[F]:delete V[Y];for(W=0;W<fe;W++)V[W+Oe]=arguments[W+2];return V.length=q-ae+fe,pe}})},function(a,f,o){var p=o(17),d=o(202);p({target:"String",proto:!0,forced:o(203)("anchor")},{anchor:function(y){return d(this,"a","name",y)}})},function(a,f,o){(function(p){var d=typeof p=="object"&&p&&p.Object===Object&&p;f.a=d}).call(this,o(82))},function(a,f,o){(function(p){var d=o(31),y=u&&!u.nodeType&&u,g=y&&typeof p=="object"&&p&&!p.nodeType&&p,E=g&&g.exports===y?d.a.Buffer:void 0,_=E?E.allocUnsafe:void 0;f.a=function(T,P){if(P)return T.slice();var A=T.length,N=_?_(A):new T.constructor(A);return T.copy(N),N}}).call(this,o(121)(a))},function(a,f,o){var p=o(7),d=o(108),y="__core-js_shared__",g=p[y]||d(y,{});a.exports=g},function(a,f,o){var p=o(7),d=Object.defineProperty;a.exports=function(y,g){try{d(p,y,{value:g,configurable:!0,writable:!0})}catch{p[y]=g}return g}},function(a,f,o){var p=o(65),d=o(19);a.exports=!!Object.getOwnPropertySymbols&&!d(function(){var y=Symbol();return!String(y)||!(Object(y)instanceof Symbol)||!Symbol.sham&&p&&p<41})},function(a,f){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(a,f,o){var p=o(17),d=o(35),y=o(64),g=o(94),E=o(28),_=o(172),T=o(96),P=o(97),A=o(73),N=o(57),M=o(44),L=o(27),z=o(70),$=o(136),ye=g.PROPER,Te=g.CONFIGURABLE,fe=$.IteratorPrototype,ae=$.BUGGY_SAFARI_ITERATORS,pe=L("iterator"),W="keys",F="values",Y="entries",V=function(){return this};a.exports=function(q,Oe,Ge,oe,ue,Ne,Re){_(Ge,Oe,oe);var se,je,He,ft=function(de){if(de===ue&&nr)return nr;if(!ae&&de in bt)return bt[de];switch(de){case W:case F:case Y:return function(){return new Ge(this,de)}}return function(){return new Ge(this)}},Pt=Oe+" Iterator",Yt=!1,bt=q.prototype,xt=bt[pe]||bt["@@iterator"]||ue&&bt[ue],nr=!ae&&xt||ft(ue),ve=Oe=="Array"&&bt.entries||xt;if(ve&&(se=T(ve.call(new q)))!==Object.prototype&&se.next&&(y||T(se)===fe||(P?P(se,fe):E(se[pe])||M(se,pe,V)),A(se,Pt,!0,!0),y&&(z[Pt]=V)),ye&&ue==F&&xt&&xt.name!==F&&(!y&&Te?N(bt,"name",F):(Yt=!0,nr=function(){return d(xt,this)})),ue)if(je={values:ft(F),keys:Ne?nr:ft(W),entries:ft(Y)},Re)for(He in je)(ae||Yt||!(He in bt))&&M(bt,He,je[He]);else p({target:Oe,proto:!0,forced:ae||Yt},je);return y&&!Re||bt[pe]===nr||M(bt,pe,nr,{name:ue}),z[Oe]=nr,je}},function(a,f){f.f=Object.getOwnPropertySymbols},function(a,f,o){var p=o(7),d=o(67),y=o(43),g=o(61),E=p.Array,_=Math.max;a.exports=function(T,P,A){for(var N=y(T),M=d(P,N),L=d(A===void 0?N:A,N),z=E(_(L-M,0)),$=0;M<L;M++,$++)g(z,$,T[M]);return z.length=$,z}},function(a,f,o){var p=o(7),d=o(62),y=o(35),g=o(32),E=o(89),_=o(140),T=o(43),P=o(58),A=o(141),N=o(115),M=o(142),L=p.TypeError,z=function(ye,Te){this.stopped=ye,this.result=Te},$=z.prototype;a.exports=function(ye,Te,fe){var ae,pe,W,F,Y,V,q,Oe=fe&&fe.that,Ge=!(!fe||!fe.AS_ENTRIES),oe=!(!fe||!fe.IS_ITERATOR),ue=!(!fe||!fe.INTERRUPTED),Ne=d(Te,Oe),Re=function(je){return ae&&M(ae,"normal",je),new z(!0,je)},se=function(je){return Ge?(g(je),ue?Ne(je[0],je[1],Re):Ne(je[0],je[1])):ue?Ne(je,Re):Ne(je)};if(oe)ae=ye;else{if(!(pe=N(ye)))throw L(E(ye)+" is not iterable");if(_(pe)){for(W=0,F=T(ye);F>W;W++)if((Y=se(ye[W]))&&P($,Y))return Y;return new z(!1)}ae=A(ye,pe)}for(V=ae.next;!(q=y(V,ae)).done;){try{Y=se(q.value)}catch(je){M(ae,"throw",je)}if(typeof Y=="object"&&Y&&P($,Y))return Y}return new z(!1)}},function(a,f,o){var p=o(98),d=o(59),y=o(70),g=o(27)("iterator");a.exports=function(E){if(E!=null)return d(E,g)||d(E,"@@iterator")||y[p(E)]}},function(a,f,o){var p={};p[o(27)("toStringTag")]="z",a.exports=String(p)==="[object z]"},function(a,f,o){var p=o(7),d=o(58),y=p.TypeError;a.exports=function(g,E){if(d(E,g))return g;throw y("Incorrect invocation")}},function(a,f,o){var p=o(27)("iterator"),d=!1;try{var y=0,g={next:function(){return{done:!!y++}},return:function(){d=!0}};g[p]=function(){return this},Array.from(g,function(){throw 2})}catch{}a.exports=function(E,_){if(!_&&!d)return!1;var T=!1;try{var P={};P[p]=function(){return{next:function(){return{done:T=!0}}}},E(P)}catch{}return T}},function(a,f,o){var p=o(181);a.exports=function(d,y){return new(p(d))(y===0?0:y)}},function(a,f,o){var p=o(19);a.exports=function(d,y){var g=[][d];return!!g&&p(function(){g.call(null,y||function(){throw 1},1)})}},function(a,f){a.exports=function(o){if(!o.webpackPolyfill){var p=Object.create(o);p.children||(p.children=[]),Object.defineProperty(p,"loaded",{enumerable:!0,get:function(){return p.l}}),Object.defineProperty(p,"id",{enumerable:!0,get:function(){return p.i}}),Object.defineProperty(p,"exports",{enumerable:!0}),p.webpackPolyfill=1}return p}},function(a,f,o){o(18);var p=o(15),d=o(44),y=o(102),g=o(19),E=o(27),_=o(57),T=E("species"),P=RegExp.prototype;a.exports=function(A,N,M,L){var z=E(A),$=!g(function(){var ae={};return ae[z]=function(){return 7},""[A](ae)!=7}),ye=$&&!g(function(){var ae=!1,pe=/a/;return A==="split"&&((pe={}).constructor={},pe.constructor[T]=function(){return pe},pe.flags="",pe[z]=/./[z]),pe.exec=function(){return ae=!0,null},pe[z](""),!ae});if(!$||!ye||M){var Te=p(/./[z]),fe=N(z,""[A],function(ae,pe,W,F,Y){var V=p(ae),q=pe.exec;return q===y||q===P.exec?$&&!Y?{done:!0,value:Te(pe,W,F)}:{done:!0,value:V(W,pe,F)}:{done:!1}});d(String.prototype,A,fe[0]),d(P,z,fe[1])}L&&_(P[z],"sham",!0)}},function(a,f,o){var p=o(146).charAt;a.exports=function(d,y,g){return y+(g?p(d,y).length:1)}},function(a,f,o){var p=o(7),d=o(35),y=o(32),g=o(28),E=o(50),_=o(102),T=p.TypeError;a.exports=function(P,A){var N=P.exec;if(g(N)){var M=d(N,P,A);return M!==null&&y(M),M}if(E(P)==="RegExp")return d(_,P,A);throw T("RegExp#exec called on incompatible receiver")}},function(a,f,o){var p=o(76),d=o(35),y=o(15),g=o(122),E=o(19),_=o(32),T=o(28),P=o(68),A=o(90),N=o(41),M=o(45),L=o(123),z=o(59),$=o(198),ye=o(124),Te=o(27)("replace"),fe=Math.max,ae=Math.min,pe=y([].concat),W=y([].push),F=y("".indexOf),Y=y("".slice),V="a".replace(/./,"$0")==="$0",q=!!/./[Te]&&/./[Te]("a","$0")==="";g("replace",function(Oe,Ge,oe){var ue=q?"$":"$0";return[function(Ne,Re){var se=M(this),je=Ne==null?void 0:z(Ne,Te);return je?d(je,Ne,se,Re):d(Ge,N(se),Ne,Re)},function(Ne,Re){var se=_(this),je=N(Ne);if(typeof Re=="string"&&F(Re,ue)===-1&&F(Re,"$<")===-1){var He=oe(Ge,se,je,Re);if(He.done)return He.value}var ft=T(Re);ft||(Re=N(Re));var Pt=se.global;if(Pt){var Yt=se.unicode;se.lastIndex=0}for(var bt=[];;){var xt=ye(se,je);if(xt===null||(W(bt,xt),!Pt))break;N(xt[0])===""&&(se.lastIndex=L(je,A(se.lastIndex),Yt))}for(var nr,ve="",de=0,De=0;De<bt.length;De++){for(var ot=N((xt=bt[De])[0]),Tt=fe(ae(P(xt.index),je.length),0),lt=[],rr=1;rr<xt.length;rr++)W(lt,(nr=xt[rr])===void 0?nr:String(nr));var pr=xt.groups;if(ft){var ar=pe([ot],lt,Tt,je);pr!==void 0&&W(ar,pr);var Qt=N(p(Re,void 0,ar))}else Qt=$(ot,je,Tt,lt,pr,Re);Tt>=de&&(ve+=Y(je,de,Tt)+Qt,de=Tt+ot.length)}return ve+Y(je,de)}]},!!E(function(){var Oe=/./;return Oe.exec=function(){var Ge=[];return Ge.groups={a:"7"},Ge},"".replace(Oe,"$<a>")!=="7"})||!V||q)},function(a,f,o){var p=o(50),d=o(7);a.exports=p(d.process)=="process"},function(a,f,o){o(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(a,f,o){var p=o(109);a.exports=p&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(a,f,o){var p=o(36),d=o(19),y=o(86);a.exports=!p&&!d(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},function(a,f,o){var p=o(7),d=o(35),y=o(33),g=o(88),E=o(59),_=o(170),T=o(27),P=p.TypeError,A=T("toPrimitive");a.exports=function(N,M){if(!y(N)||g(N))return N;var L,z=E(N,A);if(z){if(M===void 0&&(M="default"),L=d(z,N,M),!y(L)||g(L))return L;throw P("Can't convert object to primitive value")}return M===void 0&&(M="number"),_(N,M)}},function(a,f,o){var p=o(15),d=o(34),y=o(40),g=o(132).indexOf,E=o(69),_=p([].push);a.exports=function(T,P){var A,N=y(T),M=0,L=[];for(A in N)!d(E,A)&&d(N,A)&&_(L,A);for(;P.length>M;)d(N,A=P[M++])&&(~g(L,A)||_(L,A));return L}},function(a,f,o){var p=o(40),d=o(67),y=o(43),g=function(E){return function(_,T,P){var A,N=p(_),M=y(N),L=d(P,M);if(E&&T!=T){for(;M>L;)if((A=N[L++])!=A)return!0}else for(;M>L;L++)if((E||L in N)&&N[L]===T)return E||L||0;return!E&&-1}};a.exports={includes:g(!0),indexOf:g(!1)}},function(a,f,o){var p=o(46);a.exports=p("document","documentElement")},function(a,f,o){var p=o(34),d=o(135),y=o(51),g=o(37);a.exports=function(E,_){for(var T=d(_),P=g.f,A=y.f,N=0;N<T.length;N++){var M=T[N];p(E,M)||P(E,M,A(_,M))}}},function(a,f,o){var p=o(46),d=o(15),y=o(72),g=o(112),E=o(32),_=d([].concat);a.exports=p("Reflect","ownKeys")||function(T){var P=y.f(E(T)),A=g.f;return A?_(P,A(T)):P}},function(a,f,o){var p,d,y,g=o(19),E=o(28),_=o(54),T=o(96),P=o(44),A=o(27),N=o(64),M=A("iterator"),L=!1;[].keys&&("next"in(y=[].keys())?(d=T(T(y)))!==Object.prototype&&(p=d):L=!0),p==null||g(function(){var z={};return p[M].call(z)!==z})?p={}:N&&(p=_(p)),E(p[M])||P(p,M,function(){return this}),a.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:L}},function(a,f,o){var p=o(19);a.exports=!p(function(){function d(){}return d.prototype.constructor=null,Object.getPrototypeOf(new d)!==d.prototype})},function(a,f,o){var p=o(17),d=o(15),y=o(69),g=o(33),E=o(34),_=o(37).f,T=o(72),P=o(139),A=o(175),N=o(85),M=o(177),L=!1,z=N("meta"),$=0,ye=function(fe){_(fe,z,{value:{objectID:"O"+$++,weakData:{}}})},Te=a.exports={enable:function(){Te.enable=function(){},L=!0;var fe=T.f,ae=d([].splice),pe={};pe[z]=1,fe(pe).length&&(T.f=function(W){for(var F=fe(W),Y=0,V=F.length;Y<V;Y++)if(F[Y]===z){ae(F,Y,1);break}return F},p({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:P.f}))},fastKey:function(fe,ae){if(!g(fe))return typeof fe=="symbol"?fe:(typeof fe=="string"?"S":"P")+fe;if(!E(fe,z)){if(!A(fe))return"F";if(!ae)return"E";ye(fe)}return fe[z].objectID},getWeakData:function(fe,ae){if(!E(fe,z)){if(!A(fe))return!0;if(!ae)return!1;ye(fe)}return fe[z].weakData},onFreeze:function(fe){return M&&L&&A(fe)&&!E(fe,z)&&ye(fe),fe}};y[z]=!0},function(a,f,o){var p=o(50),d=o(40),y=o(72).f,g=o(113),E=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(_){return E&&p(_)=="Window"?function(T){try{return y(T)}catch{return g(E)}}(_):y(d(_))}},function(a,f,o){var p=o(27),d=o(70),y=p("iterator"),g=Array.prototype;a.exports=function(E){return E!==void 0&&(d.Array===E||g[y]===E)}},function(a,f,o){var p=o(7),d=o(35),y=o(55),g=o(32),E=o(89),_=o(115),T=p.TypeError;a.exports=function(P,A){var N=arguments.length<2?_(P):A;if(y(N))return g(d(N,P));throw T(E(P)+" is not iterable")}},function(a,f,o){var p=o(35),d=o(32),y=o(59);a.exports=function(g,E,_){var T,P;d(g);try{if(!(T=y(g,"return"))){if(E==="throw")throw _;return _}T=p(T,g)}catch(A){P=!0,T=A}if(E==="throw")throw _;if(P)throw T;return d(T),_}},function(a,f,o){var p=o(28),d=o(33),y=o(97);a.exports=function(g,E,_){var T,P;return y&&p(T=E.constructor)&&T!==_&&d(P=T.prototype)&&P!==_.prototype&&y(g,P),g}},function(a,f,o){var p=o(44);a.exports=function(d,y,g){for(var E in y)p(d,E,y[E],g);return d}},function(a,f,o){var p=o(46),d=o(37),y=o(27),g=o(36),E=y("species");a.exports=function(_){var T=p(_),P=d.f;g&&T&&!T[E]&&P(T,E,{configurable:!0,get:function(){return this}})}},function(a,f,o){var p=o(15),d=o(68),y=o(41),g=o(45),E=p("".charAt),_=p("".charCodeAt),T=p("".slice),P=function(A){return function(N,M){var L,z,$=y(g(N)),ye=d(M),Te=$.length;return ye<0||ye>=Te?A?"":void 0:(L=_($,ye))<55296||L>56319||ye+1===Te||(z=_($,ye+1))<56320||z>57343?A?E($,ye):L:A?T($,ye,ye+2):z-56320+(L-55296<<10)+65536}};a.exports={codeAt:P(!1),charAt:P(!0)}},function(a,f){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(a,f,o){var p=o(86)("span").classList,d=p&&p.constructor&&p.constructor.prototype;a.exports=d===Object.prototype?void 0:d},function(a,f,o){var p=o(27);f.f=p},function(a,f,o){var p=o(182),d=o(34),y=o(149),g=o(37).f;a.exports=function(E){var _=p.Symbol||(p.Symbol={});d(_,E)||g(_,E,{value:y.f(E)})}},function(a,f,o){var p=o(19),d=o(7).RegExp,y=p(function(){var _=d("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),g=y||p(function(){return!d("a","y").sticky}),E=y||p(function(){var _=d("^r","gy");return _.lastIndex=2,_.exec("str")!=null});a.exports={BROKEN_CARET:E,MISSED_STICKY:g,UNSUPPORTED_Y:y}},function(a,f,o){var p=o(17),d=o(132).includes,y=o(83);p({target:"Array",proto:!0},{includes:function(g){return d(this,g,arguments.length>1?arguments[1]:void 0)}}),y("includes")},function(a,f,o){var p=o(17),d=o(15),y=o(194),g=o(45),E=o(41),_=o(195),T=d("".indexOf);p({target:"String",proto:!0,forced:!_("includes")},{includes:function(P){return!!~T(E(g(this)),E(y(P)),arguments.length>1?arguments[1]:void 0)}})},function(a,f,o){var p=o(33),d=o(50),y=o(27)("match");a.exports=function(g){var E;return p(g)&&((E=g[y])!==void 0?!!E:d(g)=="RegExp")}},function(a,f){var o,p,d=a.exports={};function y(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}function E($){if(o===setTimeout)return setTimeout($,0);if((o===y||!o)&&setTimeout)return o=setTimeout,setTimeout($,0);try{return o($,0)}catch{try{return o.call(null,$,0)}catch{return o.call(this,$,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:y}catch{o=y}try{p=typeof clearTimeout=="function"?clearTimeout:g}catch{p=g}})();var _,T=[],P=!1,A=-1;function N(){P&&_&&(P=!1,_.length?T=_.concat(T):A=-1,T.length&&M())}function M(){if(!P){var $=E(N);P=!0;for(var ye=T.length;ye;){for(_=T,T=[];++A<ye;)_&&_[A].run();A=-1,ye=T.length}_=null,P=!1,function(Te){if(p===clearTimeout)return clearTimeout(Te);if((p===g||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(Te);try{p(Te)}catch{try{return p.call(null,Te)}catch{return p.call(this,Te)}}}($)}}function L($,ye){this.fun=$,this.array=ye}function z(){}d.nextTick=function($){var ye=new Array(arguments.length-1);if(arguments.length>1)for(var Te=1;Te<arguments.length;Te++)ye[Te-1]=arguments[Te];T.push(new L($,ye)),T.length!==1||P||E(M)},L.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=z,d.addListener=z,d.once=z,d.off=z,d.removeListener=z,d.removeAllListeners=z,d.emit=z,d.prependListener=z,d.prependOnceListener=z,d.listeners=function($){return[]},d.binding=function($){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function($){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(a,f,o){var p=o(32),d=o(157),y=o(27)("species");a.exports=function(g,E){var _,T=p(g).constructor;return T===void 0||(_=p(T)[y])==null?E:d(_)}},function(a,f,o){var p=o(7),d=o(100),y=o(89),g=p.TypeError;a.exports=function(E){if(d(E))return E;throw g(y(E)+" is not a constructor")}},function(a,f,o){var p=o(17),d=o(159).trim;p({target:"String",proto:!0,forced:o(196)("trim")},{trim:function(){return d(this)}})},function(a,f,o){var p=o(15),d=o(45),y=o(41),g=o(160),E=p("".replace),_="["+g+"]",T=RegExp("^"+_+_+"*"),P=RegExp(_+_+"*$"),A=function(N){return function(M){var L=y(d(M));return 1&N&&(L=E(L,T,"")),2&N&&(L=E(L,P,"")),L}};a.exports={start:A(1),end:A(2),trim:A(3)}},function(a,f){a.exports=`	
\v\f\r \u2028\u2029\uFEFF`},function(a,f,o){var p=o(35),d=o(122),y=o(32),g=o(90),E=o(41),_=o(45),T=o(59),P=o(123),A=o(124);d("match",function(N,M,L){return[function(z){var $=_(this),ye=z==null?void 0:T(z,N);return ye?p(ye,z,$):new RegExp(z)[N](E($))},function(z){var $=y(this),ye=E(z),Te=L(M,$,ye);if(Te.done)return Te.value;if(!$.global)return A($,ye);var fe=$.unicode;$.lastIndex=0;for(var ae,pe=[],W=0;(ae=A($,ye))!==null;){var F=E(ae[0]);pe[W]=F,F===""&&($.lastIndex=P(ye,g($.lastIndex),fe)),W++}return W===0?null:pe}]})},function(a,f,o){var p=o(17),d=Math.hypot,y=Math.abs,g=Math.sqrt;p({target:"Math",stat:!0,forced:!!d&&d(1/0,NaN)!==1/0},{hypot:function(E,_){for(var T,P,A=0,N=0,M=arguments.length,L=0;N<M;)L<(T=y(arguments[N++]))?(A=A*(P=L/T)*P+1,L=T):A+=T>0?(P=T/L)*P:T;return L===1/0?1/0:L*g(A)}})},function(a,f,o){var p,d,y,g,E=o(7),_=o(76),T=o(62),P=o(28),A=o(34),N=o(19),M=o(133),L=o(101),z=o(86),$=o(164),ye=o(126),Te=E.setImmediate,fe=E.clearImmediate,ae=E.process,pe=E.Dispatch,W=E.Function,F=E.MessageChannel,Y=E.String,V=0,q={},Oe="onreadystatechange";try{p=E.location}catch{}var Ge=function(Re){if(A(q,Re)){var se=q[Re];delete q[Re],se()}},oe=function(Re){return function(){Ge(Re)}},ue=function(Re){Ge(Re.data)},Ne=function(Re){E.postMessage(Y(Re),p.protocol+"//"+p.host)};Te&&fe||(Te=function(Re){var se=L(arguments,1);return q[++V]=function(){_(P(Re)?Re:W(Re),void 0,se)},d(V),V},fe=function(Re){delete q[Re]},ye?d=function(Re){ae.nextTick(oe(Re))}:pe&&pe.now?d=function(Re){pe.now(oe(Re))}:F&&!$?(g=(y=new F).port2,y.port1.onmessage=ue,d=T(g.postMessage,g)):E.addEventListener&&P(E.postMessage)&&!E.importScripts&&p&&p.protocol!=="file:"&&!N(Ne)?(d=Ne,E.addEventListener("message",ue,!1)):d=Oe in z("script")?function(Re){M.appendChild(z("script")).onreadystatechange=function(){M.removeChild(this),Ge(Re)}}:function(Re){setTimeout(oe(Re),0)}),a.exports={set:Te,clear:fe}},function(a,f,o){var p=o(53);a.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(p)},function(a,f,o){var p=o(55),d=function(y){var g,E;this.promise=new y(function(_,T){if(g!==void 0||E!==void 0)throw TypeError("Bad Promise constructor");g=_,E=T}),this.resolve=p(g),this.reject=p(E)};a.exports.f=function(y){return new d(y)}},function(a,f,o){f.a=function(){return!1}},function(a,f,o){(function(p){o.d(f,"a",function(){return ae});var d=o(1);function y(F){throw new Error("[mobx-utils] "+F)}function g(F,Y){Y===void 0&&(Y="Illegal state"),F||y(Y)}var E=function(F){return F&&F!==Object.prototype&&Object.getOwnPropertyNames(F).concat(E(Object.getPrototypeOf(F))||[])},_=function(F){return function(Y){var V=E(Y);return V.filter(function(q,Oe){return V.indexOf(q)===Oe})}(F).filter(function(Y){return Y!=="constructor"&&!~Y.indexOf("__")})},T="pending",P="fulfilled",A="rejected";function N(F){switch(this.state){case T:return F.pending&&F.pending(this.value);case A:return F.rejected&&F.rejected(this.value);case P:return F.fulfilled?F.fulfilled(this.value):this.value}}function M(F,Y){if(g(arguments.length<=2,"fromPromise expects up to two arguments"),g(typeof F=="function"||typeof F=="object"&&F&&typeof F.then=="function","Please pass a promise or function to fromPromise"),F.isPromiseBasedObservable===!0)return F;typeof F=="function"&&(F=new Promise(F));var V=F;F.then(Object(d.k)("observableFromPromise-resolve",function(Oe){V.value=Oe,V.state=P}),Object(d.k)("observableFromPromise-reject",function(Oe){V.value=Oe,V.state=A})),V.isPromiseBasedObservable=!0,V.case=N;var q=Y&&Y.state===P?Y.value:void 0;return Object(d.q)(V,{value:q,state:T},{},{deep:!1}),V}(function(F){F.reject=Object(d.k)("fromPromise.reject",function(Y){var V=F(Promise.reject(Y));return V.state=A,V.value=Y,V}),F.resolve=Object(d.k)("fromPromise.resolve",function(Y){Y===void 0&&(Y=void 0);var V=F(Promise.resolve(Y));return V.state=P,V.value=Y,V})})(M||(M={}));var L=function(F,Y,V,q){var Oe,Ge=arguments.length,oe=Ge<3?Y:q===null?q=Object.getOwnPropertyDescriptor(Y,V):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")oe=Reflect.decorate(F,Y,V,q);else for(var ue=F.length-1;ue>=0;ue--)(Oe=F[ue])&&(oe=(Ge<3?Oe(oe):Ge>3?Oe(Y,V,oe):Oe(Y,V))||oe);return Ge>3&&oe&&Object.defineProperty(Y,V,oe),oe};(function(){function F(Y,V){var q=this;Object(d.G)(function(){q.current=V,q.subscription=Y.subscribe(q)})}F.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},F.prototype.next=function(Y){this.current=Y},F.prototype.complete=function(){this.dispose()},F.prototype.error=function(Y){this.current=Y,this.dispose()},L([d.C.ref],F.prototype,"current",void 0),L([d.k.bound],F.prototype,"next",null),L([d.k.bound],F.prototype,"complete",null),L([d.k.bound],F.prototype,"error",null)})();var z=function(){return z=Object.assign||function(F){for(var Y,V=1,q=arguments.length;V<q;V++)for(var Oe in Y=arguments[V])Object.prototype.hasOwnProperty.call(Y,Oe)&&(F[Oe]=Y[Oe]);return F},z.apply(this,arguments)},$=function(F,Y,V,q){var Oe,Ge=arguments.length,oe=Ge<3?Y:q===null?q=Object.getOwnPropertyDescriptor(Y,V):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")oe=Reflect.decorate(F,Y,V,q);else for(var ue=F.length-1;ue>=0;ue--)(Oe=F[ue])&&(oe=(Ge<3?Oe(oe):Ge>3?Oe(Y,V,oe):Oe(Y,V))||oe);return Ge>3&&oe&&Object.defineProperty(Y,V,oe),oe},ye=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function F(Y){var V=this;this.model=Y,this.localValues=d.C.map({}),this.localComputedValues=d.C.map({}),this.isPropertyDirty=function(q){return V.localValues.has(q)},g(Object(d.A)(Y),"createViewModel expects an observable object"),_(Y).forEach(function(q){if(q!==d.a&&q!=="__mobxDidRunLazyInitializers"){if(g(ye.indexOf(q)===-1,"The propertyname "+q+" is reserved and cannot be used with viewModels"),Object(d.w)(Y,q)){var Oe=Object(d.h)(Y,q).derivation;V.localComputedValues.set(q,Object(d.m)(Oe.bind(V)))}var Ge=Object.getOwnPropertyDescriptor(Y,q),oe=Ge?{enumerable:Ge.enumerable}:{};Object.defineProperty(V,q,z(z({},oe),{configurable:!0,get:function(){return Object(d.w)(Y,q)?V.localComputedValues.get(q).get():V.isPropertyDirty(q)?V.localValues.get(q):V.model[q]},set:Object(d.k)(function(ue){ue!==V.model[q]?V.localValues.set(q,ue):V.localValues.delete(q)})}))}})}Object.defineProperty(F.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),F.prototype.submit=function(){var Y=this;Object(d.B)(this.localValues).forEach(function(V){var q=Y.localValues.get(V),Oe=Y.model[V];Object(d.y)(Oe)?Oe.replace(q):Object(d.z)(Oe)?(Oe.clear(),Oe.merge(q)):Object(d.v)(q)||(Y.model[V]=q)}),this.localValues.clear()},F.prototype.reset=function(){this.localValues.clear()},F.prototype.resetProperty=function(Y){this.localValues.delete(Y)},$([d.m],F.prototype,"isDirty",null),$([d.m],F.prototype,"changedValues",null),$([d.k.bound],F.prototype,"submit",null),$([d.k.bound],F.prototype,"reset",null),$([d.k.bound],F.prototype,"resetProperty",null)})();function Te(F){if(!F)return"ROOT";for(var Y=[];F.parent;)Y.push(F.path),F=F.parent;return Y.reverse().join("/")}function fe(F){return Object(d.A)(F)||Object(d.y)(F)||Object(d.z)(F)}function ae(F,Y){var V=new WeakMap;function q(oe){var ue=V.get(oe.object);(function(Ne,Re){switch(Ne.type){case"add":Oe(Ne.newValue,Re,Ne.name);break;case"update":Ge(Ne.oldValue),Oe(Ne.newValue,Re,Ne.name||""+Ne.index);break;case"remove":case"delete":Ge(Ne.oldValue);break;case"splice":Ne.removed.map(Ge),Ne.added.forEach(function(He,ft){return Oe(He,Re,""+(Ne.index+ft))});for(var se=Ne.index+Ne.addedCount;se<Ne.object.length;se++)if(fe(Ne.object[se])){var je=V.get(Ne.object[se]);je&&(je.path=""+se)}}})(oe,ue),Y(oe,Te(ue),F)}function Oe(oe,ue,Ne){if(fe(oe)){var Re=V.get(oe);if(Re){if(Re.parent!==ue||Re.path!==Ne)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+Te(ue)+"/"+Ne+"', but it already exists at '"+Te(Re.parent)+"/"+Re.path+"'")}else{var se={parent:ue,path:Ne,dispose:Object(d.D)(oe,q)};V.set(oe,se),Object(d.p)(oe).forEach(function(je){var He=je[0];return Oe(je[1],se,He)})}}}function Ge(oe){if(fe(oe)){var ue=V.get(oe);if(!ue)return;V.delete(oe),ue.dispose(),Object(d.L)(oe).forEach(Ge)}}return Oe(F,void 0,""),function(){Ge(F)}}var pe,W=(pe=function(F,Y){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,q){V.__proto__=q}||function(V,q){for(var Oe in q)q.hasOwnProperty(Oe)&&(V[Oe]=q[Oe])},pe(F,Y)},function(F,Y){function V(){this.constructor=F}pe(F,Y),F.prototype=Y===null?Object.create(Y):(V.prototype=Y.prototype,new V)});(function(F){function Y(V,q,Oe){var Ge=Oe===void 0?{}:Oe,oe=Ge.name,ue=oe===void 0?"ogm"+(1e3*Math.random()|0):oe,Ne=Ge.keyToName,Re=Ne===void 0?function(He){return""+He}:Ne,se=F.call(this)||this;se._keyToName=Re,se._groupBy=q,se._ogmInfoKey=Symbol("ogmInfo"+ue),se._base=V;for(var je=0;je<V.length;je++)se._addItem(V[je]);return se._disposeBaseObserver=Object(d.D)(se._base,function(He){if(He.type==="splice")Object(d.J)(function(){for(var ft=0,Pt=He.removed;ft<Pt.length;ft++){var Yt=Pt[ft];se._removeItem(Yt)}for(var bt=0,xt=He.added;bt<xt.length;bt++){var nr=xt[bt];se._addItem(nr)}});else{if(He.type!=="update")throw new Error("illegal state");Object(d.J)(function(){se._removeItem(He.oldValue),se._addItem(He.newValue)})}}),se}W(Y,F),Y.prototype.clear=function(){throw new Error("not supported")},Y.prototype.delete=function(V){throw new Error("not supported")},Y.prototype.set=function(V,q){throw new Error("not supported")},Y.prototype.dispose=function(){this._disposeBaseObserver();for(var V=0;V<this._base.length;V++){var q=this._base[V];q[this._ogmInfoKey].reaction(),delete q[this._ogmInfoKey]}},Y.prototype._getGroupArr=function(V){var q=F.prototype.get.call(this,V);return q===void 0&&(q=Object(d.C)([],{name:"GroupArray["+this._keyToName(V)+"]",deep:!1}),F.prototype.set.call(this,V,q)),q},Y.prototype._removeFromGroupArr=function(V,q){var Oe=F.prototype.get.call(this,V);Oe.length===1?F.prototype.delete.call(this,V):(q===Oe.length-1||(Oe[q]=Oe[Oe.length-1],Oe[q][this._ogmInfoKey].groupArrIndex=q),Oe.length--)},Y.prototype._addItem=function(V){var q=this,Oe=this._groupBy(V),Ge=this._getGroupArr(Oe),oe={groupByValue:Oe,groupArrIndex:Ge.length,reaction:Object(d.F)(function(){return q._groupBy(V)},function(ue,Ne){var Re=V[q._ogmInfoKey];q._removeFromGroupArr(Re.groupByValue,Re.groupArrIndex);var se=q._getGroupArr(ue),je=se.length;se.push(V),Re.groupByValue=ue,Re.groupArrIndex=je})};Object.defineProperty(V,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:oe}),Ge.push(V)},Y.prototype._removeItem=function(V){var q=V[this._ogmInfoKey];this._removeFromGroupArr(q.groupByValue,q.groupArrIndex),q.reaction(),delete V[this._ogmInfoKey]}})(d.b),function(){function F(Y,V){this.base=Y,this.args=V,this.closestIdx=0,this.isDisposed=!1;for(var q=this.closest=this.root=Y,Oe=0;Oe<this.args.length-1&&(q=q.get(V[Oe]));Oe++)this.closest=q;this.closestIdx=Oe}return F.prototype.exists=function(){this.assertNotDisposed();var Y=this.args.length;return this.closestIdx>=Y-1&&this.closest.has(this.args[Y-1])},F.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},F.prototype.set=function(Y){this.assertNotDisposed();for(var V=this.args.length,q=this.closest,Oe=this.closestIdx;Oe<V-1;Oe++){var Ge=new Map;q.set(this.args[Oe],Ge),q=Ge}this.closestIdx=V-1,this.closest=q,q.set(this.args[V-1],Y)},F.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var Y=this.args.length;this.closest.delete(this.args[Y-1]);for(var V=this.root,q=[V],Oe=0;Oe<Y-1;Oe++)V=V.get(this.args[Oe]),q.push(V);for(Oe=q.length-1;Oe>0;Oe--)q[Oe].size===0&&q[Oe-1].delete(this.args[Oe-1]);this.isDisposed=!0},F.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},F}(),Promise.resolve(),typeof queueMicrotask<"u"||p!==void 0&&p.nextTick}).call(this,o(155))},function(a,f,o){var p;(function(d,y,g){if(d){for(var E,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},T={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},P={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},A={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},N=1;N<20;++N)_[111+N]="f"+N;for(N=0;N<=9;++N)_[N+96]=N.toString();fe.prototype.bind=function(ae,pe,W){var F=this;return ae=ae instanceof Array?ae:[ae],F._bindMultiple.call(F,ae,pe,W),F},fe.prototype.unbind=function(ae,pe){return this.bind.call(this,ae,function(){},pe)},fe.prototype.trigger=function(ae,pe){var W=this;return W._directMap[ae+":"+pe]&&W._directMap[ae+":"+pe]({},ae),W},fe.prototype.reset=function(){var ae=this;return ae._callbacks={},ae._directMap={},ae},fe.prototype.stopCallback=function(ae,pe){if((" "+pe.className+" ").indexOf(" mousetrap ")>-1||Te(pe,this.target))return!1;if("composedPath"in ae&&typeof ae.composedPath=="function"){var W=ae.composedPath()[0];W!==ae.target&&(pe=W)}return pe.tagName=="INPUT"||pe.tagName=="SELECT"||pe.tagName=="TEXTAREA"||pe.isContentEditable},fe.prototype.handleKey=function(){var ae=this;return ae._handleKey.apply(ae,arguments)},fe.addKeycodes=function(ae){for(var pe in ae)ae.hasOwnProperty(pe)&&(_[pe]=ae[pe]);E=null},fe.init=function(){var ae=fe(y);for(var pe in ae)pe.charAt(0)!=="_"&&(fe[pe]=function(W){return function(){return ae[W].apply(ae,arguments)}}(pe))},fe.init(),d.Mousetrap=fe,a.exports&&(a.exports=fe),(p=function(){return fe}.call(f,o,f,a))===void 0||(a.exports=p)}function M(ae,pe,W){ae.addEventListener?ae.addEventListener(pe,W,!1):ae.attachEvent("on"+pe,W)}function L(ae){if(ae.type=="keypress"){var pe=String.fromCharCode(ae.which);return ae.shiftKey||(pe=pe.toLowerCase()),pe}return _[ae.which]?_[ae.which]:T[ae.which]?T[ae.which]:String.fromCharCode(ae.which).toLowerCase()}function z(ae){return ae=="shift"||ae=="ctrl"||ae=="alt"||ae=="meta"}function $(ae,pe,W){return W||(W=function(){if(!E)for(var F in E={},_)F>95&&F<112||_.hasOwnProperty(F)&&(E[_[F]]=F);return E}()[ae]?"keydown":"keypress"),W=="keypress"&&pe.length&&(W="keydown"),W}function ye(ae,pe){var W,F,Y,V=[];for(W=function(q){return q==="+"?["+"]:(q=q.replace(/\+{2}/g,"+plus")).split("+")}(ae),Y=0;Y<W.length;++Y)F=W[Y],A[F]&&(F=A[F]),pe&&pe!="keypress"&&P[F]&&(F=P[F],V.push("shift")),z(F)&&V.push(F);return{key:F,modifiers:V,action:pe=$(F,V,pe)}}function Te(ae,pe){return ae!==null&&ae!==y&&(ae===pe||Te(ae.parentNode,pe))}function fe(ae){var pe=this;if(ae=ae||y,!(pe instanceof fe))return new fe(ae);pe.target=ae,pe._callbacks={},pe._directMap={};var W,F={},Y=!1,V=!1,q=!1;function Oe(se){se=se||{};var je,He=!1;for(je in F)se[je]?He=!0:F[je]=0;He||(q=!1)}function Ge(se,je,He,ft,Pt,Yt){var bt,xt,nr,ve,de=[],De=He.type;if(!pe._callbacks[se])return[];for(De=="keyup"&&z(se)&&(je=[se]),bt=0;bt<pe._callbacks[se].length;++bt)if(xt=pe._callbacks[se][bt],(ft||!xt.seq||F[xt.seq]==xt.level)&&De==xt.action&&(De=="keypress"&&!He.metaKey&&!He.ctrlKey||(nr=je,ve=xt.modifiers,nr.sort().join(",")===ve.sort().join(",")))){var ot=!ft&&xt.combo==Pt,Tt=ft&&xt.seq==ft&&xt.level==Yt;(ot||Tt)&&pe._callbacks[se].splice(bt,1),de.push(xt)}return de}function oe(se,je,He,ft){pe.stopCallback(je,je.target||je.srcElement,He,ft)||se(je,He)===!1&&(function(Pt){Pt.preventDefault?Pt.preventDefault():Pt.returnValue=!1}(je),function(Pt){Pt.stopPropagation?Pt.stopPropagation():Pt.cancelBubble=!0}(je))}function ue(se){typeof se.which!="number"&&(se.which=se.keyCode);var je=L(se);je&&(se.type!="keyup"||Y!==je?pe.handleKey(je,function(He){var ft=[];return He.shiftKey&&ft.push("shift"),He.altKey&&ft.push("alt"),He.ctrlKey&&ft.push("ctrl"),He.metaKey&&ft.push("meta"),ft}(se),se):Y=!1)}function Ne(se,je,He,ft){function Pt(nr){return function(){q=nr,++F[se],clearTimeout(W),W=setTimeout(Oe,1e3)}}function Yt(nr){oe(He,nr,se),ft!=="keyup"&&(Y=L(nr)),setTimeout(Oe,10)}F[se]=0;for(var bt=0;bt<je.length;++bt){var xt=bt+1===je.length?Yt:Pt(ft||ye(je[bt+1]).action);Re(je[bt],xt,ft,se,bt)}}function Re(se,je,He,ft,Pt){pe._directMap[se+":"+He]=je;var Yt,bt=(se=se.replace(/\s+/g," ")).split(" ");bt.length>1?Ne(se,bt,je,He):(Yt=ye(se,He),pe._callbacks[Yt.key]=pe._callbacks[Yt.key]||[],Ge(Yt.key,Yt.modifiers,{type:Yt.action},ft,se,Pt),pe._callbacks[Yt.key][ft?"unshift":"push"]({callback:je,modifiers:Yt.modifiers,action:Yt.action,seq:ft,level:Pt,combo:se}))}pe._handleKey=function(se,je,He){var ft,Pt=Ge(se,je,He),Yt={},bt=0,xt=!1;for(ft=0;ft<Pt.length;++ft)Pt[ft].seq&&(bt=Math.max(bt,Pt[ft].level));for(ft=0;ft<Pt.length;++ft)if(Pt[ft].seq){if(Pt[ft].level!=bt)continue;xt=!0,Yt[Pt[ft].seq]=1,oe(Pt[ft].callback,He,Pt[ft].combo,Pt[ft].seq)}else xt||oe(Pt[ft].callback,He,Pt[ft].combo);var nr=He.type=="keypress"&&V;He.type!=q||z(se)||nr||Oe(Yt),V=xt&&He.type=="keydown"},pe._bindMultiple=function(se,je,He){for(var ft=0;ft<se.length;++ft)Re(se[ft],je,He)},M(ae,"keypress",ue),M(ae,"keydown",ue),M(ae,"keyup",ue)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(a,f,o){var p=o(36),d=o(37),y=o(32),g=o(40),E=o(66);a.exports=p?Object.defineProperties:function(_,T){y(_);for(var P,A=g(T),N=E(T),M=N.length,L=0;M>L;)d.f(_,P=N[L++],A[P]);return _}},function(a,f,o){var p=o(7),d=o(35),y=o(28),g=o(33),E=p.TypeError;a.exports=function(_,T){var P,A;if(T==="string"&&y(P=_.toString)&&!g(A=d(P,_))||y(P=_.valueOf)&&!g(A=d(P,_))||T!=="string"&&y(P=_.toString)&&!g(A=d(P,_)))return A;throw E("Can't convert object to primitive value")}},function(a,f,o){var p=o(7),d=o(28),y=o(92),g=p.WeakMap;a.exports=d(g)&&/native code/.test(y(g))},function(a,f,o){var p=o(136).IteratorPrototype,d=o(54),y=o(71),g=o(73),E=o(70),_=function(){return this};a.exports=function(T,P,A,N){var M=P+" Iterator";return T.prototype=d(p,{next:y(+!N,A)}),g(T,M,!1,!0),E[M]=_,T}},function(a,f,o){var p=o(7),d=o(28),y=p.String,g=p.TypeError;a.exports=function(E){if(typeof E=="object"||d(E))return E;throw g("Can't set "+y(E)+" as a prototype")}},function(a,f,o){var p=o(17),d=o(7),y=o(15),g=o(95),E=o(44),_=o(138),T=o(114),P=o(117),A=o(28),N=o(33),M=o(19),L=o(118),z=o(73),$=o(143);a.exports=function(ye,Te,fe){var ae=ye.indexOf("Map")!==-1,pe=ye.indexOf("Weak")!==-1,W=ae?"set":"add",F=d[ye],Y=F&&F.prototype,V=F,q={},Oe=function(se){var je=y(Y[se]);E(Y,se,se=="add"?function(He){return je(this,He===0?0:He),this}:se=="delete"?function(He){return!(pe&&!N(He))&&je(this,He===0?0:He)}:se=="get"?function(He){return pe&&!N(He)?void 0:je(this,He===0?0:He)}:se=="has"?function(He){return!(pe&&!N(He))&&je(this,He===0?0:He)}:function(He,ft){return je(this,He===0?0:He,ft),this})};if(g(ye,!A(F)||!(pe||Y.forEach&&!M(function(){new F().entries().next()}))))V=fe.getConstructor(Te,ye,ae,W),_.enable();else if(g(ye,!0)){var Ge=new V,oe=Ge[W](pe?{}:-0,1)!=Ge,ue=M(function(){Ge.has(1)}),Ne=L(function(se){new F(se)}),Re=!pe&&M(function(){for(var se=new F,je=5;je--;)se[W](je,je);return!se.has(-0)});Ne||((V=Te(function(se,je){P(se,Y);var He=$(new F,se,V);return je!=null&&T(je,He[W],{that:He,AS_ENTRIES:ae}),He})).prototype=Y,Y.constructor=V),(ue||Re)&&(Oe("delete"),Oe("has"),ae&&Oe("get")),(Re||oe)&&Oe(W),pe&&Y.clear&&delete Y.clear}return q[ye]=V,p({global:!0,forced:V!=F},q),z(V,ye),pe||fe.setStrong(V,ye,ae),V}},function(a,f,o){var p=o(19),d=o(33),y=o(50),g=o(176),E=Object.isExtensible,_=p(function(){});a.exports=_||g?function(T){return!!d(T)&&(!g||y(T)!="ArrayBuffer")&&(!E||E(T))}:E},function(a,f,o){var p=o(19);a.exports=p(function(){if(typeof ArrayBuffer=="function"){var d=new ArrayBuffer(8);Object.isExtensible(d)&&Object.defineProperty(d,"a",{value:8})}})},function(a,f,o){var p=o(19);a.exports=!p(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(a,f,o){var p=o(37).f,d=o(54),y=o(144),g=o(62),E=o(117),_=o(114),T=o(111),P=o(145),A=o(36),N=o(138).fastKey,M=o(56),L=M.set,z=M.getterFor;a.exports={getConstructor:function($,ye,Te,fe){var ae=$(function(V,q){E(V,pe),L(V,{type:ye,index:d(null),first:void 0,last:void 0,size:0}),A||(V.size=0),q!=null&&_(q,V[fe],{that:V,AS_ENTRIES:Te})}),pe=ae.prototype,W=z(ye),F=function(V,q,Oe){var Ge,oe,ue=W(V),Ne=Y(V,q);return Ne?Ne.value=Oe:(ue.last=Ne={index:oe=N(q,!0),key:q,value:Oe,previous:Ge=ue.last,next:void 0,removed:!1},ue.first||(ue.first=Ne),Ge&&(Ge.next=Ne),A?ue.size++:V.size++,oe!=="F"&&(ue.index[oe]=Ne)),V},Y=function(V,q){var Oe,Ge=W(V),oe=N(q);if(oe!=="F")return Ge.index[oe];for(Oe=Ge.first;Oe;Oe=Oe.next)if(Oe.key==q)return Oe};return y(pe,{clear:function(){for(var V=W(this),q=V.index,Oe=V.first;Oe;)Oe.removed=!0,Oe.previous&&(Oe.previous=Oe.previous.next=void 0),delete q[Oe.index],Oe=Oe.next;V.first=V.last=void 0,A?V.size=0:this.size=0},delete:function(V){var q=this,Oe=W(q),Ge=Y(q,V);if(Ge){var oe=Ge.next,ue=Ge.previous;delete Oe.index[Ge.index],Ge.removed=!0,ue&&(ue.next=oe),oe&&(oe.previous=ue),Oe.first==Ge&&(Oe.first=oe),Oe.last==Ge&&(Oe.last=ue),A?Oe.size--:q.size--}return!!Ge},forEach:function(V){for(var q,Oe=W(this),Ge=g(V,arguments.length>1?arguments[1]:void 0);q=q?q.next:Oe.first;)for(Ge(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(V){return!!Y(this,V)}}),y(pe,Te?{get:function(V){var q=Y(this,V);return q&&q.value},set:function(V,q){return F(this,V===0?0:V,q)}}:{add:function(V){return F(this,V=V===0?0:V,V)}}),A&&p(pe,"size",{get:function(){return W(this).size}}),ae},setStrong:function($,ye,Te){var fe=ye+" Iterator",ae=z(ye),pe=z(fe);T($,ye,function(W,F){L(this,{type:fe,target:W,state:ae(W),kind:F,last:void 0})},function(){for(var W=pe(this),F=W.kind,Y=W.last;Y&&Y.removed;)Y=Y.previous;return W.target&&(W.last=Y=Y?Y.next:W.state.first)?F=="keys"?{value:Y.key,done:!1}:F=="values"?{value:Y.value,done:!1}:{value:[Y.key,Y.value],done:!1}:(W.target=void 0,{value:void 0,done:!0})},Te?"entries":"values",!Te,!0),P(ye)}}},function(a,f,o){var p=o(116),d=o(98);a.exports=p?{}.toString:function(){return"[object "+d(this)+"]"}},function(a,f,o){var p=o(74).forEach,d=o(120)("forEach");a.exports=d?[].forEach:function(y){return p(this,y,arguments.length>1?arguments[1]:void 0)}},function(a,f,o){var p=o(7),d=o(99),y=o(100),g=o(33),E=o(27)("species"),_=p.Array;a.exports=function(T){var P;return d(T)&&(P=T.constructor,(y(P)&&(P===_||d(P.prototype))||g(P)&&(P=P[E])===null)&&(P=void 0)),P===void 0?_:P}},function(a,f,o){var p=o(7);a.exports=p},function(a,f,o){var p=o(7),d=o(62),y=o(35),g=o(38),E=o(184),_=o(140),T=o(100),P=o(43),A=o(61),N=o(141),M=o(115),L=p.Array;a.exports=function(z){var $=g(z),ye=T(this),Te=arguments.length,fe=Te>1?arguments[1]:void 0,ae=fe!==void 0;ae&&(fe=d(fe,Te>2?arguments[2]:void 0));var pe,W,F,Y,V,q,Oe=M($),Ge=0;if(!Oe||this==L&&_(Oe))for(pe=P($),W=ye?new this(pe):L(pe);pe>Ge;Ge++)q=ae?fe($[Ge],Ge):$[Ge],A(W,Ge,q);else for(V=(Y=N($,Oe)).next,W=ye?new this:[];!(F=y(V,Y)).done;Ge++)q=ae?E(Y,fe,[F.value,Ge],!0):F.value,A(W,Ge,q);return W.length=Ge,W}},function(a,f,o){var p=o(32),d=o(142);a.exports=function(y,g,E,_){try{return _?g(p(E)[0],E[1]):g(E)}catch(T){d(y,"throw",T)}}},function(a,f,o){var p=o(32);a.exports=function(){var d=p(this),y="";return d.global&&(y+="g"),d.ignoreCase&&(y+="i"),d.multiline&&(y+="m"),d.dotAll&&(y+="s"),d.unicode&&(y+="u"),d.sticky&&(y+="y"),y}},function(a,f,o){var p=o(19),d=o(7).RegExp;a.exports=p(function(){var y=d(".","s");return!(y.dotAll&&y.exec(`
`)&&y.flags==="s")})},function(a,f,o){var p=o(19),d=o(7).RegExp;a.exports=p(function(){var y=d("(?<a>b)","g");return y.exec("b").groups.a!=="b"||"b".replace(y,"$<a>c")!=="bc"})},function(a,f,o){var p=o(17),d=o(15),y=o(55),g=o(38),E=o(43),_=o(41),T=o(19),P=o(189),A=o(120),N=o(190),M=o(191),L=o(65),z=o(192),$=[],ye=d($.sort),Te=d($.push),fe=T(function(){$.sort(void 0)}),ae=T(function(){$.sort(null)}),pe=A("sort"),W=!T(function(){if(L)return L<70;if(!(N&&N>3)){if(M)return!0;if(z)return z<603;var F,Y,V,q,Oe="";for(F=65;F<76;F++){switch(Y=String.fromCharCode(F),F){case 66:case 69:case 70:case 72:V=3;break;case 68:case 71:V=4;break;default:V=2}for(q=0;q<47;q++)$.push({k:Y+q,v:V})}for($.sort(function(Ge,oe){return oe.v-Ge.v}),q=0;q<$.length;q++)Y=$[q].k.charAt(0),Oe.charAt(Oe.length-1)!==Y&&(Oe+=Y);return Oe!=="DGBEFHACIJK"}});p({target:"Array",proto:!0,forced:fe||!ae||!pe||!W},{sort:function(F){F!==void 0&&y(F);var Y=g(this);if(W)return F===void 0?ye(Y):ye(Y,F);var V,q,Oe=[],Ge=E(Y);for(q=0;q<Ge;q++)q in Y&&Te(Oe,Y[q]);for(P(Oe,function(oe){return function(ue,Ne){return Ne===void 0?-1:ue===void 0?1:oe!==void 0?+oe(ue,Ne)||0:_(ue)>_(Ne)?1:-1}}(F)),V=Oe.length,q=0;q<V;)Y[q]=Oe[q++];for(;q<Ge;)delete Y[q++];return Y}})},function(a,f,o){var p=o(113),d=Math.floor,y=function(_,T){var P=_.length,A=d(P/2);return P<8?g(_,T):E(_,y(p(_,0,A),T),y(p(_,A),T),T)},g=function(_,T){for(var P,A,N=_.length,M=1;M<N;){for(A=M,P=_[M];A&&T(_[A-1],P)>0;)_[A]=_[--A];A!==M++&&(_[A]=P)}return _},E=function(_,T,P,A){for(var N=T.length,M=P.length,L=0,z=0;L<N||z<M;)_[L+z]=L<N&&z<M?A(T[L],P[z])<=0?T[L++]:P[z++]:L<N?T[L++]:P[z++];return _};a.exports=y},function(a,f,o){var p=o(53).match(/firefox\/(\d+)/i);a.exports=!!p&&+p[1]},function(a,f,o){var p=o(53);a.exports=/MSIE|Trident/.test(p)},function(a,f,o){var p=o(53).match(/AppleWebKit\/(\d+)\./);a.exports=!!p&&+p[1]},function(a,f,o){var p=o(17),d=o(74).find,y=o(83),g="find",E=!0;g in[]&&Array(1).find(function(){E=!1}),p({target:"Array",proto:!0,forced:E},{find:function(_){return d(this,_,arguments.length>1?arguments[1]:void 0)}}),y(g)},function(a,f,o){var p=o(7),d=o(154),y=p.TypeError;a.exports=function(g){if(d(g))throw y("The method doesn't accept regular expressions");return g}},function(a,f,o){var p=o(27)("match");a.exports=function(d){var y=/./;try{"/./"[d](y)}catch{try{return y[p]=!1,"/./"[d](y)}catch{}}return!1}},function(a,f,o){var p=o(94).PROPER,d=o(19),y=o(160);a.exports=function(g){return d(function(){return!!y[g]()||""[g]()!==""||p&&y[g].name!==g})}},function(a,f,o){var p=o(15);a.exports=p(1 .valueOf)},function(a,f,o){var p=o(15),d=o(38),y=Math.floor,g=p("".charAt),E=p("".replace),_=p("".slice),T=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,P=/\$([$&'`]|\d{1,2})/g;a.exports=function(A,N,M,L,z,$){var ye=M+A.length,Te=L.length,fe=P;return z!==void 0&&(z=d(z),fe=T),E($,fe,function(ae,pe){var W;switch(g(pe,0)){case"$":return"$";case"&":return A;case"`":return _(N,0,M);case"'":return _(N,ye);case"<":W=z[_(pe,1,-1)];break;default:var F=+pe;if(F===0)return ae;if(F>Te){var Y=y(F/10);return Y===0?ae:Y<=Te?L[Y-1]===void 0?g(pe,1):L[Y-1]+g(pe,1):ae}W=L[F-1]}return W===void 0?"":W})}},function(a,f,o){var p=o(36),d=o(15),y=o(35),g=o(19),E=o(66),_=o(112),T=o(93),P=o(38),A=o(81),N=Object.assign,M=Object.defineProperty,L=d([].concat);a.exports=!N||g(function(){if(p&&N({b:1},N(M({},"a",{enumerable:!0,get:function(){M(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var z={},$={},ye=Symbol(),Te="abcdefghijklmnopqrst";return z[ye]=7,Te.split("").forEach(function(fe){$[fe]=fe}),N({},z)[ye]!=7||E(N({},$)).join("")!=Te})?function(z,$){for(var ye=P(z),Te=arguments.length,fe=1,ae=_.f,pe=T.f;Te>fe;)for(var W,F=A(arguments[fe++]),Y=ae?L(E(F),ae(F)):E(F),V=Y.length,q=0;V>q;)W=Y[q++],p&&!y(pe,F,W)||(ye[W]=F[W]);return ye}:N},function(a,f,o){var p=o(7),d=o(15),y=o(55),g=o(33),E=o(34),_=o(101),T=p.Function,P=d([].concat),A=d([].join),N={},M=function(L,z,$){if(!E(N,z)){for(var ye=[],Te=0;Te<z;Te++)ye[Te]="a["+Te+"]";N[z]=T("C,a","return new C("+A(ye,",")+")")}return N[z](L,$)};a.exports=T.bind||function(L){var z=y(this),$=z.prototype,ye=_(arguments,1),Te=function(){var fe=P(ye,_(arguments));return this instanceof Te?M(z,fe.length,fe):z.apply(L,fe)};return g($)&&(Te.prototype=$),Te}},function(a,f,o){var p=o(34);a.exports=function(d){return d!==void 0&&(p(d,"value")||p(d,"writable"))}},function(a,f,o){var p=o(15),d=o(45),y=o(41),g=/"/g,E=p("".replace);a.exports=function(_,T,P,A){var N=y(d(_)),M="<"+T;return P!==""&&(M+=" "+P+'="'+E(y(A),g,"&quot;")+'"'),M+">"+N+"</"+T+">"}},function(a,f,o){var p=o(19);a.exports=function(d){return p(function(){var y=""[d]('"');return y!==y.toLowerCase()||y.split('"').length>3})}},function(a,f,o){var p,d,y,g,E=o(17),_=o(64),T=o(7),P=o(46),A=o(35),N=o(205),M=o(44),L=o(144),z=o(97),$=o(73),ye=o(145),Te=o(55),fe=o(28),ae=o(33),pe=o(117),W=o(92),F=o(114),Y=o(118),V=o(156),q=o(163).set,Oe=o(206),Ge=o(209),oe=o(210),ue=o(165),Ne=o(211),Re=o(56),se=o(95),je=o(27),He=o(212),ft=o(126),Pt=o(65),Yt=je("species"),bt="Promise",xt=Re.getterFor(bt),nr=Re.set,ve=Re.getterFor(bt),de=N&&N.prototype,De=N,ot=de,Tt=T.TypeError,lt=T.document,rr=T.process,pr=ue.f,ar=pr,Qt=!!(lt&&lt.createEvent&&T.dispatchEvent),Ke=fe(T.PromiseRejectionEvent),Xt="unhandledrejection",_e=!1,Ft=se(bt,function(){var ie=W(De),Le=ie!==String(De);if(!Le&&Pt===66||_&&!ot.finally)return!0;if(Pt>=51&&/native code/.test(ie))return!1;var jt=new De(function(Vt){Vt(1)}),_t=function(Vt){Vt(function(){},function(){})};return(jt.constructor={})[Yt]=_t,!(_e=jt.then(function(){})instanceof _t)||!Le&&He&&!Ke}),_r=Ft||!Y(function(ie){De.all(ie).catch(function(){})}),k=function(ie){var Le;return!(!ae(ie)||!fe(Le=ie.then))&&Le},gr=function(ie,Le){if(!ie.notified){ie.notified=!0;var jt=ie.reactions;Oe(function(){for(var _t=ie.value,Vt=ie.state==1,Tr=0;jt.length>Tr;){var On,kn,pn,bn=jt[Tr++],Gt=Vt?bn.ok:bn.fail,er=bn.resolve,lr=bn.reject,yr=bn.domain;try{Gt?(Vt||(ie.rejection===2&&ur(ie),ie.rejection=1),Gt===!0?On=_t:(yr&&yr.enter(),On=Gt(_t),yr&&(yr.exit(),pn=!0)),On===bn.promise?lr(Tt("Promise-chain cycle")):(kn=k(On))?A(kn,On,er,lr):er(On)):lr(_t)}catch(Xr){yr&&!pn&&yr.exit(),lr(Xr)}}ie.reactions=[],ie.notified=!1,Le&&!ie.rejection&&$r(ie)})}},Cr=function(ie,Le,jt){var _t,Vt;Qt?((_t=lt.createEvent("Event")).promise=Le,_t.reason=jt,_t.initEvent(ie,!1,!0),T.dispatchEvent(_t)):_t={promise:Le,reason:jt},!Ke&&(Vt=T["on"+ie])?Vt(_t):ie===Xt&&oe("Unhandled promise rejection",jt)},$r=function(ie){A(q,T,function(){var Le,jt=ie.facade,_t=ie.value;if(Zr(ie)&&(Le=Ne(function(){ft?rr.emit("unhandledRejection",_t,jt):Cr(Xt,jt,_t)}),ie.rejection=ft||Zr(ie)?2:1,Le.error))throw Le.value})},Zr=function(ie){return ie.rejection!==1&&!ie.parent},ur=function(ie){A(q,T,function(){var Le=ie.facade;ft?rr.emit("rejectionHandled",Le):Cr("rejectionhandled",Le,ie.value)})},sn=function(ie,Le,jt){return function(_t){ie(Le,_t,jt)}},Q=function(ie,Le,jt){ie.done||(ie.done=!0,jt&&(ie=jt),ie.value=Le,ie.state=2,gr(ie,!0))},xe=function(ie,Le,jt){if(!ie.done){ie.done=!0,jt&&(ie=jt);try{if(ie.facade===Le)throw Tt("Promise can't be resolved itself");var _t=k(Le);_t?Oe(function(){var Vt={done:!1};try{A(_t,Le,sn(xe,Vt,ie),sn(Q,Vt,ie))}catch(Tr){Q(Vt,Tr,ie)}}):(ie.value=Le,ie.state=1,gr(ie,!1))}catch(Vt){Q({done:!1},Vt,ie)}}};if(Ft&&(ot=(De=function(ie){pe(this,ot),Te(ie),A(p,this);var Le=xt(this);try{ie(sn(xe,Le),sn(Q,Le))}catch(jt){Q(Le,jt)}}).prototype,(p=function(ie){nr(this,{type:bt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=L(ot,{then:function(ie,Le){var jt=ve(this),_t=jt.reactions,Vt=pr(V(this,De));return Vt.ok=!fe(ie)||ie,Vt.fail=fe(Le)&&Le,Vt.domain=ft?rr.domain:void 0,jt.parent=!0,_t[_t.length]=Vt,jt.state!=0&&gr(jt,!1),Vt.promise},catch:function(ie){return this.then(void 0,ie)}}),d=function(){var ie=new p,Le=xt(ie);this.promise=ie,this.resolve=sn(xe,Le),this.reject=sn(Q,Le)},ue.f=pr=function(ie){return ie===De||ie===y?new d(ie):ar(ie)},!_&&fe(N)&&de!==Object.prototype)){g=de.then,_e||(M(de,"then",function(ie,Le){var jt=this;return new De(function(_t,Vt){A(g,jt,_t,Vt)}).then(ie,Le)},{unsafe:!0}),M(de,"catch",ot.catch,{unsafe:!0}));try{delete de.constructor}catch{}z&&z(de,ot)}E({global:!0,wrap:!0,forced:Ft},{Promise:De}),$(De,bt,!1,!0),ye(bt),y=P(bt),E({target:bt,stat:!0,forced:Ft},{reject:function(ie){var Le=pr(this);return A(Le.reject,void 0,ie),Le.promise}}),E({target:bt,stat:!0,forced:_||Ft},{resolve:function(ie){return Ge(_&&this===y?De:this,ie)}}),E({target:bt,stat:!0,forced:_r},{all:function(ie){var Le=this,jt=pr(Le),_t=jt.resolve,Vt=jt.reject,Tr=Ne(function(){var On=Te(Le.resolve),kn=[],pn=0,bn=1;F(ie,function(Gt){var er=pn++,lr=!1;bn++,A(On,Le,Gt).then(function(yr){lr||(lr=!0,kn[er]=yr,--bn||_t(kn))},Vt)}),--bn||_t(kn)});return Tr.error&&Vt(Tr.value),jt.promise},race:function(ie){var Le=this,jt=pr(Le),_t=jt.reject,Vt=Ne(function(){var Tr=Te(Le.resolve);F(ie,function(On){A(Tr,Le,On).then(jt.resolve,_t)})});return Vt.error&&_t(Vt.value),jt.promise}})},function(a,f,o){var p=o(7);a.exports=p.Promise},function(a,f,o){var p,d,y,g,E,_,T,P,A=o(7),N=o(62),M=o(51).f,L=o(163).set,z=o(164),$=o(207),ye=o(208),Te=o(126),fe=A.MutationObserver||A.WebKitMutationObserver,ae=A.document,pe=A.process,W=A.Promise,F=M(A,"queueMicrotask"),Y=F&&F.value;Y||(p=function(){var V,q;for(Te&&(V=pe.domain)&&V.exit();d;){q=d.fn,d=d.next;try{q()}catch(Oe){throw d?g():y=void 0,Oe}}y=void 0,V&&V.enter()},z||Te||ye||!fe||!ae?!$&&W&&W.resolve?((T=W.resolve(void 0)).constructor=W,P=N(T.then,T),g=function(){P(p)}):Te?g=function(){pe.nextTick(p)}:(L=N(L,A),g=function(){L(p)}):(E=!0,_=ae.createTextNode(""),new fe(p).observe(_,{characterData:!0}),g=function(){_.data=E=!E})),a.exports=Y||function(V){var q={fn:V,next:void 0};y&&(y.next=q),d||(d=q,g()),y=q}},function(a,f,o){var p=o(53),d=o(7);a.exports=/ipad|iphone|ipod/i.test(p)&&d.Pebble!==void 0},function(a,f,o){var p=o(53);a.exports=/web0s(?!.*chrome)/i.test(p)},function(a,f,o){var p=o(32),d=o(33),y=o(165);a.exports=function(g,E){if(p(g),d(E)&&E.constructor===g)return E;var _=y.f(g);return(0,_.resolve)(E),_.promise}},function(a,f,o){var p=o(7);a.exports=function(d,y){var g=p.console;g&&g.error&&(arguments.length==1?g.error(d):g.error(d,y))}},function(a,f){a.exports=function(o){try{return{error:!1,value:o()}}catch(p){return{error:!0,value:p}}}},function(a,f){a.exports=typeof window=="object"},function(a,f,o){var p=o(36),d=o(15),y=o(66),g=o(40),E=d(o(93).f),_=d([].push),T=function(P){return function(A){for(var N,M=g(A),L=y(M),z=L.length,$=0,ye=[];z>$;)N=L[$++],p&&!E(M,N)||_(ye,P?[N,M[N]]:M[N]);return ye}};a.exports={entries:T(!0),values:T(!1)}},function(a,f,o){var p=o(38),d=o(67),y=o(43);a.exports=function(g){for(var E=p(this),_=y(E),T=arguments.length,P=d(T>1?arguments[1]:void 0,_),A=T>2?arguments[2]:void 0,N=A===void 0?_:d(A,_);N>P;)E[P++]=g;return E}},function(a,f,o){o.r(f),o.d(f,"observer",function(){return hi}),o.d(f,"LogicFlow",function(){return og}),o.d(f,"h",function(){return _e.g}),o.d(f,"LogicFlowUtil",function(){return p}),o.d(f,"BaseNode",function(){return fa}),o.d(f,"RectNode",function(){return Zy}),o.d(f,"CircleNode",function(){return tv}),o.d(f,"PolygonNode",function(){return av}),o.d(f,"DiamondNode",function(){return fv}),o.d(f,"EllipseNode",function(){return yv}),o.d(f,"TextNode",function(){return mv}),o.d(f,"HtmlNode",function(){return Ov}),o.d(f,"BaseEdge",function(){return Qf}),o.d(f,"LineEdge",function(){return kv}),o.d(f,"PolylineEdge",function(){return Uv}),o.d(f,"BezierEdge",function(){return Vv}),o.d(f,"Arrow",function(){return dx}),o.d(f,"BaseEdgeModel",function(){return Gu}),o.d(f,"BezierEdgeModel",function(){return ay}),o.d(f,"LineEdgeModel",function(){return $o}),o.d(f,"PolylineEdgeModel",function(){return Vn}),o.d(f,"BaseNodeModel",function(){return ca}),o.d(f,"CircleNodeModel",function(){return py}),o.d(f,"DiamondNodeModel",function(){return gy}),o.d(f,"EllipseNodeModel",function(){return Ey}),o.d(f,"PolygonNodeModel",function(){return Ay}),o.d(f,"RectNodeModel",function(){return My}),o.d(f,"TextNodeModel",function(){return Iy}),o.d(f,"HtmlNodeModel",function(){return By}),o.d(f,"EditConfigModel",function(){return pf}),o.d(f,"GraphModel",function(){return Nt}),o.d(f,"SnaplineModel",function(){return wb}),o.d(f,"Keyboard",function(){return c0}),o.d(f,"get",function(){return dm}),o.d(f,"defaults",function(){return ym}),o.d(f,"ElementState",function(){return zr}),o.d(f,"ModelType",function(){return Pr}),o.d(f,"ElementType",function(){return xn}),o.d(f,"EventType",function(){return tr}),o.d(f,"formateAnchorConnectValidateData",function(){return Bu});var p={};o.r(p),o.d(p,"createUuid",function(){return fi}),o.d(p,"refreshGraphId",function(){return fp}),o.d(p,"createDrag",function(){return Jt}),o.d(p,"StepDrag",function(){return Yr});var d=o(1),y=o(10);if(!y.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!d.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var g=o(42),E=Object(g.b)("observerBatching");function _(e){e()}var T=!1;function P(){return T}function A(e){return Object(d.t)(e)}var N,M=1e4,L=new Set;function z(){N===void 0&&(N=setTimeout($,1e4))}function $(){N=void 0;var e=Date.now();L.forEach(function(t){var n=t.current;n&&e>=n.cleanAt&&(n.reaction.dispose(),t.current=null,L.delete(t))}),L.size>0&&z()}var ye=!1,Te=[],fe={};function ae(e){return"observer"+e}function pe(e,t,n){t===void 0&&(t="observed"),n===void 0&&(n=fe),P();var i,c=function(O){return function(){ye?Te.push(O):O()}}((n.useForceUpdate||g.d)()),s=y.d.useRef(null);if(!s.current){var l=new d.c(ae(t),function(){h.mounted?c():(l.dispose(),s.current=null)}),h=function(O){return{cleanAt:Date.now()+M,reaction:O}}(l);s.current=h,i=s,L.add(i),z()}var v=s.current.reaction;return y.d.useDebugValue(v,A),y.d.useEffect(function(){var O;return O=s,L.delete(O),s.current?s.current.mounted=!0:(s.current={reaction:new d.c(ae(t),function(){c()}),cleanAt:1/0},c()),function(){s.current.reaction.dispose(),s.current=null}},[]),function(O){ye=!0,Te=[];try{var w=O();ye=!1;var j=Te.length>0?Te:void 0;return y.d.useLayoutEffect(function(){j&&j.forEach(function(D){return D()})},[j]),w}finally{ye=!1}}(function(){var O,w;if(v.track(function(){try{O=e()}catch(j){w=j}}),w)throw w;return O})}var W=function(){return W=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},W.apply(this,arguments)};function F(e,t){var n,i,c,s=W({forwardRef:!1},t),l=e.displayName||e.name,h=function(v,O){return pe(function(){return e(v,O)},l)};return h.displayName=l,n=s.forwardRef?Object(y.f)(Object(y.e)(h)):Object(y.f)(h),i=e,c=n,Object.keys(i).forEach(function(v){Y[v]||Object.defineProperty(c,v,Object.getOwnPropertyDescriptor(i,v))}),n.displayName=l,n}var Y={$$typeof:!0,render:!0,compare:!0,type:!0};function V(e){var t=e.children,n=e.render,i=t||n;return typeof i!="function"?null:pe(i)}function q(e,t,n,i,c){var s=t==="children"?"render":"children",l=typeof e[t]=="function",h=typeof e[s]=="function";return l&&h?new Error("MobX Observer: Do not use children and render in the same time in`"+n):l||h?null:new Error("Invalid prop `"+c+"` of type `"+typeof e[t]+"` supplied to `"+n+"`, expected `function`.")}V.propTypes={children:q,render:q},V.displayName="Observer";var Oe;(Oe=y.g)||(Oe=_),Object(d.n)({reactionScheduler:Oe}),Object(g.a)()[E]=!0;var Ge=0,oe={};function ue(e){return oe[e]||(oe[e]=function(t){if(typeof Symbol=="function")return Symbol(t);var n="__$mobx-react "+t+" ("+Ge+")";return Ge++,n}(e)),oe[e]}function Ne(e,t){if(Re(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var c=0;c<n.length;c++)if(!Object.hasOwnProperty.call(t,n[c])||!Re(e[n[c]],t[n[c]]))return!1;return!0}function Re(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function se(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var je=ue("patchMixins"),He=ue("patchedDefinition");function ft(e,t){for(var n=this,i=arguments.length,c=new Array(i>2?i-2:0),s=2;s<i;s++)c[s-2]=arguments[s];t.locks++;try{var l;return e!=null&&(l=e.apply(this,c)),l}finally{t.locks--,t.locks===0&&t.methods.forEach(function(h){h.apply(n,c)})}}function Pt(e,t){return function(){for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];ft.call.apply(ft,[this,e,t].concat(i))}}function Yt(e,t,n){var i=function(h,v){var O=h[je]=h[je]||{},w=O[v]=O[v]||{};return w.locks=w.locks||0,w.methods=w.methods||[],w}(e,t);i.methods.indexOf(n)<0&&i.methods.push(n);var c=Object.getOwnPropertyDescriptor(e,t);if(!c||!c[He]){var s=e[t],l=bt(e,t,c?c.enumerable:void 0,i,s);Object.defineProperty(e,t,l)}}function bt(e,t,n,i,c){var s,l=Pt(c,i);return(s={})[He]=!0,s.get=function(){return l},s.set=function(h){if(this===e)l=Pt(h,i);else{var v=bt(this,t,n,i,h);Object.defineProperty(this,t,v)}},s.configurable=!0,s.enumerable=n,s}var xt=d.a||"$mobx",nr=ue("isMobXReactObserver"),ve=ue("isUnmounted"),de=ue("skipRender"),De=ue("isForcingUpdate");function ot(e){var t=e.prototype;if(e[nr]?Tt(t):e[nr]=!0,t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==y.b)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==rr)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=rr;pr(t,"props"),pr(t,"state");var n=t.render;return t.render=function(){return lt.call(this,n)},Yt(t,"componentWillUnmount",function(){var i;(i=this.render[xt])===null||i===void 0||i.dispose(),this[ve]=!0,!this.render[xt]&&Tt(this)}),e}function Tt(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function lt(e){var t=this;se(this,de,!1),se(this,De,!1);var n=Tt(this),i=e.bind(this),c=!1,s=new d.c(n+".render()",function(){if(!c&&(c=!0,t[ve]!==!0)){var h=!0;try{se(t,De,!0),t[de]||y.a.prototype.forceUpdate.call(t),h=!1}finally{se(t,De,!1),h&&s.dispose()}}});function l(){c=!1;var h=void 0,v=void 0;if(s.track(function(){try{v=Object(d.d)(!1,i)}catch(O){h=O}}),h)throw h;return v}return s.reactComponent=this,l[xt]=s,this.render=l,l.call(this)}function rr(e,t){return this.state!==t||!Ne(this.props,e)}function pr(e,t){var n=ue("reactProp_"+t+"_valueHolder"),i=ue("reactProp_"+t+"_atomHolder");function c(){return this[i]||se(this,i,Object(d.o)("reactive "+t)),this[i]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var s=!1;return d.f&&d.e&&(s=Object(d.f)(!0)),c.call(this).reportObserved(),d.f&&d.e&&Object(d.e)(s),this[n]},set:function(s){this[De]||Ne(this[n],s)?se(this,n,s):(se(this,n,s),se(this,de,!0),c.call(this).reportChanged(),se(this,de,!1))}})}var ar=typeof Symbol=="function"&&Symbol.for,Qt=ar?Symbol.for("react.forward_ref"):typeof y.e=="function"&&Object(y.e)(function(e){return null}).$$typeof,Ke=ar?Symbol.for("react.memo"):typeof y.f=="function"&&Object(y.f)(function(e){return null}).$$typeof;function Xt(e){if(e.isMobxInjector,Ke&&e.$$typeof===Ke)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Qt&&e.$$typeof===Qt){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Object(y.e)(function(){var n=arguments;return Object(y.c)(V,null,function(){return t.apply(void 0,n)})})}return typeof e!="function"||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(y.a,e)?ot(e):F(e)}if(!y.a)throw new Error("mobx-react requires React to be available");if(!d.C)throw new Error("mobx-react requires mobx to be available");var _e=o(0);o(3),o(60),o(2),o(6),o(4),o(11),o(39),o(22),o(20),o(5),o(23),o(21),o(25),o(8),o(9),o(16),o(24),o(18),o(29),o(188),o(193),o(103),o(152),o(153);var Ft=function(e,t){for(var n=-1,i=e==null?0:e.length,c=Array(i);++n<i;)c[n]=t(e[n],n,e);return c},_r=function(){this.__data__=[],this.size=0},k=function(e,t){return e===t||e!=e&&t!=t},gr=function(e,t){for(var n=e.length;n--;)if(k(e[n][0],t))return n;return-1},Cr=Array.prototype.splice,$r=function(e){var t=this.__data__,n=gr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Cr.call(t,n,1),--this.size,!0)},Zr=function(e){var t=this.__data__,n=gr(t,e);return n<0?void 0:t[n][1]},ur=function(e){return gr(this.__data__,e)>-1},sn=function(e,t){var n=this.__data__,i=gr(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function Q(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Q.prototype.clear=_r,Q.prototype.delete=$r,Q.prototype.get=Zr,Q.prototype.has=ur,Q.prototype.set=sn;var xe=Q,ie=function(){this.__data__=new xe,this.size=0},Le=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},jt=function(e){return this.__data__.get(e)},_t=function(e){return this.__data__.has(e)},Vt=o(31),Tr=Vt.a.Symbol,On=Object.prototype,kn=On.hasOwnProperty,pn=On.toString,bn=Tr?Tr.toStringTag:void 0,Gt=function(e){var t=kn.call(e,bn),n=e[bn];try{e[bn]=void 0;var i=!0}catch{}var c=pn.call(e);return i&&(t?e[bn]=n:delete e[bn]),c},er=Object.prototype.toString,lr=function(e){return er.call(e)},yr=Tr?Tr.toStringTag:void 0,Xr=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":yr&&yr in Object(e)?Gt(e):lr(e)},Ir=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},oi,Go=function(e){if(!Ir(e))return!1;var t=Xr(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Uo=Vt.a["__core-js_shared__"],Xi=(oi=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||""))?"Symbol(src)_1."+oi:"",Lc=function(e){return!!Xi&&Xi in e},cu=Function.prototype.toString,xo=function(e){if(e!=null){try{return cu.call(e)}catch{}try{return e+""}catch{}}return""},cs=/^\[object .+?Constructor\]$/,Wt=Function.prototype,fs=Object.prototype,tn=Wt.toString,ls=fs.hasOwnProperty,fo=RegExp("^"+tn.call(ls).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lo=function(e){return!(!Ir(e)||Lc(e))&&(Go(e)?fo:cs).test(xo(e))},ps=function(e,t){return e==null?void 0:e[t]},zo=function(e,t){var n=ps(e,t);return lo(n)?n:void 0},gi=zo(Vt.a,"Map"),Co=zo(Object,"create"),fu=function(){this.__data__=Co?Co(null):{},this.size=0},ds=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bc=Object.prototype.hasOwnProperty,_a=function(e){var t=this.__data__;if(Co){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Bc.call(t,e)?t[e]:void 0},Fc=Object.prototype.hasOwnProperty,hs=function(e){var t=this.__data__;return Co?t[e]!==void 0:Fc.call(t,e)},Gc=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Co&&t===void 0?"__lodash_hash_undefined__":t,this};function ii(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}ii.prototype.clear=fu,ii.prototype.delete=ds,ii.prototype.get=_a,ii.prototype.has=hs,ii.prototype.set=Gc;var ys=ii,Ho=function(){this.size=0,this.__data__={hash:new ys,map:new(gi||xe),string:new ys}},Uc=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Ea=function(e,t){var n=e.__data__;return Uc(t)?n[typeof t=="string"?"string":"hash"]:n.map},lu=function(e){var t=Ea(this,e).delete(e);return this.size-=t?1:0,t},pu=function(e){return Ea(this,e).get(e)},zc=function(e){return Ea(this,e).has(e)},vs=function(e,t){var n=Ea(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function mi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}mi.prototype.clear=Ho,mi.prototype.delete=lu,mi.prototype.get=pu,mi.prototype.has=zc,mi.prototype.set=vs;var bi=mi,gs=function(e,t){var n=this.__data__;if(n instanceof xe){var i=n.__data__;if(!gi||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new bi(i)}return n.set(e,t),this.size=n.size,this};function _i(e){var t=this.__data__=new xe(e);this.size=t.size}_i.prototype.clear=ie,_i.prototype.delete=Le,_i.prototype.get=jt,_i.prototype.has=_t,_i.prototype.set=gs;var po=_i,du=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ms=function(e){return this.__data__.has(e)};function Vi(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new bi;++t<n;)this.add(e[t])}Vi.prototype.add=Vi.prototype.push=du,Vi.prototype.has=ms;var Ei=Vi,hu=function(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},yu=function(e,t){return e.has(t)},Oa=function(e,t,n,i,c,s){var l=1&n,h=e.length,v=t.length;if(h!=v&&!(l&&v>h))return!1;var O=s.get(e),w=s.get(t);if(O&&w)return O==t&&w==e;var j=-1,D=!0,X=2&n?new Ei:void 0;for(s.set(e,t),s.set(t,e);++j<h;){var te=e[j],ce=t[j];if(i)var Se=l?i(ce,te,j,t,e,s):i(te,ce,j,e,t,s);if(Se!==void 0){if(Se)continue;D=!1;break}if(X){if(!hu(t,function(Pe,We){if(!yu(X,We)&&(te===Pe||c(te,Pe,n,i,s)))return X.push(We)})){D=!1;break}}else if(te!==ce&&!c(te,ce,n,i,s)){D=!1;break}}return s.delete(e),s.delete(t),D},Wi=Vt.a.Uint8Array,bs=function(e){var t=-1,n=Array(e.size);return e.forEach(function(i,c){n[++t]=[c,i]}),n},Hc=function(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n},_s=Tr?Tr.prototype:void 0,Yn=_s?_s.valueOf:void 0,An=function(e,t,n,i,c,s,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new Wi(e),new Wi(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return k(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=bs;case"[object Set]":var v=1&i;if(h||(h=Hc),e.size!=t.size&&!v)return!1;var O=l.get(e);if(O)return O==t;i|=2,l.set(e,t);var w=Oa(h(e),h(t),i,c,s,l);return l.delete(e),w;case"[object Symbol]":if(Yn)return Yn.call(e)==Yn.call(t)}return!1},ho=function(e,t){for(var n=-1,i=t.length,c=e.length;++n<i;)e[c+n]=t[n];return e},Gn=Array.isArray,Es=function(e,t,n){var i=t(e);return Gn(e)?i:ho(i,n(e))},vu=function(e,t){for(var n=-1,i=e==null?0:e.length,c=0,s=[];++n<i;){var l=e[n];t(l,n,e)&&(s[c++]=l)}return s},gu=function(){return[]},Xc=Object.prototype.propertyIsEnumerable,ai=Object.getOwnPropertySymbols,ro=ai?function(e){return e==null?[]:(e=Object(e),vu(ai(e),function(t){return Xc.call(e,t)}))}:gu,Vc=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i},So=function(e){return e!=null&&typeof e=="object"},yo=function(e){return So(e)&&Xr(e)=="[object Arguments]"},Os=Object.prototype,ws=Os.hasOwnProperty,Wc=Os.propertyIsEnumerable,wa=yo(function(){return arguments}())?yo:function(e){return So(e)&&ws.call(e,"callee")&&!Wc.call(e,"callee")},Xo=wa,vo=o(48),Yc=/^(?:0|[1-9]\d*)$/,$n=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&Yc.test(e))&&e>-1&&e%1==0&&e<t},To=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Rr={};Rr["[object Float32Array]"]=Rr["[object Float64Array]"]=Rr["[object Int8Array]"]=Rr["[object Int16Array]"]=Rr["[object Int32Array]"]=Rr["[object Uint8Array]"]=Rr["[object Uint8ClampedArray]"]=Rr["[object Uint16Array]"]=Rr["[object Uint32Array]"]=!0,Rr["[object Arguments]"]=Rr["[object Array]"]=Rr["[object ArrayBuffer]"]=Rr["[object Boolean]"]=Rr["[object DataView]"]=Rr["[object Date]"]=Rr["[object Error]"]=Rr["[object Function]"]=Rr["[object Map]"]=Rr["[object Number]"]=Rr["[object Object]"]=Rr["[object RegExp]"]=Rr["[object Set]"]=Rr["[object String]"]=Rr["[object WeakMap]"]=!1;var no=function(e){return So(e)&&To(e.length)&&!!Rr[Xr(e)]},Vo=function(e){return function(t){return e(t)}},Ln=o(49),xa=Ln.a&&Ln.a.isTypedArray,Yi=xa?Vo(xa):no,Io=Object.prototype.hasOwnProperty,Kn=function(e,t){var n=Gn(e),i=!n&&Xo(e),c=!n&&!i&&Object(vo.a)(e),s=!n&&!i&&!c&&Yi(e),l=n||i||c||s,h=l?Vc(e.length,String):[],v=h.length;for(var O in e)!t&&!Io.call(e,O)||l&&(O=="length"||c&&(O=="offset"||O=="parent")||s&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||$n(O,v))||h.push(O);return h},mu=Object.prototype,$i=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||mu)},Ao=function(e,t){return function(n){return e(t(n))}},xs=Ao(Object.keys,Object),$c=Object.prototype.hasOwnProperty,bu=function(e){if(!$i(e))return xs(e);var t=[];for(var n in Object(e))$c.call(e,n)&&n!="constructor"&&t.push(n);return t},_n=function(e){return e!=null&&To(e.length)&&!Go(e)},Oi=function(e){return _n(e)?Kn(e):bu(e)},Sa=function(e){return Es(e,Oi,ro)},Pn=Object.prototype.hasOwnProperty,Ss=function(e,t,n,i,c,s){var l=1&n,h=Sa(e),v=h.length;if(v!=Sa(t).length&&!l)return!1;for(var O=v;O--;){var w=h[O];if(!(l?w in t:Pn.call(t,w)))return!1}var j=s.get(e),D=s.get(t);if(j&&D)return j==t&&D==e;var X=!0;s.set(e,t),s.set(t,e);for(var te=l;++O<v;){var ce=e[w=h[O]],Se=t[w];if(i)var Pe=l?i(Se,ce,w,t,e,s):i(ce,Se,w,e,t,s);if(!(Pe===void 0?ce===Se||c(ce,Se,n,i,s):Pe)){X=!1;break}te||(te=w=="constructor")}if(X&&!te){var We=e.constructor,st=t.constructor;We==st||!("constructor"in e)||!("constructor"in t)||typeof We=="function"&&We instanceof We&&typeof st=="function"&&st instanceof st||(X=!1)}return s.delete(e),s.delete(t),X},Ki=zo(Vt.a,"DataView"),Wo=zo(Vt.a,"Promise"),Ta=zo(Vt.a,"Set"),ko=zo(Vt.a,"WeakMap"),_u="[object Map]",jn="[object Promise]",oo="[object Set]",io="[object WeakMap]",qi="[object DataView]",Eu=xo(Ki),Ou=xo(gi),Ts=xo(Wo),As=xo(Ta),Aa=xo(ko),ui=Xr;(Ki&&ui(new Ki(new ArrayBuffer(1)))!=qi||gi&&ui(new gi)!=_u||Wo&&ui(Wo.resolve())!=jn||Ta&&ui(new Ta)!=oo||ko&&ui(new ko)!=io)&&(ui=function(e){var t=Xr(e),n=t=="[object Object]"?e.constructor:void 0,i=n?xo(n):"";if(i)switch(i){case Eu:return qi;case Ou:return _u;case Ts:return jn;case As:return oo;case Aa:return io}return t});var m=ui,b="[object Arguments]",S="[object Array]",C="[object Object]",K=Object.prototype.hasOwnProperty,Ee=function(e,t,n,i,c,s){var l=Gn(e),h=Gn(t),v=l?S:m(e),O=h?S:m(t),w=(v=v==b?C:v)==C,j=(O=O==b?C:O)==C,D=v==O;if(D&&Object(vo.a)(e)){if(!Object(vo.a)(t))return!1;l=!0,w=!1}if(D&&!w)return s||(s=new po),l||Yi(e)?Oa(e,t,n,i,c,s):An(e,t,v,n,i,c,s);if(!(1&n)){var X=w&&K.call(e,"__wrapped__"),te=j&&K.call(t,"__wrapped__");if(X||te){var ce=X?e.value():e,Se=te?t.value():t;return s||(s=new po),c(ce,Se,n,i,s)}}return!!D&&(s||(s=new po),Ss(e,t,n,i,c,s))},ze=function e(t,n,i,c,s){return t===n||(t==null||n==null||!So(t)&&!So(n)?t!=t&&n!=n:Ee(t,n,i,c,e,s))},vt=function(e,t,n,i){var c=n.length,s=c,l=!i;if(e==null)return!s;for(e=Object(e);c--;){var h=n[c];if(l&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++c<s;){var v=(h=n[c])[0],O=e[v],w=h[1];if(l&&h[2]){if(O===void 0&&!(v in e))return!1}else{var j=new po;if(i)var D=i(O,w,v,e,t,j);if(!(D===void 0?ze(w,O,3,i,j):D))return!1}}return!0},Ut=function(e){return e==e&&!Ir(e)},Ar=function(e){for(var t=Oi(e),n=t.length;n--;){var i=t[n],c=e[i];t[n]=[i,c,Ut(c)]}return t},sr=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},Gr=function(e){var t=Ar(e);return t.length==1&&t[0][2]?sr(t[0][0],t[0][1]):function(n){return n===e||vt(n,e,t)}},Or=function(e){return typeof e=="symbol"||So(e)&&Xr(e)=="[object Symbol]"},Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ao=/^\w*$/,rn=function(e,t){if(Gn(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Or(e))||ao.test(e)||!Ur.test(e)||t!=null&&e in Object(t)};function qn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var i=arguments,c=t?t.apply(this,i):i[0],s=n.cache;if(s.has(c))return s.get(c);var l=e.apply(this,i);return n.cache=s.set(c,l)||s,l};return n.cache=new(qn.Cache||bi),n}qn.Cache=bi;var Zi=qn,Kc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pa=/\\(\\)?/g,Qi=function(e){var t=Zi(e,function(i){return n.size===500&&n.clear(),i}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Kc,function(n,i,c,s){t.push(c?s.replace(Pa,"$1"):i||n)}),t}),wi=Tr?Tr.prototype:void 0,Ji=wi?wi.toString:void 0,wn=function e(t){if(typeof t=="string")return t;if(Gn(t))return Ft(t,e)+"";if(Or(t))return Ji?Ji.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},ja=function(e){return e==null?"":wn(e)},si=function(e,t){return Gn(e)?e:rn(e,t)?[e]:Qi(ja(e))},ea=function(e){if(typeof e=="string"||Or(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},wu=function(e,t){for(var n=0,i=(t=si(t,e)).length;e!=null&&n<i;)e=e[ea(t[n++])];return n&&n==i?e:void 0},qc=function(e,t,n){var i=e==null?void 0:wu(e,t);return i===void 0?n:i},xl=function(e,t){return e!=null&&t in Object(e)},Sl=function(e,t,n){for(var i=-1,c=(t=si(t,e)).length,s=!1;++i<c;){var l=ea(t[i]);if(!(s=e!=null&&n(e,l)))break;e=e[l]}return s||++i!=c?s:!!(c=e==null?0:e.length)&&To(c)&&$n(l,c)&&(Gn(e)||Xo(e))},Zc=function(e,t){return e!=null&&Sl(e,t,xl)},Tl=function(e,t){return rn(e)&&Ut(t)?sr(ea(e),t):function(n){var i=qc(n,e);return i===void 0&&i===t?Zc(n,e):ze(t,i,3)}},Ps=function(e){return e},Al=function(e){return function(t){return t==null?void 0:t[e]}},Pl=function(e){return function(t){return wu(t,e)}},Na=function(e){return rn(e)?Al(ea(e)):Pl(e)},Qc=function(e){return typeof e=="function"?e:e==null?Ps:typeof e=="object"?Gn(e)?Tl(e[0],e[1]):Gr(e):Na(e)},js=function(e){return function(t,n,i){for(var c=-1,s=Object(t),l=i(t),h=l.length;h--;){var v=l[e?h:++c];if(n(s[v],v,s)===!1)break}return t}}(),xu=function(e,t){return function(n,i){if(n==null)return n;if(!_n(n))return e(n,i);for(var c=n.length,s=t?c:-1,l=Object(n);(t?s--:++s<c)&&i(l[s],s,l)!==!1;);return n}}(function(e,t){return e&&js(e,t,Oi)}),sh=function(e,t){var n=-1,i=_n(e)?Array(e.length):[];return xu(e,function(c,s,l){i[++n]=t(c,s,l)}),i},Ns=function(e,t){return(Gn(e)?Ft:sh)(e,Qc(t))};Object(d.n)({isolateGlobalState:!0});var Ms=function(){try{var e=zo(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Su=function(e,t,n){t=="__proto__"&&Ms?Ms(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ch=Object.prototype.hasOwnProperty,Rs=function(e,t,n){var i=e[t];ch.call(e,t)&&k(i,n)&&(n!==void 0||t in e)||Su(e,t,n)},Ma=function(e,t,n,i){var c=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var h=t[s],v=i?i(n[h],e[h],h,n,e):void 0;v===void 0&&(v=e[h]),c?Su(n,h,v):Rs(n,h,v)}return n},Jc=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},jl=Math.max,Ds=function(e,t,n){return t=jl(t===void 0?e.length-1:t,0),function(){for(var i=arguments,c=-1,s=jl(i.length-t,0),l=Array(s);++c<s;)l[c]=i[t+c];c=-1;for(var h=Array(t+1);++c<t;)h[c]=i[c];return h[t]=n(l),Jc(e,this,h)}},Nl=function(e){return function(){return e}},Ml=Ms?function(e,t){return Ms(e,"toString",{configurable:!0,enumerable:!1,value:Nl(t),writable:!0})}:Ps,ef=Date.now,fh=function(e){var t=0,n=0;return function(){var i=ef(),c=16-(i-n);if(n=i,c>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Tu=fh(Ml),lh=function(e,t){return Tu(Ds(e,t,Ps),e+"")},ph=function(e,t,n){if(!Ir(n))return!1;var i=typeof t;return!!(i=="number"?_n(n)&&$n(t,n.length):i=="string"&&t in n)&&k(n[t],e)},Rl=function(e){return lh(function(t,n){var i=-1,c=n.length,s=c>1?n[c-1]:void 0,l=c>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(c--,s):void 0,l&&ph(n[0],n[1],l)&&(s=c<3?void 0:s,c=1),t=Object(t);++i<c;){var h=n[i];h&&e(t,h,i,s)}return t})},dh=Object.prototype.hasOwnProperty,Zn=Rl(function(e,t){if($i(t)||_n(t))Ma(t,Oi(t),e);else for(var n in t)dh.call(t,n)&&Rs(e,n,t[n])}),hh=function(e,t,n,i){if(!Ir(e))return e;for(var c=-1,s=(t=si(t,e)).length,l=s-1,h=e;h!=null&&++c<s;){var v=ea(t[c]),O=n;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(c!=l){var w=h[v];(O=i?i(w,v,h):void 0)===void 0&&(O=Ir(w)?w:$n(t[c+1])?[]:{})}Rs(h,v,O),h=h[v]}return e},yh=function(e,t,n){for(var i=-1,c=t.length,s={};++i<c;){var l=t[i],h=wu(e,l);n(h,l)&&hh(s,si(l,e),h)}return s},Dl=function(e,t){return yh(e,t,function(n,i){return Zc(e,i)})},Ra=Tr?Tr.isConcatSpreadable:void 0,vh=function(e){return Gn(e)||Xo(e)||!!(Ra&&e&&e[Ra])},Cs=function e(t,n,i,c,s){var l=-1,h=t.length;for(i||(i=vh),s||(s=[]);++l<h;){var v=t[l];n>0&&i(v)?n>1?e(v,n-1,i,c,s):ho(s,v):c||(s[s.length]=v)}return s},Po=function(e){return e!=null&&e.length?Cs(e,1):[]},Qr,tf,rf,nf,of,af,uf,Cl,ta,Nn,sf,cf,xi,ff,lf,Il,kl,Ll,Au=function(e){return Tu(Ds(e,void 0,Po),e+"")}(function(e,t){return e==null?{}:Dl(e,t)});function Mn(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Bl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var zr,Gl,Pr,xn,tr,Kr,Ul={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Is=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],pf=(tf=Rn((Qr=function(){function e(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,e),Mn(this,"isSilentMode",tf,this),Mn(this,"stopZoomGraph",rf,this),Mn(this,"stopScrollGraph",nf,this),Mn(this,"stopMoveGraph",of,this),Mn(this,"adjustEdge",af,this),Mn(this,"adjustEdgeMiddle",uf,this),Mn(this,"adjustEdgeStartAndEnd",Cl,this),Mn(this,"adjustNodePosition",ta,this),Mn(this,"hideAnchors",Nn,this),Mn(this,"hoverOutline",sf,this),Mn(this,"nodeSelectedOutline",cf,this),Mn(this,"edgeSelectedOutline",xi,this),Mn(this,"nodeTextEdit",ff,this),Mn(this,"edgeTextEdit",lf,this),Mn(this,"nodeTextDraggable",Il,this),Mn(this,"edgeTextDraggable",kl,this),Mn(this,"autoExpand",Ll,this),Fl(this,"multipleSelectKey",""),Fl(this,"defaultConfig",{}),Zn(this,this.getConfigDetail(i))}var t,n;return t=e,(n=[{key:"updateEditConfig",value:function(i){var c=this.getConfigDetail(i);Zn(this,c)}},{key:"getConfigDetail",value:function(i){var c=i.isSilentMode,s=i.textEdit,l={};if(c===!1&&Zn(l,this.defaultConfig),c===!0){var h=Au(Ul,Is);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Zn(l,h)}s===!1&&Zn(l,{nodeTextEdit:!1,edgeTextEdit:!1});var v=Au(i,Is);return Zn(l,v)}},{key:"getConfig",value:function(){return Au(this,Is)}}])&&Bl(t.prototype,n),e}()).prototype,"isSilentMode",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rf=Rn(Qr.prototype,"stopZoomGraph",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nf=Rn(Qr.prototype,"stopScrollGraph",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),of=Rn(Qr.prototype,"stopMoveGraph",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),af=Rn(Qr.prototype,"adjustEdge",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uf=Rn(Qr.prototype,"adjustEdgeMiddle",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cl=Rn(Qr.prototype,"adjustEdgeStartAndEnd",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ta=Rn(Qr.prototype,"adjustNodePosition",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Nn=Rn(Qr.prototype,"hideAnchors",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sf=Rn(Qr.prototype,"hoverOutline",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cf=Rn(Qr.prototype,"nodeSelectedOutline",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xi=Rn(Qr.prototype,"edgeSelectedOutline",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ff=Rn(Qr.prototype,"nodeTextEdit",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lf=Rn(Qr.prototype,"edgeTextEdit",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Il=Rn(Qr.prototype,"nodeTextDraggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kl=Rn(Qr.prototype,"edgeTextDraggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ll=Rn(Qr.prototype,"autoExpand",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rn(Qr.prototype,"updateEditConfig",[d.k],Object.getOwnPropertyDescriptor(Qr.prototype,"updateEditConfig"),Qr.prototype),Qr);o(63),function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"}(Gl||(Gl={})),function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"}(Pr||(Pr={})),function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"}(xn||(xn={})),function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"}(tr||(tr={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(Kr||(Kr={}));var uo,dn,df,hf,yf,vf,jo,gf,zl;function No(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return ks(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ks(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ks(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function go(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Ls(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mo(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(uo||(uo={}));var Hl=(dn=function(){function e(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,e),Bs(this,"MINI_SCALE_SIZE",.2),Bs(this,"MAX_SCALE_SIZE",16),go(this,"SCALE_X",df,this),go(this,"SKEW_Y",hf,this),go(this,"SKEW_X",yf,this),go(this,"SCALE_Y",vf,this),go(this,"TRANSLATE_X",jo,this),go(this,"TRANSLATE_Y",gf,this),go(this,"ZOOM_SIZE",zl,this),Bs(this,"eventCenter",void 0),this.eventCenter=i}var t,n;return t=e,n=[{key:"setZoomMiniSize",value:function(i){this.MINI_SCALE_SIZE=i}},{key:"setZoomMaxSize",value:function(i){this.MAX_SCALE_SIZE=i}},{key:"HtmlPointToCanvasPoint",value:function(i){var c=No(i,2),s=c[0],l=c[1];return[(s-this.TRANSLATE_X)/this.SCALE_X,(l-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(i){var c=No(i,2),s=c[0],l=c[1];return[s*this.SCALE_X+this.TRANSLATE_X,l*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(i,c,s){var l=No(i,2),h=l[0],v=l[1];return[h+c/this.SCALE_X,v+s/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(i,c){return[i/this.SCALE_X,c/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var i=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(i,")")}}},{key:"zoom",value:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],c=arguments.length>1?arguments[1]:void 0,s=this.SCALE_X,l=this.SCALE_Y;return i===!0?(s+=this.ZOOM_SIZE,l+=this.ZOOM_SIZE):i===!1?(s-=this.ZOOM_SIZE,l-=this.ZOOM_SIZE):typeof i=="number"&&(s=i,l=i),s<this.MINI_SCALE_SIZE||s>this.MAX_SCALE_SIZE||(c&&(this.TRANSLATE_X-=(s-this.SCALE_X)*c[0],this.TRANSLATE_Y-=(l-this.SCALE_Y)*c[1]),this.SCALE_X=s,this.SCALE_Y=l,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(i){this.eventCenter.emit(tr.GRAPH_TRANSFORM,{type:i,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(i,c){this.TRANSLATE_X+=i,this.TRANSLATE_Y+=c,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(i,c,s,l){var h=No(this.CanvasPointToHtmlPoint([i,c]),2),v=s/2-h[0],O=l/2-h[1];this.TRANSLATE_X+=v,this.TRANSLATE_Y+=O,this.emitGraphTransform("focusOn")}}],n&&Ls(t.prototype,n),e}(),df=Mo(dn.prototype,"SCALE_X",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),hf=Mo(dn.prototype,"SKEW_Y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yf=Mo(dn.prototype,"SKEW_X",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vf=Mo(dn.prototype,"SCALE_Y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),jo=Mo(dn.prototype,"TRANSLATE_X",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gf=Mo(dn.prototype,"TRANSLATE_Y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zl=Mo(dn.prototype,"ZOOM_SIZE",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Mo(dn.prototype,"zoom",[d.k],Object.getOwnPropertyDescriptor(dn.prototype,"zoom"),dn.prototype),Mo(dn.prototype,"resetZoom",[d.k],Object.getOwnPropertyDescriptor(dn.prototype,"resetZoom"),dn.prototype),Mo(dn.prototype,"translate",[d.k],Object.getOwnPropertyDescriptor(dn.prototype,"translate"),dn.prototype),Mo(dn.prototype,"focusOn",[d.k],Object.getOwnPropertyDescriptor(dn.prototype,"focusOn"),dn.prototype),dn),Xl=function(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e},Vl=function(e,t){return e&&Ma(t,Oi(t),e)},gh=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},mh=Object.prototype.hasOwnProperty,bh=function(e){if(!Ir(e))return gh(e);var t=$i(e),n=[];for(var i in e)(i!="constructor"||!t&&mh.call(e,i))&&n.push(i);return n},Pu=function(e){return _n(e)?Kn(e,!0):bh(e)},_h=function(e,t){return e&&Ma(t,Pu(t),e)},Wl=o(106),Yl=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t},$l=function(e,t){return Ma(e,ro(e),t)},Fs=Ao(Object.getPrototypeOf,Object),Kl=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ho(t,ro(e)),e=Fs(e);return t}:gu,Eh=function(e,t){return Ma(e,Kl(e),t)},mf=function(e){return Es(e,Pu,Kl)},Gs=Object.prototype.hasOwnProperty,Oh=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Gs.call(e,"index")&&(n.index=e.index,n.input=e.input),n},bf=function(e){var t=new e.constructor(e.byteLength);return new Wi(t).set(new Wi(e)),t},wh=function(e,t){var n=t?bf(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},xh=/\w*$/,Sh=function(e){var t=new e.constructor(e.source,xh.exec(e));return t.lastIndex=e.lastIndex,t},_f=Tr?Tr.prototype:void 0,ql=_f?_f.valueOf:void 0,Th=function(e){return ql?Object(ql.call(e)):{}},Zl=function(e,t){var n=t?bf(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Ah=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return bf(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return wh(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Zl(e,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return Sh(e);case"[object Symbol]":return Th(e)}},Ql=Object.create,Da=function(){function e(){}return function(t){if(!Ir(t))return{};if(Ql)return Ql(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Jl=function(e){return typeof e.constructor!="function"||$i(e)?{}:Da(Fs(e))},Ph=function(e){return So(e)&&m(e)=="[object Map]"},Ef=Ln.a&&Ln.a.isMap,Of=Ef?Vo(Ef):Ph,jh=function(e){return So(e)&&m(e)=="[object Set]"},wf=Ln.a&&Ln.a.isSet,Nh=wf?Vo(wf):jh,ep="[object Arguments]",tp="[object Function]",Mh="[object Object]",Jr={};Jr[ep]=Jr["[object Array]"]=Jr["[object ArrayBuffer]"]=Jr["[object DataView]"]=Jr["[object Boolean]"]=Jr["[object Date]"]=Jr["[object Float32Array]"]=Jr["[object Float64Array]"]=Jr["[object Int8Array]"]=Jr["[object Int16Array]"]=Jr["[object Int32Array]"]=Jr["[object Map]"]=Jr["[object Number]"]=Jr["[object Object]"]=Jr["[object RegExp]"]=Jr["[object Set]"]=Jr["[object String]"]=Jr["[object Symbol]"]=Jr["[object Uint8Array]"]=Jr["[object Uint8ClampedArray]"]=Jr["[object Uint16Array]"]=Jr["[object Uint32Array]"]=!0,Jr["[object Error]"]=Jr[tp]=Jr["[object WeakMap]"]=!1;var ju=function e(t,n,i,c,s,l){var h,v=1&n,O=2&n,w=4&n;if(i&&(h=s?i(t,c,s,l):i(t)),h!==void 0)return h;if(!Ir(t))return t;var j=Gn(t);if(j){if(h=Oh(t),!v)return Yl(t,h)}else{var D=m(t),X=D==tp||D=="[object GeneratorFunction]";if(Object(vo.a)(t))return Object(Wl.a)(t,v);if(D==Mh||D==ep||X&&!s){if(h=O||X?{}:Jl(t),!v)return O?Eh(t,_h(h,t)):$l(t,Vl(h,t))}else{if(!Jr[D])return s?t:{};h=Ah(t,D,v)}}l||(l=new po);var te=l.get(t);if(te)return te;l.set(t,h),Nh(t)?t.forEach(function(Se){h.add(e(Se,n,i,Se,t,l))}):Of(t)&&t.forEach(function(Se,Pe){h.set(Pe,e(Se,n,i,Pe,t,l))});var ce=j?void 0:(w?O?mf:Sa:O?Pu:Oi)(t);return Xl(ce||t,function(Se,Pe){ce&&(Se=t[Pe=Se]),Rs(h,Pe,e(Se,n,i,Pe,t,l))}),h},nn=function(e){return ju(e,5)},Ca=function(e,t,n){(n!==void 0&&!k(e[t],n)||n===void 0&&!(t in e))&&Su(e,t,n)},Rh=function(e){return So(e)&&_n(e)},Ia=Function.prototype,ka=Object.prototype,rp=Ia.toString,La=ka.hasOwnProperty,np=rp.call(Object),Ba=function(e){if(!So(e)||Xr(e)!="[object Object]")return!1;var t=Fs(e);if(t===null)return!0;var n=La.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&rp.call(n)==np},Nu=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},xf=function(e){return Ma(e,Pu(e))},Sf=function(e,t,n,i,c,s,l){var h=Nu(e,n),v=Nu(t,n),O=l.get(v);if(O)Ca(e,n,O);else{var w=s?s(h,v,n+"",e,t,l):void 0,j=w===void 0;if(j){var D=Gn(v),X=!D&&Object(vo.a)(v),te=!D&&!X&&Yi(v);w=v,D||X||te?Gn(h)?w=h:Rh(h)?w=Yl(h):X?(j=!1,w=Object(Wl.a)(v,!0)):te?(j=!1,w=Zl(v,!0)):w=[]:Ba(v)||Xo(v)?(w=h,Xo(h)?w=xf(h):Ir(h)&&!Go(h)||(w=Jl(v))):j=!1}j&&(l.set(v,w),c(w,v,i,s,l),l.delete(v)),Ca(e,n,w)}},Tf=function e(t,n,i,c,s){t!==n&&js(n,function(l,h){if(s||(s=new po),Ir(l))Sf(t,n,h,i,e,c,s);else{var v=c?c(Nu(t,h),l,h+"",t,n,s):void 0;v===void 0&&(v=l),Ca(t,h,v)}},Pu)},Us=Rl(function(e,t,n){Tf(e,t,n)}),zs={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},Af=function(e){var t=nn(zs);return e&&(t=Us(t,e)),t};o(77),o(158);function op(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ip=function(){function e(){var i,c,s;(function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")})(this,e),s={},(c="_events")in(i=this)?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s}var t,n;return t=e,(n=[{key:"on",value:function(i,c,s){var l=this;return i==null||i.split(",").forEach(function(h){h=h.trim(),l._events[h]||(l._events[h]=[]),l._events[h].push({callback:c,once:!!s})}),this}},{key:"once",value:function(i,c){var s=this;i==null||i.split(",").forEach(function(l){return l=l.trim(),s.on(l,c,!0)})}},{key:"emit",value:function(i,c){var s=this;i==null||i.split(",").forEach(function(l){var h=s._events[l]||[],v=s._events["*"]||[],O=function(w){for(var j=w.length,D=0;D<j;D++)if(w[D]){var X=w[D],te=X.callback;X.once&&(w.splice(D,1),w.length===0&&delete s._events[l],j--,D--),te.apply(s,[c])}};O(h),O(v)})}},{key:"off",value:function(i,c){var s=this;return i||(this._events={}),i.split(",").forEach(function(l){if(c){for(var h=s._events[l]||[],v=h.length,O=0;O<v;O++)h[O].callback===c&&(h.splice(O,1),v--,O--);h.length===0&&delete s._events[l]}else delete s._events[l]}),this}},{key:"getEvents",value:function(){return this._events}}])&&op(t.prototype,n),e}();function ci(e,t){return t*Math.round(e/t)||e}function Pf(e,t){return e%t}function Mu(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Hs(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Hs(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hs(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Xs,Vs=function(e,t,n){var i=Mu(e,2),c=i[0],s=i[1],l=Mu(t,2),h=l[0],v=l[1],O=Mu(n,2),w=O[0],j=O[1];return c>h&&c<w&&s>v&&s<j},jf=function(e,t){var n=!1;switch(t.multipleSelectKey){case"meta":n=e.metaKey;break;case"alt":n=e.altKey;break;case"shift":n=e.shiftKey;break;case"ctrl":n=e.ctrlKey;break;default:n=!1}return n},ap=(o(78),o(161),o(125),o(79),o(30),o(12),o(13),o(14),o(47),new Uint8Array(16));function Nf(){if(!Xs&&!(Xs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xs(ap)}for(var up=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,sp=function(e){return typeof e=="string"&&up.test(e)},Dn=[],Ru=0;Ru<256;++Ru)Dn.push((Ru+256).toString(16).substr(1));var cp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Dn[e[t+0]]+Dn[e[t+1]]+Dn[e[t+2]]+Dn[e[t+3]]+"-"+Dn[e[t+4]]+Dn[e[t+5]]+"-"+Dn[e[t+6]]+Dn[e[t+7]]+"-"+Dn[e[t+8]]+Dn[e[t+9]]+"-"+Dn[e[t+10]]+Dn[e[t+11]]+Dn[e[t+12]]+Dn[e[t+13]]+Dn[e[t+14]]+Dn[e[t+15]]).toLowerCase();if(!sp(n))throw TypeError("Stringified UUID is invalid");return n},Du=function(e,t,n){var i=(e=e||{}).random||(e.rng||Nf)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var c=0;c<16;++c)t[n+c]=i[c];return t}return cp(i)},fi=function(){return Du()},fp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e.nodes.reduce(function(i,c){return i[c.id]=t+Du(),c.id=i[c.id],i},{});return e.edges.forEach(function(i){i.id=t+Du(),i.sourceNodeId=n[i.sourceNodeId],i.targetNodeId=n[i.targetNodeId]}),e},ra=(o(104),o(162),function(e,t,n){var i=e.x,c=e.y;return(i-t.x)*(i-n.x)<=0&&(c-t.y)*(c-n.y)<=0});function Ws(e){return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Ys(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mf(Object(n),!0).forEach(function(i){Rf(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et,Df,Cu,Yo,Fa,Si,Ga,Ua,Ti,Ai,Pi,Iu,ku,za,$s,Ks,na,oa,lp,pp,Cf,qs=function(e){return e.anchors},Lu=function(e,t){for(var n,i=t.nodes,c=i.length-1;c>=0;c--){var s=i[c];if(Ch(e,s)){var l=s.getTargetAnchor(e);if(l){var h={node:s,anchorIndex:l.index,anchor:l.anchor};n&&!Dh(s,n.node,t)||(n=h)}}}return n},Dh=function(e,t,n){return e.zIndex>t.zIndex||n.nodesMap[e.id].index>n.nodesMap[t.id].index},Qn=function(e,t,n,i){return Math.hypot(e-n,t-i)},ji=function(e,t){var n=!1,i=mo(t);return e.x>=i.minX-0&&e.x<=i.maxX+0&&e.y>=i.minY-0&&e.y<=i.maxY+0&&(n=!0),n},Ch=function(e,t){var n=!1,i=mo(t);return e.x>=i.minX-5&&e.x<=i.maxX+5&&e.y>=i.minY-5&&e.y<=i.maxY+5&&(n=!0),n},mo=function(e){var t=e.x,n=e.y,i=e.width,c=e.height;return{minX:t-i/2,minY:n-c/2,maxX:t+i/2,maxY:n+c/2,x:t,y:n,width:i,height:c,centerX:t,centerY:n}},If=function(e,t,n){var i,c=function(l){var h=l,v=h.x,O=h.y,w=h.width,j=h.height,D=h.radius;return[{x:v-w/2+D,y:O-j/2+D,r:D},{x:v+w/2-D,y:O-j/2+D,r:D},{x:v-w/2+D,y:O+j/2-D,r:D},{x:v+w/2-D,y:O+j/2-D,r:D}]}(n),s=Number.MAX_SAFE_INTEGER;return c.forEach(function(l){var h=Qn(e.x,e.y,l.x,l.y);h<s&&(s=h,i=l)}),kf(e,t,i)},kf=function(e,t,n){var i,c=n,s=c.x,l=c.y,h=c.r;if(t===Kr.HORIZONTAL){var v=s-Math.sqrt(h*h-(e.y-l)*(e.y-l)),O=s+Math.sqrt(h*h-(e.y-l)*(e.y-l));i={x:Math.abs(v-e.x)<Math.abs(O-e.x)?v:O,y:e.y}}else if(t===Kr.VERTICAL){var w=l-Math.sqrt(h*h-(e.x-s)*(e.x-s)),j=l+Math.sqrt(h*h-(e.x-s)*(e.x-s)),D=Math.abs(w-e.y)<Math.abs(j-e.y)?w:j;i={x:e.x,y:D}}return i},dp=function(e,t){var n=t,i=!1,c=n.x-n.width/2+n.radius,s=n.x+n.width/2-n.radius,l=n.y-n.height/2+n.radius,h=n.y+n.height/2-n.radius,v=n.x,O=n.y,w=n.width,j=n.height;return e.y===O+j/2||e.y===O-j/2?i=e.x>c&&e.x<s:e.x!==v+w/2&&e.x!==v-w/2||(i=e.y>l&&e.y<h),i},hp=function(e,t,n){var i,c=n,s=c.x,l=c.y,h=c.rx,v=c.ry;if(t===Kr.HORIZONTAL){var O=s-Math.sqrt(h*h-(e.y-l)*(e.y-l)*h*h/(v*v)),w=s+Math.sqrt(h*h-(e.y-l)*(e.y-l)*h*h/(v*v));i={x:Math.abs(O-e.x)<Math.abs(w-e.x)?O:w,y:e.y}}else if(t===Kr.VERTICAL){var j=l-Math.sqrt(v*v-(e.x-s)*(e.x-s)*v*v/(h*h)),D=l+Math.sqrt(v*v-(e.x-s)*(e.x-s)*v*v/(h*h)),X=Math.abs(j-e.y)<Math.abs(D-e.y)?j:D;i={x:e.x,y:X}}return i},yp=function(e,t,n){for(var i,c=n.pointsPosition,s=Number.MAX_SAFE_INTEGER,l=[],h=0;h<c.length;h++)l.push({start:c[h],end:c[(h+1)%c.length]});return l.forEach(function(v){var O=v.start,w=v.end,j=O,D=w;O.x>w.x&&(j=w,D=O);var X={x:e.x,y:e.y};if(j.x===D.x&&t===Kr.HORIZONTAL&&(X={x:j.x,y:e.y}),j.y===D.y&&t===Kr.VERTICAL&&(X={x:e.x,y:j.y}),j.x!==D.x&&j.y!==D.y){var te=(D.y-j.y)/(D.x-j.x),ce=(j.x*D.y-D.x*j.y)/(j.x-D.x);t===Kr.HORIZONTAL?X={x:(e.y-ce)/te,y:e.y}:t===Kr.VERTICAL&&(X={x:e.x,y:te*e.x+ce})}if(ra(X,O,w)){var Se=Qn(X.x,X.y,e.x,e.y);Se<s&&(s=Se,i=X)}}),i},vp=function(e,t,n,i){var c=e.x,s=e.y;return t.x>e.x?c=e.x+n/2:t.x<e.x&&(c=e.x-n/2),t.y>e.y?s=e.y+i/2:t.y<e.y&&(s=e.y-i/2),{x:c,y:s}},gp=function(e){var t=e.rows,n=e.style,i=e.rowsLength,c=e.className,s=document.createElement("div");s.style.fontSize=n.fontSize,s.style.width=n.width,s.className=c,s.style.lineHeight=n.lineHeight,s.style.padding=n.padding,n.fontFamily&&(s.style.fontFamily=n.fontFamily),i>1?t.forEach(function(h){var v=document.createElement("div");v.textContent=h,s.appendChild(v)}):s.textContent=t,document.body.appendChild(s);var l=s.clientHeight;return document.body.removeChild(s),l},Lf=function(e){var t=e.rows,n=e.rowsLength,i=e.fontSize,c=0;return t&&t.forEach(function(s){var l=Ot(s);c=l>c?l:c}),{width:Math.ceil(c/2)*i+i/4,height:n*(i+2)+i/4}},Bu=function(e){return Ws(e)!=="object"?{isAllPass:!!e,msg:e?"":""}:e},Xn=function(e){try{return nn(e)}catch{return e}},Ih=1e3,Bf=999,Ha=function(){return++Ih};function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fu(Object(n),!0).forEach(function(i){Jn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function hn(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Zs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var Gu=(et=function(){function e(i,c){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),Jn(this,"id",""),hn(this,"type",Df,this),hn(this,"sourceNodeId",Cu,this),hn(this,"targetNodeId",Yo,this),hn(this,"startPoint",Fa,this),hn(this,"endPoint",Si,this),hn(this,"text",Ga,this),hn(this,"properties",Ua,this),hn(this,"points",Ti,this),hn(this,"pointsList",Ai,this),hn(this,"isSelected",Pi,this),hn(this,"isHovered",Iu,this),hn(this,"isHitable",ku,this),hn(this,"draggable",za,this),hn(this,"visible",$s,this),Jn(this,"virtual",!1),hn(this,"isAnimation",Ks,this),hn(this,"isShowAdjustPoint",na,this),Jn(this,"graphModel",void 0),hn(this,"zIndex",oa,this),Jn(this,"BaseType",xn.EDGE),Jn(this,"modelType",Pr.EDGE),hn(this,"state",lp,this),Jn(this,"additionStateData",void 0),Jn(this,"sourceAnchorId",""),Jn(this,"targetAnchorId",""),Jn(this,"menu",void 0),Jn(this,"customTextPosition",!1),hn(this,"style",pp,this),hn(this,"arrowConfig",Cf,this),this.graphModel=c,this.initEdgeData(i),this.setAttributes()}var t,n;return t=e,n=[{key:"initEdgeData",value:function(i){if(i.properties||(i.properties={}),!i.id){var c=this.graphModel.idGenerator,s=c&&c(i.type),l=this.createId();i.id=l||s||fi()}this.arrowConfig.markerEnd="url(#marker-end-".concat(i.id,")");var h=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=h,Zn(this,yt(i)),this.graphModel.overlapMode===uo.INCREASE&&(this.zIndex=i.zIndex||Ha()),this.setAnchors(),this.initPoints(),this.formatText(i)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Un(Un({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Un({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var i=this.graphModel.theme.edgeText;return nn(i)}},{key:"getEdgeAnimationStyle",value:function(){var i=this.graphModel.theme.edgeAnimation;return nn(i)}},{key:"getArrowStyle",value:function(){var i=this.getEdgeStyle(),c=this.getEdgeAnimationStyle(),s=this.graphModel.theme.arrow,l=this.isAnimation?c.stroke:i.stroke;return Un(Un({},i),{},{fill:l,stroke:l},s)}},{key:"getOutlineStyle",value:function(){var i=this.graphModel.theme.outline;return nn(i)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var i,c;return(i=this.graphModel)===null||i===void 0||(c=i.nodesMap[this.sourceNodeId])===null||c===void 0?void 0:c.model}},{key:"targetNode",get:function(){var i,c;return(i=this.graphModel)===null||i===void 0||(c=i.nodesMap[this.targetNodeId])===null||c===void 0?void 0:c.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(i,c){var s,l;return qs(i).forEach(function(h){var v=zt(h,c);(l===void 0||v<l)&&(l=v,s=h)}),s}},{key:"getEndAnchor",value:function(i){var c,s,l=this;return qs(i).forEach(function(h){var v=zt(h,l.startPoint);(s===void 0||v<s)&&(s=v,c=h)}),c}},{key:"getProperties",value:function(){return Object(d.I)(this.properties)}},{key:"getData",value:function(){var i=this.text,c=i.x,s=i.y,l=i.value,h={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(d.I)(this.properties)};return l&&(h.text={x:c,y:s,value:l}),this.graphModel.overlapMode===uo.INCREASE&&(h.zIndex=this.zIndex),h}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(i,c){this.properties[i]=Xn(c),this.setAttributes()}},{key:"deleteProperty",value:function(i){delete this.properties[i],this.setAttributes()}},{key:"setProperties",value:function(i){this.properties=Un(Un({},Object(d.I)(this.properties)),Xn(i)),this.setAttributes()}},{key:"changeEdgeId",value:function(i){var c=this.arrowConfig,s=c.markerEnd,l=c.markerStart;l&&l==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(i,")")),s&&s==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(i,")")),this.id=i}},{key:"setStyle",value:function(i,c){this.style=Un(Un({},this.style),{},Jn({},i,Xn(c)))}},{key:"setStyles",value:function(i){this.style=Un(Un({},this.style),Xn(i))}},{key:"updateStyles",value:function(i){this.style=Un({},Xn(i))}},{key:"formatText",value:function(i){var c=this.textPosition,s=c.x,l=c.y;i.text&&typeof i.text!="string"?Object.prototype.toString.call(i.text)==="[object Object]"&&(this.text={x:i.text.x||s,y:i.text.y||l,value:i.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:i.text||"",x:s,y:l,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var i=this.textPosition,c=i.x,s=i.y;this.text.x=c,this.text.y=s}},{key:"moveText",value:function(i,c){if(this.text){var s=this.text,l=s.x,h=s.y,v=s.value,O=s.draggable,w=s.editable;this.text={value:v,draggable:O,x:l+i,y:h+c,editable:w}}}},{key:"setText",value:function(i){i&&Zn(this.text,i)}},{key:"updateText",value:function(i){this.text=Un(Un({},Object(d.I)(this.text)),{},{value:i})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var i=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:i.x,y:i.y}),this.sourceAnchorId||(this.sourceAnchorId=i.id)}if(!this.targetAnchorId||!this.endPoint){var c=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:c.x,y:c.y}),this.targetAnchorId||(this.targetAnchorId=c.id)}}},{key:"setSelected",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=i}},{key:"setHovered",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=i}},{key:"setHitable",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=i}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(i,c){this.state=i,this.additionStateData=c}},{key:"updateStartPoint",value:function(i){this.startPoint=i}},{key:"moveStartPoint",value:function(i,c){this.startPoint.x+=i,this.startPoint.y+=c}},{key:"updateEndPoint",value:function(i){this.endPoint=i}},{key:"moveEndPoint",value:function(i,c){this.endPoint.x+=i,this.endPoint.y+=c}},{key:"setZIndex",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=i}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(i){Zn(this,i)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(i){var c=i.startPoint,s=i.endPoint;this.updateStartPoint({x:c.x,y:c.y}),this.updateEndPoint({x:s.x,y:s.y})}}],n&&Zs(t.prototype,n),e}(),Df=or(et.prototype,"type",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Cu=or(et.prototype,"sourceNodeId",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Yo=or(et.prototype,"targetNodeId",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Fa=or(et.prototype,"startPoint",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Si=or(et.prototype,"endPoint",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ga=or(et.prototype,"text",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Ua=or(et.prototype,"properties",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ti=or(et.prototype,"points",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ai=or(et.prototype,"pointsList",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pi=or(et.prototype,"isSelected",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Iu=or(et.prototype,"isHovered",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ku=or(et.prototype,"isHitable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),za=or(et.prototype,"draggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$s=or(et.prototype,"visible",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ks=or(et.prototype,"isAnimation",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),na=or(et.prototype,"isShowAdjustPoint",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oa=or(et.prototype,"zIndex",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lp=or(et.prototype,"state",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pp=or(et.prototype,"style",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Cf=or(et.prototype,"arrowConfig",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:""}}}),or(et.prototype,"sourceNode",[d.m],Object.getOwnPropertyDescriptor(et.prototype,"sourceNode"),et.prototype),or(et.prototype,"targetNode",[d.m],Object.getOwnPropertyDescriptor(et.prototype,"targetNode"),et.prototype),or(et.prototype,"textPosition",[d.m],Object.getOwnPropertyDescriptor(et.prototype,"textPosition"),et.prototype),or(et.prototype,"setProperty",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setProperty"),et.prototype),or(et.prototype,"deleteProperty",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"deleteProperty"),et.prototype),or(et.prototype,"setProperties",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setProperties"),et.prototype),or(et.prototype,"changeEdgeId",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"changeEdgeId"),et.prototype),or(et.prototype,"setStyle",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setStyle"),et.prototype),or(et.prototype,"setStyles",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setStyles"),et.prototype),or(et.prototype,"updateStyles",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateStyles"),et.prototype),or(et.prototype,"formatText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"formatText"),et.prototype),or(et.prototype,"resetTextPosition",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"resetTextPosition"),et.prototype),or(et.prototype,"moveText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"moveText"),et.prototype),or(et.prototype,"setText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setText"),et.prototype),or(et.prototype,"updateText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateText"),et.prototype),or(et.prototype,"setAnchors",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setAnchors"),et.prototype),or(et.prototype,"setSelected",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setSelected"),et.prototype),or(et.prototype,"setHovered",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setHovered"),et.prototype),or(et.prototype,"setHitable",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setHitable"),et.prototype),or(et.prototype,"openEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"openEdgeAnimation"),et.prototype),or(et.prototype,"closeEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"closeEdgeAnimation"),et.prototype),or(et.prototype,"setElementState",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setElementState"),et.prototype),or(et.prototype,"updateStartPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateStartPoint"),et.prototype),or(et.prototype,"moveStartPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"moveStartPoint"),et.prototype),or(et.prototype,"updateEndPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateEndPoint"),et.prototype),or(et.prototype,"moveEndPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"moveEndPoint"),et.prototype),or(et.prototype,"setZIndex",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setZIndex"),et.prototype),or(et.prototype,"initPoints",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"initPoints"),et.prototype),or(et.prototype,"updateAttributes",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateAttributes"),et.prototype),or(et.prototype,"getAdjustStart",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"getAdjustStart"),et.prototype),or(et.prototype,"getAdjustEnd",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"getAdjustEnd"),et.prototype),or(et.prototype,"updateAfterAdjustStartAndEnd",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateAfterAdjustStartAndEnd"),et.prototype),et),Xa=Gu;function Va(e){return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(e)}function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uu(Object(n),!0).forEach(function(i){mp(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function zu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ia(){return ia=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=Xu(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},ia.apply(this,arguments)}function Xu(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ni(e))!==null;);return e}function Qs(e,t){return Qs=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Qs(e,t)}function Vu(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ni(e);if(t){var c=Ni(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return aa(this,n)}}function aa(e,t){if(t&&(Va(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ff(e)}function Ff(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ni(e){return Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ni(e)}function mp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wr,bp,$o=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Qs(s,l)})(c,e);var t,n,i=Vu(c);function c(){var s;zu(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return mp(Ff(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.LINE_EDGE),s}return t=c,(n=[{key:"getEdgeStyle",value:function(){var s=this.graphModel.theme.line;return Wa(Wa({},ia(Ni(c.prototype),"getEdgeStyle",this).call(this)),nn(s))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Hu(t.prototype,n),c}(Xa);function Js(e){return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(e)}function _p(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Gf(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Gf(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ep(Object(n),!0).forEach(function(i){Zo(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ep(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function kh(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Op(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qo(){return qo=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=Mi(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},qo.apply(this,arguments)}function Mi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=yn(e))!==null;);return e}function ec(e,t){return ec=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ec(e,t)}function zf(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=yn(e);if(t){var c=yn(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return tc(this,n)}}function tc(e,t){if(t&&(Js(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ya(e)}function Ya(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yn(e)}function Zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kr(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var Vn=(wr=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ec(s,l)})(c,e);var t,n,i=zf(c);function c(){var s;Ko(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Zo(Ya(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.POLYLINE_EDGE),Zo(Ya(s),"draggingPointList",void 0),kh(Ya(s),"dbClickPosition",bp,Ya(s)),s}return t=c,(n=[{key:"initEdgeData",value:function(s){this.offset=30,qo(yn(c.prototype),"initEdgeData",this).call(this,s)}},{key:"getEdgeStyle",value:function(){var s=this.graphModel.theme.polyline;return Uf(Uf({},qo(yn(c.prototype),"getEdgeStyle",this).call(this)),nn(s))}},{key:"getTextPosition",value:function(){var s,l=(s=this.text)===null||s===void 0?void 0:s.value;if(this.dbClickPosition&&!l){var h=this.dbClickPosition;return{x:h.x,y:h.y}}var v=me(this.points),O=_p(it(v),2),w=O[0],j=O[1];return{x:(w.x+j.x)/2,y:(w.y+j.y)/2}}},{key:"getAfterAnchor",value:function(s,l,h){var v,O;return h.forEach(function(w){var j;s===Kr.HORIZONTAL?j=Math.abs(l.y-w.y):s===Kr.VERTICAL&&(j=Math.abs(l.x-w.x)),(!O||O>j)&&(O=j,v=w)}),v}},{key:"getCrossPoint",value:function(s,l,h){var v;return s===Kr.HORIZONTAL?v={x:h.x,y:l.y}:s===Kr.VERTICAL&&(v={x:l.x,y:h.y}),v}},{key:"removeCrossPoints",value:function(s,l,h){var v=h.map(function(Pe){return Pe});if(s===1){var O=v[s],w=v[l],j=v[s-1];if(dt(j,O,this.sourceNode)){if(gt(O,w,this.sourceNode)){var D=rt(O,w,this.sourceNode);D&&(v[s]=D,v.splice(s-1,1),s--,l--)}}else this.sourceNode.anchors.forEach(function(Pe){(Pe.x===j.x&&Pe.x===O.x||Pe.y===j.y&&Pe.y===O.y)&&Qn(Pe.x,Pe.y,O.x,O.y)<Qn(j.x,j.y,O.x,O.y)&&(v[s-1]=Pe)})}if(l===h.length-2){var X=v[s],te=v[l],ce=v[l+1];if(dt(te,ce,this.targetNode)){if(gt(X,te,this.targetNode)){var Se=rt(X,te,this.targetNode);Se&&(v[l]=Se,v.splice(l+1,1))}}else this.targetNode.anchors.forEach(function(Pe){(Pe.x===ce.x&&Pe.x===te.x||Pe.y===ce.y&&Pe.y===te.y)&&Qn(Pe.x,Pe.y,te.x,te.y)<Qn(ce.x,ce.y,te.x,te.y)&&(v[l+1]=Pe)})}return v}},{key:"getDraggingPoints",value:function(s,l,h,v,O){var w=O.map(function(X){return X}),j=this.getAfterAnchor(s,h,v),D=this.getCrossPoint(s,h,j);return l==="start"?(w.unshift(D),w.unshift(j)):(w.push(D),w.push(j)),w}},{key:"updateCrossPoints",value:function(s){var l=s.map(function(st){return st}),h=s[0],v=s[1],O=s[l.length-2],w=s[l.length-1],j=this.sourceNode,D=this.targetNode,X=j.modelType,te=D.modelType,ce=pt(h,v),Se=l[0];switch(X){case Pr.RECT_NODE:j.radius!==0&&(dp(h,j)||(Se=If(h,ce,j)));break;case Pr.CIRCLE_NODE:Se=kf(h,ce,j);break;case Pr.ELLIPSE_NODE:Se=hp(h,ce,j);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:Se=yp(h,ce,j)}l[0]=Se;var Pe=pt(O,w),We=l[l.length-1];switch(te){case Pr.RECT_NODE:D.radius!==0&&(dp(w,D)||(We=If(w,Pe,D)));break;case Pr.CIRCLE_NODE:We=kf(w,Pe,D);break;case Pr.ELLIPSE_NODE:We=hp(w,Pe,D);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:We=yp(w,Pe,D)}return l[l.length-1]=We,l}},{key:"getData",value:function(){var s=qo(yn(c.prototype),"getData",this).call(this),l=this.pointsList.map(function(h){return{x:h.x,y:h.y}});return Object.assign({},s,{pointsList:l})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(s){return"".concat(s.x,",").concat(s.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var s=ct({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=s,this.points=s.map(function(l){return"".concat(l.x,",").concat(l.y)}).join(" ")}},{key:"updateStartPoint",value:function(s){this.startPoint=s,this.updatePoints()}},{key:"moveStartPoint",value:function(s,l){this.startPoint.x+=s,this.startPoint.y+=l,this.updatePoints()}},{key:"updateEndPoint",value:function(s){this.endPoint=s,this.updatePoints()}},{key:"moveEndPoint",value:function(s,l){this.endPoint.x+=s,this.endPoint.y+=l,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(s){return s})}},{key:"dragAppendSimple",value:function(s,l){this.isDragging=!0;var h=s.start,v=s.end,O=s.startIndex,w=s.endIndex,j=s.direction,D=this.pointsList,X=D;return j===Kr.HORIZONTAL?(D[O]={x:h.x,y:h.y+l.y},D[w]={x:v.x,y:v.y+l.y},X=this.pointsList.map(function(te){return te})):j===Kr.VERTICAL&&(D[O]={x:h.x+l.x,y:h.y},D[w]={x:v.x+l.x,y:v.y},X=this.pointsList.map(function(te){return te})),this.updatePointsAfterDrag(X),this.draggingPointList=X,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},D[O]),end:Object.assign({},D[w]),startIndex:O,endIndex:w,direction:j}}},{key:"dragAppend",value:function(s,l){this.isDragging=!0;var h=s.start,v=s.end,O=s.startIndex,w=s.endIndex,j=s.direction,D=this.pointsList;if(j===Kr.HORIZONTAL){D[O]={x:h.x,y:h.y+l.y},D[w]={x:v.x,y:v.y+l.y};var X=this.pointsList.map(function(Rt){return Rt});if(O!==0&&w!==this.pointsList.length-1&&(X=this.removeCrossPoints(O,w,X)),O===0){var te={x:h.x,y:h.y+l.y};if(!ji(te,this.sourceNode)){var ce=this.sourceNode.anchors;X=this.getDraggingPoints(j,"start",te,ce,X)}}if(w===this.pointsList.length-1){var Se={x:v.x,y:v.y+l.y};if(!ji(Se,this.targetNode)){var Pe=this.targetNode.anchors;X=this.getDraggingPoints(j,"end",Se,Pe,X)}}this.updatePointsAfterDrag(X),this.draggingPointList=X}else if(j===Kr.VERTICAL){D[O]={x:h.x+l.x,y:h.y},D[w]={x:v.x+l.x,y:v.y};var We=this.pointsList.map(function(Rt){return Rt});if(O!==0&&w!==this.pointsList.length-1&&(We=this.removeCrossPoints(O,w,We)),O===0){var st={x:h.x+l.x,y:h.y};if(!ji(st,this.sourceNode)){var Ct=this.sourceNode.anchors;We=this.getDraggingPoints(j,"start",st,Ct,We)}}if(w===this.pointsList.length-1){var Et={x:v.x+l.x,y:v.y};if(!ji(Et,this.targetNode)){var qt=this.targetNode.anchors;We=this.getDraggingPoints(j,"end",Et,qt,We)}}this.updatePointsAfterDrag(We),this.draggingPointList=We}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},D[O]),end:Object.assign({},D[w]),startIndex:O,endIndex:w,direction:j}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var s=nt(me(this.points));this.pointsList=s.map(function(v){return v}),this.draggingPointList=[];var l=s[0];this.startPoint=Object.assign({},l);var h=s[s.length-1];this.endPoint=Object.assign({},h)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(s){var l=this.updateCrossPoints(s);this.points=l.map(function(h){return"".concat(h.x,",").concat(h.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var s=this.pointsList;return s[s.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var l=s.startPoint,h=s.endPoint,v=s.sourceNode,O=s.targetNode,w=ct({x:l.x,y:l.y},{x:h.x,y:h.y},v,O,this.offset||0);this.pointsList=w,this.initPoints()}}])&&Op(t.prototype,n),c}(Xa),bp=kr(wr.prototype,"dbClickPosition",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kr(wr.prototype,"initPoints",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"initPoints"),wr.prototype),kr(wr.prototype,"updatePoints",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePoints"),wr.prototype),kr(wr.prototype,"updateStartPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateStartPoint"),wr.prototype),kr(wr.prototype,"moveStartPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveStartPoint"),wr.prototype),kr(wr.prototype,"updateEndPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateEndPoint"),wr.prototype),kr(wr.prototype,"moveEndPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveEndPoint"),wr.prototype),kr(wr.prototype,"dragAppendStart",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendStart"),wr.prototype),kr(wr.prototype,"dragAppendSimple",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendSimple"),wr.prototype),kr(wr.prototype,"dragAppend",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppend"),wr.prototype),kr(wr.prototype,"dragAppendEnd",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendEnd"),wr.prototype),kr(wr.prototype,"updatePointsAfterDrag",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePointsAfterDrag"),wr.prototype),kr(wr.prototype,"getAdjustStart",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustStart"),wr.prototype),kr(wr.prototype,"getAdjustEnd",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustEnd"),wr.prototype),kr(wr.prototype,"updateAfterAdjustStartAndEnd",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateAfterAdjustStartAndEnd"),wr.prototype),wr),$a=function(e){var t=e.start,n=e.end,i=e.offset,c=e.verticalLength,s=e.type,l={leftX:0,leftY:0,rightX:0,rightY:0},h=Math.atan((n.y-t.y)/(n.x-t.x)),v=Math.atan(i/c),O=Math.sqrt(c*c+i*i);return s==="start"?n.x>=t.x?(l.leftX=t.x+O*Math.sin(h+v),l.leftY=t.y-O*Math.cos(h+v),l.rightX=t.x-O*Math.sin(h-v),l.rightY=t.y+O*Math.cos(h-v)):(l.leftX=t.x-O*Math.sin(h+v),l.leftY=t.y+O*Math.cos(h+v),l.rightX=t.x+O*Math.sin(h-v),l.rightY=t.y-O*Math.cos(h-v)):s==="end"&&(n.x>=t.x?(l.leftX=n.x+O*Math.sin(h-v),l.leftY=n.y-O*Math.cos(h-v),l.rightX=n.x-O*Math.sin(h+v),l.rightY=n.y+O*Math.cos(h+v)):(l.leftX=n.x-O*Math.sin(h-v),l.leftY=n.y+O*Math.cos(h-v),l.rightX=n.x+O*Math.sin(h+v),l.rightY=n.y-O*Math.cos(h+v))),l},Lh={x:1,y:0,z:0};function wp(e){var t=Math.hypot(e.x,e.y);return{x:e.x/t,y:e.y/t,z:0}}function Bh(e){return i=function(s,l){return s.x*l.y-s.y*l.x}(t=Lh,n=e),c=Math.acos(function(s,l){var h=[s.x,s.y,s.z];return[l.x,l.y,l.z].reduce(function(v,O,w){return v+O*h[w]})}(wp(t),wp(n))),i>=0?c:-c;var t,n,i,c}function xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Wu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xp(Object(n),!0).forEach(function(i){Fh(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xp(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Fh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gh(e){return function(t){if(Array.isArray(t))return nc(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Sp(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hf(e){return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function rc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||Sp(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sp(e,t){if(e){if(typeof e=="string")return nc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nc(e,t):void 0}}function nc(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var oc=function(e){var t=[],n={};return e.forEach(function(i){var c="".concat(i.x,"-").concat(i.y);i.id=c,n[c]=i}),Object.keys(n).forEach(function(i){t.push(n[i])}),t},Yu=function(e,t){return e.width===0&&e.height===0?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},ic=function(e,t){var n=function(i,c){var s=Math.abs(i.x-c.centerX),l=Math.abs(i.y-c.centerY);return s/c.width>l/c.height?Kr.HORIZONTAL:Kr.VERTICAL}(t,e);return n===Kr.HORIZONTAL?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},Tp=function(e,t){var n=Math.min(e.minX,t.minX),i=Math.min(e.minY,t.minY),c=Math.max(e.maxX,t.maxX),s=Math.max(e.maxY,t.maxY);return{centerX:(n+c)/2,centerY:(i+s)/2,minX:n,minY:i,maxX:c,maxY:s,height:s-i,width:c-n}},Ka=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],i=[];e.forEach(function(w){n.push(w.x),i.push(w.y)});var c=Math.min.apply(Math,n),s=Math.max.apply(Math,n),l=Math.min.apply(Math,i),h=Math.max.apply(Math,i),v=s-c,O=h-l;return t&&(v+=t,O+=t),{centerX:(c+s)/2,centerY:(l+h)/2,maxX:s,maxY:h,minX:c,minY:l,x:(c+s)/2,y:(l+h)/2,height:O,width:v}},ac=function(e){var t=e.minX,n=e.minY,i=e.maxX,c=e.maxY;return[{x:t,y:n},{x:i,y:n},{x:i,y:c},{x:t,y:c}]},x=function(e,t){var n=e.x,i=e.y;return n<t.minX||n>t.maxX||i<t.minY||i>t.maxY},B=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Z=function(e,t,n,i,c){return B(e,t)+B(e,n)+function(s,l){var h=0;return l.forEach(function(v){v&&(s.x===v.x&&(h+=-2),s.y===v.y&&(h+=-2))}),h}(e,[t,n,i,c])},Ie=function e(t,n,i,c,s){s||(s=0),t.unshift(n[c]),i[c]&&i[c]!==c&&s<=100&&e(t,n,i,i[c],s+1)},Xe=function(e,t,n,i){var c=t.x-e.x,s=t.y-e.y,l=i.x-n.x,h=i.y-n.y,v=(-s*(e.x-n.x)+c*(e.y-n.y))/(-l*s+c*h),O=(l*(e.y-n.y)-h*(e.x-n.x))/(-l*s+c*h);return v>=0&&v<=1&&O>=0&&O<=1},Ce=function(e,t,n){if(n.width===0&&n.height===0)return!1;var i=rc(ac(n),4),c=i[0],s=i[1],l=i[2],h=i[3];return Xe(e,t,c,s)||Xe(e,t,c,h)||Xe(e,t,s,l)||Xe(e,t,l,h)},Be=function(e,t,n,i,c,s,l){var h=[],v=[t],O={},w={},j={};w[t.id]=0,j[t.id]=Z(t,n,t);var D={};e.forEach(function(ce){D[ce.id]=ce});for(var X=function(){var ce,Se,Pe,We=void 0,st=1/0;if(v.forEach(function(Et){j[Et.id]<st&&(st=j[Et.id],We=Et)}),We===n){var Ct=[];return Ie(Ct,D,O,n.id),{v:Ct}}Se=We,(Pe=(ce=v).indexOf(Se))>-1&&ce.splice(Pe,1),h.push(We),function(Et,qt,Rt,wt){var hr=[];return Et.forEach(function(Br){Br!==qt&&(Br.x!==qt.x&&Br.y!==qt.y||Ce(Br,qt,Rt)||Ce(Br,qt,wt)||hr.push(Br))}),oc(hr)}(e,We,i,c).forEach(function(Et){if(h.indexOf(Et)===-1){v.indexOf(Et)===-1&&v.push(Et);var qt=j[We.id]+B(We,Et);w[Et.id]&&qt>=w[Et.id]||(O[Et.id]=We.id,w[Et.id]=qt,j[Et.id]=w[Et.id]+Z(Et,n,t,s,l))}})};v.length;){var te=X();if(Hf(te)==="object")return te.v}return[t,n]},tt=function(e){return mo(e)},nt=function(e){for(var t=1;t<e.length-1;){var n=e[t-1],i=e[t],c=e[t+1];n.x===i.x&&i.x===c.x||n.y===i.y&&i.y===c.y?e.splice(t,1):t++}return e},ct=function(e,t,n,i,c){var s,l,h=tt(n),v=tt(i),O=Yu(h,c),w=Yu(v,c),j=ic(O,e),D=ic(w,t);if(s=O,l=w,2*Math.abs(s.centerX-l.centerX)<s.width+l.width&&2*Math.abs(s.centerY-l.centerY)<s.height+l.height){var X=Fe(e,t,j,D);return[e,j].concat(Gh(X),[D,t])}var te=Ka([j,D]),ce=Tp(O,te),Se=Tp(w,te),Pe=[];Pe=(Pe=Pe.concat(ac(ce))).concat(ac(Se));var We={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[te,ce,Se].forEach(function(Ct){Pe=Pe.concat(function(Et,qt){return function(Rt,wt){return wt<Rt.minX||wt>Rt.maxX?[]:[{x:wt,y:Rt.minY},{x:wt,y:Rt.maxY}]}(Et,qt.x).concat(function(Rt,wt){return wt<Rt.minY||wt>Rt.maxY?[]:[{x:Rt.minX,y:wt},{x:Rt.maxX,y:wt}]}(Et,qt.y))}(Ct,We).filter(function(Et){return x(Et,O)&&x(Et,w)}))}),[{x:j.x,y:D.y},{x:D.x,y:j.y}].forEach(function(Ct){x(Ct,O)&&x(Ct,w)&&Pe.push(Ct)}),Pe.unshift(j),Pe.push(D),Pe=oc(Pe);var st=Be(Pe,j,D,h,v,e,t);return st.unshift(e),st.push(t),st.length>2&&(st=nt(st)),oc(st)},it=function(e){var t;if(e.length===1)t=[e[0],e[0]];else if(e.length>=2){for(var n=e[0],i=e[1],c=Qn(n.x,n.y,i.x,i.y),s=1;s<e.length-1;s++){var l=e[s],h=e[s+1],v=Qn(l.x,l.y,h.x,h.y);v>c&&(c=v,n=l,i=h)}t=[n,i]}return t},dt=function(e,t,n){var i=ji(e,n),c=ji(t,n);return i&&c},gt=function(e,t,n){var i=ji(e,n),c=ji(t,n);return!(i&&c)&&(i||c)},rt=function(e,t,n){for(var i,c,s=mo(n),l=ac(s),h=0;h<l.length;h++)Xe(e,t,l[h],l[(h+1)%l.length])&&(c=[l[h],l[(h+1)%l.length]]);return c&&(i=function(v,O,w,j){var D=(O.y-v.y)*(j.x-w.x)-(v.x-O.x)*(w.y-j.y);if(D===0)return!1;var X=((O.x-v.x)*(j.x-w.x)*(w.y-v.y)+(O.y-v.y)*(j.x-w.x)*v.x-(j.y-w.y)*(O.x-v.x)*w.x)/D,te=-((O.y-v.y)*(j.y-w.y)*(w.x-v.x)+(O.x-v.x)*(j.y-w.y)*v.y-(j.x-w.x)*(O.y-v.y)*w.y)/D;return(X-v.x)*(X-O.x)<=0&&(te-v.y)*(te-O.y)<=0&&(X-w.x)*(X-j.x)<=0&&(te-w.y)*(te-j.y)<=0&&{x:X,y:te}}(e,t,c[0],c[1])),i},pt=function(e,t){var n;return e.x===t.x?n=Kr.VERTICAL:e.y===t.y&&(n=Kr.HORIZONTAL),n},me=function(e){var t=e.split(" "),n=[];return t&&t.forEach(function(i){var c=rc(i.split(","),2),s=c[0],l=c[1];n.push({x:Number(s),y:Number(l)})}),n},Fe=function(e,t,n,i){var c=[];if(pt(e,n)===pt(t,i))e.y===n.y?(c.push({x:n.x,y:(n.y+i.y)/2}),c.push({x:i.x,y:(n.y+i.y)/2})):(c.push({x:(n.x+i.x)/2,y:n.y}),c.push({x:(n.x+i.x)/2,y:i.y}));else{var s={x:n.x,y:i.y},l=ra(s,e,n),h=ra(s,t,i);if(l||h)s={x:i.x,y:n.y};else{var v=at(s,e,n),O=at(s,t,i);v&&O&&(s={x:i.x,y:n.y})}c.push(s)}return c},at=function(e,t,n){return e.x===t.x&&e.x===n.x||e.y===t.y&&e.y===n.y},Ot=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);e.match(/[A-Z]/)?t+=1.5:t+=i>=1&&i<=126||i>=65376&&i<=65439?1:2}return t},qe=function(e){var t=e.start,n=e.end,i=e.sourceNode,c=e.targetNode,s=e.offset,l=mo(i),h=mo(c),v=Yu(l,s),O=Yu(h,s);return{sNext:ic(v,t),ePre:ic(O,n)}},St=function(e){var t=e.replace(/M/g,"").replace(/C/g,",").split(",");return[Qe(t[0]),Qe(t[1]),Qe(t[2]),Qe(t[3])]},Qe=function(e){var t=rc(e.replace(/(^\s*)/g,"").split(" "),2);return{x:+t[0],y:+t[1]}},ht=function(e){var t=St(e),n=rc(t,4),i=function(c,s,l,h){return function(v){if(v<0||v>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:c.x*Math.pow(1-v,3)+3*s.x*v*Math.pow(1-v,2)+3*l.x*Math.pow(v,2)*(1-v)+h.x*Math.pow(v,3),y:c.y*Math.pow(1-v,3)+3*s.y*v*Math.pow(1-v,2)+3*l.y*Math.pow(v,2)*(1-v)+h.y*Math.pow(v,3)}}(.95)}(n[0],n[1],n[2],n[3]);return[i,t[3]]},Je=function(e,t){for(var n,i=e.x,c=e.y,s=me(t),l=Number.MAX_SAFE_INTEGER,h=[],v=0;v<s.length;v++)h.push({start:s[v],end:s[(v+1)%s.length]});if(h.forEach(function(D){var X=D.start,te=D.end;if(X.x===te.x){var ce={x:X.x,y:c};if(ra(ce,X,te)){var Se=Math.abs(X.x-i);Se<l&&(l=Se,n=ce)}}else if(X.y===te.y){var Pe={x:i,y:X.y};if(ra(Pe,X,te)){var We=Math.abs(X.y-c);We<l&&(l=We,n=Pe)}}}),!n){var O=h[0],w=O.start,j=O.end;n={x:w.x+(j.x-w.x)/2,y:w.y+(j.y-w.y)/2}}return n},yt=function(e){return Au(e,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},zt=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};o(204);var Zt=function(){};function mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=window.document;function Jt(e){var t=e.onDragStart,n=t===void 0?Zt:t,i=e.onDragging,c=i===void 0?Zt:i,s=e.onDragEnd,l=s===void 0?Zt:s,h=e.step,v=h===void 0?1:h,O=e.isStopPropagation,w=O===void 0||O,j=!1,D=!1,X=0,te=0,ce=0,Se=0;function Pe(st){if(w&&st.stopPropagation(),D&&(j=!0,ce+=st.clientX-X,Se+=st.clientY-te,X=st.clientX,te=st.clientY,Math.abs(ce)>v||Math.abs(Se)>v)){var Ct=ce%v,Et=Se%v,qt=ce-Ct,Rt=Se-Et;ce=Ct,Se=Et,c({deltaX:qt,deltaY:Rt,event:st})}}function We(st){if(w&&st.stopPropagation(),D=!1,Ye.removeEventListener("mousemove",Pe,!1),Ye.removeEventListener("mouseup",We,!1),j)return j=!1,l({event:st})}return function(st){if(st.button===0)return w&&st.stopPropagation(),D=!0,X=st.clientX,te=st.clientY,Ye.addEventListener("mousemove",Pe,!1),Ye.addEventListener("mouseup",We,!1),n({event:st})}}var be,kt,mr,ir,vr,Mr,cn,En,xr,vn,Wr,fn,gn,Yr=function(){function e(i){var c=this,s=i.onDragStart,l=s===void 0?Zt:s,h=i.onDragging,v=h===void 0?Zt:h,O=i.onDragEnd,w=O===void 0?Zt:O,j=i.eventType,D=j===void 0?"":j,X=i.eventCenter,te=X===void 0?null:X,ce=i.step,Se=ce===void 0?1:ce,Pe=i.isStopPropagation,We=Pe===void 0||Pe,st=i.model,Ct=st===void 0?null:st,Et=i.data,qt=Et===void 0?null:Et;(function(Rt,wt){if(!(Rt instanceof wt))throw new TypeError("Cannot call a class as a function")})(this,e),Ze(this,"onDragStart",void 0),Ze(this,"onDragging",void 0),Ze(this,"onDragEnd",void 0),Ze(this,"step",void 0),Ze(this,"isStopPropagation",void 0),Ze(this,"isDragging",!1),Ze(this,"isStartDragging",!1),Ze(this,"startX",0),Ze(this,"startY",0),Ze(this,"sumDeltaX",0),Ze(this,"sumDeltaY",0),Ze(this,"eventType",void 0),Ze(this,"eventCenter",void 0),Ze(this,"model",void 0),Ze(this,"data",void 0),Ze(this,"startTime",void 0),Ze(this,"handleMouseDown",function(Rt){var wt,hr;if(Rt.button===0){c.isStopPropagation&&Rt.stopPropagation(),c.isStartDragging=!0,c.startX=Rt.clientX,c.startY=Rt.clientY,Ye.addEventListener("mousemove",c.handleMouseMove,!1),Ye.addEventListener("mouseup",c.handleMouseUp,!1);var Br=(wt=c.model)===null||wt===void 0?void 0:wt.getData();(hr=c.eventCenter)===null||hr===void 0||hr.emit(tr["".concat(c.eventType,"_MOUSEDOWN")],{e:Rt,data:c.data||Br}),c.startTime=new Date().getTime()}}),Ze(this,"handleMouseMove",function(Rt){if(c.isStopPropagation&&Rt.stopPropagation(),c.isStartDragging&&(c.sumDeltaX+=Rt.clientX-c.startX,c.sumDeltaY+=Rt.clientY-c.startY,c.startX=Rt.clientX,c.startY=Rt.clientY,c.step<=1||Math.abs(c.sumDeltaX)>c.step||Math.abs(c.sumDeltaY)>c.step)){var wt,hr=c.sumDeltaX%c.step,Br=c.sumDeltaY%c.step,qr=c.sumDeltaX-hr,Vr=c.sumDeltaY-Br;c.sumDeltaX=hr,c.sumDeltaY=Br;var en,In=(wt=c.model)===null||wt===void 0?void 0:wt.getData();c.isDragging||((en=c.eventCenter)===null||en===void 0||en.emit(tr["".concat(c.eventType,"_DRAGSTART")],{e:Rt,data:c.data||In}),c.onDragStart({event:Rt})),c.isDragging=!0,Promise.resolve().then(function(){var Hn,Fo;c.onDragging({deltaX:qr,deltaY:Vr,event:Rt}),(Hn=c.eventCenter)===null||Hn===void 0||Hn.emit(tr["".concat(c.eventType,"_MOUSEMOVE")],{e:Rt,data:c.data||In}),(Fo=c.eventCenter)===null||Fo===void 0||Fo.emit(tr["".concat(c.eventType,"_DRAG")],{e:Rt,data:c.data||In})})}}),Ze(this,"handleMouseUp",function(Rt){c.isStartDragging=!1,c.isStopPropagation&&Rt.stopPropagation(),Promise.resolve().then(function(){var wt,hr,Br;Ye.removeEventListener("mousemove",c.handleMouseMove,!1),Ye.removeEventListener("mouseup",c.handleMouseUp,!1);var qr=(wt=c.model)===null||wt===void 0?void 0:wt.getData();(hr=c.eventCenter)===null||hr===void 0||hr.emit(tr["".concat(c.eventType,"_MOUSEUP")],{e:Rt,data:c.data||qr}),c.isDragging&&(c.isDragging=!1,c.onDragEnd({event:Rt}),(Br=c.eventCenter)===null||Br===void 0||Br.emit(tr["".concat(c.eventType,"_DROP")],{e:Rt,data:c.data||qr}))})}),Ze(this,"cancelDrag",function(){Ye.removeEventListener("mousemove",c.handleMouseMove,!1),Ye.removeEventListener("mouseup",c.handleMouseUp,!1),c.onDragEnd({event:null}),c.isDragging=!1}),this.onDragStart=l,this.onDragging=v,this.onDragEnd=w,this.step=Se,this.isStopPropagation=We,this.eventType=D,this.eventCenter=te,this.model=Ct,this.data=qt}var t,n;return t=e,(n=[{key:"setStep",value:function(i){this.step=i}}])&&mt(t.prototype,n),e}(),Sn={node:!1,edge:!1},Bn={node:!0,edge:!0};function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?on(Object(n),!0).forEach(function(i){Wn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function mn(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||$t(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jr(e){return function(t){if(Array.isArray(t))return br(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||$t(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $t(e,t){if(e){if(typeof e=="string")return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(e,t):void 0}}function br(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Sr(e){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(e)}function Fr(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Qo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var ke,Me=200,Nt=(be=function(){function e(i){(function(te,ce){if(!(te instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,e),Wn(this,"rootEl",void 0),Fr(this,"width",kt,this),Fr(this,"height",mr,this),Wn(this,"theme",void 0),Wn(this,"eventCenter",void 0),Wn(this,"modelMap",new Map),Wn(this,"topElement",void 0),Wn(this,"animation",void 0),Wn(this,"idGenerator",void 0),Wn(this,"edgeGenerator",void 0),Wn(this,"nodeMoveRules",[]),Fr(this,"edgeType",ir,this),Fr(this,"nodes",vr,this),Fr(this,"edges",Mr,this),Fr(this,"overlapMode",cn,this),Fr(this,"background",En,this),Fr(this,"transformModel",xr,this),Fr(this,"editConfigModel",vn,this),Fr(this,"gridSize",Wr,this),Fr(this,"partial",fn,this),Fr(this,"fakerNode",gn,this);var c,s,l,h=i.container,v=i.background,O=v===void 0?{}:v,w=i.grid,j=i.idGenerator,D=i.edgeGenerator,X=i.animation;this.background=O,Sr(w)==="object"&&(this.gridSize=w.size),this.rootEl=h,this.editConfigModel=new pf(i),this.eventCenter=new ip,this.transformModel=new Hl(this.eventCenter),this.theme=Af(i.style),this.edgeType=i.edgeType||"polyline",this.width=i.width,this.height=i.height,this.animation=(c=X)&&typeof c!="boolean"?Us(nn(Sn),c):nn(c===!0?Bn:Sn),this.partial=i.partial,this.overlapMode=i.overlapMode||0,this.idGenerator=j,this.edgeGenerator=(s=this,typeof(l=D)!="function"?function(te,ce,Se){return Object.assign({type:s.edgeType},Se)}:function(te,ce,Se){var Pe=l(te,ce,Se);return Pe?typeof Pe=="string"?Object.assign({},Se,{type:Pe}):Object.assign({type:Pe},Se):{type:s.edgeType}}),this.width=i.width||this.rootEl.getBoundingClientRect().width,this.height=i.height||this.rootEl.getBoundingClientRect().height,this.flowId=fi()}var t,n;return t=e,n=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(i,c,s){return i[c.id]={index:s,model:c},i},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(i,c,s){return i[c.id]={index:s,model:c},i},{})}},{key:"modelsMap",get:function(){return[].concat(jr(this.nodes),jr(this.edges)).reduce(function(i,c){return i[c.id]=c,i},{})}},{key:"sortElements",get:function(){var i=[];this.nodes.forEach(function(O){return i.push(O)}),this.edges.forEach(function(O){return i.push(O)}),i=i.sort(function(O,w){return O.zIndex-w.zIndex});for(var c=[],s=[-200,-200],l=[this.width+Me,this.height+Me],h=0;h<i.length;h++){var v=i[h];v.visible&&(!this.partial||v.isSelected||this.isElementInArea(v,s,l,!1,!1))&&c.push(v)}return c}},{key:"textEditElement",get:function(){var i=this.nodes.find(function(s){return s.state===zr.TEXT_EDIT}),c=this.edges.find(function(s){return s.state===zr.TEXT_EDIT});return i||c}},{key:"selectElements",get:function(){var i=new Map;return this.nodes.forEach(function(c){c.isSelected&&i.set(c.id,c)}),this.edges.forEach(function(c){c.isSelected&&i.set(c.id,c)}),i}},{key:"selectNodes",get:function(){var i=[];return this.nodes.forEach(function(c){c.isSelected&&i.push(c)}),i}},{key:"getAreaElement",value:function(i,c){var s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],l=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=arguments.length>4&&arguments[4]!==void 0&&arguments[4],v=[],O=[];this.nodes.forEach(function(D){return O.push(D)}),this.edges.forEach(function(D){return O.push(D)});for(var w=0;w<O.length;w++){var j=O[w];h&&!j.visible||!this.isElementInArea(j,i,c,s,l)||v.push(j)}return v}},{key:"getModel",value:function(i){return this.modelMap.get(i)}},{key:"getNodeModelById",value:function(i){var c;return this.fakerNode&&i===this.fakerNode.id?this.fakerNode:(c=this.nodesMap[i])===null||c===void 0?void 0:c.model}},{key:"getPointByClient",value:function(i){var c=i.x,s=i.y,l=this.rootEl.getBoundingClientRect(),h={x:c-l.left,y:s-l.top},v=mn(this.transformModel.HtmlPointToCanvasPoint([h.x,h.y]),2);return{domOverlayPosition:h,canvasOverlayPosition:{x:v[0],y:v[1]}}}},{key:"isElementInArea",value:function(i,c,s){var l=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(i.BaseType===xn.NODE){for(var v=mo(i=i),O=v.minX,w=v.minY,j=v.maxX,D=v.maxY,X=[{x:O,y:w},{x:j,y:w},{x:j,y:D},{x:O,y:D}],te=h,ce=0;ce<X.length;ce++){var Se=X[ce],Pe=Se.x,We=Se.y,st=this.transformModel.CanvasPointToHtmlPoint([Pe,We]),Ct=mn(st,2);if(Pe=Ct[0],We=Ct[1],Vs([Pe,We],c,s)!==h){te=!h;break}}return te}if(i.BaseType===xn.EDGE){var Et=i=i,qt=Et.startPoint,Rt=Et.endPoint,wt=this.transformModel.CanvasPointToHtmlPoint([qt.x,qt.y]),hr=this.transformModel.CanvasPointToHtmlPoint([Rt.x,Rt.y]),Br=Vs(wt,c,s),qr=Vs(hr,c,s);return l?Br&&qr:Br||qr}return!1}},{key:"graphDataToModel",value:function(i){var c=this;this.width&&this.height||this.resize(),this.nodes=Ns(i.nodes,function(s){var l=c.getModel(s.type);if(!l)throw new Error("".concat(s.type,""));var h=s.x,v=s.y;return h&&v&&(s.x=ci(h,c.gridSize),s.y=ci(v,c.gridSize),Sr(s.text)==="object"&&(s.text.x-=Pf(h,c.gridSize),s.text.y-=Pf(v,c.gridSize))),new l(s,c)}),this.edges=Ns(i.edges,function(s){var l=c.getModel(s.type);if(!l)throw new Error("".concat(s.type,""));return new l(s,c)})}},{key:"modelToGraphData",value:function(){var i=[];this.edges.forEach(function(s){var l=s.getData();l&&!s.virtual&&i.push(l)});var c=[];return this.nodes.forEach(function(s){var l=s.getData();l&&!s.virtual&&c.push(l)}),{nodes:c,edges:i}}},{key:"modelToHistoryData",value:function(){for(var i=!1,c=[],s=0;s<this.nodes.length;s++){var l=this.nodes[s];if(l.isDragging){i=!0;break}c.push(l.getHistoryData())}if(i)return!1;for(var h=!1,v=[],O=0;O<this.edges.length;O++){var w=this.edges[O];if(w.isDragging){h=!0;break}v.push(w.getHistoryData())}return!h&&{nodes:c,edges:v}}},{key:"getEdgeModelById",value:function(i){var c;return(c=this.edgesMap[i])===null||c===void 0?void 0:c.model}},{key:"getElement",value:function(i){return this.modelsMap[i]}},{key:"getNodeEdges",value:function(i){for(var c=[],s=0;s<this.edges.length;s++){var l=this.edges[s],h=this.edges[s].sourceNodeId===i,v=this.edges[s].targetNodeId===i;(h||v)&&c.push(l)}return c}},{key:"getSelectElements",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],c=this.selectElements,s={nodes:[],edges:[]};return c.forEach(function(l){if(l.BaseType===xn.NODE&&s.nodes.push(l.getData()),l.BaseType===xn.EDGE){var h=l.getData(),v=c.get(h.sourceNodeId)&&c.get(h.targetNodeId);(i||v)&&s.edges.push(h)}}),s}},{key:"updateAttributes",value:function(i,c){this.getElement(i).updateAttributes(c)}},{key:"changeNodeId",value:function(i,c){return c||(c=fi()),this.nodesMap[c]?"":this.nodesMap[i]?(this.edges.forEach(function(s){s.sourceNodeId===i&&(s.sourceNodeId=c),s.targetNodeId===i&&(s.targetNodeId=c)}),this.nodesMap[i].model.id=c,this.nodesMap[c]=this.nodesMap[i],c):""}},{key:"changeEdgeId",value:function(i,c){return c||(c=fi()),this.edgesMap[c]?"":this.edgesMap[i]?(this.edges.forEach(function(s){s.id===i&&s.changeEdgeId(c)}),c):""}},{key:"setFakerNode",value:function(i){this.fakerNode=i}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(i,c){return this.modelMap.set(i,c)}},{key:"toFront",value:function(i){var c,s,l,h=((c=this.nodesMap[i])===null||c===void 0?void 0:c.model)||((s=this.edgesMap[i])===null||s===void 0?void 0:s.model);h&&(this.overlapMode===uo.DEFAULT&&((l=this.topElement)===null||l===void 0||l.setZIndex(),h.setZIndex(9999),this.topElement=h),this.overlapMode===uo.INCREASE&&this.setElementZIndex(i,"top"))}},{key:"setElementZIndex",value:function(i,c){var s,l,h,v=((s=this.nodesMap[i])===null||s===void 0?void 0:s.model)||((l=this.edgesMap[i])===null||l===void 0?void 0:l.model);v&&(typeof c=="number"&&(h=c),c==="top"&&(h=Ha()),c==="bottom"&&(h=--Bf),v.setZIndex(h))}},{key:"deleteNode",value:function(i){var c=this.nodesMap[i].model.getData();this.deleteEdgeBySource(i),this.deleteEdgeByTarget(i),this.nodes.splice(this.nodesMap[i].index,1),this.eventCenter.emit(tr.NODE_DELETE,{data:c})}},{key:"addNode",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tr.NODE_ADD,s=Xn(i);s.id&&this.nodesMap[i.id]&&delete s.id;var l=this.getModel(s.type);if(!l)throw new Error("".concat(s.type,""));s.x=ci(s.x,this.gridSize),s.y=ci(s.y,this.gridSize);var h=new l(s,this);this.nodes.push(h);var v=h.getData();return this.eventCenter.emit(c,{data:v}),h}},{key:"cloneNode",value:function(i){var c=this.getNodeModelById(i),s=c.getData();s.x+=30,s.y+=30,delete s.id,s.text&&(s.text.x+=30,s.text.y+=30);var l=this.addNode(s);return l.setSelected(!0),c.setSelected(!1),l.getData()}},{key:"moveNode",value:function(i,c,s){var l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=this.nodesMap[i];if(h){var v=h.model,O=v.getMoveDistance(c,s,l),w=mn(O,2);c=w[0],s=w[1],this.moveEdge(i,c,s)}}},{key:"moveNode2Coordinate",value:function(i,c,s){var l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=this.nodesMap[i];if(h){var v=h.model,O=v.x,w=v.y,j=c-O,D=s-w;this.moveNode(i,j,D,l)}}},{key:"editText",value:function(i){this.setElementStateById(i,zr.TEXT_EDIT)}},{key:"addEdge",value:function(i){var c=Xn(i),s=c.type;s||(s=this.edgeType),c.id&&this.edgesMap[c.id]&&delete c.id;var l=this.getModel(s);if(!l)throw new Error("".concat(s,""));var h=new l(cr(cr({},c),{},{type:s}),this),v=h.getData();return this.edges.push(h),this.eventCenter.emit(tr.EDGE_ADD,{data:v}),h}},{key:"moveEdge",value:function(i,c,s){for(var l=0;l<this.edges.length;l++){var h,v=this.edges[l],O=v.textPosition,w=O.x,j=O.y,D=this.edges[l].sourceNodeId===i,X=this.edges[l].targetNodeId===i;if(D&&v.moveStartPoint(c,s),X&&v.moveEndPoint(c,s),D||X)if(v.customTextPosition===!0)v.resetTextPosition();else if(v.modelType===Pr.POLYLINE_EDGE&&(h=v.text)!==null&&h!==void 0&&h.value){var te=v.text,ce=Je(te,v.points);v.moveText(ce.x-te.x,ce.y-te.y)}else{var Se=v.textPosition,Pe=Se.x,We=Se.y;v.moveText(Pe-w,We-j)}}}},{key:"deleteEdgeBySourceAndTarget",value:function(i,c){for(var s=0;s<this.edges.length;s++)if(this.edges[s].sourceNodeId===i&&this.edges[s].targetNodeId===c){var l=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(tr.EDGE_DELETE,{data:l})}}},{key:"deleteEdgeById",value:function(i){if(this.edgesMap[i]){var c=this.edgesMap[i].index,s=this.edgesMap[i].model.getData();this.edges.splice(c,1),this.eventCenter.emit(tr.EDGE_DELETE,{data:s})}}},{key:"deleteEdgeBySource",value:function(i){for(var c=0;c<this.edges.length;c++)if(this.edges[c].sourceNodeId===i){var s=this.edges[c].getData();this.edges.splice(c,1),c--,this.eventCenter.emit(tr.EDGE_DELETE,{data:s})}}},{key:"deleteEdgeByTarget",value:function(i){for(var c=0;c<this.edges.length;c++)if(this.edges[c].targetNodeId===i){var s=this.edges[c].getData();this.edges.splice(c,1),c--,this.eventCenter.emit(tr.EDGE_DELETE,{data:s})}}},{key:"setElementStateById",value:function(i,c,s){this.nodes.forEach(function(l){l.id===i?l.setElementState(c,s):l.setElementState(zr.DEFAULT)}),this.edges.forEach(function(l){l.id===i?l.setElementState(c,s):l.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(i,c){this.nodes.forEach(function(s){s.id===i&&s.updateText(c)}),this.edges.forEach(function(s){s.id===i&&s.updateText(c)})}},{key:"selectNodeById",value:function(i){var c,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s||this.clearSelectElements();var l=(c=this.nodesMap[i])===null||c===void 0?void 0:c.model;l==null||l.setSelected(!0)}},{key:"selectEdgeById",value:function(i){var c,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s||this.clearSelectElements();var l=(c=this.edgesMap[i])===null||c===void 0?void 0:c.model;l==null||l.setSelected(!0)}},{key:"selectElementById",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0&&arguments[1];c||this.clearSelectElements();var s=this.getElement(i);s==null||s.setSelected(!0)}},{key:"clearSelectElements",value:function(){var i;this.selectElements.forEach(function(c){c==null||c.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===uo.DEFAULT&&((i=this.topElement)===null||i===void 0||i.setZIndex())}},{key:"moveNodes",value:function(i,c,s){for(var l=this,h=arguments.length>3&&arguments[3]!==void 0&&arguments[3],v=i.reduce(function(Pe,We){var st=l.nodesMap[We].model.getMoveDistance(c,s,h);return Pe[We]=st,Pe},{}),O=0;O<this.edges.length;O++){var w=this.edges[O],j=v[w.sourceNodeId],D=void 0,X=void 0;if(j){var te=mn(j,2);D=te[0],X=te[1],w.moveStartPoint(D,X)}var ce=v[w.targetNodeId];if(ce){var Se=mn(ce,2);D=Se[0],X=Se[1],w.moveEndPoint(D,X)}(j||ce)&&w.moveText(D,X)}}},{key:"addNodeMoveRules",value:function(i){this.nodeMoveRules.includes(i)||this.nodeMoveRules.push(i)}},{key:"setDefaultEdgeType",value:function(i){this.edgeType=i}},{key:"changeNodeType",value:function(i,c){var s=this.getNodeModelById(i);if(s){var l=s.getData();l.type=c;var h=this.getModel(c);if(!h)throw new Error("".concat(c,""));var v=new h(l,this);this.nodes.splice(this.nodesMap[i].index,1,v),this.getNodeEdges(i).forEach(function(O){if(O.sourceNodeId===i){var w=vp(v,O.startPoint,v.width,v.height);O.updateStartPoint(w)}if(O.targetNodeId===i){var j=vp(v,O.endPoint,v.width,v.height);O.updateEndPoint(j)}})}}},{key:"changeEdgeType",value:function(i,c){var s=this.getEdgeModelById(i);if(s&&s.type!==c){var l=s.getData();l.type=c;var h=this.getModel(c);if(!h)throw new Error("".concat(c,""));delete l.pointsList;var v=new h(l,this);this.edges.splice(this.edgesMap[i].index,1,v)}}},{key:"getNodeIncomingEdge",value:function(i){var c=[];return this.edges.forEach(function(s){s.targetNodeId===i&&c.push(s)}),c}},{key:"getNodeOutgoingEdge",value:function(i){var c=[];return this.edges.forEach(function(s){s.sourceNodeId===i&&c.push(s)}),c}},{key:"getNodeIncomingNode",value:function(i){var c=this,s=[];return this.edges.forEach(function(l){l.targetNodeId===i&&s.push(c.nodesMap[l.sourceNodeId].model)}),s}},{key:"getNodeOutgoingNode",value:function(i){var c=this,s=[];return this.edges.forEach(function(l){l.sourceNodeId===i&&s.push(c.nodesMap[l.targetNodeId].model)}),s}},{key:"setTheme",value:function(i){this.theme=Af(cr(cr({},this.theme),i))}},{key:"resize",value:function(i,c){this.width=i||this.rootEl.getBoundingClientRect().width,this.height=c||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var i=this.nodes,c=[],s=[];i.forEach(function(j){var D=j.x,X=j.y,te=j.width,ce=j.height,Se=j.getNodeStyle().strokeWidth,Pe=Se===void 0?0:Se;c=c.concat([D+te/2+Pe,D-te/2-Pe]),s=s.concat([X+ce/2+Pe,X-ce/2-Pe])});var l=Math.min.apply(Math,jr(c)),h=Math.max.apply(Math,jr(c)),v=Math.min.apply(Math,jr(s)),O=h-l||0,w=Math.max.apply(Math,jr(s))-v||0;return{virtualRectWidth:O,virtualRectHeight:w,virtualRectCenterPositionX:l+O/2,virtualRectCenterPositionY:v+w/2}}},{key:"translateCenter",value:function(){var i=this.nodes,c=this.width,s=this.height,l=this.rootEl,h=this.transformModel;if(i.length){var v=c||l.clientWidth,O=s||l.clientHeight,w=this.getVirtualRectSize(),j=w.virtualRectCenterPositionX,D=w.virtualRectCenterPositionY;h.focusOn(j,D,v,O)}}},{key:"fitView",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,s=this.nodes,l=this.width,h=this.height,v=this.rootEl,O=this.transformModel;if(s.length){var w=l||v.clientWidth,j=h||v.clientHeight,D=this.getVirtualRectSize(),X=D.virtualRectWidth,te=D.virtualRectHeight,ce=D.virtualRectCenterPositionX,Se=D.virtualRectCenterPositionY,Pe=(X+c)/w,We=(te+i)/j,st=0;st=1/Math.max(Pe,We);var Ct=[w/2,j/2];O.zoom(st,Ct),O.focusOn(ce,Se,w,j)}}},{key:"openEdgeAnimation",value:function(i){this.getEdgeModelById(i).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(i){this.getEdgeModelById(i).closeEdgeAnimation()}}],n&&Qo(t.prototype,n),e}(),kt=I(be.prototype,"width",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=I(be.prototype,"height",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ir=I(be.prototype,"edgeType",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vr=I(be.prototype,"nodes",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mr=I(be.prototype,"edges",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cn=I(be.prototype,"overlapMode",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return uo.DEFAULT}}),En=I(be.prototype,"background",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=I(be.prototype,"transformModel",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vn=I(be.prototype,"editConfigModel",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=I(be.prototype,"gridSize",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),fn=I(be.prototype,"partial",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gn=I(be.prototype,"fakerNode",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I(be.prototype,"nodesMap",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"nodesMap"),be.prototype),I(be.prototype,"edgesMap",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"edgesMap"),be.prototype),I(be.prototype,"modelsMap",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"modelsMap"),be.prototype),I(be.prototype,"sortElements",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"sortElements"),be.prototype),I(be.prototype,"textEditElement",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"textEditElement"),be.prototype),I(be.prototype,"selectElements",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"selectElements"),be.prototype),I(be.prototype,"selectNodes",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"selectNodes"),be.prototype),I(be.prototype,"setFakerNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setFakerNode"),be.prototype),I(be.prototype,"removeFakerNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"removeFakerNode"),be.prototype),I(be.prototype,"setModel",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setModel"),be.prototype),I(be.prototype,"toFront",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"toFront"),be.prototype),I(be.prototype,"setElementZIndex",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setElementZIndex"),be.prototype),I(be.prototype,"deleteNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteNode"),be.prototype),I(be.prototype,"addNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"addNode"),be.prototype),I(be.prototype,"cloneNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"cloneNode"),be.prototype),I(be.prototype,"moveNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveNode"),be.prototype),I(be.prototype,"moveNode2Coordinate",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveNode2Coordinate"),be.prototype),I(be.prototype,"editText",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"editText"),be.prototype),I(be.prototype,"addEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"addEdge"),be.prototype),I(be.prototype,"moveEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveEdge"),be.prototype),I(be.prototype,"deleteEdgeBySourceAndTarget",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeBySourceAndTarget"),be.prototype),I(be.prototype,"deleteEdgeById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeById"),be.prototype),I(be.prototype,"deleteEdgeBySource",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeBySource"),be.prototype),I(be.prototype,"deleteEdgeByTarget",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeByTarget"),be.prototype),I(be.prototype,"setElementStateById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setElementStateById"),be.prototype),I(be.prototype,"updateText",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"updateText"),be.prototype),I(be.prototype,"selectNodeById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"selectNodeById"),be.prototype),I(be.prototype,"selectEdgeById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"selectEdgeById"),be.prototype),I(be.prototype,"selectElementById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"selectElementById"),be.prototype),I(be.prototype,"clearSelectElements",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"clearSelectElements"),be.prototype),I(be.prototype,"moveNodes",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveNodes"),be.prototype),I(be.prototype,"setDefaultEdgeType",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setDefaultEdgeType"),be.prototype),I(be.prototype,"changeNodeType",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"changeNodeType"),be.prototype),I(be.prototype,"changeEdgeType",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"changeEdgeType"),be.prototype),I(be.prototype,"getNodeIncomingEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeIncomingEdge"),be.prototype),I(be.prototype,"getNodeOutgoingEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeOutgoingEdge"),be.prototype),I(be.prototype,"getNodeIncomingNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeIncomingNode"),be.prototype),I(be.prototype,"getNodeOutgoingNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeOutgoingNode"),be.prototype),I(be.prototype,"setTheme",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setTheme"),be.prototype),I(be.prototype,"resize",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"resize"),be.prototype),I(be.prototype,"clearData",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"clearData"),be.prototype),I(be.prototype,"translateCenter",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"translateCenter"),be.prototype),I(be.prototype,"fitView",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"fitView"),be.prototype),I(be.prototype,"openEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"openEdgeAnimation"),be.prototype),I(be.prototype,"closeEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"closeEdgeAnimation"),be.prototype),be),Er=Nt;function H(e){return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(e)}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},R.apply(this,arguments)}function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ge(e,t){return ge=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ge(e,t)}function we(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=le(e);if(t){var c=le(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&(H(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}function ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},le(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J,G=hi(ke=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ge(s,l)})(c,e);var t,n,i=we(c);function c(s){var l;(function(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")})(this,c),U(ee(l=i.call(this)),"stepDrag",void 0),U(ee(l),"stepScrollX",0),U(ee(l),"stepScrollY",0),U(ee(l),"onDragging",function(w){var j=w.deltaX,D=w.deltaY;l.setState({isDragging:!0});var X=l.props.graphModel,te=X.transformModel;X.editConfigModel.stopMoveGraph||te.translate(j,D)}),U(ee(l),"onDragEnd",function(){l.setState({isDragging:!1})}),U(ee(l),"zoomHandler",function(w){var j=l.props,D=j.graphModel,X=D.editConfigModel,te=D.transformModel,ce=D.gridSize,Se=j.graphModel,Pe=w.deltaX,We=w.deltaY;if(X.stopScrollGraph||w.ctrlKey===!0){if(!X.stopZoomGraph){w.preventDefault();var st=Se.getPointByClient({x:w.clientX,y:w.clientY}).canvasOverlayPosition,Ct=st.x,Et=st.y;te.zoom(w.deltaY<0,[Ct,Et])}}else{if(w.preventDefault(),l.stepScrollX+=Pe,l.stepScrollY+=We,Math.abs(l.stepScrollX)>=ce){var qt=l.stepScrollX%ce,Rt=l.stepScrollX-qt;te.translate(-Rt*te.SCALE_X,0),l.stepScrollX=qt}if(Math.abs(l.stepScrollY)>=ce){var wt=l.stepScrollY%ce,hr=l.stepScrollY-wt;te.translate(0,-hr*te.SCALE_Y),l.stepScrollY=wt}}}),U(ee(l),"clickHandler",function(w){if(w.target.getAttribute("name")==="canvas-overlay"){var j=l.props.graphModel;j.selectElements.size>0&&j.clearSelectElements(),j.eventCenter.emit(tr.BLANK_CLICK,{e:w})}}),U(ee(l),"handleContextMenu",function(w){if(w.target.getAttribute("name")==="canvas-overlay"){w.preventDefault();var j=l.props.graphModel,D=j.getPointByClient({x:w.clientX,y:w.clientY});j.eventCenter.emit(tr.BLANK_CONTEXTMENU,{e:w,position:D})}}),U(ee(l),"mouseDownHandler",function(w){var j=l.props.graphModel,D=j.eventCenter,X=j.editConfigModel,te=j.transformModel.SCALE_X,ce=j.gridSize,Se=w.target,Pe=!X.adjustEdge&&!X.adjustNodePosition;(Se.getAttribute("name")==="canvas-overlay"||Pe)&&(X.stopMoveGraph?D.emit(tr.BLANK_MOUSEDOWN,{e:w}):(l.stepDrag.setStep(ce*te),l.stepDrag.handleMouseDown(w)),l.clickHandler(w))});var h=s.graphModel,v=h.gridSize,O=h.eventCenter;return l.stepDrag=new Yr({onDragging:l.onDragging,onDragEnd:l.onDragEnd,step:v,eventType:"BLANK",isStopPropagation:!1,eventCenter:O,model:null}),l.state={isDragging:!1},l}return t=c,(n=[{key:"render",value:function(){var s=this.props.graphModel.transformModel.getTransformStyle().transform,l=this.props,h=l.children,v=l.dnd,O=this.state.isDragging;return Object(_e.g)("svg",R({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:O?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},v.eventMap()),Object(_e.g)("g",{transform:s},h))}}])&&re(t.prototype,n),c}(_e.a))||ke;function he(e){return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $e(e,t){return $e=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},$e(e,t)}function Ue(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Bt(e);if(t){var c=Bt(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ut(this,n)}}function ut(e,t){if(t&&(he(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bt(e)}var dr=hi(J=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&$e(s,l)})(c,e);var t,n,i=Ue(c);function c(){return Ae(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var s=this.props,l=s.tool,h=s.graphModel,v=l.getTools().map(function(O){return Object(_e.g)(O,{graphModel:h,logicFlow:l.instance})});return l.components=v,v}},{key:"triggerToolRender",value:function(){var s=this.props,l=s.tool,h=s.graphModel,v=document.querySelector("#ToolOverlay_".concat(h.flowId)),O=l.getInstance();O.components.forEach(function(w){return w(O,v)}),O.components=[]}},{key:"render",value:function(){var s=this.props.graphModel;return Object(_e.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(s.flowId)},this.getTools())}}])&&Ve(t.prototype,n),c}(_e.a))||J;function It(e){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(e)}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nr(e,t){return Nr=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Nr(e,t)}function an(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=qa(e);if(t){var c=qa(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return eo(this,n)}}function eo(e,t){if(t&&(It(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function qa(e){return qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qa(e)}var bo,Ap=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Nr(s,l)})(c,e);var t,n,i=an(c);function c(){return Kt(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var s=this.props.background;return Object(_e.g)("div",{className:"lf-background"},Object(_e.g)("div",{style:s,className:"lf-background-area"}))}}])&&fr(t.prototype,n),c}(_e.a);function _o(e){return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(e)}function Pp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Uh(e,t){return Uh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Uh(e,t)}function pO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=jp(e);if(t){var c=jp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return dO(this,n)}}function dO(e,t){if(t&&(_o(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wg(e)}function Wg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jp(e){return jp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jp(e)}function hO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yg=hi(bo=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Uh(s,l)})(c,e);var t,n,i=pO(c);function c(){var s;Pp(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return hO(Wg(s=i.call.apply(i,[this].concat(h))),"id",fi()),s}return t=c,(n=[{key:"renderDot",value:function(){var s=this.props,l=s.config,h=l.color,v=l.thickness,O=v===void 0?2:v,w=s.size,j=s.visible,D=Math.min(Math.max(2,O),w/2),X=1;return j||(X=0),Object(_e.g)("rect",{width:D,height:D,rx:D/2,ry:D/2,fill:h,opacity:X})}},{key:"renderMesh",value:function(){var s=this.props,l=s.config,h=l.color,v=l.thickness,O=v===void 0?1:v,w=s.size,j=s.visible,D=Math.min(Math.max(1,O),w/2),X="M ".concat(w," 0 H0 M0 0 V0 ").concat(w),te=1;return j||(te=0),Object(_e.g)("path",{d:X,stroke:h,strokeWidth:D,opacity:te})}},{key:"render",value:function(){var s=this.props,l=s.type,h=s.size,v=s.graphModel.transformModel,O=[v.SCALE_X,v.SKEW_Y,v.SKEW_X,v.SCALE_Y,v.TRANSLATE_X,v.TRANSLATE_Y].join(","),w="matrix(".concat(O,")");return Object(_e.g)("div",{className:"lf-grid"},Object(_e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(_e.g)("defs",null,Object(_e.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:w,x:"0",y:"0",width:h,height:h},l==="dot"&&this.renderDot(),l==="mesh"&&this.renderMesh())),Object(_e.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&lO(t.prototype,n),c}(_e.a))||bo;Yg.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},o(52);function zh(e){return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}function yO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return $g(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return $g(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $g(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Kg,uc=function(e){var t={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(n){var i=yO(n,2),c=i[0],s=i[1];(c==="style"||zh(s)!=="object")&&(t[c]=s)}),Object(_e.g)("line",t)};function Hh(e){return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hh(e)}function qg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Np(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qg(Object(n),!0).forEach(function(i){vO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function vO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xh(e,t){return Xh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Xh(e,t)}function bO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Mp(e);if(t){var c=Mp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return _O(this,n)}}function _O(e,t){if(t&&(Hh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Mp(e){return Mp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mp(e)}var Zg,EO=hi(Kg=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Xh(s,l)})(c,e);var t,n,i=bO(c);function c(){return gO(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var s=this.props.snaplineModel,l=s.position,h=s.isShowHorizontal,v=s.isShowVertical,O=s.getStyle(),w=l.x,j=w===void 0?0:w,D=l.y,X=D===void 0?0:D,te=Np(Np({x1:-1e5,y1:X,x2:1e5,y2:X},O),{},{stroke:h?O.stroke:"none"}),ce=Np(Np({x1:j,y1:-1e5,x2:j,y2:1e5},O),{},{stroke:v?O.stroke:"none"});return Object(_e.g)("g",{className:"lf-snapline"},Object(_e.g)(uc,te),Object(_e.g)(uc,ce))}}])&&mO(t.prototype,n),c}(_e.a))||Kg;function Vh(e){return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(e)}function OO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Qg(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Qg(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qg(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Za(e){var t=e.x,n=e.y,i=e.width,c=e.height,s=e.className,l=e.radius,h=t-i/2,v=n-c/2,O={};return Object.entries(e).forEach(function(w){var j=OO(w,2),D=j[0],X=j[1];Vh(X)!=="object"&&(O[D]=X)}),O.className=s?"lf-basic-shape ".concat(s):"lf-basic-shape",l&&(O.rx=l,O.ry=l),O.x=h,O.y=v,Object(_e.g)("rect",O)}function Wh(e){return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(e)}function sc(){return sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sc.apply(this,arguments)}function Jg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jg(Object(n),!0).forEach(function(i){wO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jg(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function wO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yh(e,t){return Yh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Yh(e,t)}function TO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Rp(e);if(t){var c=Rp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return AO(this,n)}}function AO(e,t){if(t&&(Wh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Rp(e){return Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rp(e)}Za.defaultProps={className:"",radius:""};var tm,PO=hi(Zg=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Yh(s,l)})(c,e);var t,n,i=TO(c);function c(){return xO(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getNodesOutline",value:function(){var s=this.props.graphModel,l=s.nodes,h=s.editConfigModel,v=h.hoverOutline,O=h.nodeSelectedOutline,w=[];return l.forEach(function(j){if(j.isHovered||j.isSelected){var D=j.isHovered,X=j.isSelected,te=j.x,ce=j.y,Se=j.width,Pe=j.height;if(O&&X||v&&D){var We=j.getOutlineStyle(),st={};if(Object.keys(We).forEach(function(Et){Et!=="hover"&&(st[Et]=We[Et])}),D){var Ct=We.hover;st=em(em({},st),Ct)}w.push(Object(_e.g)(Za,sc({className:"lf-outline-node",x:te,y:ce,width:Se+10,height:Pe+10},st)))}}}),w}},{key:"getEdgeOutline",value:function(){for(var s=this.props.graphModel,l=s.edges,h=s.editConfigModel,v=h.edgeSelectedOutline,O=h.hoverOutline,w=[],j=0;j<l.length;j++){var D=l[j];(v&&D.isSelected||O&&D.isHovered)&&(D.modelType===Pr.LINE_EDGE?w.push(this.getLineOutline(D)):D.modelType===Pr.POLYLINE_EDGE?w.push(this.getPolylineOutline(D)):D.modelType===Pr.BEZIER_EDGE&&w.push(this.getBezierOutline(D)))}return w}},{key:"getLineOutline",value:function(s){var l=s.startPoint,h=s.endPoint,v=(l.x+h.x)/2,O=(l.y+h.y)/2,w=Math.abs(l.x-h.x)+10,j=Math.abs(l.y-h.y)+10,D=s.getOutlineStyle();return Object(_e.g)(Za,sc({className:"lf-outline-edge",x:v,y:O,width:w,height:j},D))}},{key:"getPolylineOutline",value:function(s){var l=s.points,h=me(l),v=Ka(h,8),O=v.x,w=v.y,j=v.width,D=v.height,X=s.getOutlineStyle();return Object(_e.g)(Za,sc({className:"lf-outline",x:O,y:w,width:j,height:D},X))}},{key:"getBezierOutline",value:function(s){var l=s.path,h=St(l),v=Ka(h,8),O=v.x,w=v.y,j=v.width,D=v.height,X=s.getOutlineStyle();return Object(_e.g)(Za,sc({className:"lf-outline",x:O,y:w,width:j,height:D},X))}},{key:"render",value:function(){return Object(_e.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&SO(t.prototype,n),c}(_e.a))||Zg;function $h(e){return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(e)}function jO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return rm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return rm(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Xf(e){var t=e.x,n=t===void 0?0:t,i=e.y,c=i===void 0?0:i,s=e.r,l=s===void 0?4:s,h=e.className,v={cx:n,cy:c,r:l,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(O){var w=jO(O,2),j=w[0],D=w[1];$h(D)!=="object"&&(v[j]=D)}),v.className=h?"lf-basic-shape ".concat(h):"lf-basic-shape",Object(_e.g)("circle",v)}function Kh(e){return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function NO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return nm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return nm(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Vf(){return Vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vf.apply(this,arguments)}function om(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function im(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function am(e,t,n){return t&&im(e.prototype,t),n&&im(e,n),e}function um(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qh(e,t)}function qh(e,t){return qh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},qh(e,t)}function sm(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Cp(e);if(t){var c=Cp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return MO(this,n)}}function MO(e,t){if(t&&(Kh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dp(e)}function Dp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cp(e){return Cp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Cp(e)}function Zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cm,fm=function(e){um(n,e);var t=sm(n);function n(){var i;return om(this,n),Zh(Dp(i=t.call(this)),"dragHandler",void 0),Zh(Dp(i),"onDragging",function(c){var s=c.event,l=i.props,h=l.graphModel,v=l.bezierModel,O=l.type,w=h.getPointByClient({x:s.clientX,y:s.clientY}).canvasOverlayPosition,j=w.x,D=w.y;v.updateAdjustAnchor({x:j,y:D},O)}),Zh(Dp(i),"onDragEnd",function(){i.props.bezierModel.isDragging=!1}),i.dragHandler=new Yr({onDragging:i.onDragging,onDragEnd:i.onDragEnd}),i}return am(n,[{key:"render",value:function(){var i=this,c=this.props.position,s=c.x,l=c.y,h=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(_e.g)(Xf,Vf({className:"lf-bezier-adjust-anchor",x:s,y:l},h,{onMouseDown:function(v){i.dragHandler.handleMouseDown(v)}}))}}]),n}(_e.a),RO=hi(tm=function(e){um(n,e);var t=sm(n);function n(){return om(this,n),t.apply(this,arguments)}return am(n,[{key:"getBezierAdjust",value:function(i,c){var s=i.path,l=i.id,h=NO(St(s),4),v=h[0],O=h[1],w=h[2],j=h[3],D=i.getEdgeStyle().adjustLine,X=[];return X.push(Object(_e.g)(uc,Vf({x1:v.x,y1:v.y,x2:O.x,y2:O.y},D))),X.push(Object(_e.g)(fm,{position:O,bezierModel:i,graphModel:c,key:"".concat(l,"_ePre"),type:"sNext"})),X.push(Object(_e.g)(uc,Vf({x1:j.x,y1:j.y,x2:w.x,y2:w.y},D))),X.push(Object(_e.g)(fm,{position:w,bezierModel:i,graphModel:c,key:"".concat(l,"_sNext"),type:"ePre"})),X}},{key:"selectedBezierEdge",value:function(){for(var i=this.props.graphModel,c=i.edges,s=[],l=0;l<c.length;l++){var h=c[l];h.isSelected&&h.modelType===Pr.BEZIER_EDGE&&h.draggable&&s.push(this.getBezierAdjust(h,i))}return s}},{key:"render",value:function(){return Object(_e.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),n}(_e.a))||tm;function Qh(e){return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function DO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jh(e,t){return Jh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Jh(e,t)}function IO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ip(e);if(t){var c=Ip(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return kO(this,n)}}function kO(e,t){if(t&&(Qh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ip(e){return Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ip(e)}var lm,LO=hi(cm=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Jh(s,l)})(c,e);var t,n,i=IO(c);function c(){return DO(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var s=this.props.graphModel.transformModel.getTransformStyle().transform,l=this.props.children;return Object(_e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(_e.g)("g",{transform:s},l))}}])&&CO(t.prototype,n),c}(_e.a))||cm;function ey(e){return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ey(e)}function ty(){return ty=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ty.apply(this,arguments)}function BO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ry(e,t){return ry=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ry(e,t)}function GO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=kp(e);if(t){var c=kp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return UO(this,n)}}function UO(e,t){if(t&&(ey(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function kp(e){return kp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},kp(e)}var zO=hi(lm=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ry(s,l)})(c,e);var t,n,i=GO(c);function c(){return BO(this,c),i.apply(this,arguments)}return t=c,n=[{key:"getComponent",value:function(s,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",v=this.props.getView,O=v(s.type);return Object(_e.g)(O,{key:s.id,model:s,graphModel:l,overlay:h})}},{key:"render",value:function(){var s=this,l=this.props,h=l.graphModel,v=l.tool,O=l.options,w=l.dnd,j=l.snaplineModel,D={};O.width&&(D.width="".concat(h.width,"px")),O.height&&(D.height="".concat(h.height,"px"));var X=O.grid,te=h.fakerNode,ce=h.editConfigModel.adjustEdge;return Object(_e.g)("div",{className:"lf-graph","flow-id":h.flowId,style:D},Object(_e.g)(G,{graphModel:h,dnd:w},Object(_e.g)("g",{className:"lf-base"},Ns(h.sortElements,function(Se){return s.getComponent(Se,h)})),te?this.getComponent(te,h):""),Object(_e.g)(LO,{graphModel:h},Object(_e.g)(PO,{graphModel:h}),ce?Object(_e.g)(RO,{graphModel:h}):"",O.snapline!==!1?Object(_e.g)(EO,{snaplineModel:j}):""),Object(_e.g)(dr,{graphModel:h,tool:v}),O.background&&Object(_e.g)(Ap,{background:O.background}),O.grid&&Object(_e.g)(Yg,ty({},X,{graphModel:h})))}}],n&&FO(t.prototype,n),c}(_e.a))||lm,HO=zO;function pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Lp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pm(Object(n),!0).forEach(function(i){ua(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pm(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function XO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VO=function(){function e(i){var c=this;(function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")})(this,e),ua(this,"nodeConfig",void 0),ua(this,"lf",void 0),ua(this,"fakerNode",void 0),ua(this,"stopDrag",function(){c.nodeConfig=null,window.document.removeEventListener("mouseup",c.stopDrag)}),ua(this,"dragEnter",function(l){c.nodeConfig&&!c.fakerNode&&(c.fakerNode=c.lf.createFakerNode(Lp(Lp({},c.nodeConfig),c.clientToLocalPoint({x:l.clientX,y:l.clientY}))))}),ua(this,"onDragOver",function(l){if(l.preventDefault(),c.fakerNode){var h=c.clientToLocalPoint({x:l.clientX,y:l.clientY}),v=h.x,O=h.y;c.fakerNode.moveTo(v,O);var w=c.fakerNode.getData();c.lf.setNodeSnapLine(w),c.lf.graphModel.eventCenter.emit(tr.NODE_DND_DRAG,{data:w})}return!1}),ua(this,"onDragLeave",function(){c.fakerNode&&(c.lf.removeNodeSnapLine(),c.lf.graphModel.removeFakerNode(),c.fakerNode=null)}),ua(this,"onDrop",function(l){if(c.lf.graphModel&&l&&c.nodeConfig){var h=c.lf.addNode(Lp(Lp({},c.nodeConfig),c.clientToLocalPoint({x:l.clientX,y:l.clientY})),tr.NODE_DND_ADD);l.preventDefault(),l.stopPropagation(),c.nodeConfig=null,c.lf.removeNodeSnapLine(),c.lf.graphModel.removeFakerNode(),c.fakerNode=null,h.getData()}});var s=i.lf;this.lf=s}var t,n;return t=e,(n=[{key:"clientToLocalPoint",value:function(i){var c=i.x,s=i.y,l=qc(this.lf.options,["grid","size"]),h=this.lf.graphModel.getPointByClient({x:c,y:s}).canvasOverlayPosition,v=h.x,O=h.y;return{x:ci(v,l),y:ci(O,l)}}},{key:"startDrag",value:function(i){this.nodeConfig=i,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&XO(t.prototype,n),e}();function dm(e){var t=e.container,n=e.grid,i=e.width,c=e.height;if(!t)throw new Error(" container ");if(typeof i=="string"||typeof c=="string")throw new Error("widthheight");return n&&(e.grid=Zn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},n)),Zn({},ym,e)}var Hr,hm,ym={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function ny(e){return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ny(e)}function oy(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return vm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return vm(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function gm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Bp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gm(Object(n),!0).forEach(function(i){mm(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gm(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function WO(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function YO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wf(){return Wf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=KO(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},Wf.apply(this,arguments)}function KO(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Qa(e))!==null;);return e}function iy(e,t){return iy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},iy(e,t)}function qO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Qa(e);if(t){var c=Qa(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ZO(this,n)}}function ZO(e,t){if(t&&(ny(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fp(e)}function Fp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qa(e)}function mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function li(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var ay=(Hr=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&iy(s,l)})(c,e);var t,n,i=qO(c);function c(){var s;YO(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return mm(Fp(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.BEZIER_EDGE),WO(Fp(s),"path",hm,Fp(s)),s}return t=c,(n=[{key:"initEdgeData",value:function(s){this.offset=100,Wf(Qa(c.prototype),"initEdgeData",this).call(this,s)}},{key:"getEdgeStyle",value:function(){var s=this.graphModel.theme.bezier;return Bp(Bp({},Wf(Qa(c.prototype),"getEdgeStyle",this).call(this)),nn(s))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var s=0,l=0;return this.pointsList.forEach(function(h){var v=h.x,O=h.y;s+=v,l+=O}),{x:s/this.pointsList.length,y:l/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var s=Wf(Qa(c.prototype),"getData",this).call(this),l=this.pointsList.map(function(h){return{x:h.x,y:h.y}});return Bp(Bp({},s),{},{pointsList:l})}},{key:"getControls",value:function(){var s=this.startPoint,l=this.endPoint;return qe({start:s,end:l,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(s){var l=oy(s,4),h=l[0],v=l[1],O=l[2],w=l[3];return"M ".concat(h.x," ").concat(h.y,`
    C `).concat(v.x," ").concat(v.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(w.x," ").concat(w.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var s=this.getControls(),l=s.sNext,h=s.ePre;this.updatePath(l,h)}},{key:"updatePath",value:function(s,l){s=nn(s),l=nn(l);var h={x:this.startPoint.x,y:this.startPoint.y},v={x:this.endPoint.x,y:this.endPoint.y};if(!s||!l){var O=this.getControls();s=O.sNext,l=O.ePre}this.pointsList=[h,s,l,v],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(s){this.startPoint=s,this.updatePoints()}},{key:"updateEndPoint",value:function(s){this.endPoint=s,this.updatePoints()}},{key:"moveStartPoint",value:function(s,l){this.startPoint.x+=s,this.startPoint.y+=l;var h=oy(this.pointsList,3),v=h[1],O=h[2];v.x+=s,v.y+=l,this.updatePath(v,O)}},{key:"moveEndPoint",value:function(s,l){this.endPoint.x+=s,this.endPoint.y+=l;var h=oy(this.pointsList,3),v=h[1],O=h[2];O.x+=s,O.y+=l,this.updatePath(v,O)}},{key:"updateAdjustAnchor",value:function(s,l){l==="sNext"?this.pointsList[1]=s:l==="ePre"&&(this.pointsList[2]=s),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var s=this.pointsList;return s[s.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var l=s.startPoint,h=s.endPoint,v=s.sourceNode,O=s.targetNode,w=qe({start:l,end:h,sourceNode:v,targetNode:O,offset:this.offset}),j=w.sNext,D=w.ePre;this.pointsList=[l,j,D,h],this.initPoints()}}])&&$O(t.prototype,n),c}(Xa),hm=li(Hr.prototype,"path",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),li(Hr.prototype,"initPoints",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"initPoints"),Hr.prototype),li(Hr.prototype,"updatePoints",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updatePoints"),Hr.prototype),li(Hr.prototype,"updateStartPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateStartPoint"),Hr.prototype),li(Hr.prototype,"updateEndPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateEndPoint"),Hr.prototype),li(Hr.prototype,"moveStartPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveStartPoint"),Hr.prototype),li(Hr.prototype,"moveEndPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveEndPoint"),Hr.prototype),li(Hr.prototype,"updateAdjustAnchor",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAdjustAnchor"),Hr.prototype),li(Hr.prototype,"getAdjustStart",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustStart"),Hr.prototype),li(Hr.prototype,"getAdjustEnd",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustEnd"),Hr.prototype),li(Hr.prototype,"updateAfterAdjustStartAndEnd",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAfterAdjustStartAndEnd"),Hr.prototype),Hr),Dt,bm,_m,Em,Om,wm,xm,Sm,Tm,Am,Pm,jm,Nm,Mm,Rm,Dm,Cm,Im,km,Lm,QO=function(e){return e==null};function uy(e){return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(e)}function JO(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(v,O){if(v){if(typeof v=="string")return Bm(v,O);var w=Object.prototype.toString.call(v).slice(8,-1);if(w==="Object"&&v.constructor&&(w=v.constructor.name),w==="Map"||w==="Set")return Array.from(v);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return Bm(v,O)}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,c=function(){};return{s:c,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(v){throw v},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,l=!0,h=!1;return{s:function(){n=n.call(e)},n:function(){var v=n.next();return l=v.done,v},e:function(v){h=!0,s=v},f:function(){try{l||n.return==null||n.return()}finally{if(h)throw s}}}}function Bm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fm(Object(n),!0).forEach(function(i){Ro(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function zn(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function e1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var sa,Gm,ca=(Dt=function(){function e(i,c){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),Ro(this,"id",""),zn(this,"type",bm,this),zn(this,"x",_m,this),zn(this,"y",Em,this),zn(this,"text",Om,this),zn(this,"properties",wm,this),zn(this,"_width",xm,this),zn(this,"_height",Sm,this),zn(this,"anchorsOffset",Tm,this),zn(this,"isSelected",Am,this),zn(this,"isHovered",Pm,this),zn(this,"isShowAnchor",jm,this),zn(this,"isDragging",Nm,this),zn(this,"isHitable",Mm,this),zn(this,"draggable",Rm,this),zn(this,"visible",Dm,this),Ro(this,"virtual",!1),Ro(this,"graphModel",void 0),zn(this,"zIndex",Cm,this),zn(this,"state",Im,this),zn(this,"autoToFront",km,this),zn(this,"style",Lm,this),Ro(this,"BaseType",xn.NODE),Ro(this,"modelType",Pr.NODE),Ro(this,"additionStateData",void 0),Ro(this,"targetRules",[]),Ro(this,"sourceRules",[]),Ro(this,"moveRules",[]),Ro(this,"hasSetTargetRules",!1),Ro(this,"hasSetSourceRules",!1),this.graphModel=c,this.initNodeData(i),this.setAttributes()}var t,n;return t=e,n=[{key:"width",get:function(){return this._width},set:function(i){this._width=i}},{key:"height",get:function(){return this._height},set:function(i){this._height=i}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(i){if(i.properties||(i.properties={}),!i.id){var c=this.graphModel.idGenerator,s=c&&c(i.type),l=this.createId();i.id=l||s||fi()}this.formatText(i),Zn(this,function(h){return Au(h,["id","type","x","y","text","properties","virtual"])}(i)),this.graphModel.overlapMode===uo.INCREASE&&(this.zIndex=i.zIndex||Ha())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(i){i.text||(i.text={value:"",x:i.x,y:i.y,draggable:!1,editable:!0}),i.text&&typeof i.text=="string"?i.text={value:i.text,x:i.x,y:i.y,draggable:!1,editable:!0}:i.text&&i.text.editable===void 0&&(i.text.editable=!0)}},{key:"getData",value:function(){var i=this.text,c=i.x,s=i.y,l=i.value,h=this.properties;Object(d.x)(h)&&(h=Object(d.I)(h));var v={id:this.id,type:this.type,x:this.x,y:this.y,properties:h};return this.graphModel.overlapMode===uo.INCREASE&&(v.zIndex=this.zIndex),l&&(v.text={x:c,y:s,value:l}),v}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(d.I)(this.properties)}},{key:"getNodeStyle",value:function(){return Eo(Eo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var i=this.graphModel.theme.nodeText;return nn(i)}},{key:"getAnchorStyle",value:function(i){var c=this.graphModel.theme.anchor;return nn(c)}},{key:"getAnchorLineStyle",value:function(i){var c=this.graphModel.theme.anchorLine;return nn(c)}},{key:"getOutlineStyle",value:function(){var i=this.graphModel.theme.outline;return nn(i)}},{key:"isAllowConnectedAsSource",value:function(i,c,s,l){var h=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var v,O=!0,w=0;w<h.length;w++){var j=h[w];if(!j.validate.call(this,this,i,c,s,l)){O=!1,v=j.message;break}}return{isAllPass:O,msg:v}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(i,c,s,l){var h=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var v,O=!0,w=0;w<h.length;w++){var j=h[w];if(!j.validate.call(this,i,this,c,s,l)){O=!1,v=j.message;break}}return{isAllPass:O,msg:v}}},{key:"isAllowMoveNode",value:function(i,c){var s,l=!0,h=!0,v=JO(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(v.s();!(s=v.n()).done;){var O=(0,s.value)(this,i,c);if(!O)return!1;if(uy(O)==="object"){var w=O;if(w.x===!1&&w.y===!1)return!1;l=l&&w.x,h=h&&w.y}}}catch(j){v.e(j)}finally{v.f()}return{x:l,y:h}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var i=this.anchorsOffset,c=this.id,s=this.x,l=this.y;return i&&i.length>0?i.map(function(h,v){return h.length?(h=h,{id:"".concat(c,"_").concat(v),x:s+h[0],y:l+h[1]}):Eo(Eo({},h=h),{},{x:s+h.x,y:l+h.y,id:h.id||"".concat(c,"_").concat(v)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(i){return function(c,s){for(var l,h=qs(s),v=Number.MAX_SAFE_INTEGER,O=0;O<h.length;O++){var w=Qn(c.x,c.y,h[O].x,h[O].y);w<v&&(v=w,l={index:O,anchor:Ys(Ys({},h[O]),{},{x:h[O].x,y:h[O].y,id:h[O].id})})}return l}(i,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(i){if(!QO(i))for(var c=0;c<this.anchors.length;c++){var s=this.anchors[c];if(s.id===i)return s}}},{key:"addNodeMoveRules",value:function(i){this.moveRules.includes(i)||this.moveRules.push(i)}},{key:"move",value:function(i,c){var s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=!1,h=!1;if(s)l=!0,h=!0;else{var v=this.isAllowMoveNode(i,c);typeof v=="boolean"?(l=v,h=v):(l=v.x,h=v.y)}if(l){var O=this.x+i;this.x=O,this.text&&this.moveText(i,0)}if(h){var w=this.y+c;this.y=w,this.text&&this.moveText(0,c)}return l||h}},{key:"getMoveDistance",value:function(i,c){var s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=!1,h=!1,v=0,O=0;if(s)l=!0,h=!0;else{var w=this.isAllowMoveNode(i,c);typeof w=="boolean"?(l=w,h=w):(l=w.x,h=w.y)}if(l&&i){var j=this.x+i;this.x=j,this.text&&this.moveText(i,0),v=i}if(h&&c){var D=this.y+c;this.y=D,this.text&&this.moveText(0,c),O=c}return[v,O]}},{key:"moveTo",value:function(i,c){var s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=i-this.x,h=c-this.y;return!(!s&&!this.isAllowMoveNode(l,h)||(this.text&&this.text&&this.moveText(l,h),this.x=i,this.y=c,0))}},{key:"moveText",value:function(i,c){var s=this.text,l=s.x,h=s.y,v=s.value,O=s.draggable,w=s.editable;this.text={value:v,editable:w,draggable:O,x:l+i,y:h+c}}},{key:"updateText",value:function(i){this.text=Eo(Eo({},Object(d.I)(this.text)),{},{value:i})}},{key:"setSelected",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=i}},{key:"setHovered",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=i,this.setIsShowAnchor(i)}},{key:"setIsShowAnchor",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=i}},{key:"setHitable",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=i}},{key:"setElementState",value:function(i,c){this.state=i,this.additionStateData=c}},{key:"setProperty",value:function(i,c){this.properties=Eo(Eo({},Object(d.I)(this.properties)),{},Ro({},i,Xn(c))),this.setAttributes()}},{key:"setProperties",value:function(i){this.properties=Eo(Eo({},Object(d.I)(this.properties)),Xn(i)),this.setAttributes()}},{key:"deleteProperty",value:function(i){delete this.properties[i],this.setAttributes()}},{key:"setStyle",value:function(i,c){this.style=Eo(Eo({},this.style),{},Ro({},i,Xn(c)))}},{key:"setStyles",value:function(i){this.style=Eo(Eo({},this.style),Xn(i))}},{key:"updateStyles",value:function(i){this.style=Eo({},Xn(i))}},{key:"setZIndex",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=i}},{key:"updateAttributes",value:function(i){Zn(this,i)}}],n&&e1(t.prototype,n),e}(),bm=Dr(Dt.prototype,"type",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_m=Dr(Dt.prototype,"x",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Em=Dr(Dt.prototype,"y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Om=Dr(Dt.prototype,"text",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),wm=Dr(Dt.prototype,"properties",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),xm=Dr(Dt.prototype,"_width",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Sm=Dr(Dt.prototype,"_height",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Tm=Dr(Dt.prototype,"anchorsOffset",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Am=Dr(Dt.prototype,"isSelected",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pm=Dr(Dt.prototype,"isHovered",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jm=Dr(Dt.prototype,"isShowAnchor",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nm=Dr(Dt.prototype,"isDragging",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mm=Dr(Dt.prototype,"isHitable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Rm=Dr(Dt.prototype,"draggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Dm=Dr(Dt.prototype,"visible",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Cm=Dr(Dt.prototype,"zIndex",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Im=Dr(Dt.prototype,"state",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),km=Dr(Dt.prototype,"autoToFront",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Lm=Dr(Dt.prototype,"style",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Dr(Dt.prototype,"incoming",[d.m],Object.getOwnPropertyDescriptor(Dt.prototype,"incoming"),Dt.prototype),Dr(Dt.prototype,"outgoing",[d.m],Object.getOwnPropertyDescriptor(Dt.prototype,"outgoing"),Dt.prototype),Dr(Dt.prototype,"addNodeMoveRules",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"addNodeMoveRules"),Dt.prototype),Dr(Dt.prototype,"move",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"move"),Dt.prototype),Dr(Dt.prototype,"getMoveDistance",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getMoveDistance"),Dt.prototype),Dr(Dt.prototype,"moveTo",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveTo"),Dt.prototype),Dr(Dt.prototype,"moveText",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveText"),Dt.prototype),Dr(Dt.prototype,"updateText",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateText"),Dt.prototype),Dr(Dt.prototype,"setSelected",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setSelected"),Dt.prototype),Dr(Dt.prototype,"setHovered",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHovered"),Dt.prototype),Dr(Dt.prototype,"setIsShowAnchor",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setIsShowAnchor"),Dt.prototype),Dr(Dt.prototype,"setHitable",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHitable"),Dt.prototype),Dr(Dt.prototype,"setElementState",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setElementState"),Dt.prototype),Dr(Dt.prototype,"setProperty",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperty"),Dt.prototype),Dr(Dt.prototype,"setProperties",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperties"),Dt.prototype),Dr(Dt.prototype,"deleteProperty",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"deleteProperty"),Dt.prototype),Dr(Dt.prototype,"setStyle",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyle"),Dt.prototype),Dr(Dt.prototype,"setStyles",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyles"),Dt.prototype),Dr(Dt.prototype,"updateStyles",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStyles"),Dt.prototype),Dr(Dt.prototype,"setZIndex",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setZIndex"),Dt.prototype),Dr(Dt.prototype,"updateAttributes",[d.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAttributes"),Dt.prototype),Dt);function sy(e){return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(e)}function Um(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function zm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Um(Object(n),!0).forEach(function(i){Hm(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Um(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function t1(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function r1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cy(){return cy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=o1(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},cy.apply(this,arguments)}function o1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=cc(e))!==null;);return e}function fy(e,t){return fy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},fy(e,t)}function i1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=cc(e);if(t){var c=cc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return a1(this,n)}}function a1(e,t){if(t&&(sy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gp(e)}function Gp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cc(e){return cc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cc(e)}function Hm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ly(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var so,Xm,Vm,py=(sa=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&fy(s,l)})(c,e);var t,n,i=i1(c);function c(){var s;r1(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Hm(Gp(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.CIRCLE_NODE),t1(Gp(s),"r",Gm,Gp(s)),s}return t=c,(n=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var s=cy(cc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.circle;return zm(zm({},s),nn(l))}},{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.r;return[{x:s,y:l-h,id:"".concat(this.id,"_0")},{x:s+h,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+h,id:"".concat(this.id,"_2")},{x:s-h,y:l,id:"".concat(this.id,"_3")}]}}])&&n1(t.prototype,n),c}(ca),Gm=ly(sa.prototype,"r",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),ly(sa.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(sa.prototype,"width"),sa.prototype),ly(sa.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(sa.prototype,"height"),sa.prototype),sa);o(127);function dy(e){return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(e)}function hy(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Wm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Wm(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ym(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function $m(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ym(Object(n),!0).forEach(function(i){qm(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ym(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Km(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function u1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yy(){return yy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=c1(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},yy.apply(this,arguments)}function c1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=lc(e))!==null;);return e}function vy(e,t){return vy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},vy(e,t)}function f1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=lc(e);if(t){var c=lc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return l1(this,n)}}function l1(e,t){if(t&&(dy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fc(e)}function fc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lc(e){return lc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lc(e)}function qm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pc(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var Ri,Zm,Qm,gy=(so=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&vy(s,l)})(c,e);var t,n,i=f1(c);function c(){var s;u1(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return qm(fc(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.DIAMOND_NODE),Km(fc(s),"rx",Xm,fc(s)),Km(fc(s),"ry",Vm,fc(s)),s}return t=c,(n=[{key:"getNodeStyle",value:function(){var s=yy(lc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.diamond;return $m($m({},s),nn(l))}},{key:"points",get:function(){var s=this.x,l=this.y,h=this.rx,v=this.ry;return[[s,l-v],[s+h,l],[s,l+v],[s-h,l]]}},{key:"pointsPosition",get:function(){return this.points.map(function(s){return{x:s[0],y:s[1]}})}},{key:"width",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=hy(h,1)[0];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"height",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=hy(h,2)[1];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"getDefaultAnchor",value:function(){var s=this;return this.points.map(function(l,h){var v=hy(l,2);return{x:v[0],y:v[1],id:"".concat(s.id,"_").concat(h)}})}}])&&s1(t.prototype,n),c}(ca),Xm=pc(so.prototype,"rx",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Vm=pc(so.prototype,"ry",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),pc(so.prototype,"points",[d.m],Object.getOwnPropertyDescriptor(so.prototype,"points"),so.prototype),pc(so.prototype,"pointsPosition",[d.m],Object.getOwnPropertyDescriptor(so.prototype,"pointsPosition"),so.prototype),pc(so.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(so.prototype,"width"),so.prototype),pc(so.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(so.prototype,"height"),so.prototype),so);function my(e){return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},my(e)}function Jm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function eb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jm(Object(n),!0).forEach(function(i){rb(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jm(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function tb(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function p1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function by(){return by=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=h1(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},by.apply(this,arguments)}function h1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=hc(e))!==null;);return e}function _y(e,t){return _y=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_y(e,t)}function y1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=hc(e);if(t){var c=hc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return v1(this,n)}}function v1(e,t){if(t&&(my(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dc(e)}function dc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hc(e){return hc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hc(e)}function rb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Up(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var Jo,nb,Ey=(Ri=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&_y(s,l)})(c,e);var t,n,i=y1(c);function c(){var s;p1(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return rb(dc(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.ELLIPSE_NODE),tb(dc(s),"rx",Zm,dc(s)),tb(dc(s),"ry",Qm,dc(s)),s}return t=c,(n=[{key:"getNodeStyle",value:function(){var s=by(hc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.ellipse;return eb(eb({},s),nn(l))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.rx,v=this.ry;return[{x:s,y:l-v,id:"".concat(this.id,"_0")},{x:s+h,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+v,id:"".concat(this.id,"_2")},{x:s-h,y:l,id:"".concat(this.id,"_3")}]}}])&&d1(t.prototype,n),c}(ca),Zm=Up(Ri.prototype,"rx",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Qm=Up(Ri.prototype,"ry",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Up(Ri.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(Ri.prototype,"width"),Ri.prototype),Up(Ri.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(Ri.prototype,"height"),Ri.prototype),Ri);function Oy(e){return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oy(e)}function wy(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return ob(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ob(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ob(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ib(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function ab(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ib(Object(n),!0).forEach(function(i){ub(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ib(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function g1(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function m1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xy(){return xy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=_1(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},xy.apply(this,arguments)}function _1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=yc(e))!==null;);return e}function Sy(e,t){return Sy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Sy(e,t)}function E1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=yc(e);if(t){var c=yc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return O1(this,n)}}function O1(e,t){if(t&&(Oy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zp(e)}function zp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yc(e){return yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yc(e)}function ub(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hp(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var Ty,sb,Ay=(Jo=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Sy(s,l)})(c,e);var t,n,i=E1(c);function c(){var s;m1(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return ub(zp(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.POLYGON_NODE),g1(zp(s),"points",nb,zp(s)),s}return t=c,(n=[{key:"getNodeStyle",value:function(){var s=xy(yc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.polygon;return ab(ab({},s),nn(l))}},{key:"pointsPosition",get:function(){var s=this.x,l=this.y,h=this.width,v=this.height;return this.points.map(function(O){return{x:O[0]+s-h/2,y:O[1]+l-v/2}})}},{key:"width",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=wy(h,1)[0];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"height",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=wy(h,2)[1];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"getDefaultAnchor",value:function(){var s=this,l=this.x,h=this.y,v=this.width,O=this.height;return this.points.map(function(w,j){var D=wy(w,2),X=D[0],te=D[1];return{x:l+X-v/2,y:h+te-O/2,id:"".concat(s.id,"_").concat(j)}})}}])&&b1(t.prototype,n),c}(ca),nb=Hp(Jo.prototype,"points",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Hp(Jo.prototype,"pointsPosition",[d.m],Object.getOwnPropertyDescriptor(Jo.prototype,"pointsPosition"),Jo.prototype),Hp(Jo.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(Jo.prototype,"width"),Jo.prototype),Hp(Jo.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(Jo.prototype,"height"),Jo.prototype),Jo);function Py(e){return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Py(e)}function cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function fb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cb(Object(n),!0).forEach(function(i){lb(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function w1(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function x1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jy(){return jy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=T1(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},jy.apply(this,arguments)}function T1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=vc(e))!==null;);return e}function Ny(e,t){return Ny=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ny(e,t)}function A1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=vc(e);if(t){var c=vc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return P1(this,n)}}function P1(e,t){if(t&&(Py(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xp(e)}function Xp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vc(e){return vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vc(e)}function lb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ja,My=(Ty=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Ny(s,l)})(c,e);var t,n,i=A1(c);function c(){var s;x1(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return lb(Xp(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.RECT_NODE),w1(Xp(s),"radius",sb,Xp(s)),s}return t=c,(n=[{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.width,v=this.height;return[{x:s,y:l-v/2,id:"".concat(this.id,"_0")},{x:s+h/2,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+v/2,id:"".concat(this.id,"_2")},{x:s-h/2,y:l,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var s=jy(vc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.rect;return fb(fb({},s),nn(l))}}])&&S1(t.prototype,n),c}(ca),sb=function(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}(Ty.prototype,"radius",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ty);function Ry(e){return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ry(e)}function pb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function db(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pb(Object(n),!0).forEach(function(i){yb(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function j1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dy(){return Dy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var i=M1(e,t);if(i){var c=Object.getOwnPropertyDescriptor(i,t);return c.get?c.get.call(arguments.length<3?e:n):c.value}},Dy.apply(this,arguments)}function M1(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=gc(e))!==null;);return e}function Cy(e,t){return Cy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Cy(e,t)}function R1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=gc(e);if(t){var c=gc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return D1(this,n)}}function D1(e,t){if(t&&(Ry(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hb(e)}function hb(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gc(e){return gc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gc(e)}function yb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vb(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var Iy=(Ja=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Cy(s,l)})(c,e);var t,n,i=R1(c);function c(){var s;j1(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return yb(hb(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.TEXT_NODE),s}return t=c,(n=[{key:"getTextStyle",value:function(){var s=Dy(gc(c.prototype),"getTextStyle",this).call(this),l=this.graphModel.theme.text;return db(db({},s),nn(l))}},{key:"width",get:function(){var s=String(this.text.value).split(/[\r\n]/g),l=this.getTextStyle().fontSize;return Lf({rows:s,fontSize:l,rowsLength:s.length}).width}},{key:"height",get:function(){var s=String(this.text.value).split(/[\r\n]/g),l=this.getTextStyle().fontSize;return Lf({rows:s,fontSize:l,rowsLength:s.length}).height}}])&&N1(t.prototype,n),c}(ca),vb(Ja.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(Ja.prototype,"width"),Ja.prototype),vb(Ja.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(Ja.prototype,"height"),Ja.prototype),Ja);function ky(e){return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ky(e)}function C1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ly(e,t){return Ly=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ly(e,t)}function k1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Vp(e);if(t){var c=Vp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return L1(this,n)}}function L1(e,t){if(t&&(ky(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gb(e)}function gb(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vp(e)}function B1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pi,mb,bb,_b,By=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Ly(s,l)})(c,e);var t,n,i=k1(c);function c(){var s;C1(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return B1(gb(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.HTML_NODE),s}return t=c,(n=[{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.width,v=this.height;return[{x:s,y:l-v/2,id:"".concat(this.id,"_0")},{x:s+h/2,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+v/2,id:"".concat(this.id,"_2")},{x:s-h/2,y:l,id:"".concat(this.id,"_3")}]}}])&&I1(t.prototype,n),c}(ca);function Eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Fy(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function F1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yf(e,t,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(e,t,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(e,t,s),s=null),s}var wb=(pi=function(){function e(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,e),Ob(this,"graphModel",void 0),Fy(this,"isShowHorizontal",mb,this),Fy(this,"isShowVertical",bb,this),Fy(this,"position",_b,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=i}var t,n;return t=e,n=[{key:"getStyle",value:function(){return function(i){for(var c=1;c<arguments.length;c++){var s=arguments[c]!=null?arguments[c]:{};c%2?Eb(Object(s),!0).forEach(function(l){Ob(i,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):Eb(Object(s)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(s,l))})}return i}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(i,c){for(var s=i.x,l=i.y,h=!1,v=!1,O=0;O<c.length;O++){var w=c[O];if(w.id!==i.id&&(s===w.x&&(h=!0),l===w.y&&(v=!0),h&&v))break}return{isShowVertical:h,isShowHorizontal:v,position:{x:s,y:l}}}},{key:"getHorizontalSnapline",value:function(i,c){var s,l,h=!1,v=i.id;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)l=mo(O);else{var w=this.graphModel.getNodeModelById(v);l=mo(w)}}for(var j=0;j<c.length;j++){var D=c[j];if(D.id!==i.id){var X=mo(D);if(X.minY===l.minY||X.maxY===l.minY){h=!0,s=l.minY;break}if(X.minY===l.maxY||X.maxY===l.maxY){h=!0,s=l.maxY;break}}}return Zn({isShowHorizontal:h,position:{y:s}})}},{key:"getVerticalSnapline",value:function(i,c){var s,l,h=!1,v=i.id;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)l=mo(O);else{var w=this.graphModel.getNodeModelById(v);l=mo(w)}}for(var j=0;j<c.length;j++){var D=c[j];if(D.id!==i.id){var X=mo(D);if(X.minX===l.minX||X.maxX===l.minX){h=!0,s=l.minX;break}if(X.minX===l.maxX||X.maxX===l.maxX){h=!0,s=l.maxX;break}}}return Zn({isShowVertical:h,position:{x:s}})}},{key:"getSnapLinePosition",value:function(i,c){var s=this.getCenterSnapLine(i,c),l=s.isShowHorizontal,h=s.isShowVertical;if(!l){var v=this.getHorizontalSnapline(i,c);v.isShowHorizontal&&(s.isShowHorizontal=v.isShowHorizontal,s.position.y=v.position.y)}if(!h){var O=this.getVerticalSnapline(i,c);O.isShowVertical&&(s.isShowVertical=O.isShowVertical,s.position.x=O.position.x)}return s}},{key:"setSnaplineInfo",value:function(i){var c=i.isShowHorizontal,s=i.isShowVertical,l=i.position;this.position=l,this.isShowHorizontal=c,this.isShowVertical=s}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(i){var c=this.graphModel.nodes,s=this.getSnapLinePosition(i,c);this.setSnaplineInfo(s)}}],n&&F1(t.prototype,n),e}(),mb=Yf(pi.prototype,"isShowHorizontal",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bb=Yf(pi.prototype,"isShowVertical",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_b=Yf(pi.prototype,"position",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yf(pi.prototype,"clearSnapline",[d.k],Object.getOwnPropertyDescriptor(pi.prototype,"clearSnapline"),pi.prototype),Yf(pi.prototype,"setNodeSnapLine",[d.k],Object.getOwnPropertyDescriptor(pi.prototype,"setNodeSnapLine"),pi.prototype),pi),$f=new Map,xb=function(e){var t=fi(),n=window.requestAnimationFrame(function i(){if(e(),$f.get(t)){var c=window.requestAnimationFrame(i);$f.set(t,c)}});return $f.set(t,n),t},Wp=function(e){var t=$f.get(e);t&&(window.cancelAnimationFrame(t),$f.delete(e))};function Gy(e){return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(e)}function Kf(){return Kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Kf.apply(this,arguments)}function Sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sb(Object(n),!0).forEach(function(i){Ci(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function G1(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Tb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Tb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Tb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function U1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Uy(e,t){return Uy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Uy(e,t)}function z1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=$p(e);if(t){var c=$p(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return H1(this,n)}}function H1(e,t){if(t&&(Gy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Di(e)}function Di(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $p(e){return $p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$p(e)}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X1=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Uy(s,l)})(c,e);var t,n,i=z1(c);function c(){var s;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,c),Ci(Di(s=i.call(this)),"preTargetNode",void 0),Ci(Di(s),"sourceRuleResults",void 0),Ci(Di(s),"targetRuleResults",void 0),Ci(Di(s),"dragHandler",void 0),Ci(Di(s),"t",void 0),Ci(Di(s),"onDragStart",function(l){var h=l.event,v=s.props,O=v.anchorData,w=v.nodeModel,j=v.graphModel,D=j.overlapMode;j.selectNodeById(w.id),D!==uo.INCREASE&&w.autoToFront&&j.toFront(w.id),j.eventCenter.emit(tr.ANCHOR_DRAGSTART,{data:O,e:h,nodeModel:w}),s.setState({startX:O.x,startY:O.y,endX:O.x,endY:O.y})}),Ci(Di(s),"onDragging",function(l){var h=l.event,v=s.props,O=v.graphModel,w=v.nodeModel,j=v.anchorData,D=O.transformModel,X=O.eventCenter,te=O.width,ce=O.height,Se=O.editConfigModel,Pe=Se.autoExpand,We=Se.stopMoveGraph,st=h.clientX,Ct=h.clientY,Et=O.getPointByClient({x:st,y:Ct}),qt=Et.domOverlayPosition,Rt=qt.x,wt=qt.y,hr=Et.canvasOverlayPosition,Br=hr.x,qr=hr.y;s.t&&Wp(s.t);var Vr=[];Rt<10?Vr=[10,0]:Rt+10>te?Vr=[-10,0]:wt<10?Vr=[0,10]:wt+10>ce&&(Vr=[0,-10]),s.setState({endX:Br,endY:qr,dragging:!0}),s.moveAnchorEnd(Br,qr),Vr.length>0&&!We&&Pe&&(s.t=xb(function(){var en=G1(Vr,2),In=en[0],Hn=en[1];D.translate(In,Hn);var Fo=s.state,Li=Fo.endX,ei=Fo.endY;s.setState({endX:Li-In,endY:ei-Hn}),s.moveAnchorEnd(Li-In,ei-Hn)})),X.emit(tr.ANCHOR_DRAG,{data:j,e:h,nodeModel:w})}),Ci(Di(s),"onDragEnd",function(l){var h=l.event;s.t&&Wp(s.t),s.checkEnd(h),s.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),s.sourceRuleResults.clear(),s.targetRuleResults.clear();var v=s.props,O=v.graphModel,w=v.nodeModel,j=v.anchorData;O.eventCenter.emit(tr.ANCHOR_DRAGEND,{data:j,e:h,nodeModel:w})}),Ci(Di(s),"checkEnd",function(l){var h=s.props,v=h.graphModel,O=h.nodeModel,w=h.anchorData,j=w.x,D=w.y,X=w.id,te=(v.edgeType,s.state),ce=te.endX,Se=te.endY,Pe=te.dragging,We=Lu({x:ce,y:Se},v);if(s.preTargetNode&&s.preTargetNode.state!==zr.DEFAULT&&s.preTargetNode.setElementState(zr.DEFAULT),Pe&&We&&We.node){var st=We.node,Ct=We.anchor.id,Et="".concat(O.id,"_").concat(st.id,"_").concat(Ct,"_").concat(X),qt=s.sourceRuleResults.get(Et)||{},Rt=qt.isAllPass,wt=qt.msg,hr=s.targetRuleResults.get(Et)||{},Br=hr.isAllPass,qr=hr.msg;if(Rt&&Br){st.setElementState(zr.DEFAULT);var Vr=v.edgeGenerator(O.getData(),v.getNodeModelById(We.node.id).getData()),en=v.addEdge(Yp(Yp({},Vr),{},{sourceNodeId:O.id,sourceAnchorId:X,startPoint:{x:j,y:D},targetNodeId:We.node.id,targetAnchorId:We.anchor.id,endPoint:{x:We.anchor.x,y:We.anchor.y}})),In=s.props.anchorData;v.eventCenter.emit(tr.ANCHOR_DROP,{data:In,e:l,nodeModel:O,edgeModel:en})}else{var Hn=st.getData();v.eventCenter.emit(tr.CONNECTION_NOT_ALLOWED,{data:Hn,msg:qr||wt})}}}),s.sourceRuleResults=new Map,s.targetRuleResults=new Map,s.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},s.dragHandler=new Yr({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return t=c,(n=[{key:"getAnchorShape",value:function(){var s=this.props,l=s.anchorData,h=s.style,v=s.node.getAnchorShape(l);if(v)return v;var O=l.x,w=l.y,j=Yp(Yp({},h),h.hover);return Object(_e.g)("g",null,Object(_e.g)(Xf,Kf({className:"lf-node-anchor-hover"},j,{x:O,y:w})),Object(_e.g)(Xf,Kf({className:"lf-node-anchor"},h,{x:O,y:w})))}},{key:"moveAnchorEnd",value:function(s,l){var h=this.props,v=h.graphModel,O=h.nodeModel,w=h.anchorData,j=Lu({x:s,y:l},v);if(j){var D=j.node,X=j.anchor.id;if(this.preTargetNode&&this.preTargetNode!==j.node&&this.preTargetNode.setElementState(zr.DEFAULT),w.id===X)return;this.preTargetNode=D;var te="".concat(O.id,"_").concat(D.id,"_").concat(X,"_").concat(w.id);if(!this.targetRuleResults.has(te)){var ce=j.anchor,Se=O.isAllowConnectedAsSource(D,w,ce),Pe=D.isAllowConnectedAsTarget(O,w,ce);this.sourceRuleResults.set(te,Bu(Se)),this.targetRuleResults.set(te,Bu(Pe))}var We=this.sourceRuleResults.get(te).isAllPass,st=this.targetRuleResults.get(te).isAllPass;We&&st?D.setElementState(zr.ALLOW_CONNECT):D.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var s=this.state,l=s.startX,h=s.startY,v=s.endX,O=s.endY;return Qn(l,h,v,O)>10}},{key:"render",value:function(){var s=this,l=this.state,h=l.startX,v=l.startY,O=l.endX,w=l.endY,j=this.props,D=j.anchorData.edgeAddable,X=j.edgeStyle;return Object(_e.g)("g",{className:"lf-anchor"},Object(_e.g)("g",{onMouseDown:function(te){D!==!1&&s.dragHandler.handleMouseDown(te)}},this.getAnchorShape()),this.isShowLine()&&Object(_e.g)(uc,Kf({x1:h,y1:v,x2:O,y2:w},X,{"pointer-events":"none"})))}}])&&U1(t.prototype,n),c}(_e.a);o(80);function Ab(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function V1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ab(Object(n),!0).forEach(function(i){W1(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function W1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zy(e){return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zy(e)}function Y1(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Pb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Pb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function jb(e){var t=e.x,n=t===void 0?0:t,i=e.y,c=i===void 0?0:i,s=e.value,l=e.fontSize,h=e.fill,v=h===void 0?"currentColor":h,O=e.overflowMode,w=O===void 0?"default":O,j=e.textWidth,D=j===void 0?"":j,X=e.model,te={textAnchor:"middle","dominant-baseline":"middle",x:n,y:c,fill:v};if(Object.entries(e).forEach(function(Ct){var Et=Y1(Ct,2),qt=Et[0],Rt=Et[1];zy(Rt)!=="object"&&(te[qt]=Rt)}),s){var ce=String(s).split(/[\r\n]/g),Se=ce.length;if(w!=="default"){var Pe=X.BaseType,We=X.modelType;if(Pe===xn.NODE&&We!==Pr.TEXT_NODE||Pe===xn.EDGE&&D)return function(Ct){var Et=Ct.value,qt=Ct.fontSize,Rt=Ct.model,wt=Ct.fontFamily,hr=wt===void 0?"":wt,Br=Ct.lineHeight,qr=Ct.wrapPadding,Vr=qr===void 0?"0, 0":qr,en=Ct.overflowMode,In=Ct.x,Hn=Ct.y,Fo=Rt.width,Li=Rt.textHeight,ei=Ct.textWidth||Fo,_c=String(Et).split(/[\r\n]/g),gd=_c.length,md=gp({rows:_c,style:{fontSize:"".concat(qt,"px"),width:"".concat(ei,"px"),fontFamily:hr,lineHeight:Br,padding:Vr},rowsLength:gd,className:"lf-get-text-height"}),Zu=Rt.height>md?Rt.height:md;Li&&(Zu=Li);var ru=en==="ellipsis";return ru&&(Zu=qt+2),Object(_e.g)("g",null,Object(_e.g)("foreignObject",{width:ei,height:Zu,x:In-ei/2,y:Hn-Zu/2},Object(_e.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Zu,width:ei,padding:Vr}},Object(_e.g)("div",{className:ru?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:ru?_c.join(""):"",style:V1({},Ct)},_c.map(function(nu){return Object(_e.g)("div",{className:"lf-node-text--auto-wrap-inner"},nu)})))))}(e)}if(Se>1){var st=ce.map(function(Ct,Et){var qt=(Et-(Se-1)/2)*(l+2);return Object(_e.g)("tspan",{className:"lf-text-tspan",x:n,y:c+qt},Ct)});return Object(_e.g)("text",te,st)}return Object(_e.g)("text",te,s)}}function Hy(e){return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hy(e)}function Xy(){return Xy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xy.apply(this,arguments)}function $1(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Nb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Nb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function K1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vy(e,t){return Vy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Vy(e,t)}function q1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Kp(e);if(t){var c=Kp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Z1(this,n)}}function Z1(e,t){if(t&&(Hy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eu(e)}function eu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kp(e){return Kp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Kp(e)}function $u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mb=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Vy(s,l)})(c,e);var t,n,i=q1(c);function c(s){var l;(function(O,w){if(!(O instanceof w))throw new TypeError("Cannot call a class as a function")})(this,c),$u(eu(l=i.call(this)),"dragHandler",void 0),$u(eu(l),"sumDeltaX",0),$u(eu(l),"sumDeltaY",0),$u(eu(l),"stepDrag",void 0),$u(eu(l),"onDragging",function(O){var w=O.deltaX,j=O.deltaY,D=l.props,X=D.model,te=$1(D.graphModel.transformModel.fixDeltaXY(w,j),2),ce=te[0],Se=te[1];X.moveText(ce,Se)}),$u(eu(l),"dblClickHandler",function(){l.props.editable&&l.props.model.setElementState(zr.TEXT_EDIT)}),$u(eu(l),"mouseDownHandle",function(O){var w=l.props,j=w.draggable,D=w.graphModel.editConfigModel.nodeTextDraggable;(j||D)&&l.stepDrag.handleMouseDown(O)});var h=s.model,v=s.draggable;return l.stepDrag=new Yr({onDragging:l.onDragging,step:1,model:h,isStopPropagation:v}),l}return t=c,(n=[{key:"getShape",value:function(){var s=this.props,l=s.model,h=s.graphModel,v=l.text,O=h.editConfigModel,w=v.value,j=v.x,D=v.y,X=v.editable,te=v.draggable,ce={x:j,y:D,className:"",value:w};X?ce.className="lf-element-text":te||O.nodeTextDraggable?ce.className="lf-text-draggable":ce.className="lf-text-disabled";var Se=l.getTextStyle();return Object(_e.g)(jb,Xy({},ce,Se,{model:l}))}},{key:"render",value:function(){if(this.props.model.text)return Object(_e.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&K1(t.prototype,n),c}(_e.a),Q1=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Wy(e){return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wy(e)}function qp(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Rb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Rb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Db(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yy(e,t){return Yy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Yy(e,t)}function J1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Zp(e);if(t){var c=Zp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ew(this,n)}}function ew(e,t){if(t&&(Wy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return co(e)}function co(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zp(e)}function Oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fa=function(e){(function(l,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(h&&h.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),h&&Yy(l,h)})(s,e);var t,n,i,c=J1(s);function s(l){var h;(function(D,X){if(!(D instanceof X))throw new TypeError("Cannot call a class as a function")})(this,s),Oo(co(h=c.call(this)),"t",void 0),Oo(co(h),"moveOffset",void 0),Oo(co(h),"stepDrag",void 0),Oo(co(h),"contextMenuTime",void 0),Oo(co(h),"startTime",void 0),Oo(co(h),"clickTimer",void 0),Oo(co(h),"onDragStart",function(D){var X=D.event,te=X.clientX,ce=X.clientY,Se=h.props,Pe=Se.model,We=Se.graphModel.getPointByClient({x:te,y:ce}).canvasOverlayPosition,st=We.x,Ct=We.y;h.moveOffset={x:Pe.x-st,y:Pe.y-Ct}}),Oo(co(h),"onDragging",function(D){var X=D.event,te=h.props,ce=te.model,Se=te.graphModel,Pe=Se.editConfigModel,We=Pe.stopMoveGraph,st=Pe.autoExpand,Ct=Se.transformModel,Et=Se.selectNodes,qt=Se.width,Rt=Se.height,wt=Se.gridSize;ce.isDragging=!0;var hr=X.clientX,Br=X.clientY,qr=Se.getPointByClient({x:hr,y:Br}).canvasOverlayPosition,Vr=qr.x,en=qr.y,In=qp(Ct.CanvasPointToHtmlPoint([Vr,en]),2),Hn=In[0],Fo=In[1];if(Vr+=h.moveOffset.x,en+=h.moveOffset.y,Vr=ci(Vr,wt),en=ci(en,wt),qt&&Rt){if(!st||We||!(Hn<0||Fo<0||Hn>qt||Fo>Rt)){var Li=qp(Ct.CanvasPointToHtmlPoint([Vr-ce.width/2,en-ce.height/2]),2),ei=Li[0],_c=Li[1],gd=qp(Ct.CanvasPointToHtmlPoint([Vr+ce.width/2,en+ce.height/2]),2),md=gd[0],Zu=gd[1],ru=Math.max(wt,20),nu=[];ei<0?nu=[ru,0]:md>Se.width?nu=[-ru,0]:_c<0?nu=[0,ru]:Zu>Se.height&&(nu=[0,-ru]),h.t&&Wp(h.t);var bd=Et.map(function(_d){return _d.id});bd.indexOf(ce.id)===-1&&(bd=[ce.id]),nu.length>0&&!We&&st?h.t=xb(function(){var _d=qp(nu,2),h0=_d[0],y0=_d[1];Ct.translate(h0,y0);var Hx=-h0/Ct.SCALE_X,Xx=-y0/Ct.SCALE_X;Se.moveNodes(bd,Hx,Xx)}):Se.moveNodes(bd,Vr-ce.x,en-ce.y)}}else Se.moveNode2Coordinate(ce.id,Vr,en)}),Oo(co(h),"onDragEnd",function(){h.t&&Wp(h.t),h.props.model.isDragging=!1}),Oo(co(h),"handleClick",function(D){if(h.startTime&&!(new Date().getTime()-h.startTime>200)){var X=h.props,te=X.model,ce=X.graphModel,Se={data:te.getData(),e:D,position:ce.getPointByClient({x:D.clientX,y:D.clientY}),isSelected:!1,isMultiple:!1},Pe=D.button===2,We=D.detail===2;if(!Pe){var st=ce.editConfigModel,Ct=jf(D,st);Se.isMultiple=Ct,te.isSelected&&!We&&Ct?(Se.isSelected=!1,te.setSelected(!1)):(ce.selectNodeById(te.id,Ct),Se.isSelected=!0,h.toFront()),We?(st.nodeTextEdit&&te.text.editable&&(te.setSelected(!1),ce.setElementStateById(te.id,zr.TEXT_EDIT)),ce.eventCenter.emit(tr.NODE_DBCLICK,Se)):(ce.eventCenter.emit(tr.ELEMENT_CLICK,Se),ce.eventCenter.emit(tr.NODE_CLICK,Se))}}}),Oo(co(h),"handleContextMenu",function(D){D.preventDefault();var X=h.props,te=X.model,ce=X.graphModel,Se=te.getData(),Pe=ce.getPointByClient({x:D.clientX,y:D.clientY});ce.setElementStateById(te.id,zr.SHOW_MENU,Pe.domOverlayPosition),te.isSelected||ce.selectNodeById(te.id),ce.eventCenter.emit(tr.NODE_CONTEXTMENU,{data:Se,e:D,position:Pe}),h.toFront()}),Oo(co(h),"handleMouseDown",function(D){var X=h.props,te=X.model,ce=X.graphModel;h.startTime=new Date().getTime(),ce.editConfigModel.adjustNodePosition&&te.draggable&&h.stepDrag&&h.stepDrag.handleMouseDown(D)}),Oo(co(h),"setHoverON",function(D){var X=h.props,te=X.model,ce=X.graphModel;if(!te.isHovered){var Se=te.getData();te.setHovered(!0),ce.eventCenter.emit(tr.NODE_MOUSEENTER,{data:Se,e:D})}}),Oo(co(h),"setHoverOFF",function(D){var X=h.props,te=X.model,ce=X.graphModel,Se=te.getData();te.isHovered&&(te.setHovered(!1),ce.eventCenter.emit(tr.NODE_MOUSELEAVE,{data:Se,e:D}))}),Oo(co(h),"onMouseOut",function(D){Q1&&h.setHoverOFF(D)});var v=l.graphModel,O=v.gridSize,w=v.eventCenter,j=l.model;return h.stepDrag=new Yr({onDragStart:h.onDragStart,onDragging:h.onDragging,onDragEnd:h.onDragEnd,step:O,eventType:"NODE",isStopPropagation:!1,eventCenter:w,model:j}),h}return t=s,i=[{key:"getModel",value:function(l){return l}}],(n=[{key:"getAnchorShape",value:function(l){return null}},{key:"getAnchors",value:function(){var l=this,h=this.props,v=h.model,O=h.graphModel,w=v.isSelected,j=v.isHitable,D=v.isDragging,X=v.isShowAnchor;return j&&(w||X)&&!D?Ns(v.anchors,function(te,ce){var Se=v.getAnchorLineStyle(te),Pe=v.getAnchorStyle(te);return Object(_e.g)(X1,{anchorData:te,node:l,style:Pe,edgeStyle:Se,anchorIndex:ce,nodeModel:v,graphModel:O,setHoverOFF:l.setHoverOFF})}):[]}},{key:"getText",value:function(){var l=this.props,h=l.model,v=l.graphModel;if(h.state===zr.TEXT_EDIT)return"";if(h.text){var O=v.editConfigModel,w=!1;return(h.text.draggable||O.nodeTextDraggable)&&(w=!0),Object(_e.g)(Mb,{editable:O.nodeTextEdit&&h.text.editable,model:h,graphModel:v,draggable:w})}}},{key:"getStateClassName",value:function(){var l=this.props.model,h=l.state,v=l.isDragging,O=l.isSelected,w="lf-node";switch(h){case zr.ALLOW_CONNECT:w+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:w+=" lf-node-not-allow";break;default:w+=" lf-node-default"}return v&&(w+=" lf-isDragging"),O&&(w+=" lf-node-selected"),w}},{key:"toFront",value:function(){var l=this.props,h=l.model,v=l.graphModel;v.overlapMode!==uo.INCREASE&&h.autoToFront&&v.toFront(h.id)}},{key:"render",value:function(){var l,h=this.props,v=h.model,O=h.graphModel,w=O.editConfigModel,j=w.hideAnchors,D=w.adjustNodePosition,X=O.gridSize,te=O.transformModel.SCALE_X,ce=v.isHitable,Se=v.draggable,Pe=Object(_e.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),j?null:this.getAnchors());return ce?(D&&Se&&this.stepDrag.setStep(X*te),l=Object(_e.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Pe)):l=Object(_e.g)("g",{className:this.getStateClassName()},Pe),l}}])&&Db(t.prototype,n),i&&Db(t,i),s}(_e.a);function $y(e){return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$y(e)}function Ky(){return Ky=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ky.apply(this,arguments)}function tw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qy(e,t){return qy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},qy(e,t)}function nw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Qp(e);if(t){var c=Qp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ow(this,n)}}function ow(e,t){if(t&&($y(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qp(e)}var Zy=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&qy(s,l)})(c,e);var t,n,i=nw(c);function c(){return tw(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.getNodeStyle();return Object(_e.g)(Za,Ky({},l,{x:s.x,y:s.y,width:s.width,height:s.height,radius:s.radius}))}}])&&rw(t.prototype,n),c}(fa);function Qy(e){return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qy(e)}function Jy(){return Jy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jy.apply(this,arguments)}function iw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ev(e,t){return ev=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ev(e,t)}function uw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Jp(e);if(t){var c=Jp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return sw(this,n)}}function sw(e,t){if(t&&(Qy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Jp(e){return Jp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jp(e)}var tv=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ev(s,l)})(c,e);var t,n,i=uw(c);function c(){return iw(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.x,h=s.y,v=s.r,O=s.getNodeStyle();return Object(_e.g)(Xf,Jy({},O,{x:l,y:h,r:v}))}}])&&aw(t.prototype,n),c}(fa);function rv(e){return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}function cw(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Cb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Cb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ib(e){var t=e.points,n=e.className,i={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(c){var s=cw(c,2),l=s[0],h=s[1];rv(h)!=="object"&&(i[l]=h)}),i.className=n?"lf-basic-shape ".concat(n):"lf-basic-shape",i.points=t.map(function(c){return c.join(",")}).join(" "),Object(_e.g)("polygon",i)}function nv(e){return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(e)}function ov(){return ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ov.apply(this,arguments)}function fw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function iv(e,t){return iv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},iv(e,t)}function pw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=ed(e);if(t){var c=ed(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return dw(this,n)}}function dw(e,t){if(t&&(nv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ed(e){return ed=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ed(e)}var av=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&iv(s,l)})(c,e);var t,n,i=pw(c);function c(){return fw(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.x,h=s.y,v=s.width,O=s.height,w=s.points,j=s.getNodeStyle(),D={transform:"matrix(1 0 0 1 ".concat(l-v/2," ").concat(h-O/2,")")};return Object(_e.g)("g",D,Object(_e.g)(Ib,ov({},j,{points:w,x:l,y:h})))}}])&&lw(t.prototype,n),c}(fa);function uv(e){return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(e)}function sv(){return sv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sv.apply(this,arguments)}function hw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cv(e,t){return cv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},cv(e,t)}function vw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=td(e);if(t){var c=td(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return gw(this,n)}}function gw(e,t){if(t&&(uv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function td(e){return td=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},td(e)}var fv=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&cv(s,l)})(c,e);var t,n,i=vw(c);function c(){return hw(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.getNodeStyle();return Object(_e.g)("g",null,Object(_e.g)(Ib,sv({},l,{points:s.points,x:s.x,y:s.y})))}}])&&yw(t.prototype,n),c}(fa);function lv(e){return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}function mw(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return kb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return kb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function bw(e){var t=e.x,n=t===void 0?0:t,i=e.y,c=i===void 0?0:i,s=e.rx,l=s===void 0?4:s,h=e.ry,v=h===void 0?4:h,O=e.className,w={cx:n,cy:c,rx:l,ry:v,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(j){var D=mw(j,2),X=D[0],te=D[1];lv(te)!=="object"&&(w[X]=te)}),w.className=O?"lf-basic-shape ".concat(O):"lf-basic-shape",Object(_e.g)("ellipse",w)}function pv(e){return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function dv(){return dv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dv.apply(this,arguments)}function _w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ew(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hv(e,t){return hv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},hv(e,t)}function Ow(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=rd(e);if(t){var c=rd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ww(this,n)}}function ww(e,t){if(t&&(pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function rd(e){return rd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rd(e)}var yv=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&hv(s,l)})(c,e);var t,n,i=Ow(c);function c(){return _w(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.getNodeStyle();return Object(_e.g)(bw,dv({},l,{x:s.x,y:s.y,rx:s.rx,ry:s.ry}))}}])&&Ew(t.prototype,n),c}(fa);function vv(e){return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}function Lb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Bb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lb(Object(n),!0).forEach(function(i){xw(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function xw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gv(e,t){return gv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},gv(e,t)}function Aw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=nd(e);if(t){var c=nd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Pw(this,n)}}function Pw(e,t){if(t&&(vv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function nd(e){return nd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nd(e)}var mv=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&gv(s,l)})(c,e);var t,n,i=Aw(c);function c(){return Sw(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getBackground",value:function(){var s=this.props.model,l=s.getTextStyle(),h=s.width,v=s.height,O=s.x,w=s.y,j=Bb(Bb({},l.background),{},{x:O,y:w-1,width:h,height:v});return Object(_e.g)(Za,j)}},{key:"getShape",value:function(){return Object(_e.g)("g",null,this.getBackground())}}])&&Tw(t.prototype,n),c}(fa);function bv(e){return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}function _v(){return _v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_v.apply(this,arguments)}function jw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ev(e,t){return Ev=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ev(e,t)}function Mw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=od(e);if(t){var c=od(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Rw(this,n)}}function Rw(e,t){if(t&&(bv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qf(e)}function qf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function od(e){return od=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},od(e)}function id(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ov=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Ev(s,l)})(c,e);var t,n,i=Mw(c);function c(){var s;jw(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return id(qf(s=i.call.apply(i,[this].concat(h))),"ref",void 0),id(qf(s),"currentProperties",void 0),id(qf(s),"preProperties",void 0),id(qf(s),"setRef",function(O){s.ref=O}),s}return t=c,(n=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(s){s.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var s=this.props.model,l=s.x,h=s.y,v=s.height,O=s.width,w=s.getNodeStyle();return this.currentProperties=JSON.stringify(s.properties),Object(_e.g)("foreignObject",_v({},w,{x:l-O/2,y:h-v/2,width:O,height:v,ref:this.setRef}))}}])&&Nw(t.prototype,n),c}(fa);function wv(e){return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function xv(){return xv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xv.apply(this,arguments)}function Fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function Ku(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fb(Object(n),!0).forEach(function(i){Av(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Dw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Sv(e,t){return Sv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Sv(e,t)}function Cw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=ad(e);if(t){var c=ad(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Iw(this,n)}}function Iw(e,t){if(t&&(wv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tv(e)}function Tv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ad(e){return ad=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ad(e)}function Av(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ii,kw=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Sv(s,l)})(c,e);var t,n,i=Cw(c);function c(s){var l;return function(h,v){if(!(h instanceof v))throw new TypeError("Cannot call a class as a function")}(this,c),Av(Tv(l=i.call(this,s)),"setHoverON",function(){l.setState({isHovered:!0})}),Av(Tv(l),"setHoverOFF",function(){l.setState({isHovered:!1})}),l.state={isHovered:!1},l}return t=c,(n=[{key:"getBackground",value:function(){var s=this.props.model,l=s.getTextStyle(),h=s.text,v=l.background||{};if(this.state.isHovered&&l.hover&&l.hover.background&&(v=Ku(Ku({},v),l.hover.background)),h&&h.value&&v.fill!=="transparent"){var O,w=l.fontSize,j=l.overflowMode,D=l.lineHeight,X=l.wrapPadding,te=l.textWidth,ce=h.value,Se=h.x,Pe=h.y,We=String(ce).split(/[\r\n]/g),st=We.length;if(j==="autoWrap"&&te){var Ct=gp({rows:We,style:{fontSize:"".concat(w,"px"),width:"".concat(te,"px"),lineHeight:D,padding:X},rowsLength:st,className:"lf-get-text-height"});O=Ku(Ku({},v),{},{x:Se-1,y:Pe-1,width:te,height:Ct})}else{We&&We.forEach(function(hr){Ot(hr)});var Et=Lf({rows:We,fontSize:w,rowsLength:st}),qt=Et.width,Rt=Et.height;if(typeof v.wrapPadding=="string"){var wt=v.wrapPadding.split(",").filter(function(hr){return hr.trim()}).map(function(hr){return parseFloat(hr.trim())});wt.length>0&&wt.length<=4&&(wt.length===1?wt=[wt[0],wt[0],wt[0],wt[0]]:wt.length===2?wt=[wt[0],wt[1],wt[0],wt[1]]:wt.length===3&&(wt=[wt[0],wt[1],wt[2],wt[1]]),qt+=wt[1]+wt[3],Rt+=wt[0]+wt[2],Se+=(wt[1]-wt[3])/2,Pe+=(wt[2]-wt[0])/2)}O=Ku(Ku({},v),{},{x:Se-1,y:Pe-1,width:qt,height:Rt})}return Object(_e.g)(Za,O)}}},{key:"getShape",value:function(){var s=this.props.model,l=s.text,h=l.value,v=l.x,O=l.y;if(h){var w=Ku({x:v,y:O,className:"lf-element-text",value:h},s.getTextStyle());return Object(_e.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(_e.g)(jb,xv({},w,{model:s})))}}}])&&Dw(t.prototype,n),c}(Mb);function Pv(e){return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}function Gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gb(Object(n),!0).forEach(function(i){Bo(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Lw(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Ub(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Ub(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ub(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Bw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jv(e,t){return jv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},jv(e,t)}function Fw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=ud(e);if(t){var c=ud(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Gw(this,n)}}function Gw(e,t){if(t&&(Pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lo(e)}function Lo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ud(e){return ud=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ud(e)}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Ii||(Ii={}));var zb=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&jv(s,l)})(c,e);var t,n,i=Fw(c);function c(s){var l;(function(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")})(this,c),Bo(Lo(l=i.call(this)),"stepDragData",void 0),Bo(Lo(l),"stepDrag",void 0),Bo(Lo(l),"oldEdge",void 0),Bo(Lo(l),"preTargetNode",void 0),Bo(Lo(l),"targetRuleResults",void 0),Bo(Lo(l),"sourceRuleResults",void 0),Bo(Lo(l),"handleMouseDown",function(w){l.stepDrag&&l.stepDrag.handleMouseDown(w)}),Bo(Lo(l),"onDragStart",function(){var w=l.props,j=w.x,D=w.y,X=w.edgeModel,te=X.startPoint,ce=X.endPoint,Se=X.pointsList;l.oldEdge={startPoint:te,endPoint:ce,pointsList:Se},l.setState({endX:j,endY:D,dragging:!0})}),Bo(Lo(l),"onDragging",function(w){var j=w.deltaX,D=w.deltaY,X=l.state,te=X.endX,ce=X.endY,Se=l.props,Pe=Se.graphModel,We=Se.type,st=Pe.transformModel,Ct=Pe.editConfigModel,Et=Lw(st.moveCanvasPointByHtml([te,ce],j,D),2),qt=Et[0],Rt=Et[1];l.setState({endX:qt,endY:Rt,dragging:!0});var wt=l.props.edgeModel,hr=Lu({x:te,y:ce},Pe);if(hr&&hr.node&&l.isAllowAdjust(hr).pass){var Br,qr=wt.startPoint,Vr=wt.endPoint,en=wt.sourceNode,In=wt.targetNode;We===Ii.SOURCE?Br={startPoint:{x:hr.anchor.x,y:hr.anchor.y},endPoint:{x:Vr.x,y:Vr.y},sourceNode:hr.node,targetNode:In}:We===Ii.TARGET&&(Br={startPoint:{x:qr.x,y:qr.y},endPoint:{x:hr.anchor.x,y:hr.anchor.y},sourceNode:en,targetNode:hr.node}),wt.updateAfterAdjustStartAndEnd(Br)}else We===Ii.SOURCE?wt.updateStartPoint({x:qt,y:Rt}):We===Ii.TARGET&&wt.updateEndPoint({x:qt,y:Rt});wt.text.value&&Ct.adjustEdge&&wt.setText(Object.assign({},wt.text,wt.textPosition))}),Bo(Lo(l),"onDragEnd",function(w){var j=w.event;try{var D;l.setState({dragging:!1});var X=l.props,te=X.graphModel,ce=X.edgeModel,Se=X.type,Pe=l.state,We=Pe.endX,st=Pe.endY,Ct=Pe.dragging,Et=Lu({x:We,y:st},te);if(!Ct)return;var qt,Rt=!1;if(Et&&Et.node){var wt=l.isAllowAdjust(Et),hr=wt.pass,Br=wt.msg,qr=wt.newTargetNode;if(hr){var Vr,en=ce.getData();qt=la(la({},en),{},{sourceAnchorId:"",targetAnchorId:"",text:(en==null||(Vr=en.text)===null||Vr===void 0?void 0:Vr.value)||""}),Se===Ii.SOURCE?(qt=la(la({},te.edgeGenerator(te.getNodeModelById(Et.node.id).getData(),te.getNodeModelById(ce.targetNodeId).getData(),qt)),{},{sourceNodeId:Et.node.id,sourceAnchorId:Et.anchor.id,startPoint:{x:Et.anchor.x,y:Et.anchor.y},targetNodeId:ce.targetNodeId,endPoint:la({},ce.endPoint)}),ce.sourceNodeId===Et.node.id&&ce.sourceAnchorId===Et.anchor.id&&(Rt=!0)):Se===Ii.TARGET&&(qt=la(la({},te.edgeGenerator(te.getNodeModelById(ce.sourceNodeId).getData(),te.getNodeModelById(Et.node.id).getData(),qt)),{},{sourceNodeId:ce.sourceNodeId,startPoint:la({},ce.startPoint),targetNodeId:Et.node.id,targetAnchorId:Et.anchor.id,endPoint:{x:Et.anchor.x,y:Et.anchor.y}}),ce.targetNodeId===Et.node.id&&ce.targetAnchorId===Et.anchor.id&&(Rt=!0))}else{Rt=!0;var In=qr.getData();te.eventCenter.emit(tr.CONNECTION_NOT_ALLOWED,{data:In,msg:Br})}}else Rt=!0;if(Rt)l.recoveryEdge();else{te.deleteEdgeById(ce.id);var Hn=te.addEdge(la({},qt));te.eventCenter.emit(tr.EDGE_EXCHANGE_NODE,{data:{newEdge:Hn.getData(),oldEdge:ce.getData()}})}(D=l.preTargetNode)===null||D===void 0||D.setElementState(zr.DEFAULT)}finally{l.props.graphModel.eventCenter.emit(tr.ADJUST_POINT_DRAGEND,{e:j,data:l.stepDragData})}}),Bo(Lo(l),"recoveryEdge",function(){var w=l.props.edgeModel,j=l.oldEdge,D=j.startPoint,X=j.endPoint,te=j.pointsList;w.updateStartPoint(D),w.updateEndPoint(X),w.modelType!==Pr.LINE_EDGE&&(w.pointsList=te,w.initPoints())}),Bo(Lo(l),"getAdjustPointStyle",function(){var w=l.props,j=w.graphModel.theme;return w.edgeModel,j.edgeAdjust}),l.state={dragging:!1,endX:0,endY:0},l.targetRuleResults=new Map,l.sourceRuleResults=new Map;var h=s.type,v=s.edgeModel,O=s.graphModel.eventCenter;return l.stepDragData={type:h,edgeData:v.getData()},l.stepDrag=new Yr({onDragStart:l.onDragStart,onDragging:l.onDragging,onDragEnd:l.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:l.stepDragData}),l}return t=c,(n=[{key:"isAllowAdjust",value:function(s){var l=this.props,h=l.edgeModel,v=h.id,O=h.sourceNode,w=h.targetNode,j=h.sourceAnchorId,D=h.targetAnchorId,X=l.type,te=null,ce=null,Se=null,Pe=null;if(X===Ii.SOURCE?(te=s.node,ce=w,Se=s.anchor,Pe=w.getAnchorInfo(D)):(te=O,ce=s.node,Pe=s.anchor,Se=O.getAnchorInfo(j)),this.preTargetNode&&this.preTargetNode!==s.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=s.node,Pe.id===Se.id)return{pass:!1,msg:"",newTargetNode:ce};var We="".concat(te.id,"_").concat(ce.id,"_").concat(Se.id,"_").concat(Pe.id);if(!this.targetRuleResults.has(We)){var st=te.isAllowConnectedAsSource(ce,Se,Pe,v),Ct=ce.isAllowConnectedAsTarget(te,Se,Pe,v);this.sourceRuleResults.set(We,Bu(st)),this.targetRuleResults.set(We,Bu(Ct))}var Et=this.sourceRuleResults.get(We),qt=Et.isAllPass,Rt=Et.msg,wt=this.targetRuleResults.get(We),hr=wt.isAllPass,Br=wt.msg,qr=qt&&hr?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return X===Ii.SOURCE?te.setElementState(qr):ce.setElementState(qr),{pass:qt&&hr,msg:Br||Rt,newTargetNode:ce}}},{key:"render",value:function(){var s=this.props,l=s.x,h=s.y,v=s.getAdjustPointShape,O=s.edgeModel,w=this.state.dragging;return Object(_e.g)("g",{pointerEvents:w?"none":"",onMouseDown:this.handleMouseDown},w?"":v(l,h,O))}}])&&Bw(t.prototype,n),c}(_e.a);function Nv(e){return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function Zf(){return Zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zf.apply(this,arguments)}function Uw(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Hb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Hb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mv(e,t){return Mv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Mv(e,t)}function Xw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=sd(e);if(t){var c=sd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Vw(this,n)}}function Vw(e,t){if(t&&(Nv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return di(e)}function di(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sd(e){return sd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},sd(e)}function ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qf=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Mv(s,l)})(c,e);var t,n,i=Xw(c);function c(){var s;zw(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return ki(di(s=i.call.apply(i,[this].concat(h))),"startTime",void 0),ki(di(s),"contextMenuTime",void 0),ki(di(s),"clickTimer",void 0),ki(di(s),"textRef",Object(_e.f)()),ki(di(s),"handleHover",function(O,w){var j=s.props,D=j.model,X=j.graphModel.eventCenter;D.setHovered(O);var te=O?tr.EDGE_MOUSEENTER:tr.EDGE_MOUSELEAVE,ce=D.getData();X.emit(te,{data:ce,e:w})}),ki(di(s),"setHoverON",function(O){s.props.model.isHovered||(s.textRef&&s.textRef.current.setHoverON(),s.handleHover(!0,O))}),ki(di(s),"setHoverOFF",function(O){s.props.model.isHovered&&(s.textRef&&s.textRef.current.setHoverOFF(),s.handleHover(!1,O))}),ki(di(s),"handleContextMenu",function(O){O.preventDefault(),s.contextMenuTime=new Date().getTime(),s.clickTimer&&clearTimeout(s.clickTimer);var w=s.props,j=w.model,D=w.graphModel,X=D.getPointByClient({x:O.clientX,y:O.clientY});D.setElementStateById(j.id,zr.SHOW_MENU,X.domOverlayPosition),s.toFront(),j.isSelected||D.selectEdgeById(j.id);var te=j==null?void 0:j.getData();D.eventCenter.emit(tr.EDGE_CONTEXTMENU,{data:te,e:O,position:X})}),ki(di(s),"handleMouseDown",function(O){O.stopPropagation(),s.startTime=new Date().getTime()}),ki(di(s),"handleMouseUp",function(O){if(s.startTime&&!(new Date().getTime()-s.startTime>200||O.button===2)){var w=O.detail===2,j=s.props,D=j.model,X=j.graphModel,te=D==null?void 0:D.getData(),ce=X.getPointByClient({x:O.clientX,y:O.clientY});if(w){var Se=X.editConfigModel,Pe=X.textEditElement;if(Pe&&Pe.id===D.id&&X.setElementStateById(D.id,zr.DEFAULT),Se.edgeTextEdit&&D.text.editable&&X.setElementStateById(D.id,zr.TEXT_EDIT),D.modelType===Pr.POLYLINE_EDGE){var We=D,st=X.getPointByClient({x:O.x,y:O.y}).canvasOverlayPosition,Ct=st.x,Et=st.y,qt=Je({x:Ct,y:Et},We.points);We.dbClickPosition=qt}X.eventCenter.emit(tr.EDGE_DBCLICK,{data:te,e:O,position:ce})}else X.eventCenter.emit(tr.ELEMENT_CLICK,{data:te,e:O,position:ce}),X.eventCenter.emit(tr.EDGE_CLICK,{data:te,e:O,position:ce});var Rt=X.editConfigModel;X.selectEdgeById(D.id,jf(O,Rt)),s.toFront()}}),s}return t=c,(n=[{key:"getShape",value:function(){return Object(_e.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var s=this.props,l=s.model,h=s.graphModel;if(l.state===zr.TEXT_EDIT)return null;var v=!1,O=h.editConfigModel;return(l.text.draggable||O.edgeTextDraggable)&&(v=!0),Object(_e.g)(kw,{ref:this.textRef,editable:O.edgeTextEdit&&l.text.editable,model:l,graphModel:h,draggable:v})}},{key:"getArrowInfo",value:function(){var s=this.props.model,l=s.startPoint,h=s.endPoint,v=s.isSelected;return{start:l,end:h,hover:this.state.hover,isSelected:v}}},{key:"getLastTwoPoints",value:function(){var s=this.props.model;return[s.startPoint,s.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var s=this.props.model,l=s.id,h=s.getArrowStyle(),v=h.refY,O=v===void 0?0:v,w=h.refX,j=w===void 0?2:w,D=Uw(this.getLastTwoPoints(),2),X=D[0],te=D[1],ce="auto";return X!==null&&te!==null&&(ce=Bh({x:te.x-X.x,y:te.y-X.y,z:0})*(180/Math.PI)),Object(_e.g)("g",null,Object(_e.g)("defs",null,Object(_e.g)("marker",{id:"marker-start-".concat(l),refX:-j,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(_e.g)("marker",{id:"marker-end-".concat(l),refX:j,refY:O,overflow:"visible",orient:ce,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var s=this.props.model.getArrowStyle(),l=s.stroke,h=s.strokeWidth,v=s.offset,O=s.verticalLength;return Object(_e.g)("path",{stroke:l,fill:l,strokeWidth:h,d:"M 0 0 L ".concat(v," -").concat(O," L ").concat(v," ").concat(O," Z")})}},{key:"getEndArrow",value:function(){var s=this.props.model.getArrowStyle(),l=s.stroke,h=s.strokeWidth,v=s.offset,O=s.verticalLength;return Object(_e.g)("path",{stroke:l,fill:l,strokeWidth:h,transform:"rotate(180)",d:"M 0 0 L ".concat(v," -").concat(O," L ").concat(v," ").concat(O," Z")})}},{key:"getAdjustPointShape",value:function(s,l,h){var v=h.getAdjustPointStyle();return Object(_e.g)(Xf,Zf({className:"lf-edge-adjust-point"},v,{x:s,y:l}))}},{key:"getAdjustPoints",value:function(){var s=this.props,l=s.model,h=s.graphModel,v=l.getAdjustStart(),O=l.getAdjustEnd();return Object(_e.g)("g",null,Object(_e.g)(zb,Zf({type:"SOURCE"},v,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:l,graphModel:h})),Object(_e.g)(zb,Zf({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:l,graphModel:h})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(_e.g)("g",null)}},{key:"getAppend",value:function(){return Object(_e.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var s=this.props,l=s.graphModel,h=s.model;l.overlapMode!==uo.INCREASE&&l.toFront(h.id)}},{key:"render",value:function(){var s=this.props,l=s.model,h=l.isSelected,v=l.isHitable,O=l.isShowAdjustPoint;return s.graphModel.animation,Object(_e.g)("g",null,Object(_e.g)("g",{className:["lf-edge",!v&&"pointer-none",h&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&h?this.getAdjustPoints():"")}}])&&Hw(t.prototype,n),c}(_e.a);function Rv(e){return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}function Ww(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Xb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Xb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Jf=function(e){var t={d:""};return Object.entries(e).forEach(function(n){var i=Ww(n,2),c=i[0],s=i[1],l=Rv(s);c!=="style"&&l==="object"||(t[c]=s)}),Object(_e.g)("path",t)};function Dv(e){return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function Cv(){return Cv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cv.apply(this,arguments)}function Yw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Iv(e,t){return Iv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Iv(e,t)}function Kw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=cd(e);if(t){var c=cd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return qw(this,n)}}function qw(e,t){if(t&&(Dv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function cd(e){return cd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cd(e)}var kv=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Iv(s,l)})(c,e);var t,n,i=Kw(c);function c(){return Yw(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getEdge",value:function(){var s=this.props.model,l=s.startPoint,h=s.endPoint,v=s.isAnimation,O=s.arrowConfig,w=s.getEdgeStyle(),j=s.getEdgeAnimationStyle(),D=j.strokeDasharray,X=j.stroke,te=j.strokeDashoffset,ce=j.animationName,Se=j.animationDuration,Pe=j.animationIterationCount,We=j.animationTimingFunction,st=j.animationDirection;return Object(_e.g)(uc,Cv({},w,{x1:l.x,y1:l.y,x2:h.x,y2:h.y},O,v?{strokeDasharray:D,stroke:X,style:{strokeDashoffset:te,animationName:ce,animationDuration:Se,animationIterationCount:Pe,animationTimingFunction:We,animationDirection:st}}:{}))}},{key:"getAppendWidth",value:function(){var s=this.props.model,l=function(D){var X,te=D.start,ce=D.end;if(te.x===ce.x&&te.y===ce.y)X="";else{var Se={start:te,end:ce,offset:10,verticalLength:5},Pe=$a(Wu(Wu({},Se),{},{type:"start"})),We=$a(Wu(Wu({},Se),{},{type:"end"}));X="M".concat(Pe.leftX," ").concat(Pe.leftY,` 
    L`).concat(Pe.rightX," ").concat(Pe.rightY,` 
    L`).concat(We.rightX," ").concat(We.rightY,`
    L`).concat(We.leftX," ").concat(We.leftY," z")}return{d:X,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:s.startPoint,end:s.endPoint}),h=l.d,v=l.strokeWidth,O=l.fill,w=l.strokeDasharray,j=l.stroke;return Object(_e.g)(Jf,{d:h,fill:O,strokeWidth:v,stroke:j,strokeDasharray:w})}}])&&$w(t.prototype,n),c}(Qf);function Lv(e){return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function Zw(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Vb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Vb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Qw=function(e){var t={points:"",fill:"none"};return Object.entries(e).forEach(function(n){var i=Zw(n,2),c=i[0],s=i[1];(c==="style"||Lv(s)!=="object")&&(t[c]=s)}),Object(_e.g)("polyline",t)};function Bv(e){return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bv(e)}function Wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wb(Object(n),!0).forEach(function(i){da(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Fv(){return Fv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fv.apply(this,arguments)}function Jw(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return Yb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Yb(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ex(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gv(e,t){return Gv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Gv(e,t)}function tx(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=ld(e);if(t){var c=ld(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return rx(this,n)}}function rx(e,t){if(t&&(Bv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pa(e)}function pa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ld(e){return ld=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ld(e)}function da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uv=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Gv(s,l)})(c,e);var t,n,i=tx(c);function c(){var s;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,c),da(pa(s=i.call(this)),"drag",void 0),da(pa(s),"isDragging",void 0),da(pa(s),"isShowAdjustPointTemp",void 0),da(pa(s),"appendInfo",void 0),da(pa(s),"onDragStart",function(){var l=s.props.model;l.dragAppendStart(),s.isShowAdjustPointTemp=l.isShowAdjustPoint,l.isShowAdjustPoint=!1}),da(pa(s),"onDragging",function(l){var h=l.deltaX,v=l.deltaY,O=s.props,w=O.model,j=O.graphModel;s.isDragging=!0;var D=j.transformModel,X=j.editConfigModel,te=Jw(D.fixDeltaXY(h,v),2),ce=te[0],Se=te[1],Pe=w,We=X.adjustEdgeMiddle;s.appendInfo=We?Pe.dragAppendSimple(s.appendInfo,{x:ce,y:Se}):Pe.dragAppend(s.appendInfo,{x:ce,y:Se})}),da(pa(s),"onDragEnd",function(){var l=s.props,h=l.model,v=l.graphModel.eventCenter,O=h;O.dragAppendEnd(),s.isDragging=!1,O.isShowAdjustPoint=s.isShowAdjustPointTemp,s.appendInfo=void 0,v.emit(tr.EDGE_ADJUST,{data:O.getData()})}),da(pa(s),"beforeDragStart",function(l,h){h.dragAble&&s.drag.handleMouseDown(l),s.appendInfo=h}),s.drag=new Yr({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd,isStopPropagation:!1}),s}return t=c,(n=[{key:"getEdge",value:function(){var s=this.props.model,l=s.points,h=s.isAnimation,v=s.arrowConfig,O=s.getEdgeStyle(),w=s.getEdgeAnimationStyle(),j=w.strokeDasharray,D=w.stroke,X=w.strokeDashoffset,te=w.animationName,ce=w.animationDuration,Se=w.animationIterationCount,Pe=w.animationTimingFunction,We=w.animationDirection;return Object(_e.g)(Qw,Fv({points:l},O,v,h?{strokeDasharray:j,stroke:D,style:{strokeDashoffset:X,animationName:te,animationDuration:ce,animationIterationCount:Se,animationTimingFunction:Pe,animationDirection:We}}:{}))}},{key:"getArrowInfo",value:function(){var s=this.props.model,l=s.points,h=s.isSelected,v={start:null,end:null,hover:this.state.hover,isSelected:h},O=me(l);return O.length>=2&&(v.start=O[O.length-2],v.end=O[O.length-1]),v}},{key:"getLastTwoPoints",value:function(){var s=this.props.model.points,l=me(s);return l.length>=2?[l[l.length-2],l[l.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(s){var l,h=s.start,v=s.end;if(h.x===v.x&&h.y===v.y)l="";else{var O={start:h,end:v,offset:10,verticalLength:5},w=$a(fd(fd({},O),{},{type:"start"})),j=$a(fd(fd({},O),{},{type:"end"}));l="M".concat(w.leftX," ").concat(w.leftY,` 
      L`).concat(w.rightX," ").concat(w.rightY,` 
      L`).concat(j.rightX," ").concat(j.rightY,`
      L`).concat(j.leftX," ").concat(j.leftY," z")}return{d:l,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(s){var l=this.getAppendAttributes(s),h=l.d,v=l.strokeWidth,O=l.fill,w=l.strokeDasharray,j=l.stroke;return Object(_e.g)(Jf,{d:h,fill:O,strokeWidth:v,stroke:j,strokeDasharray:w})}},{key:"getAppendWidth",value:function(){for(var s=this,l=this.props,h=l.model,v=l.graphModel,O=h.pointsList,w=h.draggable,j=[],D=O.length,X=function(ce){var Se="lf-polyline-append",Pe={start:{x:O[ce].x,y:O[ce].y},end:{x:O[ce+1].x,y:O[ce+1].y},startIndex:ce,endIndex:ce+1,direction:"",dragAble:!0},We=Object(_e.g)("g",{className:Se},s.getAppendShape(Pe)),st=v.editConfigModel,Ct=st.adjustEdge,Et=st.adjustEdgeMiddle;if(Ct&&w){var qt=Pe.startIndex,Rt=Pe.endIndex,wt=Et&&(qt===0||Rt===D-1);Pe.dragAble=!wt,Pe.start.x===Pe.end.x?(Pe.dragAble&&(Se+="-ew-resize"),Pe.direction=Kr.VERTICAL):Pe.start.y===Pe.end.y&&(Pe.dragAble&&(Se+="-ns-resize"),Pe.direction=Kr.HORIZONTAL),We=Object(_e.g)("g",{className:s.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(hr){return s.beforeDragStart(hr,Pe)}},Object(_e.g)("g",{className:Se},s.getAppendShape(Pe)))}j.push(We)},te=0;te<D-1;te++)X(te);return Object(_e.g)("g",null,j)}}])&&ex(t.prototype,n),c}(Qf);function zv(e){return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function nx(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return $b(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return $b(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $b(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Hv(){return Hv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hv.apply(this,arguments)}function ox(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ix(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xv(e,t){return Xv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Xv(e,t)}function ax(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=pd(e);if(t){var c=pd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ux(this,n)}}function ux(e,t){if(t&&(zv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function pd(e){return pd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pd(e)}var Vv=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Xv(s,l)})(c,e);var t,n,i=ax(c);function c(){return ox(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"getEdge",value:function(){var s=this.props.model,l=s.getEdgeStyle(),h=s.path,v=s.isAnimation,O=s.arrowConfig,w=s.getEdgeAnimationStyle(),j=w.strokeDasharray,D=w.stroke,X=w.strokeDashoffset,te=w.animationName,ce=w.animationDuration,Se=w.animationIterationCount,Pe=w.animationTimingFunction,We=w.animationDirection;return Object(_e.g)(Jf,Hv({d:h},l,O,v?{strokeDasharray:j,stroke:D,style:{strokeDashoffset:X,animationName:te,animationDuration:ce,animationIterationCount:Se,animationTimingFunction:Pe,animationDirection:We}}:{}))}},{key:"getAppendWidth",value:function(){var s=this.props.model.path;return Object(_e.g)(Jf,{d:s,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var s=this.props.model,l=this.state.hover,h=s,v=h.path,O=h.isSelected,w=nx(ht(v),2);return{start:w[0],end:w[1],hover:l,isSelected:O}}},{key:"getLastTwoPoints",value:function(){var s=this.props.model.path;return ht(s)}}])&&ix(t.prototype,n),c}(Qf);function Wv(e){return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wv(e)}function Kb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function sx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yv(e,t){return Yv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Yv(e,t)}function lx(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=dd(e);if(t){var c=dd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return px(this,n)}}function px(e,t){if(t&&(Wv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function dd(e){return dd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},dd(e)}var dx=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Yv(s,l)})(c,e);var t,n,i=lx(c);function c(){return cx(this,c),i.apply(this,arguments)}return t=c,n=[{key:"getArrowAttributes",value:function(){var s=this.props,l=s.arrowInfo,h=s.style,v=l.start,O=l.end,w={start:v,end:O,offset:h.offset,verticalLength:h.verticalLength,type:"end"},j=$a(w),D=j.leftX,X=j.leftY,te=j.rightX,ce=j.rightY;return function(Se){for(var Pe=1;Pe<arguments.length;Pe++){var We=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?Kb(Object(We),!0).forEach(function(st){sx(Se,st,We[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(We)):Kb(Object(We)).forEach(function(st){Object.defineProperty(Se,st,Object.getOwnPropertyDescriptor(We,st))})}return Se}({d:"M".concat(D," ").concat(X," L").concat(O.x," ").concat(O.y," L").concat(te," ").concat(ce," z")},h)}},{key:"getShape",value:function(){var s=this.getArrowAttributes(),l=s.d,h=s.strokeWidth,v=s.stroke,O=s.fill;return Object(_e.g)(Jf,{d:l,fill:O,strokeWidth:h,stroke:v})}},{key:"render",value:function(){return Object(_e.g)("g",{className:"lf-arrow"},this.getShape())}}],n&&fx(t.prototype,n),c}(_e.a),qb=function(e,t){return ze(e,t)},hx=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},$v=function(){return Vt.a.Date.now()},yx=/\s/,vx=function(e){for(var t=e.length;t--&&yx.test(e.charAt(t)););return t},gx=/^\s+/,mx=function(e){return e&&e.slice(0,vx(e)+1).replace(gx,"")},bx=/^[-+]0x[0-9a-f]+$/i,_x=/^0b[01]+$/i,Ex=/^0o[0-7]+$/i,Ox=parseInt,Zb=function(e){if(typeof e=="number")return e;if(Or(e))return NaN;if(Ir(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ir(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mx(e);var n=_x.test(e);return n||Ex.test(e)?Ox(e.slice(2),n?2:8):bx.test(e)?NaN:+e},wx=Math.max,xx=Math.min,Sx=function(e,t,n){var i,c,s,l,h,v,O=0,w=!1,j=!1,D=!0;if(typeof e!="function")throw new TypeError("Expected a function");function X(st){var Ct=i,Et=c;return i=c=void 0,O=st,l=e.apply(Et,Ct)}function te(st){return O=st,h=setTimeout(Se,t),w?X(st):l}function ce(st){var Ct=st-v;return v===void 0||Ct>=t||Ct<0||j&&st-O>=s}function Se(){var st=$v();if(ce(st))return Pe(st);h=setTimeout(Se,function(Ct){var Et=t-(Ct-v);return j?xx(Et,s-(Ct-O)):Et}(st))}function Pe(st){return h=void 0,D&&i?X(st):(i=c=void 0,l)}function We(){var st=$v(),Ct=ce(st);if(i=arguments,c=this,v=st,Ct){if(h===void 0)return te(v);if(j)return clearTimeout(h),h=setTimeout(Se,t),X(v)}return h===void 0&&(h=setTimeout(Se,t)),l}return t=Zb(t)||0,Ir(n)&&(w=!!n.leading,s=(j="maxWait"in n)?wx(Zb(n.maxWait)||0,t):s,D="trailing"in n?!!n.trailing:D),We.cancel=function(){h!==void 0&&clearTimeout(h),O=0,i=v=c=h=void 0},We.flush=function(){return h===void 0?l:Pe($v())},We},Tx=o(167);function Ax(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qb,Jb,e0,Px=function(){function e(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,e),tu(this,"undos",[]),tu(this,"redos",[]),tu(this,"callbacks",[]),tu(this,"stopWatch",null),tu(this,"curData",null),tu(this,"maxSize",50),tu(this,"waitTime",100),tu(this,"eventCenter",void 0),this.eventCenter=i}var t,n;return t=e,(n=[{key:"add",value:function(i){qb(hx(this.undos),i)||(this.undos.push(i),qb(this.curData,i)||(this.redos=[]),this.eventCenter.emit(tr.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var i=this.undos.pop();this.redos.push(i);var c=this.undos.pop();return this.curData=nn(c),c}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var i=this.redos.pop();return this.curData=nn(i),i}}},{key:"watch",value:function(i){var c=this;this.stopWatch&&this.stopWatch(),this.undos.push(i.modelToGraphData()),this.stopWatch=Object(Tx.a)(i,Sx(function(){var s=i.modelToHistoryData();s&&c.add(s)},this.waitTime))}}])&&Ax(t.prototype,n),e}();function Kv(e){return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kv(e)}function jx(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||function(n,i){if(n){if(typeof n=="string")return t0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return t0(n,i)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function t0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r0(Object(n),!0).forEach(function(i){qu(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r0(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function n0(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qv(e,t){return qv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},qv(e,t)}function Nx(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=hd(e);if(t){var c=hd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Mx(this,n)}}function Mx(e,t){if(t&&(Kv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bc(e)}function bc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hd(e){return hd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hd(e)}function qu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o0,i0,a0,Zv=hi((e0=Jb=function(e){(function(l,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(h&&h.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),h&&qv(l,h)})(s,e);var t,n,i,c=Nx(s);function s(){var l;return function(h,v){if(!(h instanceof v))throw new TypeError("Cannot call a class as a function")}(this,s),qu(bc(l=c.call(this)),"ref",Object(_e.f)()),qu(bc(l),"__prevText",{type:"",text:"",id:""}),qu(bc(l),"keyupHandler",function(h){var v=l.props.graphModel.textEditElement;h.key==="Enter"&&h.altKey&&v.setElementState(0)}),qu(bc(l),"inputHandler",function(h){var v=h.target.innerText,O=l.props.graphModel.textEditElement;l.__prevText={type:O.type,text:v.replace(/(\r\n)+$|(\n)+$/,""),id:O.id}}),qu(bc(l),"keydownHandler",function(h){h.stopPropagation()}),l.state={style:{left:0,top:0}},l}return t=s,i=[{key:"getDerivedStateFromProps",value:function(l){var h,v=l.graphModel,O=v.transformModel,w=v.theme,j=v.textEditElement;if(j){var D;if((D=j.text)===null||D===void 0||!D.value)if(j.BaseType===xn.EDGE){var X=(j=j).text,te=j.textPosition,ce=te.x,Se=te.y;X.x=ce,X.y=Se,j.setText(X)}else j=j;var Pe={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(j.BaseType===xn.EDGE){var We=w.edgeText,st=We.overflowMode,Ct=We.lineHeight,Et=We.wrapPadding,qt=We.textWidth;qt&&st==="autoWrap"&&(h=mc(mc({},Pe),{},{width:qt,minWidth:qt,lineHeight:Ct,padding:Et}))}else if(j.BaseType===xn.NODE){var Rt=w.nodeText,wt=Rt.overflowMode,hr=Rt.lineHeight,Br=Rt.wrapPadding,qr=Rt.textWidth,Vr=j,en=Vr.width,In=Vr.modelType;(In!==Pr.TEXT_NODE&&wt==="autoWrap"||In===Pr.TEXT_NODE&&qr)&&(h=mc(mc({},Pe),{},{width:qr||en,minWidth:qr||en,lineHeight:hr,padding:Br}))}var Hn=j.text,Fo=Hn.x,Li=Hn.y,ei=jx(O.CanvasPointToHtmlPoint([Fo,Li]),2);return{style:mc({left:ei[0],top:ei[1]},h)}}}}],(n=[{key:"componentDidUpdate",value:function(){var l=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var h=this.__prevText,v=h.text,O=h.id;l.updateText(O,v),l.eventCenter.emit(tr.TEXT_UPDATE,mc({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(l){if(window.getSelection!==void 0&&document.createRange!==void 0){var h=document.createRange();h.selectNodeContents(l),h.collapse(!1);var v=window.getSelection();v.removeAllRanges(),v.addRange(h)}}},{key:"render",value:function(){var l,h=this.props.graphModel.textEditElement,v=this.state.style;return h?Object(_e.g)("div",{contentEditable:!0,className:"lf-text-input",style:v,ref:this.ref,key:h.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(l=h.text)===null||l===void 0?void 0:l.value):null}}])&&n0(t.prototype,n),i&&n0(t,i),s}(_e.a),qu(Jb,"toolName","textEdit"),Qb=e0))||Qb,Rx=function(e){return e.modelType===Pr.LINE_EDGE?function(t){var n=t.startPoint,i=t.endPoint,c=(n.x+i.x)/2,s=(n.y+i.y)/2,l=Math.abs(n.x-i.x)+10,h=Math.abs(n.y-i.y)+10;return{x:c-l/2,y:s-h/2,x1:c+l/2,y1:s+h/2}}(e):e.modelType===Pr.POLYLINE_EDGE?function(t){var n=t.points,i=me(n),c=Ka(i,8),s=c.x,l=c.y,h=c.width,v=c.height;return{x:s-h/2,y:l-v/2,x1:s+h/2,y1:l+v/2}}(e):e.modelType===Pr.BEZIER_EDGE?function(t){var n=t.path,i=St(n),c=Ka(i,8),s=c.x,l=c.y,h=c.width,v=c.height;return{x:s-h/2,y:l-v/2,x1:s+h/2,y1:l+v/2}}(e):void 0};function Qv(e){return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(e)}function u0(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(e,t)||s0(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dx(e){return function(t){if(Array.isArray(t))return Jv(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||s0(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s0(e,t){if(e){if(typeof e=="string")return Jv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jv(e,t):void 0}}function Jv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Cx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eg(e,t){return eg=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},eg(e,t)}function Ix(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=yd(e);if(t){var c=yd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return kx(this,n)}}function kx(e,t){if(t&&(Qv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return el(e)}function el(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yd(e){return yd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yd(e)}function tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tg=hi((a0=i0=function(e){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&eg(s,l)})(c,e);var t,n,i=Ix(c);function c(s){var l;(function(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")})(this,c),tl(el(l=i.call(this)),"stepDrag",void 0),tl(el(l),"handleMouseDown",function(w){l.stepDrag.handleMouseDown(w)}),tl(el(l),"onDragging",function(w){var j=w.deltaX,D=w.deltaY,X=l.props.graphModel,te=X.getSelectElements(!0);X.moveNodes(te.nodes.map(function(ce){return ce.id}),j,D)}),tl(el(l),"handleContextMenu",function(w){w.preventDefault();var j=l.props,D=j.graphModel,X=j.graphModel,te=X.eventCenter,ce=X.selectElements,Se=D.getPointByClient({x:w.clientX,y:w.clientY}),Pe={nodes:[],edges:[]};Dx(ce.values()).forEach(function(We){We.BaseType===xn.NODE&&Pe.nodes.push(We.getData()),We.BaseType===xn.EDGE&&Pe.edges.push(We.getData())}),te.emit(tr.SELECTION_CONTEXTMENU,{data:Pe,e:w,position:Se})});var h=s.graphModel,v=h.gridSize,O=h.eventCenter;return l.stepDrag=new Yr({onDragging:l.onDragging,step:v,eventType:"SELECTION",eventCenter:O}),l}return t=c,(n=[{key:"render",value:function(){var s=this.props.graphModel,l=s.selectElements,h=s.transformModel;if(!(l.size<=1)){var v=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER;l.forEach(function(ce){var Se={x:0,y:0,x1:0,y1:0};ce.BaseType===xn.NODE&&(Se=function(Pe){var We=Pe.x,st=Pe.y,Ct=Pe.width,Et=Pe.height;return{x:We-Ct/2,y:st-Et/2,x1:We+Ct/2,y1:st+Et/2}}(ce)),ce.BaseType===xn.EDGE&&(Se=Rx(ce)),v=Math.min(v,Se.x),O=Math.min(O,Se.y),w=Math.max(w,Se.x1),j=Math.max(j,Se.y1)});var D=u0(h.CanvasPointToHtmlPoint([v,O]),2);v=D[0],O=D[1];var X=u0(h.CanvasPointToHtmlPoint([w,j]),2);w=X[0],j=X[1];var te={left:"".concat(v-10,"px"),top:"".concat(O-10,"px"),width:"".concat(w-v+20,"px"),height:"".concat(j-O+20,"px")};return Object(_e.g)("div",{className:"lf-multiple-select",style:te,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&Cx(t.prototype,n),c}(_e.a),tl(i0,"toolName","multipleSelect"),o0=a0))||o0;function Lx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bx=function(){function e(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),vd(this,"tools",void 0),vd(this,"components",void 0),vd(this,"toolMap",new Map),vd(this,"instance",void 0),this.instance=i,this.isDisabledTool(Zv.toolName)||this.registerTool(Zv.toolName,Zv),this.isDisabledTool(tg.toolName)||this.registerTool(tg.toolName,tg);var c=i.graphModel;c.eventCenter.on("".concat(tr.GRAPH_TRANSFORM,",").concat(tr.NODE_CLICK,",").concat(tr.BLANK_CLICK," "),function(){var s=c.textEditElement,l=c.editConfigModel,h=l.edgeTextEdit,v=l.nodeTextEdit;(h||v)&&s&&c.textEditElement.setElementState(zr.DEFAULT)})}var t,n;return t=e,(n=[{key:"isDisabledTool",value:function(i){return this.instance.options.disabledTools.indexOf(i)!==-1}},{key:"registerTool",value:function(i,c){this.toolMap.set(i,c)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&Lx(t.prototype,n),e}(),Fx=o(168),Gx=o.n(Fx);function Ux(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c0=function(){function e(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,e),rg(this,"mousetrap",void 0),rg(this,"options",void 0),rg(this,"target",void 0),i.keyboard||(i.keyboard={enabled:!1}),this.options=i;var c=i.lf;this.target=c.container,this.mousetrap=new Gx.a(this.target),i.keyboard.enabled&&this.enable(!0)}var t,n;return t=e,(n=[{key:"initShortcuts",value:function(){var i=this,c=this.options.keyboard.shortcuts;if(c)if(Gn(c))c.forEach(function(v){var O=v.keys,w=v.callback,j=v.action;return i.on(O,w,j)});else{var s=c.keys,l=c.callback,h=c.action;this.on(s,l,h)}}},{key:"on",value:function(i,c,s){this.mousetrap.bind(this.getKeys(i),c,s)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(i,c){this.mousetrap.unbind(this.getKeys(i),c)}},{key:"enable",value:function(i){(this.disabled||i)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(i){var c=this;return(Array.isArray(i)?i:[i]).map(function(s){return c.formatKey(s)})}},{key:"formatKey",value:function(i){return i.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&Ux(t.prototype,n),e}(),zx=c0,ha=null;function f0(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function l0(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(n){n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}function ng(e){return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function p0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p0(Object(n),!0).forEach(function(i){Cn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p0(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function d0(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var og=function(){function e(c){var s,l,h=this;(function(v,O){if(!(v instanceof O))throw new TypeError("Cannot call a class as a function")})(this,e),Cn(this,"container",void 0),Cn(this,"width",void 0),Cn(this,"height",void 0),Cn(this,"graphModel",void 0),Cn(this,"history",void 0),Cn(this,"viewMap",new Map),Cn(this,"tool",void 0),Cn(this,"keyboard",void 0),Cn(this,"dnd",void 0),Cn(this,"options",void 0),Cn(this,"snaplineModel",void 0),Cn(this,"components",[]),Cn(this,"plugins",void 0),Cn(this,"extension",{}),Cn(this,"adapterIn",void 0),Cn(this,"adapterOut",void 0),Cn(this,"getView",function(v){return h.viewMap.get(v)}),c=dm(c),this.options=c,this.container=this.initContainer(c.container),this.plugins=c.plugins,this.graphModel=new Er(rl({},c)),this.tool=new Bx(this),this.history=new Px(this.graphModel.eventCenter),this.dnd=new VO({lf:this}),this.keyboard=new zx({lf:this,keyboard:c.keyboard}),c.snapline!==!1&&(this.snaplineModel=new wb(this.graphModel),s=this.graphModel.eventCenter,l=this.snaplineModel,s.on("node:mousemove",function(v){var O=v.data;l.setNodeSnapLine(O)}),s.on("node:mouseup",function(){l.clearSnapline()})),function(v,O){var w=v.keyboard,j=w.options.keyboard;w.on(["cmd + c","ctrl + c"],function(){if(!j.enabled||O.textEditElement)return!0;var D=v.options.guards,X=O.getSelectElements(!1);return D&&D.beforeClone&&!D.beforeClone(X)||X.nodes.length===0&&X.edges.length===0?(ha=null,!0):((ha=X).nodes.forEach(function(te){return f0(te,40)}),ha.edges.forEach(function(te){return l0(te,40)}),!1)}),w.on(["cmd + v","ctrl + v"],function(){if(!j.enabled||O.textEditElement)return!0;if(ha&&(ha.nodes||ha.edges)){v.clearSelectElements();var D=v.addElements(ha);if(!D)return!0;D.nodes.forEach(function(X){return v.selectElementById(X.id,!0)}),D.edges.forEach(function(X){return v.selectElementById(X.id,!0)}),ha.nodes.forEach(function(X){return f0(X,40)}),ha.edges.forEach(function(X){return l0(X,40)})}return!1}),w.on(["cmd + z","ctrl + z"],function(){return!j.enabled||!!O.textEditElement||(v.undo(),!1)}),w.on(["cmd + y","ctrl + y"],function(){return!j.enabled||!!O.textEditElement||(v.redo(),!1)}),w.on(["backspace"],function(){if(!j.enabled||O.textEditElement)return!0;var D=O.getSelectElements(!0);return v.clearSelectElements(),D.edges.forEach(function(X){return v.deleteEdge(X.id)}),D.nodes.forEach(function(X){return v.deleteNode(X.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(c.disabledPlugins)}var t,n,i;return t=e,n=[{key:"register",value:function(c,s){var l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof c=="string"){var h={BaseEdge:Qf,BaseEdgeModel:Gu,BaseNode:fa,BaseNodeModel:ca,RectNode:Zy,RectNodeModel:My,CircleNode:tv,CircleNodeModel:py,PolygonNode:av,PolygonNodeModel:Ay,TextNode:mv,TextNodeModel:Iy,LineEdge:kv,LineEdgeModel:$o,DiamondNode:fv,DiamondNodeModel:gy,PolylineEdge:Uv,PolylineEdgeModel:Vn,BezierEdge:Vv,BezierEdgeModel:ay,EllipseNode:yv,EllipseNodeModel:Ey,HtmlNode:Ov,HtmlNodeModel:By,h:_e.g,type:c};this.viewMap.forEach(function(D){var X=D.extendKey;X&&(h[X]=D)}),this.graphModel.modelMap.forEach(function(D){var X=D.extendKey;X&&(h[X]=D)});var v=s(h),O=v.view,w=v.model,j=O;l&&!j.isObervered&&(j.isObervered=!0,j=Xt(j)),this.setView(c,j),this.graphModel.setModel(c,w)}else this.registerElement(c)}},{key:"registerElement",value:function(c){var s=c.view;c.isObserverView===!1||s.isObervered||(s.isObervered=!0,s=Xt(s)),this.setView(c.type,s),this.graphModel.setModel(c.type,c.model)}},{key:"batchRegister",value:function(){var c=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];s.forEach(function(l){c.registerElement(l)})}},{key:"defaultRegister",value:function(){this.registerElement({view:Zy,model:My,type:"rect"}),this.registerElement({type:"circle",view:tv,model:py}),this.registerElement({type:"polygon",view:av,model:Ay}),this.registerElement({type:"line",view:kv,model:$o}),this.registerElement({type:"polyline",view:Uv,model:Vn}),this.registerElement({type:"bezier",view:Vv,model:ay}),this.registerElement({type:"text",view:mv,model:Iy}),this.registerElement({type:"ellipse",view:yv,model:Ey}),this.registerElement({type:"diamond",view:fv,model:gy}),this.registerElement({type:"html",view:Ov,model:By})}},{key:"selectElementById",value:function(c){var s=arguments.length>1&&arguments[1]!==void 0&&arguments[1],l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(c,s),!s&&l&&this.graphModel.toFront(c)}},{key:"focusOn",value:function(c){var s=this.graphModel.transformModel,l=c.coordinate,h=c.id;if(!l){var v=this.getNodeModelById(h);v&&(l=v.getData());var O=this.getEdgeModelById(h);O&&(l=O.textPosition)}var w=l,j=w.x,D=w.y;s.focusOn(j,D,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(c){this.graphModel.setTheme(c)}},{key:"resize",value:function(c,s){this.graphModel.resize(c,s),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(c){this.graphModel.setDefaultEdgeType(c)}},{key:"updateText",value:function(c,s){this.graphModel.updateText(c,s)}},{key:"deleteElement",value:function(c){var s,l,h,v=this.getModelById(c);return!!v&&(l=(h=(Cn(s={},xn.NODE,this.deleteNode),Cn(s,xn.EDGE,this.deleteEdge),s)[v.BaseType])===null||h===void 0?void 0:h.call(this,c))!==null&&l!==void 0&&l}},{key:"getModelById",value:function(c){return this.graphModel.getElement(c)}},{key:"getDataById",value:function(c){var s;return(s=this.graphModel.getElement(c))===null||s===void 0?void 0:s.getData()}},{key:"changeNodeType",value:function(c,s){this.graphModel.changeNodeType(c,s)}},{key:"changeEdgeType",value:function(c,s){this.graphModel.changeEdgeType(c,s)}},{key:"getNodeEdges",value:function(c){return this.graphModel.getNodeEdges(c)}},{key:"addNode",value:function(c){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tr.NODE_ADD;return this.graphModel.addNode(c,s)}},{key:"deleteNode",value:function(c){var s=this.graphModel.getNodeModelById(c);if(!s)return!1;var l=s.getData(),h=this.options.guards,v=!h||!h.beforeDelete||h.beforeDelete(l);return v&&this.graphModel.deleteNode(c),v}},{key:"cloneNode",value:function(c){var s=this.graphModel.getNodeModelById(c).getData(),l=this.options.guards;if(!l||!l.beforeClone||l.beforeClone(s))return this.graphModel.cloneNode(c)}},{key:"changeNodeId",value:function(c,s){return this.graphModel.changeNodeId(c,s)}},{key:"getNodeModelById",value:function(c){return this.graphModel.getNodeModelById(c)}},{key:"getNodeDataById",value:function(c){var s;return(s=this.graphModel.getNodeModelById(c))===null||s===void 0?void 0:s.getData()}},{key:"addEdge",value:function(c){return this.graphModel.addEdge(c)}},{key:"deleteEdge",value:function(c){var s=this.options.guards,l=this.graphModel.edgesMap[c];if(!l)return!1;var h=l.model.getData(),v=!s||!s.beforeDelete||s.beforeDelete(h);return v&&this.graphModel.deleteEdgeById(c),v}},{key:"deleteEdgeByNodeId",value:function(c){var s=c.sourceNodeId,l=c.targetNodeId;s&&l?this.graphModel.deleteEdgeBySourceAndTarget(s,l):s?this.graphModel.deleteEdgeBySource(s):l&&this.graphModel.deleteEdgeByTarget(l)}},{key:"changeEdgeId",value:function(c,s){return this.graphModel.changeEdgeId(c,s)}},{key:"getEdgeModelById",value:function(c){var s;return(s=this.graphModel.edgesMap[c])===null||s===void 0?void 0:s.model}},{key:"getEdgeModels",value:function(c){var s=this.graphModel.edges,l=c.sourceNodeId,h=c.targetNodeId;if(l&&h){var v=[];return s.forEach(function(j){j.sourceNodeId===l&&j.targetNodeId===h&&v.push(j)}),v}if(l){var O=[];return s.forEach(function(j){j.sourceNodeId===l&&O.push(j)}),O}if(h){var w=[];return s.forEach(function(j){j.targetNodeId===h&&w.push(j)}),w}return[]}},{key:"getEdgeDataById",value:function(c){var s;return(s=this.getEdgeModelById(c))===null||s===void 0?void 0:s.getData()}},{key:"getNodeIncomingEdge",value:function(c){return this.graphModel.getNodeIncomingEdge(c)}},{key:"getNodeOutgoingEdge",value:function(c){return this.graphModel.getNodeOutgoingEdge(c)}},{key:"getNodeIncomingNode",value:function(c){return this.graphModel.getNodeIncomingNode(c)}},{key:"getNodeOutgoingNode",value:function(c){return this.graphModel.getNodeOutgoingNode(c)}},{key:"editText",value:function(c){this.graphModel.editText(c)}},{key:"setProperties",value:function(c,s){var l;(l=this.graphModel.getElement(c))===null||l===void 0||l.setProperties(Xn(s))}},{key:"deleteProperty",value:function(c,s){var l;(l=this.graphModel.getElement(c))===null||l===void 0||l.deleteProperty(s)}},{key:"getProperties",value:function(c){var s;return(s=this.graphModel.getElement(c))===null||s===void 0?void 0:s.getProperties()}},{key:"toFront",value:function(c){this.graphModel.toFront(c)}},{key:"setElementZIndex",value:function(c,s){return this.graphModel.setElementZIndex(c,s)}},{key:"addElements",value:function(c){for(var s=this,l=c.nodes,h=c.edges,v={},O={nodes:[],edges:[]},w=0;w<l.length;w++){var j=l[w],D=j.id,X=this.addNode(j);if(!X)return;D&&(v[D]=X.id),O.nodes.push(X)}return h.forEach(function(te){var ce=te.sourceNodeId,Se=te.targetNodeId;v[ce]&&(ce=v[ce]),v[Se]&&(Se=v[Se]);var Pe=s.graphModel.addEdge(rl(rl({},te),{},{sourceNodeId:ce,targetNodeId:Se}));O.edges.push(Pe)}),O}},{key:"getAreaElement",value:function(c,s){var l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],h=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],v=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(c,s,l,h,v).map(function(O){return O.getData()})}},{key:"getSelectElements",value:function(){var c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(c)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var c=this.graphModel.modelToGraphData();return this.adapterOut?this.adapterOut(c):c}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(c){this.graphModel.editConfigModel.updateEditConfig(c)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(c,s){return this.graphModel.getPointByClient({x:c,y:s})}},{key:"undo",value:function(){if(this.history.undoAble()){var c=Xn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(c)}}},{key:"redo",value:function(){if(this.history.redoAble()){var c=Xn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(c)}}},{key:"zoom",value:function(c,s){return this.graphModel.transformModel.zoom(c,s)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(c){this.graphModel.transformModel.setZoomMiniSize(c)}},{key:"setZoomMaxSize",value:function(c){this.graphModel.transformModel.setZoomMaxSize(c)}},{key:"getTransform",value:function(){var c=this.graphModel.transformModel;return{SCALE_X:c.SCALE_X,SCALE_Y:c.SCALE_Y,TRANSLATE_X:c.TRANSLATE_X,TRANSLATE_Y:c.TRANSLATE_Y}}},{key:"translate",value:function(c,s){this.graphModel.transformModel.translate(c,s)}},{key:"resetTranslate",value:function(){var c=this.graphModel.transformModel,s=c.TRANSLATE_X,l=c.TRANSLATE_Y;this.translate(-s,-l)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(c,s){s===void 0&&(s=c),this.graphModel.fitView(c,s)}},{key:"openEdgeAnimation",value:function(c){this.graphModel.openEdgeAnimation(c)}},{key:"closeEdgeAnimation",value:function(c){this.graphModel.closeEdgeAnimation(c)}},{key:"on",value:function(c,s){this.graphModel.eventCenter.on(c,s)}},{key:"off",value:function(c,s){this.graphModel.eventCenter.off(c,s)}},{key:"once",value:function(c,s){this.graphModel.eventCenter.once(c,s)}},{key:"emit",value:function(c,s){this.graphModel.eventCenter.emit(c,s)}},{key:"initContainer",value:function(c){var s=document.createElement("div");return s.style.position="relative",s.style.width="100%",s.style.height="100%",c.innerHTML="",c.appendChild(s),s}},{key:"installPlugins",value:function(){var c,s=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=(c=this.plugins)!==null&&c!==void 0?c:e.extensions;h.forEach(function(v){var O=v.pluginName||v.name;l.indexOf(O)===-1&&s.installPlugin(v)})}},{key:"installPlugin",value:function(c){if(ng(c)==="object"){var s=c.install,l=c.render;return s&&s.call(c,this,e),l&&this.components.push(l.bind(c)),void(this.extension[c.pluginName]=c)}var h=c,v=new h({lf:this,LogicFlow:e,options:this.options.pluginsOptions});v.render&&this.components.push(v.render.bind(v)),this.extension[h.pluginName]=v}},{key:"updateAttributes",value:function(c,s){this.graphModel.updateAttributes(c,s)}},{key:"createFakerNode",value:function(c){var s=this.graphModel.modelMap.get(c.type);if(s){var l=new s(rl(rl({},c),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(l),l}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(c){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(c)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(c,s){this.viewMap.set(c,s)}},{key:"renderRawData",value:function(c){this.graphModel.graphDataToModel(Xn(c)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(_e.j)(Object(_e.g)(HO,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(tr.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(c=this.adapterIn(c)),this.renderRawData(c)}}],i=[{key:"use",value:function(c){var s=c.pluginName;s||(s=c.name);var l=this.extensions.get(s);l&&l.destroy&&l.destroy(),this.extensions.set(s,c)}}],n&&d0(t.prototype,n),i&&d0(t,i),e}();function hi(e){return Xt(e)}Cn(og,"extensions",new Map),f.default=og}])})})(pg,pg.exports);var Ht=pg.exports,D_=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Kx=function(r){D_(u,r);function u(a,f){var o=this;return a.id||(a.id="Event_"+zi()),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),o=r.call(this,a,f)||this,o}return u.prototype.setAttributes=function(){this.r=18},u.prototype.getConnectedTargetRules=function(){var a=r.prototype.getConnectedTargetRules.call(this),f={message:"",validate:function(){return!1}};return a.push(f),a},u.extendKey="StartEventModel",u}(Ht.CircleNodeModel),qx=function(r){D_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.extendKey="StartEventNode",u}(Ht.CircleNode),C_=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Nd=globalThis&&globalThis.__assign||function(){return Nd=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},Nd.apply(this,arguments)},Zx=function(r){C_(u,r);function u(a,f){var o=this;return a.id||(a.id="Event_"+zi()),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),o=r.call(this,a,f)||this,o}return u.prototype.setAttributes=function(){this.r=18},u.prototype.getConnectedSourceRules=function(){var a=r.prototype.getConnectedSourceRules.call(this),f={message:"",validate:function(){return!1}};return a.push(f),a},u.extendKey="EndEventModel",u}(Ht.CircleNodeModel),Qx=function(r){C_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},u.prototype.getShape=function(){var a=this.props.model,f=a.getNodeStyle(),o=a.x,p=a.y,d=a.r,y=r.prototype.getShape.call(this);return Ht.h("g",{},y,Ht.h("circle",Nd(Nd({},f),{cx:o,cy:p,r:d-5})))},u.extendKey="EndEventView",u}(Ht.CircleNode),I_=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),pl=globalThis&&globalThis.__assign||function(){return pl=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},pl.apply(this,arguments)},Jx=function(r){I_(u,r);function u(a,f){var o=this;return a.id||(a.id="Gateway_"+zi()),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),o=r.call(this,a,f)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}return u.extendKey="ExclusiveGatewayModel",u}(Ht.PolygonNodeModel),eS=function(r){I_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.points,g=a.getNodeStyle();return Ht.h("g",{transform:"matrix(1 0 0 1 "+(f-p/2)+" "+(o-d/2)+")"},Ht.h("polygon",pl(pl({},g),{x:f,y:o,points:y})),Ht.h("path",pl({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},g)))},u.extendKey="ExclusiveGatewayNode",u}(Ht.PolygonNode),k_=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Md=globalThis&&globalThis.__assign||function(){return Md=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},Md.apply(this,arguments)},tS=function(r){k_(u,r);function u(a,f){var o=this;return a.id||(a.id="Activity_"+zi()),o=r.call(this,a,f)||this,o}return u.extendKey="UserTaskModel",u}(Ht.RectNodeModel),rS=function(r){k_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getLabelShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.getNodeStyle();return Ht.h("svg",{x:f-p/2+5,y:o-d/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Ht.h("path",{fill:y.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},u.prototype.getShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.radius,g=a.getNodeStyle();return Ht.h("g",{},[Ht.h("rect",Md(Md({},g),{x:f-p/2,y:o-d/2,rx:y,ry:y,width:p,height:d})),this.getLabelShape()])},u.extendKey="UserTaskNode",u}(Ht.RectNode),L_=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),dg=globalThis&&globalThis.__assign||function(){return dg=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},dg.apply(this,arguments)},nS=function(r){L_(u,r);function u(a,f){var o=this;return a.id||(a.id="Activity_"+zi()),o=r.call(this,a,f)||this,o}return u.extendKey="ServiceTaskModel",u}(Ht.RectNodeModel),oS=function(r){L_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getLabelShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.getNodeStyle();return Ht.h("svg",{x:f-p/2+5,y:o-d/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Ht.h("path",{fill:y.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},u.prototype.getShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.radius,g=a.getNodeStyle();return Ht.h("g",{},[Ht.h("rect",dg({x:f-p/2,y:o-d/2,rx:y,ry:y,width:p,height:d},g)),this.getLabelShape()])},u.extendKey="ServiceTaskNode",u}(Ht.RectNode),B_=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),F_=function(r){B_(u,r);function u(a,f){var o=this;return a.id||(a.id="Flow_"+zi()),o=r.call(this,a,f)||this,o}return u.extendKey="SequenceFlowModel",u}(Ht.PolylineEdgeModel),G_=function(r){B_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.extendKey="SequenceFlowEdge",u}(Ht.PolylineEdge),g0={width:40,height:40},m0={width:40,height:40},b0={width:40,height:40},_0={width:100,height:80},E0={width:100,height:80},iS=new Yx([32,32,1]);function O0(){return iS.next()}function U_(r){return Object.prototype.toString.call(r)}function aS(r){return"  ".repeat(r)}function Rd(r){var u=r;return U_(r)==="[object Object]"?(u={},Object.keys(r).forEach(function(a){var f=a;a.charAt(0)==="-"&&(f=a.substring(1)),u[f]=Rd(r[a])})):Array.isArray(r)&&(u=[],r.forEach(function(a,f){u[f]=Rd(a)})),u}function uS(r){var u=r;try{typeof u!="string"&&(u=JSON.parse(r))}catch{u=JSON.stringify(Rd(r)).replace(/"/g,"'")}return u}var Ec=`	
`;function Sd(r,u,a){var f=aS(a),o="";if(u==="#text")return Ec+f+r;if(u==="#cdata-section")return Ec+f+"<![CDATA["+r+"]]>";if(u==="#comment")return Ec+f+"<!--"+r+"-->";if((""+u).charAt(0)==="-")return" "+u.substring(1)+'="'+uS(r)+'"';if(Array.isArray(r))r.forEach(function(g){o+=Sd(g,u,a+1)});else if(U_(r)==="[object Object]"){var p=Object.keys(r),d="",y="";o+=(a===0?"":Ec+f)+"<"+u,p.forEach(function(g){g.charAt(0)==="-"?d+=Sd(r[g],g,a+1):y+=Sd(r[g],g,a+1)}),o+=d+(y!==""?">"+y+(Ec+f)+"</"+u+">":" />")}else o+=Ec+f+("<$"+u+">"+r.toString()+"</"+u+">");return o}function sS(r){var u=`<LogicFlow>	
`;for(var a in r)u+=Sd(r[a],a,0);return u+`	
</LogicFlow>`}var wo=function(){};wo.ObjTree=function(){return this};wo.ObjTree.VERSION="0.23";wo.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;wo.ObjTree.prototype.attr_prefix="-";wo.ObjTree.prototype.parseXML=function(r){var u;if(window.DOMParser){var a=new DOMParser,f=a.parseFromString(r,"application/xml");if(!f)return;u=f.documentElement}else window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(r),u=a.documentElement);if(u)return this.parseDOM(u)};wo.ObjTree.prototype.parseHTTP=function(r,u,a){var f={};for(var o in u)f[o]=u[o];if(f.method||(typeof f.postBody>"u"&&typeof f.postbody>"u"&&typeof f.parameters>"u"?f.method="get":f.method="post"),a){f.asynchronous=!0;var p=this,d=a,y=f.onComplete;f.onComplete=function(_){var T;_&&_.responseXML&&_.responseXML.documentElement&&(T=p.parseDOM(_.responseXML.documentElement)),d(T,_),y&&y(_)}}else f.asynchronous=!1;var g;if(typeof HTTP<"u"&&HTTP.Request){f.uri=r;var E=new HTTP.Request(f);E&&(g=E.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var E=new Ajax.Request(r,f);E&&(g=E.transport)}if(a)return g;if(g&&g.responseXML&&g.responseXML.documentElement)return this.parseDOM(g.responseXML.documentElement)};wo.ObjTree.prototype.parseDOM=function(r){if(r){if(this.__force_array={},this.force_array)for(var u=0;u<this.force_array.length;u++)this.__force_array[this.force_array[u]]=1;var a=this.parseElement(r);if(this.__force_array[r.nodeName]&&(a=[a]),r.nodeType!=11){var f={};f[r.nodeName]=a,a=f}return a.LogicFlow}};wo.ObjTree.prototype.parseElement=function(r){if(r.nodeType!=7){if(r.nodeType==3||r.nodeType==4||r.nodeType==8){var u=r.nodeValue.match(/[^\x00-\x20]/);return u==null?void 0:r.nodeValue}var a=null,f={};if(r.attributes&&r.attributes.length){a={};for(var o=0;o<r.attributes.length;o++){var p=r.attributes[o].nodeName;if(typeof p=="string"){var d=r.attributes[o].nodeValue;try{d=JSON.parse(r.attributes[o].nodeValue.replace(/'/g,'"'))}catch{d=r.attributes[o].nodeValue}d&&(p=this.attr_prefix+p,typeof f[p]>"u"&&(f[p]=0),f[p]++,this.addNode(a,p,f[p],d))}}}if(r.childNodes&&r.childNodes.length){var y=!0;a&&(y=!1);for(var o=0;o<r.childNodes.length&&y;o++){var g=r.childNodes[o].nodeType;g==3||g==4||g==8||(y=!1)}if(y){a||(a="");for(var o=0;o<r.childNodes.length;o++)a+=r.childNodes[o].nodeValue}else{a||(a={});for(var o=0;o<r.childNodes.length;o++){var p=r.childNodes[o].nodeName;if(typeof p=="string"){var d=this.parseElement(r.childNodes[o]);d&&(typeof f[p]>"u"&&(f[p]=0),f[p]++,this.addNode(a,p,f[p],d))}}}}else a===null&&(a={});return a}};wo.ObjTree.prototype.addNode=function(r,u,a,f){this.__force_array[u]?(a==1&&(r[u]=[]),r[u][r[u].length]=f):a==1?r[u]=f:a==2?r[u]=[r[u],f]:r[u][r[u].length]=f};wo.ObjTree.prototype.writeXML=function(r){var u=this.hash_to_xml(null,r);return this.xmlDecl+u};wo.ObjTree.prototype.hash_to_xml=function(r,u){var a=[],f=[];for(var o in u)if(u.hasOwnProperty(o)){var p=u[o];o.charAt(0)!=this.attr_prefix?typeof p>"u"||p==null?a[a.length]="<"+o+" />":typeof p=="object"&&p.constructor==Array?a[a.length]=this.array_to_xml(o,p):typeof p=="object"?a[a.length]=this.hash_to_xml(o,p):a[a.length]=this.scalar_to_xml(o,p):f[f.length]=" "+o.substring(1)+'="'+this.xml_escape(p)+'"'}var d=f.join(""),y=a.join("");return typeof r>"u"||r==null||(a.length>0?y.match(/\n/)?y="<"+r+d+`>
`+y+"</"+r+`>
`:y="<"+r+d+">"+y+"</"+r+`>
`:y="<"+r+d+` />
`),y};wo.ObjTree.prototype.array_to_xml=function(r,u){for(var a=[],f=0;f<u.length;f++){var o=u[f];typeof o>"u"||o==null?a[a.length]="<"+r+" />":typeof o=="object"&&o.constructor==Array?a[a.length]=this.array_to_xml(r,o):typeof o=="object"?a[a.length]=this.hash_to_xml(r,o):a[a.length]=this.scalar_to_xml(r,o)}return a.join("")};wo.ObjTree.prototype.scalar_to_xml=function(r,u){return r=="#text"?this.xml_escape(u):"<"+r+">"+this.xml_escape(u)+"</"+r+`>
`};wo.ObjTree.prototype.xml_escape=function(r){return r.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var cS=function(r){return new wo.ObjTree().parseXML(r)},fS=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),hg=globalThis&&globalThis.__assign||function(){return hg=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},hg.apply(this,arguments)},Vd=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},Ui;(function(r){r.START="bpmn:startEvent",r.END="bpmn:endEvent",r.GATEWAY="bpmn:exclusiveGateway",r.USER="bpmn:userTask",r.SYSTEM="bpmn:serviceTask",r.FLOW="bpmn:sequenceFlow"})(Ui||(Ui={}));var z_=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],w0=["properties","startPoint","endPoint","pointsList"];function x0(r){var u=r?w0.concat(r):w0;return function(a){function f(o){var p={};return typeof o=="string"?o:Array.isArray(o)?o.map(function(d){return f(d)}):(Object.entries(o).forEach(function(d){var y=Vd(d,2),g=y[0],E=y[1];typeof E!="object"?g.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(g)?p[g]=E:p["-"+g]=E:u.includes(g)?p["-"+g]=f(E):p[g]=f(E)}),p)}return f(a)}}function Dd(r){var u={};return Object.entries(r).forEach(function(a){var f=Vd(a,2),o=f[0],p=f[1];o.indexOf("-")===0?u[o.substring(1)]=Rd(p):typeof p=="string"?u[o]=p:Object.prototype.toString.call(p)==="[object Object]"?u[o]=Dd(p):Array.isArray(p)?u[o]=p.map(function(d){return Dd(d)}):u[o]=p}),u}function lS(r,u){var a=new Map;u.nodes.forEach(function(o){var p,d={"-id":o.id};if(!((p=o.text)===null||p===void 0)&&p.value&&(d["-name"]=o.text.value),o.properties){var y=x0()(o.properties);Object.assign(d,y)}a.set(o.id,d),r[o.type]?Array.isArray(r[o.type])?r[o.type].push(d):r[o.type]=[r[o.type],d]:r[o.type]=d});var f=u.edges.map(function(o){var p,d,y=a.get(o.targetNodeId);y["bpmn:incoming"]?Array.isArray(y["bpmn:incoming"])?y["bpmn:incoming"].push(o.id):y["bpmn:incoming"]=[y["bpmn:incoming"],o.id]:y["bpmn:incoming"]=o.id;var g={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((p=o.text)===null||p===void 0)&&p.value&&(g["-name"]=(d=o.text)===null||d===void 0?void 0:d.value),o.properties){var E=x0()(o.properties);Object.assign(g,E)}return g});u.edges.forEach(function(o){var p=a.get(o.sourceNodeId);p["bpmn:outgoing"]?Array.isArray(p["bpmn:outgoing"])?p["bpmn:outgoing"].push(o.id):p["bpmn:outgoing"]=[p["bpmn:outgoing"],o.id]:p["bpmn:outgoing"]=o.id}),r[Ui.FLOW]=f}function pS(r,u){r["bpmndi:BPMNEdge"]=u.edges.map(function(a){var f,o=a.id,p=a.pointsList.map(function(y){var g=y.x,E=y.y;return{"-x":g,"-y":E}}),d={"-id":o+"_di","-bpmnElement":o,"di:waypoint":p};return!((f=a.text)===null||f===void 0)&&f.value&&(d["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":a.text.x-a.text.value.length*10/2,"-y":a.text.y-7,"-width":a.text.value.length*10,"-height":14}}),d}),r["bpmndi:BPMNShape"]=u.nodes.map(function(a){var f,o=a.id,p=100,d=80,y=a.x,g=a.y,E=au.shapeConfigMap.get(a.type);E&&(p=E.width,d=E.height),y-=p/2,g-=d/2;var _={"-id":o+"_di","-bpmnElement":o,"dc:Bounds":{"-x":y,"-y":g,"-width":p,"-height":d}};return!((f=a.text)===null||f===void 0)&&f.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":a.text.x-a.text.value.length*10/2,"-y":a.text.y-7,"-width":a.text.value.length*10,"-height":14}}),_})}function dS(r){var u=[],a=[],f=r["bpmn:definitions"];if(f){var o=f["bpmn:process"];Object.keys(o).forEach(function(p){if(p.indexOf("bpmn:")===0){var d=o[p];if(p===Ui.FLOW){var y=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=yS(d,y)}else{var g=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];u=u.concat(hS(d,g,p))}}})}return{nodes:u,edges:a}}function hS(r,u,a){var f=[];if(Array.isArray(r))r.forEach(function(d){var y;Array.isArray(u)?y=u.find(function(E){return E["-bpmnElement"]===d["-id"]}):y=u;var g=S0(y,a,d);f.push(g)});else{var o=void 0;Array.isArray(u)?o=u.find(function(d){return d["-bpmnElement"]===r["-id"]}):o=u;var p=S0(o,a,r);f.push(p)}return f}function S0(r,u,a){var f=Number(r["dc:Bounds"]["-x"]),o=Number(r["dc:Bounds"]["-y"]),p=a["-name"],d=au.shapeConfigMap.get(u);d&&(f+=d.width/2,o+=d.height/2);var y;Object.entries(a).forEach(function(T){var P=Vd(T,2),A=P[0],N=P[1];z_.indexOf(A)===-1&&(y||(y={}),y[A]=N)}),y&&(y=Dd(y));var g;if(p&&(g={x:f,y:o,value:p},r["bpmndi:BPMNLabel"]&&r["bpmndi:BPMNLabel"]["dc:Bounds"])){var E=r["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(E["-x"])+Number(E["-width"])/2,g.y=Number(E["-y"])+Number(E["-height"])/2}var _={id:r["-bpmnElement"],type:u,x:f,y:o,properties:y};return g&&(_.text=g),_}function yS(r,u){var a=[];if(Array.isArray(r))r.forEach(function(o){var p;Array.isArray(u)?p=u.find(function(d){return d["-bpmnElement"]===o["-id"]}):p=u,a.push(T0(p,o))});else{var f=void 0;Array.isArray(u)?f=u.find(function(o){return o["-bpmnElement"]===r["-id"]}):f=u,a.push(T0(f,r))}return a}function T0(r,u){var a,f=u["-name"];if(f){var o=r["bpmndi:BPMNLabel"]["dc:Bounds"],p=0;f.split(`
`).forEach(function(g){p<g.length&&(p=g.length)}),a={value:f,x:Number(o["-x"])+p*10/2,y:Number(o["-y"])+7}}var d;Object.entries(u).forEach(function(g){var E=Vd(g,2),_=E[0],T=E[1];z_.indexOf(_)===-1&&(d||(d={}),d[_]=T)}),d&&(d=Dd(d));var y={id:u["-id"],type:Ui.FLOW,pointsList:r["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),sourceNodeId:u["-sourceRef"],targetNodeId:u["-targetRef"],properties:d};return a&&(y.text=a),y}var au=function(){function r(u){var a=this,f=u.lf;this.adapterOut=function(o){var p=hg({},a.processAttributes);lS(p,o);var d={"-id":"BPMNPlane_1","-bpmnElement":p["-id"]};pS(d,o);var y=a.definitionAttributes;y["bpmn:process"]=p,y["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":d};var g={"bpmn:definitions":y};return g},this.adapterIn=function(o){if(o)return dS(o)},f.adapterIn=function(o){return a.adapterIn(o)},f.adapterOut=function(o){return a.adapterOut(o)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+O0()},this.definitionAttributes={"-id":"Definitions_"+O0(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return r.prototype.setCustomShape=function(u,a){r.shapeConfigMap.set(u,a)},r.pluginName="bpmn-adapter",r.shapeConfigMap=new Map,r}();au.shapeConfigMap.set(Ui.START,{width:g0.width,height:g0.height});au.shapeConfigMap.set(Ui.END,{width:m0.width,height:m0.height});au.shapeConfigMap.set(Ui.GATEWAY,{width:b0.width,height:b0.height});au.shapeConfigMap.set(Ui.SYSTEM,{width:_0.width,height:_0.height});au.shapeConfigMap.set(Ui.USER,{width:E0.width,height:E0.height});(function(r){fS(u,r);function u(a){var f=r.call(this,a)||this;f.adapterXmlIn=function(p){var d=cS(p);return f.adapterIn(d)},f.adapterXmlOut=function(p){var d=f.adapterOut(p);return sS(d)};var o=a.lf;return o.adapterIn=f.adapterXmlIn,o.adapterOut=f.adapterXmlOut,f}return u.pluginName="bpmnXmlAdapter",u})(au);var A0=globalThis&&globalThis.__assign||function(){return A0=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},A0.apply(this,arguments)};globalThis&&globalThis.__read;var Dc;(function(r){r.HORIZONTAL="horizontal",r.VERTICAL="vertical"})(Dc||(Dc={}));var vS=function(r,u,a,f){f===void 0&&(f=0);var o=mS(r,u,a);return o<=f};function P0(r){return r*r}function ig(r,u){return P0(r.x-u.x)+P0(r.y-u.y)}var gS=function(r,u,a){var f=ig(u,a);if(f===0)return ig(r,u);var o=((r.x-u.x)*(a.x-u.x)+(r.y-u.y)*(a.y-u.y))/f;return o=Math.max(0,Math.min(1,o)),ig(r,{x:u.x+o*(a.x-u.x),y:u.y+o*(a.y-u.y)})},mS=function(r,u,a){return Math.sqrt(gS(r,u,a))},bS=function(r){var u=r.x,a=r.y,f=r.width,o=r.height,p={minX:u-f/2,minY:a-o/2,maxX:u+f/2,maxY:a+o/2,x:u,y:a,width:f,height:o,centerX:u,centerY:a};return p},_S=function(r,u){var a;return r.x===u.x?a=Dc.VERTICAL:r.y===u.y&&(a=Dc.HORIZONTAL),a},ES=function(r,u,a){var f=bS(r),o=_S(u,a),p=Math.max(u.x,a.x),d=Math.min(u.x,a.x),y=Math.max(u.y,a.y),g=Math.min(u.y,a.y),E=r.x,_=r.y,T=r.width,P=r.height;if(o===Dc.HORIZONTAL){if(p>=f.maxX&&d<=f.minX)return{startCrossPoint:{x:u.x>a.x?E+T/2:E-T/2,y:u.y},endCrossPoint:{x:u.x>a.x?E-T/2:E+T/2,y:u.y}}}else if(o===Dc.VERTICAL&&y>=f.maxY&&g<=f.minY)return{startCrossPoint:{x:u.x,y:u.y>a.y?_+P/2:_-P/2},endCrossPoint:{x:u.x,y:u.y>a.y?_-P/2:_+P/2}}},OS=function(r,u,a){a===void 0&&(a=0);for(var f=r.x,o=r.y,p=u.pointsList,d=0;d<p.length-1;d++)if(vS({x:f,y:o},p[d],p[d+1],a)){var y=ES(r,p[d],p[d+1]);if(y)return{crossIndex:d+1,crossPoints:y}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},wS=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},j0=globalThis&&globalThis.__spread||function(){for(var r=[],u=0;u<arguments.length;u++)r=r.concat(wS(arguments[u]));return r},AN=function(){function r(u){var a=u.lf;this._lf=a,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return r.prototype.eventHandler=function(){var u=this;this.dndAdd&&this._lf.on("node:dnd-add",function(a){var f=a.data;u.insetNode(f)}),this.dropAdd&&this._lf.on("node:drop",function(a){for(var f=a.data,o=u._lf.graphModel.edges,p=f.id,d=!0,y=0;y<o.length;y++)if(o[y].sourceNodeId===p||o[y].targetNodeId===p){d=!1;break}d&&u.insetNode(f)})},r.prototype.checkRuleBeforeInsetNode=function(u,a,f,o,p){var d=this._lf.getNodeModelById(u),y=this._lf.getNodeModelById(a),g=d.getAnchorInfo(f),E=y.getAnchorInfo(o),_=d.isAllowConnectedAsSource(p,g,E),T=y.isAllowConnectedAsTarget(p,g,E),P=Ht.formateAnchorConnectValidateData(_),A=P.isAllPass,N=P.msg,M=Ht.formateAnchorConnectValidateData(T),L=M.isAllPass,z=M.msg;return{isPass:A&&L,sourceMsg:N,targetMsg:z}},r.prototype.insetNode=function(u){for(var a=this._lf.graphModel.edges,f=this._lf.getNodeModelById(u.id),o=0;o<a.length;o++){var p=OS(f,a[o],this.deviation),d=p.crossIndex,y=p.crossPoints;if(d>=0){var g=a[o],E=g.sourceNodeId,_=g.targetNodeId,T=g.id,P=g.type,A=g.pointsList,N=g.sourceAnchorId,M=g.targetAnchorId,L=this.checkRuleBeforeInsetNode(E,_,N,M,u);if(L.isPass){var z=Ed(A[0]),$=Ed(y.startCrossPoint);this._lf.addEdge({type:P,sourceNodeId:E,targetNodeId:u.id,startPoint:z,endPoint:$,pointsList:j0(A.slice(0,d),[y.startCrossPoint])}),this._lf.addEdge({type:P,sourceNodeId:u.id,targetNodeId:_,startPoint:Ed(y.endCrossPoint),endPoint:Ed(A[A.length-1]),pointsList:j0([y.endCrossPoint],A.slice(d))}),this._lf.deleteEdge(T);break}else{this._lf.graphModel.eventCenter.emit(Ht.EventType.CONNECTION_NOT_ALLOWED,{data:u,msg:L.targetMsg||L.sourceMsg});break}}}},r.pluginName="insertNodeInPolyline",r}(),xS=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},SS=globalThis&&globalThis.__spread||function(){for(var r=[],u=0;u<arguments.length;u++)r=r.concat(xS(arguments[u]));return r},PN=function(){function r(u){var a=this,f=u.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"",text:"",onClick:function(){a.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"",text:"",onClick:function(){a.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"",text:"",onClick:function(){a.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"",text:"",onClick:function(){a.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"",text:"",onClick:function(){a.lf.redo()}}],this.lf=f}return r.prototype.render=function(u,a){this.destroy();var f=this.getControlTool();this.toolEl=f,a.appendChild(f),this.domContainer=a},r.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},r.prototype.addItem=function(u){this.controlItems.push(u)},r.prototype.removeItem=function(u){var a=this.controlItems.findIndex(function(f){return f.key===u});return this.controlItems.splice(a,1)[0]},r.prototype.getControlTool=function(){var u=this,a="lf-control-item",f="lf-control-item disabled",o=document.createElement("div"),p=[];return o.className="lf-control",this.controlItems.forEach(function(d){var y=document.createElement("div"),g=document.createElement("i"),E=document.createElement("span");switch(y.className=f,d.onClick&&(y.onclick=d.onClick.bind(null,u.lf)),d.onMouseEnter&&(y.onmouseenter=d.onMouseEnter.bind(null,u.lf)),d.onMouseLeave&&(y.onmouseleave=d.onMouseLeave.bind(null,u.lf)),g.className=d.iconClass,E.className="lf-control-text",E.title=d.title,E.innerText=d.text,y.append(g,E),d.text){case"":u.lf.on("history:change",function(_){var T=_.data.undoAble;y.className=T?a:f});break;case"":u.lf.on("history:change",function(_){var T=_.data.redoAble;y.className=T?a:f});break;default:y.className=a;break}p.push(y)}),o.append.apply(o,SS(p)),o},r.pluginName="control",r}(),TS=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},AS=globalThis&&globalThis.__spread||function(){for(var r=[],u=0;u<arguments.length;u++)r=r.concat(TS(arguments[u]));return r},nl="lf:defaultNodeMenu",ol="lf:defaultEdgeMenu",il="lf:defaultGraphMenu",N0="lf:defaultSelectionMenu",jN=function(){function r(u){var a=this,f=u.lf;this.__menuDOM=document.createElement("ul"),this.lf=f,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){a.setMenuConfig(o)},this.lf.addMenuConfig=function(o){a.addMenuConfig(o)},this.lf.setMenuByType=function(o){a.setMenuByType(o)}}return r.prototype.init=function(){var u=this,a=[{text:"",callback:function(p){u.lf.deleteNode(p.id)}},{text:"",callback:function(p){u.lf.graphModel.editText(p.id)}},{text:"",callback:function(p){u.lf.cloneNode(p.id)}}];this.menuTypeMap.set(nl,a);var f=[{text:"",callback:function(p){u.lf.deleteEdge(p.id)}},{text:"",callback:function(p){u.lf.graphModel.editText(p.id)}}];this.menuTypeMap.set(ol,f),this.menuTypeMap.set(il,[]);var o=[{text:"",callback:function(p){u.lf.clearSelectElements(),p.edges.forEach(function(d){return u.lf.deleteEdge(d.id)}),p.nodes.forEach(function(d){return u.lf.deleteNode(d.id)})}}];this.menuTypeMap.set(N0,o)},r.prototype.render=function(u,a){var f=this;this.__container=a,this.__currentData=null,this.__menuDOM.className="lf-menu",a.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(o){o.stopPropagation();for(var p=o.target;Array.from(p.classList).indexOf("lf-menu-item")===-1&&Array.from(p.classList).indexOf("lf-menu")===-1;)p=p.parentElement;Array.from(p.classList).indexOf("lf-menu-item")>-1?(p.onclickCallback(f.__currentData),f.__menuDOM.style.display="none",f.__currentData=null):console.warn("")},!0),this.lf.on("node:contextmenu",function(o){var p=o.data,d=o.position,y=d.domOverlayPosition,g=y.x,E=y.y,_=p.id,T=f.lf.graphModel.getNodeModelById(_),P=[],A=f.menuTypeMap.get(T.type);T&&T.menu&&Array.isArray(T.menu)?P=T.menu:A?P=A:P=f.menuTypeMap.get(nl),f.__currentData=p,f.showMenu(g,E,P)}),this.lf.on("edge:contextmenu",function(o){var p=o.data,d=o.position,y=d.domOverlayPosition,g=y.x,E=y.y,_=p.id,T=f.lf.graphModel.getEdgeModelById(_),P=[],A=f.menuTypeMap.get(T.type);T&&T.menu&&Array.isArray(T.menu)?P=T.menu:A?P=A:P=f.menuTypeMap.get(ol),f.__currentData=p,f.showMenu(g,E,P)}),this.lf.on("blank:contextmenu",function(o){var p=o.position,d=f.menuTypeMap.get(il),y=p.domOverlayPosition,g=y.x,E=y.y;f.showMenu(g,E,d)}),this.lf.on("selection:contextmenu",function(o){var p=o.data,d=o.position,y=f.menuTypeMap.get(N0),g=d.domOverlayPosition,E=g.x,_=g.y;f.__currentData=p,f.showMenu(E,_,y)}),this.lf.on("node:mousedown",function(){f.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){f.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){f.__menuDOM.style.display="none"})},r.prototype.destroy=function(){var u;(u=this===null||this===void 0?void 0:this.__container)===null||u===void 0||u.removeChild(this.__menuDOM),this.__menuDOM=null},r.prototype.showMenu=function(u,a,f){if(!(!f||!f.length)){var o=this.__menuDOM;o.innerHTML="",o.append.apply(o,AS(this.__getMenuDom(f))),o.children.length&&(o.style.display="block",o.style.top=a+"px",o.style.left=u+"px")}},r.prototype.setMenuByType=function(u){!u.type||!u.menu||this.menuTypeMap.set(u.type,u.menu)},r.prototype.__getMenuDom=function(u){var a=[];return u&&u.length>0&&u.forEach(function(f){var o=document.createElement("li");if(f.className?o.className="lf-menu-item "+f.className:o.className="lf-menu-item",f.icon===!0){var p=document.createElement("span");p.className="lf-menu-item-icon",o.appendChild(p)}var d=document.createElement("span");d.className="lf-menu-item-text",f.text&&(d.innerText=f.text),o.appendChild(d),o.onclickCallback=f.callback,a.push(o)}),a},r.prototype.setMenuConfig=function(u){u&&(u.nodeMenu!==void 0&&this.menuTypeMap.set(nl,u.nodeMenu?u.nodeMenu:[]),u.edgeMenu!==void 0&&this.menuTypeMap.set(ol,u.edgeMenu?u.edgeMenu:[]),u.graphMenu!==void 0&&this.menuTypeMap.set(il,u.graphMenu?u.graphMenu:[]))},r.prototype.addMenuConfig=function(u){if(u){if(Array.isArray(u.nodeMenu)){var a=this.menuTypeMap.get(nl);this.menuTypeMap.set(nl,a.concat(u.nodeMenu))}if(Array.isArray(u.edgeMenu)){var a=this.menuTypeMap.get(ol);this.menuTypeMap.set(ol,a.concat(u.edgeMenu))}if(Array.isArray(u.graphMenu)){var a=this.menuTypeMap.get(il);this.menuTypeMap.set(il,a.concat(u.graphMenu))}}},r.prototype.changeMenuItem=function(u,a){if(u==="add")this.addMenuConfig(a);else if(u==="reset")this.setMenuConfig(a);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},r.pluginName="menu",r}();globalThis&&globalThis.__read;var NN=function(){function r(u){var a=this,f=u.lf;this.lf=f,this.lf.setPatternItems=function(o){a.setPatternItems(o)}}return r.prototype.render=function(u,a){var f=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=a;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(o){f.panelEl.appendChild(f.createDndItem(o))}),a.appendChild(this.panelEl),this.domContainer=a},r.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},r.prototype.setPatternItems=function(u){this.shapeList=u,this.domContainer&&this.render(this.lf,this.domContainer)},r.prototype.createDndItem=function(u){var a=this,f=document.createElement("div");f.className=u.className?"lf-dnd-item "+u.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",u.icon&&(o.style.backgroundImage="url("+u.icon+")"),f.appendChild(o),u.label){var p=document.createElement("div");p.innerText=u.label,p.className="lf-dnd-text",f.appendChild(p)}return f.onmousedown=function(){u.type&&a.lf.dnd.startDrag({type:u.type,properties:u.properties,text:u.text}),u.callback&&u.callback(a.lf,a.domContainer)},f.ondblclick=function(d){a.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:d,data:u})},f.onclick=function(d){a.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:d,data:u})},f.oncontextmenu=function(d){a.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:d,data:u})},f},r.pluginName="dndPanel",r}(),MN=function(){function r(u){var a=this,f=u.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(p){var d=a.lf.getPointByClient(p.clientX,p.clientY).domOverlayPosition,y=d.x,g=d.y;a.endPoint={x:y,y:g};var E=a.startPoint,_=E.x,T=E.y,P=a.wrapper.style,A=_,N=T,M=y-_,L=g-T;y<_&&(A=y,M=_-y),g<T&&(N=g,L=T-g),P.left=A+"px",P.top=N+"px",P.width=M+"px",P.height=L+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",a.__draw),document.removeEventListener("mouseup",a.__drawOff),a.wrapper.oncontextmenu=null,a.__domContainer.removeChild(a.wrapper);var p=a.startPoint,d=p.x,y=p.y,g=a.endPoint,E=g.x,_=g.y;if(!(Math.abs(E-d)<10&&Math.abs(_-y)<10)){var T=[Math.min(d,E),Math.min(y,_)],P=[Math.max(d,E),Math.max(y,_)],A=a.lf.graphModel.getAreaElement(T,P,a.isWholeEdge,a.isWholeNode,!0),N=a.lf.graphModel.group;A.forEach(function(M){(!N||!N.getNodeGroup(M.id))&&a.lf.selectElementById(M.id,!0)}),a.lf.emit("selection:selected",A)}},this.lf=f;var o=f.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,f.openSelectionSelect=function(){a.openSelectionSelect()},f.closeSelectionSelect=function(){a.closeSelectionSelect()}}return r.prototype.render=function(u,a){var f=this;this.__domContainer=a,u.on("blank:mousedown",function(o){var p=o.e,d=u.getEditConfig();if(!(!d.stopMoveGraph||f.__disabled)){var y=p.button===2;if(!y){var g=u.getPointByClient(p.clientX,p.clientY).domOverlayPosition,E=g.x,_=g.y;f.startPoint={x:E,y:_},f.endPoint={x:E,y:_};var T=document.createElement("div");T.className="lf-selection-select",T.oncontextmenu=function(A){A.preventDefault()},T.style.top=f.startPoint.y+"px",T.style.left=f.startPoint.x+"px",a.appendChild(T),f.wrapper=T,document.addEventListener("mousemove",f.__draw),document.addEventListener("mouseup",f.__drawOff)}}})},r.prototype.setSelectionSense=function(u,a){u===void 0&&(u=!0),a===void 0&&(a=!0),this.isWholeEdge=u,this.isWholeNode=a},r.prototype.openSelectionSelect=function(){var u=this.lf.getEditConfig().stopMoveGraph;u||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},r.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},r.prototype.open=function(){this.__disabled=!1},r.prototype.close=function(){this.__disabled=!0},r.pluginName="selectionSelect",r}(),PS=globalThis&&globalThis.__values||function(r){var u=typeof Symbol=="function"&&Symbol.iterator,a=u&&r[u],f=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&f>=r.length&&(r=void 0),{value:r&&r[f++],done:!r}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},RN=function(){function r(u){var a=this,f=u.lf,o=u.LogicFlow,p=u.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(d,y){a.setView(),a.isShow||a.createMiniMap(d,y),a.isShow=!0},this.hide=function(){a.isShow&&a.removeMiniMap(),a.isShow=!1},this.reset=function(){a.lf.resetTranslate(),a.lf.resetZoom(),a.hide(),a.show()},this.startDrag=function(d){document.addEventListener("mousemove",a.drag),document.addEventListener("mouseup",a.drop),a.startPosition={x:d.x,y:d.y}},this.moveViewport=function(d,y){var g=a.viewport.style;a.viewPortTop=d,a.viewPortLeft=y,g.top=a.viewPortTop+"px",g.left=a.viewPortLeft+"px"},this.drag=function(d){a.dragging=!0;var y=a.viewPortTop+d.y-a.startPosition.y,g=a.viewPortLeft+d.x-a.startPosition.x;a.moveViewport(y,g),a.startPosition={x:d.x,y:d.y};var E=(a.viewPortLeft+a.viewPortWidth/2)/a.viewPortScale,_=(a.viewPortTop+a.viewPortHeight/2)/a.viewPortScale;a.lf.focusOn({coordinate:{x:E+a.resetDataX,y:_+a.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",a.drag),document.removeEventListener("mouseup",a.drop);var d=a.viewPortTop,y=a.viewPortLeft;a.viewPortLeft>a.width&&(y=a.width-a.viewPortWidth),a.viewPortTop>a.height&&(d=a.height-a.viewPortHeight),a.viewPortLeft<-a.width&&(y=0),a.viewPortTop<-a.height&&(d=0),a.moveViewport(d,y)},this.mapClick=function(d){if(a.dragging)a.dragging=!1;else{var y=d.layerX,g=d.layerY,E=y,_=g,T=a.lf.getGraphRawData(),P=a.getBounds(T),A=P.left,N=P.top,M=A+E/a.viewPortScale,L=N+_/a.viewPortScale;a.lf.focusOn({coordinate:{x:M,y:L}})}},this.lf=f,p&&p.MiniMap&&this.setOption(p),this.miniMapWidth=f.graphModel.width,this.miniMapHeight=f.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return r.prototype.render=function(u,a){var f=this;this.container=a,this.lf.on("history:change",function(){f.isShow&&f.setView()}),this.lf.on("graph:transform",$x(function(){f.isShow&&!f.dragging&&f.setView()},300))},r.prototype.init=function(u){this.disabledPlugins=this.disabledPlugins.concat(u.disabledPlugins||[])},r.prototype.setOption=function(u){var a=u.MiniMap,f=a.width,o=f===void 0?150:f,p=a.height,d=p===void 0?220:p,y=a.isShowHeader,g=y===void 0?!0:y,E=a.isShowCloseIcon,_=E===void 0?!0:E,T=a.leftPosition,P=T===void 0?0:T,A=a.topPosition,N=A===void 0?0:A,M=a.rightPosition,L=a.bottomPosition;this.width=o,this.height=d,this.isShowHeader=g,this.isShowCloseIcon=_,this.viewPortWidth=o,this.leftPosition=P,this.topPosition=N,this.rightPosition=M,this.bottomPosition=L},r.prototype.initMiniMap=function(){var u=document.createElement("div");u.className="lf-mini-map-graph",u.style.width=this.width+4+"px",u.style.height=this.height+"px",this.lfMap=new this.LogicFlow({width:this.lf.graphModel.width,height:this.lf.graphModel.width*this.height/this.width,container:u,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(a){return a},this.lfMap.adapterOut=function(a){return a},this.miniMapWrap=u,this.createViewPort(),u.addEventListener("click",this.mapClick)},r.prototype.createMiniMap=function(u,a){var f=document.createElement("div");f.appendChild(this.miniMapWrap),typeof u<"u"||typeof a<"u"?(f.style.left=(u||0)+"px",f.style.top=(a||0)+"px"):(typeof this.rightPosition<"u"?f.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(f.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?f.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(f.style.top=this.topPosition+"px")),f.style.position="absolute",f.className="lf-mini-map",this.isShowCloseIcon||f.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||f.classList.add("lf-mini-map-no-header"),this.container.appendChild(f),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=r.headerTitle,f.appendChild(o);var p=document.createElement("span");p.className="lf-mini-map-close",p.addEventListener("click",this.hide),f.appendChild(p),this.miniMapContainer=f},r.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},r.prototype.getBounds=function(u){var a=0,f=this.miniMapWidth,o=0,p=this.miniMapHeight,d=u.nodes;return d&&d.length>0&&d.forEach(function(y){var g=y.x,E=y.y,_=y.width,T=_===void 0?200:_,P=y.height,A=P===void 0?200:P,N=g-T/2,M=g+T/2,L=E-A/2,z=E+A/2;a=N<a?N:a,f=M>f?M:f,o=L<o?L:o,p=z>p?z:p}),{left:a,top:o,bottom:p,right:f}},r.prototype.resetData=function(u){var a=u.nodes,f=u.edges,o=0,p=0;return a&&a.length>0&&(a.forEach(function(d){var y=d.x,g=d.y,E=d.width,_=E===void 0?200:E,T=d.height,P=T===void 0?200:T,A=y-_/2,N=g-P/2;o=A<o?A:o,p=N<p?N:p}),(o<0||p<0)&&(this.resetDataX=o,this.resetDataY=p,a.forEach(function(d){d.x=d.x-o,d.y=d.y-p,d.text&&(d.text.x=d.text.x-o,d.text.y=d.text.y-p)}),f.forEach(function(d){d.startPoint&&(d.startPoint.x=d.startPoint.x-o,d.startPoint.y=d.startPoint.y-p),d.endPoint&&(d.endPoint.x=d.endPoint.x-o,d.endPoint.y=d.endPoint.y-p),d.text&&(d.text.x=d.text.x-o,d.text.y=d.text.y-p),d.pointsList&&d.pointsList.forEach(function(y){y.x=y.x-o,y.y=y.y-p})}))),u},r.prototype.setView=function(){var u,a,f=this.lf.getGraphRawData(),o=this.resetData(f),p=this.lf.viewMap,d=this.lf.graphModel.modelMap,y=this.lfMap.viewMap;try{for(var g=PS(p.keys()),E=g.next();!E.done;E=g.next()){var _=E.value;y.has(_)||(this.lfMap.setView(_,p.get(_)),this.lfMap.graphModel.modelMap.set(_,d.get(_)))}}catch(Te){u={error:Te}}finally{try{E&&!E.done&&(a=g.return)&&a.call(g)}finally{if(u)throw u.error}}this.lfMap.render(o);var T=this.getBounds(o),P=T.left,A=T.top,N=T.right,M=T.bottom,L=this.width/(N-P),z=this.height/(M-A),$=this.miniMapWrap.firstChild.style,ye=Math.min(L,z);$.transform="matrix("+ye+", 0, 0, "+ye+", 0, 0)",$.transformOrigin="left top",$.height=M-Math.min(A,0)+"px",$.width=N-Math.min(P,0)+"px",this.viewPortScale=ye,this.setViewPort(ye,{left:P,top:A,right:N,bottom:M})},r.prototype.setViewPort=function(u,a){var f=a.left,o=a.right;a.top,a.bottom;var p=this.viewport.style;p.width=this.viewPortWidth+"px",p.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var d=this.lf.getTransform(),y=d.TRANSLATE_X,g=d.TRANSLATE_Y,E=d.SCALE_X,_=d.SCALE_Y,T=o-f,P=this.width/(T/this.lf.graphModel.width),A=this.width*(P/this.width),N=this.lf.graphModel.width/this.lf.graphModel.height,M=A/N,L=this.lf.getGraphRawData(),z=this.getBounds(L),$=z.left,ye=z.top,Te=$,fe=ye;Te+=y/E,fe+=g/_,this.viewPortTop=fe>0?0:-fe*u,this.viewPortLeft=Te>0?0:-Te*u,this.viewPortWidth=A,this.viewPortHeight=M,p.top=this.viewPortTop+"px",p.left=this.viewPortLeft+"px",p.width=A/E+"px",p.height=M/_+"px"},r.prototype.createViewPort=function(){var u=document.createElement("div");u.className="lf-minimap-viewport",u.addEventListener("mousedown",this.startDrag),this.viewport=u},r.pluginName="miniMap",r.width=150,r.height=220,r.viewPortWidth=150,r.viewPortHeight=75,r.isShowHeader=!0,r.isShowCloseIcon=!0,r.leftPosition=0,r.topPosition=0,r.rightPosition=null,r.bottomPosition=null,r.headerTitle="",r}();function jS(r){if(r.length<=1)return!1;for(var u=0,a=r.length-1;u!==a&&u+1!==a&&a-1!==u;)u++,a--;return u===a?[--u,a]:[u,a]}var H_=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Tc=globalThis&&globalThis.__assign||function(){return Tc=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},Tc.apply(this,arguments)},ya=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p};(function(r){H_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.pointFilter=function(a){for(var f=a,o=1;o<f.length-1;){var p=ya(f[o-1],2),d=p[0],y=p[1],g=ya(f[o],2),E=g[0],_=g[1],T=ya(f[o+1],2),P=T[0],A=T[1];d===E&&E===P||y===_&&_===A?f.splice(o,1):o++}return f},u.prototype.getEdge=function(){var a=this.props.model,f=a.points,o=a.isAnimation,p=a.arrowConfig,d=a.radius,y=d===void 0?5:d,g=a.getEdgeStyle(),E=a.getEdgeAnimationStyle(),_=this.pointFilter(f.split(" ").map(function(bt){return bt.split(",").map(function(xt){return Number(xt)})})),T=jS(_);if(T){var P=ya(T,2),A=P[0],N=P[1],M=_[A],L=_[N],z=M.some(function(bt,xt){return bt===L[xt]});if(!z){var $=(L[1]-M[1])/2,ye=[L[0],L[1]-$],Te=[M[0],M[1]+$];_.splice(A+1,0,Te,ye)}}for(var fe=ya(_[0],2),ae=fe[0],pe=fe[1],W="M"+ae+" "+pe,F=1;F<_.length-1;F++){var Y=ya(_[F-1],2),V=Y[0],q=Y[1],Oe=ya(_[F],2),Ge=Oe[0],oe=Oe[1],ue=ya(_[F+1],2),Ne=ue[0],Re=ue[1];if(Ge===V&&oe!==q){var se=oe>q?oe-y:oe+y;W=W+" L "+Ge+" "+se}if(oe===q&&Ge!==V){var je=Ge>V?Ge-y:Ge+y;W=W+" L "+je+" "+oe}if(W=W+" Q "+Ge+" "+oe,Ge===Ne&&oe!==Re){var se=oe>Re?oe-y:oe+y;W=W+" "+Ge+" "+se}if(oe===Re&&Ge!==Ne){var je=Ge>Ne?Ge-y:Ge+y;W=W+" "+je+" "+oe}}var He=ya(_[_.length-1],2),ft=He[0],Pt=He[1];W=W+" L "+ft+" "+Pt;var Yt=Tc(Tc(Tc({d:W,style:o?E:{}},g),p),{fill:"none"});return Ht.h("path",Tc({d:W},Yt))},u})(Ht.PolylineEdge);(function(r){H_(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u})(Ht.PolylineEdgeModel);var Tg,Fn,X_,es,M0,V_,yg,W_={},Y_=[],NS=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function iu(r,u){for(var a in u)r[a]=u[a];return r}function $_(r){var u=r.parentNode;u&&u.removeChild(r)}function dl(r,u,a){var f,o,p,d={};for(p in u)p=="key"?f=u[p]:p=="ref"?o=u[p]:d[p]=u[p];if(arguments.length>2&&(d.children=arguments.length>3?Tg.call(arguments,2):a),typeof r=="function"&&r.defaultProps!=null)for(p in r.defaultProps)d[p]===void 0&&(d[p]=r.defaultProps[p]);return Td(r,d,f,o,null)}function Td(r,u,a,f,o){var p={type:r,props:u,key:a,ref:f,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++X_};return o==null&&Fn.vnode!=null&&Fn.vnode(p),p}function Ag(r){return r.children}function Pc(r,u){this.props=r,this.context=u}function yl(r,u){if(u==null)return r.__?yl(r.__,r.__.__k.indexOf(r)+1):null;for(var a;u<r.__k.length;u++)if((a=r.__k[u])!=null&&a.__e!=null)return a.__e;return typeof r.type=="function"?yl(r):null}function K_(r){var u,a;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,u=0;u<r.__k.length;u++)if((a=r.__k[u])!=null&&a.__e!=null){r.__e=r.__c.base=a.__e;break}return K_(r)}}function R0(r){(!r.__d&&(r.__d=!0)&&es.push(r)&&!Cd.__r++||M0!==Fn.debounceRendering)&&((M0=Fn.debounceRendering)||V_)(Cd)}function Cd(){var r,u,a,f,o,p,d,y;for(es.sort(yg);r=es.shift();)r.__d&&(u=es.length,f=void 0,o=void 0,d=(p=(a=r).__v).__e,(y=a.__P)&&(f=[],(o=iu({},p)).__v=p.__v+1,eE(y,p,o,a.__n,y.ownerSVGElement!==void 0,p.__h!=null?[d]:null,f,d??yl(p),p.__h),RS(f,p),p.__e!=d&&K_(p)),es.length>u&&es.sort(yg));Cd.__r=0}function q_(r,u,a,f,o,p,d,y,g,E){var _,T,P,A,N,M,L,z=f&&f.__k||Y_,$=z.length;for(a.__k=[],_=0;_<u.length;_++)if((A=a.__k[_]=(A=u[_])==null||typeof A=="boolean"||typeof A=="function"?null:typeof A=="string"||typeof A=="number"||typeof A=="bigint"?Td(null,A,null,null,A):Array.isArray(A)?Td(Ag,{children:A},null,null,null):A.__b>0?Td(A.type,A.props,A.key,A.ref?A.ref:null,A.__v):A)!=null){if(A.__=a,A.__b=a.__b+1,(P=z[_])===null||P&&A.key==P.key&&A.type===P.type)z[_]=void 0;else for(T=0;T<$;T++){if((P=z[T])&&A.key==P.key&&A.type===P.type){z[T]=void 0;break}P=null}eE(r,A,P=P||W_,o,p,d,y,g,E),N=A.__e,(T=A.ref)&&P.ref!=T&&(L||(L=[]),P.ref&&L.push(P.ref,null,A),L.push(T,A.__c||N,A)),N!=null?(M==null&&(M=N),typeof A.type=="function"&&A.__k===P.__k?A.__d=g=Z_(A,g,r):g=Q_(r,A,P,z,N,g),typeof a.type=="function"&&(a.__d=g)):g&&P.__e==g&&g.parentNode!=r&&(g=yl(P))}for(a.__e=M,_=$;_--;)z[_]!=null&&(typeof a.type=="function"&&z[_].__e!=null&&z[_].__e==a.__d&&(a.__d=J_(f).nextSibling),rE(z[_],z[_]));if(L)for(_=0;_<L.length;_++)tE(L[_],L[++_],L[++_])}function Z_(r,u,a){for(var f,o=r.__k,p=0;o&&p<o.length;p++)(f=o[p])&&(f.__=r,u=typeof f.type=="function"?Z_(f,u,a):Q_(a,f,f,o,f.__e,u));return u}function Q_(r,u,a,f,o,p){var d,y,g;if(u.__d!==void 0)d=u.__d,u.__d=void 0;else if(a==null||o!=p||o.parentNode==null)e:if(p==null||p.parentNode!==r)r.appendChild(o),d=null;else{for(y=p,g=0;(y=y.nextSibling)&&g<f.length;g+=1)if(y==o)break e;r.insertBefore(o,p),d=p}return d!==void 0?d:o.nextSibling}function J_(r){var u,a,f;if(r.type==null||typeof r.type=="string")return r.__e;if(r.__k){for(u=r.__k.length-1;u>=0;u--)if((a=r.__k[u])&&(f=J_(a)))return f}return null}function MS(r,u,a,f,o){var p;for(p in a)p==="children"||p==="key"||p in u||Id(r,p,null,a[p],f);for(p in u)o&&typeof u[p]!="function"||p==="children"||p==="key"||p==="value"||p==="checked"||a[p]===u[p]||Id(r,p,u[p],a[p],f)}function D0(r,u,a){u[0]==="-"?r.setProperty(u,a??""):r[u]=a==null?"":typeof a!="number"||NS.test(u)?a:a+"px"}function Id(r,u,a,f,o){var p;e:if(u==="style")if(typeof a=="string")r.style.cssText=a;else{if(typeof f=="string"&&(r.style.cssText=f=""),f)for(u in f)a&&u in a||D0(r.style,u,"");if(a)for(u in a)f&&a[u]===f[u]||D0(r.style,u,a[u])}else if(u[0]==="o"&&u[1]==="n")p=u!==(u=u.replace(/Capture$/,"")),u=u.toLowerCase()in r?u.toLowerCase().slice(2):u.slice(2),r.l||(r.l={}),r.l[u+p]=a,a?f||r.addEventListener(u,p?I0:C0,p):r.removeEventListener(u,p?I0:C0,p);else if(u!=="dangerouslySetInnerHTML"){if(o)u=u.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(u!=="width"&&u!=="height"&&u!=="href"&&u!=="list"&&u!=="form"&&u!=="tabIndex"&&u!=="download"&&u in r)try{r[u]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&u[4]!=="-"?r.removeAttribute(u):r.setAttribute(u,a))}}function C0(r){return this.l[r.type+!1](Fn.event?Fn.event(r):r)}function I0(r){return this.l[r.type+!0](Fn.event?Fn.event(r):r)}function eE(r,u,a,f,o,p,d,y,g){var E,_,T,P,A,N,M,L,z,$,ye,Te,fe,ae,pe,W=u.type;if(u.constructor!==void 0)return null;a.__h!=null&&(g=a.__h,y=u.__e=a.__e,u.__h=null,p=[y]),(E=Fn.__b)&&E(u);try{e:if(typeof W=="function"){if(L=u.props,z=(E=W.contextType)&&f[E.__c],$=E?z?z.props.value:E.__:f,a.__c?M=(_=u.__c=a.__c).__=_.__E:("prototype"in W&&W.prototype.render?u.__c=_=new W(L,$):(u.__c=_=new Pc(L,$),_.constructor=W,_.render=CS),z&&z.sub(_),_.props=L,_.state||(_.state={}),_.context=$,_.__n=f,T=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),W.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=iu({},_.__s)),iu(_.__s,W.getDerivedStateFromProps(L,_.__s))),P=_.props,A=_.state,_.__v=u,T)W.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(W.getDerivedStateFromProps==null&&L!==P&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(L,$),!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(L,_.__s,$)===!1||u.__v===a.__v){for(u.__v!==a.__v&&(_.props=L,_.state=_.__s,_.__d=!1),_.__e=!1,u.__e=a.__e,u.__k=a.__k,u.__k.forEach(function(F){F&&(F.__=u)}),ye=0;ye<_._sb.length;ye++)_.__h.push(_._sb[ye]);_._sb=[],_.__h.length&&d.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(L,_.__s,$),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(P,A,N)})}if(_.context=$,_.props=L,_.__P=r,Te=Fn.__r,fe=0,"prototype"in W&&W.prototype.render){for(_.state=_.__s,_.__d=!1,Te&&Te(u),E=_.render(_.props,_.state,_.context),ae=0;ae<_._sb.length;ae++)_.__h.push(_._sb[ae]);_._sb=[]}else do _.__d=!1,Te&&Te(u),E=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++fe<25);_.state=_.__s,_.getChildContext!=null&&(f=iu(iu({},f),_.getChildContext())),T||_.getSnapshotBeforeUpdate==null||(N=_.getSnapshotBeforeUpdate(P,A)),pe=E!=null&&E.type===Ag&&E.key==null?E.props.children:E,q_(r,Array.isArray(pe)?pe:[pe],u,a,f,o,p,d,y,g),_.base=u.__e,u.__h=null,_.__h.length&&d.push(_),M&&(_.__E=_.__=null),_.__e=!1}else p==null&&u.__v===a.__v?(u.__k=a.__k,u.__e=a.__e):u.__e=DS(a.__e,u,a,f,o,p,d,g);(E=Fn.diffed)&&E(u)}catch(F){u.__v=null,(g||p!=null)&&(u.__e=y,u.__h=!!g,p[p.indexOf(y)]=null),Fn.__e(F,u,a)}}function RS(r,u){Fn.__c&&Fn.__c(u,r),r.some(function(a){try{r=a.__h,a.__h=[],r.some(function(f){f.call(a)})}catch(f){Fn.__e(f,a.__v)}})}function DS(r,u,a,f,o,p,d,y){var g,E,_,T=a.props,P=u.props,A=u.type,N=0;if(A==="svg"&&(o=!0),p!=null){for(;N<p.length;N++)if((g=p[N])&&"setAttribute"in g==!!A&&(A?g.localName===A:g.nodeType===3)){r=g,p[N]=null;break}}if(r==null){if(A===null)return document.createTextNode(P);r=o?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,P.is&&P),p=null,y=!1}if(A===null)T===P||y&&r.data===P||(r.data=P);else{if(p=p&&Tg.call(r.childNodes),E=(T=a.props||W_).dangerouslySetInnerHTML,_=P.dangerouslySetInnerHTML,!y){if(p!=null)for(T={},N=0;N<r.attributes.length;N++)T[r.attributes[N].name]=r.attributes[N].value;(_||E)&&(_&&(E&&_.__html==E.__html||_.__html===r.innerHTML)||(r.innerHTML=_&&_.__html||""))}if(MS(r,P,T,o,y),_)u.__k=[];else if(N=u.props.children,q_(r,Array.isArray(N)?N:[N],u,a,f,o&&A!=="foreignObject",p,d,p?p[0]:a.__k&&yl(a,0),y),p!=null)for(N=p.length;N--;)p[N]!=null&&$_(p[N]);y||("value"in P&&(N=P.value)!==void 0&&(N!==r.value||A==="progress"&&!N||A==="option"&&N!==T.value)&&Id(r,"value",N,T.value,!1),"checked"in P&&(N=P.checked)!==void 0&&N!==r.checked&&Id(r,"checked",N,T.checked,!1))}return r}function tE(r,u,a){try{typeof r=="function"?r(u):r.current=u}catch(f){Fn.__e(f,a)}}function rE(r,u,a){var f,o;if(Fn.unmount&&Fn.unmount(r),(f=r.ref)&&(f.current&&f.current!==r.__e||tE(f,null,u)),(f=r.__c)!=null){if(f.componentWillUnmount)try{f.componentWillUnmount()}catch(p){Fn.__e(p,u)}f.base=f.__P=null,r.__c=void 0}if(f=r.__k)for(o=0;o<f.length;o++)f[o]&&rE(f[o],u,a||typeof r.type!="function");a||r.__e==null||$_(r.__e),r.__=r.__e=r.__d=void 0}function CS(r,u,a){return this.constructor(r,a)}Tg=Y_.slice,Fn={__e:function(r,u,a,f){for(var o,p,d;u=u.__;)if((o=u.__c)&&!o.__)try{if((p=o.constructor)&&p.getDerivedStateFromError!=null&&(o.setState(p.getDerivedStateFromError(r)),d=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(r,f||{}),d=o.__d),d)return o.__E=o}catch(y){r=y}throw r}},X_=0,Pc.prototype.setState=function(r,u){var a;a=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=iu({},this.state),typeof r=="function"&&(r=r(iu({},a),this.props)),r&&iu(a,r),r!=null&&this.__v&&(u&&this._sb.push(u),R0(this))},Pc.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),R0(this))},Pc.prototype.render=Ag,es=[],V_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,yg=function(r,u){return r.__v.__b-u.__v.__b},Cd.__r=0;var hl=globalThis&&globalThis.__assign||function(){return hl=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},hl.apply(this,arguments)};function Pg(r){var u=r.x,a=r.y,f=r.width,o=r.height,p=r.radius,d=r.className,y=u-f/2,g=a-o/2,E=hl(hl({width:10,height:10,cx:0,cy:0,rx:p||0,ry:p||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+d},r),{x:y,y:g});return Ht.h("rect",hl({},E))}Pg.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Ac;(function(r){r.NODE="node",r.CIRCLE_NODE="circle-node",r.POLYGON_NODE="polygon-node",r.RECT_NODE="rect-node",r.HTML_NODE="html-node",r.TEXT_NODE="text-node",r.ELLIPSE_NODE="ellipse-node",r.DIAMOND_NODE="diamond-node",r.EDGE="edge",r.LINE_EDGE="line-edge",r.POLYLINE_EDGE="polyline-edge",r.BEZIER_EDGE="bezier-edge",r.GRAPH="graph"})(Ac||(Ac={}));function Ad(r){var u=r.x,a=r.y,f=r.width,o=r.height;return{minX:u-f/2,minY:a-o/2,maxX:u+f/2,maxY:a+o/2}}function k0(r){var u=Ad(r),a=r.radius,f=u.minX,o=u.minY,p=u.maxX,d=u.maxY;return[{x:f+a,y:o+a},{x:p-a,y:o+a},{x:p-a,y:d-a},{x:f+a,y:d-a}]}function L0(r){var u=r.point,a=r.beforeNode,f=r.afterNode,o=u.x,p=u.y,d={x:o,y:p},y=a.radius,g=Ad(a),E=Ad(f);if(o===g.minX){d.x=E.minX;var _=(p-a.y)/(a.height/2-y);_?d.y=f.y+(f.height/2-y)*_:d.y=f.y}else if(o===g.maxX){d.x=E.maxX;var _=(p-a.y)/(a.height/2-y);_?d.y=f.y+(f.height/2-y)*_:d.y=f.y}else if(p===g.minY){d.y=E.minY;var _=(o-a.x)/(a.width/2-y);_?d.x=f.x+(f.width/2-y)*_:d.x=f.x}else if(p===g.maxY){d.y=E.maxY;var _=(o-a.x)/(a.width/2-y);_?d.x=f.x+(f.width/2-y)*_:d.x=f.x}else{var T=k0(a),P=k0(f),A=Ad(a),N=A.minX,M=A.minY,L=A.maxX,z=A.maxY,$=-1;if(o-N<y&&p-M<y?$=0:L-o<y&&p-M<y?$=1:L-o<y&&z-p<y?$=2:o-N<y&&M-p<y&&($=3),$>-1){var ye=Math.atan2(p-T[$].y,o-T[$].x);d.x=P[$].x+y*Math.cos(ye),d.y=P[$].y+y*Math.sin(ye)}}return d}function B0(r){var u=r.point,a=r.beforeNode,f=r.afterNode,o=f.rx,p=f.ry,d=u,y=(u.y-a.y)/(u.x-a.x),g=o,E=p,_,T;return y>=1/0?(_=0,T=E):y<=-1/0?(_=0,T=-E):u.x-a.x>0?(_=g*E/Math.sqrt(E*E+g*g*y*y),T=g*E*y/Math.sqrt(E*E+g*g*y*y)):(_=-(g*E)/Math.sqrt(E*E+g*g*y*y),T=-(g*E*y)/Math.sqrt(E*E+g*g*y*y)),d={x:_+f.x,y:T+f.y},d}function F0(r){var u=r.point,a=r.beforeNode,f=r.afterNode,o=u,p,d,y=u.x-a.x,g=u.y-a.y,E=a.rx,_=a.ry,T=Math.sqrt((E-Math.abs(y))*(E-Math.abs(y))+g*g)/Math.sqrt(E*E+_*_),P=f.rx,A=f.ry,N=Math.sqrt((P*P+A*A)*T*T*(P*P/(P*P+A*A))),M=N*(A/P);return y>=0?p=P-N:p=N-P,g>0?d=M:d=-M,o={x:p+f.x,y:d+f.y},o}var IS=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),ts=globalThis&&globalThis.__assign||function(){return ts=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},ts.apply(this,arguments)},kS=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},LS=Ht.LogicFlowUtil.StepDrag,BS=function(r){IS(u,r);function u(a){var f=r.call(this)||this;return f.updatePosition=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.x,E=y.y;f.nodeModel.x=g+p/2,f.nodeModel.y=E+d/2,f.nodeModel.moveText(p/2,d/2)},f.getResize=function(o){var p=o.index,d=o.deltaX,y=o.deltaY,g=o.width,E=o.height,_=o.PCTResizeInfo,T=o.pct,P=T===void 0?1:T,A={width:g,height:E,deltaX:d,deltaY:y};if(_){var N=4,M=0,L=0;switch(p){case 0:L=(d*-1-y)/N;break;case 1:L=(d-y)/N;break;case 2:L=(d+y)/N;break;case 3:L=(d*-1+y)/N;break}L!==0&&(M=Math.round(L/_.ResizeBasis.basisHeight*1e5)/1e3),_.ResizePCT.widthPCT=Math.max(Math.min(_.ResizePCT.widthPCT+M,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit),_.ResizePCT.hightPCT=Math.max(Math.min(_.ResizePCT.hightPCT+M,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit);var z=Math.round(_.ResizePCT.widthPCT*_.ResizeBasis.basisWidth/100),$=Math.round(_.ResizePCT.hightPCT*_.ResizeBasis.basisHeight/100);switch(p){case 0:d=g-z,y=E-$;break;case 1:d=z-g,y=E-$;break;case 2:d=z-g,y=$-E;break;case 3:d=g-z,y=$-E;break}return A.width=z,A.height=$,A.deltaX=d/P,A.deltaY=y/P,A}switch(p){case 0:A.width=g-d*P,A.height=E-y*P;break;case 1:A.width=g+d*P,A.height=E-y*P;break;case 2:A.width=g+d*P,A.height=E+y*P;break;case 3:A.width=g-d*P,A.height=E+y*P;break}return A},f.updateRect=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.id,E=y.x,_=y.y,T=y.width,P=y.height,A=y.radius,N=y.PCTResizeInfo,M=f.index,L=f.getResize({index:M,deltaX:p,deltaY:d,width:T,height:P,PCTResizeInfo:N,pct:1}),z=f.nodeModel,$=z.minWidth,ye=z.minHeight,Te=z.maxWidth,fe=z.maxHeight;if(L.width<$||L.width>Te||L.height<ye||L.height>fe){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:L.deltaX,deltaY:L.deltaY}),f.nodeModel.width=L.width,f.nodeModel.height=L.height,f.nodeModel.setProperties({nodeSize:{width:L.width,height:L.height}});var ae=f.getNodeEdges(g),pe={x:E,y:_,width:T,height:P,radius:A},W={x:f.nodeModel.x,y:f.nodeModel.y,width:f.nodeModel.width,height:f.nodeModel.height,radius:A},F={point:"",beforeNode:pe,afterNode:W},Y;ae.sourceEdges.forEach(function(V){F.point=V.startPoint,Y=L0(F),V.updateStartPoint(Y)}),ae.targetEdges.forEach(function(V){F.point=V.endPoint,Y=L0(F),V.updateEndPoint(Y)}),f.eventEmit({beforeNode:pe,afterNode:W})},f.updateEllipse=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.id,E=y.rx,_=y.ry,T=y.x,P=y.y,A=y.PCTResizeInfo,N=f.index,M=E,L=_,z=f.getResize({index:N,deltaX:p,deltaY:d,width:M,height:L,PCTResizeInfo:A,pct:1/2}),$=f.nodeModel,ye=$.minWidth,Te=$.minHeight,fe=$.maxWidth,ae=$.maxHeight;if(z.width<ye/2||z.width>fe/2||z.height<Te/2||z.height>ae/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:z.deltaX,deltaY:z.deltaY}),f.nodeModel.rx=z.width,f.nodeModel.ry=z.height,f.nodeModel.setProperties({nodeSize:{rx:z.width,ry:z.height}});var pe=f.getNodeEdges(g),W={x:T,y:P},F={rx:z.width,ry:z.height,x:f.nodeModel.x,y:f.nodeModel.y},Y={point:{},beforeNode:W,afterNode:F},V;pe.sourceEdges.forEach(function(q){Y.point=q.startPoint,V=B0(Y),q.updateStartPoint(V)}),pe.targetEdges.forEach(function(q){Y.point=q.endPoint,V=B0(Y),q.updateEndPoint(V)}),f.eventEmit({beforeNode:ts(ts({},W),{rx:E,ry:_}),afterNode:F})},f.updateDiamond=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.id,E=y.rx,_=y.ry,T=y.x,P=y.y,A=y.PCTResizeInfo,N=f.index,M=E,L=_,z=f.getResize({index:N,deltaX:p,deltaY:d,width:M,height:L,PCTResizeInfo:A,pct:1/2}),$=f.nodeModel,ye=$.minWidth,Te=$.minHeight,fe=$.maxWidth,ae=$.maxHeight;if(z.width<ye/2||z.width>fe/2||z.height<Te/2||z.height>ae/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:z.deltaX,deltaY:z.deltaY}),f.nodeModel.rx=z.width,f.nodeModel.ry=z.height,f.nodeModel.setProperties({nodeSize:{rx:z.width,ry:z.height}});var pe={x:T,y:P,rx:E,ry:_},W={rx:z.width,ry:z.height,x:f.nodeModel.x,y:f.nodeModel.y},F={point:{},beforeNode:pe,afterNode:W},Y,V=f.getNodeEdges(g);V.sourceEdges.forEach(function(q){F.point=q.startPoint,Y=F0(F),q.updateStartPoint(Y)}),V.targetEdges.forEach(function(q){F.point=q.endPoint,Y=F0(F),q.updateEndPoint(Y)}),f.eventEmit({beforeNode:pe,afterNode:W})},f.eventEmit=function(o){var p=o.beforeNode,d=o.afterNode,y=f.nodeModel,g=y.id,E=y.modelType,_=y.type,T=ts({id:g,modelType:E,type:_},p),P=ts({id:g,modelType:E,type:_},d);f.graphModel.eventCenter.emit("node:resize",{oldNodeSize:T,newNodeSize:P})},f.onDragging=function(o){var p,d=o.deltaX,y=o.deltaY,g=f.graphModel.transformModel,E=f.nodeModel.modelType;p=kS(g.fixDeltaXY(d,y),2),d=p[0],y=p[1],E===Ac.RECT_NODE||E===Ac.HTML_NODE?f.updateRect({deltaX:d,deltaY:y}):E===Ac.ELLIPSE_NODE?f.updateEllipse({deltaX:d,deltaY:y}):E===Ac.DIAMOND_NODE&&f.updateDiamond({deltaX:d,deltaY:y})},f.onDragEnd=function(){var o=f.graphModel.gridSize,p=o===void 0?1:o,d=p*Math.round(f.nodeModel.x/p),y=p*Math.round(f.nodeModel.y/p);f.nodeModel.moveTo(d,y)},f.index=a.index,f.nodeModel=a.model,f.graphModel=a.graphModel,f.state={},f.dragHandler=new LS({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:1}),f}return u.prototype.getNodeEdges=function(a){for(var f=this.graphModel,o=f.edges,p=[],d=[],y=0;y<o.length;y++){var g=o[y];g.sourceNodeId===a?p.push(g):o[y].targetNodeId===a&&d.push(g)}return{sourceEdges:p,targetEdges:d}},u.prototype.render=function(){var a=this.props,f=a.x,o=a.y,p=a.index,d=a.model,y=d.getControlPointStyle();return dl("g",{className:"lf-resize-control-"+p},dl(Pg,ts({className:"lf-node-control"},{x:f,y:o},y,{onMouseDown:this.dragHandler.handleMouseDown})))},u}(Pc),FS=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),kd=globalThis&&globalThis.__assign||function(){return kd=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},kd.apply(this,arguments)},Wd=function(r){FS(u,r);function u(){var a=r.call(this)||this;return a.state={},a}return u.prototype.getResizeControl=function(){var a=this.props,f=a.model,o=a.graphModel,p=f.x,d=f.y,y=f.width,g=f.height,E={minX:p-y/2,minY:d-g/2,maxX:p+y/2,maxY:d+g/2},_=E.minX,T=E.minY,P=E.maxX,A=E.maxY,N=[{x:_,y:T},{x:P,y:T},{x:P,y:A},{x:_,y:A}];return N.map(function(M,L){return dl(BS,kd({index:L},M,{model:f,graphModel:o}))})},u.prototype.getGroupSolid=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.getResizeOutlineStyle();return dl(Pg,kd({fill:"none"},y,{x:f,y:o,width:p,height:d}))},u.prototype.render=function(){return dl("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},u}(Pc),nE=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),GS=function(r){nE(u,r);function u(a,f){var o=r.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.width=p.width,o.height=p.height),o}return u.prototype.initNodeData=function(a){r.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},u.prototype.getOutlineStyle=function(){var a=r.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.resize=function(a,f){console.log(a,f)},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},p={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u}(Ht.RectNodeModel),US=function(r){nE(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(Wd,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){return r.prototype.getShape.call(this)},u.prototype.getShape=function(){var a=this.props,f=a.model.isSelected,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},u}(Ht.RectNode),Yd={type:"rect",view:US,model:GS},oE=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(r){oE(u,r);function u(a,f){var o=r.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.rx=p.rx,o.ry=p.ry),o}return u.prototype.initNodeData=function(a){r.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},u.prototype.getOutlineStyle=function(){var a=r.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},p={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u})(Ht.EllipseNodeModel);(function(r){oE(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(Wd,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){return r.prototype.getShape.call(this)},u.prototype.getShape=function(){var a=this.props,f=a.model,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f.isSelected&&!o?this.getControlGroup():"")},u})(Ht.EllipseNode);var vg=globalThis&&globalThis.__assign||function(){return vg=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},vg.apply(this,arguments)};function zS(r){var u=r.fillOpacity,a=u===void 0?1:u,f=r.strokeWidth,o=f===void 0?1:f,p=r.strokeOpacity,d=p===void 0?1:p,y=r.fill,g=y===void 0?"transparent":y,E=r.stroke,_=E===void 0?"#000":E,T=r.points,P=r.className,A=P===void 0?"lf-basic-shape":P,N={fill:g,fillOpacity:a,strokeWidth:o,stroke:_,strokeOpacity:d,points:"",className:A};return N.points=T.map(function(M){return M.join(",")}).join(" "),Ht.h("polygon",vg({},N))}var iE=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),gg=globalThis&&globalThis.__assign||function(){return gg=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},gg.apply(this,arguments)};(function(r){iE(u,r);function u(a,f){var o=r.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.rx=p.rx,o.ry=p.ry),o}return u.prototype.initNodeData=function(a){r.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},u.prototype.getOutlineStyle=function(){var a=r.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},p={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u})(Ht.DiamondNodeModel);(function(r){iE(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(Wd,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){var a=this.props.model,f=a.points,o=a.getNodeStyle();return Ht.h("g",null,Ht.h(zS,gg({},o,{points:f})))},u.prototype.getShape=function(){var a=this.props,f=a.model.isSelected,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},u})(Ht.DiamondNode);var aE=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(r){aE(u,r);function u(a,f){var o=r.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.width=p.width,o.height=p.height),o}return u.prototype.initNodeData=function(a){r.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},u.prototype.getOutlineStyle=function(){var a=r.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},p={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u})(Ht.HtmlNodeModel);(function(r){aE(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(Wd,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){return r.prototype.getShape.call(this)},u.prototype.getShape=function(){var a=this.props,f=a.model.isSelected,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},u})(Ht.HtmlNode);var uE=globalThis&&globalThis.__extends||function(){var r=function(u,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},r(u,a)};return function(u,a){r(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Ld=globalThis&&globalThis.__assign||function(){return Ld=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},Ld.apply(this,arguments)},HS=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},XS=globalThis&&globalThis.__spread||function(){for(var r=[],u=0;u<arguments.length;u++)r=r.concat(HS(arguments[u]));return r},G0=500,U0=300,VS=-1e4,WS=function(r){uE(u,r);function u(){var a=r!==null&&r.apply(this,arguments)||this;return a.isGroup=!0,a.unfoldedWidth=G0,a.unfoldedHight=U0,a}return u.prototype.initNodeData=function(a){var f=this;r.prototype.initNodeData.call(this,a);var o=[];Array.isArray(a.children)&&(o=a.children),this.children=new Set(o),this.width=G0,this.height=U0,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=VS,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){f.isFolded&&f.foldGroup(f.isFolded)})},u.prototype.getResizeOutlineStyle=function(){var a=r.prototype.getResizeOutlineStyle.call(this);return a.stroke="none",a},u.prototype.foldGroup=function(a){var f=this;this.setProperty("isFolded",a),this.isFolded=a,a?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var o=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(p){var d=f.graphModel.getElement(p);d.isGroup&&!d.isFolded&&d.foldGroup(a),d.visible=!a,o=o.concat(d.incoming.edges.concat(d.outgoing.edges))}),this.foldEdge(a,o)},u.prototype.getAnchorStyle=function(a){var f=r.prototype.getAnchorStyle.call(this,a);return f.stroke="transparent",f.fill="transparent",f.hover.fill="transparent",f.hover.stroke="transparent",f},u.prototype.foldEdge=function(a,f){var o=this;f.forEach(function(p,d){var y=p.id,g=p.sourceNodeId,E=p.targetNodeId,_=p.startPoint,T=p.endPoint,P=p.type,A=p.text,N=p.getProperties(),M={id:y+"__"+d,sourceNodeId:g,targetNodeId:E,startPoint:_,endPoint:T,type:P,properties:N,text:A==null?void 0:A.value};p.virtual&&o.graphModel.deleteEdgeById(p.id);var L=o.graphModel.group.getNodeGroup(E);L||(L=o.graphModel.getNodeModelById(E));var z=o.graphModel.group.getNodeGroup(g);z||(z=o.graphModel.getNodeModelById(g)),a&&p.visible!==!1&&(o.children.has(g)||o.id===g?(M.startPoint=void 0,M.sourceNodeId=o.id):(M.endPoint=void 0,M.targetNodeId=o.id),(L.id!==o.id||z.id!==o.id)&&o.createVirtualEdge(M),p.visible=!1),!a&&p.visible===!1&&(L&&L.isGroup&&L.isFolded?(M.targetNodeId=L.id,M.endPoint=void 0,o.createVirtualEdge(M)):z&&z.isGroup&&z.isFolded?(M.sourceNodeId=z.id,M.startPoint=void 0,o.createVirtualEdge(M)):p.visible=!0)})},u.prototype.createVirtualEdge=function(a){a.pointsList=void 0;var f=this.graphModel.addEdge(a);f.virtual=!0,f.text.editable=!1,f.isFoldedEdge=!0},u.prototype.isInRange=function(a){var f=a.x1,o=a.y1,p=a.x2,d=a.y2;return f>=this.x-this.width/2&&p<=this.x+this.width/2&&o>=this.y-this.height/2&&d<=this.y+this.height/2},u.prototype.isAllowMoveTo=function(a){var f=a.x1,o=a.y1,p=a.x2,d=a.y2;return{x:f>=this.x-this.width/2&&p<=this.x+this.width/2,y:o>=this.y-this.height/2&&d<=this.y+this.height/2}},u.prototype.setAllowAppendChild=function(a){this.setProperty("groupAddable",a)},u.prototype.addChild=function(a){this.children.add(a)},u.prototype.removeChild=function(a){this.children.delete(a)},u.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},u.prototype.getData=function(){var a=this,f=r.prototype.getData.call(this);f.children=[],this.children.forEach(function(p){var d=a.graphModel.getNodeModelById(p);d&&!d.virtual&&f.children.push(p)});var o=f.properties;return delete o.groupAddable,delete o.isFolded,f},u.prototype.getHistoryData=function(){var a=r.prototype.getData.call(this);a.children=XS(this.children),a.isGroup=!0;var f=a.properties;return delete f.groupAddable,f.isFolded&&(a.x=a.x+this.unfoldedWidth/2-this.foldedWidth/2,a.y=a.y+this.unfoldedHight/2-this.foldedHeight/2),a},u.prototype.isAllowAppendIn=function(a){return!0},u.prototype.toBack=function(){this.zIndex--},u}(Yd.model),YS=function(r){uE(u,r);function u(){return r!==null&&r.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props.model,f=a.resizable,o=a.properties;return f&&!o.isFolded?r.prototype.getControlGroup.call(this):null},u.prototype.getAddableShape=function(){var a=this.props.model,f=a.width,o=a.height,p=a.x,d=a.y,y=a.radius,g=a.properties;if(!g.groupAddable)return null;var E=this.props.model.getNodeStyle().strokeWidth,_=this.props.model.getAddableOutlineStyle(),T=f+E+8,P=o+E+8;return Ht.h("rect",Ld(Ld({},_),{width:T,height:P,x:p-T/2,y:d-P/2,rx:y,ry:y}))},u.prototype.getFoldIcon=function(){var a=this.props.model,f=a.x-a.width/2+5,o=a.y-a.height/2+5;if(!a.foldable)return null;var p=Ht.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:a.properties.isFolded?"M "+(f+3)+","+(o+6)+" "+(f+11)+","+(o+6)+" M"+(f+7)+","+(o+2)+" "+(f+7)+","+(o+10):"M "+(f+3)+","+(o+6)+" "+(f+11)+","+(o+6)+" "});return Ht.h("g",{},[Ht.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:a.x-a.width/2+5,y:a.y-a.height/2+5,onClick:function(){a.foldGroup(!a.properties.isFolded)}}),p])},u.prototype.getResizeShape=function(){return Ht.h("g",{},[this.getAddableShape(),r.prototype.getResizeShape.call(this),this.getFoldIcon()])},u}(Yd.view);const jg={type:"group",view:YS,model:WS};var $S=-1e3,z0=-1e4,KS=function(){function r(u){var a=this,f=u.lf;this.topGroupZIndex=z0,this.nodeGroupMap=new Map,this.graphRendered=function(o){o&&o.nodes&&o.nodes.forEach(function(p){p.children&&p.children.forEach(function(d){a.nodeGroupMap.set(d,p.id)})})},this.appendNodeToGroup=function(o){var p=o.data,d=a.nodeGroupMap.get(p.id);if(d){var y=a.lf.getNodeModelById(d);y.removeChild(p.id),a.nodeGroupMap.delete(p.id),y.setAllowAppendChild(!1)}var g=a.lf.getNodeModelById(p.id),E=g.getBounds(),_=a.getGroup(E,p);if(_){var T=_.isAllowAppendIn(p);if(!T){a.lf.emit("group:not-allowed",{group:_.getData(),node:p});return}_.addChild(p.id),a.nodeGroupMap.set(p.id,_.id),_.setAllowAppendChild(!1),g.isGroup&&(p.children.forEach(function(P){a.nodeGroupMap.set(P,p.id)}),a.nodeSelected({data:p,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(o){var p=o.data;p.children&&p.children.forEach(function(g){a.nodeGroupMap.delete(g),a.lf.deleteNode(g)});var d=a.nodeGroupMap.get(p.id);if(d){var y=a.lf.getNodeModelById(d);y.removeChild(p.id),a.nodeGroupMap.delete(p.id)}},this.setActiveGroup=function(o){var p=o.data,d=a.lf.getNodeModelById(p.id),y=d.getBounds(),g=a.getGroup(y,p);if(a.activeGroup&&a.activeGroup.setAllowAppendChild(!1),!(!g||d.isGroup&&g.id===p.id)){var E=g.isAllowAppendIn(p);E&&(a.activeGroup=g,a.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(o){var p=o.data,d=o.isMultiple,y=o.isSelected,g=a.lf.getNodeModelById(p.id);if(a.toFrontGroup(g),a.topGroupZIndex>$S){a.topGroupZIndex=z0;for(var E=a.lf.graphModel.nodes.filter(function(M){return M.isGroup}).sort(function(M,L){return M.zIndex-L.zIndex}),_=0,T=0;T<E.length;T++){var P=E[T];P.zIndex!==_&&(a.topGroupZIndex++,_=P.zIndex),P.setZIndex(a.topGroupZIndex)}}if(d&&y)if(g.isGroup)g.children.forEach(function(M){var L=a.lf.graphModel.getElement(M);L.setSelected(!1)});else{var A=a.nodeGroupMap.get(p.id);if(A){var N=a.lf.getNodeModelById(A);N.isSelected&&g.setSelected(!1)}}},this.toFrontGroup=function(o){!o||!o.isGroup||(a.topGroupZIndex++,o.setZIndex(a.topGroupZIndex),o.children&&o.children.forEach(function(p){var d=a.lf.getNodeModelById(p);a.toFrontGroup(d)}))},f.register(jg),this.lf=f,f.graphModel.addNodeMoveRules(function(o,p,d){if(o.isGroup){var y=a.getNodeAllChild(o);return f.graphModel.moveNodes(y,p,d,!0),!0}var g=f.getNodeModelById(a.nodeGroupMap.get(o.id));if(g&&g.isRestrict){var E=o.getBounds(),_=E.x1,T=E.y1,P=E.x2,A=E.y2,N=g.isAllowMoveTo({x1:_+p,y1:T+d,x2:P+p,y2:A+d});return N}return!0}),f.graphModel.group=this,f.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),f.on("node:delete",this.deleteGroupChild),f.on("node:dnd-drag,node:drag",this.setActiveGroup),f.on("node:click",this.nodeSelected),f.on("graph:rendered",this.graphRendered)}return r.prototype.getNodeAllChild=function(u){var a=this,f=[];return u.children&&u.children.forEach(function(o){f.push(o);var p=a.lf.getNodeModelById(o);p.isGroup&&(f=f.concat(a.getNodeAllChild(p)))}),f},r.prototype.getGroup=function(u,a){var f=this.lf.graphModel.nodes,o=f.filter(function(y){return y.isGroup&&y.isInRange(u)&&y.id!==a.id});if(o.length!==0){if(o.length===1)return o[0];for(var p=o[o.length-1],d=o.length-2;d>=0;d--)o[d].zIndex>p.zIndex&&(p=o[d]);return p}},r.prototype.getNodeGroup=function(u){var a=this.nodeGroupMap.get(u);if(a)return this.lf.getNodeModelById(a)},r.pluginName="group",r}(),qS=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p};globalThis&&globalThis.__spread;var H0=globalThis&&globalThis.__assign||function(){return H0=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},H0.apply(this,arguments)},X0=globalThis&&globalThis.__assign||function(){return X0=Object.assign||function(r){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(r[o]=u[o])}return r},X0.apply(this,arguments)},ZS=globalThis&&globalThis.__read||function(r,u){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var f=a.call(r),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p};globalThis&&globalThis.__spread;class QS extends Ht.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class JS extends Ht.HtmlNode{}class eT extends Kx{}class tT extends qx{}class rT extends Zx{}class nT extends Qx{getShape(){const u=this.props.model,a=u.getNodeStyle(),{x:f,y:o,r:p}=u;return Ht.h("circle",{...a,cx:f,cy:o,r:p,strokeWidth:5})}}class oT extends Jx{constructor(u,a){const{id:f,text:o,x:p,y:d}=u;u.id=f||`Gateway_${zi()}`,u.text=o||{value:o||"",x:p,y:d+40},super(u,a),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class iT extends eS{getShape(){const{model:u}=this.props,{x:a,y:f,width:o,height:p,points:d}=u,y=u.getNodeStyle();return Ht.h("g",{transform:`matrix(1 0 0 1 ${a-o/2} ${f-p/2})`},Ht.h("polygon",{...y,x:a,y:f,points:d}),Ht.h("line",{...y,x1:15,y1:15,x2:35,y2:35}),Ht.h("line",{...y,x1:35,y1:15,x2:15,y2:35}))}}class aT extends Ht.PolygonNodeModel{constructor(u,a){const{id:f,text:o,x:p,y:d}=u;u.id=f||`Gateway_${zi()}`,u.text=o||{value:o||"",x:p,y:d+40},super(u,a),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class uT extends Ht.PolygonNode{getShape(){const{model:u}=this.props,{x:a,y:f,width:o,height:p,points:d}=u,y=u.getNodeStyle();return Ht.h("g",{transform:`matrix(1 0 0 1 ${a-o/2} ${f-p/2})`},Ht.h("polygon",{...y,x:a,y:f,points:d}),Ht.h("line",{...y,x1:10,y1:25,x2:40,y2:25}),Ht.h("line",{...y,x1:25,y1:10,x2:25,y2:40}))}}class sT extends tS{}class cT extends rS{}class fT extends nS{isAllowConnectedAsSource(){return!1}}class lT extends oS{}class pT extends F_{getTextPosition(){const{x:u,y:a}=this.text;return u&&a?{x:u,y:a}:this.dbClickPosition||{x:0,y:0}}}class dT extends G_{}const hT=Yd.model,yT=Yd.view;class vT extends hT{createId(){return`Note_${zi()}`}initNodeData(u){super.initNodeData(u),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const u=super.getNodeStyle();return u.strokeDasharray="3 3",u.fill="transparent",u}}class gT extends yT{}class mT extends F_{getEdgeStyle(){const u=super.getEdgeStyle();return u.strokeDasharray="3 3",u}getTextPosition(){const{x:u,y:a}=this.text;return u&&a?{x:u,y:a}:this.dbClickPosition||{x:0,y:0}}}class bT extends G_{}const _T=jg.model;class ET extends _T{createId(){return`Group_${zi()}`}initNodeData(u){super.initNodeData(u),this.resizable=!0,this.foldable=!0}addChild(u){var a,f;super.addChild(u),(f=(a=this.graphModel.nodesMap[u])==null?void 0:a.model)==null||f.setProperty("groupKey",this.id)}removeChild(u){var a,f;super.removeChild(u),(f=(a=this.graphModel.nodesMap[u])==null?void 0:a.model)==null||f.deleteProperty("groupKey")}}class OT extends jg.view{}class DN extends KS{constructor({lf:u}){super({lf:u}),u.register({type:"group",model:ET,view:OT}),u.off("node:delete",this.deleteGroupChild),u.on("node:delete",({data:a})=>{a.children&&a.children.forEach(f=>{this.nodeGroupMap.delete(f),this.lf.deleteNode(f)})})}}const wT=[{type:"process",model:QS,view:JS},{type:"startEvent",model:eT,view:tT},{type:"endEvent",model:rT,view:nT},{type:"exclusiveGateway",model:oT,view:iT},{type:"parallelGateway",model:aT,view:uT},{type:"userTask",model:sT,view:cT},{type:"serviceTask",model:fT,view:lT},{type:"sequenceFlow",model:pT,view:dT},{type:"note",model:vT,view:gT},{type:"noteFlow",model:mT,view:bT}];class xT{constructor({lf:u}){u.batchRegister(wT),u.setDefaultEdgeType("sequenceFlow")}}v0(xT,"pluginName","bpmnExtend");var jc;(function(r){r.DEFAULT_EDGE_NAME="\0",r.GRAPH_NODE="\0",r.EDGE_KEY_DELIM=""})(jc||(jc={}));function V0(r,u){var a=r.get(u)||0;r.set(u,a+1)}function W0(r,u){var a=r.get(u);a!==void 0&&(a=a-1,a>0?r.set(u,a):r.delete(u))}function sE(r,u,a,f){var o=String(u),p=String(a);if(!r&&o>p){var d=o;o=p,p=d}return o+jc.EDGE_KEY_DELIM+p+jc.EDGE_KEY_DELIM+(f===void 0?jc.DEFAULT_EDGE_NAME:f)}function Y0(r,u,a,f){var o=String(u),p=String(a),d={v:u,w:a};if(!r&&o>p){var y=d.v;d.v=d.w,d.w=y}return f!==void 0&&(d.name=f),d}function ag(r,u){return sE(r,u.v,u.w,u.name)}function $0(r){return typeof r=="function"}var ST=function(u){return u.nodes().map(function(a){var f=u.node(a),o=u.parent(a),p={id:a,value:f,parent:o};return p.value===void 0&&delete p.value,p.parent===void 0&&delete p.parent,p})},TT=function(u){return u.edges().map(function(a){var f=u.edge(a),o={v:a.v,w:a.w,value:f,name:a.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},AT=function(u){var a={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:ST(u),edges:TT(u),value:u.graph()};return a.value===void 0&&delete a.value,a},PT=function(u){var a=new cE(u.options);return u.value!==void 0&&a.setGraph(u.value),u.nodes.forEach(function(f){a.setNode(f.id,f.value),f.parent&&a.setParent(f.id,f.parent)}),u.edges.forEach(function(f){a.setEdge(f.v,f.w,f.value,f.name)}),a};function K0(r,u){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(r);u&&(f=f.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,f)}return a}function q0(r){for(var u=1;u<arguments.length;u++){var a=arguments[u]!=null?arguments[u]:{};u%2?K0(Object(a),!0).forEach(function(f){jT(r,f,a[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):K0(Object(a)).forEach(function(f){Object.defineProperty(r,f,Object.getOwnPropertyDescriptor(a,f))})}return r}function jT(r,u,a){return u in r?Object.defineProperty(r,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[u]=a,r}function NT(r,u){if(!(r instanceof u))throw new TypeError("Cannot call a class as a function")}function Z0(r,u){for(var a=0;a<u.length;a++){var f=u[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}function MT(r,u,a){return u&&Z0(r.prototype,u),a&&Z0(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}var RT={compound:!1,multigraph:!1,directed:!0},cE=function(){function r(){var u=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};NT(this,r),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=jc.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return u.directed},this.isMultigraph=function(){return u.multigraph},this.isCompound=function(){return u.compound},this.setGraph=function(o){return u.label=o,u},this.graph=function(){return u.label},this.setDefaultNodeLabel=function(o){return $0(o)?u.defaultNodeLabelFn=o:u.defaultNodeLabelFn=function(){return o},u},this.nodeCount=function(){return u.nodeCountNum},this.node=function(o){return u.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(u.nodesLabelMap.keys())},this.sources=function(){return u.nodes().filter(function(o){var p;return!(!((p=u.inEdgesMap.get(o))===null||p===void 0)&&p.size)})},this.sinks=function(){return u.nodes().filter(function(o){var p;return!(!((p=u.outEdgesMap.get(o))===null||p===void 0)&&p.size)})},this.setNodes=function(o,p){return o.map(function(d){return u.setNode(d,p)}),u},this.hasNode=function(o){return u.nodesLabelMap.has(o)},this.checkCompound=function(){if(!u.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(u.isCompound()){var p,d=(p=u.parentMap)===null||p===void 0?void 0:p.get(o);if(d!==u.GRAPH_NODE)return d}},this.removeFromParentsChildList=function(o){var p=u.parentMap.get(o);u.childrenMap.get(p).delete(o)},this.setParent=function(o,p){var d,y;u.checkCompound();for(var g=p===void 0?u.GRAPH_NODE:p,E=u.parent(g);E;){if(o===E)throw new Error("Setting "+p+" as parent of "+o+" would create a cycle");E=u.parent(E)}p&&u.setNode(p),u.setNode(o),u.removeFromParentsChildList(o),(d=u.parentMap)===null||d===void 0||d.set(o,g);var _=u.childrenMap.get(g);return _.set(o,!0),(y=u.childrenMap)===null||y===void 0||y.set(g,_),u},this.children=function(o){var p=o===void 0?u.GRAPH_NODE:o;if(u.isCompound()){var d,y=(d=u.childrenMap)===null||d===void 0?void 0:d.get(p);return y?Array.from(y.keys()):void 0}if(p===u.GRAPH_NODE)return u.nodes();if(o&&u.hasNode(o))return[]},this.predecessors=function(o){var p=u.predecessorsMap.get(o);return p?Array.from(p.keys()):void 0},this.successors=function(o){var p=u.successorsMap.get(o);return p?Array.from(p.keys()):void 0},this.neighbors=function(o){var p;if(u.hasNode(o))return Array.from(new Set((p=u.predecessors(o))===null||p===void 0?void 0:p.concat(u.successors(o))))},this.isLeaf=function(o){var p;if(u.isDirected()){var d;return!(!((d=u.successors(o))===null||d===void 0)&&d.length)}return!(!((p=u.neighbors(o))===null||p===void 0)&&p.length)},this.filterNodes=function(o){var p=u.directed,d=u.multigraph,y=u.compound,g=new r({directed:p,multigraph:d,compound:y});if(g.setGraph(u.graph()),u.nodes().forEach(function(_){o(_)&&g.setNode(_,u.node(_))}),u.edges().forEach(function(_){g.hasNode(_.v)&&g.hasNode(_.w)&&g.setEdgeObj(_,u.edge(_))}),y){var E=function(T){for(var P=u.parent(T);P!==void 0&&!g.hasNode(P);)P=u.parent(P);return P};g.nodes().forEach(function(_){g.setParent(_,E(_))})}return g},this.setDefaultEdgeLabel=function(o){return $0(o)?u.defaultEdgeLabelFn=o:u.defaultEdgeLabelFn=function(){return o},u},this.edgeCount=function(){return u.edgeCountNum},this.setEdgeObj=function(o,p){return u.setEdge(o.v,o.w,p,o.name)},this.setPath=function(o,p){return o.reduce(function(d,y){return u.setEdge(d,y,p),y}),u},this.edgeFromArgs=function(o,p,d){return u.edge({v:o,w:p,name:d})},this.edge=function(o){return u.edgesLabelsMap.get(ag(u.isDirected(),o))},this.hasEdge=function(o,p,d){return u.edgesLabelsMap.has(ag(u.isDirected(),{v:o,w:p,name:d}))},this.removeEdgeObj=function(o){var p=o.v,d=o.w,y=o.name;return u.removeEdge(p,d,y)},this.edges=function(){return Array.from(u.edgesMap.values())},this.inEdges=function(o,p){var d=u.inEdgesMap.get(o);if(d)return Array.from(d.values()).filter(function(y){return!p||y.v===p})},this.outEdges=function(o,p){var d=u.outEdgesMap.get(o);if(d)return Array.from(d.values()).filter(function(y){return!p||y.w===p})},this.nodeEdges=function(o,p){var d;if(u.hasNode(o))return(d=u.inEdges(o,p))===null||d===void 0?void 0:d.concat(u.outEdges(o,p))},this.toJSON=function(){return AT(u)},this.nodeInDegree=function(o){var p=u.inEdgesMap.get(o);return p?p.size:0},this.nodeOutDegree=function(o){var p=u.outEdgesMap.get(o);return p?p.size:0},this.nodeDegree=function(o){return u.nodeInDegree(o)+u.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var f=q0(q0({},RT),a);this.compound=f.compound,this.directed=f.directed,this.multigraph=f.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return MT(r,[{key:"setNode",value:function(a,f){var o=this.nodesLabelMap,p=this.defaultNodeLabelFn,d=this.isCompound,y=this.parentMap,g=this.childrenMap,E=this.inEdgesMap,_=this.outEdgesMap,T=this.predecessorsMap,P=this.successorsMap;if(o.has(a))return f!==void 0&&o.set(a,f),this;if(o.set(a,f||p(a)),d()){var A;y==null||y.set(a,this.GRAPH_NODE),g==null||g.set(a,new Map),g!=null&&g.has(this.GRAPH_NODE)||g==null||g.set(this.GRAPH_NODE,new Map),g==null||(A=g.get(this.GRAPH_NODE))===null||A===void 0||A.set(a,!0)}return[E,_,T,P].forEach(function(N){return N.set(a,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(a){var f=this;if(this.hasNode(a)){var o=function(L){f.removeEdge(L.v,L.w,L.name)},p=this.inEdgesMap,d=this.outEdgesMap,y=this.predecessorsMap,g=this.successorsMap,E=this.nodesLabelMap;if(this.isCompound()){var _,T,P;this.removeFromParentsChildList(a),(_=this.parentMap)===null||_===void 0||_.delete(a),(T=this.children(a))===null||T===void 0||T.forEach(function(M){return f.setParent(M)}),(P=this.childrenMap)===null||P===void 0||P.delete(a)}var A=p.get(a),N=d.get(a);Array.from(A.values()).forEach(function(M){return o(M)}),Array.from(N.values()).forEach(function(M){return o(M)}),E.delete(a),p.delete(a),d.delete(a),y.delete(a),g.delete(a),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(a,f,o,p){var d,y,g=Y0(this.isDirected(),a,f,p),E=ag(this.isDirected(),g),_=g.v,T=g.w;if(this.edgesLabelsMap.has(E))return this.edgesLabelsMap.set(E,o),this;if(p!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(T),this.edgesLabelsMap.set(E,o||this.defaultEdgeLabelFn(_,T,p)),Object.freeze(g),this.edgesMap.set(E,g);var P=this.predecessorsMap.get(T),A=this.successorsMap.get(_);return V0(P,_),V0(A,T),(d=this.inEdgesMap.get(T))===null||d===void 0||d.set(E,g),(y=this.outEdgesMap.get(_))===null||y===void 0||y.set(E,g),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(a,f,o){var p=sE(this.isDirected(),a,f,o),d=this.edgesMap.get(p);if(d){var y=Y0(this.isDirected(),a,f,o),g=y.v,E=y.w;this.edgesLabelsMap.delete(p),this.edgesMap.delete(p);var _=this.predecessorsMap.get(E),T=this.successorsMap.get(g);W0(_,g),W0(T,E),this.inEdgesMap.get(E).delete(p),this.outEdgesMap.get(g).delete(p),this.edgeCountNum-=1}return this}}]),r}();cE.fromJSON=PT;var Q0,J0,e_,t_;(function(r){r[r.META=0]="META",r[r.NODE=1]="NODE",r[r.BRIDGE=2]="BRIDGE"})(Q0||(Q0={})),function(r){r[r.INCLUDE=0]="INCLUDE",r[r.EXCLUDE=1]="EXCLUDE",r[r.UNSPECIFIED=2]="UNSPECIFIED"}(J0||(J0={})),function(r){r[r.META=0]="META",r[r.CORE=1]="CORE",r[r.BRIDGE=2]="BRIDGE"}(e_||(e_={})),function(r){r[r.META=0]="META",r[r.OP=1]="OP",r[r.SERIES=2]="SERIES"}(t_||(t_={}));var Od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ng(r,u){return r(u={exports:{}},u.exports),u.exports}var DT=function(){this.__data__=[],this.size=0},kc=function(r,u){return r===u||r!=r&&u!=u},$d=function(r,u){for(var a=r.length;a--;)if(kc(r[a][0],u))return a;return-1},CT=Array.prototype.splice,IT=function(r){var u=this.__data__,a=$d(u,r);return!(a<0)&&(a==u.length-1?u.pop():CT.call(u,a,1),--this.size,!0)},kT=function(r){var u=this.__data__,a=$d(u,r);return a<0?void 0:u[a][1]},LT=function(r){return $d(this.__data__,r)>-1},BT=function(r,u){var a=this.__data__,f=$d(a,r);return f<0?(++this.size,a.push([r,u])):a[f][1]=u,this};function Oc(r){var u=-1,a=r==null?0:r.length;for(this.clear();++u<a;){var f=r[u];this.set(f[0],f[1])}}Oc.prototype.clear=DT,Oc.prototype.delete=IT,Oc.prototype.get=kT,Oc.prototype.has=LT,Oc.prototype.set=BT;var Kd=Oc,FT=function(){this.__data__=new Kd,this.size=0},GT=function(r){var u=this.__data__,a=u.delete(r);return this.size=u.size,a},UT=function(r){return this.__data__.get(r)},zT=function(r){return this.__data__.has(r)},fE=typeof Od=="object"&&Od&&Od.Object===Object&&Od,HT=typeof self=="object"&&self&&self.Object===Object&&self,vi=fE||HT||Function("return this")(),ni=vi.Symbol,lE=Object.prototype,XT=lE.hasOwnProperty,VT=lE.toString,al=ni?ni.toStringTag:void 0,WT=function(r){var u=XT.call(r,al),a=r[al];try{r[al]=void 0;var f=!0}catch{}var o=VT.call(r);return f&&(u?r[al]=a:delete r[al]),o},YT=Object.prototype.toString,$T=function(r){return YT.call(r)},r_=ni?ni.toStringTag:void 0,uu=function(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":r_&&r_ in Object(r)?WT(r):$T(r)},Do=function(r){var u=typeof r;return r!=null&&(u=="object"||u=="function")},n_,_l=function(r){if(!Do(r))return!1;var u=uu(r);return u=="[object Function]"||u=="[object GeneratorFunction]"||u=="[object AsyncFunction]"||u=="[object Proxy]"},ug=vi["__core-js_shared__"],o_=(n_=/[^.]+$/.exec(ug&&ug.keys&&ug.keys.IE_PROTO||""))?"Symbol(src)_1."+n_:"",KT=function(r){return!!o_&&o_ in r},qT=Function.prototype.toString,is=function(r){if(r!=null){try{return qT.call(r)}catch{}try{return r+""}catch{}}return""},ZT=/^\[object .+?Constructor\]$/,QT=Function.prototype,JT=Object.prototype,eA=QT.toString,tA=JT.hasOwnProperty,rA=RegExp("^"+eA.call(tA).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nA=function(r){return!(!Do(r)||KT(r))&&(_l(r)?rA:ZT).test(is(r))},oA=function(r,u){return r==null?void 0:r[u]},as=function(r,u){var a=oA(r,u);return nA(a)?a:void 0},vl=as(vi,"Map"),gl=as(Object,"create"),iA=function(){this.__data__=gl?gl(null):{},this.size=0},aA=function(r){var u=this.has(r)&&delete this.__data__[r];return this.size-=u?1:0,u},uA=Object.prototype.hasOwnProperty,sA=function(r){var u=this.__data__;if(gl){var a=u[r];return a==="__lodash_hash_undefined__"?void 0:a}return uA.call(u,r)?u[r]:void 0},cA=Object.prototype.hasOwnProperty,fA=function(r){var u=this.__data__;return gl?u[r]!==void 0:cA.call(u,r)},lA=function(r,u){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=gl&&u===void 0?"__lodash_hash_undefined__":u,this};function wc(r){var u=-1,a=r==null?0:r.length;for(this.clear();++u<a;){var f=r[u];this.set(f[0],f[1])}}wc.prototype.clear=iA,wc.prototype.delete=aA,wc.prototype.get=sA,wc.prototype.has=fA,wc.prototype.set=lA;var i_=wc,pA=function(){this.size=0,this.__data__={hash:new i_,map:new(vl||Kd),string:new i_}},dA=function(r){var u=typeof r;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?r!=="__proto__":r===null},qd=function(r,u){var a=r.__data__;return dA(u)?a[typeof u=="string"?"string":"hash"]:a.map},hA=function(r){var u=qd(this,r).delete(r);return this.size-=u?1:0,u},yA=function(r){return qd(this,r).get(r)},vA=function(r){return qd(this,r).has(r)},gA=function(r,u){var a=qd(this,r),f=a.size;return a.set(r,u),this.size+=a.size==f?0:1,this};function xc(r){var u=-1,a=r==null?0:r.length;for(this.clear();++u<a;){var f=r[u];this.set(f[0],f[1])}}xc.prototype.clear=pA,xc.prototype.delete=hA,xc.prototype.get=yA,xc.prototype.has=vA,xc.prototype.set=gA;var Zd=xc,mA=function(r,u){var a=this.__data__;if(a instanceof Kd){var f=a.__data__;if(!vl||f.length<199)return f.push([r,u]),this.size=++a.size,this;a=this.__data__=new Zd(f)}return a.set(r,u),this.size=a.size,this};function Sc(r){var u=this.__data__=new Kd(r);this.size=u.size}Sc.prototype.clear=FT,Sc.prototype.delete=GT,Sc.prototype.get=UT,Sc.prototype.has=zT,Sc.prototype.set=mA;var Nc=Sc,Mg=function(r,u){for(var a=-1,f=r==null?0:r.length;++a<f&&u(r[a],a,r)!==!1;);return r},Bd=function(){try{var r=as(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Qd=function(r,u,a){u=="__proto__"&&Bd?Bd(r,u,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[u]=a},bA=Object.prototype.hasOwnProperty,Jd=function(r,u,a){var f=r[u];bA.call(r,u)&&kc(f,a)&&(a!==void 0||u in r)||Qd(r,u,a)},El=function(r,u,a,f){var o=!a;a||(a={});for(var p=-1,d=u.length;++p<d;){var y=u[p],g=f?f(a[y],r[y],y,a,r):void 0;g===void 0&&(g=r[y]),o?Qd(a,y,g):Jd(a,y,g)}return a},_A=function(r,u){for(var a=-1,f=Array(r);++a<r;)f[a]=u(a);return f},yi=function(r){return r!=null&&typeof r=="object"},a_=function(r){return yi(r)&&uu(r)=="[object Arguments]"},pE=Object.prototype,EA=pE.hasOwnProperty,OA=pE.propertyIsEnumerable,Cc=a_(function(){return arguments}())?a_:function(r){return yi(r)&&EA.call(r,"callee")&&!OA.call(r,"callee")},Tn=Array.isArray,wA=function(){return!1},rs=Ng(function(r,u){var a=u&&!u.nodeType&&u,f=a&&r&&!r.nodeType&&r,o=f&&f.exports===a?vi.Buffer:void 0,p=(o?o.isBuffer:void 0)||wA;r.exports=p}),xA=/^(?:0|[1-9]\d*)$/,eh=function(r,u){var a=typeof r;return!!(u=u??9007199254740991)&&(a=="number"||a!="symbol"&&xA.test(r))&&r>-1&&r%1==0&&r<u},Rg=function(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991},ln={};ln["[object Float32Array]"]=ln["[object Float64Array]"]=ln["[object Int8Array]"]=ln["[object Int16Array]"]=ln["[object Int32Array]"]=ln["[object Uint8Array]"]=ln["[object Uint8ClampedArray]"]=ln["[object Uint16Array]"]=ln["[object Uint32Array]"]=!0,ln["[object Arguments]"]=ln["[object Array]"]=ln["[object ArrayBuffer]"]=ln["[object Boolean]"]=ln["[object DataView]"]=ln["[object Date]"]=ln["[object Error]"]=ln["[object Function]"]=ln["[object Map]"]=ln["[object Number]"]=ln["[object Object]"]=ln["[object RegExp]"]=ln["[object Set]"]=ln["[object String]"]=ln["[object WeakMap]"]=!1;var SA=function(r){return yi(r)&&Rg(r.length)&&!!ln[uu(r)]},th=function(r){return function(u){return r(u)}},Ic=Ng(function(r,u){var a=u&&!u.nodeType&&u,f=a&&r&&!r.nodeType&&r,o=f&&f.exports===a&&fE.process,p=function(){try{var d=f&&f.require&&f.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();r.exports=p}),u_=Ic&&Ic.isTypedArray,Ol=u_?th(u_):SA,TA=Object.prototype.hasOwnProperty,dE=function(r,u){var a=Tn(r),f=!a&&Cc(r),o=!a&&!f&&rs(r),p=!a&&!f&&!o&&Ol(r),d=a||f||o||p,y=d?_A(r.length,String):[],g=y.length;for(var E in r)!u&&!TA.call(r,E)||d&&(E=="length"||o&&(E=="offset"||E=="parent")||p&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||eh(E,g))||y.push(E);return y},AA=Object.prototype,rh=function(r){var u=r&&r.constructor;return r===(typeof u=="function"&&u.prototype||AA)},hE=function(r,u){return function(a){return r(u(a))}},PA=hE(Object.keys,Object),jA=Object.prototype.hasOwnProperty,Dg=function(r){if(!rh(r))return PA(r);var u=[];for(var a in Object(r))jA.call(r,a)&&a!="constructor"&&u.push(a);return u},ma=function(r){return r!=null&&Rg(r.length)&&!_l(r)},su=function(r){return ma(r)?dE(r):Dg(r)},NA=function(r,u){return r&&El(u,su(u),r)},MA=function(r){var u=[];if(r!=null)for(var a in Object(r))u.push(a);return u},RA=Object.prototype.hasOwnProperty,DA=function(r){if(!Do(r))return MA(r);var u=rh(r),a=[];for(var f in r)(f!="constructor"||!u&&RA.call(r,f))&&a.push(f);return a},us=function(r){return ma(r)?dE(r,!0):DA(r)},CA=function(r,u){return r&&El(u,us(u),r)},yE=Ng(function(r,u){var a=u&&!u.nodeType&&u,f=a&&r&&!r.nodeType&&r,o=f&&f.exports===a?vi.Buffer:void 0,p=o?o.allocUnsafe:void 0;r.exports=function(d,y){if(y)return d.slice();var g=d.length,E=p?p(g):new d.constructor(g);return d.copy(E),E}}),vE=function(r,u){var a=-1,f=r.length;for(u||(u=Array(f));++a<f;)u[a]=r[a];return u},gE=function(r,u){for(var a=-1,f=r==null?0:r.length,o=0,p=[];++a<f;){var d=r[a];u(d,a,r)&&(p[o++]=d)}return p},mE=function(){return[]},IA=Object.prototype.propertyIsEnumerable,s_=Object.getOwnPropertySymbols,Cg=s_?function(r){return r==null?[]:(r=Object(r),gE(s_(r),function(u){return IA.call(r,u)}))}:mE,kA=function(r,u){return El(r,Cg(r),u)},Ig=function(r,u){for(var a=-1,f=u.length,o=r.length;++a<f;)r[o+a]=u[a];return r},nh=hE(Object.getPrototypeOf,Object),bE=Object.getOwnPropertySymbols?function(r){for(var u=[];r;)Ig(u,Cg(r)),r=nh(r);return u}:mE,LA=function(r,u){return El(r,bE(r),u)},_E=function(r,u,a){var f=u(r);return Tn(r)?f:Ig(f,a(r))},mg=function(r){return _E(r,su,Cg)},BA=function(r){return _E(r,us,bE)},bg=as(vi,"DataView"),_g=as(vi,"Promise"),Mc=as(vi,"Set"),Eg=as(vi,"WeakMap"),FA=is(bg),GA=is(vl),UA=is(_g),zA=is(Mc),HA=is(Eg),Ju=uu;(bg&&Ju(new bg(new ArrayBuffer(1)))!="[object DataView]"||vl&&Ju(new vl)!="[object Map]"||_g&&Ju(_g.resolve())!="[object Promise]"||Mc&&Ju(new Mc)!="[object Set]"||Eg&&Ju(new Eg)!="[object WeakMap]")&&(Ju=function(r){var u=uu(r),a=u=="[object Object]"?r.constructor:void 0,f=a?is(a):"";if(f)switch(f){case FA:return"[object DataView]";case GA:return"[object Map]";case UA:return"[object Promise]";case zA:return"[object Set]";case HA:return"[object WeakMap]"}return u});var ns=Ju,XA=Object.prototype.hasOwnProperty,VA=function(r){var u=r.length,a=new r.constructor(u);return u&&typeof r[0]=="string"&&XA.call(r,"index")&&(a.index=r.index,a.input=r.input),a},Fd=vi.Uint8Array,kg=function(r){var u=new r.constructor(r.byteLength);return new Fd(u).set(new Fd(r)),u},WA=function(r,u){var a=u?kg(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)},YA=/\w*$/,$A=function(r){var u=new r.constructor(r.source,YA.exec(r));return u.lastIndex=r.lastIndex,u},c_=ni?ni.prototype:void 0,f_=c_?c_.valueOf:void 0,KA=function(r){return f_?Object(f_.call(r)):{}},EE=function(r,u){var a=u?kg(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)},qA=function(r,u,a){var f=r.constructor;switch(u){case"[object ArrayBuffer]":return kg(r);case"[object Boolean]":case"[object Date]":return new f(+r);case"[object DataView]":return WA(r,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return EE(r,a);case"[object Map]":return new f;case"[object Number]":case"[object String]":return new f(r);case"[object RegExp]":return $A(r);case"[object Set]":return new f;case"[object Symbol]":return KA(r)}},l_=Object.create,OE=function(){function r(){}return function(u){if(!Do(u))return{};if(l_)return l_(u);r.prototype=u;var a=new r;return r.prototype=void 0,a}}(),wE=function(r){return typeof r.constructor!="function"||rh(r)?{}:OE(nh(r))},ZA=function(r){return yi(r)&&ns(r)=="[object Map]"},p_=Ic&&Ic.isMap,QA=p_?th(p_):ZA,JA=function(r){return yi(r)&&ns(r)=="[object Set]"},d_=Ic&&Ic.isSet,eP=d_?th(d_):JA,un={};un["[object Arguments]"]=un["[object Array]"]=un["[object ArrayBuffer]"]=un["[object DataView]"]=un["[object Boolean]"]=un["[object Date]"]=un["[object Float32Array]"]=un["[object Float64Array]"]=un["[object Int8Array]"]=un["[object Int16Array]"]=un["[object Int32Array]"]=un["[object Map]"]=un["[object Number]"]=un["[object Object]"]=un["[object RegExp]"]=un["[object Set]"]=un["[object String]"]=un["[object Symbol]"]=un["[object Uint8Array]"]=un["[object Uint8ClampedArray]"]=un["[object Uint16Array]"]=un["[object Uint32Array]"]=!0,un["[object Error]"]=un["[object Function]"]=un["[object WeakMap]"]=!1;var xE=function r(u,a,f,o,p,d){var y,g=1&a,E=2&a,_=4&a;if(f&&(y=p?f(u,o,p,d):f(u)),y!==void 0)return y;if(!Do(u))return u;var T=Tn(u);if(T){if(y=VA(u),!g)return vE(u,y)}else{var P=ns(u),A=P=="[object Function]"||P=="[object GeneratorFunction]";if(rs(u))return yE(u,g);if(P=="[object Object]"||P=="[object Arguments]"||A&&!p){if(y=E||A?{}:wE(u),!g)return E?LA(u,CA(y,u)):kA(u,NA(y,u))}else{if(!un[P])return p?u:{};y=qA(u,P,g)}}d||(d=new Nc);var N=d.get(u);if(N)return N;d.set(u,y),eP(u)?u.forEach(function(L){y.add(r(L,a,f,L,u,d))}):QA(u)&&u.forEach(function(L,z){y.set(z,r(L,a,f,z,u,d))});var M=T?void 0:(_?E?BA:mg:E?us:su)(u);return Mg(M||u,function(L,z){M&&(L=u[z=L]),Jd(y,z,r(L,a,f,z,u,d))}),y},tP=function(r){return xE(r,4)},Lg=function(r){return function(){return r}},Bg=function(r){return function(u,a,f){for(var o=-1,p=Object(u),d=f(u),y=d.length;y--;){var g=d[r?y:++o];if(a(p[g],g,p)===!1)break}return u}}(),Fg=function(r,u){return r&&Bg(r,u,su)},oh=function(r,u){return function(a,f){if(a==null)return a;if(!ma(a))return r(a,f);for(var o=a.length,p=u?o:-1,d=Object(a);(u?p--:++p<o)&&f(d[p],p,d)!==!1;);return a}}(Fg),ss=function(r){return r},SE=function(r){return typeof r=="function"?r:ss},TE=function(r,u){return(Tn(r)?Mg:oh)(r,SE(u))},AE=TE,rP=function(r,u){var a=[];return oh(r,function(f,o,p){u(f,o,p)&&a.push(f)}),a},nP=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},oP=function(r){return this.__data__.has(r)};function Pd(r){var u=-1,a=r==null?0:r.length;for(this.__data__=new Zd;++u<a;)this.add(r[u])}Pd.prototype.add=Pd.prototype.push=nP,Pd.prototype.has=oP;var PE=Pd,iP=function(r,u){for(var a=-1,f=r==null?0:r.length;++a<f;)if(u(r[a],a,r))return!0;return!1},jE=function(r,u){return r.has(u)},NE=function(r,u,a,f,o,p){var d=1&a,y=r.length,g=u.length;if(y!=g&&!(d&&g>y))return!1;var E=p.get(r),_=p.get(u);if(E&&_)return E==u&&_==r;var T=-1,P=!0,A=2&a?new PE:void 0;for(p.set(r,u),p.set(u,r);++T<y;){var N=r[T],M=u[T];if(f)var L=d?f(M,N,T,u,r,p):f(N,M,T,r,u,p);if(L!==void 0){if(L)continue;P=!1;break}if(A){if(!iP(u,function(z,$){if(!jE(A,$)&&(N===z||o(N,z,a,f,p)))return A.push($)})){P=!1;break}}else if(N!==M&&!o(N,M,a,f,p)){P=!1;break}}return p.delete(r),p.delete(u),P},aP=function(r){var u=-1,a=Array(r.size);return r.forEach(function(f,o){a[++u]=[o,f]}),a},Gg=function(r){var u=-1,a=Array(r.size);return r.forEach(function(f){a[++u]=f}),a},h_=ni?ni.prototype:void 0,sg=h_?h_.valueOf:void 0,uP=function(r,u,a,f,o,p,d){switch(a){case"[object DataView]":if(r.byteLength!=u.byteLength||r.byteOffset!=u.byteOffset)return!1;r=r.buffer,u=u.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=u.byteLength||!p(new Fd(r),new Fd(u)));case"[object Boolean]":case"[object Date]":case"[object Number]":return kc(+r,+u);case"[object Error]":return r.name==u.name&&r.message==u.message;case"[object RegExp]":case"[object String]":return r==u+"";case"[object Map]":var y=aP;case"[object Set]":var g=1&f;if(y||(y=Gg),r.size!=u.size&&!g)return!1;var E=d.get(r);if(E)return E==u;f|=2,d.set(r,u);var _=NE(y(r),y(u),f,o,p,d);return d.delete(r),_;case"[object Symbol]":if(sg)return sg.call(r)==sg.call(u)}return!1},sP=Object.prototype.hasOwnProperty,cP=function(r,u,a,f,o,p){var d=1&a,y=mg(r),g=y.length;if(g!=mg(u).length&&!d)return!1;for(var E=g;E--;){var _=y[E];if(!(d?_ in u:sP.call(u,_)))return!1}var T=p.get(r),P=p.get(u);if(T&&P)return T==u&&P==r;var A=!0;p.set(r,u),p.set(u,r);for(var N=d;++E<g;){var M=r[_=y[E]],L=u[_];if(f)var z=d?f(L,M,_,u,r,p):f(M,L,_,r,u,p);if(!(z===void 0?M===L||o(M,L,a,f,p):z)){A=!1;break}N||(N=_=="constructor")}if(A&&!N){var $=r.constructor,ye=u.constructor;$==ye||!("constructor"in r)||!("constructor"in u)||typeof $=="function"&&$ instanceof $&&typeof ye=="function"&&ye instanceof ye||(A=!1)}return p.delete(r),p.delete(u),A},y_=Object.prototype.hasOwnProperty,fP=function(r,u,a,f,o,p){var d=Tn(r),y=Tn(u),g=d?"[object Array]":ns(r),E=y?"[object Array]":ns(u),_=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",T=(E=E=="[object Arguments]"?"[object Object]":E)=="[object Object]",P=g==E;if(P&&rs(r)){if(!rs(u))return!1;d=!0,_=!1}if(P&&!_)return p||(p=new Nc),d||Ol(r)?NE(r,u,a,f,o,p):uP(r,u,g,a,f,o,p);if(!(1&a)){var A=_&&y_.call(r,"__wrapped__"),N=T&&y_.call(u,"__wrapped__");if(A||N){var M=A?r.value():r,L=N?u.value():u;return p||(p=new Nc),o(M,L,a,f,p)}}return!!P&&(p||(p=new Nc),cP(r,u,a,f,o,p))},ME=function r(u,a,f,o,p){return u===a||(u==null||a==null||!yi(u)&&!yi(a)?u!=u&&a!=a:fP(u,a,f,o,r,p))},lP=function(r,u,a,f){var o=a.length,p=o,d=!f;if(r==null)return!p;for(r=Object(r);o--;){var y=a[o];if(d&&y[2]?y[1]!==r[y[0]]:!(y[0]in r))return!1}for(;++o<p;){var g=(y=a[o])[0],E=r[g],_=y[1];if(d&&y[2]){if(E===void 0&&!(g in r))return!1}else{var T=new Nc;if(f)var P=f(E,_,g,r,u,T);if(!(P===void 0?ME(_,E,3,f,T):P))return!1}}return!0},RE=function(r){return r==r&&!Do(r)},pP=function(r){for(var u=su(r),a=u.length;a--;){var f=u[a],o=r[f];u[a]=[f,o,RE(o)]}return u},DE=function(r,u){return function(a){return a!=null&&a[r]===u&&(u!==void 0||r in Object(a))}},dP=function(r){var u=pP(r);return u.length==1&&u[0][2]?DE(u[0][0],u[0][1]):function(a){return a===r||lP(a,r,u)}},os=function(r){return typeof r=="symbol"||yi(r)&&uu(r)=="[object Symbol]"},hP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yP=/^\w*$/,Ug=function(r,u){if(Tn(r))return!1;var a=typeof r;return!(a!="number"&&a!="symbol"&&a!="boolean"&&r!=null&&!os(r))||yP.test(r)||!hP.test(r)||u!=null&&r in Object(u)};function zg(r,u){if(typeof r!="function"||u!=null&&typeof u!="function")throw new TypeError("Expected a function");var a=function(){var f=arguments,o=u?u.apply(this,f):f[0],p=a.cache;if(p.has(o))return p.get(o);var d=r.apply(this,f);return a.cache=p.set(o,d)||p,d};return a.cache=new(zg.Cache||Zd),a}zg.Cache=Zd;var vP=zg,gP=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mP=/\\(\\)?/g,bP=function(r){var u=vP(r,function(f){return a.size===500&&a.clear(),f}),a=u.cache;return u}(function(r){var u=[];return r.charCodeAt(0)===46&&u.push(""),r.replace(gP,function(a,f,o,p){u.push(o?p.replace(mP,"$1"):f||a)}),u}),Rc=function(r,u){for(var a=-1,f=r==null?0:r.length,o=Array(f);++a<f;)o[a]=u(r[a],a,r);return o},v_=ni?ni.prototype:void 0,g_=v_?v_.toString:void 0,_P=function r(u){if(typeof u=="string")return u;if(Tn(u))return Rc(u,r)+"";if(os(u))return g_?g_.call(u):"";var a=u+"";return a=="0"&&1/u==-1/0?"-0":a},CE=function(r){return r==null?"":_P(r)},ih=function(r,u){return Tn(r)?r:Ug(r,u)?[r]:bP(CE(r))},wl=function(r){if(typeof r=="string"||os(r))return r;var u=r+"";return u=="0"&&1/r==-1/0?"-0":u},ah=function(r,u){for(var a=0,f=(u=ih(u,r)).length;r!=null&&a<f;)r=r[wl(u[a++])];return a&&a==f?r:void 0},EP=function(r,u,a){var f=r==null?void 0:ah(r,u);return f===void 0?a:f},OP=function(r,u){return r!=null&&u in Object(r)},IE=function(r,u,a){for(var f=-1,o=(u=ih(u,r)).length,p=!1;++f<o;){var d=wl(u[f]);if(!(p=r!=null&&a(r,d)))break;r=r[d]}return p||++f!=o?p:!!(o=r==null?0:r.length)&&Rg(o)&&eh(d,o)&&(Tn(r)||Cc(r))},kE=function(r,u){return r!=null&&IE(r,u,OP)},wP=function(r,u){return Ug(r)&&RE(u)?DE(wl(r),u):function(a){var f=EP(a,r);return f===void 0&&f===u?kE(a,r):ME(u,f,3)}},LE=function(r){return function(u){return u==null?void 0:u[r]}},xP=function(r){return function(u){return ah(u,r)}},SP=function(r){return Ug(r)?LE(wl(r)):xP(r)},ba=function(r){return typeof r=="function"?r:r==null?ss:typeof r=="object"?Tn(r)?wP(r[0],r[1]):dP(r):SP(r)},BE=function(r,u){return(Tn(r)?gE:rP)(r,ba(u))},TP=Object.prototype.hasOwnProperty,AP=function(r,u){return r!=null&&TP.call(r,u)},FE=function(r,u){return r!=null&&IE(r,u,AP)},PP=Object.prototype.hasOwnProperty,jP=function(r){if(r==null)return!0;if(ma(r)&&(Tn(r)||typeof r=="string"||typeof r.splice=="function"||rs(r)||Ol(r)||Cc(r)))return!r.length;var u=ns(r);if(u=="[object Map]"||u=="[object Set]")return!r.size;if(rh(r))return!Dg(r).length;for(var a in r)if(PP.call(r,a))return!1;return!0},GE=function(r){return r===void 0},UE=function(r,u){var a=-1,f=ma(r)?Array(r.length):[];return oh(r,function(o,p,d){f[++a]=u(o,p,d)}),f},zE=function(r,u){return(Tn(r)?Rc:UE)(r,ba(u))},NP=function(r,u,a,f){var o=-1,p=r==null?0:r.length;for(f&&p&&(a=r[++o]);++o<p;)a=u(a,r[o],o,r);return a},MP=function(r,u,a,f,o){return o(r,function(p,d,y){a=f?(f=!1,p):u(a,p,d,y)}),a},HE=function(r,u,a){var f=Tn(r)?NP:MP,o=arguments.length<3;return f(r,ba(u),a,o,oh)},RP=function(r){return typeof r=="string"||!Tn(r)&&yi(r)&&uu(r)=="[object String]"},DP=LE("length"),CP=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),IP=function(r){return CP.test(r)},kP="[\\ud800-\\udfff]",Og="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",wg="\\ud83c[\\udffb-\\udfff]",XE="[^\\ud800-\\udfff]",VE="(?:\\ud83c[\\udde6-\\uddff]){2}",WE="[\\ud800-\\udbff][\\udc00-\\udfff]",m_="(?:"+Og+"|"+wg+")?",LP="[\\ufe0e\\ufe0f]?"+m_+("(?:\\u200d(?:"+[XE,VE,WE].join("|")+")[\\ufe0e\\ufe0f]?"+m_+")*"),BP="(?:"+[XE+Og+"?",Og,VE,WE,kP].join("|")+")",b_=RegExp(wg+"(?="+wg+")|"+BP+LP,"g"),FP=function(r){for(var u=b_.lastIndex=0;b_.test(r);)++u;return u},GP=function(r){return IP(r)?FP(r):DP(r)},UP=function(r){if(r==null)return 0;if(ma(r))return RP(r)?GP(r):r.length;var u=ns(r);return u=="[object Map]"||u=="[object Set]"?r.size:Dg(r).length},zP=function(r,u,a){var f=Tn(r),o=f||rs(r)||Ol(r);if(u=ba(u),a==null){var p=r&&r.constructor;a=o?f?new p:[]:Do(r)&&_l(p)?OE(nh(r)):{}}return(o?Mg:Fg)(r,function(d,y,g){return u(a,d,y,g)}),a},__=ni?ni.isConcatSpreadable:void 0,HP=function(r){return Tn(r)||Cc(r)||!!(__&&r&&r[__])},Hg=function r(u,a,f,o,p){var d=-1,y=u.length;for(f||(f=HP),p||(p=[]);++d<y;){var g=u[d];a>0&&f(g)?a>1?r(g,a-1,f,o,p):Ig(p,g):o||(p[p.length]=g)}return p},XP=function(r,u,a){switch(a.length){case 0:return r.call(u);case 1:return r.call(u,a[0]);case 2:return r.call(u,a[0],a[1]);case 3:return r.call(u,a[0],a[1],a[2])}return r.apply(u,a)},E_=Math.max,YE=function(r,u,a){return u=E_(u===void 0?r.length-1:u,0),function(){for(var f=arguments,o=-1,p=E_(f.length-u,0),d=Array(p);++o<p;)d[o]=f[u+o];o=-1;for(var y=Array(u+1);++o<u;)y[o]=f[o];return y[u]=a(d),XP(r,this,y)}},VP=Bd?function(r,u){return Bd(r,"toString",{configurable:!0,enumerable:!1,value:Lg(u),writable:!0})}:ss,WP=Date.now,$E=function(r){var u=0,a=0;return function(){var f=WP(),o=16-(f-a);if(a=f,o>0){if(++u>=800)return arguments[0]}else u=0;return r.apply(void 0,arguments)}}(VP),uh=function(r,u){return $E(YE(r,u,ss),r+"")},KE=function(r,u,a,f){for(var o=r.length,p=a+(f?1:-1);f?p--:++p<o;)if(u(r[p],p,r))return p;return-1},YP=function(r){return r!=r},$P=function(r,u,a){for(var f=a-1,o=r.length;++f<o;)if(r[f]===u)return f;return-1},KP=function(r,u,a){return u==u?$P(r,u,a):KE(r,YP,a)},qP=function(r,u){return!!(r!=null&&r.length)&&KP(r,u,0)>-1},ZP=function(r,u,a){for(var f=-1,o=r==null?0:r.length;++f<o;)if(a(u,r[f]))return!0;return!1},QP=function(){},JP=Mc&&1/Gg(new Mc([,-0]))[1]==1/0?function(r){return new Mc(r)}:QP,ej=function(r,u,a){var f=-1,o=qP,p=r.length,d=!0,y=[],g=y;if(a)d=!1,o=ZP;else if(p>=200){var E=u?null:JP(r);if(E)return Gg(E);d=!1,o=jE,g=new PE}else g=u?[]:y;e:for(;++f<p;){var _=r[f],T=u?u(_):_;if(_=a||_!==0?_:0,d&&T==T){for(var P=g.length;P--;)if(g[P]===T)continue e;u&&g.push(T),y.push(_)}else o(g,T,a)||(g!==y&&g.push(T),y.push(_))}return y},qE=function(r){return yi(r)&&ma(r)},tj=uh(function(r){return ej(Hg(r,1,qE,!0))}),rj=function(r,u){return Rc(u,function(a){return r[a]})},Gd,ZE=function(r){return r==null?[]:rj(r,su(r))};try{Gd={clone:tP,constant:Lg,each:AE,filter:BE,has:FE,isArray:Tn,isEmpty:jP,isFunction:_l,isUndefined:GE,keys:su,map:zE,reduce:HE,size:UP,transform:zP,union:tj,values:ZE}}catch{}Gd||(Gd=window._);var Lt=Gd,Xg=Lr;function Lr(r){this._isDirected=!Lt.has(r,"directed")||r.directed,this._isMultigraph=!!Lt.has(r,"multigraph")&&r.multigraph,this._isCompound=!!Lt.has(r,"compound")&&r.compound,this._label=void 0,this._defaultNodeLabelFn=Lt.constant(void 0),this._defaultEdgeLabelFn=Lt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function O_(r,u){r[u]?r[u]++:r[u]=1}function w_(r,u){--r[u]||delete r[u]}function ll(r,u,a,f){var o=""+u,p=""+a;if(!r&&o>p){var d=o;o=p,p=d}return o+""+p+""+(Lt.isUndefined(f)?"\0":f)}function nj(r,u,a,f){var o=""+u,p=""+a;if(!r&&o>p){var d=o;o=p,p=d}var y={v:o,w:p};return f&&(y.name=f),y}function cg(r,u){return ll(r,u.v,u.w,u.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(r){return this._label=r,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(r){return Lt.isFunction(r)||(r=Lt.constant(r)),this._defaultNodeLabelFn=r,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return Lt.keys(this._nodes)},Lr.prototype.sources=function(){var r=this;return Lt.filter(this.nodes(),function(u){return Lt.isEmpty(r._in[u])})},Lr.prototype.sinks=function(){var r=this;return Lt.filter(this.nodes(),function(u){return Lt.isEmpty(r._out[u])})},Lr.prototype.setNodes=function(r,u){var a=arguments,f=this;return Lt.each(r,function(o){a.length>1?f.setNode(o,u):f.setNode(o)}),this},Lr.prototype.setNode=function(r,u){return Lt.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=u),this):(this._nodes[r]=arguments.length>1?u:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]="\0",this._children[r]={},this._children["\0"][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)},Lr.prototype.node=function(r){return this._nodes[r]},Lr.prototype.hasNode=function(r){return Lt.has(this._nodes,r)},Lr.prototype.removeNode=function(r){var u=this;if(Lt.has(this._nodes,r)){var a=function(f){u.removeEdge(u._edgeObjs[f])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],Lt.each(this.children(r),function(f){u.setParent(f)}),delete this._children[r]),Lt.each(Lt.keys(this._in[r]),a),delete this._in[r],delete this._preds[r],Lt.each(Lt.keys(this._out[r]),a),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this},Lr.prototype.setParent=function(r,u){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Lt.isUndefined(u))u="\0";else{for(var a=u+="";!Lt.isUndefined(a);a=this.parent(a))if(a===r)throw new Error("Setting "+u+" as parent of "+r+" would create a cycle");this.setNode(u)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=u,this._children[u][r]=!0,this},Lr.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]},Lr.prototype.parent=function(r){if(this._isCompound){var u=this._parent[r];if(u!=="\0")return u}},Lr.prototype.children=function(r){if(Lt.isUndefined(r)&&(r="\0"),this._isCompound){var u=this._children[r];if(u)return Lt.keys(u)}else{if(r==="\0")return this.nodes();if(this.hasNode(r))return[]}},Lr.prototype.predecessors=function(r){var u=this._preds[r];if(u)return Lt.keys(u)},Lr.prototype.successors=function(r){var u=this._sucs[r];if(u)return Lt.keys(u)},Lr.prototype.neighbors=function(r){var u=this.predecessors(r);if(u)return Lt.union(u,this.successors(r))},Lr.prototype.isLeaf=function(r){return(this.isDirected()?this.successors(r):this.neighbors(r)).length===0},Lr.prototype.filterNodes=function(r){var u=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});u.setGraph(this.graph());var a=this;Lt.each(this._nodes,function(p,d){r(d)&&u.setNode(d,p)}),Lt.each(this._edgeObjs,function(p){u.hasNode(p.v)&&u.hasNode(p.w)&&u.setEdge(p,a.edge(p))});var f={};function o(p){var d=a.parent(p);return d===void 0||u.hasNode(d)?(f[p]=d,d):d in f?f[d]:o(d)}return this._isCompound&&Lt.each(u.nodes(),function(p){u.setParent(p,o(p))}),u},Lr.prototype.setDefaultEdgeLabel=function(r){return Lt.isFunction(r)||(r=Lt.constant(r)),this._defaultEdgeLabelFn=r,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return Lt.values(this._edgeObjs)},Lr.prototype.setPath=function(r,u){var a=this,f=arguments;return Lt.reduce(r,function(o,p){return f.length>1?a.setEdge(o,p,u):a.setEdge(o,p),p}),this},Lr.prototype.setEdge=function(){var r,u,a,f,o=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(r=p.v,u=p.w,a=p.name,arguments.length===2&&(f=arguments[1],o=!0)):(r=p,u=arguments[1],a=arguments[3],arguments.length>2&&(f=arguments[2],o=!0)),r=""+r,u=""+u,Lt.isUndefined(a)||(a=""+a);var d=ll(this._isDirected,r,u,a);if(Lt.has(this._edgeLabels,d))return o&&(this._edgeLabels[d]=f),this;if(!Lt.isUndefined(a)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(u),this._edgeLabels[d]=o?f:this._defaultEdgeLabelFn(r,u,a);var y=nj(this._isDirected,r,u,a);return r=y.v,u=y.w,Object.freeze(y),this._edgeObjs[d]=y,O_(this._preds[u],r),O_(this._sucs[r],u),this._in[u][d]=y,this._out[r][d]=y,this._edgeCount++,this},Lr.prototype.edge=function(r,u,a){var f=arguments.length===1?cg(this._isDirected,arguments[0]):ll(this._isDirected,r,u,a);return this._edgeLabels[f]},Lr.prototype.hasEdge=function(r,u,a){var f=arguments.length===1?cg(this._isDirected,arguments[0]):ll(this._isDirected,r,u,a);return Lt.has(this._edgeLabels,f)},Lr.prototype.removeEdge=function(r,u,a){var f=arguments.length===1?cg(this._isDirected,arguments[0]):ll(this._isDirected,r,u,a),o=this._edgeObjs[f];return o&&(r=o.v,u=o.w,delete this._edgeLabels[f],delete this._edgeObjs[f],w_(this._preds[u],r),w_(this._sucs[r],u),delete this._in[u][f],delete this._out[r][f],this._edgeCount--),this},Lr.prototype.inEdges=function(r,u){var a=this._in[r];if(a){var f=Lt.values(a);return u?Lt.filter(f,function(o){return o.v===u}):f}},Lr.prototype.outEdges=function(r,u){var a=this._out[r];if(a){var f=Lt.values(a);return u?Lt.filter(f,function(o){return o.w===u}):f}},Lr.prototype.nodeEdges=function(r,u){var a=this.inEdges(r,u);if(a)return a.concat(this.outEdges(r,u))};var x_={Graph:Xg,version:"2.1.8"},oj={write:function(r){var u={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:ij(r),edges:aj(r)};return Lt.isUndefined(r.graph())||(u.value=Lt.clone(r.graph())),u},read:function(r){var u=new Xg(r.options).setGraph(r.value);return Lt.each(r.nodes,function(a){u.setNode(a.v,a.value),a.parent&&u.setParent(a.v,a.parent)}),Lt.each(r.edges,function(a){u.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),u}};function ij(r){return Lt.map(r.nodes(),function(u){var a=r.node(u),f=r.parent(u),o={v:u};return Lt.isUndefined(a)||(o.value=a),Lt.isUndefined(f)||(o.parent=f),o})}function aj(r){return Lt.map(r.edges(),function(u){var a=r.edge(u),f={v:u.v,w:u.w};return Lt.isUndefined(u.name)||(f.name=u.name),Lt.isUndefined(a)||(f.value=a),f})}var uj=function(r){var u,a={},f=[];function o(p){Lt.has(a,p)||(a[p]=!0,u.push(p),Lt.each(r.successors(p),o),Lt.each(r.predecessors(p),o))}return Lt.each(r.nodes(),function(p){u=[],o(p),u.length&&f.push(u)}),f},QE=ri;function ri(){this._arr=[],this._keyIndices={}}ri.prototype.size=function(){return this._arr.length},ri.prototype.keys=function(){return this._arr.map(function(r){return r.key})},ri.prototype.has=function(r){return Lt.has(this._keyIndices,r)},ri.prototype.priority=function(r){var u=this._keyIndices[r];if(u!==void 0)return this._arr[u].priority},ri.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ri.prototype.add=function(r,u){var a=this._keyIndices;if(r=String(r),!Lt.has(a,r)){var f=this._arr,o=f.length;return a[r]=o,f.push({key:r,priority:u}),this._decrease(o),!0}return!1},ri.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},ri.prototype.decrease=function(r,u){var a=this._keyIndices[r];if(u>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+u);this._arr[a].priority=u,this._decrease(a)},ri.prototype._heapify=function(r){var u=this._arr,a=2*r,f=a+1,o=r;a<u.length&&(o=u[a].priority<u[o].priority?a:o,f<u.length&&(o=u[f].priority<u[o].priority?f:o),o!==r&&(this._swap(r,o),this._heapify(o)))},ri.prototype._decrease=function(r){for(var u,a=this._arr,f=a[r].priority;r!==0&&!(a[u=r>>1].priority<f);)this._swap(r,u),r=u},ri.prototype._swap=function(r,u){var a=this._arr,f=this._keyIndices,o=a[r],p=a[u];a[r]=p,a[u]=o,f[p.key]=r,f[o.key]=u};var JE=function(r,u,a,f){return function(o,p,d,y){var g,E,_={},T=new QE,P=function(A){var N=A.v!==g?A.v:A.w,M=_[N],L=d(A),z=E.distance+L;if(L<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+A+" Weight: "+L);z<M.distance&&(M.distance=z,M.predecessor=g,T.decrease(N,z))};for(o.nodes().forEach(function(A){var N=A===p?0:Number.POSITIVE_INFINITY;_[A]={distance:N},T.add(A,N)});T.size()>0&&(g=T.removeMin(),(E=_[g]).distance!==Number.POSITIVE_INFINITY);)y(g).forEach(P);return _}(r,String(u),a||sj,f||function(o){return r.outEdges(o)})},sj=Lt.constant(1),cj=function(r,u,a){return Lt.transform(r.nodes(),function(f,o){f[o]=JE(r,o,u,a)},{})},eO=function(r){var u=0,a=[],f={},o=[];function p(d){var y=f[d]={onStack:!0,lowlink:u,index:u++};if(a.push(d),r.successors(d).forEach(function(_){Lt.has(f,_)?f[_].onStack&&(y.lowlink=Math.min(y.lowlink,f[_].index)):(p(_),y.lowlink=Math.min(y.lowlink,f[_].lowlink))}),y.lowlink===y.index){var g,E=[];do g=a.pop(),f[g].onStack=!1,E.push(g);while(d!==g);o.push(E)}}return r.nodes().forEach(function(d){Lt.has(f,d)||p(d)}),o},fj=function(r){return Lt.filter(eO(r),function(u){return u.length>1||u.length===1&&r.hasEdge(u[0],u[0])})},lj=function(r,u,a){return function(f,o,p){var d={},y=f.nodes();return y.forEach(function(g){d[g]={},d[g][g]={distance:0},y.forEach(function(E){g!==E&&(d[g][E]={distance:Number.POSITIVE_INFINITY})}),p(g).forEach(function(E){var _=E.v===g?E.w:E.v,T=o(E);d[g][_]={distance:T,predecessor:g}})}),y.forEach(function(g){var E=d[g];y.forEach(function(_){var T=d[_];y.forEach(function(P){var A=T[g],N=E[P],M=T[P],L=A.distance+N.distance;L<M.distance&&(M.distance=L,M.predecessor=N.predecessor)})})}),d}(r,u||pj,a||function(f){return r.outEdges(f)})},pj=Lt.constant(1),fg=tO;function tO(r){var u={},a={},f=[];if(Lt.each(r.sinks(),function o(p){if(Lt.has(a,p))throw new Ud;Lt.has(u,p)||(a[p]=!0,u[p]=!0,Lt.each(r.predecessors(p),o),delete a[p],f.push(p))}),Lt.size(u)!==r.nodeCount())throw new Ud;return f}function Ud(){}tO.CycleException=Ud,Ud.prototype=new Error;var S_=function(r,u,a){Lt.isArray(u)||(u=[u]);var f=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],p={};return Lt.each(u,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);rO(r,d,a==="post",p,f,o)}),o};function rO(r,u,a,f,o,p){Lt.has(f,u)||(f[u]=!0,a||p.push(u),Lt.each(o(u),function(d){rO(r,d,a,f,o,p)}),a&&p.push(u))}var zd,dj={Graph:x_.Graph,json:oj,alg:{components:uj,dijkstra:JE,dijkstraAll:cj,findCycles:fj,floydWarshall:lj,isAcyclic:function(r){try{fg(r)}catch(u){if(u instanceof fg.CycleException)return!1;throw u}return!0},postorder:function(r,u){return S_(r,u,"post")},preorder:function(r,u){return S_(r,u,"pre")},prim:function(r,u){var a,f=new Xg,o={},p=new QE;function d(g){var E=g.v===a?g.w:g.v,_=p.priority(E);if(_!==void 0){var T=u(g);T<_&&(o[E]=a,p.decrease(E,T))}}if(r.nodeCount()===0)return f;Lt.each(r.nodes(),function(g){p.add(g,Number.POSITIVE_INFINITY),f.setNode(g)}),p.decrease(r.nodes()[0],0);for(var y=!1;p.size()>0;){if(a=p.removeMin(),Lt.has(o,a))f.setEdge(a,o[a]);else{if(y)throw new Error("Input graph is not connected: "+r);y=!0}r.nodeEdges(a).forEach(d)}return f},tarjan:eO,topsort:fg},version:x_.version};try{zd=dj}catch{}zd||(zd=window.graphlib);var Hi=zd,hj=function(r){return xE(r,5)},ml=function(r,u,a){if(!Do(a))return!1;var f=typeof u;return!!(f=="number"?ma(a)&&eh(u,a.length):f=="string"&&u in a)&&kc(a[u],r)},nO=Object.prototype,yj=nO.hasOwnProperty,vj=uh(function(r,u){r=Object(r);var a=-1,f=u.length,o=f>2?u[2]:void 0;for(o&&ml(u[0],u[1],o)&&(f=1);++a<f;)for(var p=u[a],d=us(p),y=-1,g=d.length;++y<g;){var E=d[y],_=r[E];(_===void 0||kc(_,nO[E])&&!yj.call(r,E))&&(r[E]=p[E])}return r}),gj=function(r){return function(u,a,f){var o=Object(u);if(!ma(u)){var p=ba(a);u=su(u),a=function(y){return p(o[y],y,o)}}var d=r(u,a,f);return d>-1?o[p?u[d]:d]:void 0}},mj=/^\s+|\s+$/g,bj=/^[-+]0x[0-9a-f]+$/i,_j=/^0b[01]+$/i,Ej=/^0o[0-7]+$/i,Oj=parseInt,wj=function(r){if(typeof r=="number")return r;if(os(r))return NaN;if(Do(r)){var u=typeof r.valueOf=="function"?r.valueOf():r;r=Do(u)?u+"":u}if(typeof r!="string")return r===0?r:+r;r=r.replace(mj,"");var a=_j.test(r);return a||Ej.test(r)?Oj(r.slice(2),a?2:8):bj.test(r)?NaN:+r},jd=function(r){return r?(r=wj(r))===1/0||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:r===0?r:0},xj=function(r){var u=jd(r),a=u%1;return u==u?a?u-a:u:0},Sj=Math.max,Tj=gj(function(r,u,a){var f=r==null?0:r.length;if(!f)return-1;var o=a==null?0:xj(a);return o<0&&(o=Sj(f+o,0)),KE(r,ba(u),o)}),oO=function(r){return r!=null&&r.length?Hg(r,1):[]},Aj=function(r,u){return r==null?r:Bg(r,SE(u),us)},Pj=function(r){var u=r==null?0:r.length;return u?r[u-1]:void 0},jj=function(r,u){var a={};return u=ba(u),Fg(r,function(f,o,p){Qd(a,o,u(f,o,p))}),a},Vg=function(r,u,a){for(var f=-1,o=r.length;++f<o;){var p=r[f],d=u(p);if(d!=null&&(y===void 0?d==d&&!os(d):a(d,y)))var y=d,g=p}return g},Nj=function(r,u){return r>u},Mj=function(r){return r&&r.length?Vg(r,ss,Nj):void 0},xg=function(r,u,a){(a!==void 0&&!kc(r[u],a)||a===void 0&&!(u in r))&&Qd(r,u,a)},Rj=Function.prototype,Dj=Object.prototype,iO=Rj.toString,Cj=Dj.hasOwnProperty,Ij=iO.call(Object),kj=function(r){if(!yi(r)||uu(r)!="[object Object]")return!1;var u=nh(r);if(u===null)return!0;var a=Cj.call(u,"constructor")&&u.constructor;return typeof a=="function"&&a instanceof a&&iO.call(a)==Ij},Sg=function(r,u){if((u!=="constructor"||typeof r[u]!="function")&&u!="__proto__")return r[u]},Lj=function(r){return El(r,us(r))},Bj=function(r,u,a,f,o,p,d){var y=Sg(r,a),g=Sg(u,a),E=d.get(g);if(E)xg(r,a,E);else{var _=p?p(y,g,a+"",r,u,d):void 0,T=_===void 0;if(T){var P=Tn(g),A=!P&&rs(g),N=!P&&!A&&Ol(g);_=g,P||A||N?Tn(y)?_=y:qE(y)?_=vE(y):A?(T=!1,_=yE(g,!0)):N?(T=!1,_=EE(g,!0)):_=[]:kj(g)||Cc(g)?(_=y,Cc(y)?_=Lj(y):Do(y)&&!_l(y)||(_=wE(g))):T=!1}T&&(d.set(g,_),o(_,g,f,p,d),d.delete(g)),xg(r,a,_)}},Fj=function r(u,a,f,o,p){u!==a&&Bg(a,function(d,y){if(p||(p=new Nc),Do(d))Bj(u,a,y,f,r,o,p);else{var g=o?o(Sg(u,y),d,y+"",u,a,p):void 0;g===void 0&&(g=d),xg(u,y,g)}},us)},Gj=function(r){return uh(function(u,a){var f=-1,o=a.length,p=o>1?a[o-1]:void 0,d=o>2?a[2]:void 0;for(p=r.length>3&&typeof p=="function"?(o--,p):void 0,d&&ml(a[0],a[1],d)&&(p=o<3?void 0:p,o=1),u=Object(u);++f<o;){var y=a[f];y&&r(u,y,f,p)}return u})}(function(r,u,a){Fj(r,u,a)}),aO=function(r,u){return r<u},Uj=function(r){return r&&r.length?Vg(r,ss,aO):void 0},zj=function(r,u){return r&&r.length?Vg(r,ba(u),aO):void 0},Hj=function(){return vi.Date.now()},Xj=function(r,u,a,f){if(!Do(r))return r;for(var o=-1,p=(u=ih(u,r)).length,d=p-1,y=r;y!=null&&++o<p;){var g=wl(u[o]),E=a;if(g==="__proto__"||g==="constructor"||g==="prototype")return r;if(o!=d){var _=y[g];(E=f?f(_,g,y):void 0)===void 0&&(E=Do(_)?_:eh(u[o+1])?[]:{})}Jd(y,g,E),y=y[g]}return r},Vj=function(r,u,a){for(var f=-1,o=u.length,p={};++f<o;){var d=u[f],y=ah(r,d);a(y,d)&&Xj(p,ih(d,r),y)}return p},Wj=function(r,u){return Vj(r,u,function(a,f){return kE(r,f)})},Yj=function(r){return $E(YE(r,void 0,oO),r+"")}(function(r,u){return r==null?{}:Wj(r,u)}),$j=Math.ceil,Kj=Math.max,qj=function(r,u,a,f){for(var o=-1,p=Kj($j((u-r)/(a||1)),0),d=Array(p);p--;)d[f?p:++o]=r,r+=a;return d},Zj=function(r){return function(u,a,f){return f&&typeof f!="number"&&ml(u,a,f)&&(a=f=void 0),u=jd(u),a===void 0?(a=u,u=0):a=jd(a),f=f===void 0?u<a?1:-1:jd(f),qj(u,a,f,r)}}(),Qj=function(r,u){var a=r.length;for(r.sort(u);a--;)r[a]=r[a].value;return r},Jj=function(r,u){if(r!==u){var a=r!==void 0,f=r===null,o=r==r,p=os(r),d=u!==void 0,y=u===null,g=u==u,E=os(u);if(!y&&!E&&!p&&r>u||p&&d&&g&&!y&&!E||f&&d&&g||!a&&g||!o)return 1;if(!f&&!p&&!E&&r<u||E&&a&&o&&!f&&!p||y&&a&&o||!d&&o||!g)return-1}return 0},eN=function(r,u,a){for(var f=-1,o=r.criteria,p=u.criteria,d=o.length,y=a.length;++f<d;){var g=Jj(o[f],p[f]);if(g)return f>=y?g:g*(a[f]=="desc"?-1:1)}return r.index-u.index},tN=function(r,u,a){u=u.length?Rc(u,function(p){return Tn(p)?function(d){return ah(d,p.length===1?p[0]:p)}:p}):[ss];var f=-1;u=Rc(u,th(ba));var o=UE(r,function(p,d,y){return{criteria:Rc(u,function(g){return g(p)}),index:++f,value:p}});return Qj(o,function(p,d){return eN(p,d,a)})},rN=uh(function(r,u){if(r==null)return[];var a=u.length;return a>1&&ml(r,u[0],u[1])?u=[]:a>2&&ml(u[0],u[1],u[2])&&(u=[u[0]]),tN(r,Hg(u,1),[])}),nN=0,oN=function(r){var u=++nN;return CE(r)+u},iN=function(r,u,a){for(var f=-1,o=r.length,p=u.length,d={};++f<o;){var y=f<p?u[f]:void 0;a(d,r[f],y)}return d},Hd,aN=function(r,u){return iN(r||[],u||[],Jd)};try{Hd={cloneDeep:hj,constant:Lg,defaults:vj,each:AE,filter:BE,find:Tj,flatten:oO,forEach:TE,forIn:Aj,has:FE,isUndefined:GE,last:Pj,map:zE,mapValues:jj,max:Mj,merge:Gj,min:Uj,minBy:zj,now:Hj,pick:Yj,range:Zj,reduce:HE,sortBy:rN,uniqueId:oN,values:ZE,zipObject:aN}}catch{}Hd||(Hd=window._);var uN=Hd;Hi.Graph;uN.constant(1);Hi.Graph;Hi.Graph;Hi.alg.preorder;Hi.alg.postorder;Hi.Graph;Hi.Graph;Hi.Graph;Hi.Graph;Hi.Graph;function bl(r){return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},bl(r)}function sN(r,u){if(bl(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var f=a.call(r,u||"default");if(bl(f)!=="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(r)}function cN(r){var u=sN(r,"string");return bl(u)==="symbol"?u:String(u)}function Mt(r,u,a){return u=cN(u),u in r?Object.defineProperty(r,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[u]=a,r}var fN=typeof fl=="object"&&fl&&fl.Object===Object&&fl,uO=fN,lN=uO,pN=typeof self=="object"&&self&&self.Object===Object&&self,dN=lN||pN||Function("return this")(),hN=dN,yN=hN,vN=yN.Symbol,sO=vN,T_=sO;T_&&T_.toStringTag;var A_=sO;A_&&A_.toStringTag;var Xd={exports:{}};Xd.exports;(function(r,u){var a=uO,f=u&&!u.nodeType&&u,o=f&&!0&&r&&!r.nodeType&&r,p=o&&o.exports===f,d=p&&a.process,y=function(){try{var g=o&&o.require&&o.require("util").types;return g||d&&d.binding&&d.binding("util")}catch{}}();r.exports=y})(Xd,Xd.exports);var gN=Xd.exports,P_=gN;P_&&P_.isTypedArray;var cO={exports:{}},fO={exports:{}};(function(r){function u(a){return r.exports=u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},r.exports.__esModule=!0,r.exports.default=r.exports,u(a)}r.exports=u,r.exports.__esModule=!0,r.exports.default=r.exports})(fO);var mN=fO.exports;(function(r){var u=mN.default;function a(){r.exports=a=function(){return f},r.exports.__esModule=!0,r.exports.default=r.exports;var f={},o=Object.prototype,p=o.hasOwnProperty,d=Object.defineProperty||function(oe,ue,Ne){oe[ue]=Ne.value},y=typeof Symbol=="function"?Symbol:{},g=y.iterator||"@@iterator",E=y.asyncIterator||"@@asyncIterator",_=y.toStringTag||"@@toStringTag";function T(oe,ue,Ne){return Object.defineProperty(oe,ue,{value:Ne,enumerable:!0,configurable:!0,writable:!0}),oe[ue]}try{T({},"")}catch{T=function(Ne,Re,se){return Ne[Re]=se}}function P(oe,ue,Ne,Re){var se=ue&&ue.prototype instanceof M?ue:M,je=Object.create(se.prototype),He=new q(Re||[]);return d(je,"_invoke",{value:W(oe,Ne,He)}),je}function A(oe,ue,Ne){try{return{type:"normal",arg:oe.call(ue,Ne)}}catch(Re){return{type:"throw",arg:Re}}}f.wrap=P;var N={};function M(){}function L(){}function z(){}var $={};T($,g,function(){return this});var ye=Object.getPrototypeOf,Te=ye&&ye(ye(Oe([])));Te&&Te!==o&&p.call(Te,g)&&($=Te);var fe=z.prototype=M.prototype=Object.create($);function ae(oe){["next","throw","return"].forEach(function(ue){T(oe,ue,function(Ne){return this._invoke(ue,Ne)})})}function pe(oe,ue){function Ne(se,je,He,ft){var Pt=A(oe[se],oe,je);if(Pt.type!=="throw"){var Yt=Pt.arg,bt=Yt.value;return bt&&u(bt)=="object"&&p.call(bt,"__await")?ue.resolve(bt.__await).then(function(xt){Ne("next",xt,He,ft)},function(xt){Ne("throw",xt,He,ft)}):ue.resolve(bt).then(function(xt){Yt.value=xt,He(Yt)},function(xt){return Ne("throw",xt,He,ft)})}ft(Pt.arg)}var Re;d(this,"_invoke",{value:function(je,He){function ft(){return new ue(function(Pt,Yt){Ne(je,He,Pt,Yt)})}return Re=Re?Re.then(ft,ft):ft()}})}function W(oe,ue,Ne){var Re="suspendedStart";return function(se,je){if(Re==="executing")throw new Error("Generator is already running");if(Re==="completed"){if(se==="throw")throw je;return Ge()}for(Ne.method=se,Ne.arg=je;;){var He=Ne.delegate;if(He){var ft=F(He,Ne);if(ft){if(ft===N)continue;return ft}}if(Ne.method==="next")Ne.sent=Ne._sent=Ne.arg;else if(Ne.method==="throw"){if(Re==="suspendedStart")throw Re="completed",Ne.arg;Ne.dispatchException(Ne.arg)}else Ne.method==="return"&&Ne.abrupt("return",Ne.arg);Re="executing";var Pt=A(oe,ue,Ne);if(Pt.type==="normal"){if(Re=Ne.done?"completed":"suspendedYield",Pt.arg===N)continue;return{value:Pt.arg,done:Ne.done}}Pt.type==="throw"&&(Re="completed",Ne.method="throw",Ne.arg=Pt.arg)}}}function F(oe,ue){var Ne=ue.method,Re=oe.iterator[Ne];if(Re===void 0)return ue.delegate=null,Ne==="throw"&&oe.iterator.return&&(ue.method="return",ue.arg=void 0,F(oe,ue),ue.method==="throw")||Ne!=="return"&&(ue.method="throw",ue.arg=new TypeError("The iterator does not provide a '"+Ne+"' method")),N;var se=A(Re,oe.iterator,ue.arg);if(se.type==="throw")return ue.method="throw",ue.arg=se.arg,ue.delegate=null,N;var je=se.arg;return je?je.done?(ue[oe.resultName]=je.value,ue.next=oe.nextLoc,ue.method!=="return"&&(ue.method="next",ue.arg=void 0),ue.delegate=null,N):je:(ue.method="throw",ue.arg=new TypeError("iterator result is not an object"),ue.delegate=null,N)}function Y(oe){var ue={tryLoc:oe[0]};1 in oe&&(ue.catchLoc=oe[1]),2 in oe&&(ue.finallyLoc=oe[2],ue.afterLoc=oe[3]),this.tryEntries.push(ue)}function V(oe){var ue=oe.completion||{};ue.type="normal",delete ue.arg,oe.completion=ue}function q(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(Y,this),this.reset(!0)}function Oe(oe){if(oe){var ue=oe[g];if(ue)return ue.call(oe);if(typeof oe.next=="function")return oe;if(!isNaN(oe.length)){var Ne=-1,Re=function se(){for(;++Ne<oe.length;)if(p.call(oe,Ne))return se.value=oe[Ne],se.done=!1,se;return se.value=void 0,se.done=!0,se};return Re.next=Re}}return{next:Ge}}function Ge(){return{value:void 0,done:!0}}return L.prototype=z,d(fe,"constructor",{value:z,configurable:!0}),d(z,"constructor",{value:L,configurable:!0}),L.displayName=T(z,_,"GeneratorFunction"),f.isGeneratorFunction=function(oe){var ue=typeof oe=="function"&&oe.constructor;return!!ue&&(ue===L||(ue.displayName||ue.name)==="GeneratorFunction")},f.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,z):(oe.__proto__=z,T(oe,_,"GeneratorFunction")),oe.prototype=Object.create(fe),oe},f.awrap=function(oe){return{__await:oe}},ae(pe.prototype),T(pe.prototype,E,function(){return this}),f.AsyncIterator=pe,f.async=function(oe,ue,Ne,Re,se){se===void 0&&(se=Promise);var je=new pe(P(oe,ue,Ne,Re),se);return f.isGeneratorFunction(ue)?je:je.next().then(function(He){return He.done?He.value:je.next()})},ae(fe),T(fe,_,"Generator"),T(fe,g,function(){return this}),T(fe,"toString",function(){return"[object Generator]"}),f.keys=function(oe){var ue=Object(oe),Ne=[];for(var Re in ue)Ne.push(Re);return Ne.reverse(),function se(){for(;Ne.length;){var je=Ne.pop();if(je in ue)return se.value=je,se.done=!1,se}return se.done=!0,se}},f.values=Oe,q.prototype={constructor:q,reset:function(ue){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(V),!ue)for(var Ne in this)Ne.charAt(0)==="t"&&p.call(this,Ne)&&!isNaN(+Ne.slice(1))&&(this[Ne]=void 0)},stop:function(){this.done=!0;var ue=this.tryEntries[0].completion;if(ue.type==="throw")throw ue.arg;return this.rval},dispatchException:function(ue){if(this.done)throw ue;var Ne=this;function Re(Yt,bt){return He.type="throw",He.arg=ue,Ne.next=Yt,bt&&(Ne.method="next",Ne.arg=void 0),!!bt}for(var se=this.tryEntries.length-1;se>=0;--se){var je=this.tryEntries[se],He=je.completion;if(je.tryLoc==="root")return Re("end");if(je.tryLoc<=this.prev){var ft=p.call(je,"catchLoc"),Pt=p.call(je,"finallyLoc");if(ft&&Pt){if(this.prev<je.catchLoc)return Re(je.catchLoc,!0);if(this.prev<je.finallyLoc)return Re(je.finallyLoc)}else if(ft){if(this.prev<je.catchLoc)return Re(je.catchLoc,!0)}else{if(!Pt)throw new Error("try statement without catch or finally");if(this.prev<je.finallyLoc)return Re(je.finallyLoc)}}}},abrupt:function(ue,Ne){for(var Re=this.tryEntries.length-1;Re>=0;--Re){var se=this.tryEntries[Re];if(se.tryLoc<=this.prev&&p.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var je=se;break}}je&&(ue==="break"||ue==="continue")&&je.tryLoc<=Ne&&Ne<=je.finallyLoc&&(je=null);var He=je?je.completion:{};return He.type=ue,He.arg=Ne,je?(this.method="next",this.next=je.finallyLoc,N):this.complete(He)},complete:function(ue,Ne){if(ue.type==="throw")throw ue.arg;return ue.type==="break"||ue.type==="continue"?this.next=ue.arg:ue.type==="return"?(this.rval=this.arg=ue.arg,this.method="return",this.next="end"):ue.type==="normal"&&Ne&&(this.next=Ne),N},finish:function(ue){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Re=this.tryEntries[Ne];if(Re.finallyLoc===ue)return this.complete(Re.completion,Re.afterLoc),V(Re),N}},catch:function(ue){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Re=this.tryEntries[Ne];if(Re.tryLoc===ue){var se=Re.completion;if(se.type==="throw"){var je=se.arg;V(Re)}return je}}throw new Error("illegal catch attempt")},delegateYield:function(ue,Ne,Re){return this.delegate={iterator:Oe(ue),resultName:Ne,nextLoc:Re},this.method==="next"&&(this.arg=void 0),N}},f}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports})(cO);var bN=cO.exports,lg=bN();try{regeneratorRuntime=lg}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=lg:Function("r","regeneratorRuntime = r")(lg)}var At;(function(r){r[r.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",r[r.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",r[r.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r[r.ZERO=0]="ZERO",r[r.ONE=1]="ONE",r[r.SRC_COLOR=768]="SRC_COLOR",r[r.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",r[r.SRC_ALPHA=770]="SRC_ALPHA",r[r.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",r[r.DST_ALPHA=772]="DST_ALPHA",r[r.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",r[r.DST_COLOR=774]="DST_COLOR",r[r.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",r[r.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",r[r.FUNC_ADD=32774]="FUNC_ADD",r[r.BLEND_EQUATION=32777]="BLEND_EQUATION",r[r.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",r[r.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",r[r.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",r[r.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",r[r.MAX_EXT=32776]="MAX_EXT",r[r.MIN_EXT=32775]="MIN_EXT",r[r.BLEND_DST_RGB=32968]="BLEND_DST_RGB",r[r.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",r[r.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",r[r.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",r[r.CONSTANT_COLOR=32769]="CONSTANT_COLOR",r[r.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",r[r.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",r[r.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",r[r.BLEND_COLOR=32773]="BLEND_COLOR",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",r[r.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",r[r.STREAM_DRAW=35040]="STREAM_DRAW",r[r.STATIC_DRAW=35044]="STATIC_DRAW",r[r.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",r[r.BUFFER_SIZE=34660]="BUFFER_SIZE",r[r.BUFFER_USAGE=34661]="BUFFER_USAGE",r[r.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",r[r.FRONT=1028]="FRONT",r[r.BACK=1029]="BACK",r[r.FRONT_AND_BACK=1032]="FRONT_AND_BACK",r[r.CULL_FACE=2884]="CULL_FACE",r[r.BLEND=3042]="BLEND",r[r.DITHER=3024]="DITHER",r[r.STENCIL_TEST=2960]="STENCIL_TEST",r[r.DEPTH_TEST=2929]="DEPTH_TEST",r[r.SCISSOR_TEST=3089]="SCISSOR_TEST",r[r.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",r[r.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",r[r.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",r[r.NO_ERROR=0]="NO_ERROR",r[r.INVALID_ENUM=1280]="INVALID_ENUM",r[r.INVALID_VALUE=1281]="INVALID_VALUE",r[r.INVALID_OPERATION=1282]="INVALID_OPERATION",r[r.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",r[r.CW=2304]="CW",r[r.CCW=2305]="CCW",r[r.LINE_WIDTH=2849]="LINE_WIDTH",r[r.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",r[r.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",r[r.CULL_FACE_MODE=2885]="CULL_FACE_MODE",r[r.FRONT_FACE=2886]="FRONT_FACE",r[r.DEPTH_RANGE=2928]="DEPTH_RANGE",r[r.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",r[r.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",r[r.DEPTH_FUNC=2932]="DEPTH_FUNC",r[r.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",r[r.STENCIL_FUNC=2962]="STENCIL_FUNC",r[r.STENCIL_FAIL=2964]="STENCIL_FAIL",r[r.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",r[r.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",r[r.STENCIL_REF=2967]="STENCIL_REF",r[r.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",r[r.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",r[r.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",r[r.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",r[r.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",r[r.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",r[r.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",r[r.VIEWPORT=2978]="VIEWPORT",r[r.SCISSOR_BOX=3088]="SCISSOR_BOX",r[r.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",r[r.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",r[r.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",r[r.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",r[r.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",r[r.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",r[r.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",r[r.RED_BITS=3410]="RED_BITS",r[r.GREEN_BITS=3411]="GREEN_BITS",r[r.BLUE_BITS=3412]="BLUE_BITS",r[r.ALPHA_BITS=3413]="ALPHA_BITS",r[r.DEPTH_BITS=3414]="DEPTH_BITS",r[r.STENCIL_BITS=3415]="STENCIL_BITS",r[r.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",r[r.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",r[r.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",r[r.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",r[r.SAMPLES=32937]="SAMPLES",r[r.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",r[r.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",r[r.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",r[r.DONT_CARE=4352]="DONT_CARE",r[r.FASTEST=4353]="FASTEST",r[r.NICEST=4354]="NICEST",r[r.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.INT=5124]="INT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.ALPHA=6406]="ALPHA",r[r.RGB=6407]="RGB",r[r.RGBA=6408]="RGBA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",r[r.VERTEX_SHADER=35633]="VERTEX_SHADER",r[r.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",r[r.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",r[r.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",r[r.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",r[r.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",r[r.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",r[r.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",r[r.SHADER_TYPE=35663]="SHADER_TYPE",r[r.DELETE_STATUS=35712]="DELETE_STATUS",r[r.LINK_STATUS=35714]="LINK_STATUS",r[r.VALIDATE_STATUS=35715]="VALIDATE_STATUS",r[r.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",r[r.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",r[r.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",r[r.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",r[r.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",r[r.NEVER=512]="NEVER",r[r.LESS=513]="LESS",r[r.EQUAL=514]="EQUAL",r[r.LEQUAL=515]="LEQUAL",r[r.GREATER=516]="GREATER",r[r.NOTEQUAL=517]="NOTEQUAL",r[r.GEQUAL=518]="GEQUAL",r[r.ALWAYS=519]="ALWAYS",r[r.KEEP=7680]="KEEP",r[r.REPLACE=7681]="REPLACE",r[r.INCR=7682]="INCR",r[r.DECR=7683]="DECR",r[r.INVERT=5386]="INVERT",r[r.INCR_WRAP=34055]="INCR_WRAP",r[r.DECR_WRAP=34056]="DECR_WRAP",r[r.VENDOR=7936]="VENDOR",r[r.RENDERER=7937]="RENDERER",r[r.VERSION=7938]="VERSION",r[r.NEAREST=9728]="NEAREST",r[r.LINEAR=9729]="LINEAR",r[r.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",r[r.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",r[r.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",r[r.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",r[r.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",r[r.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",r[r.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",r[r.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE=5890]="TEXTURE",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r[r.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",r[r.TEXTURE0=33984]="TEXTURE0",r[r.TEXTURE1=33985]="TEXTURE1",r[r.TEXTURE2=33986]="TEXTURE2",r[r.TEXTURE3=33987]="TEXTURE3",r[r.TEXTURE4=33988]="TEXTURE4",r[r.TEXTURE5=33989]="TEXTURE5",r[r.TEXTURE6=33990]="TEXTURE6",r[r.TEXTURE7=33991]="TEXTURE7",r[r.TEXTURE8=33992]="TEXTURE8",r[r.TEXTURE9=33993]="TEXTURE9",r[r.TEXTURE10=33994]="TEXTURE10",r[r.TEXTURE11=33995]="TEXTURE11",r[r.TEXTURE12=33996]="TEXTURE12",r[r.TEXTURE13=33997]="TEXTURE13",r[r.TEXTURE14=33998]="TEXTURE14",r[r.TEXTURE15=33999]="TEXTURE15",r[r.TEXTURE16=34e3]="TEXTURE16",r[r.TEXTURE17=34001]="TEXTURE17",r[r.TEXTURE18=34002]="TEXTURE18",r[r.TEXTURE19=34003]="TEXTURE19",r[r.TEXTURE20=34004]="TEXTURE20",r[r.TEXTURE21=34005]="TEXTURE21",r[r.TEXTURE22=34006]="TEXTURE22",r[r.TEXTURE23=34007]="TEXTURE23",r[r.TEXTURE24=34008]="TEXTURE24",r[r.TEXTURE25=34009]="TEXTURE25",r[r.TEXTURE26=34010]="TEXTURE26",r[r.TEXTURE27=34011]="TEXTURE27",r[r.TEXTURE28=34012]="TEXTURE28",r[r.TEXTURE29=34013]="TEXTURE29",r[r.TEXTURE30=34014]="TEXTURE30",r[r.TEXTURE31=34015]="TEXTURE31",r[r.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",r[r.REPEAT=10497]="REPEAT",r[r.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r[r.FLOAT_VEC2=35664]="FLOAT_VEC2",r[r.FLOAT_VEC3=35665]="FLOAT_VEC3",r[r.FLOAT_VEC4=35666]="FLOAT_VEC4",r[r.INT_VEC2=35667]="INT_VEC2",r[r.INT_VEC3=35668]="INT_VEC3",r[r.INT_VEC4=35669]="INT_VEC4",r[r.BOOL=35670]="BOOL",r[r.BOOL_VEC2=35671]="BOOL_VEC2",r[r.BOOL_VEC3=35672]="BOOL_VEC3",r[r.BOOL_VEC4=35673]="BOOL_VEC4",r[r.FLOAT_MAT2=35674]="FLOAT_MAT2",r[r.FLOAT_MAT3=35675]="FLOAT_MAT3",r[r.FLOAT_MAT4=35676]="FLOAT_MAT4",r[r.SAMPLER_2D=35678]="SAMPLER_2D",r[r.SAMPLER_CUBE=35680]="SAMPLER_CUBE",r[r.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",r[r.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",r[r.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",r[r.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",r[r.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",r[r.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",r[r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",r[r.COMPILE_STATUS=35713]="COMPILE_STATUS",r[r.LOW_FLOAT=36336]="LOW_FLOAT",r[r.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",r[r.HIGH_FLOAT=36338]="HIGH_FLOAT",r[r.LOW_INT=36339]="LOW_INT",r[r.MEDIUM_INT=36340]="MEDIUM_INT",r[r.HIGH_INT=36341]="HIGH_INT",r[r.FRAMEBUFFER=36160]="FRAMEBUFFER",r[r.RENDERBUFFER=36161]="RENDERBUFFER",r[r.RGBA4=32854]="RGBA4",r[r.RGB5_A1=32855]="RGB5_A1",r[r.RGB565=36194]="RGB565",r[r.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",r[r.STENCIL_INDEX=6401]="STENCIL_INDEX",r[r.STENCIL_INDEX8=36168]="STENCIL_INDEX8",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r[r.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",r[r.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",r[r.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",r[r.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",r[r.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",r[r.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",r[r.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",r[r.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",r[r.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",r[r.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",r[r.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",r[r.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",r[r.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",r[r.NONE=0]="NONE",r[r.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",r[r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",r[r.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",r[r.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",r[r.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",r[r.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",r[r.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",r[r.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",r[r.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",r[r.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",r[r.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",r[r.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",r[r.COPY_SRC=1]="COPY_SRC",r[r.COPY_DST=2]="COPY_DST",r[r.SAMPLED=4]="SAMPLED",r[r.STORAGE=8]="STORAGE",r[r.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(At||(At={}));var j_;(function(r){r.Void="Void",r.Boolean="Boolean",r.Float="Float",r.Uint32="Uint32",r.Int32="Int32",r.Vector="Vector",r.Vector2Float="vec2<f32>",r.Vector3Float="vec3<f32>",r.Vector4Float="vec4<f32>",r.Vector2Boolean="vec2<bool>",r.Vector3Boolean="vec3<bool>",r.Vector4Boolean="vec4<bool>",r.Vector2Uint="vec2<u32>",r.Vector3Uint="vec3<u32>",r.Vector4Uint="vec4<u32>",r.Vector2Int="vec2<i32>",r.Vector3Int="vec3<i32>",r.Vector4Int="vec4<i32>",r.Matrix="Matrix",r.Matrix3x3Float="mat3x3<f32>",r.Matrix4x4Float="mat4x4<i32>",r.Struct="Struct",r.FloatArray="Float[]",r.Vector4FloatArray="vec4<f32>[]"})(j_||(j_={}));var N_;(function(r){r.Program="Program",r.Identifier="Identifier",r.VariableDeclaration="VariableDeclaration",r.BlockStatement="BlockStatement",r.ReturnStatement="ReturnStatement",r.FunctionDeclaration="FunctionDeclaration",r.VariableDeclarator="VariableDeclarator",r.AssignmentExpression="AssignmentExpression",r.LogicalExpression="LogicalExpression",r.BinaryExpression="BinaryExpression",r.ArrayExpression="ArrayExpression",r.UnaryExpression="UnaryExpression",r.UpdateExpression="UpdateExpression",r.FunctionExpression="FunctionExpression",r.MemberExpression="MemberExpression",r.ConditionalExpression="ConditionalExpression",r.ExpressionStatement="ExpressionStatement",r.CallExpression="CallExpression",r.NumThreadStatement="NumThreadStatement",r.StorageStatement="StorageStatement",r.DoWhileStatement="DoWhileStatement",r.WhileStatement="WhileStatement",r.ForStatement="ForStatement",r.BreakStatement="BreakStatement",r.ContinueStatement="ContinueStatement",r.IfStatement="IfStatement",r.ImportedFunctionStatement="ImportedFunctionStatement"})(N_||(N_={}));var M_;(function(r){r.Input="Input",r.Output="Output",r.Uniform="Uniform",r.Workgroup="Workgroup",r.UniformConstant="UniformConstant",r.Image="Image",r.StorageBuffer="StorageBuffer",r.Private="Private",r.Function="Function"})(M_||(M_={}));var R_;(function(r){r.GLSL100="GLSL100",r.GLSL450="GLSL450",r.WGSL="WGSL"})(R_||(R_={}));var _N={exports:{}};(function(r,u){(function(a,f){r.exports=f()})(fl,function(){var a=function(x){return x instanceof Uint8Array||x instanceof Uint16Array||x instanceof Uint32Array||x instanceof Int8Array||x instanceof Int16Array||x instanceof Int32Array||x instanceof Float32Array||x instanceof Float64Array||x instanceof Uint8ClampedArray},f=function(x,B){for(var Z=Object.keys(B),Ie=0;Ie<Z.length;++Ie)x[Z[Ie]]=B[Z[Ie]];return x},o=`
`;function p(x){return typeof atob<"u"?atob(x):"base64:"+x}function d(x){var B=new Error("(regl) "+x);throw console.error(B),B}function y(x,B){x||d(B)}function g(x){return x?": "+x:""}function E(x,B,Z){x in B||d("unknown parameter ("+x+")"+g(Z)+". possible values: "+Object.keys(B).join())}function _(x,B){a(x)||d("invalid parameter type"+g(B)+". must be a typed array")}function T(x,B){switch(B){case"number":return typeof x=="number";case"object":return typeof x=="object";case"string":return typeof x=="string";case"boolean":return typeof x=="boolean";case"function":return typeof x=="function";case"undefined":return typeof x>"u";case"symbol":return typeof x=="symbol"}}function P(x,B,Z){T(x,B)||d("invalid parameter type"+g(Z)+". expected "+B+", got "+typeof x)}function A(x,B){x>=0&&(x|0)===x||d("invalid parameter type, ("+x+")"+g(B)+". must be a nonnegative integer")}function N(x,B,Z){B.indexOf(x)<0&&d("invalid value"+g(Z)+". must be one of: "+B)}var M=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function L(x){Object.keys(x).forEach(function(B){M.indexOf(B)<0&&d('invalid regl constructor argument "'+B+'". must be one of '+M)})}function z(x,B){for(x=x+"";x.length<B;)x=" "+x;return x}function $(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ye(x,B){this.number=x,this.line=B,this.errors=[]}function Te(x,B,Z){this.file=x,this.line=B,this.message=Z}function fe(){var x=new Error,B=(x.stack||x).toString(),Z=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(B);if(Z)return Z[1];var Ie=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(B);return Ie?Ie[1]:"unknown"}function ae(){var x=new Error,B=(x.stack||x).toString(),Z=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(B);if(Z)return Z[1];var Ie=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(B);return Ie?Ie[1]:"unknown"}function pe(x,B){var Z=x.split(`
`),Ie=1,Xe=0,Ce={unknown:new $,0:new $};Ce.unknown.name=Ce[0].name=B||fe(),Ce.unknown.lines.push(new ye(0,""));for(var Be=0;Be<Z.length;++Be){var tt=Z[Be],nt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(tt);if(nt)switch(nt[1]){case"line":var ct=/(\d+)(\s+\d+)?/.exec(nt[2]);ct&&(Ie=ct[1]|0,ct[2]&&(Xe=ct[2]|0,Xe in Ce||(Ce[Xe]=new $)));break;case"define":var it=/SHADER_NAME(_B64)?\s+(.*)$/.exec(nt[2]);it&&(Ce[Xe].name=it[1]?p(it[2]):it[2]);break}Ce[Xe].lines.push(new ye(Ie++,tt))}return Object.keys(Ce).forEach(function(dt){var gt=Ce[dt];gt.lines.forEach(function(rt){gt.index[rt.number]=rt})}),Ce}function W(x){var B=[];return x.split(`
`).forEach(function(Z){if(!(Z.length<5)){var Ie=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Z);Ie?B.push(new Te(Ie[1]|0,Ie[2]|0,Ie[3].trim())):Z.length>0&&B.push(new Te("unknown",0,Z))}}),B}function F(x,B){B.forEach(function(Z){var Ie=x[Z.file];if(Ie){var Xe=Ie.index[Z.line];if(Xe){Xe.errors.push(Z),Ie.hasErrors=!0;return}}x.unknown.hasErrors=!0,x.unknown.lines[0].errors.push(Z)})}function Y(x,B,Z,Ie,Xe){if(!x.getShaderParameter(B,x.COMPILE_STATUS)){var Ce=x.getShaderInfoLog(B),Be=Ie===x.FRAGMENT_SHADER?"fragment":"vertex";Ne(Z,"string",Be+" shader source must be a string",Xe);var tt=pe(Z,Xe),nt=W(Ce);F(tt,nt),Object.keys(tt).forEach(function(ct){var it=tt[ct];if(!it.hasErrors)return;var dt=[""],gt=[""];function rt(pt,me){dt.push(pt),gt.push(me||"")}rt("file number "+ct+": "+it.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),it.lines.forEach(function(pt){if(pt.errors.length>0){rt(z(pt.number,4)+"|  ","background-color:yellow; font-weight:bold"),rt(pt.line+o,"color:red; background-color:yellow; font-weight:bold");var me=0;pt.errors.forEach(function(Fe){var at=Fe.message,Ot=/^\s*'(.*)'\s*:\s*(.*)$/.exec(at);if(Ot){var qe=Ot[1];switch(at=Ot[2],qe){case"assign":qe="=";break}me=Math.max(pt.line.indexOf(qe,me),0)}else me=0;rt(z("| ",6)),rt(z("^^^",me+3)+o,"font-weight:bold"),rt(z("| ",6)),rt(at+o,"font-weight:bold")}),rt(z("| ",6)+o)}else rt(z(pt.number,4)+"|  "),rt(pt.line+o,"color:red")}),typeof document<"u"&&!window.chrome?(gt[0]=dt.join("%c"),console.log.apply(console,gt)):console.log(dt.join(""))}),y.raise("Error compiling "+Be+" shader, "+tt[0].name)}}function V(x,B,Z,Ie,Xe){if(!x.getProgramParameter(B,x.LINK_STATUS)){var Ce=x.getProgramInfoLog(B),Be=pe(Z,Xe),tt=pe(Ie,Xe),nt='Error linking program with vertex shader, "'+tt[0].name+'", and fragment shader "'+Be[0].name+'"';typeof document<"u"?console.log("%c"+nt+o+"%c"+Ce,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(nt+o+Ce),y.raise(nt)}}function q(x){x._commandRef=fe()}function Oe(x,B,Z,Ie){q(x);function Xe(nt){return nt?Ie.id(nt):0}x._fragId=Xe(x.static.frag),x._vertId=Xe(x.static.vert);function Ce(nt,ct){Object.keys(ct).forEach(function(it){nt[Ie.id(it)]=!0})}var Be=x._uniformSet={};Ce(Be,B.static),Ce(Be,B.dynamic);var tt=x._attributeSet={};Ce(tt,Z.static),Ce(tt,Z.dynamic),x._hasCount="count"in x.static||"count"in x.dynamic||"elements"in x.static||"elements"in x.dynamic}function Ge(x,B){var Z=ae();d(x+" in command "+(B||fe())+(Z==="unknown"?"":" called from "+Z))}function oe(x,B,Z){x||Ge(B,Z||fe())}function ue(x,B,Z,Ie){x in B||Ge("unknown parameter ("+x+")"+g(Z)+". possible values: "+Object.keys(B).join(),Ie||fe())}function Ne(x,B,Z,Ie){T(x,B)||Ge("invalid parameter type"+g(Z)+". expected "+B+", got "+typeof x,Ie||fe())}function Re(x){x()}function se(x,B,Z){x.texture?N(x.texture._texture.internalformat,B,"unsupported texture format for attachment"):N(x.renderbuffer._renderbuffer.format,Z,"unsupported renderbuffer format for attachment")}var je=33071,He=9728,ft=9984,Pt=9985,Yt=9986,bt=9987,xt=5120,nr=5121,ve=5122,de=5123,De=5124,ot=5125,Tt=5126,lt=32819,rr=32820,pr=33635,ar=34042,Qt=36193,Ke={};Ke[xt]=Ke[nr]=1,Ke[ve]=Ke[de]=Ke[Qt]=Ke[pr]=Ke[lt]=Ke[rr]=2,Ke[De]=Ke[ot]=Ke[Tt]=Ke[ar]=4;function Xt(x,B){return x===rr||x===lt||x===pr?2:x===ar?4:Ke[x]*B}function _e(x){return!(x&x-1)&&!!x}function Ft(x,B,Z){var Ie,Xe=B.width,Ce=B.height,Be=B.channels;y(Xe>0&&Xe<=Z.maxTextureSize&&Ce>0&&Ce<=Z.maxTextureSize,"invalid texture shape"),(x.wrapS!==je||x.wrapT!==je)&&y(_e(Xe)&&_e(Ce),"incompatible wrap mode for texture, both width and height must be power of 2"),B.mipmask===1?Xe!==1&&Ce!==1&&y(x.minFilter!==ft&&x.minFilter!==Yt&&x.minFilter!==Pt&&x.minFilter!==bt,"min filter requires mipmap"):(y(_e(Xe)&&_e(Ce),"texture must be a square power of 2 to support mipmapping"),y(B.mipmask===(Xe<<1)-1,"missing or incomplete mipmap data")),B.type===Tt&&(Z.extensions.indexOf("oes_texture_float_linear")<0&&y(x.minFilter===He&&x.magFilter===He,"filter not supported, must enable oes_texture_float_linear"),y(!x.genMipmaps,"mipmap generation not supported with float textures"));var tt=B.images;for(Ie=0;Ie<16;++Ie)if(tt[Ie]){var nt=Xe>>Ie,ct=Ce>>Ie;y(B.mipmask&1<<Ie,"missing mipmap data");var it=tt[Ie];if(y(it.width===nt&&it.height===ct,"invalid shape for mip images"),y(it.format===B.format&&it.internalformat===B.internalformat&&it.type===B.type,"incompatible type for mip image"),!it.compressed)if(it.data){var dt=Math.ceil(Xt(it.type,Be)*nt/it.unpackAlignment)*it.unpackAlignment;y(it.data.byteLength===dt*ct,"invalid data for image, buffer size is inconsistent with image format")}else it.element||it.copy}else x.genMipmaps||y((B.mipmask&1<<Ie)===0,"extra mipmap data");B.compressed&&y(!x.genMipmaps,"mipmap generation for compressed images not supported")}function _r(x,B,Z,Ie){var Xe=x.width,Ce=x.height,Be=x.channels;y(Xe>0&&Xe<=Ie.maxTextureSize&&Ce>0&&Ce<=Ie.maxTextureSize,"invalid texture shape"),y(Xe===Ce,"cube map must be square"),y(B.wrapS===je&&B.wrapT===je,"wrap mode not supported by cube map");for(var tt=0;tt<Z.length;++tt){var nt=Z[tt];y(nt.width===Xe&&nt.height===Ce,"inconsistent cube map face shape"),B.genMipmaps&&(y(!nt.compressed,"can not generate mipmap for compressed textures"),y(nt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ct=nt.images,it=0;it<16;++it){var dt=ct[it];if(dt){var gt=Xe>>it,rt=Ce>>it;y(nt.mipmask&1<<it,"missing mipmap data"),y(dt.width===gt&&dt.height===rt,"invalid shape for mip images"),y(dt.format===x.format&&dt.internalformat===x.internalformat&&dt.type===x.type,"incompatible type for mip image"),dt.compressed||(dt.data?y(dt.data.byteLength===gt*rt*Math.max(Xt(dt.type,Be),dt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):dt.element||dt.copy)}}}}var k=f(y,{optional:Re,raise:d,commandRaise:Ge,command:oe,parameter:E,commandParameter:ue,constructor:L,type:P,commandType:Ne,isTypedArray:_,nni:A,oneOf:N,shaderError:Y,linkError:V,callSite:ae,saveCommandRef:q,saveDrawInfo:Oe,framebufferFormat:se,guessCommand:fe,texture2D:Ft,textureCube:_r}),gr=0,Cr=0,$r=5,Zr=6;function ur(x,B){this.id=gr++,this.type=x,this.data=B}function sn(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Q(x){if(x.length===0)return[];var B=x.charAt(0),Z=x.charAt(x.length-1);if(x.length>1&&B===Z&&(B==='"'||B==="'"))return['"'+sn(x.substr(1,x.length-2))+'"'];var Ie=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(x);if(Ie)return Q(x.substr(0,Ie.index)).concat(Q(Ie[1])).concat(Q(x.substr(Ie.index+Ie[0].length)));var Xe=x.split(".");if(Xe.length===1)return['"'+sn(x)+'"'];for(var Ce=[],Be=0;Be<Xe.length;++Be)Ce=Ce.concat(Q(Xe[Be]));return Ce}function xe(x){return"["+Q(x).join("][")+"]"}function ie(x,B){return new ur(x,xe(B+""))}function Le(x){return typeof x=="function"&&!x._reglType||x instanceof ur}function jt(x,B){if(typeof x=="function")return new ur(Cr,x);if(typeof x=="number"||typeof x=="boolean")return new ur($r,x);if(Array.isArray(x))return new ur(Zr,x.map((Z,Ie)=>jt(Z,B+"["+Ie+"]")));if(x instanceof ur)return x;k(!1,"invalid option type in uniform "+B)}var _t={DynamicVariable:ur,define:ie,isDynamic:Le,unbox:jt,accessor:xe},Vt={next:typeof requestAnimationFrame=="function"?function(x){return requestAnimationFrame(x)}:function(x){return setTimeout(x,16)},cancel:typeof cancelAnimationFrame=="function"?function(x){return cancelAnimationFrame(x)}:clearTimeout},Tr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function On(){var x={"":0},B=[""];return{id:function(Z){var Ie=x[Z];return Ie||(Ie=x[Z]=B.length,B.push(Z),Ie)},str:function(Z){return B[Z]}}}function kn(x,B,Z){var Ie=document.createElement("canvas");f(Ie.style,{border:0,margin:0,padding:0,top:0,left:0}),x.appendChild(Ie),x===document.body&&(Ie.style.position="absolute",f(x.style,{margin:0,padding:0}));function Xe(){var tt=window.innerWidth,nt=window.innerHeight;if(x!==document.body){var ct=x.getBoundingClientRect();tt=ct.right-ct.left,nt=ct.bottom-ct.top}Ie.width=Z*tt,Ie.height=Z*nt,f(Ie.style,{width:tt+"px",height:nt+"px"})}var Ce;x!==document.body&&typeof ResizeObserver=="function"?(Ce=new ResizeObserver(function(){setTimeout(Xe)}),Ce.observe(x)):window.addEventListener("resize",Xe,!1);function Be(){Ce?Ce.disconnect():window.removeEventListener("resize",Xe),x.removeChild(Ie)}return Xe(),{canvas:Ie,onDestroy:Be}}function pn(x,B){function Z(Ie){try{return x.getContext(Ie,B)}catch{return null}}return Z("webgl")||Z("experimental-webgl")||Z("webgl-experimental")}function bn(x){return typeof x.nodeName=="string"&&typeof x.appendChild=="function"&&typeof x.getBoundingClientRect=="function"}function Gt(x){return typeof x.drawArrays=="function"||typeof x.drawElements=="function"}function er(x){return typeof x=="string"?x.split():(k(Array.isArray(x),"invalid extension array"),x)}function lr(x){return typeof x=="string"?(k(typeof document<"u","not supported outside of DOM"),document.querySelector(x)):x}function yr(x){var B=x||{},Z,Ie,Xe,Ce,Be={},tt=[],nt=[],ct=typeof window>"u"?1:window.devicePixelRatio,it=!1,dt=function(pt){pt&&k.raise(pt)},gt=function(){};if(typeof B=="string"?(k(typeof document<"u","selector queries only supported in DOM enviroments"),Z=document.querySelector(B),k(Z,"invalid query string for element")):typeof B=="object"?bn(B)?Z=B:Gt(B)?(Ce=B,Xe=Ce.canvas):(k.constructor(B),"gl"in B?Ce=B.gl:"canvas"in B?Xe=lr(B.canvas):"container"in B&&(Ie=lr(B.container)),"attributes"in B&&(Be=B.attributes,k.type(Be,"object","invalid context attributes")),"extensions"in B&&(tt=er(B.extensions)),"optionalExtensions"in B&&(nt=er(B.optionalExtensions)),"onDone"in B&&(k.type(B.onDone,"function","invalid or missing onDone callback"),dt=B.onDone),"profile"in B&&(it=!!B.profile),"pixelRatio"in B&&(ct=+B.pixelRatio,k(ct>0,"invalid pixel ratio"))):k.raise("invalid arguments to regl"),Z&&(Z.nodeName.toLowerCase()==="canvas"?Xe=Z:Ie=Z),!Ce){if(!Xe){k(typeof document<"u","must manually specify webgl context outside of DOM environments");var rt=kn(Ie||document.body,dt,ct);if(!rt)return null;Xe=rt.canvas,gt=rt.onDestroy}Be.premultipliedAlpha===void 0&&(Be.premultipliedAlpha=!0),Ce=pn(Xe,Be)}return Ce?{gl:Ce,canvas:Xe,container:Ie,extensions:tt,optionalExtensions:nt,pixelRatio:ct,profile:it,onDone:dt,onDestroy:gt}:(gt(),dt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Xr(x,B){var Z={};function Ie(Be){k.type(Be,"string","extension name must be string");var tt=Be.toLowerCase(),nt;try{nt=Z[tt]=x.getExtension(tt)}catch{}return!!nt}for(var Xe=0;Xe<B.extensions.length;++Xe){var Ce=B.extensions[Xe];if(!Ie(Ce))return B.onDestroy(),B.onDone('"'+Ce+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return B.optionalExtensions.forEach(Ie),{extensions:Z,restore:function(){Object.keys(Z).forEach(function(Be){if(Z[Be]&&!Ie(Be))throw new Error("(regl): error restoring extension "+Be)})}}}function Ir(x,B){for(var Z=Array(x),Ie=0;Ie<x;++Ie)Z[Ie]=B(Ie);return Z}var oi=5120,Go=5121,Uo=5122,Xi=5123,Lc=5124,cu=5125,xo=5126;function cs(x){for(var B=16;B<=1<<28;B*=16)if(x<=B)return B;return 0}function Wt(x){var B,Z;return B=(x>65535)<<4,x>>>=B,Z=(x>255)<<3,x>>>=Z,B|=Z,Z=(x>15)<<2,x>>>=Z,B|=Z,Z=(x>3)<<1,x>>>=Z,B|=Z,B|x>>1}function fs(){var x=Ir(8,function(){return[]});function B(Ce){var Be=cs(Ce),tt=x[Wt(Be)>>2];return tt.length>0?tt.pop():new ArrayBuffer(Be)}function Z(Ce){x[Wt(Ce.byteLength)>>2].push(Ce)}function Ie(Ce,Be){var tt=null;switch(Ce){case oi:tt=new Int8Array(B(Be),0,Be);break;case Go:tt=new Uint8Array(B(Be),0,Be);break;case Uo:tt=new Int16Array(B(2*Be),0,Be);break;case Xi:tt=new Uint16Array(B(2*Be),0,Be);break;case Lc:tt=new Int32Array(B(4*Be),0,Be);break;case cu:tt=new Uint32Array(B(4*Be),0,Be);break;case xo:tt=new Float32Array(B(4*Be),0,Be);break;default:return null}return tt.length!==Be?tt.subarray(0,Be):tt}function Xe(Ce){Z(Ce.buffer)}return{alloc:B,free:Z,allocType:Ie,freeType:Xe}}var tn=fs();tn.zero=fs();var ls=3408,fo=3410,lo=3411,ps=3412,zo=3413,gi=3414,Co=3415,fu=33901,ds=33902,Bc=3379,_a=3386,Fc=34921,hs=36347,Gc=36348,ii=35661,ys=35660,Ho=34930,Uc=36349,Ea=34076,lu=34024,pu=7936,zc=7937,vs=7938,mi=35724,bi=34047,gs=36063,_i=34852,po=3553,du=34067,ms=34069,Vi=33984,Ei=6408,hu=5126,yu=5121,Oa=36160,Wi=36053,bs=36064,Hc=16384,_s=function(x,B){var Z=1;B.ext_texture_filter_anisotropic&&(Z=x.getParameter(bi));var Ie=1,Xe=1;B.webgl_draw_buffers&&(Ie=x.getParameter(_i),Xe=x.getParameter(gs));var Ce=!!B.oes_texture_float;if(Ce){var Be=x.createTexture();x.bindTexture(po,Be),x.texImage2D(po,0,Ei,1,1,0,Ei,hu,null);var tt=x.createFramebuffer();if(x.bindFramebuffer(Oa,tt),x.framebufferTexture2D(Oa,bs,po,Be,0),x.bindTexture(po,null),x.checkFramebufferStatus(Oa)!==Wi)Ce=!1;else{x.viewport(0,0,1,1),x.clearColor(1,0,0,1),x.clear(Hc);var nt=tn.allocType(hu,4);x.readPixels(0,0,1,1,Ei,hu,nt),x.getError()?Ce=!1:(x.deleteFramebuffer(tt),x.deleteTexture(Be),Ce=nt[0]===1),tn.freeType(nt)}}var ct=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),it=!0;if(!ct){var dt=x.createTexture(),gt=tn.allocType(yu,36);x.activeTexture(Vi),x.bindTexture(du,dt),x.texImage2D(ms,0,Ei,3,3,0,Ei,yu,gt),tn.freeType(gt),x.bindTexture(du,null),x.deleteTexture(dt),it=!x.getError()}return{colorBits:[x.getParameter(fo),x.getParameter(lo),x.getParameter(ps),x.getParameter(zo)],depthBits:x.getParameter(gi),stencilBits:x.getParameter(Co),subpixelBits:x.getParameter(ls),extensions:Object.keys(B).filter(function(rt){return!!B[rt]}),maxAnisotropic:Z,maxDrawbuffers:Ie,maxColorAttachments:Xe,pointSizeDims:x.getParameter(fu),lineWidthDims:x.getParameter(ds),maxViewportDims:x.getParameter(_a),maxCombinedTextureUnits:x.getParameter(ii),maxCubeMapSize:x.getParameter(Ea),maxRenderbufferSize:x.getParameter(lu),maxTextureUnits:x.getParameter(Ho),maxTextureSize:x.getParameter(Bc),maxAttributes:x.getParameter(Fc),maxVertexUniforms:x.getParameter(hs),maxVertexTextureUnits:x.getParameter(ys),maxVaryingVectors:x.getParameter(Gc),maxFragmentUniforms:x.getParameter(Uc),glsl:x.getParameter(mi),renderer:x.getParameter(zc),vendor:x.getParameter(pu),version:x.getParameter(vs),readFloat:Ce,npotTextureCube:it}};function Yn(x){return!!x&&typeof x=="object"&&Array.isArray(x.shape)&&Array.isArray(x.stride)&&typeof x.offset=="number"&&x.shape.length===x.stride.length&&(Array.isArray(x.data)||a(x.data))}var An=function(x){return Object.keys(x).map(function(B){return x[B]})},ho={shape:ai,flatten:Xc};function Gn(x,B,Z){for(var Ie=0;Ie<B;++Ie)Z[Ie]=x[Ie]}function Es(x,B,Z,Ie){for(var Xe=0,Ce=0;Ce<B;++Ce)for(var Be=x[Ce],tt=0;tt<Z;++tt)Ie[Xe++]=Be[tt]}function vu(x,B,Z,Ie,Xe,Ce){for(var Be=Ce,tt=0;tt<B;++tt)for(var nt=x[tt],ct=0;ct<Z;++ct)for(var it=nt[ct],dt=0;dt<Ie;++dt)Xe[Be++]=it[dt]}function gu(x,B,Z,Ie,Xe){for(var Ce=1,Be=Z+1;Be<B.length;++Be)Ce*=B[Be];var tt=B[Z];if(B.length-Z===4){var nt=B[Z+1],ct=B[Z+2],it=B[Z+3];for(Be=0;Be<tt;++Be)vu(x[Be],nt,ct,it,Ie,Xe),Xe+=Ce}else for(Be=0;Be<tt;++Be)gu(x[Be],B,Z+1,Ie,Xe),Xe+=Ce}function Xc(x,B,Z,Ie){var Xe=1;if(B.length)for(var Ce=0;Ce<B.length;++Ce)Xe*=B[Ce];else Xe=0;var Be=Ie||tn.allocType(Z,Xe);switch(B.length){case 0:break;case 1:Gn(x,B[0],Be);break;case 2:Es(x,B[0],B[1],Be);break;case 3:vu(x,B[0],B[1],B[2],Be,0);break;default:gu(x,B,0,Be,0)}return Be}function ai(x){for(var B=[],Z=x;Z.length;Z=Z[0])B.push(Z.length);return B}var ro={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Vc=5120,So=5122,yo=5124,Os=5121,ws=5123,Wc=5125,wa=5126,Xo=5126,vo={int8:Vc,int16:So,int32:yo,uint8:Os,uint16:ws,uint32:Wc,float:wa,float32:Xo},Yc=35048,$n=35040,To={dynamic:Yc,stream:$n,static:35044},Rr=ho.flatten,no=ho.shape,Vo=35044,Ln=35040,xa=5121,Yi=5126,Io=[];Io[5120]=1,Io[5122]=2,Io[5124]=4,Io[5121]=1,Io[5123]=2,Io[5125]=4,Io[5126]=4;function Kn(x){return ro[Object.prototype.toString.call(x)]|0}function mu(x,B){for(var Z=0;Z<B.length;++Z)x[Z]=B[Z]}function $i(x,B,Z,Ie,Xe,Ce,Be){for(var tt=0,nt=0;nt<Z;++nt)for(var ct=0;ct<Ie;++ct)x[tt++]=B[Xe*nt+Ce*ct+Be]}function Ao(x,B,Z,Ie){var Xe=0,Ce={};function Be(me){this.id=Xe++,this.buffer=x.createBuffer(),this.type=me,this.usage=Vo,this.byteLength=0,this.dimension=1,this.dtype=xa,this.persistentData=null,Z.profile&&(this.stats={size:0})}Be.prototype.bind=function(){x.bindBuffer(this.type,this.buffer)},Be.prototype.destroy=function(){gt(this)};var tt=[];function nt(me,Fe){var at=tt.pop();return at||(at=new Be(me)),at.bind(),dt(at,Fe,Ln,0,1,!1),at}function ct(me){tt.push(me)}function it(me,Fe,at){me.byteLength=Fe.byteLength,x.bufferData(me.type,Fe,at)}function dt(me,Fe,at,Ot,qe,St){var Qe;if(me.usage=at,Array.isArray(Fe)){if(me.dtype=Ot||Yi,Fe.length>0){var ht;if(Array.isArray(Fe[0])){Qe=no(Fe);for(var Je=1,yt=1;yt<Qe.length;++yt)Je*=Qe[yt];me.dimension=Je,ht=Rr(Fe,Qe,me.dtype),it(me,ht,at),St?me.persistentData=ht:tn.freeType(ht)}else if(typeof Fe[0]=="number"){me.dimension=qe;var zt=tn.allocType(me.dtype,Fe.length);mu(zt,Fe),it(me,zt,at),St?me.persistentData=zt:tn.freeType(zt)}else a(Fe[0])?(me.dimension=Fe[0].length,me.dtype=Ot||Kn(Fe[0])||Yi,ht=Rr(Fe,[Fe.length,Fe[0].length],me.dtype),it(me,ht,at),St?me.persistentData=ht:tn.freeType(ht)):k.raise("invalid buffer data")}}else if(a(Fe))me.dtype=Ot||Kn(Fe),me.dimension=qe,it(me,Fe,at),St&&(me.persistentData=new Uint8Array(new Uint8Array(Fe.buffer)));else if(Yn(Fe)){Qe=Fe.shape;var Zt=Fe.stride,mt=Fe.offset,Ze=0,Ye=0,Jt=0,be=0;Qe.length===1?(Ze=Qe[0],Ye=1,Jt=Zt[0],be=0):Qe.length===2?(Ze=Qe[0],Ye=Qe[1],Jt=Zt[0],be=Zt[1]):k.raise("invalid shape"),me.dtype=Ot||Kn(Fe.data)||Yi,me.dimension=Ye;var kt=tn.allocType(me.dtype,Ze*Ye);$i(kt,Fe.data,Ze,Ye,Jt,be,mt),it(me,kt,at),St?me.persistentData=kt:tn.freeType(kt)}else Fe instanceof ArrayBuffer?(me.dtype=xa,me.dimension=qe,it(me,Fe,at),St&&(me.persistentData=new Uint8Array(new Uint8Array(Fe)))):k.raise("invalid buffer data")}function gt(me){B.bufferCount--,Ie(me);var Fe=me.buffer;k(Fe,"buffer must not be deleted already"),x.deleteBuffer(Fe),me.buffer=null,delete Ce[me.id]}function rt(me,Fe,at,Ot){B.bufferCount++;var qe=new Be(Fe);Ce[qe.id]=qe;function St(Je){var yt=Vo,zt=null,Zt=0,mt=0,Ze=1;return Array.isArray(Je)||a(Je)||Yn(Je)||Je instanceof ArrayBuffer?zt=Je:typeof Je=="number"?Zt=Je|0:Je&&(k.type(Je,"object","buffer arguments must be an object, a number or an array"),"data"in Je&&(k(zt===null||Array.isArray(zt)||a(zt)||Yn(zt),"invalid data for buffer"),zt=Je.data),"usage"in Je&&(k.parameter(Je.usage,To,"invalid buffer usage"),yt=To[Je.usage]),"type"in Je&&(k.parameter(Je.type,vo,"invalid buffer type"),mt=vo[Je.type]),"dimension"in Je&&(k.type(Je.dimension,"number","invalid dimension"),Ze=Je.dimension|0),"length"in Je&&(k.nni(Zt,"buffer length must be a nonnegative integer"),Zt=Je.length|0)),qe.bind(),zt?dt(qe,zt,yt,mt,Ze,Ot):(Zt&&x.bufferData(qe.type,Zt,yt),qe.dtype=mt||xa,qe.usage=yt,qe.dimension=Ze,qe.byteLength=Zt),Z.profile&&(qe.stats.size=qe.byteLength*Io[qe.dtype]),St}function Qe(Je,yt){k(yt+Je.byteLength<=qe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Je.byteLength+" starting from offset "+yt+" to a buffer of size "+qe.byteLength),x.bufferSubData(qe.type,yt,Je)}function ht(Je,yt){var zt=(yt||0)|0,Zt;if(qe.bind(),a(Je)||Je instanceof ArrayBuffer)Qe(Je,zt);else if(Array.isArray(Je)){if(Je.length>0)if(typeof Je[0]=="number"){var mt=tn.allocType(qe.dtype,Je.length);mu(mt,Je),Qe(mt,zt),tn.freeType(mt)}else if(Array.isArray(Je[0])||a(Je[0])){Zt=no(Je);var Ze=Rr(Je,Zt,qe.dtype);Qe(Ze,zt),tn.freeType(Ze)}else k.raise("invalid buffer data")}else if(Yn(Je)){Zt=Je.shape;var Ye=Je.stride,Jt=0,be=0,kt=0,mr=0;Zt.length===1?(Jt=Zt[0],be=1,kt=Ye[0],mr=0):Zt.length===2?(Jt=Zt[0],be=Zt[1],kt=Ye[0],mr=Ye[1]):k.raise("invalid shape");var ir=Array.isArray(Je.data)?qe.dtype:Kn(Je.data),vr=tn.allocType(ir,Jt*be);$i(vr,Je.data,Jt,be,kt,mr,Je.offset),Qe(vr,zt),tn.freeType(vr)}else k.raise("invalid data for buffer subdata");return St}return at||St(me),St._reglType="buffer",St._buffer=qe,St.subdata=ht,Z.profile&&(St.stats=qe.stats),St.destroy=function(){gt(qe)},St}function pt(){An(Ce).forEach(function(me){me.buffer=x.createBuffer(),x.bindBuffer(me.type,me.buffer),x.bufferData(me.type,me.persistentData||me.byteLength,me.usage)})}return Z.profile&&(B.getTotalBufferSize=function(){var me=0;return Object.keys(Ce).forEach(function(Fe){me+=Ce[Fe].stats.size}),me}),{create:rt,createStream:nt,destroyStream:ct,clear:function(){An(Ce).forEach(gt),tt.forEach(gt)},getBuffer:function(me){return me&&me._buffer instanceof Be?me._buffer:null},restore:pt,_initBuffer:dt}}var xs=0,$c=0,bu=1,_n=1,Oi=4,Sa=4,Pn={points:xs,point:$c,lines:bu,line:_n,triangles:Oi,triangle:Sa,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ss=0,Ki=1,Wo=4,Ta=5120,ko=5121,_u=5122,jn=5123,oo=5124,io=5125,qi=34963,Eu=35040,Ou=35044;function Ts(x,B,Z,Ie){var Xe={},Ce=0,Be={uint8:ko,uint16:jn};B.oes_element_index_uint&&(Be.uint32=io);function tt(pt){this.id=Ce++,Xe[this.id]=this,this.buffer=pt,this.primType=Wo,this.vertCount=0,this.type=0}tt.prototype.bind=function(){this.buffer.bind()};var nt=[];function ct(pt){var me=nt.pop();return me||(me=new tt(Z.create(null,qi,!0,!1)._buffer)),dt(me,pt,Eu,-1,-1,0,0),me}function it(pt){nt.push(pt)}function dt(pt,me,Fe,at,Ot,qe,St){pt.buffer.bind();var Qe;if(me){var ht=St;!St&&(!a(me)||Yn(me)&&!a(me.data))&&(ht=B.oes_element_index_uint?io:jn),Z._initBuffer(pt.buffer,me,Fe,ht,3)}else x.bufferData(qi,qe,Fe),pt.buffer.dtype=Qe||ko,pt.buffer.usage=Fe,pt.buffer.dimension=3,pt.buffer.byteLength=qe;if(Qe=St,!St){switch(pt.buffer.dtype){case ko:case Ta:Qe=ko;break;case jn:case _u:Qe=jn;break;case io:case oo:Qe=io;break;default:k.raise("unsupported type for element array")}pt.buffer.dtype=Qe}pt.type=Qe,k(Qe!==io||!!B.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Je=Ot;Je<0&&(Je=pt.buffer.byteLength,Qe===jn?Je>>=1:Qe===io&&(Je>>=2)),pt.vertCount=Je;var yt=at;if(at<0){yt=Wo;var zt=pt.buffer.dimension;zt===1&&(yt=Ss),zt===2&&(yt=Ki),zt===3&&(yt=Wo)}pt.primType=yt}function gt(pt){Ie.elementsCount--,k(pt.buffer!==null,"must not double destroy elements"),delete Xe[pt.id],pt.buffer.destroy(),pt.buffer=null}function rt(pt,me){var Fe=Z.create(null,qi,!0),at=new tt(Fe._buffer);Ie.elementsCount++;function Ot(qe){if(!qe)Fe(),at.primType=Wo,at.vertCount=0,at.type=ko;else if(typeof qe=="number")Fe(qe),at.primType=Wo,at.vertCount=qe|0,at.type=ko;else{var St=null,Qe=Ou,ht=-1,Je=-1,yt=0,zt=0;Array.isArray(qe)||a(qe)||Yn(qe)?St=qe:(k.type(qe,"object","invalid arguments for elements"),"data"in qe&&(St=qe.data,k(Array.isArray(St)||a(St)||Yn(St),"invalid data for element buffer")),"usage"in qe&&(k.parameter(qe.usage,To,"invalid element buffer usage"),Qe=To[qe.usage]),"primitive"in qe&&(k.parameter(qe.primitive,Pn,"invalid element buffer primitive"),ht=Pn[qe.primitive]),"count"in qe&&(k(typeof qe.count=="number"&&qe.count>=0,"invalid vertex count for elements"),Je=qe.count|0),"type"in qe&&(k.parameter(qe.type,Be,"invalid buffer type"),zt=Be[qe.type]),"length"in qe?yt=qe.length|0:(yt=Je,zt===jn||zt===_u?yt*=2:(zt===io||zt===oo)&&(yt*=4))),dt(at,St,Qe,ht,Je,yt,zt)}return Ot}return Ot(pt),Ot._reglType="elements",Ot._elements=at,Ot.subdata=function(qe,St){return Fe.subdata(qe,St),Ot},Ot.destroy=function(){gt(at)},Ot}return{create:rt,createStream:ct,destroyStream:it,getElements:function(pt){return typeof pt=="function"&&pt._elements instanceof tt?pt._elements:null},clear:function(){An(Xe).forEach(gt)}}}var As=new Float32Array(1),Aa=new Uint32Array(As.buffer),ui=5123;function m(x){for(var B=tn.allocType(ui,x.length),Z=0;Z<x.length;++Z)if(isNaN(x[Z]))B[Z]=65535;else if(x[Z]===1/0)B[Z]=31744;else if(x[Z]===-1/0)B[Z]=64512;else{As[0]=x[Z];var Ie=Aa[0],Xe=Ie>>>31<<15,Ce=(Ie<<1>>>24)-127,Be=Ie>>13&(1<<10)-1;if(Ce<-24)B[Z]=Xe;else if(Ce<-14){var tt=-14-Ce;B[Z]=Xe+(Be+(1<<10)>>tt)}else Ce>15?B[Z]=Xe+31744:B[Z]=Xe+(Ce+15<<10)+Be}return B}function b(x){return Array.isArray(x)||a(x)}var S=function(x){return!(x&x-1)&&!!x},C=34467,K=3553,Ee=34067,ze=34069,vt=6408,Ut=6406,Ar=6407,sr=6409,Gr=6410,Or=32854,Ur=32855,ao=36194,rn=32819,qn=32820,Zi=33635,Kc=34042,Pa=6402,Qi=34041,wi=35904,Ji=35906,wn=36193,ja=33776,si=33777,ea=33778,wu=33779,qc=35986,xl=35987,Sl=34798,Zc=35840,Tl=35841,Ps=35842,Al=35843,Pl=36196,Na=5121,Qc=5123,js=5125,xu=5126,sh=10242,Ns=10243,Ms=10497,Su=33071,ch=33648,Rs=10240,Ma=10241,Jc=9728,jl=9729,Ds=9984,Nl=9985,Ml=9986,ef=9987,fh=33170,Tu=4352,lh=4353,ph=4354,Rl=34046,dh=3317,Zn=37440,hh=37441,yh=37443,Dl=37444,Ra=33984,vh=[Ds,Ml,Nl,ef],Cs=[0,sr,Gr,Ar,vt],Po={};Po[sr]=Po[Ut]=Po[Pa]=1,Po[Qi]=Po[Gr]=2,Po[Ar]=Po[wi]=3,Po[vt]=Po[Ji]=4;function Qr(x){return"[object "+x+"]"}var tf=Qr("HTMLCanvasElement"),rf=Qr("OffscreenCanvas"),nf=Qr("CanvasRenderingContext2D"),of=Qr("ImageBitmap"),af=Qr("HTMLImageElement"),uf=Qr("HTMLVideoElement"),Cl=Object.keys(ro).concat([tf,rf,nf,of,af,uf]),ta=[];ta[Na]=1,ta[xu]=4,ta[wn]=2,ta[Qc]=2,ta[js]=4;var Nn=[];Nn[Or]=2,Nn[Ur]=2,Nn[ao]=2,Nn[Qi]=4,Nn[ja]=.5,Nn[si]=.5,Nn[ea]=1,Nn[wu]=1,Nn[qc]=.5,Nn[xl]=1,Nn[Sl]=1,Nn[Zc]=.5,Nn[Tl]=.25,Nn[Ps]=.5,Nn[Al]=.25,Nn[Pl]=.5;function sf(x){return Array.isArray(x)&&(x.length===0||typeof x[0]=="number")}function cf(x){if(!Array.isArray(x))return!1;var B=x.length;return!(B===0||!b(x[0]))}function xi(x){return Object.prototype.toString.call(x)}function ff(x){return xi(x)===tf}function lf(x){return xi(x)===rf}function Il(x){return xi(x)===nf}function kl(x){return xi(x)===of}function Ll(x){return xi(x)===af}function Au(x){return xi(x)===uf}function Mn(x){if(!x)return!1;var B=xi(x);return Cl.indexOf(B)>=0?!0:sf(x)||cf(x)||Yn(x)}function Bl(x){return ro[Object.prototype.toString.call(x)]|0}function Fl(x,B){var Z=B.length;switch(x.type){case Na:case Qc:case js:case xu:var Ie=tn.allocType(x.type,Z);Ie.set(B),x.data=Ie;break;case wn:x.data=m(B);break;default:k.raise("unsupported texture type, must specify a typed array")}}function Rn(x,B){return tn.allocType(x.type===wn?xu:x.type,B)}function zr(x,B){x.type===wn?(x.data=m(B),tn.freeType(B)):x.data=B}function Gl(x,B,Z,Ie,Xe,Ce){for(var Be=x.width,tt=x.height,nt=x.channels,ct=Be*tt*nt,it=Rn(x,ct),dt=0,gt=0;gt<tt;++gt)for(var rt=0;rt<Be;++rt)for(var pt=0;pt<nt;++pt)it[dt++]=B[Z*rt+Ie*gt+Xe*pt+Ce];zr(x,it)}function Pr(x,B,Z,Ie,Xe,Ce){var Be;if(typeof Nn[x]<"u"?Be=Nn[x]:Be=Po[x]*ta[B],Ce&&(Be*=6),Xe){for(var tt=0,nt=Z;nt>=1;)tt+=Be*nt*nt,nt/=2;return tt}else return Be*Z*Ie}function xn(x,B,Z,Ie,Xe,Ce,Be){var tt={"don't care":Tu,"dont care":Tu,nice:ph,fast:lh},nt={repeat:Ms,clamp:Su,mirror:ch},ct={nearest:Jc,linear:jl},it=f({mipmap:ef,"nearest mipmap nearest":Ds,"linear mipmap nearest":Nl,"nearest mipmap linear":Ml,"linear mipmap linear":ef},ct),dt={none:0,browser:Dl},gt={uint8:Na,rgba4:rn,rgb565:Zi,"rgb5 a1":qn},rt={alpha:Ut,luminance:sr,"luminance alpha":Gr,rgb:Ar,rgba:vt,rgba4:Or,"rgb5 a1":Ur,rgb565:ao},pt={};B.ext_srgb&&(rt.srgb=wi,rt.srgba=Ji),B.oes_texture_float&&(gt.float32=gt.float=xu),B.oes_texture_half_float&&(gt.float16=gt["half float"]=wn),B.webgl_depth_texture&&(f(rt,{depth:Pa,"depth stencil":Qi}),f(gt,{uint16:Qc,uint32:js,"depth stencil":Kc})),B.webgl_compressed_texture_s3tc&&f(pt,{"rgb s3tc dxt1":ja,"rgba s3tc dxt1":si,"rgba s3tc dxt3":ea,"rgba s3tc dxt5":wu}),B.webgl_compressed_texture_atc&&f(pt,{"rgb atc":qc,"rgba atc explicit alpha":xl,"rgba atc interpolated alpha":Sl}),B.webgl_compressed_texture_pvrtc&&f(pt,{"rgb pvrtc 4bppv1":Zc,"rgb pvrtc 2bppv1":Tl,"rgba pvrtc 4bppv1":Ps,"rgba pvrtc 2bppv1":Al}),B.webgl_compressed_texture_etc1&&(pt["rgb etc1"]=Pl);var me=Array.prototype.slice.call(x.getParameter(C));Object.keys(pt).forEach(function(I){var ke=pt[I];me.indexOf(ke)>=0&&(rt[I]=ke)});var Fe=Object.keys(rt);Z.textureFormats=Fe;var at=[];Object.keys(rt).forEach(function(I){var ke=rt[I];at[ke]=I});var Ot=[];Object.keys(gt).forEach(function(I){var ke=gt[I];Ot[ke]=I});var qe=[];Object.keys(ct).forEach(function(I){var ke=ct[I];qe[ke]=I});var St=[];Object.keys(it).forEach(function(I){var ke=it[I];St[ke]=I});var Qe=[];Object.keys(nt).forEach(function(I){var ke=nt[I];Qe[ke]=I});var ht=Fe.reduce(function(I,ke){var Me=rt[ke];return Me===sr||Me===Ut||Me===sr||Me===Gr||Me===Pa||Me===Qi||B.ext_srgb&&(Me===wi||Me===Ji)?I[Me]=Me:Me===Ur||ke.indexOf("rgba")>=0?I[Me]=vt:I[Me]=Ar,I},{});function Je(){this.internalformat=vt,this.format=vt,this.type=Na,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Dl,this.width=0,this.height=0,this.channels=0}function yt(I,ke){I.internalformat=ke.internalformat,I.format=ke.format,I.type=ke.type,I.compressed=ke.compressed,I.premultiplyAlpha=ke.premultiplyAlpha,I.flipY=ke.flipY,I.unpackAlignment=ke.unpackAlignment,I.colorSpace=ke.colorSpace,I.width=ke.width,I.height=ke.height,I.channels=ke.channels}function zt(I,ke){if(!(typeof ke!="object"||!ke)){if("premultiplyAlpha"in ke&&(k.type(ke.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),I.premultiplyAlpha=ke.premultiplyAlpha),"flipY"in ke&&(k.type(ke.flipY,"boolean","invalid texture flip"),I.flipY=ke.flipY),"alignment"in ke&&(k.oneOf(ke.alignment,[1,2,4,8],"invalid texture unpack alignment"),I.unpackAlignment=ke.alignment),"colorSpace"in ke&&(k.parameter(ke.colorSpace,dt,"invalid colorSpace"),I.colorSpace=dt[ke.colorSpace]),"type"in ke){var Me=ke.type;k(B.oes_texture_float||!(Me==="float"||Me==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),k(B.oes_texture_half_float||!(Me==="half float"||Me==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),k(B.webgl_depth_texture||!(Me==="uint16"||Me==="uint32"||Me==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(Me,gt,"invalid texture type"),I.type=gt[Me]}var Nt=I.width,Er=I.height,H=I.channels,R=!1;"shape"in ke?(k(Array.isArray(ke.shape)&&ke.shape.length>=2,"shape must be an array"),Nt=ke.shape[0],Er=ke.shape[1],ke.shape.length===3&&(H=ke.shape[2],k(H>0&&H<=4,"invalid number of channels"),R=!0),k(Nt>=0&&Nt<=Z.maxTextureSize,"invalid width"),k(Er>=0&&Er<=Z.maxTextureSize,"invalid height")):("radius"in ke&&(Nt=Er=ke.radius,k(Nt>=0&&Nt<=Z.maxTextureSize,"invalid radius")),"width"in ke&&(Nt=ke.width,k(Nt>=0&&Nt<=Z.maxTextureSize,"invalid width")),"height"in ke&&(Er=ke.height,k(Er>=0&&Er<=Z.maxTextureSize,"invalid height")),"channels"in ke&&(H=ke.channels,k(H>0&&H<=4,"invalid number of channels"),R=!0)),I.width=Nt|0,I.height=Er|0,I.channels=H|0;var re=!1;if("format"in ke){var ge=ke.format;k(B.webgl_depth_texture||!(ge==="depth"||ge==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(ge,rt,"invalid texture format");var we=I.internalformat=rt[ge];I.format=ht[we],ge in gt&&("type"in ke||(I.type=gt[ge])),ge in pt&&(I.compressed=!0),re=!0}!R&&re?I.channels=Po[I.format]:R&&!re?I.channels!==Cs[I.format]&&(I.format=I.internalformat=Cs[I.channels]):re&&R&&k(I.channels===Po[I.format],"number of channels inconsistent with specified format")}}function Zt(I){x.pixelStorei(Zn,I.flipY),x.pixelStorei(hh,I.premultiplyAlpha),x.pixelStorei(yh,I.colorSpace),x.pixelStorei(dh,I.unpackAlignment)}function mt(){Je.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ze(I,ke){var Me=null;if(Mn(ke)?Me=ke:ke&&(k.type(ke,"object","invalid pixel data type"),zt(I,ke),"x"in ke&&(I.xOffset=ke.x|0),"y"in ke&&(I.yOffset=ke.y|0),Mn(ke.data)&&(Me=ke.data)),k(!I.compressed||Me instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ke.copy){k(!Me,"can not specify copy and data field for the same texture");var Nt=Xe.viewportWidth,Er=Xe.viewportHeight;I.width=I.width||Nt-I.xOffset,I.height=I.height||Er-I.yOffset,I.needsCopy=!0,k(I.xOffset>=0&&I.xOffset<Nt&&I.yOffset>=0&&I.yOffset<Er&&I.width>0&&I.width<=Nt&&I.height>0&&I.height<=Er,"copy texture read out of bounds")}else if(!Me)I.width=I.width||1,I.height=I.height||1,I.channels=I.channels||4;else if(a(Me))I.channels=I.channels||4,I.data=Me,!("type"in ke)&&I.type===Na&&(I.type=Bl(Me));else if(sf(Me))I.channels=I.channels||4,Fl(I,Me),I.alignment=1,I.needsFree=!0;else if(Yn(Me)){var H=Me.data;!Array.isArray(H)&&I.type===Na&&(I.type=Bl(H));var R=Me.shape,re=Me.stride,ge,we,ne,ee,le,U;R.length===3?(ne=R[2],U=re[2]):(k(R.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ne=1,U=1),ge=R[0],we=R[1],ee=re[0],le=re[1],I.alignment=1,I.width=ge,I.height=we,I.channels=ne,I.format=I.internalformat=Cs[ne],I.needsFree=!0,Gl(I,H,ee,le,U,Me.offset)}else if(ff(Me)||lf(Me)||Il(Me))ff(Me)||lf(Me)?I.element=Me:I.element=Me.canvas,I.width=I.element.width,I.height=I.element.height,I.channels=4;else if(kl(Me))I.element=Me,I.width=Me.width,I.height=Me.height,I.channels=4;else if(Ll(Me))I.element=Me,I.width=Me.naturalWidth,I.height=Me.naturalHeight,I.channels=4;else if(Au(Me))I.element=Me,I.width=Me.videoWidth,I.height=Me.videoHeight,I.channels=4;else if(cf(Me)){var J=I.width||Me[0].length,G=I.height||Me.length,he=I.channels;b(Me[0][0])?he=he||Me[0][0].length:he=he||1;for(var Ae=ho.shape(Me),Ve=1,$e=0;$e<Ae.length;++$e)Ve*=Ae[$e];var Ue=Rn(I,Ve);ho.flatten(Me,Ae,"",Ue),zr(I,Ue),I.alignment=1,I.width=J,I.height=G,I.channels=he,I.format=I.internalformat=Cs[he],I.needsFree=!0}I.type===xu?k(Z.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):I.type===wn&&k(Z.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ye(I,ke,Me){var Nt=I.element,Er=I.data,H=I.internalformat,R=I.format,re=I.type,ge=I.width,we=I.height;Zt(I),Nt?x.texImage2D(ke,Me,R,R,re,Nt):I.compressed?x.compressedTexImage2D(ke,Me,H,ge,we,0,Er):I.needsCopy?(Ie(),x.copyTexImage2D(ke,Me,R,I.xOffset,I.yOffset,ge,we,0)):x.texImage2D(ke,Me,R,ge,we,0,R,re,Er||null)}function Jt(I,ke,Me,Nt,Er){var H=I.element,R=I.data,re=I.internalformat,ge=I.format,we=I.type,ne=I.width,ee=I.height;Zt(I),H?x.texSubImage2D(ke,Er,Me,Nt,ge,we,H):I.compressed?x.compressedTexSubImage2D(ke,Er,Me,Nt,re,ne,ee,R):I.needsCopy?(Ie(),x.copyTexSubImage2D(ke,Er,Me,Nt,I.xOffset,I.yOffset,ne,ee)):x.texSubImage2D(ke,Er,Me,Nt,ne,ee,ge,we,R)}var be=[];function kt(){return be.pop()||new mt}function mr(I){I.needsFree&&tn.freeType(I.data),mt.call(I),be.push(I)}function ir(){Je.call(this),this.genMipmaps=!1,this.mipmapHint=Tu,this.mipmask=0,this.images=Array(16)}function vr(I,ke,Me){var Nt=I.images[0]=kt();I.mipmask=1,Nt.width=I.width=ke,Nt.height=I.height=Me,Nt.channels=I.channels=4}function Mr(I,ke){var Me=null;if(Mn(ke))Me=I.images[0]=kt(),yt(Me,I),Ze(Me,ke),I.mipmask=1;else if(zt(I,ke),Array.isArray(ke.mipmap))for(var Nt=ke.mipmap,Er=0;Er<Nt.length;++Er)Me=I.images[Er]=kt(),yt(Me,I),Me.width>>=Er,Me.height>>=Er,Ze(Me,Nt[Er]),I.mipmask|=1<<Er;else Me=I.images[0]=kt(),yt(Me,I),Ze(Me,ke),I.mipmask=1;yt(I,I.images[0]),I.compressed&&(I.internalformat===ja||I.internalformat===si||I.internalformat===ea||I.internalformat===wu)&&k(I.width%4===0&&I.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function cn(I,ke){for(var Me=I.images,Nt=0;Nt<Me.length;++Nt){if(!Me[Nt])return;Ye(Me[Nt],ke,Nt)}}var En=[];function xr(){var I=En.pop()||new ir;Je.call(I),I.mipmask=0;for(var ke=0;ke<16;++ke)I.images[ke]=null;return I}function vn(I){for(var ke=I.images,Me=0;Me<ke.length;++Me)ke[Me]&&mr(ke[Me]),ke[Me]=null;En.push(I)}function Wr(){this.minFilter=Jc,this.magFilter=Jc,this.wrapS=Su,this.wrapT=Su,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Tu}function fn(I,ke){if("min"in ke){var Me=ke.min;k.parameter(Me,it),I.minFilter=it[Me],vh.indexOf(I.minFilter)>=0&&!("faces"in ke)&&(I.genMipmaps=!0)}if("mag"in ke){var Nt=ke.mag;k.parameter(Nt,ct),I.magFilter=ct[Nt]}var Er=I.wrapS,H=I.wrapT;if("wrap"in ke){var R=ke.wrap;typeof R=="string"?(k.parameter(R,nt),Er=H=nt[R]):Array.isArray(R)&&(k.parameter(R[0],nt),k.parameter(R[1],nt),Er=nt[R[0]],H=nt[R[1]])}else{if("wrapS"in ke){var re=ke.wrapS;k.parameter(re,nt),Er=nt[re]}if("wrapT"in ke){var ge=ke.wrapT;k.parameter(ge,nt),H=nt[ge]}}if(I.wrapS=Er,I.wrapT=H,"anisotropic"in ke){var we=ke.anisotropic;k(typeof we=="number"&&we>=1&&we<=Z.maxAnisotropic,"aniso samples must be between 1 and "),I.anisotropic=ke.anisotropic}if("mipmap"in ke){var ne=!1;switch(typeof ke.mipmap){case"string":k.parameter(ke.mipmap,tt,"invalid mipmap hint"),I.mipmapHint=tt[ke.mipmap],I.genMipmaps=!0,ne=!0;break;case"boolean":ne=I.genMipmaps=ke.mipmap;break;case"object":k(Array.isArray(ke.mipmap),"invalid mipmap type"),I.genMipmaps=!1,ne=!0;break;default:k.raise("invalid mipmap type")}ne&&!("min"in ke)&&(I.minFilter=Ds)}}function gn(I,ke){x.texParameteri(ke,Ma,I.minFilter),x.texParameteri(ke,Rs,I.magFilter),x.texParameteri(ke,sh,I.wrapS),x.texParameteri(ke,Ns,I.wrapT),B.ext_texture_filter_anisotropic&&x.texParameteri(ke,Rl,I.anisotropic),I.genMipmaps&&(x.hint(fh,I.mipmapHint),x.generateMipmap(ke))}var Yr=0,Sn={},Bn=Z.maxTextureUnits,on=Array(Bn).map(function(){return null});function cr(I){Je.call(this),this.mipmask=0,this.internalformat=vt,this.id=Yr++,this.refCount=1,this.target=I,this.texture=x.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wr,Be.profile&&(this.stats={size:0})}function mn(I){x.activeTexture(Ra),x.bindTexture(I.target,I.texture)}function jr(){var I=on[0];I?x.bindTexture(I.target,I.texture):x.bindTexture(K,null)}function $t(I){var ke=I.texture;k(ke,"must not double destroy texture");var Me=I.unit,Nt=I.target;Me>=0&&(x.activeTexture(Ra+Me),x.bindTexture(Nt,null),on[Me]=null),x.deleteTexture(ke),I.texture=null,I.params=null,I.pixels=null,I.refCount=0,delete Sn[I.id],Ce.textureCount--}f(cr.prototype,{bind:function(){var I=this;I.bindCount+=1;var ke=I.unit;if(ke<0){for(var Me=0;Me<Bn;++Me){var Nt=on[Me];if(Nt){if(Nt.bindCount>0)continue;Nt.unit=-1}on[Me]=I,ke=Me;break}ke>=Bn&&k.raise("insufficient number of texture units"),Be.profile&&Ce.maxTextureUnits<ke+1&&(Ce.maxTextureUnits=ke+1),I.unit=ke,x.activeTexture(Ra+ke),x.bindTexture(I.target,I.texture)}return ke},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$t(this)}});function br(I,ke){var Me=new cr(K);Sn[Me.id]=Me,Ce.textureCount++;function Nt(R,re){var ge=Me.texInfo;Wr.call(ge);var we=xr();return typeof R=="number"?typeof re=="number"?vr(we,R|0,re|0):vr(we,R|0,R|0):R?(k.type(R,"object","invalid arguments to regl.texture"),fn(ge,R),Mr(we,R)):vr(we,1,1),ge.genMipmaps&&(we.mipmask=(we.width<<1)-1),Me.mipmask=we.mipmask,yt(Me,we),k.texture2D(ge,we,Z),Me.internalformat=we.internalformat,Nt.width=we.width,Nt.height=we.height,mn(Me),cn(we,K),gn(ge,K),jr(),vn(we),Be.profile&&(Me.stats.size=Pr(Me.internalformat,Me.type,we.width,we.height,ge.genMipmaps,!1)),Nt.format=at[Me.internalformat],Nt.type=Ot[Me.type],Nt.mag=qe[ge.magFilter],Nt.min=St[ge.minFilter],Nt.wrapS=Qe[ge.wrapS],Nt.wrapT=Qe[ge.wrapT],Nt}function Er(R,re,ge,we){k(!!R,"must specify image data");var ne=re|0,ee=ge|0,le=we|0,U=kt();return yt(U,Me),U.width=0,U.height=0,Ze(U,R),U.width=U.width||(Me.width>>le)-ne,U.height=U.height||(Me.height>>le)-ee,k(Me.type===U.type&&Me.format===U.format&&Me.internalformat===U.internalformat,"incompatible format for texture.subimage"),k(ne>=0&&ee>=0&&ne+U.width<=Me.width&&ee+U.height<=Me.height,"texture.subimage write out of bounds"),k(Me.mipmask&1<<le,"missing mipmap data"),k(U.data||U.element||U.needsCopy,"missing image data"),mn(Me),Jt(U,K,ne,ee,le),jr(),mr(U),Nt}function H(R,re){var ge=R|0,we=re|0||ge;if(ge===Me.width&&we===Me.height)return Nt;Nt.width=Me.width=ge,Nt.height=Me.height=we,mn(Me);for(var ne=0;Me.mipmask>>ne;++ne){var ee=ge>>ne,le=we>>ne;if(!ee||!le)break;x.texImage2D(K,ne,Me.format,ee,le,0,Me.format,Me.type,null)}return jr(),Be.profile&&(Me.stats.size=Pr(Me.internalformat,Me.type,ge,we,!1,!1)),Nt}return Nt(I,ke),Nt.subimage=Er,Nt.resize=H,Nt._reglType="texture2d",Nt._texture=Me,Be.profile&&(Nt.stats=Me.stats),Nt.destroy=function(){Me.decRef()},Nt}function Sr(I,ke,Me,Nt,Er,H){var R=new cr(Ee);Sn[R.id]=R,Ce.cubeCount++;var re=new Array(6);function ge(ee,le,U,J,G,he){var Ae,Ve=R.texInfo;for(Wr.call(Ve),Ae=0;Ae<6;++Ae)re[Ae]=xr();if(typeof ee=="number"||!ee){var $e=ee|0||1;for(Ae=0;Ae<6;++Ae)vr(re[Ae],$e,$e)}else if(typeof ee=="object")if(le)Mr(re[0],ee),Mr(re[1],le),Mr(re[2],U),Mr(re[3],J),Mr(re[4],G),Mr(re[5],he);else if(fn(Ve,ee),zt(R,ee),"faces"in ee){var Ue=ee.faces;for(k(Array.isArray(Ue)&&Ue.length===6,"cube faces must be a length 6 array"),Ae=0;Ae<6;++Ae)k(typeof Ue[Ae]=="object"&&!!Ue[Ae],"invalid input for cube map face"),yt(re[Ae],R),Mr(re[Ae],Ue[Ae])}else for(Ae=0;Ae<6;++Ae)Mr(re[Ae],ee);else k.raise("invalid arguments to cube map");for(yt(R,re[0]),Z.npotTextureCube||k(S(R.width)&&S(R.height),"your browser does not support non power or two texture dimensions"),Ve.genMipmaps?R.mipmask=(re[0].width<<1)-1:R.mipmask=re[0].mipmask,k.textureCube(R,Ve,re,Z),R.internalformat=re[0].internalformat,ge.width=re[0].width,ge.height=re[0].height,mn(R),Ae=0;Ae<6;++Ae)cn(re[Ae],ze+Ae);for(gn(Ve,Ee),jr(),Be.profile&&(R.stats.size=Pr(R.internalformat,R.type,ge.width,ge.height,Ve.genMipmaps,!0)),ge.format=at[R.internalformat],ge.type=Ot[R.type],ge.mag=qe[Ve.magFilter],ge.min=St[Ve.minFilter],ge.wrapS=Qe[Ve.wrapS],ge.wrapT=Qe[Ve.wrapT],Ae=0;Ae<6;++Ae)vn(re[Ae]);return ge}function we(ee,le,U,J,G){k(!!le,"must specify image data"),k(typeof ee=="number"&&ee===(ee|0)&&ee>=0&&ee<6,"invalid face");var he=U|0,Ae=J|0,Ve=G|0,$e=kt();return yt($e,R),$e.width=0,$e.height=0,Ze($e,le),$e.width=$e.width||(R.width>>Ve)-he,$e.height=$e.height||(R.height>>Ve)-Ae,k(R.type===$e.type&&R.format===$e.format&&R.internalformat===$e.internalformat,"incompatible format for texture.subimage"),k(he>=0&&Ae>=0&&he+$e.width<=R.width&&Ae+$e.height<=R.height,"texture.subimage write out of bounds"),k(R.mipmask&1<<Ve,"missing mipmap data"),k($e.data||$e.element||$e.needsCopy,"missing image data"),mn(R),Jt($e,ze+ee,he,Ae,Ve),jr(),mr($e),ge}function ne(ee){var le=ee|0;if(le!==R.width){ge.width=R.width=le,ge.height=R.height=le,mn(R);for(var U=0;U<6;++U)for(var J=0;R.mipmask>>J;++J)x.texImage2D(ze+U,J,R.format,le>>J,le>>J,0,R.format,R.type,null);return jr(),Be.profile&&(R.stats.size=Pr(R.internalformat,R.type,ge.width,ge.height,!1,!0)),ge}}return ge(I,ke,Me,Nt,Er,H),ge.subimage=we,ge.resize=ne,ge._reglType="textureCube",ge._texture=R,Be.profile&&(ge.stats=R.stats),ge.destroy=function(){R.decRef()},ge}function Fr(){for(var I=0;I<Bn;++I)x.activeTexture(Ra+I),x.bindTexture(K,null),on[I]=null;An(Sn).forEach($t),Ce.cubeCount=0,Ce.textureCount=0}Be.profile&&(Ce.getTotalTextureSize=function(){var I=0;return Object.keys(Sn).forEach(function(ke){I+=Sn[ke].stats.size}),I});function Qo(){for(var I=0;I<Bn;++I){var ke=on[I];ke&&(ke.bindCount=0,ke.unit=-1,on[I]=null)}An(Sn).forEach(function(Me){Me.texture=x.createTexture(),x.bindTexture(Me.target,Me.texture);for(var Nt=0;Nt<32;++Nt)if(Me.mipmask&1<<Nt)if(Me.target===K)x.texImage2D(K,Nt,Me.internalformat,Me.width>>Nt,Me.height>>Nt,0,Me.internalformat,Me.type,null);else for(var Er=0;Er<6;++Er)x.texImage2D(ze+Er,Nt,Me.internalformat,Me.width>>Nt,Me.height>>Nt,0,Me.internalformat,Me.type,null);gn(Me.texInfo,Me.target)})}function Wn(){for(var I=0;I<Bn;++I){var ke=on[I];ke&&(ke.bindCount=0,ke.unit=-1,on[I]=null),x.activeTexture(Ra+I),x.bindTexture(K,null),x.bindTexture(Ee,null)}}return{create2D:br,createCube:Sr,clear:Fr,getTexture:function(I){return null},restore:Qo,refresh:Wn}}var tr=36161,Kr=32854,Ul=32855,Is=36194,pf=33189,uo=36168,dn=34041,df=35907,hf=34836,yf=34842,vf=34843,jo=[];jo[Kr]=2,jo[Ul]=2,jo[Is]=2,jo[pf]=2,jo[uo]=1,jo[dn]=4,jo[df]=4,jo[hf]=16,jo[yf]=8,jo[vf]=6;function gf(x,B,Z){return jo[x]*B*Z}var zl=function(x,B,Z,Ie,Xe){var Ce={rgba4:Kr,rgb565:Is,"rgb5 a1":Ul,depth:pf,stencil:uo,"depth stencil":dn};B.ext_srgb&&(Ce.srgba=df),B.ext_color_buffer_half_float&&(Ce.rgba16f=yf,Ce.rgb16f=vf),B.webgl_color_buffer_float&&(Ce.rgba32f=hf);var Be=[];Object.keys(Ce).forEach(function(rt){var pt=Ce[rt];Be[pt]=rt});var tt=0,nt={};function ct(rt){this.id=tt++,this.refCount=1,this.renderbuffer=rt,this.format=Kr,this.width=0,this.height=0,Xe.profile&&(this.stats={size:0})}ct.prototype.decRef=function(){--this.refCount<=0&&it(this)};function it(rt){var pt=rt.renderbuffer;k(pt,"must not double destroy renderbuffer"),x.bindRenderbuffer(tr,null),x.deleteRenderbuffer(pt),rt.renderbuffer=null,rt.refCount=0,delete nt[rt.id],Ie.renderbufferCount--}function dt(rt,pt){var me=new ct(x.createRenderbuffer());nt[me.id]=me,Ie.renderbufferCount++;function Fe(Ot,qe){var St=0,Qe=0,ht=Kr;if(typeof Ot=="object"&&Ot){var Je=Ot;if("shape"in Je){var yt=Je.shape;k(Array.isArray(yt)&&yt.length>=2,"invalid renderbuffer shape"),St=yt[0]|0,Qe=yt[1]|0}else"radius"in Je&&(St=Qe=Je.radius|0),"width"in Je&&(St=Je.width|0),"height"in Je&&(Qe=Je.height|0);"format"in Je&&(k.parameter(Je.format,Ce,"invalid renderbuffer format"),ht=Ce[Je.format])}else typeof Ot=="number"?(St=Ot|0,typeof qe=="number"?Qe=qe|0:Qe=St):Ot?k.raise("invalid arguments to renderbuffer constructor"):St=Qe=1;if(k(St>0&&Qe>0&&St<=Z.maxRenderbufferSize&&Qe<=Z.maxRenderbufferSize,"invalid renderbuffer size"),!(St===me.width&&Qe===me.height&&ht===me.format))return Fe.width=me.width=St,Fe.height=me.height=Qe,me.format=ht,x.bindRenderbuffer(tr,me.renderbuffer),x.renderbufferStorage(tr,ht,St,Qe),k(x.getError()===0,"invalid render buffer format"),Xe.profile&&(me.stats.size=gf(me.format,me.width,me.height)),Fe.format=Be[me.format],Fe}function at(Ot,qe){var St=Ot|0,Qe=qe|0||St;return St===me.width&&Qe===me.height||(k(St>0&&Qe>0&&St<=Z.maxRenderbufferSize&&Qe<=Z.maxRenderbufferSize,"invalid renderbuffer size"),Fe.width=me.width=St,Fe.height=me.height=Qe,x.bindRenderbuffer(tr,me.renderbuffer),x.renderbufferStorage(tr,me.format,St,Qe),k(x.getError()===0,"invalid render buffer format"),Xe.profile&&(me.stats.size=gf(me.format,me.width,me.height))),Fe}return Fe(rt,pt),Fe.resize=at,Fe._reglType="renderbuffer",Fe._renderbuffer=me,Xe.profile&&(Fe.stats=me.stats),Fe.destroy=function(){me.decRef()},Fe}Xe.profile&&(Ie.getTotalRenderbufferSize=function(){var rt=0;return Object.keys(nt).forEach(function(pt){rt+=nt[pt].stats.size}),rt});function gt(){An(nt).forEach(function(rt){rt.renderbuffer=x.createRenderbuffer(),x.bindRenderbuffer(tr,rt.renderbuffer),x.renderbufferStorage(tr,rt.format,rt.width,rt.height)}),x.bindRenderbuffer(tr,null)}return{create:dt,clear:function(){An(nt).forEach(it)},restore:gt}},No=36160,ks=36161,go=3553,Ls=34069,Bs=36064,Mo=36096,Hl=36128,Xl=33306,Vl=36053,gh=36054,mh=36055,bh=36057,Pu=36061,_h=36193,Wl=5121,Yl=5126,$l=6407,Fs=6408,Kl=6402,Eh=[$l,Fs],mf=[];mf[Fs]=4,mf[$l]=3;var Gs=[];Gs[Wl]=1,Gs[Yl]=4,Gs[_h]=2;var Oh=32854,bf=32855,wh=36194,xh=33189,Sh=36168,_f=34041,ql=35907,Th=34836,Zl=34842,Ah=34843,Ql=[Oh,bf,wh,ql,Zl,Ah,Th],Da={};Da[Vl]="complete",Da[gh]="incomplete attachment",Da[bh]="incomplete dimensions",Da[mh]="incomplete, missing attachment",Da[Pu]="unsupported";function Jl(x,B,Z,Ie,Xe,Ce){var Be={cur:null,next:null,dirty:!1,setFBO:null},tt=["rgba"],nt=["rgba4","rgb565","rgb5 a1"];B.ext_srgb&&nt.push("srgba"),B.ext_color_buffer_half_float&&nt.push("rgba16f","rgb16f"),B.webgl_color_buffer_float&&nt.push("rgba32f");var ct=["uint8"];B.oes_texture_half_float&&ct.push("half float","float16"),B.oes_texture_float&&ct.push("float","float32");function it(mt,Ze,Ye){this.target=mt,this.texture=Ze,this.renderbuffer=Ye;var Jt=0,be=0;Ze?(Jt=Ze.width,be=Ze.height):Ye&&(Jt=Ye.width,be=Ye.height),this.width=Jt,this.height=be}function dt(mt){mt&&(mt.texture&&mt.texture._texture.decRef(),mt.renderbuffer&&mt.renderbuffer._renderbuffer.decRef())}function gt(mt,Ze,Ye){if(mt)if(mt.texture){var Jt=mt.texture._texture,be=Math.max(1,Jt.width),kt=Math.max(1,Jt.height);k(be===Ze&&kt===Ye,"inconsistent width/height for supplied texture"),Jt.refCount+=1}else{var mr=mt.renderbuffer._renderbuffer;k(mr.width===Ze&&mr.height===Ye,"inconsistent width/height for renderbuffer"),mr.refCount+=1}}function rt(mt,Ze){Ze&&(Ze.texture?x.framebufferTexture2D(No,mt,Ze.target,Ze.texture._texture.texture,0):x.framebufferRenderbuffer(No,mt,ks,Ze.renderbuffer._renderbuffer.renderbuffer))}function pt(mt){var Ze=go,Ye=null,Jt=null,be=mt;typeof mt=="object"&&(be=mt.data,"target"in mt&&(Ze=mt.target|0)),k.type(be,"function","invalid attachment data");var kt=be._reglType;return kt==="texture2d"?(Ye=be,k(Ze===go)):kt==="textureCube"?(Ye=be,k(Ze>=Ls&&Ze<Ls+6,"invalid cube map target")):kt==="renderbuffer"?(Jt=be,Ze=ks):k.raise("invalid regl object for attachment"),new it(Ze,Ye,Jt)}function me(mt,Ze,Ye,Jt,be){if(Ye){var kt=Ie.create2D({width:mt,height:Ze,format:Jt,type:be});return kt._texture.refCount=0,new it(go,kt,null)}else{var mr=Xe.create({width:mt,height:Ze,format:Jt});return mr._renderbuffer.refCount=0,new it(ks,null,mr)}}function Fe(mt){return mt&&(mt.texture||mt.renderbuffer)}function at(mt,Ze,Ye){mt&&(mt.texture?mt.texture.resize(Ze,Ye):mt.renderbuffer&&mt.renderbuffer.resize(Ze,Ye),mt.width=Ze,mt.height=Ye)}var Ot=0,qe={};function St(){this.id=Ot++,qe[this.id]=this,this.framebuffer=x.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Qe(mt){mt.colorAttachments.forEach(dt),dt(mt.depthAttachment),dt(mt.stencilAttachment),dt(mt.depthStencilAttachment)}function ht(mt){var Ze=mt.framebuffer;k(Ze,"must not double destroy framebuffer"),x.deleteFramebuffer(Ze),mt.framebuffer=null,Ce.framebufferCount--,delete qe[mt.id]}function Je(mt){var Ze;x.bindFramebuffer(No,mt.framebuffer);var Ye=mt.colorAttachments;for(Ze=0;Ze<Ye.length;++Ze)rt(Bs+Ze,Ye[Ze]);for(Ze=Ye.length;Ze<Z.maxColorAttachments;++Ze)x.framebufferTexture2D(No,Bs+Ze,go,null,0);x.framebufferTexture2D(No,Xl,go,null,0),x.framebufferTexture2D(No,Mo,go,null,0),x.framebufferTexture2D(No,Hl,go,null,0),rt(Mo,mt.depthAttachment),rt(Hl,mt.stencilAttachment),rt(Xl,mt.depthStencilAttachment);var Jt=x.checkFramebufferStatus(No);!x.isContextLost()&&Jt!==Vl&&k.raise("framebuffer configuration not supported, status = "+Da[Jt]),x.bindFramebuffer(No,Be.next?Be.next.framebuffer:null),Be.cur=Be.next,x.getError()}function yt(mt,Ze){var Ye=new St;Ce.framebufferCount++;function Jt(kt,mr){var ir;k(Be.next!==Ye,"can not update framebuffer which is currently in use");var vr=0,Mr=0,cn=!0,En=!0,xr=null,vn=!0,Wr="rgba",fn="uint8",gn=1,Yr=null,Sn=null,Bn=null,on=!1;if(typeof kt=="number")vr=kt|0,Mr=mr|0||vr;else if(!kt)vr=Mr=1;else{k.type(kt,"object","invalid arguments for framebuffer");var cr=kt;if("shape"in cr){var mn=cr.shape;k(Array.isArray(mn)&&mn.length>=2,"invalid shape for framebuffer"),vr=mn[0],Mr=mn[1]}else"radius"in cr&&(vr=Mr=cr.radius),"width"in cr&&(vr=cr.width),"height"in cr&&(Mr=cr.height);("color"in cr||"colors"in cr)&&(xr=cr.color||cr.colors,Array.isArray(xr)&&k(xr.length===1||B.webgl_draw_buffers,"multiple render targets not supported")),xr||("colorCount"in cr&&(gn=cr.colorCount|0,k(gn>0,"invalid color buffer count")),"colorTexture"in cr&&(vn=!!cr.colorTexture,Wr="rgba4"),"colorType"in cr&&(fn=cr.colorType,vn?(k(B.oes_texture_float||!(fn==="float"||fn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),k(B.oes_texture_half_float||!(fn==="half float"||fn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):fn==="half float"||fn==="float16"?(k(B.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wr="rgba16f"):(fn==="float"||fn==="float32")&&(k(B.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wr="rgba32f"),k.oneOf(fn,ct,"invalid color type")),"colorFormat"in cr&&(Wr=cr.colorFormat,tt.indexOf(Wr)>=0?vn=!0:nt.indexOf(Wr)>=0?vn=!1:vn?k.oneOf(cr.colorFormat,tt,"invalid color format for texture"):k.oneOf(cr.colorFormat,nt,"invalid color format for renderbuffer"))),("depthTexture"in cr||"depthStencilTexture"in cr)&&(on=!!(cr.depthTexture||cr.depthStencilTexture),k(!on||B.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in cr&&(typeof cr.depth=="boolean"?cn=cr.depth:(Yr=cr.depth,En=!1)),"stencil"in cr&&(typeof cr.stencil=="boolean"?En=cr.stencil:(Sn=cr.stencil,cn=!1)),"depthStencil"in cr&&(typeof cr.depthStencil=="boolean"?cn=En=cr.depthStencil:(Bn=cr.depthStencil,cn=!1,En=!1))}var jr=null,$t=null,br=null,Sr=null;if(Array.isArray(xr))jr=xr.map(pt);else if(xr)jr=[pt(xr)];else for(jr=new Array(gn),ir=0;ir<gn;++ir)jr[ir]=me(vr,Mr,vn,Wr,fn);k(B.webgl_draw_buffers||jr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),k(jr.length<=Z.maxColorAttachments,"too many color attachments, not supported"),vr=vr||jr[0].width,Mr=Mr||jr[0].height,Yr?$t=pt(Yr):cn&&!En&&($t=me(vr,Mr,on,"depth","uint32")),Sn?br=pt(Sn):En&&!cn&&(br=me(vr,Mr,!1,"stencil","uint8")),Bn?Sr=pt(Bn):!Yr&&!Sn&&En&&cn&&(Sr=me(vr,Mr,on,"depth stencil","depth stencil")),k(!!Yr+!!Sn+!!Bn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Fr=null;for(ir=0;ir<jr.length;++ir)if(gt(jr[ir],vr,Mr),k(!jr[ir]||jr[ir].texture&&Eh.indexOf(jr[ir].texture._texture.format)>=0||jr[ir].renderbuffer&&Ql.indexOf(jr[ir].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ir+" is invalid"),jr[ir]&&jr[ir].texture){var Qo=mf[jr[ir].texture._texture.format]*Gs[jr[ir].texture._texture.type];Fr===null?Fr=Qo:k(Fr===Qo,"all color attachments much have the same number of bits per pixel.")}return gt($t,vr,Mr),k(!$t||$t.texture&&$t.texture._texture.format===Kl||$t.renderbuffer&&$t.renderbuffer._renderbuffer.format===xh,"invalid depth attachment for framebuffer object"),gt(br,vr,Mr),k(!br||br.renderbuffer&&br.renderbuffer._renderbuffer.format===Sh,"invalid stencil attachment for framebuffer object"),gt(Sr,vr,Mr),k(!Sr||Sr.texture&&Sr.texture._texture.format===_f||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===_f,"invalid depth-stencil attachment for framebuffer object"),Qe(Ye),Ye.width=vr,Ye.height=Mr,Ye.colorAttachments=jr,Ye.depthAttachment=$t,Ye.stencilAttachment=br,Ye.depthStencilAttachment=Sr,Jt.color=jr.map(Fe),Jt.depth=Fe($t),Jt.stencil=Fe(br),Jt.depthStencil=Fe(Sr),Jt.width=Ye.width,Jt.height=Ye.height,Je(Ye),Jt}function be(kt,mr){k(Be.next!==Ye,"can not resize a framebuffer which is currently in use");var ir=Math.max(kt|0,1),vr=Math.max(mr|0||ir,1);if(ir===Ye.width&&vr===Ye.height)return Jt;for(var Mr=Ye.colorAttachments,cn=0;cn<Mr.length;++cn)at(Mr[cn],ir,vr);return at(Ye.depthAttachment,ir,vr),at(Ye.stencilAttachment,ir,vr),at(Ye.depthStencilAttachment,ir,vr),Ye.width=Jt.width=ir,Ye.height=Jt.height=vr,Je(Ye),Jt}return Jt(mt,Ze),f(Jt,{resize:be,_reglType:"framebuffer",_framebuffer:Ye,destroy:function(){ht(Ye),Qe(Ye)},use:function(kt){Be.setFBO({framebuffer:Jt},kt)}})}function zt(mt){var Ze=Array(6);function Ye(be){var kt;k(Ze.indexOf(Be.next)<0,"can not update framebuffer which is currently in use");var mr={color:null},ir=0,vr=null,Mr="rgba",cn="uint8",En=1;if(typeof be=="number")ir=be|0;else if(!be)ir=1;else{k.type(be,"object","invalid arguments for framebuffer");var xr=be;if("shape"in xr){var vn=xr.shape;k(Array.isArray(vn)&&vn.length>=2,"invalid shape for framebuffer"),k(vn[0]===vn[1],"cube framebuffer must be square"),ir=vn[0]}else"radius"in xr&&(ir=xr.radius|0),"width"in xr?(ir=xr.width|0,"height"in xr&&k(xr.height===ir,"must be square")):"height"in xr&&(ir=xr.height|0);("color"in xr||"colors"in xr)&&(vr=xr.color||xr.colors,Array.isArray(vr)&&k(vr.length===1||B.webgl_draw_buffers,"multiple render targets not supported")),vr||("colorCount"in xr&&(En=xr.colorCount|0,k(En>0,"invalid color buffer count")),"colorType"in xr&&(k.oneOf(xr.colorType,ct,"invalid color type"),cn=xr.colorType),"colorFormat"in xr&&(Mr=xr.colorFormat,k.oneOf(xr.colorFormat,tt,"invalid color format for texture"))),"depth"in xr&&(mr.depth=xr.depth),"stencil"in xr&&(mr.stencil=xr.stencil),"depthStencil"in xr&&(mr.depthStencil=xr.depthStencil)}var Wr;if(vr)if(Array.isArray(vr))for(Wr=[],kt=0;kt<vr.length;++kt)Wr[kt]=vr[kt];else Wr=[vr];else{Wr=Array(En);var fn={radius:ir,format:Mr,type:cn};for(kt=0;kt<En;++kt)Wr[kt]=Ie.createCube(fn)}for(mr.color=Array(Wr.length),kt=0;kt<Wr.length;++kt){var gn=Wr[kt];k(typeof gn=="function"&&gn._reglType==="textureCube","invalid cube map"),ir=ir||gn.width,k(gn.width===ir&&gn.height===ir,"invalid cube map shape"),mr.color[kt]={target:Ls,data:Wr[kt]}}for(kt=0;kt<6;++kt){for(var Yr=0;Yr<Wr.length;++Yr)mr.color[Yr].target=Ls+kt;kt>0&&(mr.depth=Ze[0].depth,mr.stencil=Ze[0].stencil,mr.depthStencil=Ze[0].depthStencil),Ze[kt]?Ze[kt](mr):Ze[kt]=yt(mr)}return f(Ye,{width:ir,height:ir,color:Wr})}function Jt(be){var kt,mr=be|0;if(k(mr>0&&mr<=Z.maxCubeMapSize,"invalid radius for cube fbo"),mr===Ye.width)return Ye;var ir=Ye.color;for(kt=0;kt<ir.length;++kt)ir[kt].resize(mr);for(kt=0;kt<6;++kt)Ze[kt].resize(mr);return Ye.width=Ye.height=mr,Ye}return Ye(mt),f(Ye,{faces:Ze,resize:Jt,_reglType:"framebufferCube",destroy:function(){Ze.forEach(function(be){be.destroy()})}})}function Zt(){Be.cur=null,Be.next=null,Be.dirty=!0,An(qe).forEach(function(mt){mt.framebuffer=x.createFramebuffer(),Je(mt)})}return f(Be,{getFramebuffer:function(mt){if(typeof mt=="function"&&mt._reglType==="framebuffer"){var Ze=mt._framebuffer;if(Ze instanceof St)return Ze}return null},create:yt,createCube:zt,clear:function(){An(qe).forEach(ht)},restore:Zt})}var Ph=5126,Ef=34962;function Of(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ph,this.offset=0,this.stride=0,this.divisor=0}function jh(x,B,Z,Ie,Xe){for(var Ce=Z.maxAttributes,Be=new Array(Ce),tt=0;tt<Ce;++tt)Be[tt]=new Of;var nt=0,ct={},it={Record:Of,scope:{},state:Be,currentVAO:null,targetVAO:null,restore:gt()?qe:function(){},createVAO:St,getVAO:pt,destroyBuffer:dt,setVAO:gt()?me:Fe,clear:gt()?at:function(){}};function dt(Qe){for(var ht=0;ht<Be.length;++ht){var Je=Be[ht];Je.buffer===Qe&&(x.disableVertexAttribArray(ht),Je.buffer=null)}}function gt(){return B.oes_vertex_array_object}function rt(){return B.angle_instanced_arrays}function pt(Qe){return typeof Qe=="function"&&Qe._vao?Qe._vao:null}function me(Qe){if(Qe!==it.currentVAO){var ht=gt();Qe?ht.bindVertexArrayOES(Qe.vao):ht.bindVertexArrayOES(null),it.currentVAO=Qe}}function Fe(Qe){if(Qe!==it.currentVAO){if(Qe)Qe.bindAttrs();else for(var ht=rt(),Je=0;Je<Be.length;++Je){var yt=Be[Je];yt.buffer?(x.enableVertexAttribArray(Je),x.vertexAttribPointer(Je,yt.size,yt.type,yt.normalized,yt.stride,yt.offfset),ht&&yt.divisor&&ht.vertexAttribDivisorANGLE(Je,yt.divisor)):(x.disableVertexAttribArray(Je),x.vertexAttrib4f(Je,yt.x,yt.y,yt.z,yt.w))}it.currentVAO=Qe}}function at(){An(ct).forEach(function(Qe){Qe.destroy()})}function Ot(){this.id=++nt,this.attributes=[];var Qe=gt();Qe?this.vao=Qe.createVertexArrayOES():this.vao=null,ct[this.id]=this,this.buffers=[]}Ot.prototype.bindAttrs=function(){for(var Qe=rt(),ht=this.attributes,Je=0;Je<ht.length;++Je){var yt=ht[Je];yt.buffer?(x.enableVertexAttribArray(Je),x.bindBuffer(Ef,yt.buffer.buffer),x.vertexAttribPointer(Je,yt.size,yt.type,yt.normalized,yt.stride,yt.offset),Qe&&yt.divisor&&Qe.vertexAttribDivisorANGLE(Je,yt.divisor)):(x.disableVertexAttribArray(Je),x.vertexAttrib4f(Je,yt.x,yt.y,yt.z,yt.w))}for(var zt=ht.length;zt<Ce;++zt)x.disableVertexAttribArray(zt)},Ot.prototype.refresh=function(){var Qe=gt();Qe&&(Qe.bindVertexArrayOES(this.vao),this.bindAttrs(),it.currentVAO=this)},Ot.prototype.destroy=function(){if(this.vao){var Qe=gt();this===it.currentVAO&&(it.currentVAO=null,Qe.bindVertexArrayOES(null)),Qe.deleteVertexArrayOES(this.vao),this.vao=null}ct[this.id]&&(delete ct[this.id],Ie.vaoCount-=1)};function qe(){var Qe=gt();Qe&&An(ct).forEach(function(ht){ht.refresh()})}function St(Qe){var ht=new Ot;Ie.vaoCount+=1;function Je(yt){k(Array.isArray(yt),"arguments to vertex array constructor must be an array"),k(yt.length<Ce,"too many attributes"),k(yt.length>0,"must specify at least one attribute");var zt={},Zt=ht.attributes;Zt.length=yt.length;for(var mt=0;mt<yt.length;++mt){var Ze=yt[mt],Ye=Zt[mt]=new Of,Jt=Ze.data||Ze;if(Array.isArray(Jt)||a(Jt)||Yn(Jt)){var be;ht.buffers[mt]&&(be=ht.buffers[mt],a(Jt)&&be._buffer.byteLength>=Jt.byteLength?be.subdata(Jt):(be.destroy(),ht.buffers[mt]=null)),ht.buffers[mt]||(be=ht.buffers[mt]=Xe.create(Ze,Ef,!1,!0)),Ye.buffer=Xe.getBuffer(be),Ye.size=Ye.buffer.dimension|0,Ye.normalized=!1,Ye.type=Ye.buffer.dtype,Ye.offset=0,Ye.stride=0,Ye.divisor=0,Ye.state=1,zt[mt]=1}else Xe.getBuffer(Ze)?(Ye.buffer=Xe.getBuffer(Ze),Ye.size=Ye.buffer.dimension|0,Ye.normalized=!1,Ye.type=Ye.buffer.dtype,Ye.offset=0,Ye.stride=0,Ye.divisor=0,Ye.state=1):Xe.getBuffer(Ze.buffer)?(Ye.buffer=Xe.getBuffer(Ze.buffer),Ye.size=(+Ze.size||Ye.buffer.dimension)|0,Ye.normalized=!!Ze.normalized||!1,"type"in Ze?(k.parameter(Ze.type,vo,"invalid buffer type"),Ye.type=vo[Ze.type]):Ye.type=Ye.buffer.dtype,Ye.offset=(Ze.offset||0)|0,Ye.stride=(Ze.stride||0)|0,Ye.divisor=(Ze.divisor||0)|0,Ye.state=1,k(Ye.size>=1&&Ye.size<=4,"size must be between 1 and 4"),k(Ye.offset>=0,"invalid offset"),k(Ye.stride>=0&&Ye.stride<=255,"stride must be between 0 and 255"),k(Ye.divisor>=0,"divisor must be positive"),k(!Ye.divisor||!!B.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ze?(k(mt>0,"first attribute must not be a constant"),Ye.x=+Ze.x||0,Ye.y=+Ze.y||0,Ye.z=+Ze.z||0,Ye.w=+Ze.w||0,Ye.state=2):k(!1,"invalid attribute spec for location "+mt)}for(var kt=0;kt<ht.buffers.length;++kt)!zt[kt]&&ht.buffers[kt]&&(ht.buffers[kt].destroy(),ht.buffers[kt]=null);return ht.refresh(),Je}return Je.destroy=function(){for(var yt=0;yt<ht.buffers.length;++yt)ht.buffers[yt]&&ht.buffers[yt].destroy();ht.buffers.length=0,ht.destroy()},Je._vao=ht,Je._reglType="vao",Je(Qe)}return it}var wf=35632,Nh=35633,ep=35718,tp=35721;function Mh(x,B,Z,Ie){var Xe={},Ce={};function Be(me,Fe,at,Ot){this.name=me,this.id=Fe,this.location=at,this.info=Ot}function tt(me,Fe){for(var at=0;at<me.length;++at)if(me[at].id===Fe.id){me[at].location=Fe.location;return}me.push(Fe)}function nt(me,Fe,at){var Ot=me===wf?Xe:Ce,qe=Ot[Fe];if(!qe){var St=B.str(Fe);qe=x.createShader(me),x.shaderSource(qe,St),x.compileShader(qe),k.shaderError(x,qe,St,me,at),Ot[Fe]=qe}return qe}var ct={},it=[],dt=0;function gt(me,Fe){this.id=dt++,this.fragId=me,this.vertId=Fe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ie.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function rt(me,Fe,at){var Ot,qe,St=nt(wf,me.fragId),Qe=nt(Nh,me.vertId),ht=me.program=x.createProgram();if(x.attachShader(ht,St),x.attachShader(ht,Qe),at)for(Ot=0;Ot<at.length;++Ot){var Je=at[Ot];x.bindAttribLocation(ht,Je[0],Je[1])}x.linkProgram(ht),k.linkError(x,ht,B.str(me.fragId),B.str(me.vertId),Fe);var yt=x.getProgramParameter(ht,ep);Ie.profile&&(me.stats.uniformsCount=yt);var zt=me.uniforms;for(Ot=0;Ot<yt;++Ot)if(qe=x.getActiveUniform(ht,Ot),qe)if(qe.size>1)for(var Zt=0;Zt<qe.size;++Zt){var mt=qe.name.replace("[0]","["+Zt+"]");tt(zt,new Be(mt,B.id(mt),x.getUniformLocation(ht,mt),qe))}else tt(zt,new Be(qe.name,B.id(qe.name),x.getUniformLocation(ht,qe.name),qe));var Ze=x.getProgramParameter(ht,tp);Ie.profile&&(me.stats.attributesCount=Ze);var Ye=me.attributes;for(Ot=0;Ot<Ze;++Ot)qe=x.getActiveAttrib(ht,Ot),qe&&tt(Ye,new Be(qe.name,B.id(qe.name),x.getAttribLocation(ht,qe.name),qe))}Ie.profile&&(Z.getMaxUniformsCount=function(){var me=0;return it.forEach(function(Fe){Fe.stats.uniformsCount>me&&(me=Fe.stats.uniformsCount)}),me},Z.getMaxAttributesCount=function(){var me=0;return it.forEach(function(Fe){Fe.stats.attributesCount>me&&(me=Fe.stats.attributesCount)}),me});function pt(){Xe={},Ce={};for(var me=0;me<it.length;++me)rt(it[me],null,it[me].attributes.map(function(Fe){return[Fe.location,Fe.name]}))}return{clear:function(){var me=x.deleteShader.bind(x);An(Xe).forEach(me),Xe={},An(Ce).forEach(me),Ce={},it.forEach(function(Fe){x.deleteProgram(Fe.program)}),it.length=0,ct={},Z.shaderCount=0},program:function(me,Fe,at,Ot){k.command(me>=0,"missing vertex shader",at),k.command(Fe>=0,"missing fragment shader",at);var qe=ct[Fe];qe||(qe=ct[Fe]={});var St=qe[me];if(St&&(St.refCount++,!Ot))return St;var Qe=new gt(Fe,me);return Z.shaderCount++,rt(Qe,at,Ot),St||(qe[me]=Qe),it.push(Qe),f(Qe,{destroy:function(){if(Qe.refCount--,Qe.refCount<=0){x.deleteProgram(Qe.program);var ht=it.indexOf(Qe);it.splice(ht,1),Z.shaderCount--}qe[Qe.vertId].refCount<=0&&(x.deleteShader(Ce[Qe.vertId]),delete Ce[Qe.vertId],delete ct[Qe.fragId][Qe.vertId]),Object.keys(ct[Qe.fragId]).length||(x.deleteShader(Xe[Qe.fragId]),delete Xe[Qe.fragId],delete ct[Qe.fragId])}})},restore:pt,shader:nt,frag:-1,vert:-1}}var Jr=6408,ju=5121,nn=3333,Ca=5126;function Rh(x,B,Z,Ie,Xe,Ce,Be){function tt(it){var dt;B.next===null?(k(Xe.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),dt=ju):(k(B.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),dt=B.next.colorAttachments[0].texture._texture.type,Ce.oes_texture_float?(k(dt===ju||dt===Ca,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),dt===Ca&&k(Be.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):k(dt===ju,"Reading from a framebuffer is only allowed for the type 'uint8'"));var gt=0,rt=0,pt=Ie.framebufferWidth,me=Ie.framebufferHeight,Fe=null;a(it)?Fe=it:it&&(k.type(it,"object","invalid arguments to regl.read()"),gt=it.x|0,rt=it.y|0,k(gt>=0&&gt<Ie.framebufferWidth,"invalid x offset for regl.read"),k(rt>=0&&rt<Ie.framebufferHeight,"invalid y offset for regl.read"),pt=(it.width||Ie.framebufferWidth-gt)|0,me=(it.height||Ie.framebufferHeight-rt)|0,Fe=it.data||null),Fe&&(dt===ju?k(Fe instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):dt===Ca&&k(Fe instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),k(pt>0&&pt+gt<=Ie.framebufferWidth,"invalid width for read pixels"),k(me>0&&me+rt<=Ie.framebufferHeight,"invalid height for read pixels"),Z();var at=pt*me*4;return Fe||(dt===ju?Fe=new Uint8Array(at):dt===Ca&&(Fe=Fe||new Float32Array(at))),k.isTypedArray(Fe,"data buffer for regl.read() must be a typedarray"),k(Fe.byteLength>=at,"data buffer for regl.read() too small"),x.pixelStorei(nn,4),x.readPixels(gt,rt,pt,me,Jr,dt,Fe),Fe}function nt(it){var dt;return B.setFBO({framebuffer:it.framebuffer},function(){dt=tt(it)}),dt}function ct(it){return!it||!("framebuffer"in it)?tt(it):nt(it)}return ct}function Ia(x){return Array.prototype.slice.call(x)}function ka(x){return Ia(x).join("")}function rp(){var x=0,B=[],Z=[];function Ie(dt){for(var gt=0;gt<Z.length;++gt)if(Z[gt]===dt)return B[gt];var rt="g"+x++;return B.push(rt),Z.push(dt),rt}function Xe(){var dt=[];function gt(){dt.push.apply(dt,Ia(arguments))}var rt=[];function pt(){var me="v"+x++;return rt.push(me),arguments.length>0&&(dt.push(me,"="),dt.push.apply(dt,Ia(arguments)),dt.push(";")),me}return f(gt,{def:pt,toString:function(){return ka([rt.length>0?"var "+rt.join(",")+";":"",ka(dt)])}})}function Ce(){var dt=Xe(),gt=Xe(),rt=dt.toString,pt=gt.toString;function me(Fe,at){gt(Fe,at,"=",dt.def(Fe,at),";")}return f(function(){dt.apply(dt,Ia(arguments))},{def:dt.def,entry:dt,exit:gt,save:me,set:function(Fe,at,Ot){me(Fe,at),dt(Fe,at,"=",Ot,";")},toString:function(){return rt()+pt()}})}function Be(){var dt=ka(arguments),gt=Ce(),rt=Ce(),pt=gt.toString,me=rt.toString;return f(gt,{then:function(){return gt.apply(gt,Ia(arguments)),this},else:function(){return rt.apply(rt,Ia(arguments)),this},toString:function(){var Fe=me();return Fe&&(Fe="else{"+Fe+"}"),ka(["if(",dt,"){",pt(),"}",Fe])}})}var tt=Xe(),nt={};function ct(dt,gt){var rt=[];function pt(){var qe="a"+rt.length;return rt.push(qe),qe}gt=gt||0;for(var me=0;me<gt;++me)pt();var Fe=Ce(),at=Fe.toString,Ot=nt[dt]=f(Fe,{arg:pt,toString:function(){return ka(["function(",rt.join(),"){",at(),"}"])}});return Ot}function it(){var dt=['"use strict";',tt,"return {"];Object.keys(nt).forEach(function(pt){dt.push('"',pt,'":',nt[pt].toString(),",")}),dt.push("}");var gt=ka(dt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),rt=Function.apply(null,B.concat(gt));return rt.apply(null,Z)}return{global:tt,link:Ie,block:Xe,proc:ct,scope:Ce,cond:Be,compile:it}}var La="xyzw".split(""),np=5121,Ba=1,Nu=2,xf=0,Sf=1,Tf=2,Us=3,zs=4,Af=5,op=6,ip="dither",ci="blend.enable",Pf="blend.color",Mu="blend.equation",Hs="blend.func",Xs="depth.enable",Vs="depth.func",jf="depth.range",ap="depth.mask",Nf="colorMask",up="cull.enable",sp="cull.face",Dn="frontFace",Ru="lineWidth",cp="polygonOffset.enable",Du="polygonOffset.offset",fi="sample.alpha",fp="sample.enable",ra="sample.coverage",Ws="stencil.enable",Mf="stencil.mask",Ys="stencil.func",Rf="stencil.opFront",et="stencil.opBack",Df="scissor.enable",Cu="scissor.box",Yo="viewport",Fa="profile",Si="framebuffer",Ga="vert",Ua="frag",Ti="elements",Ai="primitive",Pi="count",Iu="offset",ku="instances",za="vao",$s="Width",Ks="Height",na=Si+$s,oa=Si+Ks,lp=Yo+$s,pp=Yo+Ks,Cf="drawingBuffer",qs=Cf+$s,Lu=Cf+Ks,Dh=[Hs,Mu,Ys,Rf,et,ra,Yo,Cu,Du],Qn=34962,ji=34963,Ch=35632,mo=35633,If=3553,kf=34067,dp=2884,hp=3042,yp=3024,vp=2960,gp=2929,Lf=3089,Bu=32823,Xn=32926,Ih=32928,Bf=5126,Ha=35664,Fu=35665,Un=35666,hn=5124,Zs=35667,Jn=35668,or=35669,Gu=35670,Xa=35671,Va=35672,Uu=35673,Wa=35674,zu=35675,Hu=35676,ia=35678,Xu=35680,Qs=4,Vu=1028,aa=1029,Ff=2304,Ni=2305,mp=32775,wr=32776,bp=519,$o=7680,Js=0,_p=1,Gf=32774,Ep=513,Uf=36160,kh=36064,Ko={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Op=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],qo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Mi={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ec={frag:Ch,vert:mo},zf={cw:Ff,ccw:Ni};function tc(x){return Array.isArray(x)||a(x)||Yn(x)}function Ya(x){return x.sort(function(B,Z){return B===Yo?-1:Z===Yo?1:B<Z?-1:1})}function yn(x,B,Z,Ie){this.thisDep=x,this.contextDep=B,this.propDep=Z,this.append=Ie}function Zo(x){return x&&!(x.thisDep||x.contextDep||x.propDep)}function kr(x){return new yn(!1,!1,!1,x)}function Vn(x,B){var Z=x.type;if(Z===xf){var Ie=x.data.length;return new yn(!0,Ie>=1,Ie>=2,B)}else if(Z===zs){var Xe=x.data;return new yn(Xe.thisDep,Xe.contextDep,Xe.propDep,B)}else{if(Z===Af)return new yn(!1,!1,!1,B);if(Z===op){for(var Ce=!1,Be=!1,tt=!1,nt=0;nt<x.data.length;++nt){var ct=x.data[nt];if(ct.type===Sf)tt=!0;else if(ct.type===Tf)Be=!0;else if(ct.type===Us)Ce=!0;else if(ct.type===xf){Ce=!0;var it=ct.data;it>=1&&(Be=!0),it>=2&&(tt=!0)}else ct.type===zs&&(Ce=Ce||ct.data.thisDep,Be=Be||ct.data.contextDep,tt=tt||ct.data.propDep)}return new yn(Ce,Be,tt,B)}else return new yn(Z===Us,Z===Tf,Z===Sf,B)}}var $a=new yn(!1,!1,!1,function(){});function Lh(x,B,Z,Ie,Xe,Ce,Be,tt,nt,ct,it,dt,gt,rt,pt){var me=ct.Record,Fe={add:32774,subtract:32778,"reverse subtract":32779};Z.ext_blend_minmax&&(Fe.min=mp,Fe.max=wr);var at=Z.angle_instanced_arrays,Ot=Z.webgl_draw_buffers,qe={dirty:!0,profile:pt.profile},St={},Qe=[],ht={},Je={};function yt(H){return H.replace(".","_")}function zt(H,R,re){var ge=yt(H);Qe.push(H),St[ge]=qe[ge]=!!re,ht[ge]=R}function Zt(H,R,re){var ge=yt(H);Qe.push(H),Array.isArray(re)?(qe[ge]=re.slice(),St[ge]=re.slice()):qe[ge]=St[ge]=re,Je[ge]=R}zt(ip,yp),zt(ci,hp),Zt(Pf,"blendColor",[0,0,0,0]),Zt(Mu,"blendEquationSeparate",[Gf,Gf]),Zt(Hs,"blendFuncSeparate",[_p,Js,_p,Js]),zt(Xs,gp,!0),Zt(Vs,"depthFunc",Ep),Zt(jf,"depthRange",[0,1]),Zt(ap,"depthMask",!0),Zt(Nf,Nf,[!0,!0,!0,!0]),zt(up,dp),Zt(sp,"cullFace",aa),Zt(Dn,Dn,Ni),Zt(Ru,Ru,1),zt(cp,Bu),Zt(Du,"polygonOffset",[0,0]),zt(fi,Xn),zt(fp,Ih),Zt(ra,"sampleCoverage",[1,!1]),zt(Ws,vp),Zt(Mf,"stencilMask",-1),Zt(Ys,"stencilFunc",[bp,0,-1]),Zt(Rf,"stencilOpSeparate",[Vu,$o,$o,$o]),Zt(et,"stencilOpSeparate",[aa,$o,$o,$o]),zt(Df,Lf),Zt(Cu,"scissor",[0,0,x.drawingBufferWidth,x.drawingBufferHeight]),Zt(Yo,Yo,[0,0,x.drawingBufferWidth,x.drawingBufferHeight]);var mt={gl:x,context:gt,strings:B,next:St,current:qe,draw:dt,elements:Ce,buffer:Xe,shader:it,attributes:ct.state,vao:ct,uniforms:nt,framebuffer:tt,extensions:Z,timer:rt,isBufferArgs:tc},Ze={primTypes:Pn,compareFuncs:qo,blendFuncs:Ko,blendEquations:Fe,stencilOps:Mi,glTypes:vo,orientationType:zf};k.optional(function(){mt.isArrayLike=b}),Ot&&(Ze.backBuffer=[aa],Ze.drawBuffer=Ir(Ie.maxDrawbuffers,function(H){return H===0?[0]:Ir(H,function(R){return kh+R})}));var Ye=0;function Jt(){var H=rp(),R=H.link,re=H.global;H.id=Ye++,H.batchId="0";var ge=R(mt),we=H.shared={props:"a0"};Object.keys(mt).forEach(function(J){we[J]=re.def(ge,".",J)}),k.optional(function(){H.CHECK=R(k),H.commandStr=k.guessCommand(),H.command=R(H.commandStr),H.assert=function(J,G,he){J("if(!(",G,"))",this.CHECK,".commandRaise(",R(he),",",this.command,");")},Ze.invalidBlendCombinations=Op});var ne=H.next={},ee=H.current={};Object.keys(Je).forEach(function(J){Array.isArray(qe[J])&&(ne[J]=re.def(we.next,".",J),ee[J]=re.def(we.current,".",J))});var le=H.constants={};Object.keys(Ze).forEach(function(J){le[J]=re.def(JSON.stringify(Ze[J]))}),H.invoke=function(J,G){switch(G.type){case xf:var he=["this",we.context,we.props,H.batchId];return J.def(R(G.data),".call(",he.slice(0,Math.max(G.data.length+1,4)),")");case Sf:return J.def(we.props,G.data);case Tf:return J.def(we.context,G.data);case Us:return J.def("this",G.data);case zs:return G.data.append(H,J),G.data.ref;case Af:return G.data.toString();case op:return G.data.map(function(Ae){return H.invoke(J,Ae)})}},H.attribCache={};var U={};return H.scopeAttrib=function(J){var G=B.id(J);if(G in U)return U[G];var he=ct.scope[G];he||(he=ct.scope[G]=new me);var Ae=U[G]=R(he);return Ae},H}function be(H){var R=H.static,re=H.dynamic,ge;if(Fa in R){var we=!!R[Fa];ge=kr(function(ee,le){return we}),ge.enable=we}else if(Fa in re){var ne=re[Fa];ge=Vn(ne,function(ee,le){return ee.invoke(le,ne)})}return ge}function kt(H,R){var re=H.static,ge=H.dynamic;if(Si in re){var we=re[Si];return we?(we=tt.getFramebuffer(we),k.command(we,"invalid framebuffer object"),kr(function(ee,le){var U=ee.link(we),J=ee.shared;le.set(J.framebuffer,".next",U);var G=J.context;return le.set(G,"."+na,U+".width"),le.set(G,"."+oa,U+".height"),U})):kr(function(ee,le){var U=ee.shared;le.set(U.framebuffer,".next","null");var J=U.context;return le.set(J,"."+na,J+"."+qs),le.set(J,"."+oa,J+"."+Lu),"null"})}else if(Si in ge){var ne=ge[Si];return Vn(ne,function(ee,le){var U=ee.invoke(le,ne),J=ee.shared,G=J.framebuffer,he=le.def(G,".getFramebuffer(",U,")");k.optional(function(){ee.assert(le,"!"+U+"||"+he,"invalid framebuffer object")}),le.set(G,".next",he);var Ae=J.context;return le.set(Ae,"."+na,he+"?"+he+".width:"+Ae+"."+qs),le.set(Ae,"."+oa,he+"?"+he+".height:"+Ae+"."+Lu),he})}else return null}function mr(H,R,re){var ge=H.static,we=H.dynamic;function ne(U){if(U in ge){var J=ge[U];k.commandType(J,"object","invalid "+U,re.commandStr);var G=!0,he=J.x|0,Ae=J.y|0,Ve,$e;return"width"in J?(Ve=J.width|0,k.command(Ve>=0,"invalid "+U,re.commandStr)):G=!1,"height"in J?($e=J.height|0,k.command($e>=0,"invalid "+U,re.commandStr)):G=!1,new yn(!G&&R&&R.thisDep,!G&&R&&R.contextDep,!G&&R&&R.propDep,function(Bt,dr){var It=Bt.shared.context,Kt=Ve;"width"in J||(Kt=dr.def(It,".",na,"-",he));var fr=$e;return"height"in J||(fr=dr.def(It,".",oa,"-",Ae)),[he,Ae,Kt,fr]})}else if(U in we){var Ue=we[U],ut=Vn(Ue,function(Bt,dr){var It=Bt.invoke(dr,Ue);k.optional(function(){Bt.assert(dr,It+"&&typeof "+It+'==="object"',"invalid "+U)});var Kt=Bt.shared.context,fr=dr.def(It,".x|0"),Nr=dr.def(It,".y|0"),an=dr.def('"width" in ',It,"?",It,".width|0:","(",Kt,".",na,"-",fr,")"),eo=dr.def('"height" in ',It,"?",It,".height|0:","(",Kt,".",oa,"-",Nr,")");return k.optional(function(){Bt.assert(dr,an+">=0&&"+eo+">=0","invalid "+U)}),[fr,Nr,an,eo]});return R&&(ut.thisDep=ut.thisDep||R.thisDep,ut.contextDep=ut.contextDep||R.contextDep,ut.propDep=ut.propDep||R.propDep),ut}else return R?new yn(R.thisDep,R.contextDep,R.propDep,function(Bt,dr){var It=Bt.shared.context;return[0,0,dr.def(It,".",na),dr.def(It,".",oa)]}):null}var ee=ne(Yo);if(ee){var le=ee;ee=new yn(ee.thisDep,ee.contextDep,ee.propDep,function(U,J){var G=le.append(U,J),he=U.shared.context;return J.set(he,"."+lp,G[2]),J.set(he,"."+pp,G[3]),G})}return{viewport:ee,scissor_box:ne(Cu)}}function ir(H,R){var re=H.static,ge=typeof re[Ua]=="string"&&typeof re[Ga]=="string";if(ge){if(Object.keys(R.dynamic).length>0)return null;var we=R.static,ne=Object.keys(we);if(ne.length>0&&typeof we[ne[0]]=="number"){for(var ee=[],le=0;le<ne.length;++le)k(typeof we[ne[le]]=="number","must specify all vertex attribute locations when using vaos"),ee.push([we[ne[le]]|0,ne[le]]);return ee}}return null}function vr(H,R,re){var ge=H.static,we=H.dynamic;function ne(G){if(G in ge){var he=B.id(ge[G]);k.optional(function(){it.shader(ec[G],he,k.guessCommand())});var Ae=kr(function(){return he});return Ae.id=he,Ae}else if(G in we){var Ve=we[G];return Vn(Ve,function($e,Ue){var ut=$e.invoke(Ue,Ve),Bt=Ue.def($e.shared.strings,".id(",ut,")");return k.optional(function(){Ue($e.shared.shader,".shader(",ec[G],",",Bt,",",$e.command,");")}),Bt})}return null}var ee=ne(Ua),le=ne(Ga),U=null,J;return Zo(ee)&&Zo(le)?(U=it.program(le.id,ee.id,null,re),J=kr(function(G,he){return G.link(U)})):J=new yn(ee&&ee.thisDep||le&&le.thisDep,ee&&ee.contextDep||le&&le.contextDep,ee&&ee.propDep||le&&le.propDep,function(G,he){var Ae=G.shared.shader,Ve;ee?Ve=ee.append(G,he):Ve=he.def(Ae,".",Ua);var $e;le?$e=le.append(G,he):$e=he.def(Ae,".",Ga);var Ue=Ae+".program("+$e+","+Ve;return k.optional(function(){Ue+=","+G.command}),he.def(Ue+")")}),{frag:ee,vert:le,progVar:J,program:U}}function Mr(H,R){var re=H.static,ge=H.dynamic;function we(){if(Ti in re){var G=re[Ti];tc(G)?G=Ce.getElements(Ce.create(G,!0)):G&&(G=Ce.getElements(G),k.command(G,"invalid elements",R.commandStr));var he=kr(function(Ve,$e){if(G){var Ue=Ve.link(G);return Ve.ELEMENTS=Ue,Ue}return Ve.ELEMENTS=null,null});return he.value=G,he}else if(Ti in ge){var Ae=ge[Ti];return Vn(Ae,function(Ve,$e){var Ue=Ve.shared,ut=Ue.isBufferArgs,Bt=Ue.elements,dr=Ve.invoke($e,Ae),It=$e.def("null"),Kt=$e.def(ut,"(",dr,")"),fr=Ve.cond(Kt).then(It,"=",Bt,".createStream(",dr,");").else(It,"=",Bt,".getElements(",dr,");");return k.optional(function(){Ve.assert(fr.else,"!"+dr+"||"+It,"invalid elements")}),$e.entry(fr),$e.exit(Ve.cond(Kt).then(Bt,".destroyStream(",It,");")),Ve.ELEMENTS=It,It})}return null}var ne=we();function ee(){if(Ai in re){var G=re[Ai];return k.commandParameter(G,Pn,"invalid primitve",R.commandStr),kr(function(Ae,Ve){return Pn[G]})}else if(Ai in ge){var he=ge[Ai];return Vn(he,function(Ae,Ve){var $e=Ae.constants.primTypes,Ue=Ae.invoke(Ve,he);return k.optional(function(){Ae.assert(Ve,Ue+" in "+$e,"invalid primitive, must be one of "+Object.keys(Pn))}),Ve.def($e,"[",Ue,"]")})}else if(ne)return Zo(ne)?ne.value?kr(function(Ae,Ve){return Ve.def(Ae.ELEMENTS,".primType")}):kr(function(){return Qs}):new yn(ne.thisDep,ne.contextDep,ne.propDep,function(Ae,Ve){var $e=Ae.ELEMENTS;return Ve.def($e,"?",$e,".primType:",Qs)});return null}function le(G,he){if(G in re){var Ae=re[G]|0;return k.command(!he||Ae>=0,"invalid "+G,R.commandStr),kr(function($e,Ue){return he&&($e.OFFSET=Ae),Ae})}else if(G in ge){var Ve=ge[G];return Vn(Ve,function($e,Ue){var ut=$e.invoke(Ue,Ve);return he&&($e.OFFSET=ut,k.optional(function(){$e.assert(Ue,ut+">=0","invalid "+G)})),ut})}else if(he&&ne)return kr(function($e,Ue){return $e.OFFSET="0",0});return null}var U=le(Iu,!0);function J(){if(Pi in re){var G=re[Pi]|0;return k.command(typeof G=="number"&&G>=0,"invalid vertex count",R.commandStr),kr(function(){return G})}else if(Pi in ge){var he=ge[Pi];return Vn(he,function($e,Ue){var ut=$e.invoke(Ue,he);return k.optional(function(){$e.assert(Ue,"typeof "+ut+'==="number"&&'+ut+">=0&&"+ut+"===("+ut+"|0)","invalid vertex count")}),ut})}else if(ne)if(Zo(ne)){if(ne)return U?new yn(U.thisDep,U.contextDep,U.propDep,function($e,Ue){var ut=Ue.def($e.ELEMENTS,".vertCount-",$e.OFFSET);return k.optional(function(){$e.assert(Ue,ut+">=0","invalid vertex offset/element buffer too small")}),ut}):kr(function($e,Ue){return Ue.def($e.ELEMENTS,".vertCount")});var Ae=kr(function(){return-1});return k.optional(function(){Ae.MISSING=!0}),Ae}else{var Ve=new yn(ne.thisDep||U.thisDep,ne.contextDep||U.contextDep,ne.propDep||U.propDep,function($e,Ue){var ut=$e.ELEMENTS;return $e.OFFSET?Ue.def(ut,"?",ut,".vertCount-",$e.OFFSET,":-1"):Ue.def(ut,"?",ut,".vertCount:-1")});return k.optional(function(){Ve.DYNAMIC=!0}),Ve}return null}return{elements:ne,primitive:ee(),count:J(),instances:le(ku,!1),offset:U}}function cn(H,R){var re=H.static,ge=H.dynamic,we={};return Qe.forEach(function(ne){var ee=yt(ne);function le(U,J){if(ne in re){var G=U(re[ne]);we[ee]=kr(function(){return G})}else if(ne in ge){var he=ge[ne];we[ee]=Vn(he,function(Ae,Ve){return J(Ae,Ve,Ae.invoke(Ve,he))})}}switch(ne){case up:case ci:case ip:case Ws:case Xs:case Df:case cp:case fi:case fp:case ap:return le(function(U){return k.commandType(U,"boolean",ne,R.commandStr),U},function(U,J,G){return k.optional(function(){U.assert(J,"typeof "+G+'==="boolean"',"invalid flag "+ne,U.commandStr)}),G});case Vs:return le(function(U){return k.commandParameter(U,qo,"invalid "+ne,R.commandStr),qo[U]},function(U,J,G){var he=U.constants.compareFuncs;return k.optional(function(){U.assert(J,G+" in "+he,"invalid "+ne+", must be one of "+Object.keys(qo))}),J.def(he,"[",G,"]")});case jf:return le(function(U){return k.command(b(U)&&U.length===2&&typeof U[0]=="number"&&typeof U[1]=="number"&&U[0]<=U[1],"depth range is 2d array",R.commandStr),U},function(U,J,G){k.optional(function(){U.assert(J,U.shared.isArrayLike+"("+G+")&&"+G+".length===2&&typeof "+G+'[0]==="number"&&typeof '+G+'[1]==="number"&&'+G+"[0]<="+G+"[1]","depth range must be a 2d array")});var he=J.def("+",G,"[0]"),Ae=J.def("+",G,"[1]");return[he,Ae]});case Hs:return le(function(U){k.commandType(U,"object","blend.func",R.commandStr);var J="srcRGB"in U?U.srcRGB:U.src,G="srcAlpha"in U?U.srcAlpha:U.src,he="dstRGB"in U?U.dstRGB:U.dst,Ae="dstAlpha"in U?U.dstAlpha:U.dst;return k.commandParameter(J,Ko,ee+".srcRGB",R.commandStr),k.commandParameter(G,Ko,ee+".srcAlpha",R.commandStr),k.commandParameter(he,Ko,ee+".dstRGB",R.commandStr),k.commandParameter(Ae,Ko,ee+".dstAlpha",R.commandStr),k.command(Op.indexOf(J+", "+he)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+J+", "+he+")",R.commandStr),[Ko[J],Ko[he],Ko[G],Ko[Ae]]},function(U,J,G){var he=U.constants.blendFuncs;k.optional(function(){U.assert(J,G+"&&typeof "+G+'==="object"',"invalid blend func, must be an object")});function Ae(It,Kt){var fr=J.def('"',It,Kt,'" in ',G,"?",G,".",It,Kt,":",G,".",It);return k.optional(function(){U.assert(J,fr+" in "+he,"invalid "+ne+"."+It+Kt+", must be one of "+Object.keys(Ko))}),fr}var Ve=Ae("src","RGB"),$e=Ae("dst","RGB");k.optional(function(){var It=U.constants.invalidBlendCombinations;U.assert(J,It+".indexOf("+Ve+'+", "+'+$e+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ue=J.def(he,"[",Ve,"]"),ut=J.def(he,"[",Ae("src","Alpha"),"]"),Bt=J.def(he,"[",$e,"]"),dr=J.def(he,"[",Ae("dst","Alpha"),"]");return[Ue,Bt,ut,dr]});case Mu:return le(function(U){if(typeof U=="string")return k.commandParameter(U,Fe,"invalid "+ne,R.commandStr),[Fe[U],Fe[U]];if(typeof U=="object")return k.commandParameter(U.rgb,Fe,ne+".rgb",R.commandStr),k.commandParameter(U.alpha,Fe,ne+".alpha",R.commandStr),[Fe[U.rgb],Fe[U.alpha]];k.commandRaise("invalid blend.equation",R.commandStr)},function(U,J,G){var he=U.constants.blendEquations,Ae=J.def(),Ve=J.def(),$e=U.cond("typeof ",G,'==="string"');return k.optional(function(){function Ue(ut,Bt,dr){U.assert(ut,dr+" in "+he,"invalid "+Bt+", must be one of "+Object.keys(Fe))}Ue($e.then,ne,G),U.assert($e.else,G+"&&typeof "+G+'==="object"',"invalid "+ne),Ue($e.else,ne+".rgb",G+".rgb"),Ue($e.else,ne+".alpha",G+".alpha")}),$e.then(Ae,"=",Ve,"=",he,"[",G,"];"),$e.else(Ae,"=",he,"[",G,".rgb];",Ve,"=",he,"[",G,".alpha];"),J($e),[Ae,Ve]});case Pf:return le(function(U){return k.command(b(U)&&U.length===4,"blend.color must be a 4d array",R.commandStr),Ir(4,function(J){return+U[J]})},function(U,J,G){return k.optional(function(){U.assert(J,U.shared.isArrayLike+"("+G+")&&"+G+".length===4","blend.color must be a 4d array")}),Ir(4,function(he){return J.def("+",G,"[",he,"]")})});case Mf:return le(function(U){return k.commandType(U,"number",ee,R.commandStr),U|0},function(U,J,G){return k.optional(function(){U.assert(J,"typeof "+G+'==="number"',"invalid stencil.mask")}),J.def(G,"|0")});case Ys:return le(function(U){k.commandType(U,"object",ee,R.commandStr);var J=U.cmp||"keep",G=U.ref||0,he="mask"in U?U.mask:-1;return k.commandParameter(J,qo,ne+".cmp",R.commandStr),k.commandType(G,"number",ne+".ref",R.commandStr),k.commandType(he,"number",ne+".mask",R.commandStr),[qo[J],G,he]},function(U,J,G){var he=U.constants.compareFuncs;k.optional(function(){function Ue(){U.assert(J,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ue(G+"&&typeof ",G,'==="object"'),Ue('!("cmp" in ',G,")||(",G,".cmp in ",he,")")});var Ae=J.def('"cmp" in ',G,"?",he,"[",G,".cmp]",":",$o),Ve=J.def(G,".ref|0"),$e=J.def('"mask" in ',G,"?",G,".mask|0:-1");return[Ae,Ve,$e]});case Rf:case et:return le(function(U){k.commandType(U,"object",ee,R.commandStr);var J=U.fail||"keep",G=U.zfail||"keep",he=U.zpass||"keep";return k.commandParameter(J,Mi,ne+".fail",R.commandStr),k.commandParameter(G,Mi,ne+".zfail",R.commandStr),k.commandParameter(he,Mi,ne+".zpass",R.commandStr),[ne===et?aa:Vu,Mi[J],Mi[G],Mi[he]]},function(U,J,G){var he=U.constants.stencilOps;k.optional(function(){U.assert(J,G+"&&typeof "+G+'==="object"',"invalid "+ne)});function Ae(Ve){return k.optional(function(){U.assert(J,'!("'+Ve+'" in '+G+")||("+G+"."+Ve+" in "+he+")","invalid "+ne+"."+Ve+", must be one of "+Object.keys(Mi))}),J.def('"',Ve,'" in ',G,"?",he,"[",G,".",Ve,"]:",$o)}return[ne===et?aa:Vu,Ae("fail"),Ae("zfail"),Ae("zpass")]});case Du:return le(function(U){k.commandType(U,"object",ee,R.commandStr);var J=U.factor|0,G=U.units|0;return k.commandType(J,"number",ee+".factor",R.commandStr),k.commandType(G,"number",ee+".units",R.commandStr),[J,G]},function(U,J,G){k.optional(function(){U.assert(J,G+"&&typeof "+G+'==="object"',"invalid "+ne)});var he=J.def(G,".factor|0"),Ae=J.def(G,".units|0");return[he,Ae]});case sp:return le(function(U){var J=0;return U==="front"?J=Vu:U==="back"&&(J=aa),k.command(!!J,ee,R.commandStr),J},function(U,J,G){return k.optional(function(){U.assert(J,G+'==="front"||'+G+'==="back"',"invalid cull.face")}),J.def(G,'==="front"?',Vu,":",aa)});case Ru:return le(function(U){return k.command(typeof U=="number"&&U>=Ie.lineWidthDims[0]&&U<=Ie.lineWidthDims[1],"invalid line width, must be a positive number between "+Ie.lineWidthDims[0]+" and "+Ie.lineWidthDims[1],R.commandStr),U},function(U,J,G){return k.optional(function(){U.assert(J,"typeof "+G+'==="number"&&'+G+">="+Ie.lineWidthDims[0]+"&&"+G+"<="+Ie.lineWidthDims[1],"invalid line width")}),G});case Dn:return le(function(U){return k.commandParameter(U,zf,ee,R.commandStr),zf[U]},function(U,J,G){return k.optional(function(){U.assert(J,G+'==="cw"||'+G+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),J.def(G+'==="cw"?'+Ff+":"+Ni)});case Nf:return le(function(U){return k.command(b(U)&&U.length===4,"color.mask must be length 4 array",R.commandStr),U.map(function(J){return!!J})},function(U,J,G){return k.optional(function(){U.assert(J,U.shared.isArrayLike+"("+G+")&&"+G+".length===4","invalid color.mask")}),Ir(4,function(he){return"!!"+G+"["+he+"]"})});case ra:return le(function(U){k.command(typeof U=="object"&&U,ee,R.commandStr);var J="value"in U?U.value:1,G=!!U.invert;return k.command(typeof J=="number"&&J>=0&&J<=1,"sample.coverage.value must be a number between 0 and 1",R.commandStr),[J,G]},function(U,J,G){k.optional(function(){U.assert(J,G+"&&typeof "+G+'==="object"',"invalid sample.coverage")});var he=J.def('"value" in ',G,"?+",G,".value:1"),Ae=J.def("!!",G,".invert");return[he,Ae]})}}),we}function En(H,R){var re=H.static,ge=H.dynamic,we={};return Object.keys(re).forEach(function(ne){var ee=re[ne],le;if(typeof ee=="number"||typeof ee=="boolean")le=kr(function(){return ee});else if(typeof ee=="function"){var U=ee._reglType;U==="texture2d"||U==="textureCube"?le=kr(function(J){return J.link(ee)}):U==="framebuffer"||U==="framebufferCube"?(k.command(ee.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ne+'"',R.commandStr),le=kr(function(J){return J.link(ee.color[0])})):k.commandRaise('invalid data for uniform "'+ne+'"',R.commandStr)}else b(ee)?le=kr(function(J){var G=J.global.def("[",Ir(ee.length,function(he){return k.command(typeof ee[he]=="number"||typeof ee[he]=="boolean","invalid uniform "+ne,J.commandStr),ee[he]}),"]");return G}):k.commandRaise('invalid or missing data for uniform "'+ne+'"',R.commandStr);le.value=ee,we[ne]=le}),Object.keys(ge).forEach(function(ne){var ee=ge[ne];we[ne]=Vn(ee,function(le,U){return le.invoke(U,ee)})}),we}function xr(H,R){var re=H.static,ge=H.dynamic,we={};return Object.keys(re).forEach(function(ne){var ee=re[ne],le=B.id(ne),U=new me;if(tc(ee))U.state=Ba,U.buffer=Xe.getBuffer(Xe.create(ee,Qn,!1,!0)),U.type=0;else{var J=Xe.getBuffer(ee);if(J)U.state=Ba,U.buffer=J,U.type=0;else if(k.command(typeof ee=="object"&&ee,"invalid data for attribute "+ne,R.commandStr),"constant"in ee){var G=ee.constant;U.buffer="null",U.state=Nu,typeof G=="number"?U.x=G:(k.command(b(G)&&G.length>0&&G.length<=4,"invalid constant for attribute "+ne,R.commandStr),La.forEach(function(Bt,dr){dr<G.length&&(U[Bt]=G[dr])}))}else{tc(ee.buffer)?J=Xe.getBuffer(Xe.create(ee.buffer,Qn,!1,!0)):J=Xe.getBuffer(ee.buffer),k.command(!!J,'missing buffer for attribute "'+ne+'"',R.commandStr);var he=ee.offset|0;k.command(he>=0,'invalid offset for attribute "'+ne+'"',R.commandStr);var Ae=ee.stride|0;k.command(Ae>=0&&Ae<256,'invalid stride for attribute "'+ne+'", must be integer betweeen [0, 255]',R.commandStr);var Ve=ee.size|0;k.command(!("size"in ee)||Ve>0&&Ve<=4,'invalid size for attribute "'+ne+'", must be 1,2,3,4',R.commandStr);var $e=!!ee.normalized,Ue=0;"type"in ee&&(k.commandParameter(ee.type,vo,"invalid type for attribute "+ne,R.commandStr),Ue=vo[ee.type]);var ut=ee.divisor|0;"divisor"in ee&&(k.command(ut===0||at,'cannot specify divisor for attribute "'+ne+'", instancing not supported',R.commandStr),k.command(ut>=0,'invalid divisor for attribute "'+ne+'"',R.commandStr)),k.optional(function(){var Bt=R.commandStr,dr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ee).forEach(function(It){k.command(dr.indexOf(It)>=0,'unknown parameter "'+It+'" for attribute pointer "'+ne+'" (valid parameters are '+dr+")",Bt)})}),U.buffer=J,U.state=Ba,U.size=Ve,U.normalized=$e,U.type=Ue||J.dtype,U.offset=he,U.stride=Ae,U.divisor=ut}}we[ne]=kr(function(Bt,dr){var It=Bt.attribCache;if(le in It)return It[le];var Kt={isStream:!1};return Object.keys(U).forEach(function(fr){Kt[fr]=U[fr]}),U.buffer&&(Kt.buffer=Bt.link(U.buffer),Kt.type=Kt.type||Kt.buffer+".dtype"),It[le]=Kt,Kt})}),Object.keys(ge).forEach(function(ne){var ee=ge[ne];function le(U,J){var G=U.invoke(J,ee),he=U.shared,Ae=U.constants,Ve=he.isBufferArgs,$e=he.buffer;k.optional(function(){U.assert(J,G+"&&(typeof "+G+'==="object"||typeof '+G+'==="function")&&('+Ve+"("+G+")||"+$e+".getBuffer("+G+")||"+$e+".getBuffer("+G+".buffer)||"+Ve+"("+G+'.buffer)||("constant" in '+G+"&&(typeof "+G+'.constant==="number"||'+he.isArrayLike+"("+G+".constant))))",'invalid dynamic attribute "'+ne+'"')});var Ue={isStream:J.def(!1)},ut=new me;ut.state=Ba,Object.keys(ut).forEach(function(Kt){Ue[Kt]=J.def(""+ut[Kt])});var Bt=Ue.buffer,dr=Ue.type;J("if(",Ve,"(",G,")){",Ue.isStream,"=true;",Bt,"=",$e,".createStream(",Qn,",",G,");",dr,"=",Bt,".dtype;","}else{",Bt,"=",$e,".getBuffer(",G,");","if(",Bt,"){",dr,"=",Bt,".dtype;",'}else if("constant" in ',G,"){",Ue.state,"=",Nu,";","if(typeof "+G+'.constant === "number"){',Ue[La[0]],"=",G,".constant;",La.slice(1).map(function(Kt){return Ue[Kt]}).join("="),"=0;","}else{",La.map(function(Kt,fr){return Ue[Kt]+"="+G+".constant.length>"+fr+"?"+G+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",Ve,"(",G,".buffer)){",Bt,"=",$e,".createStream(",Qn,",",G,".buffer);","}else{",Bt,"=",$e,".getBuffer(",G,".buffer);","}",dr,'="type" in ',G,"?",Ae.glTypes,"[",G,".type]:",Bt,".dtype;",Ue.normalized,"=!!",G,".normalized;");function It(Kt){J(Ue[Kt],"=",G,".",Kt,"|0;")}return It("size"),It("offset"),It("stride"),It("divisor"),J("}}"),J.exit("if(",Ue.isStream,"){",$e,".destroyStream(",Bt,");","}"),Ue}we[ne]=Vn(ee,le)}),we}function vn(H,R){var re=H.static,ge=H.dynamic;if(za in re){var we=re[za];return we!==null&&ct.getVAO(we)===null&&(we=ct.createVAO(we)),kr(function(ee){return ee.link(ct.getVAO(we))})}else if(za in ge){var ne=ge[za];return Vn(ne,function(ee,le){var U=ee.invoke(le,ne);return le.def(ee.shared.vao+".getVAO("+U+")")})}return null}function Wr(H){var R=H.static,re=H.dynamic,ge={};return Object.keys(R).forEach(function(we){var ne=R[we];ge[we]=kr(function(ee,le){return typeof ne=="number"||typeof ne=="boolean"?""+ne:ee.link(ne)})}),Object.keys(re).forEach(function(we){var ne=re[we];ge[we]=Vn(ne,function(ee,le){return ee.invoke(le,ne)})}),ge}function fn(H,R,re,ge,we){var ne=H.static,ee=H.dynamic;k.optional(function(){var It=[Si,Ga,Ua,Ti,Ai,Iu,Pi,ku,Fa,za].concat(Qe);function Kt(fr){Object.keys(fr).forEach(function(Nr){k.command(It.indexOf(Nr)>=0,'unknown parameter "'+Nr+'"',we.commandStr)})}Kt(ne),Kt(ee)});var le=ir(H,R),U=kt(H),J=mr(H,U,we),G=Mr(H,we),he=cn(H,we),Ae=vr(H,we,le);function Ve(It){var Kt=J[It];Kt&&(he[It]=Kt)}Ve(Yo),Ve(yt(Cu));var $e=Object.keys(he).length>0,Ue={framebuffer:U,draw:G,shader:Ae,state:he,dirty:$e,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ue.profile=be(H),Ue.uniforms=En(re,we),Ue.drawVAO=Ue.scopeVAO=vn(H),!Ue.drawVAO&&Ae.program&&!le&&Z.angle_instanced_arrays){var ut=!0,Bt=Ae.program.attributes.map(function(It){var Kt=R.static[It];return ut=ut&&!!Kt,Kt});if(ut&&Bt.length>0){var dr=ct.getVAO(ct.createVAO(Bt));Ue.drawVAO=new yn(null,null,null,function(It,Kt){return It.link(dr)}),Ue.useVAO=!0}}return le?Ue.useVAO=!0:Ue.attributes=xr(R,we),Ue.context=Wr(ge),Ue}function gn(H,R,re){var ge=H.shared,we=ge.context,ne=H.scope();Object.keys(re).forEach(function(ee){R.save(we,"."+ee);var le=re[ee],U=le.append(H,R);Array.isArray(U)?ne(we,".",ee,"=[",U.join(),"];"):ne(we,".",ee,"=",U,";")}),R(ne)}function Yr(H,R,re,ge){var we=H.shared,ne=we.gl,ee=we.framebuffer,le;Ot&&(le=R.def(we.extensions,".webgl_draw_buffers"));var U=H.constants,J=U.drawBuffer,G=U.backBuffer,he;re?he=re.append(H,R):he=R.def(ee,".next"),ge||R("if(",he,"!==",ee,".cur){"),R("if(",he,"){",ne,".bindFramebuffer(",Uf,",",he,".framebuffer);"),Ot&&R(le,".drawBuffersWEBGL(",J,"[",he,".colorAttachments.length]);"),R("}else{",ne,".bindFramebuffer(",Uf,",null);"),Ot&&R(le,".drawBuffersWEBGL(",G,");"),R("}",ee,".cur=",he,";"),ge||R("}")}function Sn(H,R,re){var ge=H.shared,we=ge.gl,ne=H.current,ee=H.next,le=ge.current,U=ge.next,J=H.cond(le,".dirty");Qe.forEach(function(G){var he=yt(G);if(!(he in re.state)){var Ae,Ve;if(he in ee){Ae=ee[he],Ve=ne[he];var $e=Ir(qe[he].length,function(ut){return J.def(Ae,"[",ut,"]")});J(H.cond($e.map(function(ut,Bt){return ut+"!=="+Ve+"["+Bt+"]"}).join("||")).then(we,".",Je[he],"(",$e,");",$e.map(function(ut,Bt){return Ve+"["+Bt+"]="+ut}).join(";"),";"))}else{Ae=J.def(U,".",he);var Ue=H.cond(Ae,"!==",le,".",he);J(Ue),he in ht?Ue(H.cond(Ae).then(we,".enable(",ht[he],");").else(we,".disable(",ht[he],");"),le,".",he,"=",Ae,";"):Ue(we,".",Je[he],"(",Ae,");",le,".",he,"=",Ae,";")}}}),Object.keys(re.state).length===0&&J(le,".dirty=false;"),R(J)}function Bn(H,R,re,ge){var we=H.shared,ne=H.current,ee=we.current,le=we.gl;Ya(Object.keys(re)).forEach(function(U){var J=re[U];if(!(ge&&!ge(J))){var G=J.append(H,R);if(ht[U]){var he=ht[U];Zo(J)?G?R(le,".enable(",he,");"):R(le,".disable(",he,");"):R(H.cond(G).then(le,".enable(",he,");").else(le,".disable(",he,");")),R(ee,".",U,"=",G,";")}else if(b(G)){var Ae=ne[U];R(le,".",Je[U],"(",G,");",G.map(function(Ve,$e){return Ae+"["+$e+"]="+Ve}).join(";"),";")}else R(le,".",Je[U],"(",G,");",ee,".",U,"=",G,";")}})}function on(H,R){at&&(H.instancing=R.def(H.shared.extensions,".angle_instanced_arrays"))}function cr(H,R,re,ge,we){var ne=H.shared,ee=H.stats,le=ne.current,U=ne.timer,J=re.profile;function G(){return typeof performance>"u"?"Date.now()":"performance.now()"}var he,Ae;function Ve(It){he=R.def(),It(he,"=",G(),";"),typeof we=="string"?It(ee,".count+=",we,";"):It(ee,".count++;"),rt&&(ge?(Ae=R.def(),It(Ae,"=",U,".getNumPendingQueries();")):It(U,".beginQuery(",ee,");"))}function $e(It){It(ee,".cpuTime+=",G(),"-",he,";"),rt&&(ge?It(U,".pushScopeStats(",Ae,",",U,".getNumPendingQueries(),",ee,");"):It(U,".endQuery();"))}function Ue(It){var Kt=R.def(le,".profile");R(le,".profile=",It,";"),R.exit(le,".profile=",Kt,";")}var ut;if(J){if(Zo(J)){J.enable?(Ve(R),$e(R.exit),Ue("true")):Ue("false");return}ut=J.append(H,R),Ue(ut)}else ut=R.def(le,".profile");var Bt=H.block();Ve(Bt),R("if(",ut,"){",Bt,"}");var dr=H.block();$e(dr),R.exit("if(",ut,"){",dr,"}")}function mn(H,R,re,ge,we){var ne=H.shared;function ee(U){switch(U){case Ha:case Zs:case Xa:return 2;case Fu:case Jn:case Va:return 3;case Un:case or:case Uu:return 4;default:return 1}}function le(U,J,G){var he=ne.gl,Ae=R.def(U,".location"),Ve=R.def(ne.attributes,"[",Ae,"]"),$e=G.state,Ue=G.buffer,ut=[G.x,G.y,G.z,G.w],Bt=["buffer","normalized","offset","stride"];function dr(){R("if(!",Ve,".buffer){",he,".enableVertexAttribArray(",Ae,");}");var Kt=G.type,fr;if(G.size?fr=R.def(G.size,"||",J):fr=J,R("if(",Ve,".type!==",Kt,"||",Ve,".size!==",fr,"||",Bt.map(function(an){return Ve+"."+an+"!=="+G[an]}).join("||"),"){",he,".bindBuffer(",Qn,",",Ue,".buffer);",he,".vertexAttribPointer(",[Ae,fr,Kt,G.normalized,G.stride,G.offset],");",Ve,".type=",Kt,";",Ve,".size=",fr,";",Bt.map(function(an){return Ve+"."+an+"="+G[an]+";"}).join(""),"}"),at){var Nr=G.divisor;R("if(",Ve,".divisor!==",Nr,"){",H.instancing,".vertexAttribDivisorANGLE(",[Ae,Nr],");",Ve,".divisor=",Nr,";}")}}function It(){R("if(",Ve,".buffer){",he,".disableVertexAttribArray(",Ae,");",Ve,".buffer=null;","}if(",La.map(function(Kt,fr){return Ve+"."+Kt+"!=="+ut[fr]}).join("||"),"){",he,".vertexAttrib4f(",Ae,",",ut,");",La.map(function(Kt,fr){return Ve+"."+Kt+"="+ut[fr]+";"}).join(""),"}")}$e===Ba?dr():$e===Nu?It():(R("if(",$e,"===",Ba,"){"),dr(),R("}else{"),It(),R("}"))}ge.forEach(function(U){var J=U.name,G=re.attributes[J],he;if(G){if(!we(G))return;he=G.append(H,R)}else{if(!we($a))return;var Ae=H.scopeAttrib(J);k.optional(function(){H.assert(R,Ae+".state","missing attribute "+J)}),he={},Object.keys(new me).forEach(function(Ve){he[Ve]=R.def(Ae,".",Ve)})}le(H.link(U),ee(U.info.type),he)})}function jr(H,R,re,ge,we){for(var ne=H.shared,ee=ne.gl,le,U=0;U<ge.length;++U){var J=ge[U],G=J.name,he=J.info.type,Ae=re.uniforms[G],Ve=H.link(J),$e=Ve+".location",Ue;if(Ae){if(!we(Ae))continue;if(Zo(Ae)){var ut=Ae.value;if(k.command(ut!==null&&typeof ut<"u",'missing uniform "'+G+'"',H.commandStr),he===ia||he===Xu){k.command(typeof ut=="function"&&(he===ia&&(ut._reglType==="texture2d"||ut._reglType==="framebuffer")||he===Xu&&(ut._reglType==="textureCube"||ut._reglType==="framebufferCube")),"invalid texture for uniform "+G,H.commandStr);var Bt=H.link(ut._texture||ut.color[0]._texture);R(ee,".uniform1i(",$e,",",Bt+".bind());"),R.exit(Bt,".unbind();")}else if(he===Wa||he===zu||he===Hu){k.optional(function(){k.command(b(ut),"invalid matrix for uniform "+G,H.commandStr),k.command(he===Wa&&ut.length===4||he===zu&&ut.length===9||he===Hu&&ut.length===16,"invalid length for matrix uniform "+G,H.commandStr)});var dr=H.global.def("new Float32Array(["+Array.prototype.slice.call(ut)+"])"),It=2;he===zu?It=3:he===Hu&&(It=4),R(ee,".uniformMatrix",It,"fv(",$e,",false,",dr,");")}else{switch(he){case Bf:k.commandType(ut,"number","uniform "+G,H.commandStr),le="1f";break;case Ha:k.command(b(ut)&&ut.length===2,"uniform "+G,H.commandStr),le="2f";break;case Fu:k.command(b(ut)&&ut.length===3,"uniform "+G,H.commandStr),le="3f";break;case Un:k.command(b(ut)&&ut.length===4,"uniform "+G,H.commandStr),le="4f";break;case Gu:k.commandType(ut,"boolean","uniform "+G,H.commandStr),le="1i";break;case hn:k.commandType(ut,"number","uniform "+G,H.commandStr),le="1i";break;case Xa:k.command(b(ut)&&ut.length===2,"uniform "+G,H.commandStr),le="2i";break;case Zs:k.command(b(ut)&&ut.length===2,"uniform "+G,H.commandStr),le="2i";break;case Va:k.command(b(ut)&&ut.length===3,"uniform "+G,H.commandStr),le="3i";break;case Jn:k.command(b(ut)&&ut.length===3,"uniform "+G,H.commandStr),le="3i";break;case Uu:k.command(b(ut)&&ut.length===4,"uniform "+G,H.commandStr),le="4i";break;case or:k.command(b(ut)&&ut.length===4,"uniform "+G,H.commandStr),le="4i";break}R(ee,".uniform",le,"(",$e,",",b(ut)?Array.prototype.slice.call(ut):ut,");")}continue}else Ue=Ae.append(H,R)}else{if(!we($a))continue;Ue=R.def(ne.uniforms,"[",B.id(G),"]")}he===ia?(k(!Array.isArray(Ue),"must specify a scalar prop for textures"),R("if(",Ue,"&&",Ue,'._reglType==="framebuffer"){',Ue,"=",Ue,".color[0];","}")):he===Xu&&(k(!Array.isArray(Ue),"must specify a scalar prop for cube maps"),R("if(",Ue,"&&",Ue,'._reglType==="framebufferCube"){',Ue,"=",Ue,".color[0];","}")),k.optional(function(){function eo(_o,Pp){H.assert(R,_o,'bad data or missing for uniform "'+G+'".  '+Pp)}function qa(_o){k(!Array.isArray(Ue),"must not specify an array type for uniform"),eo("typeof "+Ue+'==="'+_o+'"',"invalid type, expected "+_o)}function bo(_o,Pp){Array.isArray(Ue)?k(Ue.length===_o,"must have length "+_o):eo(ne.isArrayLike+"("+Ue+")&&"+Ue+".length==="+_o,"invalid vector, should have length "+_o,H.commandStr)}function Ap(_o){k(!Array.isArray(Ue),"must not specify a value type"),eo("typeof "+Ue+'==="function"&&'+Ue+'._reglType==="texture'+(_o===If?"2d":"Cube")+'"',"invalid texture type",H.commandStr)}switch(he){case hn:qa("number");break;case Zs:bo(2);break;case Jn:bo(3);break;case or:bo(4);break;case Bf:qa("number");break;case Ha:bo(2);break;case Fu:bo(3);break;case Un:bo(4);break;case Gu:qa("boolean");break;case Xa:bo(2);break;case Va:bo(3);break;case Uu:bo(4);break;case Wa:bo(4);break;case zu:bo(9);break;case Hu:bo(16);break;case ia:Ap(If);break;case Xu:Ap(kf);break}});var Kt=1;switch(he){case ia:case Xu:var fr=R.def(Ue,"._texture");R(ee,".uniform1i(",$e,",",fr,".bind());"),R.exit(fr,".unbind();");continue;case hn:case Gu:le="1i";break;case Zs:case Xa:le="2i",Kt=2;break;case Jn:case Va:le="3i",Kt=3;break;case or:case Uu:le="4i",Kt=4;break;case Bf:le="1f";break;case Ha:le="2f",Kt=2;break;case Fu:le="3f",Kt=3;break;case Un:le="4f",Kt=4;break;case Wa:le="Matrix2fv";break;case zu:le="Matrix3fv";break;case Hu:le="Matrix4fv";break}if(R(ee,".uniform",le,"(",$e,","),le.charAt(0)==="M"){var Nr=Math.pow(he-Wa+2,2),an=H.global.def("new Float32Array(",Nr,")");Array.isArray(Ue)?R("false,(",Ir(Nr,function(eo){return an+"["+eo+"]="+Ue[eo]}),",",an,")"):R("false,(Array.isArray(",Ue,")||",Ue," instanceof Float32Array)?",Ue,":(",Ir(Nr,function(eo){return an+"["+eo+"]="+Ue+"["+eo+"]"}),",",an,")")}else Kt>1?R(Ir(Kt,function(eo){return Array.isArray(Ue)?Ue[eo]:Ue+"["+eo+"]"})):(k(!Array.isArray(Ue),"uniform value must not be an array"),R(Ue));R(");")}}function $t(H,R,re,ge){var we=H.shared,ne=we.gl,ee=we.draw,le=ge.draw;function U(){var fr=le.elements,Nr,an=R;return fr?((fr.contextDep&&ge.contextDynamic||fr.propDep)&&(an=re),Nr=fr.append(H,an)):Nr=an.def(ee,".",Ti),Nr&&an("if("+Nr+")"+ne+".bindBuffer("+ji+","+Nr+".buffer.buffer);"),Nr}function J(){var fr=le.count,Nr,an=R;return fr?((fr.contextDep&&ge.contextDynamic||fr.propDep)&&(an=re),Nr=fr.append(H,an),k.optional(function(){fr.MISSING&&H.assert(R,"false","missing vertex count"),fr.DYNAMIC&&H.assert(an,Nr+">=0","missing vertex count")})):(Nr=an.def(ee,".",Pi),k.optional(function(){H.assert(an,Nr+">=0","missing vertex count")})),Nr}var G=U();function he(fr){var Nr=le[fr];return Nr?Nr.contextDep&&ge.contextDynamic||Nr.propDep?Nr.append(H,re):Nr.append(H,R):R.def(ee,".",fr)}var Ae=he(Ai),Ve=he(Iu),$e=J();if(typeof $e=="number"){if($e===0)return}else re("if(",$e,"){"),re.exit("}");var Ue,ut;at&&(Ue=he(ku),ut=H.instancing);var Bt=G+".type",dr=le.elements&&Zo(le.elements);function It(){function fr(){re(ut,".drawElementsInstancedANGLE(",[Ae,$e,Bt,Ve+"<<(("+Bt+"-"+np+")>>1)",Ue],");")}function Nr(){re(ut,".drawArraysInstancedANGLE(",[Ae,Ve,$e,Ue],");")}G?dr?fr():(re("if(",G,"){"),fr(),re("}else{"),Nr(),re("}")):Nr()}function Kt(){function fr(){re(ne+".drawElements("+[Ae,$e,Bt,Ve+"<<(("+Bt+"-"+np+")>>1)"]+");")}function Nr(){re(ne+".drawArrays("+[Ae,Ve,$e]+");")}G?dr?fr():(re("if(",G,"){"),fr(),re("}else{"),Nr(),re("}")):Nr()}at&&(typeof Ue!="number"||Ue>=0)?typeof Ue=="string"?(re("if(",Ue,">0){"),It(),re("}else if(",Ue,"<0){"),Kt(),re("}")):It():Kt()}function br(H,R,re,ge,we){var ne=Jt(),ee=ne.proc("body",we);return k.optional(function(){ne.commandStr=R.commandStr,ne.command=ne.link(R.commandStr)}),at&&(ne.instancing=ee.def(ne.shared.extensions,".angle_instanced_arrays")),H(ne,ee,re,ge),ne.compile().body}function Sr(H,R,re,ge){on(H,R),re.useVAO?re.drawVAO?R(H.shared.vao,".setVAO(",re.drawVAO.append(H,R),");"):R(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(R(H.shared.vao,".setVAO(null);"),mn(H,R,re,ge.attributes,function(){return!0})),jr(H,R,re,ge.uniforms,function(){return!0}),$t(H,R,R,re)}function Fr(H,R){var re=H.proc("draw",1);on(H,re),gn(H,re,R.context),Yr(H,re,R.framebuffer),Sn(H,re,R),Bn(H,re,R.state),cr(H,re,R,!1,!0);var ge=R.shader.progVar.append(H,re);if(re(H.shared.gl,".useProgram(",ge,".program);"),R.shader.program)Sr(H,re,R,R.shader.program);else{re(H.shared.vao,".setVAO(null);");var we=H.global.def("{}"),ne=re.def(ge,".id"),ee=re.def(we,"[",ne,"]");re(H.cond(ee).then(ee,".call(this,a0);").else(ee,"=",we,"[",ne,"]=",H.link(function(le){return br(Sr,H,R,le,1)}),"(",ge,");",ee,".call(this,a0);"))}Object.keys(R.state).length>0&&re(H.shared.current,".dirty=true;")}function Qo(H,R,re,ge){H.batchId="a1",on(H,R);function we(){return!0}mn(H,R,re,ge.attributes,we),jr(H,R,re,ge.uniforms,we),$t(H,R,R,re)}function Wn(H,R,re,ge){on(H,R);var we=re.contextDep,ne=R.def(),ee="a0",le="a1",U=R.def();H.shared.props=U,H.batchId=ne;var J=H.scope(),G=H.scope();R(J.entry,"for(",ne,"=0;",ne,"<",le,";++",ne,"){",U,"=",ee,"[",ne,"];",G,"}",J.exit);function he(Bt){return Bt.contextDep&&we||Bt.propDep}function Ae(Bt){return!he(Bt)}if(re.needsContext&&gn(H,G,re.context),re.needsFramebuffer&&Yr(H,G,re.framebuffer),Bn(H,G,re.state,he),re.profile&&he(re.profile)&&cr(H,G,re,!1,!0),ge)re.useVAO?re.drawVAO?he(re.drawVAO)?G(H.shared.vao,".setVAO(",re.drawVAO.append(H,G),");"):J(H.shared.vao,".setVAO(",re.drawVAO.append(H,J),");"):J(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(J(H.shared.vao,".setVAO(null);"),mn(H,J,re,ge.attributes,Ae),mn(H,G,re,ge.attributes,he)),jr(H,J,re,ge.uniforms,Ae),jr(H,G,re,ge.uniforms,he),$t(H,J,G,re);else{var Ve=H.global.def("{}"),$e=re.shader.progVar.append(H,G),Ue=G.def($e,".id"),ut=G.def(Ve,"[",Ue,"]");G(H.shared.gl,".useProgram(",$e,".program);","if(!",ut,"){",ut,"=",Ve,"[",Ue,"]=",H.link(function(Bt){return br(Qo,H,re,Bt,2)}),"(",$e,");}",ut,".call(this,a0[",ne,"],",ne,");")}}function I(H,R){var re=H.proc("batch",2);H.batchId="0",on(H,re);var ge=!1,we=!0;Object.keys(R.context).forEach(function(Ve){ge=ge||R.context[Ve].propDep}),ge||(gn(H,re,R.context),we=!1);var ne=R.framebuffer,ee=!1;ne?(ne.propDep?ge=ee=!0:ne.contextDep&&ge&&(ee=!0),ee||Yr(H,re,ne)):Yr(H,re,null),R.state.viewport&&R.state.viewport.propDep&&(ge=!0);function le(Ve){return Ve.contextDep&&ge||Ve.propDep}Sn(H,re,R),Bn(H,re,R.state,function(Ve){return!le(Ve)}),(!R.profile||!le(R.profile))&&cr(H,re,R,!1,"a1"),R.contextDep=ge,R.needsContext=we,R.needsFramebuffer=ee;var U=R.shader.progVar;if(U.contextDep&&ge||U.propDep)Wn(H,re,R,null);else{var J=U.append(H,re);if(re(H.shared.gl,".useProgram(",J,".program);"),R.shader.program)Wn(H,re,R,R.shader.program);else{re(H.shared.vao,".setVAO(null);");var G=H.global.def("{}"),he=re.def(J,".id"),Ae=re.def(G,"[",he,"]");re(H.cond(Ae).then(Ae,".call(this,a0,a1);").else(Ae,"=",G,"[",he,"]=",H.link(function(Ve){return br(Wn,H,R,Ve,2)}),"(",J,");",Ae,".call(this,a0,a1);"))}}Object.keys(R.state).length>0&&re(H.shared.current,".dirty=true;")}function ke(H,R){var re=H.proc("scope",3);H.batchId="a2";var ge=H.shared,we=ge.current;gn(H,re,R.context),R.framebuffer&&R.framebuffer.append(H,re),Ya(Object.keys(R.state)).forEach(function(ee){var le=R.state[ee],U=le.append(H,re);b(U)?U.forEach(function(J,G){re.set(H.next[ee],"["+G+"]",J)}):re.set(ge.next,"."+ee,U)}),cr(H,re,R,!0,!0),[Ti,Iu,Pi,ku,Ai].forEach(function(ee){var le=R.draw[ee];le&&re.set(ge.draw,"."+ee,""+le.append(H,re))}),Object.keys(R.uniforms).forEach(function(ee){var le=R.uniforms[ee].append(H,re);Array.isArray(le)&&(le="["+le.join()+"]"),re.set(ge.uniforms,"["+B.id(ee)+"]",le)}),Object.keys(R.attributes).forEach(function(ee){var le=R.attributes[ee].append(H,re),U=H.scopeAttrib(ee);Object.keys(new me).forEach(function(J){re.set(U,"."+J,le[J])})}),R.scopeVAO&&re.set(ge.vao,".targetVAO",R.scopeVAO.append(H,re));function ne(ee){var le=R.shader[ee];le&&re.set(ge.shader,"."+ee,le.append(H,re))}ne(Ga),ne(Ua),Object.keys(R.state).length>0&&(re(we,".dirty=true;"),re.exit(we,".dirty=true;")),re("a1(",H.shared.context,",a0,",H.batchId,");")}function Me(H){if(!(typeof H!="object"||b(H))){for(var R=Object.keys(H),re=0;re<R.length;++re)if(_t.isDynamic(H[R[re]]))return!0;return!1}}function Nt(H,R,re){var ge=R.static[re];if(!ge||!Me(ge))return;var we=H.global,ne=Object.keys(ge),ee=!1,le=!1,U=!1,J=H.global.def("{}");ne.forEach(function(he){var Ae=ge[he];if(_t.isDynamic(Ae)){typeof Ae=="function"&&(Ae=ge[he]=_t.unbox(Ae));var Ve=Vn(Ae,null);ee=ee||Ve.thisDep,U=U||Ve.propDep,le=le||Ve.contextDep}else{switch(we(J,".",he,"="),typeof Ae){case"number":we(Ae);break;case"string":we('"',Ae,'"');break;case"object":Array.isArray(Ae)&&we("[",Ae.join(),"]");break;default:we(H.link(Ae));break}we(";")}});function G(he,Ae){ne.forEach(function(Ve){var $e=ge[Ve];if(_t.isDynamic($e)){var Ue=he.invoke(Ae,$e);Ae(J,".",Ve,"=",Ue,";")}})}R.dynamic[re]=new _t.DynamicVariable(zs,{thisDep:ee,contextDep:le,propDep:U,ref:J,append:G}),delete R.static[re]}function Er(H,R,re,ge,we){var ne=Jt();ne.stats=ne.link(we),Object.keys(R.static).forEach(function(le){Nt(ne,R,le)}),Dh.forEach(function(le){Nt(ne,H,le)});var ee=fn(H,R,re,ge,ne);return Fr(ne,ee),ke(ne,ee),I(ne,ee),f(ne.compile(),{destroy:function(){ee.shader.program.destroy()}})}return{next:St,current:qe,procs:function(){var H=Jt(),R=H.proc("poll"),re=H.proc("refresh"),ge=H.block();R(ge),re(ge);var we=H.shared,ne=we.gl,ee=we.next,le=we.current;ge(le,".dirty=false;"),Yr(H,R),Yr(H,re,null,!0);var U;at&&(U=H.link(at)),Z.oes_vertex_array_object&&re(H.link(Z.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var J=0;J<Ie.maxAttributes;++J){var G=re.def(we.attributes,"[",J,"]"),he=H.cond(G,".buffer");he.then(ne,".enableVertexAttribArray(",J,");",ne,".bindBuffer(",Qn,",",G,".buffer.buffer);",ne,".vertexAttribPointer(",J,",",G,".size,",G,".type,",G,".normalized,",G,".stride,",G,".offset);").else(ne,".disableVertexAttribArray(",J,");",ne,".vertexAttrib4f(",J,",",G,".x,",G,".y,",G,".z,",G,".w);",G,".buffer=null;"),re(he),at&&re(U,".vertexAttribDivisorANGLE(",J,",",G,".divisor);")}return re(H.shared.vao,".currentVAO=null;",H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"),Object.keys(ht).forEach(function(Ae){var Ve=ht[Ae],$e=ge.def(ee,".",Ae),Ue=H.block();Ue("if(",$e,"){",ne,".enable(",Ve,")}else{",ne,".disable(",Ve,")}",le,".",Ae,"=",$e,";"),re(Ue),R("if(",$e,"!==",le,".",Ae,"){",Ue,"}")}),Object.keys(Je).forEach(function(Ae){var Ve=Je[Ae],$e=qe[Ae],Ue,ut,Bt=H.block();if(Bt(ne,".",Ve,"("),b($e)){var dr=$e.length;Ue=H.global.def(ee,".",Ae),ut=H.global.def(le,".",Ae),Bt(Ir(dr,function(It){return Ue+"["+It+"]"}),");",Ir(dr,function(It){return ut+"["+It+"]="+Ue+"["+It+"];"}).join("")),R("if(",Ir(dr,function(It){return Ue+"["+It+"]!=="+ut+"["+It+"]"}).join("||"),"){",Bt,"}")}else Ue=ge.def(ee,".",Ae),ut=ge.def(le,".",Ae),Bt(Ue,");",le,".",Ae,"=",Ue,";"),R("if(",Ue,"!==",ut,"){",Bt,"}");re(Bt)}),H.compile()}(),compile:Er}}function wp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Bh=34918,xp=34919,Wu=35007,Fh=function(x,B){if(!B.ext_disjoint_timer_query)return null;var Z=[];function Ie(){return Z.pop()||B.ext_disjoint_timer_query.createQueryEXT()}function Xe(at){Z.push(at)}var Ce=[];function Be(at){var Ot=Ie();B.ext_disjoint_timer_query.beginQueryEXT(Wu,Ot),Ce.push(Ot),rt(Ce.length-1,Ce.length,at)}function tt(){B.ext_disjoint_timer_query.endQueryEXT(Wu)}function nt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ct=[];function it(){return ct.pop()||new nt}function dt(at){ct.push(at)}var gt=[];function rt(at,Ot,qe){var St=it();St.startQueryIndex=at,St.endQueryIndex=Ot,St.sum=0,St.stats=qe,gt.push(St)}var pt=[],me=[];function Fe(){var at,Ot,qe=Ce.length;if(qe!==0){me.length=Math.max(me.length,qe+1),pt.length=Math.max(pt.length,qe+1),pt[0]=0,me[0]=0;var St=0;for(at=0,Ot=0;Ot<Ce.length;++Ot){var Qe=Ce[Ot];B.ext_disjoint_timer_query.getQueryObjectEXT(Qe,xp)?(St+=B.ext_disjoint_timer_query.getQueryObjectEXT(Qe,Bh),Xe(Qe)):Ce[at++]=Qe,pt[Ot+1]=St,me[Ot+1]=at}for(Ce.length=at,at=0,Ot=0;Ot<gt.length;++Ot){var ht=gt[Ot],Je=ht.startQueryIndex,yt=ht.endQueryIndex;ht.sum+=pt[yt]-pt[Je];var zt=me[Je],Zt=me[yt];Zt===zt?(ht.stats.gpuTime+=ht.sum/1e6,dt(ht)):(ht.startQueryIndex=zt,ht.endQueryIndex=Zt,gt[at++]=ht)}gt.length=at}}return{beginQuery:Be,endQuery:tt,pushScopeStats:rt,update:Fe,getNumPendingQueries:function(){return Ce.length},clear:function(){Z.push.apply(Z,Ce);for(var at=0;at<Z.length;at++)B.ext_disjoint_timer_query.deleteQueryEXT(Z[at]);Ce.length=0,Z.length=0},restore:function(){Ce.length=0,Z.length=0}}},Gh=16384,Hf=256,rc=1024,Sp=34962,nc="webglcontextlost",oc="webglcontextrestored",Yu=1,ic=2,Tp=3;function Ka(x,B){for(var Z=0;Z<x.length;++Z)if(x[Z]===B)return Z;return-1}function ac(x){var B=yr(x);if(!B)return null;var Z=B.gl,Ie=Z.getContextAttributes(),Xe=Z.isContextLost(),Ce=Xr(Z,B);if(!Ce)return null;var Be=On(),tt=wp(),nt=Ce.extensions,ct=Fh(Z,nt),it=Tr(),dt=Z.drawingBufferWidth,gt=Z.drawingBufferHeight,rt={tick:0,time:0,viewportWidth:dt,viewportHeight:gt,framebufferWidth:dt,framebufferHeight:gt,drawingBufferWidth:dt,drawingBufferHeight:gt,pixelRatio:B.pixelRatio},pt={},me={elements:null,primitive:4,count:-1,offset:0,instances:-1},Fe=_s(Z,nt),at=Ao(Z,tt,B,qe),Ot=jh(Z,nt,Fe,tt,at);function qe($t){return Ot.destroyBuffer($t)}var St=Ts(Z,nt,at,tt),Qe=Mh(Z,Be,tt,B),ht=xn(Z,nt,Fe,function(){zt.procs.poll()},rt,tt,B),Je=zl(Z,nt,Fe,tt,B),yt=Jl(Z,nt,Fe,ht,Je,tt),zt=Lh(Z,Be,nt,Fe,at,St,ht,yt,pt,Ot,Qe,me,rt,ct,B),Zt=Rh(Z,yt,zt.procs.poll,rt,Ie,nt,Fe),mt=zt.next,Ze=Z.canvas,Ye=[],Jt=[],be=[],kt=[B.onDestroy],mr=null;function ir(){if(Ye.length===0){ct&&ct.update(),mr=null;return}mr=Vt.next(ir),Bn();for(var $t=Ye.length-1;$t>=0;--$t){var br=Ye[$t];br&&br(rt,null,0)}Z.flush(),ct&&ct.update()}function vr(){!mr&&Ye.length>0&&(mr=Vt.next(ir))}function Mr(){mr&&(Vt.cancel(ir),mr=null)}function cn($t){$t.preventDefault(),Xe=!0,Mr(),Jt.forEach(function(br){br()})}function En($t){Z.getError(),Xe=!1,Ce.restore(),Qe.restore(),at.restore(),ht.restore(),Je.restore(),yt.restore(),Ot.restore(),ct&&ct.restore(),zt.procs.refresh(),vr(),be.forEach(function(br){br()})}Ze&&(Ze.addEventListener(nc,cn,!1),Ze.addEventListener(oc,En,!1));function xr(){Ye.length=0,Mr(),Ze&&(Ze.removeEventListener(nc,cn),Ze.removeEventListener(oc,En)),Qe.clear(),yt.clear(),Je.clear(),ht.clear(),St.clear(),at.clear(),Ot.clear(),ct&&ct.clear(),kt.forEach(function($t){$t()})}function vn($t){k(!!$t,"invalid args to regl({...})"),k.type($t,"object","invalid args to regl({...})");function br(we){var ne=f({},we);delete ne.uniforms,delete ne.attributes,delete ne.context,delete ne.vao,"stencil"in ne&&ne.stencil.op&&(ne.stencil.opBack=ne.stencil.opFront=ne.stencil.op,delete ne.stencil.op);function ee(le){if(le in ne){var U=ne[le];delete ne[le],Object.keys(U).forEach(function(J){ne[le+"."+J]=U[J]})}}return ee("blend"),ee("depth"),ee("cull"),ee("stencil"),ee("polygonOffset"),ee("scissor"),ee("sample"),"vao"in we&&(ne.vao=we.vao),ne}function Sr(we,ne){var ee={},le={};return Object.keys(we).forEach(function(U){var J=we[U];if(_t.isDynamic(J)){le[U]=_t.unbox(J,U);return}else if(ne&&Array.isArray(J)){for(var G=0;G<J.length;++G)if(_t.isDynamic(J[G])){le[U]=_t.unbox(J,U);return}}ee[U]=J}),{dynamic:le,static:ee}}var Fr=Sr($t.context||{},!0),Qo=Sr($t.uniforms||{},!0),Wn=Sr($t.attributes||{},!1),I=Sr(br($t),!1),ke={gpuTime:0,cpuTime:0,count:0},Me=zt.compile(I,Wn,Qo,Fr,ke),Nt=Me.draw,Er=Me.batch,H=Me.scope,R=[];function re(we){for(;R.length<we;)R.push(null);return R}function ge(we,ne){var ee;if(Xe&&k.raise("context lost"),typeof we=="function")return H.call(this,null,we,0);if(typeof ne=="function")if(typeof we=="number")for(ee=0;ee<we;++ee)H.call(this,null,ne,ee);else if(Array.isArray(we))for(ee=0;ee<we.length;++ee)H.call(this,we[ee],ne,ee);else return H.call(this,we,ne,0);else if(typeof we=="number"){if(we>0)return Er.call(this,re(we|0),we|0)}else if(Array.isArray(we)){if(we.length)return Er.call(this,we,we.length)}else return Nt.call(this,we)}return f(ge,{stats:ke,destroy:function(){Me.destroy()}})}var Wr=yt.setFBO=vn({framebuffer:_t.define.call(null,Yu,"framebuffer")});function fn($t,br){var Sr=0;zt.procs.poll();var Fr=br.color;Fr&&(Z.clearColor(+Fr[0]||0,+Fr[1]||0,+Fr[2]||0,+Fr[3]||0),Sr|=Gh),"depth"in br&&(Z.clearDepth(+br.depth),Sr|=Hf),"stencil"in br&&(Z.clearStencil(br.stencil|0),Sr|=rc),k(!!Sr,"called regl.clear with no buffer specified"),Z.clear(Sr)}function gn($t){if(k(typeof $t=="object"&&$t,"regl.clear() takes an object as input"),"framebuffer"in $t)if($t.framebuffer&&$t.framebuffer_reglType==="framebufferCube")for(var br=0;br<6;++br)Wr(f({framebuffer:$t.framebuffer.faces[br]},$t),fn);else Wr($t,fn);else fn(null,$t)}function Yr($t){k.type($t,"function","regl.frame() callback must be a function"),Ye.push($t);function br(){var Sr=Ka(Ye,$t);k(Sr>=0,"cannot cancel a frame twice");function Fr(){var Qo=Ka(Ye,Fr);Ye[Qo]=Ye[Ye.length-1],Ye.length-=1,Ye.length<=0&&Mr()}Ye[Sr]=Fr}return vr(),{cancel:br}}function Sn(){var $t=mt.viewport,br=mt.scissor_box;$t[0]=$t[1]=br[0]=br[1]=0,rt.viewportWidth=rt.framebufferWidth=rt.drawingBufferWidth=$t[2]=br[2]=Z.drawingBufferWidth,rt.viewportHeight=rt.framebufferHeight=rt.drawingBufferHeight=$t[3]=br[3]=Z.drawingBufferHeight}function Bn(){rt.tick+=1,rt.time=cr(),Sn(),zt.procs.poll()}function on(){ht.refresh(),Sn(),zt.procs.refresh(),ct&&ct.update()}function cr(){return(Tr()-it)/1e3}on();function mn($t,br){k.type(br,"function","listener callback must be a function");var Sr;switch($t){case"frame":return Yr(br);case"lost":Sr=Jt;break;case"restore":Sr=be;break;case"destroy":Sr=kt;break;default:k.raise("invalid event, must be one of frame,lost,restore,destroy")}return Sr.push(br),{cancel:function(){for(var Fr=0;Fr<Sr.length;++Fr)if(Sr[Fr]===br){Sr[Fr]=Sr[Sr.length-1],Sr.pop();return}}}}var jr=f(vn,{clear:gn,prop:_t.define.bind(null,Yu),context:_t.define.bind(null,ic),this:_t.define.bind(null,Tp),draw:vn({}),buffer:function($t){return at.create($t,Sp,!1,!1)},elements:function($t){return St.create($t,!1)},texture:ht.create2D,cube:ht.createCube,renderbuffer:Je.create,framebuffer:yt.create,framebufferCube:yt.createCube,vao:Ot.createVAO,attributes:Ie,frame:Yr,on:mn,limits:Fe,hasExtension:function($t){return Fe.extensions.indexOf($t.toLowerCase())>=0},read:Zt,destroy:xr,_gl:Z,_refresh:on,poll:function(){Bn(),ct&&ct.update()},now:cr,stats:tt});return B.onDone(null,jr),jr}return ac})})(_N);var va,ul,ga,ti,sl,ou,cl,wd,Bi,Qu,to,Fi,Gi,xd;va={},Mt(va,At.POINTS,"points"),Mt(va,At.LINES,"lines"),Mt(va,At.LINE_LOOP,"line loop"),Mt(va,At.LINE_STRIP,"line strip"),Mt(va,At.TRIANGLES,"triangles"),Mt(va,At.TRIANGLE_FAN,"triangle fan"),Mt(va,At.TRIANGLE_STRIP,"triangle strip");ul={},Mt(ul,At.STATIC_DRAW,"static"),Mt(ul,At.DYNAMIC_DRAW,"dynamic"),Mt(ul,At.STREAM_DRAW,"stream");ga={},Mt(ga,At.BYTE,"int8"),Mt(ga,At.UNSIGNED_INT,"int16"),Mt(ga,At.INT,"int32"),Mt(ga,At.UNSIGNED_BYTE,"uint8"),Mt(ga,At.UNSIGNED_SHORT,"uint16"),Mt(ga,At.UNSIGNED_INT,"uint32"),Mt(ga,At.FLOAT,"float");ti={},Mt(ti,At.ALPHA,"alpha"),Mt(ti,At.LUMINANCE,"luminance"),Mt(ti,At.LUMINANCE_ALPHA,"luminance alpha"),Mt(ti,At.RGB,"rgb"),Mt(ti,At.RGBA,"rgba"),Mt(ti,At.RGBA4,"rgba4"),Mt(ti,At.RGB5_A1,"rgb5 a1"),Mt(ti,At.RGB565,"rgb565"),Mt(ti,At.DEPTH_COMPONENT,"depth"),Mt(ti,At.DEPTH_STENCIL,"depth stencil");sl={},Mt(sl,At.DONT_CARE,"dont care"),Mt(sl,At.NICEST,"nice"),Mt(sl,At.FASTEST,"fast");ou={},Mt(ou,At.NEAREST,"nearest"),Mt(ou,At.LINEAR,"linear"),Mt(ou,At.LINEAR_MIPMAP_LINEAR,"mipmap"),Mt(ou,At.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Mt(ou,At.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Mt(ou,At.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");cl={},Mt(cl,At.REPEAT,"repeat"),Mt(cl,At.CLAMP_TO_EDGE,"clamp"),Mt(cl,At.MIRRORED_REPEAT,"mirror");wd={},Mt(wd,At.NONE,"none"),Mt(wd,At.BROWSER_DEFAULT_WEBGL,"browser");Bi={},Mt(Bi,At.NEVER,"never"),Mt(Bi,At.ALWAYS,"always"),Mt(Bi,At.LESS,"less"),Mt(Bi,At.LEQUAL,"lequal"),Mt(Bi,At.GREATER,"greater"),Mt(Bi,At.GEQUAL,"gequal"),Mt(Bi,At.EQUAL,"equal"),Mt(Bi,At.NOTEQUAL,"notequal");Qu={},Mt(Qu,At.FUNC_ADD,"add"),Mt(Qu,At.MIN_EXT,"min"),Mt(Qu,At.MAX_EXT,"max"),Mt(Qu,At.FUNC_SUBTRACT,"subtract"),Mt(Qu,At.FUNC_REVERSE_SUBTRACT,"reverse subtract");to={},Mt(to,At.ZERO,"zero"),Mt(to,At.ONE,"one"),Mt(to,At.SRC_COLOR,"src color"),Mt(to,At.ONE_MINUS_SRC_COLOR,"one minus src color"),Mt(to,At.SRC_ALPHA,"src alpha"),Mt(to,At.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Mt(to,At.DST_COLOR,"dst color"),Mt(to,At.ONE_MINUS_DST_COLOR,"one minus dst color"),Mt(to,At.DST_ALPHA,"dst alpha"),Mt(to,At.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Mt(to,At.CONSTANT_COLOR,"constant color"),Mt(to,At.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Mt(to,At.CONSTANT_ALPHA,"constant alpha"),Mt(to,At.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Mt(to,At.SRC_ALPHA_SATURATE,"src alpha saturate");Fi={},Mt(Fi,At.NEVER,"never"),Mt(Fi,At.ALWAYS,"always"),Mt(Fi,At.LESS,"less"),Mt(Fi,At.LEQUAL,"lequal"),Mt(Fi,At.GREATER,"greater"),Mt(Fi,At.GEQUAL,"gequal"),Mt(Fi,At.EQUAL,"equal"),Mt(Fi,At.NOTEQUAL,"notequal");Gi={},Mt(Gi,At.ZERO,"zero"),Mt(Gi,At.KEEP,"keep"),Mt(Gi,At.REPLACE,"replace"),Mt(Gi,At.INVERT,"invert"),Mt(Gi,At.INCR,"increment"),Mt(Gi,At.DECR,"decrement"),Mt(Gi,At.INCR_WRAP,"increment wrap"),Mt(Gi,At.DECR_WRAP,"decrement wrap");xd={},Mt(xd,At.FRONT,"front"),Mt(xd,At.BACK,"back");var EN=Function.prototype,ON=EN.toString;ON.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;export{xT as B,PN as C,NN as D,rT as E,cE as G,AN as I,jN as M,vT as N,QS as P,MN as S,sT as U,RN as a,DN as b,JS as c,eT as d,tT as e,nT as f,oT as g,iT as h,aT as i,uT as j,cT as k,Ht as l,fT as m,lT as n,pT as o,dT as p,gT as q,mT as r,bT as s,ET as t,OT as u};
